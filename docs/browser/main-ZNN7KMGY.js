import{$ as O,$a as cp,$b as gy,A as ip,Aa as To,Ab as hr,Ac as pr,B as fs,Ba as dr,Bb as Gc,Bc as Ei,C as or,Ca as gl,Cb as Q,Cc as Yc,D as ms,Da as ws,Db as kt,Dc as Dy,E as op,Ea as ys,Eb as at,Ec as fr,F as Hi,Fa as Qw,Fb as ay,G as vs,Ga as Xw,Gb as ly,H as nn,Ha as Zw,Hb as dy,I as sn,Ia as Jw,Ib as lt,J as rr,Ja as ey,Jb as mi,K as rp,Ka as ty,Kb as cy,Kc as Ry,L as Ww,La as iy,Lb as Vc,Lc as wl,M as Uw,Ma as Ao,Mb as uy,Mc as Qc,N as dl,Na as dp,Nb as _s,O as to,Oa as oy,Ob as mp,P as Ft,Pa as kc,Pb as vp,Q as it,Qa as ry,Qb as Cp,R as ht,Ra as pl,Rb as Hc,Rc as My,S as Pe,Sa as z,Sb as hy,Sc as Xc,T as nr,Ta as W,Tb as Bc,U as sr,Ua as Lc,Ub as Wc,Uc as Ty,V as H,Va as Nc,Vb as wp,W as oe,Wa as fl,Wb as Uc,X as jw,Xa as bs,Xb as yp,Y as Z,Ya as Ss,Yb as bp,Z as np,Za as zc,Zb as ro,Zc as Ay,_ as F,_a as ee,_b as jc,a as L,aa as sp,ab as Io,ac as Zt,b as we,ba as Cs,bb as up,bc as py,c as Zg,ca as cl,cb as Bt,cc as fy,d as tr,da as ul,db as oo,dc as _i,e as Vw,ea as Ve,eb as ny,ec as my,f as hs,fa as Me,fb as hp,fc as vy,g as Jg,ga as re,gb as ml,gc as an,h as ep,ha as ye,hb as Ee,hc as Cy,i as pe,ia as qw,ib as gt,ic as wy,j as Pt,ja as ar,jb as U,jc as fe,k as ir,ka as Kw,kb as cr,kc as yy,l as vt,la as lr,lb as fi,lc as Cl,m as Y,ma as io,mb as Xt,mc as by,n as al,na as Ot,nb as gp,nc as Sy,o as tp,oa as wt,ob as G,oc as ln,p as Hw,pa as yt,pb as B,pc as qc,q as ve,qa as Bi,qb as le,qc as Po,r as gs,ra as Oc,rb as pp,rc as no,s as Et,sa as Ht,sb as fp,sc as Fo,t as Mo,ta as ap,tb as Dt,tc as gr,u as Fc,ua as Te,ub as vl,uc as xy,v as ps,va as M,vb as sy,vc as _y,w as Bw,wa as lp,wb as ne,wc as Kc,x as rn,xa as $w,xb as ie,xc as Ey,y as ll,ya as hl,yb as xs,yc as $c,z as Ct,za as Yw,zb as ur,zc as Es}from"./chunk-DEBUSY5J.js";var bl=class{},Jc=class{},dn=class t{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(i=>{let o=i.indexOf(":");if(o>0){let r=i.slice(0,o),n=r.toLowerCase(),s=i.slice(o+1).trim();this.maybeSetNormalizedName(r,n),this.headers.has(n)?this.headers.get(n).push(s):this.headers.set(n,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((i,o)=>{this.setHeaderEntries(o,i)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([i,o])=>{this.setHeaderEntries(i,o)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let i=this.headers.get(e.toLowerCase());return i&&i.length>0?i[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,i){return this.clone({name:e,value:i,op:"a"})}set(e,i){return this.clone({name:e,value:i,op:"s"})}delete(e,i){return this.clone({name:e,value:i,op:"d"})}maybeSetNormalizedName(e,i){this.normalizedNames.has(i)||this.normalizedNames.set(i,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(i=>{this.headers.set(i,e.headers.get(i)),this.normalizedNames.set(i,e.normalizedNames.get(i))})}clone(e){let i=new t;return i.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,i.lazyUpdate=(this.lazyUpdate||[]).concat([e]),i}applyUpdate(e){let i=e.name.toLowerCase();switch(e.op){case"a":case"s":let o=e.value;if(typeof o=="string"&&(o=[o]),o.length===0)return;this.maybeSetNormalizedName(e.name,i);let r=(e.op==="a"?this.headers.get(i):void 0)||[];r.push(...o),this.headers.set(i,r);break;case"d":let n=e.value;if(!n)this.headers.delete(i),this.normalizedNames.delete(i);else{let s=this.headers.get(i);if(!s)return;s=s.filter(a=>n.indexOf(a)===-1),s.length===0?(this.headers.delete(i),this.normalizedNames.delete(i)):this.headers.set(i,s)}break}}setHeaderEntries(e,i){let o=(Array.isArray(i)?i:[i]).map(n=>n.toString()),r=e.toLowerCase();this.headers.set(r,o),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(i=>e(this.normalizedNames.get(i),this.headers.get(i)))}};var xp=class{encodeKey(e){return Iy(e)}encodeValue(e){return Iy(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function AT(t,e){let i=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(r=>{let n=r.indexOf("="),[s,a]=n==-1?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,n)),e.decodeValue(r.slice(n+1))],l=i.get(s)||[];l.push(a),i.set(s,l)}),i}var IT=/%(\d[a-f0-9])/gi,PT={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Iy(t){return encodeURIComponent(t).replace(IT,(e,i)=>PT[i]??e)}function Zc(t){return`${t}`}var mr=class t{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new xp,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=AT(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(i=>{let o=e.fromObject[i],r=Array.isArray(o)?o.map(Zc):[Zc(o)];this.map.set(i,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let i=this.map.get(e);return i?i[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,i){return this.clone({param:e,value:i,op:"a"})}appendAll(e){let i=[];return Object.keys(e).forEach(o=>{let r=e[o];Array.isArray(r)?r.forEach(n=>{i.push({param:o,value:n,op:"a"})}):i.push({param:o,value:r,op:"a"})}),this.clone(i)}set(e,i){return this.clone({param:e,value:i,op:"s"})}delete(e,i){return this.clone({param:e,value:i,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let i=this.encoder.encodeKey(e);return this.map.get(e).map(o=>i+"="+this.encoder.encodeValue(o)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let i=new t({encoder:this.encoder});return i.cloneFrom=this.cloneFrom||this,i.updates=(this.updates||[]).concat(e),i}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let i=(e.op==="a"?this.map.get(e.param):void 0)||[];i.push(Zc(e.value)),this.map.set(e.param,i);break;case"d":if(e.value!==void 0){let o=this.map.get(e.param)||[],r=o.indexOf(Zc(e.value));r!==-1&&o.splice(r,1),o.length>0?this.map.set(e.param,o):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var _p=class{constructor(){this.map=new Map}set(e,i){return this.map.set(e,i),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function FT(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function Py(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function Fy(t){return typeof Blob<"u"&&t instanceof Blob}function Oy(t){return typeof FormData<"u"&&t instanceof FormData}function OT(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var yl=class t{constructor(e,i,o,r){this.url=i,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let n;if(FT(this.method)||r?(this.body=o!==void 0?o:null,n=r):n=o,n&&(this.reportProgress=!!n.reportProgress,this.withCredentials=!!n.withCredentials,n.responseType&&(this.responseType=n.responseType),n.headers&&(this.headers=n.headers),n.context&&(this.context=n.context),n.params&&(this.params=n.params),this.transferCache=n.transferCache),this.headers??=new dn,this.context??=new _p,!this.params)this.params=new mr,this.urlWithParams=i;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=i;else{let a=i.indexOf("?"),l=a===-1?"?":a<i.length-1?"&":"";this.urlWithParams=i+l+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||Py(this.body)||Fy(this.body)||Oy(this.body)||OT(this.body)?this.body:this.body instanceof mr?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||Oy(this.body)?null:Fy(this.body)?this.body.type||null:Py(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof mr?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let i=e.method||this.method,o=e.url||this.url,r=e.responseType||this.responseType,n=e.transferCache??this.transferCache,s=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,l=e.reportProgress??this.reportProgress,d=e.headers||this.headers,c=e.params||this.params,u=e.context??this.context;return e.setHeaders!==void 0&&(d=Object.keys(e.setHeaders).reduce((h,p)=>h.set(p,e.setHeaders[p]),d)),e.setParams&&(c=Object.keys(e.setParams).reduce((h,p)=>h.set(p,e.setParams[p]),c)),new t(i,o,s,{params:c,headers:d,context:u,reportProgress:l,responseType:r,withCredentials:a,transferCache:n})}},Ds=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(Ds||{}),Sl=class{constructor(e,i=iu.Ok,o="OK"){this.headers=e.headers||new dn,this.status=e.status!==void 0?e.status:i,this.statusText=e.statusText||o,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},Ep=class t extends Sl{constructor(e={}){super(e),this.type=Ds.ResponseHeader}clone(e={}){return new t({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},eu=class t extends Sl{constructor(e={}){super(e),this.type=Ds.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},tu=class extends Sl{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},iu=function(t){return t[t.Continue=100]="Continue",t[t.SwitchingProtocols=101]="SwitchingProtocols",t[t.Processing=102]="Processing",t[t.EarlyHints=103]="EarlyHints",t[t.Ok=200]="Ok",t[t.Created=201]="Created",t[t.Accepted=202]="Accepted",t[t.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",t[t.NoContent=204]="NoContent",t[t.ResetContent=205]="ResetContent",t[t.PartialContent=206]="PartialContent",t[t.MultiStatus=207]="MultiStatus",t[t.AlreadyReported=208]="AlreadyReported",t[t.ImUsed=226]="ImUsed",t[t.MultipleChoices=300]="MultipleChoices",t[t.MovedPermanently=301]="MovedPermanently",t[t.Found=302]="Found",t[t.SeeOther=303]="SeeOther",t[t.NotModified=304]="NotModified",t[t.UseProxy=305]="UseProxy",t[t.Unused=306]="Unused",t[t.TemporaryRedirect=307]="TemporaryRedirect",t[t.PermanentRedirect=308]="PermanentRedirect",t[t.BadRequest=400]="BadRequest",t[t.Unauthorized=401]="Unauthorized",t[t.PaymentRequired=402]="PaymentRequired",t[t.Forbidden=403]="Forbidden",t[t.NotFound=404]="NotFound",t[t.MethodNotAllowed=405]="MethodNotAllowed",t[t.NotAcceptable=406]="NotAcceptable",t[t.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",t[t.RequestTimeout=408]="RequestTimeout",t[t.Conflict=409]="Conflict",t[t.Gone=410]="Gone",t[t.LengthRequired=411]="LengthRequired",t[t.PreconditionFailed=412]="PreconditionFailed",t[t.PayloadTooLarge=413]="PayloadTooLarge",t[t.UriTooLong=414]="UriTooLong",t[t.UnsupportedMediaType=415]="UnsupportedMediaType",t[t.RangeNotSatisfiable=416]="RangeNotSatisfiable",t[t.ExpectationFailed=417]="ExpectationFailed",t[t.ImATeapot=418]="ImATeapot",t[t.MisdirectedRequest=421]="MisdirectedRequest",t[t.UnprocessableEntity=422]="UnprocessableEntity",t[t.Locked=423]="Locked",t[t.FailedDependency=424]="FailedDependency",t[t.TooEarly=425]="TooEarly",t[t.UpgradeRequired=426]="UpgradeRequired",t[t.PreconditionRequired=428]="PreconditionRequired",t[t.TooManyRequests=429]="TooManyRequests",t[t.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",t[t.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",t[t.InternalServerError=500]="InternalServerError",t[t.NotImplemented=501]="NotImplemented",t[t.BadGateway=502]="BadGateway",t[t.ServiceUnavailable=503]="ServiceUnavailable",t[t.GatewayTimeout=504]="GatewayTimeout",t[t.HttpVersionNotSupported=505]="HttpVersionNotSupported",t[t.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",t[t.InsufficientStorage=507]="InsufficientStorage",t[t.LoopDetected=508]="LoopDetected",t[t.NotExtended=510]="NotExtended",t[t.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",t}(iu||{});function Sp(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache}}var kT=(()=>{let e=class e{constructor(o){this.handler=o}request(o,r,n={}){let s;if(o instanceof yl)s=o;else{let d;n.headers instanceof dn?d=n.headers:d=new dn(n.headers);let c;n.params&&(n.params instanceof mr?c=n.params:c=new mr({fromObject:n.params})),s=new yl(o,r,n.body!==void 0?n.body:null,{headers:d,context:n.context,params:c,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials,transferCache:n.transferCache})}let a=Y(s).pipe(or(d=>this.handler.handle(d)));if(o instanceof yl||n.observe==="events")return a;let l=a.pipe(Ct(d=>d instanceof eu));switch(n.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return l.pipe(ve(d=>{if(d.body!==null&&!(d.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return d.body}));case"blob":return l.pipe(ve(d=>{if(d.body!==null&&!(d.body instanceof Blob))throw new Error("Response is not a Blob.");return d.body}));case"text":return l.pipe(ve(d=>{if(d.body!==null&&typeof d.body!="string")throw new Error("Response is not a string.");return d.body}));case"json":default:return l.pipe(ve(d=>d.body))}case"response":return l;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(o,r={}){return this.request("DELETE",o,r)}get(o,r={}){return this.request("GET",o,r)}head(o,r={}){return this.request("HEAD",o,r)}jsonp(o,r){return this.request("JSONP",o,{params:new mr().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(o,r={}){return this.request("OPTIONS",o,r)}patch(o,r,n={}){return this.request("PATCH",o,Sp(n,r))}post(o,r,n={}){return this.request("POST",o,Sp(n,r))}put(o,r,n={}){return this.request("PUT",o,Sp(n,r))}};e.\u0275fac=function(r){return new(r||e)(F(bl))},e.\u0275prov=H({token:e,factory:e.\u0275fac});let t=e;return t})();function zy(t,e){return e(t)}function LT(t,e){return(i,o)=>e.intercept(i,{handle:r=>t(r,o)})}function NT(t,e,i){return(o,r)=>io(i,()=>e(o,n=>t(n,r)))}var zT=new Z(""),Dp=new Z(""),GT=new Z(""),VT=new Z("");function HT(){let t=null;return(e,i)=>{t===null&&(t=(O(zT,{optional:!0})??[]).reduceRight(LT,zy));let o=O(ml),r=o.add();return t(e,i).pipe(sn(()=>o.remove(r)))}}var ky=(()=>{let e=class e extends bl{constructor(o,r){super(),this.backend=o,this.injector=r,this.chain=null,this.pendingTasks=O(ml);let n=O(VT,{optional:!0});this.backend=n??o}handle(o){if(this.chain===null){let n=Array.from(new Set([...this.injector.get(Dp),...this.injector.get(GT,[])]));this.chain=n.reduceRight((s,a)=>NT(s,a,this.injector),zy)}let r=this.pendingTasks.add();return this.chain(o,n=>this.backend.handle(n)).pipe(sn(()=>this.pendingTasks.remove(r)))}};e.\u0275fac=function(r){return new(r||e)(F(Jc),F(lr))},e.\u0275prov=H({token:e,factory:e.\u0275fac});let t=e;return t})();var BT=/^\)\]\}',?\n/;function WT(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}var Ly=(()=>{let e=class e{constructor(o){this.xhrFactory=o}handle(o){if(o.method==="JSONP")throw new Pe(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?vt(r.\u0275loadImpl()):Y(null)).pipe(Ft(()=>new hs(s=>{let a=r.build();if(a.open(o.method,o.urlWithParams),o.withCredentials&&(a.withCredentials=!0),o.headers.forEach((w,b)=>a.setRequestHeader(w,b.join(","))),o.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!o.headers.has("Content-Type")){let w=o.detectContentTypeHeader();w!==null&&a.setRequestHeader("Content-Type",w)}if(o.responseType){let w=o.responseType.toLowerCase();a.responseType=w!=="json"?w:"text"}let l=o.serializeBody(),d=null,c=()=>{if(d!==null)return d;let w=a.statusText||"OK",b=new dn(a.getAllResponseHeaders()),y=WT(a)||o.url;return d=new Ep({headers:b,status:a.status,statusText:w,url:y}),d},u=()=>{let{headers:w,status:b,statusText:y,url:_}=c(),x=null;b!==iu.NoContent&&(x=typeof a.response>"u"?a.responseText:a.response),b===0&&(b=x?iu.Ok:0);let E=b>=200&&b<300;if(o.responseType==="json"&&typeof x=="string"){let D=x;x=x.replace(BT,"");try{x=x!==""?JSON.parse(x):null}catch(R){x=D,E&&(E=!1,x={error:R,text:x})}}E?(s.next(new eu({body:x,headers:w,status:b,statusText:y,url:_||void 0})),s.complete()):s.error(new tu({error:x,headers:w,status:b,statusText:y,url:_||void 0}))},h=w=>{let{url:b}=c(),y=new tu({error:w,status:a.status||0,statusText:a.statusText||"Unknown Error",url:b||void 0});s.error(y)},p=!1,m=w=>{p||(s.next(c()),p=!0);let b={type:Ds.DownloadProgress,loaded:w.loaded};w.lengthComputable&&(b.total=w.total),o.responseType==="text"&&a.responseText&&(b.partialText=a.responseText),s.next(b)},C=w=>{let b={type:Ds.UploadProgress,loaded:w.loaded};w.lengthComputable&&(b.total=w.total),s.next(b)};return a.addEventListener("load",u),a.addEventListener("error",h),a.addEventListener("timeout",h),a.addEventListener("abort",h),o.reportProgress&&(a.addEventListener("progress",m),l!==null&&a.upload&&a.upload.addEventListener("progress",C)),a.send(l),s.next({type:Ds.Sent}),()=>{a.removeEventListener("error",h),a.removeEventListener("abort",h),a.removeEventListener("load",u),a.removeEventListener("timeout",h),o.reportProgress&&(a.removeEventListener("progress",m),l!==null&&a.upload&&a.upload.removeEventListener("progress",C)),a.readyState!==a.DONE&&a.abort()}})))}};e.\u0275fac=function(r){return new(r||e)(F($c))},e.\u0275prov=H({token:e,factory:e.\u0275fac});let t=e;return t})(),Gy=new Z(""),UT="XSRF-TOKEN",jT=new Z("",{providedIn:"root",factory:()=>UT}),qT="X-XSRF-TOKEN",KT=new Z("",{providedIn:"root",factory:()=>qT}),ou=class{},$T=(()=>{let e=class e{constructor(o,r,n){this.doc=o,this.platform=r,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let o=this.doc.cookie||"";return o!==this.lastCookieString&&(this.parseCount++,this.lastToken=qc(o,this.cookieName),this.lastCookieString=o),this.lastToken}};e.\u0275fac=function(r){return new(r||e)(F(fe),F(To),F(jT))},e.\u0275prov=H({token:e,factory:e.\u0275fac});let t=e;return t})();function YT(t,e){let i=t.url.toLowerCase();if(!O(Gy)||t.method==="GET"||t.method==="HEAD"||i.startsWith("http://")||i.startsWith("https://"))return e(t);let o=O(ou).getToken(),r=O(KT);return o!=null&&!t.headers.has(r)&&(t=t.clone({headers:t.headers.set(r,o)})),e(t)}var Vy=function(t){return t[t.Interceptors=0]="Interceptors",t[t.LegacyInterceptors=1]="LegacyInterceptors",t[t.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",t[t.NoXsrfProtection=3]="NoXsrfProtection",t[t.JsonpSupport=4]="JsonpSupport",t[t.RequestsMadeViaParent=5]="RequestsMadeViaParent",t[t.Fetch=6]="Fetch",t}(Vy||{});function QT(t,e){return{\u0275kind:t,\u0275providers:e}}function XT(...t){let e=[kT,Ly,ky,{provide:bl,useExisting:ky},{provide:Jc,useExisting:Ly},{provide:Dp,useValue:YT,multi:!0},{provide:Gy,useValue:!0},{provide:ou,useClass:$T}];for(let i of t)e.push(...i.\u0275providers);return ar(e)}var Ny=new Z("");function ZT(){return QT(Vy.LegacyInterceptors,[{provide:Ny,useFactory:HT},{provide:Dp,useExisting:Ny,multi:!0}])}var ru=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=re({type:e}),e.\u0275inj=oe({providers:[XT(ZT())]});let t=e;return t})();var Tp=class extends wy{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Ap=class t extends Tp{static makeCurrent(){Cy(new t)}onAndCancel(e,i,o){return e.addEventListener(i,o),()=>{e.removeEventListener(i,o)}}dispatchEvent(e,i){e.dispatchEvent(i)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,i){return i=i||this.getDefaultDocument(),i.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,i){return i==="window"?window:i==="document"?e:i==="body"?e.body:null}getBaseHref(e){let i=eA();return i==null?null:tA(i)}resetBaseElement(){xl=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return qc(document.cookie,e)}},xl=null;function eA(){return xl=xl||document.querySelector("base"),xl?xl.getAttribute("href"):null}function tA(t){return new URL(t,document.baseURI).pathname}var Ip=class{addToWindow(e){nr.getAngularTestability=(o,r=!0)=>{let n=e.findTestabilityInTree(o,r);if(n==null)throw new Pe(5103,!1);return n},nr.getAllAngularTestabilities=()=>e.getAllTestabilities(),nr.getAllAngularRootElements=()=>e.getAllRootElements();let i=o=>{let r=nr.getAllAngularTestabilities(),n=r.length,s=function(){n--,n==0&&o()};r.forEach(a=>{a.whenStable(s)})};nr.frameworkStabilizers||(nr.frameworkStabilizers=[]),nr.frameworkStabilizers.push(i)}findTestabilityInTree(e,i,o){if(i==null)return null;let r=e.getTestability(i);return r??(o?an().isShadowRoot(i)?this.findTestabilityInTree(e,i.host,!0):this.findTestabilityInTree(e,i.parentElement,!0):null)}},iA=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=H({token:e,factory:e.\u0275fac});let t=e;return t})(),Pp=new Z(""),Wy=(()=>{let e=class e{constructor(o,r){this._zone=r,this._eventNameToPlugin=new Map,o.forEach(n=>{n.manager=this}),this._plugins=o.slice().reverse()}addEventListener(o,r,n){return this._findPluginFor(r).addEventListener(o,r,n)}getZone(){return this._zone}_findPluginFor(o){let r=this._eventNameToPlugin.get(o);if(r)return r;if(r=this._plugins.find(s=>s.supports(o)),!r)throw new Pe(5101,!1);return this._eventNameToPlugin.set(o,r),r}};e.\u0275fac=function(r){return new(r||e)(F(Pp),F(ee))},e.\u0275prov=H({token:e,factory:e.\u0275fac});let t=e;return t})(),nu=class{constructor(e){this._doc=e}},Rp="ng-app-id",Uy=(()=>{let e=class e{constructor(o,r,n,s={}){this.doc=o,this.appId=r,this.nonce=n,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Kc(s),this.resetHostNodes()}addStyles(o){for(let r of o)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(o){for(let r of o)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let o=this.styleNodesInDOM;o&&(o.forEach(r=>r.remove()),o.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(o){this.hostNodes.add(o);for(let r of this.getAllStyles())this.addStyleToHost(o,r)}removeHost(o){this.hostNodes.delete(o)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(o){for(let r of this.hostNodes)this.addStyleToHost(r,o)}onStyleRemoved(o){let r=this.styleRef;r.get(o)?.elements?.forEach(n=>n.remove()),r.delete(o)}collectServerRenderedStyles(){let o=this.doc.head?.querySelectorAll(`style[${Rp}="${this.appId}"]`);if(o?.length){let r=new Map;return o.forEach(n=>{n.textContent!=null&&r.set(n.textContent,n)}),r}return null}changeUsageCount(o,r){let n=this.styleRef;if(n.has(o)){let s=n.get(o);return s.usage+=r,s.usage}return n.set(o,{usage:r,elements:[]}),r}getStyleElement(o,r){let n=this.styleNodesInDOM,s=n?.get(r);if(s?.parentNode===o)return n.delete(r),s.removeAttribute(Rp),s;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=r,this.platformIsServer&&a.setAttribute(Rp,this.appId),o.appendChild(a),a}}addStyleToHost(o,r){let n=this.getStyleElement(o,r),s=this.styleRef,a=s.get(r)?.elements;a?a.push(n):s.set(r,{elements:[n],usage:1})}resetHostNodes(){let o=this.hostNodes;o.clear(),o.add(this.doc.head)}};e.\u0275fac=function(r){return new(r||e)(F(fe),F(hl),F(gl,8),F(To))},e.\u0275prov=H({token:e,factory:e.\u0275fac});let t=e;return t})(),Mp={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},kp=/%COMP%/g,jy="%COMP%",oA=`_nghost-${jy}`,rA=`_ngcontent-${jy}`,nA=!0,sA=new Z("",{providedIn:"root",factory:()=>nA});function aA(t){return rA.replace(kp,t)}function lA(t){return oA.replace(kp,t)}function qy(t,e){return e.map(i=>i.replace(kp,t))}var Rs=(()=>{let e=class e{constructor(o,r,n,s,a,l,d,c=null){this.eventManager=o,this.sharedStylesHost=r,this.appId=n,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=l,this.ngZone=d,this.nonce=c,this.rendererByCompId=new Map,this.platformIsServer=Kc(l),this.defaultRenderer=new _l(o,a,d,this.platformIsServer)}createRenderer(o,r){if(!o||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===ul.ShadowDom&&(r=we(L({},r),{encapsulation:ul.Emulated}));let n=this.getOrCreateRenderer(o,r);return n instanceof su?n.applyToHost(o):n instanceof El&&n.applyStyles(),n}getOrCreateRenderer(o,r){let n=this.rendererByCompId,s=n.get(r.id);if(!s){let a=this.doc,l=this.ngZone,d=this.eventManager,c=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(r.encapsulation){case ul.Emulated:s=new su(d,c,r,this.appId,u,a,l,h);break;case ul.ShadowDom:return new Fp(d,c,o,r,a,l,this.nonce,h);default:s=new El(d,c,r,u,a,l,h);break}n.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(r){return new(r||e)(F(Wy),F(Uy),F(hl),F(sA),F(fe),F(To),F(ee),F(gl))},e.\u0275prov=H({token:e,factory:e.\u0275fac});let t=e;return t})(),_l=class{constructor(e,i,o,r){this.eventManager=e,this.doc=i,this.ngZone=o,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,i){return i?this.doc.createElementNS(Mp[i]||i,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,i){(Hy(e)?e.content:e).appendChild(i)}insertBefore(e,i,o){e&&(Hy(e)?e.content:e).insertBefore(i,o)}removeChild(e,i){e&&e.removeChild(i)}selectRootElement(e,i){let o=typeof e=="string"?this.doc.querySelector(e):e;if(!o)throw new Pe(-5104,!1);return i||(o.textContent=""),o}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,i,o,r){if(r){i=r+":"+i;let n=Mp[r];n?e.setAttributeNS(n,i,o):e.setAttribute(i,o)}else e.setAttribute(i,o)}removeAttribute(e,i,o){if(o){let r=Mp[o];r?e.removeAttributeNS(r,i):e.removeAttribute(`${o}:${i}`)}else e.removeAttribute(i)}addClass(e,i){e.classList.add(i)}removeClass(e,i){e.classList.remove(i)}setStyle(e,i,o,r){r&(pl.DashCase|pl.Important)?e.style.setProperty(i,o,r&pl.Important?"important":""):e.style[i]=o}removeStyle(e,i,o){o&pl.DashCase?e.style.removeProperty(i):e.style[i]=""}setProperty(e,i,o){e!=null&&(e[i]=o)}setValue(e,i){e.nodeValue=i}listen(e,i,o){if(typeof e=="string"&&(e=an().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${i}`);return this.eventManager.addEventListener(e,i,this.decoratePreventDefault(o))}decoratePreventDefault(e){return i=>{if(i==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(i)):e(i))===!1&&i.preventDefault()}}};function Hy(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Fp=class extends _l{constructor(e,i,o,r,n,s,a,l){super(e,n,s,l),this.sharedStylesHost=i,this.hostEl=o,this.shadowRoot=o.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let d=qy(r.id,r.styles);for(let c of d){let u=document.createElement("style");a&&u.setAttribute("nonce",a),u.textContent=c,this.shadowRoot.appendChild(u)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,i){return super.appendChild(this.nodeOrShadowRoot(e),i)}insertBefore(e,i,o){return super.insertBefore(this.nodeOrShadowRoot(e),i,o)}removeChild(e,i){return super.removeChild(this.nodeOrShadowRoot(e),i)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},El=class extends _l{constructor(e,i,o,r,n,s,a,l){super(e,n,s,a),this.sharedStylesHost=i,this.removeStylesOnCompDestroy=r,this.styles=l?qy(l,o.styles):o.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},su=class extends El{constructor(e,i,o,r,n,s,a,l){let d=r+"-"+o.id;super(e,i,o,n,s,a,l,d),this.contentAttr=aA(d),this.hostAttr=lA(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,i){let o=super.createElement(e,i);return super.setAttribute(o,this.contentAttr,""),o}},dA=(()=>{let e=class e extends nu{constructor(o){super(o)}supports(o){return!0}addEventListener(o,r,n){return o.addEventListener(r,n,!1),()=>this.removeEventListener(o,r,n)}removeEventListener(o,r,n){return o.removeEventListener(r,n)}};e.\u0275fac=function(r){return new(r||e)(F(fe))},e.\u0275prov=H({token:e,factory:e.\u0275fac});let t=e;return t})(),By=["alt","control","meta","shift"],cA={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},uA={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},hA=(()=>{let e=class e extends nu{constructor(o){super(o)}supports(o){return e.parseEventName(o)!=null}addEventListener(o,r,n){let s=e.parseEventName(r),a=e.eventCallback(s.fullKey,n,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>an().onAndCancel(o,s.domEventName,a))}static parseEventName(o){let r=o.toLowerCase().split("."),n=r.shift();if(r.length===0||!(n==="keydown"||n==="keyup"))return null;let s=e._normalizeKey(r.pop()),a="",l=r.indexOf("code");if(l>-1&&(r.splice(l,1),a="code."),By.forEach(c=>{let u=r.indexOf(c);u>-1&&(r.splice(u,1),a+=c+".")}),a+=s,r.length!=0||s.length===0)return null;let d={};return d.domEventName=n,d.fullKey=a,d}static matchEventFullKeyCode(o,r){let n=cA[o.key]||o.key,s="";return r.indexOf("code.")>-1&&(n=o.code,s="code."),n==null||!n?!1:(n=n.toLowerCase(),n===" "?n="space":n==="."&&(n="dot"),By.forEach(a=>{if(a!==n){let l=uA[a];l(o)&&(s+=a+".")}}),s+=n,s===r)}static eventCallback(o,r,n){return s=>{e.matchEventFullKeyCode(s,o)&&n.runGuarded(()=>r(s))}}static _normalizeKey(o){return o==="esc"?"escape":o}};e.\u0275fac=function(r){return new(r||e)(F(fe))},e.\u0275prov=H({token:e,factory:e.\u0275fac});let t=e;return t})();function gA(){Ap.makeCurrent()}function pA(){return new ap}function fA(){return $w(document),document}var mA=[{provide:To,useValue:xy},{provide:Yw,useValue:gA,multi:!0},{provide:fe,useFactory:fA,deps:[]}],Ky=gy(py,"browser",mA),vA=new Z(""),CA=[{provide:Bc,useClass:Ip,deps:[]},{provide:hy,useClass:Wc,deps:[ee,wp,Bc]},{provide:Wc,useClass:Wc,deps:[ee,wp,Bc]}],wA=[{provide:Kw,useValue:"root"},{provide:ap,useFactory:pA,deps:[]},{provide:Pp,useClass:dA,multi:!0,deps:[fe,ee,To]},{provide:Pp,useClass:hA,multi:!0,deps:[fe]},Rs,Uy,Wy,{provide:bs,useExisting:Rs},{provide:$c,useClass:iA,deps:[]},[]],au=(()=>{let e=class e{constructor(o){}static withServerTransition(o){return{ngModule:e,providers:[{provide:hl,useValue:o.appId}]}}};e.\u0275fac=function(r){return new(r||e)(F(vA,12))},e.\u0275mod=re({type:e}),e.\u0275inj=oe({providers:[...wA,...CA],imports:[gr,fy]});let t=e;return t})();var $y=(()=>{let e=class e{constructor(o){this._doc=o}getTitle(){return this._doc.title}setTitle(o){this._doc.title=o||""}};e.\u0275fac=function(r){return new(r||e)(F(fe))},e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Lp=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=H({token:e,factory:function(r){let n=null;return r?n=new(r||e):n=F(yA),n},providedIn:"root"});let t=e;return t})(),yA=(()=>{let e=class e extends Lp{constructor(o){super(),this._doc=o}sanitize(o,r){if(r==null)return null;switch(o){case Ao.NONE:return r;case Ao.HTML:return ys(r,"HTML")?ws(r):iy(this._doc,String(r)).toString();case Ao.STYLE:return ys(r,"Style")?ws(r):r;case Ao.SCRIPT:if(ys(r,"Script"))return ws(r);throw new Pe(5200,!1);case Ao.URL:return ys(r,"URL")?ws(r):ty(String(r));case Ao.RESOURCE_URL:if(ys(r,"ResourceURL"))return ws(r);throw new Pe(5201,!1);default:throw new Pe(5202,!1)}}bypassSecurityTrustHtml(o){return Qw(o)}bypassSecurityTrustStyle(o){return Xw(o)}bypassSecurityTrustScript(o){return Zw(o)}bypassSecurityTrustUrl(o){return Jw(o)}bypassSecurityTrustResourceUrl(o){return ey(o)}};e.\u0275fac=function(r){return new(r||e)(F(fe))},e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var bA=(()=>{let e=class e extends Xc{constructor(o,r,n){super(o,r,n,O(Nc,{optional:!0}))}ngOnDestroy(){this.flush()}};e.\u0275fac=function(r){return new(r||e)(F(fe),F(wl),F(Qc))},e.\u0275prov=H({token:e,factory:e.\u0275fac});let t=e;return t})();function SA(){return new My}function xA(t,e,i){return new Ay(t,e,i)}var Qy=[{provide:Qc,useFactory:SA},{provide:Xc,useClass:bA},{provide:bs,useFactory:xA,deps:[Rs,Xc,ee]}],Yy=[{provide:wl,useFactory:()=>new Ty},{provide:dr,useValue:"BrowserAnimations"},...Qy],_A=[{provide:wl,useClass:Ry},{provide:dr,useValue:"NoopAnimations"},...Qy],Xy=(()=>{let e=class e{static withConfig(o){return{ngModule:e,providers:o.disableAnimations?_A:Yy}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=re({type:e}),e.\u0275inj=oe({providers:Yy,imports:[au]});let t=e;return t})();var sb=(()=>{let e=class e{constructor(o,r){this._renderer=o,this._elementRef=r,this.onChange=n=>{},this.onTouched=()=>{}}setProperty(o,r){this._renderer.setProperty(this._elementRef.nativeElement,o,r)}registerOnTouched(o){this.onTouched=o}registerOnChange(o){this.onChange=o}setDisabledState(o){this.setProperty("disabled",o)}};e.\u0275fac=function(r){return new(r||e)(W(Ss),W(Te))},e.\u0275dir=ye({type:e});let t=e;return t})(),ab=(()=>{let e=class e extends sb{};e.\u0275fac=(()=>{let o;return function(n){return(o||(o=Bi(e)))(n||e)}})(),e.\u0275dir=ye({type:e,features:[Bt]});let t=e;return t})(),As=new Z("");var EA={provide:As,useExisting:sr(()=>Is),multi:!0};function DA(){let t=an()?an().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var RA=new Z(""),Is=(()=>{let e=class e extends sb{constructor(o,r,n){super(o,r),this._compositionMode=n,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!DA())}writeValue(o){let r=o??"";this.setProperty("value",r)}_handleInput(o){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(o)}_compositionStart(){this._composing=!0}_compositionEnd(o){this._composing=!1,this._compositionMode&&this.onChange(o)}};e.\u0275fac=function(r){return new(r||e)(W(Ss),W(Te),W(RA,8))},e.\u0275dir=ye({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,n){r&1&&ne("input",function(a){return n._handleInput(a.target.value)})("blur",function(){return n.onTouched()})("compositionstart",function(){return n._compositionStart()})("compositionend",function(a){return n._compositionEnd(a.target.value)})},features:[lt([EA]),Bt]});let t=e;return t})();function vr(t){return t==null||(typeof t=="string"||Array.isArray(t))&&t.length===0}function lb(t){return t!=null&&typeof t.length=="number"}var Bp=new Z(""),Wp=new Z(""),MA=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,cn=class{static min(e){return TA(e)}static max(e){return AA(e)}static required(e){return IA(e)}static requiredTrue(e){return PA(e)}static email(e){return FA(e)}static minLength(e){return OA(e)}static maxLength(e){return kA(e)}static pattern(e){return LA(e)}static nullValidator(e){return db(e)}static compose(e){return fb(e)}static composeAsync(e){return vb(e)}};function TA(t){return e=>{if(vr(e.value)||vr(t))return null;let i=parseFloat(e.value);return!isNaN(i)&&i<t?{min:{min:t,actual:e.value}}:null}}function AA(t){return e=>{if(vr(e.value)||vr(t))return null;let i=parseFloat(e.value);return!isNaN(i)&&i>t?{max:{max:t,actual:e.value}}:null}}function IA(t){return vr(t.value)?{required:!0}:null}function PA(t){return t.value===!0?null:{required:!0}}function FA(t){return vr(t.value)||MA.test(t.value)?null:{email:!0}}function OA(t){return e=>vr(e.value)||!lb(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}function kA(t){return e=>lb(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}function LA(t){if(!t)return db;let e,i;return typeof t=="string"?(i="",t.charAt(0)!=="^"&&(i+="^"),i+=t,t.charAt(t.length-1)!=="$"&&(i+="$"),e=new RegExp(i)):(i=t.toString(),e=t),o=>{if(vr(o.value))return null;let r=o.value;return e.test(r)?null:{pattern:{requiredPattern:i,actualValue:r}}}}function db(t){return null}function cb(t){return t!=null}function ub(t){return Uc(t)?vt(t):t}function hb(t){let e={};return t.forEach(i=>{e=i!=null?L(L({},e),i):e}),Object.keys(e).length===0?null:e}function gb(t,e){return e.map(i=>i(t))}function NA(t){return!t.validate}function pb(t){return t.map(e=>NA(e)?e:i=>e.validate(i))}function fb(t){if(!t)return null;let e=t.filter(cb);return e.length==0?null:function(i){return hb(gb(i,e))}}function mb(t){return t!=null?fb(pb(t)):null}function vb(t){if(!t)return null;let e=t.filter(cb);return e.length==0?null:function(i){let o=gb(i,e).map(ub);return Bw(o).pipe(ve(hb))}}function Cb(t){return t!=null?vb(pb(t)):null}function Zy(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function wb(t){return t._rawValidators}function yb(t){return t._rawAsyncValidators}function zp(t){return t?Array.isArray(t)?t:[t]:[]}function du(t,e){return Array.isArray(t)?t.includes(e):t===e}function Jy(t,e){let i=zp(e);return zp(t).forEach(r=>{du(i,r)||i.push(r)}),i}function eb(t,e){return zp(e).filter(i=>!du(t,i))}var cu=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=mb(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Cb(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,i){return this.control?this.control.hasError(e,i):!1}getError(e,i){return this.control?this.control.getError(e,i):null}},un=class extends cu{get formDirective(){return null}get path(){return null}},hn=class extends cu{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},uu=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},zA={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},_j=we(L({},zA),{"[class.ng-submitted]":"isSubmitted"}),fu=(()=>{let e=class e extends uu{constructor(o){super(o)}};e.\u0275fac=function(r){return new(r||e)(W(hn,2))},e.\u0275dir=ye({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,n){r&2&&fi("ng-untouched",n.isUntouched)("ng-touched",n.isTouched)("ng-pristine",n.isPristine)("ng-dirty",n.isDirty)("ng-valid",n.isValid)("ng-invalid",n.isInvalid)("ng-pending",n.isPending)},features:[Bt]});let t=e;return t})(),bb=(()=>{let e=class e extends uu{constructor(o){super(o)}};e.\u0275fac=function(r){return new(r||e)(W(un,10))},e.\u0275dir=ye({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,n){r&2&&fi("ng-untouched",n.isUntouched)("ng-touched",n.isTouched)("ng-pristine",n.isPristine)("ng-dirty",n.isDirty)("ng-valid",n.isValid)("ng-invalid",n.isInvalid)("ng-pending",n.isPending)("ng-submitted",n.isSubmitted)},features:[Bt]});let t=e;return t})();var Dl="VALID",lu="INVALID",Ms="PENDING",Rl="DISABLED";function Up(t){return(mu(t)?t.validators:t)||null}function GA(t){return Array.isArray(t)?mb(t):t||null}function jp(t,e){return(mu(e)?e.asyncValidators:t)||null}function VA(t){return Array.isArray(t)?Cb(t):t||null}function mu(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function Sb(t,e,i){let o=t.controls;if(!(e?Object.keys(o):o).length)throw new Pe(1e3,"");if(!o[i])throw new Pe(1001,"")}function xb(t,e,i){t._forEachChild((o,r)=>{if(i[r]===void 0)throw new Pe(1002,"")})}var Ts=class{constructor(e,i){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(i)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Dl}get invalid(){return this.status===lu}get pending(){return this.status==Ms}get disabled(){return this.status===Rl}get enabled(){return this.status!==Rl}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Jy(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Jy(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(eb(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(eb(e,this._rawAsyncValidators))}hasValidator(e){return du(this._rawValidators,e)}hasAsyncValidator(e){return du(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(i=>{i.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Ms,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let i=this._parentMarkedDirty(e.onlySelf);this.status=Rl,this.errors=null,this._forEachChild(o=>{o.disable(we(L({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(we(L({},e),{skipPristineCheck:i})),this._onDisabledChange.forEach(o=>o(!0))}enable(e={}){let i=this._parentMarkedDirty(e.onlySelf);this.status=Dl,this._forEachChild(o=>{o.enable(we(L({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(we(L({},e),{skipPristineCheck:i})),this._onDisabledChange.forEach(o=>o(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Dl||this.status===Ms)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(i=>i._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Rl:Dl}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Ms,this._hasOwnPendingAsyncValidator=!0;let i=ub(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(o=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(o,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,i={}){this.errors=e,this._updateControlsErrors(i.emitEvent!==!1)}get(e){let i=e;return i==null||(Array.isArray(i)||(i=i.split(".")),i.length===0)?null:i.reduce((o,r)=>o&&o._find(r),this)}getError(e,i){let o=i?this.get(i):this;return o&&o.errors?o.errors[e]:null}hasError(e,i){return!!this.getError(e,i)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new M,this.statusChanges=new M}_calculateStatus(){return this._allControlsDisabled()?Rl:this.errors?lu:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ms)?Ms:this._anyControlsHaveStatus(lu)?lu:Dl}_anyControlsHaveStatus(e){return this._anyControls(i=>i.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){mu(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let i=this._parent&&this._parent.dirty;return!e&&!!i&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=GA(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=VA(this._rawAsyncValidators)}},hu=class extends Ts{constructor(e,i,o){super(Up(i),jp(o,i)),this.controls=e,this._initObservables(),this._setUpdateStrategy(i),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,i){return this.controls[e]?this.controls[e]:(this.controls[e]=i,i.setParent(this),i._registerOnCollectionChange(this._onCollectionChange),i)}addControl(e,i,o={}){this.registerControl(e,i),this.updateValueAndValidity({emitEvent:o.emitEvent}),this._onCollectionChange()}removeControl(e,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}setControl(e,i,o={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],i&&this.registerControl(e,i),this.updateValueAndValidity({emitEvent:o.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,i={}){xb(this,!0,e),Object.keys(e).forEach(o=>{Sb(this,!0,o),this.controls[o].setValue(e[o],{onlySelf:!0,emitEvent:i.emitEvent})}),this.updateValueAndValidity(i)}patchValue(e,i={}){e!=null&&(Object.keys(e).forEach(o=>{let r=this.controls[o];r&&r.patchValue(e[o],{onlySelf:!0,emitEvent:i.emitEvent})}),this.updateValueAndValidity(i))}reset(e={},i={}){this._forEachChild((o,r)=>{o.reset(e?e[r]:null,{onlySelf:!0,emitEvent:i.emitEvent})}),this._updatePristine(i),this._updateTouched(i),this.updateValueAndValidity(i)}getRawValue(){return this._reduceChildren({},(e,i,o)=>(e[o]=i.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(i,o)=>o._syncPendingControls()?!0:i);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(i=>{let o=this.controls[i];o&&e(o,i)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[i,o]of Object.entries(this.controls))if(this.contains(i)&&e(o))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(i,o,r)=>((o.enabled||this.disabled)&&(i[r]=o.value),i))}_reduceChildren(e,i){let o=e;return this._forEachChild((r,n)=>{o=i(o,r,n)}),o}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Gp=class extends hu{};var vu=new Z("CallSetDisabledState",{providedIn:"root",factory:()=>Cu}),Cu="always";function _b(t,e){return[...e.path,t]}function Vp(t,e,i=Cu){qp(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||i==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),BA(t,e),UA(t,e),WA(t,e),HA(t,e)}function tb(t,e,i=!0){let o=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(o),e.valueAccessor.registerOnTouched(o)),pu(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function gu(t,e){t.forEach(i=>{i.registerOnValidatorChange&&i.registerOnValidatorChange(e)})}function HA(t,e){if(e.valueAccessor.setDisabledState){let i=o=>{e.valueAccessor.setDisabledState(o)};t.registerOnDisabledChange(i),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(i)})}}function qp(t,e){let i=wb(t);e.validator!==null?t.setValidators(Zy(i,e.validator)):typeof i=="function"&&t.setValidators([i]);let o=yb(t);e.asyncValidator!==null?t.setAsyncValidators(Zy(o,e.asyncValidator)):typeof o=="function"&&t.setAsyncValidators([o]);let r=()=>t.updateValueAndValidity();gu(e._rawValidators,r),gu(e._rawAsyncValidators,r)}function pu(t,e){let i=!1;if(t!==null){if(e.validator!==null){let r=wb(t);if(Array.isArray(r)&&r.length>0){let n=r.filter(s=>s!==e.validator);n.length!==r.length&&(i=!0,t.setValidators(n))}}if(e.asyncValidator!==null){let r=yb(t);if(Array.isArray(r)&&r.length>0){let n=r.filter(s=>s!==e.asyncValidator);n.length!==r.length&&(i=!0,t.setAsyncValidators(n))}}}let o=()=>{};return gu(e._rawValidators,o),gu(e._rawAsyncValidators,o),i}function BA(t,e){e.valueAccessor.registerOnChange(i=>{t._pendingValue=i,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&Eb(t,e)})}function WA(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&Eb(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function Eb(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function UA(t,e){let i=(o,r)=>{e.valueAccessor.writeValue(o),r&&e.viewToModelUpdate(o)};t.registerOnChange(i),e._registerOnDestroy(()=>{t._unregisterOnChange(i)})}function jA(t,e){t==null,qp(t,e)}function qA(t,e){return pu(t,e)}function Db(t,e){if(!t.hasOwnProperty("model"))return!1;let i=t.model;return i.isFirstChange()?!0:!Object.is(e,i.currentValue)}function KA(t){return Object.getPrototypeOf(t.constructor)===ab}function $A(t,e){t._syncPendingControls(),e.forEach(i=>{let o=i.control;o.updateOn==="submit"&&o._pendingChange&&(i.viewToModelUpdate(o._pendingValue),o._pendingChange=!1)})}function Rb(t,e){if(!e)return null;Array.isArray(e);let i,o,r;return e.forEach(n=>{n.constructor===Is?i=n:KA(n)?o=n:r=n}),r||o||i||null}function YA(t,e){let i=t.indexOf(e);i>-1&&t.splice(i,1)}function ib(t,e){let i=t.indexOf(e);i>-1&&t.splice(i,1)}function ob(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var Ml=class extends Ts{constructor(e=null,i,o){super(Up(i),jp(o,i)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(i),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),mu(i)&&(i.nonNullable||i.initialValueIsDefault)&&(ob(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,i={}){this.value=this._pendingValue=e,this._onChange.length&&i.emitModelToViewChange!==!1&&this._onChange.forEach(o=>o(this.value,i.emitViewToModelChange!==!1)),this.updateValueAndValidity(i)}patchValue(e,i={}){this.setValue(e,i)}reset(e=this.defaultValue,i={}){this._applyFormState(e),this.markAsPristine(i),this.markAsUntouched(i),this.setValue(this.value,i),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){ib(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){ib(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){ob(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var QA=t=>t instanceof Ml;var XA={provide:hn,useExisting:sr(()=>Kp)},rb=Promise.resolve(),Kp=(()=>{let e=class e extends hn{constructor(o,r,n,s,a,l){super(),this._changeDetectorRef=a,this.callSetDisabledState=l,this.control=new Ml,this._registered=!1,this.name="",this.update=new M,this._parent=o,this._setValidators(r),this._setAsyncValidators(n),this.valueAccessor=Rb(this,s)}ngOnChanges(o){if(this._checkForErrors(),!this._registered||"name"in o){if(this._registered&&(this._checkName(),this.formDirective)){let r=o.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in o&&this._updateDisabled(o),Db(o,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(o){this.viewModel=o,this.update.emit(o)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Vp(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(o){rb.then(()=>{this.control.setValue(o,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(o){let r=o.isDisabled.currentValue,n=r!==0&&_i(r);rb.then(()=>{n&&!this.control.disabled?this.control.disable():!n&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(o){return this._parent?_b(o,this._parent):[o]}};e.\u0275fac=function(r){return new(r||e)(W(un,9),W(Bp,10),W(Wp,10),W(As,10),W(Zt,8),W(vu,8))},e.\u0275dir=ye({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[Ve.None,"disabled","isDisabled"],model:[Ve.None,"ngModel","model"],options:[Ve.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[lt([XA]),Bt,Ot]});let t=e;return t})(),Mb=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=ye({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let t=e;return t})(),ZA={provide:As,useExisting:sr(()=>$p),multi:!0},$p=(()=>{let e=class e extends ab{writeValue(o){let r=o??"";this.setProperty("value",r)}registerOnChange(o){this.onChange=r=>{o(r==""?null:parseFloat(r))}}};e.\u0275fac=(()=>{let o;return function(n){return(o||(o=Bi(e)))(n||e)}})(),e.\u0275dir=ye({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,n){r&1&&ne("input",function(a){return n.onChange(a.target.value)})("blur",function(){return n.onTouched()})},features:[lt([ZA]),Bt]});let t=e;return t})();var Tb=new Z("");var JA={provide:un,useExisting:sr(()=>Yp)},Yp=(()=>{let e=class e extends un{constructor(o,r,n){super(),this.callSetDisabledState=n,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new M,this._setValidators(o),this._setAsyncValidators(r)}ngOnChanges(o){this._checkFormPresent(),o.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(pu(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(o){let r=this.form.get(o.path);return Vp(r,o,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(o),r}getControl(o){return this.form.get(o.path)}removeControl(o){tb(o.control||null,o,!1),YA(this.directives,o)}addFormGroup(o){this._setUpFormContainer(o)}removeFormGroup(o){this._cleanUpFormContainer(o)}getFormGroup(o){return this.form.get(o.path)}addFormArray(o){this._setUpFormContainer(o)}removeFormArray(o){this._cleanUpFormContainer(o)}getFormArray(o){return this.form.get(o.path)}updateModel(o,r){this.form.get(o.path).setValue(r)}onSubmit(o){return this.submitted=!0,$A(this.form,this.directives),this.ngSubmit.emit(o),o?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(o=void 0){this.form.reset(o),this.submitted=!1}_updateDomValue(){this.directives.forEach(o=>{let r=o.control,n=this.form.get(o.path);r!==n&&(tb(r||null,o),QA(n)&&(Vp(n,o,this.callSetDisabledState),o.control=n))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(o){let r=this.form.get(o.path);jA(r,o),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(o){if(this.form){let r=this.form.get(o.path);r&&qA(r,o)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){qp(this.form,this),this._oldForm&&pu(this._oldForm,this)}_checkFormPresent(){this.form}};e.\u0275fac=function(r){return new(r||e)(W(Bp,10),W(Wp,10),W(vu,8))},e.\u0275dir=ye({type:e,selectors:[["","formGroup",""]],hostBindings:function(r,n){r&1&&ne("submit",function(a){return n.onSubmit(a)})("reset",function(){return n.onReset()})},inputs:{form:[Ve.None,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[lt([JA]),Bt,Ot]});let t=e;return t})();var eI={provide:hn,useExisting:sr(()=>Qp)},Qp=(()=>{let e=class e extends hn{set isDisabled(o){}constructor(o,r,n,s,a){super(),this._ngModelWarningConfig=a,this._added=!1,this.name=null,this.update=new M,this._ngModelWarningSent=!1,this._parent=o,this._setValidators(r),this._setAsyncValidators(n),this.valueAccessor=Rb(this,s)}ngOnChanges(o){this._added||this._setUpControl(),Db(o,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(o){this.viewModel=o,this.update.emit(o)}get path(){return _b(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}};e._ngModelWarningSentOnce=!1,e.\u0275fac=function(r){return new(r||e)(W(un,13),W(Bp,10),W(Wp,10),W(As,10),W(Tb,8))},e.\u0275dir=ye({type:e,selectors:[["","formControlName",""]],inputs:{name:[Ve.None,"formControlName","name"],isDisabled:[Ve.None,"disabled","isDisabled"],model:[Ve.None,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[lt([eI]),Bt,Ot]});let t=e;return t})();var Ab=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=re({type:e}),e.\u0275inj=oe({});let t=e;return t})(),Hp=class extends Ts{constructor(e,i,o){super(Up(i),jp(o,i)),this.controls=e,this._initObservables(),this._setUpdateStrategy(i),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,i={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}insert(e,i,o={}){this.controls.splice(e,0,i),this._registerControl(i),this.updateValueAndValidity({emitEvent:o.emitEvent})}removeAt(e,i={}){let o=this._adjustIndex(e);o<0&&(o=0),this.controls[o]&&this.controls[o]._registerOnCollectionChange(()=>{}),this.controls.splice(o,1),this.updateValueAndValidity({emitEvent:i.emitEvent})}setControl(e,i,o={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),i&&(this.controls.splice(r,0,i),this._registerControl(i)),this.updateValueAndValidity({emitEvent:o.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,i={}){xb(this,!1,e),e.forEach((o,r)=>{Sb(this,!1,r),this.at(r).setValue(o,{onlySelf:!0,emitEvent:i.emitEvent})}),this.updateValueAndValidity(i)}patchValue(e,i={}){e!=null&&(e.forEach((o,r)=>{this.at(r)&&this.at(r).patchValue(o,{onlySelf:!0,emitEvent:i.emitEvent})}),this.updateValueAndValidity(i))}reset(e=[],i={}){this._forEachChild((o,r)=>{o.reset(e[r],{onlySelf:!0,emitEvent:i.emitEvent})}),this._updatePristine(i),this._updateTouched(i),this.updateValueAndValidity(i)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(i=>i._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((i,o)=>o._syncPendingControls()?!0:i,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((i,o)=>{e(i,o)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(i=>i.enabled&&e(i))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function nb(t){return!!t&&(t.asyncValidators!==void 0||t.validators!==void 0||t.updateOn!==void 0)}var Ib=(()=>{let e=class e{constructor(){this.useNonNullable=!1}get nonNullable(){let o=new e;return o.useNonNullable=!0,o}group(o,r=null){let n=this._reduceControls(o),s={};return nb(r)?s=r:r!==null&&(s.validators=r.validator,s.asyncValidators=r.asyncValidator),new hu(n,s)}record(o,r=null){let n=this._reduceControls(o);return new Gp(n,r)}control(o,r,n){let s={};return this.useNonNullable?(nb(r)?s=r:(s.validators=r,s.asyncValidators=n),new Ml(o,we(L({},s),{nonNullable:!0}))):new Ml(o,r,n)}array(o,r,n){let s=o.map(a=>this._createControl(a));return new Hp(s,r,n)}_reduceControls(o){let r={};return Object.keys(o).forEach(n=>{r[n]=this._createControl(o[n])}),r}_createControl(o){if(o instanceof Ml)return o;if(o instanceof Ts)return o;if(Array.isArray(o)){let r=o[0],n=o.length>1?o[1]:null,s=o.length>2?o[2]:null;return this.control(r,n,s)}else return this.control(o)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var wu=(()=>{let e=class e{static withConfig(o){return{ngModule:e,providers:[{provide:vu,useValue:o.callSetDisabledState??Cu}]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=re({type:e}),e.\u0275inj=oe({imports:[Ab]});let t=e;return t})(),Pb=(()=>{let e=class e{static withConfig(o){return{ngModule:e,providers:[{provide:Tb,useValue:o.warnOnNgModelWithFormControl??"always"},{provide:vu,useValue:o.callSetDisabledState??Cu}]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=re({type:e}),e.\u0275inj=oe({imports:[Ab]});let t=e;return t})();var he="primary",Wl=Symbol("RouteTitle"),tf=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let i=this.params[e];return Array.isArray(i)?i[0]:i}return null}getAll(e){if(this.has(e)){let i=this.params[e];return Array.isArray(i)?i:[i]}return[]}get keys(){return Object.keys(this.params)}};function Ls(t){return new tf(t)}function tI(t,e,i){let o=i.path.split("/");if(o.length>t.length||i.pathMatch==="full"&&(e.hasChildren()||o.length<t.length))return null;let r={};for(let n=0;n<o.length;n++){let s=o[n],a=t[n];if(s.startsWith(":"))r[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,o.length),posParams:r}}function iI(t,e){if(t.length!==e.length)return!1;for(let i=0;i<t.length;++i)if(!so(t[i],e[i]))return!1;return!0}function so(t,e){let i=t?of(t):void 0,o=e?of(e):void 0;if(!i||!o||i.length!=o.length)return!1;let r;for(let n=0;n<i.length;n++)if(r=i[n],!Bb(t[r],e[r]))return!1;return!0}function of(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function Bb(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let i=[...t].sort(),o=[...e].sort();return i.every((r,n)=>o[n]===r)}else return t===e}function Wb(t){return t.length>0?t[t.length-1]:null}function Sr(t){return tp(t)?t:Uc(t)?vt(Promise.resolve(t)):Y(t)}var oI={exact:jb,subset:qb},Ub={exact:rI,subset:nI,ignored:()=>!0};function Ob(t,e,i){return oI[i.paths](t.root,e.root,i.matrixParams)&&Ub[i.queryParams](t.queryParams,e.queryParams)&&!(i.fragment==="exact"&&t.fragment!==e.fragment)}function rI(t,e){return so(t,e)}function jb(t,e,i){if(!pn(t.segments,e.segments)||!Su(t.segments,e.segments,i)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let o in e.children)if(!t.children[o]||!jb(t.children[o],e.children[o],i))return!1;return!0}function nI(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(i=>Bb(t[i],e[i]))}function qb(t,e,i){return Kb(t,e,e.segments,i)}function Kb(t,e,i,o){if(t.segments.length>i.length){let r=t.segments.slice(0,i.length);return!(!pn(r,i)||e.hasChildren()||!Su(r,i,o))}else if(t.segments.length===i.length){if(!pn(t.segments,i)||!Su(t.segments,i,o))return!1;for(let r in e.children)if(!t.children[r]||!qb(t.children[r],e.children[r],o))return!1;return!0}else{let r=i.slice(0,t.segments.length),n=i.slice(t.segments.length);return!pn(t.segments,r)||!Su(t.segments,r,o)||!t.children[he]?!1:Kb(t.children[he],e,n,o)}}function Su(t,e,i){return e.every((o,r)=>Ub[i](t[r].parameters,o.parameters))}var Cr=class{constructor(e=new Fe([],{}),i={},o=null){this.root=e,this.queryParams=i,this.fragment=o}get queryParamMap(){return this._queryParamMap??=Ls(this.queryParams),this._queryParamMap}toString(){return lI.serialize(this)}},Fe=class{constructor(e,i){this.segments=e,this.children=i,this.parent=null,Object.values(i).forEach(o=>o.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return xu(this)}},gn=class{constructor(e,i){this.path=e,this.parameters=i}get parameterMap(){return this._parameterMap??=Ls(this.parameters),this._parameterMap}toString(){return Yb(this)}};function sI(t,e){return pn(t,e)&&t.every((i,o)=>so(i.parameters,e[o].parameters))}function pn(t,e){return t.length!==e.length?!1:t.every((i,o)=>i.path===e[o].path)}function aI(t,e){let i=[];return Object.entries(t.children).forEach(([o,r])=>{o===he&&(i=i.concat(e(r,o)))}),Object.entries(t.children).forEach(([o,r])=>{o!==he&&(i=i.concat(e(r,o)))}),i}var Ul=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=H({token:e,factory:()=>new kl,providedIn:"root"});let t=e;return t})(),kl=class{parse(e){let i=new nf(e);return new Cr(i.parseRootSegment(),i.parseQueryParams(),i.parseFragment())}serialize(e){let i=`/${Tl(e.root,!0)}`,o=uI(e.queryParams),r=typeof e.fragment=="string"?`#${dI(e.fragment)}`:"";return`${i}${o}${r}`}},lI=new kl;function xu(t){return t.segments.map(e=>Yb(e)).join("/")}function Tl(t,e){if(!t.hasChildren())return xu(t);if(e){let i=t.children[he]?Tl(t.children[he],!1):"",o=[];return Object.entries(t.children).forEach(([r,n])=>{r!==he&&o.push(`${r}:${Tl(n,!1)}`)}),o.length>0?`${i}(${o.join("//")})`:i}else{let i=aI(t,(o,r)=>r===he?[Tl(t.children[he],!1)]:[`${r}:${Tl(o,!1)}`]);return Object.keys(t.children).length===1&&t.children[he]!=null?`${xu(t)}/${i[0]}`:`${xu(t)}/(${i.join("//")})`}}function $b(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function yu(t){return $b(t).replace(/%3B/gi,";")}function dI(t){return encodeURI(t)}function rf(t){return $b(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function _u(t){return decodeURIComponent(t)}function kb(t){return _u(t.replace(/\+/g,"%20"))}function Yb(t){return`${rf(t.path)}${cI(t.parameters)}`}function cI(t){return Object.entries(t).map(([e,i])=>`;${rf(e)}=${rf(i)}`).join("")}function uI(t){let e=Object.entries(t).map(([i,o])=>Array.isArray(o)?o.map(r=>`${yu(i)}=${yu(r)}`).join("&"):`${yu(i)}=${yu(o)}`).filter(i=>i);return e.length?`?${e.join("&")}`:""}var hI=/^[^\/()?;#]+/;function Xp(t){let e=t.match(hI);return e?e[0]:""}var gI=/^[^\/()?;=#]+/;function pI(t){let e=t.match(gI);return e?e[0]:""}var fI=/^[^=?&#]+/;function mI(t){let e=t.match(fI);return e?e[0]:""}var vI=/^[^&#]+/;function CI(t){let e=t.match(vI);return e?e[0]:""}var nf=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Fe([],{}):new Fe([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let i={};this.peekStartsWith("/(")&&(this.capture("/"),i=this.parseParens(!0));let o={};return this.peekStartsWith("(")&&(o=this.parseParens(!1)),(e.length>0||Object.keys(i).length>0)&&(o[he]=new Fe(e,i)),o}parseSegment(){let e=Xp(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Pe(4009,!1);return this.capture(e),new gn(_u(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let i=pI(this.remaining);if(!i)return;this.capture(i);let o="";if(this.consumeOptional("=")){let r=Xp(this.remaining);r&&(o=r,this.capture(o))}e[_u(i)]=_u(o)}parseQueryParam(e){let i=mI(this.remaining);if(!i)return;this.capture(i);let o="";if(this.consumeOptional("=")){let s=CI(this.remaining);s&&(o=s,this.capture(o))}let r=kb(i),n=kb(o);if(e.hasOwnProperty(r)){let s=e[r];Array.isArray(s)||(s=[s],e[r]=s),s.push(n)}else e[r]=n}parseParens(e){let i={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let o=Xp(this.remaining),r=this.remaining[o.length];if(r!=="/"&&r!==")"&&r!==";")throw new Pe(4010,!1);let n;o.indexOf(":")>-1?(n=o.slice(0,o.indexOf(":")),this.capture(n),this.capture(":")):e&&(n=he);let s=this.parseChildren();i[n]=Object.keys(s).length===1?s[he]:new Fe([],s),this.consumeOptional("//")}return i}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Pe(4011,!1)}};function Qb(t){return t.segments.length>0?new Fe([],{[he]:t}):t}function Xb(t){let e={};for(let[o,r]of Object.entries(t.children)){let n=Xb(r);if(o===he&&n.segments.length===0&&n.hasChildren())for(let[s,a]of Object.entries(n.children))e[s]=a;else(n.segments.length>0||n.hasChildren())&&(e[o]=n)}let i=new Fe(t.segments,e);return wI(i)}function wI(t){if(t.numberOfChildren===1&&t.children[he]){let e=t.children[he];return new Fe(t.segments.concat(e.segments),e.children)}return t}function Ns(t){return t instanceof Cr}function yI(t,e,i=null,o=null){let r=Zb(t);return Jb(r,e,i,o)}function Zb(t){let e;function i(n){let s={};for(let l of n.children){let d=i(l);s[l.outlet]=d}let a=new Fe(n.url,s);return n===t&&(e=a),a}let o=i(t.root),r=Qb(o);return e??r}function Jb(t,e,i,o){let r=t;for(;r.parent;)r=r.parent;if(e.length===0)return Zp(r,r,r,i,o);let n=bI(e);if(n.toRoot())return Zp(r,r,new Fe([],{}),i,o);let s=SI(n,r,t),a=s.processChildren?Pl(s.segmentGroup,s.index,n.commands):tS(s.segmentGroup,s.index,n.commands);return Zp(r,s.segmentGroup,a,i,o)}function Eu(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Ll(t){return typeof t=="object"&&t!=null&&t.outlets}function Zp(t,e,i,o,r){let n={};o&&Object.entries(o).forEach(([l,d])=>{n[l]=Array.isArray(d)?d.map(c=>`${c}`):`${d}`});let s;t===e?s=i:s=eS(t,e,i);let a=Qb(Xb(s));return new Cr(a,n,r)}function eS(t,e,i){let o={};return Object.entries(t.children).forEach(([r,n])=>{n===e?o[r]=i:o[r]=eS(n,e,i)}),new Fe(t.segments,o)}var Du=class{constructor(e,i,o){if(this.isAbsolute=e,this.numberOfDoubleDots=i,this.commands=o,e&&o.length>0&&Eu(o[0]))throw new Pe(4003,!1);let r=o.find(Ll);if(r&&r!==Wb(o))throw new Pe(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function bI(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Du(!0,0,t);let e=0,i=!1,o=t.reduce((r,n,s)=>{if(typeof n=="object"&&n!=null){if(n.outlets){let a={};return Object.entries(n.outlets).forEach(([l,d])=>{a[l]=typeof d=="string"?d.split("/"):d}),[...r,{outlets:a}]}if(n.segmentPath)return[...r,n.segmentPath]}return typeof n!="string"?[...r,n]:s===0?(n.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?i=!0:a===".."?e++:a!=""&&r.push(a))}),r):[...r,n]},[]);return new Du(i,e,o)}var Os=class{constructor(e,i,o){this.segmentGroup=e,this.processChildren=i,this.index=o}};function SI(t,e,i){if(t.isAbsolute)return new Os(e,!0,0);if(!i)return new Os(e,!1,NaN);if(i.parent===null)return new Os(i,!0,0);let o=Eu(t.commands[0])?0:1,r=i.segments.length-1+o;return xI(i,r,t.numberOfDoubleDots)}function xI(t,e,i){let o=t,r=e,n=i;for(;n>r;){if(n-=r,o=o.parent,!o)throw new Pe(4005,!1);r=o.segments.length}return new Os(o,!1,r-n)}function _I(t){return Ll(t[0])?t[0].outlets:{[he]:t}}function tS(t,e,i){if(t??=new Fe([],{}),t.segments.length===0&&t.hasChildren())return Pl(t,e,i);let o=EI(t,e,i),r=i.slice(o.commandIndex);if(o.match&&o.pathIndex<t.segments.length){let n=new Fe(t.segments.slice(0,o.pathIndex),{});return n.children[he]=new Fe(t.segments.slice(o.pathIndex),t.children),Pl(n,0,r)}else return o.match&&r.length===0?new Fe(t.segments,{}):o.match&&!t.hasChildren()?sf(t,e,i):o.match?Pl(t,0,r):sf(t,e,i)}function Pl(t,e,i){if(i.length===0)return new Fe(t.segments,{});{let o=_I(i),r={};if(Object.keys(o).some(n=>n!==he)&&t.children[he]&&t.numberOfChildren===1&&t.children[he].segments.length===0){let n=Pl(t.children[he],e,i);return new Fe(t.segments,n.children)}return Object.entries(o).forEach(([n,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(r[n]=tS(t.children[n],e,s))}),Object.entries(t.children).forEach(([n,s])=>{o[n]===void 0&&(r[n]=s)}),new Fe(t.segments,r)}}function EI(t,e,i){let o=0,r=e,n={match:!1,pathIndex:0,commandIndex:0};for(;r<t.segments.length;){if(o>=i.length)return n;let s=t.segments[r],a=i[o];if(Ll(a))break;let l=`${a}`,d=o<i.length-1?i[o+1]:null;if(r>0&&l===void 0)break;if(l&&d&&typeof d=="object"&&d.outlets===void 0){if(!Nb(l,d,s))return n;o+=2}else{if(!Nb(l,{},s))return n;o++}r++}return{match:!0,pathIndex:r,commandIndex:o}}function sf(t,e,i){let o=t.segments.slice(0,e),r=0;for(;r<i.length;){let n=i[r];if(Ll(n)){let l=DI(n.outlets);return new Fe(o,l)}if(r===0&&Eu(i[0])){let l=t.segments[e];o.push(new gn(l.path,Lb(i[0]))),r++;continue}let s=Ll(n)?n.outlets[he]:`${n}`,a=r<i.length-1?i[r+1]:null;s&&a&&Eu(a)?(o.push(new gn(s,Lb(a))),r+=2):(o.push(new gn(s,{})),r++)}return new Fe(o,{})}function DI(t){let e={};return Object.entries(t).forEach(([i,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(e[i]=sf(new Fe([],{}),0,o))}),e}function Lb(t){let e={};return Object.entries(t).forEach(([i,o])=>e[i]=`${o}`),e}function Nb(t,e,i){return t==i.path&&so(e,i.parameters)}var Fl="imperative",bt=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(bt||{}),Di=class{constructor(e,i){this.id=e,this.url=i}},zs=class extends Di{constructor(e,i,o="imperative",r=null){super(e,i),this.type=bt.NavigationStart,this.navigationTrigger=o,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Wi=class extends Di{constructor(e,i,o){super(e,i),this.urlAfterRedirects=o,this.type=bt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Ci=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(Ci||{}),Ru=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(Ru||{}),wr=class extends Di{constructor(e,i,o,r){super(e,i),this.reason=o,this.code=r,this.type=bt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},yr=class extends Di{constructor(e,i,o,r){super(e,i),this.reason=o,this.code=r,this.type=bt.NavigationSkipped}},Nl=class extends Di{constructor(e,i,o,r){super(e,i),this.error=o,this.target=r,this.type=bt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Mu=class extends Di{constructor(e,i,o,r){super(e,i),this.urlAfterRedirects=o,this.state=r,this.type=bt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},af=class extends Di{constructor(e,i,o,r){super(e,i),this.urlAfterRedirects=o,this.state=r,this.type=bt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},lf=class extends Di{constructor(e,i,o,r,n){super(e,i),this.urlAfterRedirects=o,this.state=r,this.shouldActivate=n,this.type=bt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},df=class extends Di{constructor(e,i,o,r){super(e,i),this.urlAfterRedirects=o,this.state=r,this.type=bt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},cf=class extends Di{constructor(e,i,o,r){super(e,i),this.urlAfterRedirects=o,this.state=r,this.type=bt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},uf=class{constructor(e){this.route=e,this.type=bt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},hf=class{constructor(e){this.route=e,this.type=bt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},gf=class{constructor(e){this.snapshot=e,this.type=bt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},pf=class{constructor(e){this.snapshot=e,this.type=bt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ff=class{constructor(e){this.snapshot=e,this.type=bt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},mf=class{constructor(e){this.snapshot=e,this.type=bt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Tu=class{constructor(e,i,o){this.routerEvent=e,this.position=i,this.anchor=o,this.type=bt.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},zl=class{},Gl=class{constructor(e){this.url=e}};var vf=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new jl,this.attachRef=null}},jl=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(o,r){let n=this.getOrCreateContext(o);n.outlet=r,this.contexts.set(o,n)}onChildOutletDestroyed(o){let r=this.getContext(o);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let o=this.contexts;return this.contexts=new Map,o}onOutletReAttached(o){this.contexts=o}getOrCreateContext(o){let r=this.getContext(o);return r||(r=new vf,this.contexts.set(o,r)),r}getContext(o){return this.contexts.get(o)||null}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Au=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let i=this.pathFromRoot(e);return i.length>1?i[i.length-2]:null}children(e){let i=Cf(e,this._root);return i?i.children.map(o=>o.value):[]}firstChild(e){let i=Cf(e,this._root);return i&&i.children.length>0?i.children[0].value:null}siblings(e){let i=wf(e,this._root);return i.length<2?[]:i[i.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return wf(e,this._root).map(i=>i.value)}};function Cf(t,e){if(t===e.value)return e;for(let i of e.children){let o=Cf(t,i);if(o)return o}return null}function wf(t,e){if(t===e.value)return[e];for(let i of e.children){let o=wf(t,i);if(o.length)return o.unshift(e),o}return[]}var vi=class{constructor(e,i){this.value=e,this.children=i}toString(){return`TreeNode(${this.value})`}};function Fs(t){let e={};return t&&t.children.forEach(i=>e[i.value.outlet]=i),e}var Iu=class extends Au{constructor(e,i){super(e),this.snapshot=i,Tf(this,e)}toString(){return this.snapshot.toString()}};function iS(t){let e=RI(t),i=new Pt([new gn("",{})]),o=new Pt({}),r=new Pt({}),n=new Pt({}),s=new Pt(""),a=new fn(i,o,n,s,r,he,t,e.root);return a.snapshot=e.root,new Iu(new vi(a,[]),e)}function RI(t){let e={},i={},o={},r="",n=new Vl([],e,o,r,i,he,t,null,{});return new Pu("",new vi(n,[]))}var fn=class{constructor(e,i,o,r,n,s,a,l){this.urlSubject=e,this.paramsSubject=i,this.queryParamsSubject=o,this.fragmentSubject=r,this.dataSubject=n,this.outlet=s,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(ve(d=>d[Wl]))??Y(void 0),this.url=e,this.params=i,this.queryParams=o,this.fragment=r,this.data=n}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ve(e=>Ls(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ve(e=>Ls(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Mf(t,e,i="emptyOnly"){let o,{routeConfig:r}=t;return e!==null&&(i==="always"||r?.path===""||!e.component&&!e.routeConfig?.loadComponent)?o={params:L(L({},e.params),t.params),data:L(L({},e.data),t.data),resolve:L(L(L(L({},t.data),e.data),r?.data),t._resolvedData)}:o={params:L({},t.params),data:L({},t.data),resolve:L(L({},t.data),t._resolvedData??{})},r&&rS(r)&&(o.resolve[Wl]=r.title),o}var Vl=class{get title(){return this.data?.[Wl]}constructor(e,i,o,r,n,s,a,l,d){this.url=e,this.params=i,this.queryParams=o,this.fragment=r,this.data=n,this.outlet=s,this.component=a,this.routeConfig=l,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ls(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ls(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(o=>o.toString()).join("/"),i=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${i}')`}},Pu=class extends Au{constructor(e,i){super(i),this.url=e,Tf(this,i)}toString(){return oS(this._root)}};function Tf(t,e){e.value._routerState=t,e.children.forEach(i=>Tf(t,i))}function oS(t){let e=t.children.length>0?` { ${t.children.map(oS).join(", ")} } `:"";return`${t.value}${e}`}function Jp(t){if(t.snapshot){let e=t.snapshot,i=t._futureSnapshot;t.snapshot=i,so(e.queryParams,i.queryParams)||t.queryParamsSubject.next(i.queryParams),e.fragment!==i.fragment&&t.fragmentSubject.next(i.fragment),so(e.params,i.params)||t.paramsSubject.next(i.params),iI(e.url,i.url)||t.urlSubject.next(i.url),so(e.data,i.data)||t.dataSubject.next(i.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function yf(t,e){let i=so(t.params,e.params)&&sI(t.url,e.url),o=!t.parent!=!e.parent;return i&&!o&&(!t.parent||yf(t.parent,e.parent))}function rS(t){return typeof t.title=="string"||t.title===null}var ql=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=he,this.activateEvents=new M,this.deactivateEvents=new M,this.attachEvents=new M,this.detachEvents=new M,this.parentContexts=O(jl),this.location=O(Io),this.changeDetector=O(Zt),this.environmentInjector=O(lr),this.inputBinder=O(Nu,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(o){if(o.name){let{firstChange:r,previousValue:n}=o.name;if(r)return;this.isTrackedInParentContexts(n)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(n)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(o){return this.parentContexts.getContext(o)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let o=this.parentContexts.getContext(this.name);o?.route&&(o.attachRef?this.attach(o.attachRef,o.route):this.activateWith(o.route,o.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Pe(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Pe(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Pe(4012,!1);this.location.detach();let o=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(o.instance),o}attach(o,r){this.activated=o,this._activatedRoute=r,this.location.insert(o.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(o.instance)}deactivate(){if(this.activated){let o=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(o)}}activateWith(o,r){if(this.isActivated)throw new Pe(4013,!1);this._activatedRoute=o;let n=this.location,a=o.snapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,d=new bf(o,l,n.injector);this.activated=n.createComponent(a,{index:n.length,injector:d,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=ye({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Ot]});let t=e;return t})(),bf=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,i,o){this.route=e,this.childContexts=i,this.parent=o}get(e,i){return e===fn?this.route:e===jl?this.childContexts:this.parent.get(e,i)}},Nu=new Z(""),zb=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(o){this.unsubscribeFromRouteData(o),this.subscribeToRouteData(o)}unsubscribeFromRouteData(o){this.outletDataSubscriptions.get(o)?.unsubscribe(),this.outletDataSubscriptions.delete(o)}subscribeToRouteData(o){let{activatedRoute:r}=o,n=gs([r.queryParams,r.params,r.data]).pipe(Ft(([s,a,l],d)=>(l=L(L(L({},s),a),l),d===0?Y(l):Promise.resolve(l)))).subscribe(s=>{if(!o.isActivated||!o.activatedComponentRef||o.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(o);return}let a=vy(r.component);if(!a){this.unsubscribeFromRouteData(o);return}for(let{templateName:l}of a.inputs)o.activatedComponentRef.setInput(l,s[l])});this.outletDataSubscriptions.set(o,n)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=H({token:e,factory:e.\u0275fac});let t=e;return t})();function MI(t,e,i){let o=Hl(t,e._root,i?i._root:void 0);return new Iu(o,e)}function Hl(t,e,i){if(i&&t.shouldReuseRoute(e.value,i.value.snapshot)){let o=i.value;o._futureSnapshot=e.value;let r=TI(t,e,i);return new vi(o,r)}else{if(t.shouldAttach(e.value)){let n=t.retrieve(e.value);if(n!==null){let s=n.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Hl(t,a)),s}}let o=AI(e.value),r=e.children.map(n=>Hl(t,n));return new vi(o,r)}}function TI(t,e,i){return e.children.map(o=>{for(let r of i.children)if(t.shouldReuseRoute(o.value,r.value.snapshot))return Hl(t,o,r);return Hl(t,o)})}function AI(t){return new fn(new Pt(t.url),new Pt(t.params),new Pt(t.queryParams),new Pt(t.fragment),new Pt(t.data),t.outlet,t.component,t)}var nS="ngNavigationCancelingError";function sS(t,e){let{redirectTo:i,navigationBehaviorOptions:o}=Ns(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=aS(!1,Ci.Redirect);return r.url=i,r.navigationBehaviorOptions=o,r}function aS(t,e){let i=new Error(`NavigationCancelingError: ${t||""}`);return i[nS]=!0,i.cancellationCode=e,i}function II(t){return lS(t)&&Ns(t.url)}function lS(t){return!!t&&t[nS]}var PI=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Me({type:e,selectors:[["ng-component"]],standalone:!0,features:[mi],decls:1,vars:0,template:function(r,n){r&1&&le(0,"router-outlet")},dependencies:[ql],encapsulation:2});let t=e;return t})();function FI(t,e){return t.providers&&!t._injector&&(t._injector=hp(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Af(t){let e=t.children&&t.children.map(Af),i=e?we(L({},t),{children:e}):L({},t);return!i.component&&!i.loadComponent&&(e||i.loadChildren)&&i.outlet&&i.outlet!==he&&(i.component=PI),i}function ao(t){return t.outlet||he}function OI(t,e){let i=t.filter(o=>ao(o)===e);return i.push(...t.filter(o=>ao(o)!==e)),i}function Kl(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let i=e.routeConfig;if(i?._loadedInjector)return i._loadedInjector;if(i?._injector)return i._injector}return null}var kI=(t,e,i,o)=>ve(r=>(new Sf(e,r.targetRouterState,r.currentRouterState,i,o).activate(t),r)),Sf=class{constructor(e,i,o,r,n){this.routeReuseStrategy=e,this.futureState=i,this.currState=o,this.forwardEvent=r,this.inputBindingEnabled=n}activate(e){let i=this.futureState._root,o=this.currState?this.currState._root:null;this.deactivateChildRoutes(i,o,e),Jp(this.futureState.root),this.activateChildRoutes(i,o,e)}deactivateChildRoutes(e,i,o){let r=Fs(i);e.children.forEach(n=>{let s=n.value.outlet;this.deactivateRoutes(n,r[s],o),delete r[s]}),Object.values(r).forEach(n=>{this.deactivateRouteAndItsChildren(n,o)})}deactivateRoutes(e,i,o){let r=e.value,n=i?i.value:null;if(r===n)if(r.component){let s=o.getContext(r.outlet);s&&this.deactivateChildRoutes(e,i,s.children)}else this.deactivateChildRoutes(e,i,o);else n&&this.deactivateRouteAndItsChildren(i,o)}deactivateRouteAndItsChildren(e,i){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,i):this.deactivateRouteAndOutlet(e,i)}detachAndStoreRouteSubtree(e,i){let o=i.getContext(e.value.outlet),r=o&&e.value.component?o.children:i,n=Fs(e);for(let s of Object.values(n))this.deactivateRouteAndItsChildren(s,r);if(o&&o.outlet){let s=o.outlet.detach(),a=o.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,i){let o=i.getContext(e.value.outlet),r=o&&e.value.component?o.children:i,n=Fs(e);for(let s of Object.values(n))this.deactivateRouteAndItsChildren(s,r);o&&(o.outlet&&(o.outlet.deactivate(),o.children.onOutletDeactivated()),o.attachRef=null,o.route=null)}activateChildRoutes(e,i,o){let r=Fs(i);e.children.forEach(n=>{this.activateRoutes(n,r[n.value.outlet],o),this.forwardEvent(new mf(n.value.snapshot))}),e.children.length&&this.forwardEvent(new pf(e.value.snapshot))}activateRoutes(e,i,o){let r=e.value,n=i?i.value:null;if(Jp(r),r===n)if(r.component){let s=o.getOrCreateContext(r.outlet);this.activateChildRoutes(e,i,s.children)}else this.activateChildRoutes(e,i,o);else if(r.component){let s=o.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Jp(a.route.value),this.activateChildRoutes(e,null,s.children)}else{let a=Kl(r.snapshot);s.attachRef=null,s.route=r,s.injector=a,s.outlet&&s.outlet.activateWith(r,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,o)}},Fu=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ks=class{constructor(e,i){this.component=e,this.route=i}};function LI(t,e,i){let o=t._root,r=e?e._root:null;return Al(o,r,i,[o.value])}function NI(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Vs(t,e){let i=Symbol(),o=e.get(t,i);return o===i?typeof t=="function"&&!jw(t)?t:e.get(t):o}function Al(t,e,i,o,r={canDeactivateChecks:[],canActivateChecks:[]}){let n=Fs(e);return t.children.forEach(s=>{zI(s,n[s.value.outlet],i,o.concat([s.value]),r),delete n[s.value.outlet]}),Object.entries(n).forEach(([s,a])=>Ol(a,i.getContext(s),r)),r}function zI(t,e,i,o,r={canDeactivateChecks:[],canActivateChecks:[]}){let n=t.value,s=e?e.value:null,a=i?i.getContext(t.value.outlet):null;if(s&&n.routeConfig===s.routeConfig){let l=GI(s,n,n.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new Fu(o)):(n.data=s.data,n._resolvedData=s._resolvedData),n.component?Al(t,e,a?a.children:null,o,r):Al(t,e,i,o,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new ks(a.outlet.component,s))}else s&&Ol(e,a,r),r.canActivateChecks.push(new Fu(o)),n.component?Al(t,null,a?a.children:null,o,r):Al(t,null,i,o,r);return r}function GI(t,e,i){if(typeof i=="function")return i(t,e);switch(i){case"pathParamsChange":return!pn(t.url,e.url);case"pathParamsOrQueryParamsChange":return!pn(t.url,e.url)||!so(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!yf(t,e)||!so(t.queryParams,e.queryParams);case"paramsChange":default:return!yf(t,e)}}function Ol(t,e,i){let o=Fs(t),r=t.value;Object.entries(o).forEach(([n,s])=>{r.component?e?Ol(s,e.children.getContext(n),i):Ol(s,null,i):Ol(s,e,i)}),r.component?e&&e.outlet&&e.outlet.isActivated?i.canDeactivateChecks.push(new ks(e.outlet.component,r)):i.canDeactivateChecks.push(new ks(null,r)):i.canDeactivateChecks.push(new ks(null,r))}function $l(t){return typeof t=="function"}function VI(t){return typeof t=="boolean"}function HI(t){return t&&$l(t.canLoad)}function BI(t){return t&&$l(t.canActivate)}function WI(t){return t&&$l(t.canActivateChild)}function UI(t){return t&&$l(t.canDeactivate)}function jI(t){return t&&$l(t.canMatch)}function dS(t){return t instanceof Hw||t?.name==="EmptyError"}var bu=Symbol("INITIAL_VALUE");function Gs(){return Ft(t=>gs(t.map(e=>e.pipe(Hi(1),to(bu)))).pipe(ve(e=>{for(let i of e)if(i!==!0){if(i===bu)return bu;if(i===!1||i instanceof Cr)return i}return!0}),Ct(e=>e!==bu),Hi(1)))}function qI(t,e){return Et(i=>{let{targetSnapshot:o,currentSnapshot:r,guards:{canActivateChecks:n,canDeactivateChecks:s}}=i;return s.length===0&&n.length===0?Y(we(L({},i),{guardsResult:!0})):KI(s,o,r,t).pipe(Et(a=>a&&VI(a)?$I(o,n,t,e):Y(a)),ve(a=>we(L({},i),{guardsResult:a})))})}function KI(t,e,i,o){return vt(t).pipe(Et(r=>JI(r.component,r.route,i,e,o)),rr(r=>r!==!0,!0))}function $I(t,e,i,o){return vt(e).pipe(or(r=>Fc(QI(r.route.parent,o),YI(r.route,o),ZI(t,r.path,i),XI(t,r.route,i))),rr(r=>r!==!0,!0))}function YI(t,e){return t!==null&&e&&e(new ff(t)),Y(!0)}function QI(t,e){return t!==null&&e&&e(new gf(t)),Y(!0)}function XI(t,e,i){let o=e.routeConfig?e.routeConfig.canActivate:null;if(!o||o.length===0)return Y(!0);let r=o.map(n=>ps(()=>{let s=Kl(e)??i,a=Vs(n,s),l=BI(a)?a.canActivate(e,t):io(s,()=>a(e,t));return Sr(l).pipe(rr())}));return Y(r).pipe(Gs())}function ZI(t,e,i){let o=e[e.length-1],n=e.slice(0,e.length-1).reverse().map(s=>NI(s)).filter(s=>s!==null).map(s=>ps(()=>{let a=s.guards.map(l=>{let d=Kl(s.node)??i,c=Vs(l,d),u=WI(c)?c.canActivateChild(o,t):io(d,()=>c(o,t));return Sr(u).pipe(rr())});return Y(a).pipe(Gs())}));return Y(n).pipe(Gs())}function JI(t,e,i,o,r){let n=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!n||n.length===0)return Y(!0);let s=n.map(a=>{let l=Kl(e)??r,d=Vs(a,l),c=UI(d)?d.canDeactivate(t,e,i,o):io(l,()=>d(t,e,i,o));return Sr(c).pipe(rr())});return Y(s).pipe(Gs())}function eP(t,e,i,o){let r=e.canLoad;if(r===void 0||r.length===0)return Y(!0);let n=r.map(s=>{let a=Vs(s,t),l=HI(a)?a.canLoad(e,i):io(t,()=>a(e,i));return Sr(l)});return Y(n).pipe(Gs(),cS(o))}function cS(t){return Vw(ht(e=>{if(Ns(e))throw sS(t,e)}),ve(e=>e===!0))}function tP(t,e,i,o){let r=e.canMatch;if(!r||r.length===0)return Y(!0);let n=r.map(s=>{let a=Vs(s,t),l=jI(a)?a.canMatch(e,i):io(t,()=>a(e,i));return Sr(l)});return Y(n).pipe(Gs(),cS(o))}var Bl=class{constructor(e){this.segmentGroup=e||null}},Ou=class extends Error{constructor(e){super(),this.urlTree=e}};function Ps(t){return al(new Bl(t))}function iP(t){return al(new Pe(4e3,!1))}function oP(t){return al(aS(!1,Ci.GuardRejected))}var xf=class{constructor(e,i){this.urlSerializer=e,this.urlTree=i}lineralizeSegments(e,i){let o=[],r=i.root;for(;;){if(o=o.concat(r.segments),r.numberOfChildren===0)return Y(o);if(r.numberOfChildren>1||!r.children[he])return iP(e.redirectTo);r=r.children[he]}}applyRedirectCommands(e,i,o){let r=this.applyRedirectCreateUrlTree(i,this.urlSerializer.parse(i),e,o);if(i.startsWith("/"))throw new Ou(r);return r}applyRedirectCreateUrlTree(e,i,o,r){let n=this.createSegmentGroup(e,i.root,o,r);return new Cr(n,this.createQueryParams(i.queryParams,this.urlTree.queryParams),i.fragment)}createQueryParams(e,i){let o={};return Object.entries(e).forEach(([r,n])=>{if(typeof n=="string"&&n.startsWith(":")){let a=n.substring(1);o[r]=i[a]}else o[r]=n}),o}createSegmentGroup(e,i,o,r){let n=this.createSegments(e,i.segments,o,r),s={};return Object.entries(i.children).forEach(([a,l])=>{s[a]=this.createSegmentGroup(e,l,o,r)}),new Fe(n,s)}createSegments(e,i,o,r){return i.map(n=>n.path.startsWith(":")?this.findPosParam(e,n,r):this.findOrReturn(n,o))}findPosParam(e,i,o){let r=o[i.path.substring(1)];if(!r)throw new Pe(4001,!1);return r}findOrReturn(e,i){let o=0;for(let r of i){if(r.path===e.path)return i.splice(o),r;o++}return e}},_f={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function rP(t,e,i,o,r){let n=If(t,e,i);return n.matched?(o=FI(e,o),tP(o,e,i,r).pipe(ve(s=>s===!0?n:L({},_f)))):Y(n)}function If(t,e,i){if(e.path==="**")return nP(i);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||i.length>0)?L({},_f):{matched:!0,consumedSegments:[],remainingSegments:i,parameters:{},positionalParamSegments:{}};let r=(e.matcher||tI)(i,t,e);if(!r)return L({},_f);let n={};Object.entries(r.posParams??{}).forEach(([a,l])=>{n[a]=l.path});let s=r.consumed.length>0?L(L({},n),r.consumed[r.consumed.length-1].parameters):n;return{matched:!0,consumedSegments:r.consumed,remainingSegments:i.slice(r.consumed.length),parameters:s,positionalParamSegments:r.posParams??{}}}function nP(t){return{matched:!0,parameters:t.length>0?Wb(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function Gb(t,e,i,o){return i.length>0&&lP(t,i,o)?{segmentGroup:new Fe(e,aP(o,new Fe(i,t.children))),slicedSegments:[]}:i.length===0&&dP(t,i,o)?{segmentGroup:new Fe(t.segments,sP(t,i,o,t.children)),slicedSegments:i}:{segmentGroup:new Fe(t.segments,t.children),slicedSegments:i}}function sP(t,e,i,o){let r={};for(let n of i)if(zu(t,e,n)&&!o[ao(n)]){let s=new Fe([],{});r[ao(n)]=s}return L(L({},o),r)}function aP(t,e){let i={};i[he]=e;for(let o of t)if(o.path===""&&ao(o)!==he){let r=new Fe([],{});i[ao(o)]=r}return i}function lP(t,e,i){return i.some(o=>zu(t,e,o)&&ao(o)!==he)}function dP(t,e,i){return i.some(o=>zu(t,e,o))}function zu(t,e,i){return(t.hasChildren()||e.length>0)&&i.pathMatch==="full"?!1:i.path===""}function cP(t,e,i,o){return ao(t)!==o&&(o===he||!zu(e,i,t))?!1:If(e,t,i).matched}function uP(t,e,i){return e.length===0&&!t.children[i]}var Ef=class{};function hP(t,e,i,o,r,n,s="emptyOnly"){return new Df(t,e,i,o,r,s,n).recognize()}var gP=31,Df=class{constructor(e,i,o,r,n,s,a){this.injector=e,this.configLoader=i,this.rootComponentType=o,this.config=r,this.urlTree=n,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new xf(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new Pe(4002,`'${e.segmentGroup}'`)}recognize(){let e=Gb(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ve(i=>{let o=new Vl([],Object.freeze({}),Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,{},he,this.rootComponentType,null,{}),r=new vi(o,i),n=new Pu("",r),s=yI(o,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,n.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(n._root,null),{state:n,tree:s}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,he).pipe(fs(o=>{if(o instanceof Ou)return this.urlTree=o.urlTree,this.match(o.urlTree.root);throw o instanceof Bl?this.noMatchError(o):o}))}inheritParamsAndData(e,i){let o=e.value,r=Mf(o,i,this.paramsInheritanceStrategy);o.params=Object.freeze(r.params),o.data=Object.freeze(r.data),e.children.forEach(n=>this.inheritParamsAndData(n,o))}processSegmentGroup(e,i,o,r){return o.segments.length===0&&o.hasChildren()?this.processChildren(e,i,o):this.processSegment(e,i,o,o.segments,r,!0).pipe(ve(n=>n instanceof vi?[n]:[]))}processChildren(e,i,o){let r=[];for(let n of Object.keys(o.children))n==="primary"?r.unshift(n):r.push(n);return vt(r).pipe(or(n=>{let s=o.children[n],a=OI(i,n);return this.processSegmentGroup(e,a,s,n)}),Uw((n,s)=>(n.push(...s),n)),op(null),Ww(),Et(n=>{if(n===null)return Ps(o);let s=uS(n);return pP(s),Y(s)}))}processSegment(e,i,o,r,n,s){return vt(i).pipe(or(a=>this.processSegmentAgainstRoute(a._injector??e,i,a,o,r,n,s).pipe(fs(l=>{if(l instanceof Bl)return Y(null);throw l}))),rr(a=>!!a),fs(a=>{if(dS(a))return uP(o,r,n)?Y(new Ef):Ps(o);throw a}))}processSegmentAgainstRoute(e,i,o,r,n,s,a){return cP(o,r,n,s)?o.redirectTo===void 0?this.matchSegmentAgainstRoute(e,r,o,n,s):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,r,i,o,n,s):Ps(r):Ps(r)}expandSegmentAgainstRouteUsingRedirect(e,i,o,r,n,s){let{matched:a,consumedSegments:l,positionalParamSegments:d,remainingSegments:c}=If(i,r,n);if(!a)return Ps(i);r.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>gP&&(this.allowRedirects=!1));let u=this.applyRedirects.applyRedirectCommands(l,r.redirectTo,d);return this.applyRedirects.lineralizeSegments(r,u).pipe(Et(h=>this.processSegment(e,o,i,h.concat(c),s,!1)))}matchSegmentAgainstRoute(e,i,o,r,n){let s=rP(i,o,r,e,this.urlSerializer);return o.path==="**"&&(i.children={}),s.pipe(Ft(a=>a.matched?(e=o._injector??e,this.getChildConfig(e,o,r).pipe(Ft(({routes:l})=>{let d=o._loadedInjector??e,{consumedSegments:c,remainingSegments:u,parameters:h}=a,p=new Vl(c,h,Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,mP(o),ao(o),o.component??o._loadedComponent??null,o,vP(o)),{segmentGroup:m,slicedSegments:C}=Gb(i,c,u,l);if(C.length===0&&m.hasChildren())return this.processChildren(d,l,m).pipe(ve(b=>b===null?null:new vi(p,b)));if(l.length===0&&C.length===0)return Y(new vi(p,[]));let w=ao(o)===n;return this.processSegment(d,l,m,C,w?he:n,!0).pipe(ve(b=>new vi(p,b instanceof vi?[b]:[])))}))):Ps(i)))}getChildConfig(e,i,o){return i.children?Y({routes:i.children,injector:e}):i.loadChildren?i._loadedRoutes!==void 0?Y({routes:i._loadedRoutes,injector:i._loadedInjector}):eP(e,i,o,this.urlSerializer).pipe(Et(r=>r?this.configLoader.loadChildren(e,i).pipe(ht(n=>{i._loadedRoutes=n.routes,i._loadedInjector=n.injector})):oP(i))):Y({routes:[],injector:e})}};function pP(t){t.sort((e,i)=>e.value.outlet===he?-1:i.value.outlet===he?1:e.value.outlet.localeCompare(i.value.outlet))}function fP(t){let e=t.value.routeConfig;return e&&e.path===""}function uS(t){let e=[],i=new Set;for(let o of t){if(!fP(o)){e.push(o);continue}let r=e.find(n=>o.value.routeConfig===n.value.routeConfig);r!==void 0?(r.children.push(...o.children),i.add(r)):e.push(o)}for(let o of i){let r=uS(o.children);e.push(new vi(o.value,r))}return e.filter(o=>!i.has(o))}function mP(t){return t.data||{}}function vP(t){return t.resolve||{}}function CP(t,e,i,o,r,n){return Et(s=>hP(t,e,i,o,s.extractedUrl,r,n).pipe(ve(({state:a,tree:l})=>we(L({},s),{targetSnapshot:a,urlAfterRedirects:l}))))}function wP(t,e){return Et(i=>{let{targetSnapshot:o,guards:{canActivateChecks:r}}=i;if(!r.length)return Y(i);let n=new Set(r.map(l=>l.route)),s=new Set;for(let l of n)if(!s.has(l))for(let d of hS(l))s.add(d);let a=0;return vt(s).pipe(or(l=>n.has(l)?yP(l,o,t,e):(l.data=Mf(l,l.parent,t).resolve,Y(void 0))),ht(()=>a++),rp(1),Et(l=>a===s.size?Y(i):ir))})}function hS(t){let e=t.children.map(i=>hS(i)).flat();return[t,...e]}function yP(t,e,i,o){let r=t.routeConfig,n=t._resolve;return r?.title!==void 0&&!rS(r)&&(n[Wl]=r.title),bP(n,t,e,o).pipe(ve(s=>(t._resolvedData=s,t.data=Mf(t,t.parent,i).resolve,null)))}function bP(t,e,i,o){let r=of(t);if(r.length===0)return Y({});let n={};return vt(r).pipe(Et(s=>SP(t[s],e,i,o).pipe(rr(),ht(a=>{n[s]=a}))),rp(1),vs(n),fs(s=>dS(s)?ir:al(s)))}function SP(t,e,i,o){let r=Kl(e)??o,n=Vs(t,r),s=n.resolve?n.resolve(e,i):io(r,()=>n(e,i));return Sr(s)}function ef(t){return Ft(e=>{let i=t(e);return i?vt(i).pipe(ve(()=>e)):Y(e)})}var gS=(()=>{let e=class e{buildTitle(o){let r,n=o.root;for(;n!==void 0;)r=this.getResolvedTitleForRoute(n)??r,n=n.children.find(s=>s.outlet===he);return r}getResolvedTitleForRoute(o){return o.data[Wl]}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=H({token:e,factory:()=>O(xP),providedIn:"root"});let t=e;return t})(),xP=(()=>{let e=class e extends gS{constructor(o){super(),this.title=o}updateTitle(o){let r=this.buildTitle(o);r!==void 0&&this.title.setTitle(r)}};e.\u0275fac=function(r){return new(r||e)(F($y))},e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Yl=new Z("",{providedIn:"root",factory:()=>({})}),ku=new Z(""),Pf=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=O(jc)}loadComponent(o){if(this.componentLoaders.get(o))return this.componentLoaders.get(o);if(o._loadedComponent)return Y(o._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(o);let r=Sr(o.loadComponent()).pipe(ve(pS),ht(s=>{this.onLoadEndListener&&this.onLoadEndListener(o),o._loadedComponent=s}),sn(()=>{this.componentLoaders.delete(o)})),n=new ep(r,()=>new pe).pipe(Jg());return this.componentLoaders.set(o,n),n}loadChildren(o,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Y({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=_P(r,this.compiler,o,this.onLoadEndListener).pipe(sn(()=>{this.childrenLoaders.delete(r)})),a=new ep(s,()=>new pe).pipe(Jg());return this.childrenLoaders.set(r,a),a}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function _P(t,e,i,o){return Sr(t.loadChildren()).pipe(ve(pS),Et(r=>r instanceof ny||Array.isArray(r)?Y(r):vt(e.compileModuleAsync(r))),ve(r=>{o&&o(t);let n,s,a=!1;return Array.isArray(r)?(s=r,a=!0):(n=r.create(i).injector,s=n.get(ku,[],{optional:!0,self:!0}).flat()),{routes:s.map(Af),injector:n}}))}function EP(t){return t&&typeof t=="object"&&"default"in t}function pS(t){return EP(t)?t.default:t}var Ff=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=H({token:e,factory:()=>O(DP),providedIn:"root"});let t=e;return t})(),DP=(()=>{let e=class e{shouldProcessUrl(o){return!0}extract(o){return o}merge(o,r){return o}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),fS=new Z(""),mS=new Z("");function RP(t,e,i){let o=t.get(mS),r=t.get(fe);return t.get(ee).runOutsideAngular(()=>{if(!r.startViewTransition||o.skipNextTransition)return o.skipNextTransition=!1,new Promise(d=>setTimeout(d));let n,s=new Promise(d=>{n=d}),a=r.startViewTransition(()=>(n(),MP(t))),{onViewTransitionCreated:l}=o;return l&&io(t,()=>l({transition:a,from:e,to:i})),s})}function MP(t){return new Promise(e=>{cp(e,{injector:t})})}var Of=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new pe,this.transitionAbortSubject=new pe,this.configLoader=O(Pf),this.environmentInjector=O(lr),this.urlSerializer=O(Ul),this.rootContexts=O(jl),this.location=O(ln),this.inputBindingEnabled=O(Nu,{optional:!0})!==null,this.titleStrategy=O(gS),this.options=O(Yl,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=O(Ff),this.createViewTransition=O(fS,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Y(void 0),this.rootComponentType=null;let o=n=>this.events.next(new uf(n)),r=n=>this.events.next(new hf(n));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=o}complete(){this.transitions?.complete()}handleNavigationRequest(o){let r=++this.navigationId;this.transitions?.next(we(L(L({},this.transitions.value),o),{id:r}))}setupNavigations(o,r,n){return this.transitions=new Pt({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Fl,restoredState:null,currentSnapshot:n.snapshot,targetSnapshot:null,currentRouterState:n,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Ct(s=>s.id!==0),ve(s=>we(L({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Ft(s=>{let a=!1,l=!1;return Y(s).pipe(Ft(d=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",Ci.SupersededByNewNavigation),ir;this.currentTransition=s,this.currentNavigation={id:d.id,initialUrl:d.rawUrl,extractedUrl:d.extractedUrl,trigger:d.source,extras:d.extras,previousNavigation:this.lastSuccessfulNavigation?we(L({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let c=!o.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),u=d.extras.onSameUrlNavigation??o.onSameUrlNavigation;if(!c&&u!=="reload"){let h="";return this.events.next(new yr(d.id,this.urlSerializer.serialize(d.rawUrl),h,Ru.IgnoredSameUrlNavigation)),d.resolve(null),ir}if(this.urlHandlingStrategy.shouldProcessUrl(d.rawUrl))return Y(d).pipe(Ft(h=>{let p=this.transitions?.getValue();return this.events.next(new zs(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),p!==this.transitions?.getValue()?ir:Promise.resolve(h)}),CP(this.environmentInjector,this.configLoader,this.rootComponentType,o.config,this.urlSerializer,this.paramsInheritanceStrategy),ht(h=>{s.targetSnapshot=h.targetSnapshot,s.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation=we(L({},this.currentNavigation),{finalUrl:h.urlAfterRedirects});let p=new Mu(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}));if(c&&this.urlHandlingStrategy.shouldProcessUrl(d.currentRawUrl)){let{id:h,extractedUrl:p,source:m,restoredState:C,extras:w}=d,b=new zs(h,this.urlSerializer.serialize(p),m,C);this.events.next(b);let y=iS(this.rootComponentType).snapshot;return this.currentTransition=s=we(L({},d),{targetSnapshot:y,urlAfterRedirects:p,extras:we(L({},w),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=p,Y(s)}else{let h="";return this.events.next(new yr(d.id,this.urlSerializer.serialize(d.extractedUrl),h,Ru.IgnoredByUrlHandlingStrategy)),d.resolve(null),ir}}),ht(d=>{let c=new af(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(c)}),ve(d=>(this.currentTransition=s=we(L({},d),{guards:LI(d.targetSnapshot,d.currentSnapshot,this.rootContexts)}),s)),qI(this.environmentInjector,d=>this.events.next(d)),ht(d=>{if(s.guardsResult=d.guardsResult,Ns(d.guardsResult))throw sS(this.urlSerializer,d.guardsResult);let c=new lf(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot,!!d.guardsResult);this.events.next(c)}),Ct(d=>d.guardsResult?!0:(this.cancelNavigationTransition(d,"",Ci.GuardRejected),!1)),ef(d=>{if(d.guards.canActivateChecks.length)return Y(d).pipe(ht(c=>{let u=new df(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}),Ft(c=>{let u=!1;return Y(c).pipe(wP(this.paramsInheritanceStrategy,this.environmentInjector),ht({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(c,"",Ci.NoDataFromResolver)}}))}),ht(c=>{let u=new cf(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}))}),ef(d=>{let c=u=>{let h=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(u.routeConfig).pipe(ht(p=>{u.component=p}),ve(()=>{})));for(let p of u.children)h.push(...c(p));return h};return gs(c(d.targetSnapshot.root)).pipe(op(null),Hi(1))}),ef(()=>this.afterPreactivation()),Ft(()=>{let{currentSnapshot:d,targetSnapshot:c}=s,u=this.createViewTransition?.(this.environmentInjector,d.root,c.root);return u?vt(u).pipe(ve(()=>s)):Y(s)}),ve(d=>{let c=MI(o.routeReuseStrategy,d.targetSnapshot,d.currentRouterState);return this.currentTransition=s=we(L({},d),{targetRouterState:c}),this.currentNavigation.targetRouterState=c,s}),ht(()=>{this.events.next(new zl)}),kI(this.rootContexts,o.routeReuseStrategy,d=>this.events.next(d),this.inputBindingEnabled),Hi(1),ht({next:d=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Wi(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects))),this.titleStrategy?.updateTitle(d.targetRouterState.snapshot),d.resolve(!0)},complete:()=>{a=!0}}),it(this.transitionAbortSubject.pipe(ht(d=>{throw d}))),sn(()=>{!a&&!l&&this.cancelNavigationTransition(s,"",Ci.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),fs(d=>{if(l=!0,lS(d))this.events.next(new wr(s.id,this.urlSerializer.serialize(s.extractedUrl),d.message,d.cancellationCode)),II(d)?this.events.next(new Gl(d.url)):s.resolve(!1);else{this.events.next(new Nl(s.id,this.urlSerializer.serialize(s.extractedUrl),d,s.targetSnapshot??void 0));try{s.resolve(o.errorHandler(d))}catch(c){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(c)}}return ir}))}))}cancelNavigationTransition(o,r,n){let s=new wr(o.id,this.urlSerializer.serialize(o.extractedUrl),r,n);this.events.next(s),o.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function TP(t){return t!==Fl}var AP=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=H({token:e,factory:()=>O(IP),providedIn:"root"});let t=e;return t})(),Rf=class{shouldDetach(e){return!1}store(e,i){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,i){return e.routeConfig===i.routeConfig}},IP=(()=>{let e=class e extends Rf{};e.\u0275fac=(()=>{let o;return function(n){return(o||(o=Bi(e)))(n||e)}})(),e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),vS=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=H({token:e,factory:()=>O(PP),providedIn:"root"});let t=e;return t})(),PP=(()=>{let e=class e extends vS{constructor(){super(...arguments),this.location=O(ln),this.urlSerializer=O(Ul),this.options=O(Yl,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=O(Ff),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Cr,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=iS(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(o){return this.location.subscribe(r=>{r.type==="popstate"&&o(r.url,r.state)})}handleRouterEvent(o,r){if(o instanceof zs)this.stateMemento=this.createStateMemento();else if(o instanceof yr)this.rawUrlTree=r.initialUrl;else if(o instanceof Mu){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let n=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(n,r)}}else o instanceof zl?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r))):o instanceof wr&&(o.code===Ci.GuardRejected||o.code===Ci.NoDataFromResolver)?this.restoreHistory(r):o instanceof Nl?this.restoreHistory(r,!0):o instanceof Wi&&(this.lastSuccessfulId=o.id,this.currentPageId=this.browserPageId)}setBrowserUrl(o,r){let n=this.urlSerializer.serialize(o);if(this.location.isCurrentPathEqualTo(n)||r.extras.replaceUrl){let s=this.browserPageId,a=L(L({},r.extras.state),this.generateNgRouterState(r.id,s));this.location.replaceState(n,"",a)}else{let s=L(L({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(n,"",s)}}restoreHistory(o,r=!1){if(this.canceledNavigationResolution==="computed"){let n=this.browserPageId,s=this.currentPageId-n;s!==0?this.location.historyGo(s):this.currentUrlTree===o.finalUrl&&s===0&&(this.resetState(o),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(o),this.resetUrlToCurrentUrlTree())}resetState(o){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,o.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(o,r){return this.canceledNavigationResolution==="computed"?{navigationId:o,\u0275routerPageId:r}:{navigationId:o}}};e.\u0275fac=(()=>{let o;return function(n){return(o||(o=Bi(e)))(n||e)}})(),e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Il=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Il||{});function CS(t,e){t.events.pipe(Ct(i=>i instanceof Wi||i instanceof wr||i instanceof Nl||i instanceof yr),ve(i=>i instanceof Wi||i instanceof yr?Il.COMPLETE:(i instanceof wr?i.code===Ci.Redirect||i.code===Ci.SupersededByNewNavigation:!1)?Il.REDIRECTING:Il.FAILED),Ct(i=>i!==Il.REDIRECTING),Hi(1)).subscribe(()=>{e()})}function FP(t){throw t}var OP={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},kP={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Wt=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=O(Hc),this.stateManager=O(vS),this.options=O(Yl,{optional:!0})||{},this.pendingTasks=O(ml),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=O(Of),this.urlSerializer=O(Ul),this.location=O(ln),this.urlHandlingStrategy=O(Ff),this._events=new pe,this.errorHandler=this.options.errorHandler||FP,this.navigated=!1,this.routeReuseStrategy=O(AP),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=O(ku,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!O(Nu,{optional:!0}),this.eventsSubscription=new tr,this.isNgZoneEnabled=O(ee)instanceof ee&&ee.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:o=>{this.console.warn(o)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let o=this.navigationTransitions.events.subscribe(r=>{try{let n=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(n!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof wr&&r.code!==Ci.Redirect&&r.code!==Ci.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Wi)this.navigated=!0;else if(r instanceof Gl){let a=this.urlHandlingStrategy.merge(r.url,n.currentRawUrl),l={info:n.extras.info,skipLocationChange:n.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||TP(n.source)};this.scheduleNavigation(a,Fl,null,l,{resolve:n.resolve,reject:n.reject,promise:n.promise})}}NP(r)&&this._events.next(r)}catch(n){this.navigationTransitions.transitionAbortSubject.next(n)}});this.eventsSubscription.add(o)}resetRootComponentType(o){this.routerState.root.component=o,this.navigationTransitions.rootComponentType=o}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Fl,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((o,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(o,"popstate",r)},0)})}navigateToSyncWithBrowser(o,r,n){let s={replaceUrl:!0},a=n?.navigationId?n:null;if(n){let d=L({},n);delete d.navigationId,delete d.\u0275routerPageId,Object.keys(d).length!==0&&(s.state=d)}let l=this.parseUrl(o);this.scheduleNavigation(l,r,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(o){this.config=o.map(Af),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(o,r={}){let{relativeTo:n,queryParams:s,fragment:a,queryParamsHandling:l,preserveFragment:d}=r,c=d?this.currentUrlTree.fragment:a,u=null;switch(l){case"merge":u=L(L({},this.currentUrlTree.queryParams),s);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=s||null}u!==null&&(u=this.removeEmptyProps(u));let h;try{let p=n?n.snapshot:this.routerState.snapshot.root;h=Zb(p)}catch{(typeof o[0]!="string"||!o[0].startsWith("/"))&&(o=[]),h=this.currentUrlTree.root}return Jb(h,o,u,c??null)}navigateByUrl(o,r={skipLocationChange:!1}){let n=Ns(o)?o:this.parseUrl(o),s=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(s,Fl,null,r)}navigate(o,r={skipLocationChange:!1}){return LP(o),this.navigateByUrl(this.createUrlTree(o,r),r)}serializeUrl(o){return this.urlSerializer.serialize(o)}parseUrl(o){try{return this.urlSerializer.parse(o)}catch{return this.urlSerializer.parse("/")}}isActive(o,r){let n;if(r===!0?n=L({},OP):r===!1?n=L({},kP):n=r,Ns(o))return Ob(this.currentUrlTree,o,n);let s=this.parseUrl(o);return Ob(this.currentUrlTree,s,n)}removeEmptyProps(o){return Object.entries(o).reduce((r,[n,s])=>(s!=null&&(r[n]=s),r),{})}scheduleNavigation(o,r,n,s,a){if(this.disposed)return Promise.resolve(!1);let l,d,c;a?(l=a.resolve,d=a.reject,c=a.promise):c=new Promise((h,p)=>{l=h,d=p});let u=this.pendingTasks.add();return CS(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:o,extras:s,resolve:l,reject:d,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(h=>Promise.reject(h))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function LP(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new Pe(4008,!1)}function NP(t){return!(t instanceof zl)&&!(t instanceof Gl)}var br=(()=>{let e=class e{constructor(o,r,n,s,a,l){this.router=o,this.route=r,this.tabIndexAttribute=n,this.renderer=s,this.el=a,this.locationStrategy=l,this.href=null,this.commands=null,this.onChanges=new pe,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;let d=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=d==="a"||d==="area",this.isAnchorElement?this.subscription=o.events.subscribe(c=>{c instanceof Wi&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(o){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",o)}ngOnChanges(o){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(o){o!=null?(this.commands=Array.isArray(o)?o:[o],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(o,r,n,s,a){let l=this.urlTree;if(l===null||this.isAnchorElement&&(o!==0||r||n||s||a||typeof this.target=="string"&&this.target!="_self"))return!0;let d={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(l,d),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let o=this.urlTree;this.href=o!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(o)):null;let r=this.href===null?null:oy(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(o,r){let n=this.renderer,s=this.el.nativeElement;r!==null?n.setAttribute(s,o,r):n.removeAttribute(s,o)}get urlTree(){return this.commands===null?null:this.router.createUrlTree(this.commands,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};e.\u0275fac=function(r){return new(r||e)(W(Wt),W(fn),Oc("tabindex"),W(Ss),W(Te),W(Cl))},e.\u0275dir=ye({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,n){r&1&&ne("click",function(a){return n.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),r&2&&gt("target",n.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[Ve.HasDecoratorInputTransform,"preserveFragment","preserveFragment",_i],skipLocationChange:[Ve.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",_i],replaceUrl:[Ve.HasDecoratorInputTransform,"replaceUrl","replaceUrl",_i],routerLink:"routerLink"},standalone:!0,features:[oo,Ot]});let t=e;return t})(),wS=(()=>{let e=class e{get isActive(){return this._isActive}constructor(o,r,n,s,a){this.router=o,this.element=r,this.renderer=n,this.cdr=s,this.link=a,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new M,this.routerEventsSubscription=o.events.subscribe(l=>{l instanceof Wi&&this.update()})}ngAfterContentInit(){Y(this.links.changes,Y(null)).pipe(Mo()).subscribe(o=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let o=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=vt(o).pipe(Mo()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(o){let r=Array.isArray(o)?o:o.split(" ");this.classes=r.filter(n=>!!n)}ngOnChanges(o){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let o=this.hasActiveLinks();this.classes.forEach(r=>{o?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),o&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==o&&(this._isActive=o,this.cdr.markForCheck(),this.isActiveChange.emit(o))})}isLinkActive(o){let r=zP(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return n=>{let s=n.urlTree;return s?o.isActive(s,r):!1}}hasActiveLinks(){let o=this.isLinkActive(this.router);return this.link&&o(this.link)||this.links.some(o)}};e.\u0275fac=function(r){return new(r||e)(W(Wt),W(Te),W(Ss),W(Zt),W(br,8))},e.\u0275dir=ye({type:e,selectors:[["","routerLinkActive",""]],contentQueries:function(r,n,s){if(r&1&&xs(s,br,5),r&2){let a;ur(a=hr())&&(n.links=a)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[Ot]});let t=e;return t})();function zP(t){return!!t.paths}var Lu=class{};var GP=(()=>{let e=class e{constructor(o,r,n,s,a){this.router=o,this.injector=n,this.preloadingStrategy=s,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(Ct(o=>o instanceof Wi),or(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(o,r){let n=[];for(let s of r){s.providers&&!s._injector&&(s._injector=hp(s.providers,o,`Route: ${s.path}`));let a=s._injector??o,l=s._loadedInjector??a;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&n.push(this.preloadConfig(a,s)),(s.children||s._loadedRoutes)&&n.push(this.processRoutes(l,s.children??s._loadedRoutes))}return vt(n).pipe(Mo())}preloadConfig(o,r){return this.preloadingStrategy.preload(r,()=>{let n;r.loadChildren&&r.canLoad===void 0?n=this.loader.loadChildren(o,r):n=Y(null);let s=n.pipe(Et(a=>a===null?Y(void 0):(r._loadedRoutes=a.routes,r._loadedInjector=a.injector,this.processRoutes(a.injector??o,a.routes))));if(r.loadComponent&&!r._loadedComponent){let a=this.loader.loadComponent(r);return vt([s,a]).pipe(Mo())}else return s})}};e.\u0275fac=function(r){return new(r||e)(F(Wt),F(jc),F(lr),F(Lu),F(Pf))},e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),yS=new Z(""),VP=(()=>{let e=class e{constructor(o,r,n,s,a={}){this.urlSerializer=o,this.transitions=r,this.viewportScroller=n,this.zone=s,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},this.environmentInjector=O(lr),a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(o=>{o instanceof zs?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=o.navigationTrigger,this.restoredId=o.restoredState?o.restoredState.navigationId:0):o instanceof Wi?(this.lastId=o.id,this.scheduleScrollEvent(o,this.urlSerializer.parse(o.urlAfterRedirects).fragment)):o instanceof yr&&o.code===Ru.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(o,this.urlSerializer.parse(o.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(o=>{o instanceof Tu&&(o.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(o.position):o.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(o.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(o,r){this.zone.runOutsideAngular(()=>Zg(this,null,function*(){yield new Promise(n=>{setTimeout(()=>{n()}),cp(()=>{n()},{injector:this.environmentInjector})}),this.zone.run(()=>{this.transitions.events.next(new Tu(o,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(r){Lc()},e.\u0275prov=H({token:e,factory:e.\u0275fac});let t=e;return t})();function HP(t){return t.routerState.root}function Ql(t,e){return{\u0275kind:t,\u0275providers:e}}function BP(){let t=O(Ht);return e=>{let i=t.get(ro);if(e!==i.components[0])return;let o=t.get(Wt),r=t.get(bS);t.get(kf)===1&&o.initialNavigation(),t.get(SS,null,np.Optional)?.setUpPreloading(),t.get(yS,null,np.Optional)?.init(),o.resetRootComponentType(i.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var bS=new Z("",{factory:()=>new pe}),kf=new Z("",{providedIn:"root",factory:()=>1});function WP(){return Ql(2,[{provide:kf,useValue:0},{provide:yp,multi:!0,deps:[Ht],useFactory:e=>{let i=e.get(yy,Promise.resolve());return()=>i.then(()=>new Promise(o=>{let r=e.get(Wt),n=e.get(bS);CS(r,()=>{o(!0)}),e.get(Of).afterPreactivation=()=>(o(!0),n.closed?Y(void 0):n),r.initialNavigation()}))}}])}function UP(){return Ql(3,[{provide:yp,multi:!0,useFactory:()=>{let e=O(Wt);return()=>{e.setUpLocationChangeListener()}}},{provide:kf,useValue:2}])}var SS=new Z("");function jP(t){return Ql(0,[{provide:SS,useExisting:GP},{provide:Lu,useExisting:t}])}function qP(){return Ql(8,[zb,{provide:Nu,useExisting:zb}])}function KP(t){let e=[{provide:fS,useValue:RP},{provide:mS,useValue:L({skipNextTransition:!!t?.skipInitialTransition},t)}];return Ql(9,e)}var Vb=new Z("ROUTER_FORROOT_GUARD"),$P=[ln,{provide:Ul,useClass:kl},Wt,jl,{provide:fn,useFactory:HP,deps:[Wt]},Pf,[]],Lf=(()=>{let e=class e{constructor(o){}static forRoot(o,r){return{ngModule:e,providers:[$P,[],{provide:ku,multi:!0,useValue:o},{provide:Vb,useFactory:ZP,deps:[[Wt,new Cs,new cl]]},{provide:Yl,useValue:r||{}},r?.useHash?QP():XP(),YP(),r?.preloadingStrategy?jP(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?JP(r):[],r?.bindToComponentInputs?qP().\u0275providers:[],r?.enableViewTransitions?KP().\u0275providers:[],eF()]}}static forChild(o){return{ngModule:e,providers:[{provide:ku,multi:!0,useValue:o}]}}};e.\u0275fac=function(r){return new(r||e)(F(Vb,8))},e.\u0275mod=re({type:e}),e.\u0275inj=oe({});let t=e;return t})();function YP(){return{provide:yS,useFactory:()=>{let t=O(Ey),e=O(ee),i=O(Yl),o=O(Of),r=O(Ul);return i.scrollOffset&&t.setOffset(i.scrollOffset),new VP(r,o,t,e,i)}}}function QP(){return{provide:Cl,useClass:Sy}}function XP(){return{provide:Cl,useClass:by}}function ZP(t){return"guarded"}function JP(t){return[t.initialNavigation==="disabled"?UP().\u0275providers:[],t.initialNavigation==="enabledBlocking"?WP().\u0275providers:[]]}var Hb=new Z("");function eF(){return[{provide:Hb,useFactory:BP},{provide:bp,multi:!0,useExisting:Hb}]}var Rm=Object.defineProperty,tF=Object.defineProperties,iF=Object.getOwnPropertyDescriptor,oF=Object.getOwnPropertyDescriptors,$u=Object.getOwnPropertySymbols,US=Object.prototype.hasOwnProperty,jS=Object.prototype.propertyIsEnumerable,xS=(t,e,i)=>e in t?Rm(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,j=(t,e)=>{for(var i in e||(e={}))US.call(e,i)&&xS(t,i,e[i]);if($u)for(var i of $u(e))jS.call(e,i)&&xS(t,i,e[i]);return t},He=(t,e)=>tF(t,oF(e)),rF=(t,e)=>{var i={};for(var o in t)US.call(t,o)&&e.indexOf(o)<0&&(i[o]=t[o]);if(t!=null&&$u)for(var o of $u(t))e.indexOf(o)<0&&jS.call(t,o)&&(i[o]=t[o]);return i},_t=(t,e)=>{for(var i in e)Rm(t,i,{get:e[i],enumerable:!0})},g=(t,e,i,o)=>{for(var r=o>1?void 0:o?iF(e,i):e,n=t.length-1,s;n>=0;n--)(s=t[n])&&(r=(o?s(e,i,r):s(r))||r);return o&&r&&Rm(e,i,r),r},ji=(t,e)=>(i,o)=>e(i,o,t),qS={};_t(qS,{attrToBoolean:()=>Yu,attrToNumber:()=>Er,attrToString:()=>nF,defaultComparator:()=>sF,exists:()=>T,jsonEquals:()=>em,makeNull:()=>go,missing:()=>X,missingOrEmpty:()=>Mi,toStringOrNull:()=>sd,values:()=>yn});function go(t){return t==null||t===""?null:t}function T(t,e=!1){return t!=null&&(t!==""||e)}function X(t){return!T(t)}function Mi(t){return t==null||t.length===0}function sd(t){return t!=null&&typeof t.toString=="function"?t.toString():null}function Er(t){if(t===void 0)return;if(t===null||t==="")return null;if(typeof t=="number")return isNaN(t)?void 0:t;let e=parseInt(t,10);return isNaN(e)?void 0:e}function Yu(t){if(t!==void 0)return t===null||t===""?!1:typeof t=="boolean"?t:/true/i.test(t)}function nF(t){if(!(t==null||t===""))return t}function em(t,e){let i=t?JSON.stringify(t):null,o=e?JSON.stringify(e):null;return i===o}function sF(t,e,i=!1){let o=t==null,r=e==null;if(t&&t.toNumber&&(t=t.toNumber()),e&&e.toNumber&&(e=e.toNumber()),o&&r)return 0;if(o)return-1;if(r)return 1;function n(s,a){return s>a?1:s<a?-1:0}if(typeof t!="string"||!i)return n(t,e);try{return t.localeCompare(e)}catch{return n(t,e)}}function yn(t){if(t instanceof Set||t instanceof Map){let e=[];return t.forEach(i=>e.push(i)),e}return Object.values(t)}var aF=class{constructor(){this.existingKeys={}}addExistingKeys(t){for(let e=0;e<t.length;e++)this.existingKeys[t[e]]=!0}getUniqueKey(t,e){t=sd(t);let i=0;for(;;){let o;if(t?(o=t,i!==0&&(o+="_"+i)):e?(o=e,i!==0&&(o+="_"+i)):o=i,!this.existingKeys[o])return this.existingKeys[o]=!0,String(o);i++}}},KS={};_t(KS,{SKIP_JS_BUILTINS:()=>gh,cloneObject:()=>Mm,deepCloneDefinition:()=>Qu,getAllValuesInObject:()=>Dr,getValueUsingField:()=>$s,isNonNullObject:()=>Xu,iterateObject:()=>Nt,mergeDeep:()=>ei,removeAllReferences:()=>$S});var gh=new Set(["__proto__","constructor","prototype"]);function Nt(t,e){if(t!=null){if(Array.isArray(t)){for(let i=0;i<t.length;i++)e(i.toString(),t[i]);return}for(let[i,o]of Object.entries(t))e(i,o)}}function Mm(t){let e={},i=Object.keys(t);for(let o=0;o<i.length;o++){if(gh.has(i[o]))continue;let r=i[o],n=t[r];e[r]=n}return e}function Qu(t,e){if(!t)return;let i=t,o={};return Object.keys(i).forEach(r=>{if(e&&e.indexOf(r)>=0||gh.has(r))return;let n=i[r];Xu(n)&&n.constructor===Object?o[r]=Qu(n):o[r]=n}),o}function Dr(t){if(!t)return[];let e=Object;if(typeof e.values=="function")return e.values(t);let i=[];for(let o in t)t.hasOwnProperty(o)&&t.propertyIsEnumerable(o)&&i.push(t[o]);return i}function ei(t,e,i=!0,o=!1){T(e)&&Nt(e,(r,n)=>{if(gh.has(r))return;let s=t[r];s!==n&&(o&&s==null&&n!=null&&typeof n=="object"&&n.constructor===Object&&(s={},t[r]=s),Xu(n)&&Xu(s)&&!Array.isArray(s)?ei(s,n,i,o):(i||n!==void 0)&&(t[r]=n))})}function $s(t,e,i){if(!e||!t)return;if(!i)return t[e];let o=e.split("."),r=t;for(let n=0;n<o.length;n++){if(r==null)return;r=r[o[n]]}return r}function $S(t,e=[],i){Object.keys(t).forEach(s=>{typeof t[s]=="object"&&!e.includes(s)&&(t[s]=void 0)});let o=Object.getPrototypeOf(t),r={},n=s=>`AG Grid: Grid API function ${s}() cannot be called as the grid has been destroyed.
    It is recommended to remove local references to the grid api. Alternatively, check gridApi.isDestroyed() to avoid calling methods against a destroyed grid.
    To run logic when the grid is about to be destroyed use the gridPreDestroy event. See: ${i}`;Object.getOwnPropertyNames(o).forEach(s=>{if(typeof o[s]=="function"&&!e.includes(s)){let l=()=>{console.warn(n(s))};r[s]={value:l,writable:!0}}}),Object.defineProperties(t,r)}function Xu(t){return typeof t=="object"&&t!==null}var YS={};_t(YS,{compose:()=>lF,debounce:()=>Ut,doOnce:()=>Xs,errorOnce:()=>uo,executeAfter:()=>XS,executeInAWhile:()=>QS,executeNextVMTurn:()=>tm,getFunctionName:()=>ph,isFunction:()=>fh,noop:()=>dF,throttle:()=>im,waitUntil:()=>Tm,warnOnce:()=>q});var _S={};function Xs(t,e){_S[e]||(t(),_S[e]=!0)}function q(t){Xs(()=>console.warn("AG Grid: "+t),t)}function uo(t){Xs(()=>console.error("AG Grid: "+t),t)}function ph(t){if(t.name)return t.name;let e=/function\s+([^\(]+)/.exec(t.toString());return e&&e.length===2?e[1].trim():null}function fh(t){return!!(t&&t.constructor&&t.call&&t.apply)}function QS(t){XS(t,400)}var Nf=[],zf=!1;function tm(t){Nf.push(t),!zf&&(zf=!0,window.setTimeout(()=>{let e=Nf.slice();Nf.length=0,zf=!1,e.forEach(i=>i())},0))}function XS(t,e=0){t.length>0&&window.setTimeout(()=>t.forEach(i=>i()),e)}function Ut(t,e){let i;return function(...o){let r=this;window.clearTimeout(i),i=window.setTimeout(function(){t.apply(r,o)},e)}}function im(t,e){let i=0;return function(...o){let r=this,n=new Date().getTime();n-i<e||(i=n,t.apply(r,o))}}function Tm(t,e,i=100,o){let r=new Date().getTime(),n=null,s=!1,a=()=>{let l=new Date().getTime()-r>i;(t()||l)&&(e(),s=!0,n!=null&&(window.clearInterval(n),n=null),l&&o&&console.warn(o))};a(),s||(n=window.setInterval(a,10))}function lF(...t){return e=>t.reduce((i,o)=>o(i),e)}var dF=()=>{},ZS=(t=>(t.CommunityCoreModule="@ag-grid-community/core",t.InfiniteRowModelModule="@ag-grid-community/infinite-row-model",t.ClientSideRowModelModule="@ag-grid-community/client-side-row-model",t.CsvExportModule="@ag-grid-community/csv-export",t.EnterpriseCoreModule="@ag-grid-enterprise/core",t.RowGroupingModule="@ag-grid-enterprise/row-grouping",t.ColumnsToolPanelModule="@ag-grid-enterprise/column-tool-panel",t.FiltersToolPanelModule="@ag-grid-enterprise/filter-tool-panel",t.MenuModule="@ag-grid-enterprise/menu",t.SetFilterModule="@ag-grid-enterprise/set-filter",t.MultiFilterModule="@ag-grid-enterprise/multi-filter",t.StatusBarModule="@ag-grid-enterprise/status-bar",t.SideBarModule="@ag-grid-enterprise/side-bar",t.RangeSelectionModule="@ag-grid-enterprise/range-selection",t.MasterDetailModule="@ag-grid-enterprise/master-detail",t.RichSelectModule="@ag-grid-enterprise/rich-select",t.GridChartsModule="@ag-grid-enterprise/charts",t.ViewportRowModelModule="@ag-grid-enterprise/viewport-row-model",t.ServerSideRowModelModule="@ag-grid-enterprise/server-side-row-model",t.ExcelExportModule="@ag-grid-enterprise/excel-export",t.ClipboardModule="@ag-grid-enterprise/clipboard",t.SparklinesModule="@ag-grid-enterprise/sparklines",t.AdvancedFilterModule="@ag-grid-enterprise/advanced-filter",t.AngularModule="@ag-grid-community/angular",t.ReactModule="@ag-grid-community/react",t.VueModule="@ag-grid-community/vue",t))(ZS||{}),mh=class Ae{static register(e){Ae.__register(e,!0,void 0)}static registerModules(e){Ae.__registerModules(e,!0,void 0)}static __register(e,i,o){Ae.runVersionChecks(e),o!==void 0?(Ae.areGridScopedModules=!0,Ae.gridModulesMap[o]===void 0&&(Ae.gridModulesMap[o]={}),Ae.gridModulesMap[o][e.moduleName]=e):Ae.globalModulesMap[e.moduleName]=e,Ae.setModuleBased(i)}static __unRegisterGridModules(e){delete Ae.gridModulesMap[e]}static __registerModules(e,i,o){Ae.setModuleBased(i),e&&e.forEach(r=>Ae.__register(r,i,o))}static isValidModuleVersion(e){let[i,o]=e.version.split(".")||[],[r,n]=Ae.currentModuleVersion.split(".")||[];return i===r&&o===n}static runVersionChecks(e){if(Ae.currentModuleVersion||(Ae.currentModuleVersion=e.version),e.version?Ae.isValidModuleVersion(e)||console.error(`AG Grid: You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. '${e.moduleName}' is version ${e.version} but the other modules are version ${this.currentModuleVersion}. Please update all modules to the same version.`):console.error(`AG Grid: You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. '${e.moduleName}' is incompatible. Please update all modules to the same version.`),e.validate){let i=e.validate();i.isValid||console.error(`AG Grid: ${i.message}`)}}static setModuleBased(e){Ae.moduleBased===void 0?Ae.moduleBased=e:Ae.moduleBased!==e&&Xs(()=>{console.warn("AG Grid: You are mixing modules (i.e. @ag-grid-community/core) and packages (ag-grid-community) - you can only use one or the other of these mechanisms."),console.warn("Please see https://www.ag-grid.com/javascript-grid/modules/ for more information.")},"ModulePackageCheck")}static __setIsBundled(){Ae.isBundled=!0}static __assertRegistered(e,i,o){var r;if(this.__isRegistered(e,o))return!0;let n=i+e,s;if(Ae.isBundled)s=`AG Grid: unable to use ${i} as 'ag-grid-enterprise' has not been loaded. Check you are using the Enterprise bundle:
        
        <script src="https://cdn.jsdelivr.net/npm/ag-grid-enterprise@AG_GRID_VERSION/dist/ag-grid-enterprise.min.js"><\/script>
        
For more info see: https://ag-grid.com/javascript-data-grid/getting-started/#getting-started-with-ag-grid-enterprise`;else if(Ae.moduleBased||Ae.moduleBased===void 0){let a=(r=Object.entries(ZS).find(([l,d])=>d===e))==null?void 0:r[0];s=`AG Grid: unable to use ${i} as the ${a} is not registered${Ae.areGridScopedModules?` for gridId: ${o}`:""}. Check if you have registered the module:
           
    import { ModuleRegistry } from '@ag-grid-community/core';
    import { ${a} } from '${e}';
    
    ModuleRegistry.registerModules([ ${a} ]);

For more info see: https://www.ag-grid.com/javascript-grid/modules/`}else s=`AG Grid: unable to use ${i} as package 'ag-grid-enterprise' has not been imported. Check that you have imported the package:
            
    import 'ag-grid-enterprise';`;return Xs(()=>{console.warn(s)},n),!1}static __isRegistered(e,i){var o;return!!Ae.globalModulesMap[e]||!!((o=Ae.gridModulesMap[i])!=null&&o[e])}static __getRegisteredModules(e){return[...yn(Ae.globalModulesMap),...yn(Ae.gridModulesMap[e]||{})]}static __getGridRegisteredModules(e){var i;return yn((i=Ae.gridModulesMap[e])!=null?i:{})||[]}static __isPackageBased(){return!Ae.moduleBased}};mh.globalModulesMap={};mh.gridModulesMap={};mh.areGridScopedModules=!1;var De=mh,cF=class{constructor(t,e){if(this.beanWrappers={},this.destroyed=!1,!t||!t.beanClasses)return;this.contextParams=t,this.logger=e,this.logger.log(">> creating ag-Application Context"),this.createBeans();let i=this.getBeanInstances();this.wireBeans(i),this.logger.log(">> ag-Application Context ready - component is alive")}getBeanInstances(){return yn(this.beanWrappers).map(t=>t.beanInstance)}createBean(t,e){if(!t)throw Error("Can't wire to bean since it is null");return this.wireBeans([t],e),t}wireBeans(t,e){this.autoWireBeans(t),this.methodWireBeans(t),this.callLifeCycleMethods(t,"preConstructMethods"),T(e)&&t.forEach(e),this.callLifeCycleMethods(t,"postConstructMethods")}createBeans(){this.contextParams.beanClasses.forEach(this.createBeanWrapper.bind(this)),Nt(this.beanWrappers,(e,i)=>{let o;i.bean.__agBeanMetaData&&i.bean.__agBeanMetaData.autowireMethods&&i.bean.__agBeanMetaData.autowireMethods.agConstructor&&(o=i.bean.__agBeanMetaData.autowireMethods.agConstructor);let r=this.getBeansForParameters(o,i.bean.name),n=new(i.bean.bind.apply(i.bean,[null,...r]));i.beanInstance=n});let t=Object.keys(this.beanWrappers).join(", ");this.logger.log(`created beans: ${t}`)}createBeanWrapper(t){let e=t.__agBeanMetaData;if(!e){let o;t.prototype.constructor?o=ph(t.prototype.constructor):o=""+t,console.error(`Context item ${o} is not a bean`);return}let i={bean:t,beanInstance:null,beanName:e.beanName};this.beanWrappers[e.beanName]=i}autoWireBeans(t){t.forEach(e=>{this.forEachMetaDataInHierarchy(e,(i,o)=>{let r=i.agClassAttributes;r&&r.forEach(n=>{let s=this.lookupBeanInstance(o,n.beanName,n.optional);e[n.attributeName]=s})})})}methodWireBeans(t){t.forEach(e=>{this.forEachMetaDataInHierarchy(e,(i,o)=>{Nt(i.autowireMethods,(r,n)=>{if(r==="agConstructor")return;let s=this.getBeansForParameters(n,o);e[r].apply(e,s)})})})}forEachMetaDataInHierarchy(t,e){let i=Object.getPrototypeOf(t);for(;i!=null;){let o=i.constructor;if(o.hasOwnProperty("__agBeanMetaData")){let r=o.__agBeanMetaData,n=this.getBeanName(o);e(r,n)}i=Object.getPrototypeOf(i)}}getBeanName(t){if(t.__agBeanMetaData&&t.__agBeanMetaData.beanName)return t.__agBeanMetaData.beanName;let e=t.toString();return e.substring(9,e.indexOf("("))}getBeansForParameters(t,e){let i=[];return t&&Nt(t,(o,r)=>{let n=this.lookupBeanInstance(e,r);i[Number(o)]=n}),i}lookupBeanInstance(t,e,i=!1){if(this.destroyed)return this.logger.log(`AG Grid: bean reference ${e} is used after the grid is destroyed!`),null;if(e==="context")return this;if(this.contextParams.providedBeanInstances&&this.contextParams.providedBeanInstances.hasOwnProperty(e))return this.contextParams.providedBeanInstances[e];let o=this.beanWrappers[e];return o?o.beanInstance:(i||console.error(`AG Grid: unable to find bean reference ${e} while initialising ${t}`),null)}callLifeCycleMethods(t,e){t.forEach(i=>this.callLifeCycleMethodsOnBean(i,e))}callLifeCycleMethodsOnBean(t,e,i){let o={};this.forEachMetaDataInHierarchy(t,n=>{let s=n[e];s&&s.forEach(a=>{a!=i&&(o[a]=!0)})}),Object.keys(o).forEach(n=>t[n]())}getBean(t){return this.lookupBeanInstance("getBean",t,!0)}destroy(){if(this.destroyed)return;this.destroyed=!0,this.logger.log(">> Shutting down ag-Application Context");let t=this.getBeanInstances();this.destroyBeans(t),this.contextParams.providedBeanInstances=null,De.__unRegisterGridModules(this.contextParams.gridId),this.logger.log(">> ag-Application Context shut down - component is dead")}destroyBean(t){t&&this.destroyBeans([t])}destroyBeans(t){return t?(t.forEach(e=>{this.callLifeCycleMethodsOnBean(e,"preDestroyMethods","destroy");let i=e;typeof i.destroy=="function"&&i.destroy()}),[]):[]}isDestroyed(){return this.destroyed}getGridId(){return this.contextParams.gridId}};function JS(t,e,i){let o=Dn(t.constructor);o.preConstructMethods||(o.preConstructMethods=[]),o.preConstructMethods.push(e)}function I(t,e,i){let o=Dn(t.constructor);o.postConstructMethods||(o.postConstructMethods=[]),o.postConstructMethods.push(e)}function Kt(t,e,i){let o=Dn(t.constructor);o.preDestroyMethods||(o.preDestroyMethods=[]),o.preDestroyMethods.push(e)}function V(t){return e=>{let i=Dn(e);i.beanName=t}}function v(t){return(e,i,o)=>{ex(e,t,!1,e,i,null)}}function Re(t){return(e,i,o)=>{ex(e,t,!0,e,i,null)}}function ex(t,e,i,o,r,n){if(e===null){console.error("AG Grid: Autowired name should not be null");return}if(typeof n=="number"){console.error("AG Grid: Autowired should be on an attribute");return}let s=Dn(t.constructor);s.agClassAttributes||(s.agClassAttributes=[]),s.agClassAttributes.push({attributeName:r,beanName:e,optional:i})}function Ti(t){return(e,i,o)=>{let r=typeof e=="function"?e:e.constructor,n;if(typeof o=="number"){let s;i?(n=Dn(r),s=i):(n=Dn(r),s="agConstructor"),n.autowireMethods||(n.autowireMethods={}),n.autowireMethods[s]||(n.autowireMethods[s]={}),n.autowireMethods[s][o]=t}}}function Dn(t){return t.hasOwnProperty("__agBeanMetaData")||(t.__agBeanMetaData={}),t.__agBeanMetaData}var Yi=class{constructor(){this.allSyncListeners=new Map,this.allAsyncListeners=new Map,this.globalSyncListeners=new Set,this.globalAsyncListeners=new Set,this.asyncFunctionsQueue=[],this.scheduled=!1,this.firedEvents={}}setBeans(t,e,i=null,o=null){if(this.frameworkOverrides=e,this.gos=t,i){let r=t.useAsyncEvents();this.addGlobalListener(i,r)}o&&this.addGlobalListener(o,!1)}setFrameworkOverrides(t){this.frameworkOverrides=t}getListeners(t,e,i){let o=e?this.allAsyncListeners:this.allSyncListeners,r=o.get(t);return!r&&i&&(r=new Set,o.set(t,r)),r}noRegisteredListenersExist(){return this.allSyncListeners.size===0&&this.allAsyncListeners.size===0&&this.globalSyncListeners.size===0&&this.globalAsyncListeners.size===0}addEventListener(t,e,i=!1){this.getListeners(t,i,!0).add(e)}removeEventListener(t,e,i=!1){let o=this.getListeners(t,i,!1);o&&(o.delete(e),o.size===0&&(i?this.allAsyncListeners:this.allSyncListeners).delete(t))}addGlobalListener(t,e=!1){(e?this.globalAsyncListeners:this.globalSyncListeners).add(t)}removeGlobalListener(t,e=!1){(e?this.globalAsyncListeners:this.globalSyncListeners).delete(t)}dispatchEvent(t){let e=t;this.gos&&this.gos.addGridCommonParams(e),this.dispatchToListeners(e,!0),this.dispatchToListeners(e,!1),this.firedEvents[e.type]=!0}dispatchEventOnce(t){this.firedEvents[t.type]||this.dispatchEvent(t)}dispatchToListeners(t,e){var i;let o=t.type;if(e&&"event"in t){let l=t.event;l instanceof Event&&(t.eventPath=l.composedPath())}let r=(l,d)=>l.forEach(c=>{if(!d.has(c))return;let u=this.frameworkOverrides?()=>this.frameworkOverrides.wrapIncoming(()=>c(t)):()=>c(t);e?this.dispatchAsync(u):u()}),n=(i=this.getListeners(o,e,!1))!=null?i:new Set,s=new Set(n);s.size>0&&r(s,n),new Set(e?this.globalAsyncListeners:this.globalSyncListeners).forEach(l=>{let d=this.frameworkOverrides?()=>this.frameworkOverrides.wrapIncoming(()=>l(o,t)):()=>l(o,t);e?this.dispatchAsync(d):d()})}dispatchAsync(t){this.asyncFunctionsQueue.push(t),this.scheduled||(this.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(this.flushAsyncQueue.bind(this),0)}),this.scheduled=!0)}flushAsyncQueue(){this.scheduled=!1;let t=this.asyncFunctionsQueue.slice();this.asyncFunctionsQueue=[],t.forEach(e=>e())}};g([ji(0,Ti("gridOptionsService")),ji(1,Ti("frameworkOverrides")),ji(2,Ti("globalEventListener")),ji(3,Ti("globalSyncEventListener"))],Yi.prototype,"setBeans",1);Yi=g([V("eventService")],Yi);var Am=class{constructor(t){this.frameworkOverrides=t,this.wrappedListeners=new Map,this.wrappedGlobalListeners=new Map}wrap(t){let e=t;return this.frameworkOverrides.shouldWrapOutgoing&&(e=i=>{this.frameworkOverrides.wrapOutgoing(()=>t(i))},this.wrappedListeners.set(t,e)),e}wrapGlobal(t){let e=t;return this.frameworkOverrides.shouldWrapOutgoing&&(e=(i,o)=>{this.frameworkOverrides.wrapOutgoing(()=>t(i,o))},this.wrappedGlobalListeners.set(t,e)),e}unwrap(t){var e;return(e=this.wrappedListeners.get(t))!=null?e:t}unwrapGlobal(t){var e;return(e=this.wrappedGlobalListeners.get(t))!=null?e:t}},uF={resizable:!0,sortable:!0},hF=0;function tx(){return hF++}var nt=class ix{constructor(e,i,o,r){this.instanceId=tx(),this.autoHeaderHeight=null,this.moving=!1,this.menuVisible=!1,this.lastLeftPinned=!1,this.firstRightPinned=!1,this.filterActive=!1,this.eventService=new Yi,this.tooltipEnabled=!1,this.rowGroupActive=!1,this.pivotActive=!1,this.aggregationActive=!1,this.colDef=e,this.userProvidedColDef=i,this.colId=o,this.primary=r,this.setState(e)}getInstanceId(){return this.instanceId}setState(e){e.sort!==void 0?(e.sort==="asc"||e.sort==="desc")&&(this.sort=e.sort):(e.initialSort==="asc"||e.initialSort==="desc")&&(this.sort=e.initialSort);let i=e.sortIndex,o=e.initialSortIndex;i!==void 0?i!==null&&(this.sortIndex=i):o!==null&&(this.sortIndex=o);let r=e.hide,n=e.initialHide;r!==void 0?this.visible=!r:this.visible=!n,e.pinned!==void 0?this.setPinned(e.pinned):this.setPinned(e.initialPinned);let s=e.flex,a=e.initialFlex;s!==void 0?this.flex=s:a!==void 0&&(this.flex=a)}setColDef(e,i,o){this.colDef=e,this.userProvidedColDef=i,this.initMinAndMaxWidths(),this.initDotNotation(),this.initTooltip(),this.eventService.dispatchEvent(this.createColumnEvent("colDefChanged",o))}getUserProvidedColDef(){return this.userProvidedColDef}setParent(e){this.parent=e}getParent(){return this.parent}setOriginalParent(e){this.originalParent=e}getOriginalParent(){return this.originalParent}initialise(){this.initMinAndMaxWidths(),this.resetActualWidth("gridInitializing"),this.initDotNotation(),this.initTooltip()}initDotNotation(){let e=this.gos.get("suppressFieldDotNotation");this.fieldContainsDots=T(this.colDef.field)&&this.colDef.field.indexOf(".")>=0&&!e,this.tooltipFieldContainsDots=T(this.colDef.tooltipField)&&this.colDef.tooltipField.indexOf(".")>=0&&!e}initMinAndMaxWidths(){var e,i;let o=this.colDef;this.minWidth=(e=o.minWidth)!=null?e:this.environment.getMinColWidth(),this.maxWidth=(i=o.maxWidth)!=null?i:Number.MAX_SAFE_INTEGER}initTooltip(){this.tooltipEnabled=T(this.colDef.tooltipField)||T(this.colDef.tooltipValueGetter)||T(this.colDef.tooltipComponent)}resetActualWidth(e){let i=this.calculateColInitialWidth(this.colDef);this.setActualWidth(i,e,!0)}calculateColInitialWidth(e){var i,o;let r=(i=e.minWidth)!=null?i:this.environment.getMinColWidth(),n=(o=e.maxWidth)!=null?o:Number.MAX_SAFE_INTEGER,s,a=Er(e.width),l=Er(e.initialWidth);return a!=null?s=a:l!=null?s=l:s=200,Math.max(Math.min(s,n),r)}isEmptyGroup(){return!1}isRowGroupDisplayed(e){if(X(this.colDef)||X(this.colDef.showRowGroup))return!1;let i=this.colDef.showRowGroup===!0,o=this.colDef.showRowGroup===e;return i||o}isPrimary(){return this.primary}isFilterAllowed(){return!!this.colDef.filter}isFieldContainsDots(){return this.fieldContainsDots}isTooltipEnabled(){return this.tooltipEnabled}isTooltipFieldContainsDots(){return this.tooltipFieldContainsDots}addEventListener(e,i){var o,r;this.frameworkOverrides.shouldWrapOutgoing&&!this.frameworkEventListenerService&&(this.eventService.setFrameworkOverrides(this.frameworkOverrides),this.frameworkEventListenerService=new Am(this.frameworkOverrides));let n=(r=(o=this.frameworkEventListenerService)==null?void 0:o.wrap(i))!=null?r:i;this.eventService.addEventListener(e,n)}removeEventListener(e,i){var o,r;let n=(r=(o=this.frameworkEventListenerService)==null?void 0:o.unwrap(i))!=null?r:i;this.eventService.removeEventListener(e,n)}createColumnFunctionCallbackParams(e){return this.gos.addGridCommonParams({node:e,data:e.data,column:this,colDef:this.colDef})}isSuppressNavigable(e){if(typeof this.colDef.suppressNavigable=="boolean")return this.colDef.suppressNavigable;if(typeof this.colDef.suppressNavigable=="function"){let i=this.createColumnFunctionCallbackParams(e),o=this.colDef.suppressNavigable;return o(i)}return!1}isCellEditable(e){return e.group&&!this.gos.get("enableGroupEdit")?!1:this.isColumnFunc(e,this.colDef.editable)}isSuppressFillHandle(){return!!this.colDef.suppressFillHandle}isAutoHeight(){return!!this.colDef.autoHeight}isAutoHeaderHeight(){return!!this.colDef.autoHeaderHeight}isRowDrag(e){return this.isColumnFunc(e,this.colDef.rowDrag)}isDndSource(e){return this.isColumnFunc(e,this.colDef.dndSource)}isCellCheckboxSelection(e){return this.isColumnFunc(e,this.colDef.checkboxSelection)}isSuppressPaste(e){return this.isColumnFunc(e,this.colDef?this.colDef.suppressPaste:null)}isResizable(){return!!this.getColDefValue("resizable")}getColDefValue(e){var i;return(i=this.colDef[e])!=null?i:uF[e]}isColumnFunc(e,i){if(typeof i=="boolean")return i;if(typeof i=="function"){let o=this.createColumnFunctionCallbackParams(e);return i(o)}return!1}setMoving(e,i){this.moving=e,this.eventService.dispatchEvent(this.createColumnEvent("movingChanged",i))}createColumnEvent(e,i){return this.gos.addGridCommonParams({type:e,column:this,columns:[this],source:i})}isMoving(){return this.moving}getSort(){return this.sort}setSort(e,i){this.sort!==e&&(this.sort=e,this.eventService.dispatchEvent(this.createColumnEvent("sortChanged",i))),this.dispatchStateUpdatedEvent("sort")}setMenuVisible(e,i){this.menuVisible!==e&&(this.menuVisible=e,this.eventService.dispatchEvent(this.createColumnEvent("menuVisibleChanged",i)))}isMenuVisible(){return this.menuVisible}isSortable(){return!!this.getColDefValue("sortable")}isSortAscending(){return this.sort==="asc"}isSortDescending(){return this.sort==="desc"}isSortNone(){return X(this.sort)}isSorting(){return T(this.sort)}getSortIndex(){return this.sortIndex}setSortIndex(e){this.sortIndex=e,this.dispatchStateUpdatedEvent("sortIndex")}setAggFunc(e){this.aggFunc=e,this.dispatchStateUpdatedEvent("aggFunc")}getAggFunc(){return this.aggFunc}getLeft(){return this.left}getOldLeft(){return this.oldLeft}getRight(){return this.left+this.actualWidth}setLeft(e,i){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.eventService.dispatchEvent(this.createColumnEvent("leftChanged",i)))}isFilterActive(){return this.filterActive}setFilterActive(e,i,o){this.filterActive!==e&&(this.filterActive=e,this.eventService.dispatchEvent(this.createColumnEvent("filterActiveChanged",i)));let r=this.createColumnEvent("filterChanged",i);o&&ei(r,o),this.eventService.dispatchEvent(r)}isHovered(){return this.columnHoverService.isHovered(this)}setPinned(e){e===!0||e==="left"?this.pinned="left":e==="right"?this.pinned="right":this.pinned=null,this.dispatchStateUpdatedEvent("pinned")}setFirstRightPinned(e,i){this.firstRightPinned!==e&&(this.firstRightPinned=e,this.eventService.dispatchEvent(this.createColumnEvent("firstRightPinnedChanged",i)))}setLastLeftPinned(e,i){this.lastLeftPinned!==e&&(this.lastLeftPinned=e,this.eventService.dispatchEvent(this.createColumnEvent("lastLeftPinnedChanged",i)))}isFirstRightPinned(){return this.firstRightPinned}isLastLeftPinned(){return this.lastLeftPinned}isPinned(){return this.pinned==="left"||this.pinned==="right"}isPinnedLeft(){return this.pinned==="left"}isPinnedRight(){return this.pinned==="right"}getPinned(){return this.pinned}setVisible(e,i){let o=e===!0;this.visible!==o&&(this.visible=o,this.eventService.dispatchEvent(this.createColumnEvent("visibleChanged",i))),this.dispatchStateUpdatedEvent("hide")}isVisible(){return this.visible}isSpanHeaderHeight(){let e=this.getColDef();return!e.suppressSpanHeaderHeight&&!e.autoHeaderHeight}getColumnGroupPaddingInfo(){let e=this.getParent();if(!e||!e.isPadding())return{numberOfParents:0,isSpanningTotal:!1};let i=e.getPaddingLevel()+1,o=!0;for(;e;){if(!e.isPadding()){o=!1;break}e=e.getParent()}return{numberOfParents:i,isSpanningTotal:o}}getColDef(){return this.colDef}getColumnGroupShow(){return this.colDef.columnGroupShow}getColId(){return this.colId}getId(){return this.colId}getUniqueId(){return this.colId}getDefinition(){return this.colDef}getActualWidth(){return this.actualWidth}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){let i=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,i}createBaseColDefParams(e){return this.gos.addGridCommonParams({node:e,data:e.data,colDef:this.colDef,column:this})}getColSpan(e){if(X(this.colDef.colSpan))return 1;let i=this.createBaseColDefParams(e),o=this.colDef.colSpan(i);return Math.max(o,1)}getRowSpan(e){if(X(this.colDef.rowSpan))return 1;let i=this.createBaseColDefParams(e),o=this.colDef.rowSpan(i);return Math.max(o,1)}setActualWidth(e,i,o=!1){this.minWidth!=null&&(e=Math.max(e,this.minWidth)),this.maxWidth!=null&&(e=Math.min(e,this.maxWidth)),this.actualWidth!==e&&(this.actualWidth=e,this.flex&&i!=="flex"&&i!=="gridInitializing"&&(this.flex=null),o||this.fireColumnWidthChangedEvent(i)),this.dispatchStateUpdatedEvent("width")}fireColumnWidthChangedEvent(e){this.eventService.dispatchEvent(this.createColumnEvent("widthChanged",e))}isGreaterThanMax(e){return this.maxWidth!=null?e>this.maxWidth:!1}getMinWidth(){return this.minWidth}getMaxWidth(){return this.maxWidth}getFlex(){return this.flex||0}setFlex(e){this.flex!==e&&(this.flex=e),this.dispatchStateUpdatedEvent("flex")}setMinimum(e){T(this.minWidth)&&this.setActualWidth(this.minWidth,e)}setRowGroupActive(e,i){this.rowGroupActive!==e&&(this.rowGroupActive=e,this.eventService.dispatchEvent(this.createColumnEvent("columnRowGroupChanged",i))),this.dispatchStateUpdatedEvent("rowGroup")}isRowGroupActive(){return this.rowGroupActive}setPivotActive(e,i){this.pivotActive!==e&&(this.pivotActive=e,this.eventService.dispatchEvent(this.createColumnEvent("columnPivotChanged",i))),this.dispatchStateUpdatedEvent("pivot")}isPivotActive(){return this.pivotActive}isAnyFunctionActive(){return this.isPivotActive()||this.isRowGroupActive()||this.isValueActive()}isAnyFunctionAllowed(){return this.isAllowPivot()||this.isAllowRowGroup()||this.isAllowValue()}setValueActive(e,i){this.aggregationActive!==e&&(this.aggregationActive=e,this.eventService.dispatchEvent(this.createColumnEvent("columnValueChanged",i)))}isValueActive(){return this.aggregationActive}isAllowPivot(){return this.colDef.enablePivot===!0}isAllowValue(){return this.colDef.enableValue===!0}isAllowRowGroup(){return this.colDef.enableRowGroup===!0}getMenuTabs(e){q("As of v31.1, 'getMenuTabs' is deprecated. Use 'getColDef().menuTabs ?? defaultValues' instead.");let i=this.getColDef().menuTabs;return i==null&&(i=e),i}dispatchStateUpdatedEvent(e){this.eventService.dispatchEvent({type:ix.EVENT_STATE_UPDATED,key:e})}};nt.EVENT_MOVING_CHANGED="movingChanged";nt.EVENT_LEFT_CHANGED="leftChanged";nt.EVENT_WIDTH_CHANGED="widthChanged";nt.EVENT_LAST_LEFT_PINNED_CHANGED="lastLeftPinnedChanged";nt.EVENT_FIRST_RIGHT_PINNED_CHANGED="firstRightPinnedChanged";nt.EVENT_VISIBLE_CHANGED="visibleChanged";nt.EVENT_FILTER_CHANGED="filterChanged";nt.EVENT_FILTER_ACTIVE_CHANGED="filterActiveChanged";nt.EVENT_SORT_CHANGED="sortChanged";nt.EVENT_COL_DEF_CHANGED="colDefChanged";nt.EVENT_MENU_VISIBLE_CHANGED="menuVisibleChanged";nt.EVENT_ROW_GROUP_CHANGED="columnRowGroupChanged";nt.EVENT_PIVOT_CHANGED="columnPivotChanged";nt.EVENT_VALUE_CHANGED="columnValueChanged";nt.EVENT_STATE_UPDATED="columnStateUpdated";g([v("gridOptionsService")],nt.prototype,"gos",2);g([v("environment")],nt.prototype,"environment",2);g([v("columnHoverService")],nt.prototype,"columnHoverService",2);g([v("frameworkOverrides")],nt.prototype,"frameworkOverrides",2);g([I],nt.prototype,"initialise",1);var ke=nt,vh=class Zl{constructor(e,i,o,r){this.localEventService=new Yi,this.expandable=!1,this.instanceId=tx(),this.expandableListenerRemoveCallback=null,this.colGroupDef=e,this.groupId=i,this.expanded=!!e&&!!e.openByDefault,this.padding=o,this.level=r}destroy(){this.expandableListenerRemoveCallback&&this.reset(null,void 0)}reset(e,i){this.colGroupDef=e,this.level=i,this.originalParent=null,this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback(),this.children=void 0,this.expandable=void 0}getInstanceId(){return this.instanceId}setOriginalParent(e){this.originalParent=e}getOriginalParent(){return this.originalParent}getLevel(){return this.level}isVisible(){return this.children?this.children.some(e=>e.isVisible()):!1}isPadding(){return this.padding}setExpanded(e){this.expanded=e===void 0?!1:e;let i={type:Zl.EVENT_EXPANDED_CHANGED};this.localEventService.dispatchEvent(i)}isExpandable(){return this.expandable}isExpanded(){return this.expanded}getGroupId(){return this.groupId}getId(){return this.getGroupId()}setChildren(e){this.children=e}getChildren(){return this.children}getColGroupDef(){return this.colGroupDef}getLeafColumns(){let e=[];return this.addLeafColumns(e),e}addLeafColumns(e){this.children&&this.children.forEach(i=>{i instanceof ke?e.push(i):i instanceof Zl&&i.addLeafColumns(e)})}getColumnGroupShow(){let e=this.colGroupDef;if(e)return e.columnGroupShow}setupExpandable(){this.setExpandable(),this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback();let e=this.onColumnVisibilityChanged.bind(this);this.getLeafColumns().forEach(i=>i.addEventListener("visibleChanged",e)),this.expandableListenerRemoveCallback=()=>{this.getLeafColumns().forEach(i=>i.removeEventListener("visibleChanged",e)),this.expandableListenerRemoveCallback=null}}setExpandable(){if(this.isPadding())return;let e=!1,i=!1,o=!1,r=this.findChildrenRemovingPadding();for(let s=0,a=r.length;s<a;s++){let l=r[s];if(!l.isVisible())continue;let d=l.getColumnGroupShow();d==="open"?(e=!0,o=!0):d==="closed"?(i=!0,o=!0):(e=!0,i=!0)}let n=e&&i&&o;if(this.expandable!==n){this.expandable=n;let s={type:Zl.EVENT_EXPANDABLE_CHANGED};this.localEventService.dispatchEvent(s)}}findChildrenRemovingPadding(){let e=[],i=o=>{o.forEach(r=>{r instanceof Zl&&r.isPadding()?i(r.children):e.push(r)})};return i(this.children),e}onColumnVisibilityChanged(){this.setExpandable()}addEventListener(e,i){this.localEventService.addEventListener(e,i)}removeEventListener(e,i){this.localEventService.removeEventListener(e,i)}};vh.EVENT_EXPANDED_CHANGED="expandedChanged";vh.EVENT_EXPANDABLE_CHANGED="expandableChanged";g([Kt],vh.prototype,"destroy",1);var ot=vh,gF={numericColumn:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"},rightAligned:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"}},ox={};_t(ox,{addSafePassiveEventListener:()=>gx,createEventPath:()=>ux,getCtrlForEventTarget:()=>Zu,getEventPath:()=>hx,isElementInEventPath:()=>Ju,isEventSupported:()=>Pm,isStopPropagationForAgGrid:()=>$i,stopPropagationForAgGrid:()=>Qi});var rx={};_t(rx,{areEqual:()=>ho,existsAndNotEmpty:()=>nx,flatten:()=>dx,forEachReverse:()=>vF,includes:()=>wi,insertArrayIntoArray:()=>om,insertIntoArray:()=>ad,last:()=>be,moveInArray:()=>rm,pushAll:()=>nm,removeAllFromArray:()=>lx,removeAllFromUnorderedArray:()=>ax,removeFromArray:()=>Jt,removeFromUnorderedArray:()=>Im,removeRepeatsFromArray:()=>fF,shallowCompare:()=>pF,sortNumerically:()=>sx,toStrings:()=>mF});function nx(t){return t!=null&&t.length>0}function be(t){if(!(!t||!t.length))return t[t.length-1]}function ho(t,e,i){return t==null&&e==null?!0:t!=null&&e!=null&&t.length===e.length&&t.every((o,r)=>i?i(o,e[r]):e[r]===o)}function pF(t,e){return ho(t,e)}function sx(t){return t.sort((e,i)=>e-i)}function fF(t,e){if(t)for(let i=t.length-2;i>=0;i--){let o=t[i]===e,r=t[i+1]===e;o&&r&&t.splice(i+1,1)}}function Im(t,e){let i=t.indexOf(e);i>=0&&(t[i]=t[t.length-1],t.pop())}function Jt(t,e){let i=t.indexOf(e);i>=0&&t.splice(i,1)}function ax(t,e){for(let i=0;i<e.length;i++)Im(t,e[i])}function lx(t,e){for(let i=0;i<e.length;i++)Jt(t,e[i])}function ad(t,e,i){t.splice(i,0,e)}function om(t,e,i){if(!(t==null||e==null))for(let o=e.length-1;o>=0;o--){let r=e[o];ad(t,r,i)}}function rm(t,e,i){lx(t,e),e.slice().reverse().forEach(o=>ad(t,o,i))}function wi(t,e){return t.indexOf(e)>-1}function dx(t){return[].concat.apply([],t)}function nm(t,e){e==null||t==null||e.forEach(i=>t.push(i))}function mF(t){return t.map(sd)}function vF(t,e){if(t!=null)for(let i=t.length-1;i>=0;i--)e(t[i],i)}var cx="__ag_Grid_Stop_Propagation",CF=["touchstart","touchend","touchmove","touchcancel","scroll"],Gf={};function Qi(t){t[cx]=!0}function $i(t){return t[cx]===!0}var Pm=(()=>{let t={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return i=>{if(typeof Gf[i]=="boolean")return Gf[i];let o=document.createElement(t[i]||"div");return i="on"+i,Gf[i]=i in o}})();function Zu(t,e,i){let o=e;for(;o;){let r=t.getDomData(o,i);if(r)return r;o=o.parentElement}return null}function Ju(t,e){return!e||!t?!1:hx(e).indexOf(t)>=0}function ux(t){let e=[],i=t.target;for(;i;)e.push(i),i=i.parentElement;return e}function hx(t){let e=t;return e.path?e.path:e.composedPath?e.composedPath():ux(e)}function gx(t,e,i,o){let n=wi(CF,i)?{passive:!0}:void 0;t&&t.addEventListener&&t.addEventListener(e,i,o,n)}var Go=class px{constructor(){this.destroyFunctions=[],this.destroyed=!1,this.__v_skip=!0,this.lastChangeSetIdLookup={},this.propertyListenerId=0,this.isAlive=()=>!this.destroyed}getFrameworkOverrides(){return this.frameworkOverrides}getContext(){return this.context}destroy(){for(let e=0;e<this.destroyFunctions.length;e++)this.destroyFunctions[e]();this.destroyFunctions.length=0,this.destroyed=!0,this.dispatchEvent({type:px.EVENT_DESTROYED})}addEventListener(e,i){this.localEventService||(this.localEventService=new Yi),this.localEventService.addEventListener(e,i)}removeEventListener(e,i){this.localEventService&&this.localEventService.removeEventListener(e,i)}dispatchEvent(e){this.localEventService&&this.localEventService.dispatchEvent(e)}addManagedListener(e,i,o){if(this.destroyed)return;e instanceof HTMLElement?gx(this.getFrameworkOverrides(),e,i,o):e.addEventListener(i,o);let r=()=>(e.removeEventListener(i,o),null);return this.destroyFunctions.push(r),()=>(r(),this.destroyFunctions=this.destroyFunctions.filter(n=>n!==r),null)}setupGridOptionListener(e,i){this.gos.addEventListener(e,i);let o=()=>(this.gos.removeEventListener(e,i),null);return this.destroyFunctions.push(o),()=>(o(),this.destroyFunctions=this.destroyFunctions.filter(r=>r!==o),null)}addManagedPropertyListener(e,i){return this.destroyed?()=>null:this.setupGridOptionListener(e,i)}addManagedPropertyListeners(e,i){if(this.destroyed)return;let o=e.join("-")+this.propertyListenerId++,r=n=>{if(n.changeSet){if(n.changeSet&&n.changeSet.id===this.lastChangeSetIdLookup[o])return;this.lastChangeSetIdLookup[o]=n.changeSet.id}let s={type:"gridPropertyChanged",changeSet:n.changeSet,source:n.source};i(s)};e.forEach(n=>this.setupGridOptionListener(n,r))}addDestroyFunc(e){this.isAlive()?this.destroyFunctions.push(e):e()}createManagedBean(e,i){let o=this.createBean(e,i);return this.addDestroyFunc(this.destroyBean.bind(this,e,i)),o}createBean(e,i,o){return(i||this.getContext()).createBean(e,o)}destroyBean(e,i){return(i||this.getContext()).destroyBean(e)}destroyBeans(e,i){if(e)for(let o=0;o<e.length;o++)this.destroyBean(e[o],i);return[]}};Go.EVENT_DESTROYED="destroyed";g([v("frameworkOverrides")],Go.prototype,"frameworkOverrides",2);g([v("context")],Go.prototype,"context",2);g([v("eventService")],Go.prototype,"eventService",2);g([v("gridOptionsService")],Go.prototype,"gos",2);g([v("localeService")],Go.prototype,"localeService",2);g([v("environment")],Go.prototype,"environment",2);g([Kt],Go.prototype,"destroy",1);var A=Go,ld=class extends A{setBeans(t){this.logger=t.create("ColumnFactory")}createColumnTree(t,e,i,o){let r=new aF,{existingCols:n,existingGroups:s,existingColKeys:a}=this.extractExistingTreeData(i);r.addExistingKeys(a);let l=this.recursivelyCreateColumns(t,0,e,n,r,s,o),d=this.findMaxDept(l,0);this.logger.log("Number of levels for grouped columns is "+d);let c=this.balanceColumnTree(l,0,d,r);return ko(null,c,(h,p)=>{h instanceof ot&&h.setupExpandable(),h.setOriginalParent(p)}),{columnTree:c,treeDept:d}}extractExistingTreeData(t){let e=[],i=[],o=[];return t&&ko(null,t,r=>{if(r instanceof ot){let n=r;i.push(n)}else{let n=r;o.push(n.getId()),e.push(n)}}),{existingCols:e,existingGroups:i,existingColKeys:o}}createForAutoGroups(t,e){return t.map(i=>this.createAutoGroupTreeItem(e,i))}createAutoGroupTreeItem(t,e){let i=this.findDepth(t),o=e;for(let r=i-1;r>=0;r--){let n=new ot(null,`FAKE_PATH_${e.getId()}}_${r}`,!0,r);this.createBean(n),n.setChildren([o]),o.setOriginalParent(n),o=n}return i===0&&e.setOriginalParent(null),o}findDepth(t){let e=0,i=t;for(;i&&i[0]&&i[0]instanceof ot;)e++,i=i[0].getChildren();return e}balanceColumnTree(t,e,i,o){let r=[];for(let n=0;n<t.length;n++){let s=t[n];if(s instanceof ot){let a=s,l=this.balanceColumnTree(a.getChildren(),e+1,i,o);a.setChildren(l),r.push(a)}else{let a,l;for(let d=i-1;d>=e;d--){let c=o.getUniqueKey(null,null),u=this.createMergedColGroupDef(null),h=new ot(u,c,!0,e);this.createBean(h),l&&l.setChildren([h]),l=h,a||(a=l)}if(a&&l)if(r.push(a),t.some(c=>c instanceof ot)){l.setChildren([s]);continue}else{l.setChildren(t);break}r.push(s)}}return r}findMaxDept(t,e){let i=e;for(let o=0;o<t.length;o++){let r=t[o];if(r instanceof ot){let n=r,s=this.findMaxDept(n.getChildren(),e+1);i<s&&(i=s)}}return i}recursivelyCreateColumns(t,e,i,o,r,n,s){if(!t)return[];let a=new Array(t.length);for(let l=0;l<a.length;l++){let d=t[l];this.isColumnGroup(d)?a[l]=this.createColumnGroup(i,d,e,o,r,n,s):a[l]=this.createColumn(i,d,o,r,s)}return a}createColumnGroup(t,e,i,o,r,n,s){let a=this.createMergedColGroupDef(e),l=r.getUniqueKey(a.groupId||null,null),d=new ot(a,l,!1,i);this.createBean(d);let c=this.findExistingGroup(e,n);c&&n.splice(c.idx,1);let u=c?.group;u&&d.setExpanded(u.isExpanded());let h=this.recursivelyCreateColumns(a.children,i+1,t,o,r,n,s);return d.setChildren(h),d}createMergedColGroupDef(t){let e={};return Object.assign(e,this.gos.get("defaultColGroupDef")),Object.assign(e,t),e}createColumn(t,e,i,o,r){let n=this.findExistingColumn(e,i);n&&i?.splice(n.idx,1);let s=n?.column;if(s){let a=this.addColumnDefaultAndTypes(e,s.getColId());s.setColDef(a,e,r),this.applyColumnState(s,a,r)}else{let a=o.getUniqueKey(e.colId,e.field),l=this.addColumnDefaultAndTypes(e,a);s=new ke(l,e,a,t),this.context.createBean(s)}return this.dataTypeService.addColumnListeners(s),s}applyColumnState(t,e,i){let o=Er(e.flex);if(o!==void 0&&t.setFlex(o),t.getFlex()<=0){let a=Er(e.width);if(a!=null)t.setActualWidth(a,i);else{let l=t.getActualWidth();t.setActualWidth(l,i)}}e.sort!==void 0&&(e.sort=="asc"||e.sort=="desc"?t.setSort(e.sort,i):t.setSort(void 0,i));let n=Er(e.sortIndex);n!==void 0&&t.setSortIndex(n);let s=Yu(e.hide);s!==void 0&&t.setVisible(!s,i),e.pinned!==void 0&&t.setPinned(e.pinned)}findExistingColumn(t,e){if(e)for(let i=0;i<e.length;i++){let o=e[i].getUserProvidedColDef();if(!o)continue;if(t.colId!=null){if(e[i].getId()===t.colId)return{idx:i,column:e[i]};continue}if(t.field!=null){if(o.field===t.field)return{idx:i,column:e[i]};continue}if(o===t)return{idx:i,column:e[i]}}}findExistingGroup(t,e){if(t.groupId!=null)for(let o=0;o<e.length;o++){let r=e[o];if(r.getColGroupDef()&&r.getId()===t.groupId)return{idx:o,group:r}}}addColumnDefaultAndTypes(t,e){let i={},o=this.gos.get("defaultColDef");ei(i,o,!1,!0);let r=this.dataTypeService.updateColDefAndGetColumnType(i,t,e);r&&this.assignColumnTypes(r,i),ei(i,t,!1,!0);let n=this.gos.get("autoGroupColumnDef"),s=this.gos.isColumnsSortingCoupledToGroup();return t.rowGroup&&n&&s&&ei(i,{sort:n.sort,initialSort:n.initialSort},!1,!0),this.dataTypeService.validateColDef(i),i}assignColumnTypes(t,e){if(!t.length)return;let i=Object.assign({},gF),o=this.gos.get("columnTypes")||{};Nt(o,(r,n)=>{r in i?console.warn(`AG Grid: the column type '${r}' is a default column type and cannot be overridden.`):(n.type&&q("Column type definitions 'columnTypes' with a 'type' attribute are not supported because a column type cannot refer to another column type. Only column definitions 'columnDefs' can use the 'type' attribute to refer to a column type."),i[r]=n)}),t.forEach(r=>{let n=i[r.trim()];n?ei(e,n,!1,!0):console.warn("AG Grid: colDef.type '"+r+"' does not correspond to defined gridOptions.columnTypes")})}isColumnGroup(t){return t.children!==void 0}};g([v("dataTypeService")],ld.prototype,"dataTypeService",2);g([ji(0,Ti("loggerFactory"))],ld.prototype,"setBeans",1);ld=g([V("columnFactory")],ld);function ko(t,e,i){if(e)for(let o=0;o<e.length;o++){let r=e[o];r instanceof ot&&ko(r,r.getChildren(),i),i(r,t)}}var Ch=class lo{constructor(e,i,o,r){this.displayedChildren=[],this.localEventService=new Yi,this.groupId=i,this.partId=o,this.providedColumnGroup=e,this.pinned=r}static createUniqueId(e,i){return e+"_"+i}reset(){this.parent=null,this.children=null,this.displayedChildren=null}getParent(){return this.parent}setParent(e){this.parent=e}getUniqueId(){return lo.createUniqueId(this.groupId,this.partId)}isEmptyGroup(){return this.displayedChildren.length===0}isMoving(){let e=this.getProvidedColumnGroup().getLeafColumns();return!e||e.length===0?!1:e.every(i=>i.isMoving())}checkLeft(){if(this.displayedChildren.forEach(e=>{e instanceof lo&&e.checkLeft()}),this.displayedChildren.length>0)if(this.gos.get("enableRtl")){let i=be(this.displayedChildren).getLeft();this.setLeft(i)}else{let e=this.displayedChildren[0].getLeft();this.setLeft(e)}else this.setLeft(null)}getLeft(){return this.left}getOldLeft(){return this.oldLeft}setLeft(e){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.localEventService.dispatchEvent(this.createAgEvent(lo.EVENT_LEFT_CHANGED)))}getPinned(){return this.pinned}createAgEvent(e){return{type:e}}addEventListener(e,i){this.localEventService.addEventListener(e,i)}removeEventListener(e,i){this.localEventService.removeEventListener(e,i)}getGroupId(){return this.groupId}getPartId(){return this.partId}isChildInThisGroupDeepSearch(e){let i=!1;return this.children.forEach(o=>{e===o&&(i=!0),o instanceof lo&&o.isChildInThisGroupDeepSearch(e)&&(i=!0)}),i}getActualWidth(){let e=0;return this.displayedChildren&&this.displayedChildren.forEach(i=>{e+=i.getActualWidth()}),e}isResizable(){if(!this.displayedChildren)return!1;let e=!1;return this.displayedChildren.forEach(i=>{i.isResizable()&&(e=!0)}),e}getMinWidth(){let e=0;return this.displayedChildren.forEach(i=>{e+=i.getMinWidth()||0}),e}addChild(e){this.children||(this.children=[]),this.children.push(e)}getDisplayedChildren(){return this.displayedChildren}getLeafColumns(){let e=[];return this.addLeafColumns(e),e}getDisplayedLeafColumns(){let e=[];return this.addDisplayedLeafColumns(e),e}getDefinition(){return this.providedColumnGroup.getColGroupDef()}getColGroupDef(){return this.providedColumnGroup.getColGroupDef()}isPadding(){return this.providedColumnGroup.isPadding()}isExpandable(){return this.providedColumnGroup.isExpandable()}isExpanded(){return this.providedColumnGroup.isExpanded()}setExpanded(e){this.providedColumnGroup.setExpanded(e)}addDisplayedLeafColumns(e){this.displayedChildren.forEach(i=>{i instanceof ke?e.push(i):i instanceof lo&&i.addDisplayedLeafColumns(e)})}addLeafColumns(e){this.children.forEach(i=>{i instanceof ke?e.push(i):i instanceof lo&&i.addLeafColumns(e)})}getChildren(){return this.children}getColumnGroupShow(){return this.providedColumnGroup.getColumnGroupShow()}getProvidedColumnGroup(){return this.providedColumnGroup}getPaddingLevel(){let e=this.getParent();return!this.isPadding()||!e||!e.isPadding()?0:1+e.getPaddingLevel()}calculateDisplayedColumns(){this.displayedChildren=[];let e=this;for(;e!=null&&e.isPadding();)e=e.getParent();if(!(e?e.providedColumnGroup.isExpandable():!1)){this.displayedChildren=this.children,this.localEventService.dispatchEvent(this.createAgEvent(lo.EVENT_DISPLAYED_CHILDREN_CHANGED));return}this.children.forEach(o=>{if(o instanceof lo&&(!o.displayedChildren||!o.displayedChildren.length))return;switch(o.getColumnGroupShow()){case"open":e.providedColumnGroup.isExpanded()&&this.displayedChildren.push(o);break;case"closed":e.providedColumnGroup.isExpanded()||this.displayedChildren.push(o);break;default:this.displayedChildren.push(o);break}}),this.localEventService.dispatchEvent(this.createAgEvent(lo.EVENT_DISPLAYED_CHILDREN_CHANGED))}};Ch.EVENT_LEFT_CHANGED="leftChanged";Ch.EVENT_DISPLAYED_CHILDREN_CHANGED="displayedChildrenChanged";g([v("gridOptionsService")],Ch.prototype,"gos",2);var ft=Ch,f=class{};f.EVENT_COLUMN_EVERYTHING_CHANGED="columnEverythingChanged";f.EVENT_NEW_COLUMNS_LOADED="newColumnsLoaded";f.EVENT_COLUMN_PIVOT_MODE_CHANGED="columnPivotModeChanged";f.EVENT_PIVOT_MAX_COLUMNS_EXCEEDED="pivotMaxColumnsExceeded";f.EVENT_COLUMN_ROW_GROUP_CHANGED="columnRowGroupChanged";f.EVENT_EXPAND_COLLAPSE_ALL="expandOrCollapseAll";f.EVENT_COLUMN_PIVOT_CHANGED="columnPivotChanged";f.EVENT_GRID_COLUMNS_CHANGED="gridColumnsChanged";f.EVENT_COLUMN_VALUE_CHANGED="columnValueChanged";f.EVENT_COLUMN_MOVED="columnMoved";f.EVENT_COLUMN_VISIBLE="columnVisible";f.EVENT_COLUMN_PINNED="columnPinned";f.EVENT_COLUMN_GROUP_OPENED="columnGroupOpened";f.EVENT_COLUMN_RESIZED="columnResized";f.EVENT_DISPLAYED_COLUMNS_CHANGED="displayedColumnsChanged";f.EVENT_SUPPRESS_COLUMN_MOVE_CHANGED="suppressMovableColumns";f.EVENT_SUPPRESS_MENU_HIDE_CHANGED="suppressMenuHide";f.EVENT_SUPPRESS_FIELD_DOT_NOTATION="suppressFieldDotNotation";f.EVENT_VIRTUAL_COLUMNS_CHANGED="virtualColumnsChanged";f.EVENT_COLUMN_HEADER_MOUSE_OVER="columnHeaderMouseOver";f.EVENT_COLUMN_HEADER_MOUSE_LEAVE="columnHeaderMouseLeave";f.EVENT_COLUMN_HEADER_CLICKED="columnHeaderClicked";f.EVENT_COLUMN_HEADER_CONTEXT_MENU="columnHeaderContextMenu";f.EVENT_ASYNC_TRANSACTIONS_FLUSHED="asyncTransactionsFlushed";f.EVENT_ROW_GROUP_OPENED="rowGroupOpened";f.EVENT_ROW_DATA_UPDATED="rowDataUpdated";f.EVENT_PINNED_ROW_DATA_CHANGED="pinnedRowDataChanged";f.EVENT_RANGE_SELECTION_CHANGED="rangeSelectionChanged";f.EVENT_CHART_CREATED="chartCreated";f.EVENT_CHART_RANGE_SELECTION_CHANGED="chartRangeSelectionChanged";f.EVENT_CHART_OPTIONS_CHANGED="chartOptionsChanged";f.EVENT_CHART_DESTROYED="chartDestroyed";f.EVENT_TOOL_PANEL_VISIBLE_CHANGED="toolPanelVisibleChanged";f.EVENT_TOOL_PANEL_SIZE_CHANGED="toolPanelSizeChanged";f.EVENT_COLUMN_PANEL_ITEM_DRAG_START="columnPanelItemDragStart";f.EVENT_COLUMN_PANEL_ITEM_DRAG_END="columnPanelItemDragEnd";f.EVENT_MODEL_UPDATED="modelUpdated";f.EVENT_CUT_START="cutStart";f.EVENT_CUT_END="cutEnd";f.EVENT_PASTE_START="pasteStart";f.EVENT_PASTE_END="pasteEnd";f.EVENT_FILL_START="fillStart";f.EVENT_FILL_END="fillEnd";f.EVENT_RANGE_DELETE_START="rangeDeleteStart";f.EVENT_RANGE_DELETE_END="rangeDeleteEnd";f.EVENT_UNDO_STARTED="undoStarted";f.EVENT_UNDO_ENDED="undoEnded";f.EVENT_REDO_STARTED="redoStarted";f.EVENT_REDO_ENDED="redoEnded";f.EVENT_KEY_SHORTCUT_CHANGED_CELL_START="keyShortcutChangedCellStart";f.EVENT_KEY_SHORTCUT_CHANGED_CELL_END="keyShortcutChangedCellEnd";f.EVENT_CELL_CLICKED="cellClicked";f.EVENT_CELL_DOUBLE_CLICKED="cellDoubleClicked";f.EVENT_CELL_MOUSE_DOWN="cellMouseDown";f.EVENT_CELL_CONTEXT_MENU="cellContextMenu";f.EVENT_CELL_VALUE_CHANGED="cellValueChanged";f.EVENT_CELL_EDIT_REQUEST="cellEditRequest";f.EVENT_ROW_VALUE_CHANGED="rowValueChanged";f.EVENT_CELL_FOCUSED="cellFocused";f.EVENT_CELL_FOCUS_CLEARED="cellFocusCleared";f.EVENT_FULL_WIDTH_ROW_FOCUSED="fullWidthRowFocused";f.EVENT_ROW_SELECTED="rowSelected";f.EVENT_SELECTION_CHANGED="selectionChanged";f.EVENT_TOOLTIP_SHOW="tooltipShow";f.EVENT_TOOLTIP_HIDE="tooltipHide";f.EVENT_CELL_KEY_DOWN="cellKeyDown";f.EVENT_CELL_MOUSE_OVER="cellMouseOver";f.EVENT_CELL_MOUSE_OUT="cellMouseOut";f.EVENT_FILTER_CHANGED="filterChanged";f.EVENT_FILTER_MODIFIED="filterModified";f.EVENT_FILTER_OPENED="filterOpened";f.EVENT_ADVANCED_FILTER_BUILDER_VISIBLE_CHANGED="advancedFilterBuilderVisibleChanged";f.EVENT_SORT_CHANGED="sortChanged";f.EVENT_VIRTUAL_ROW_REMOVED="virtualRowRemoved";f.EVENT_ROW_CLICKED="rowClicked";f.EVENT_ROW_DOUBLE_CLICKED="rowDoubleClicked";f.EVENT_GRID_READY="gridReady";f.EVENT_GRID_PRE_DESTROYED="gridPreDestroyed";f.EVENT_GRID_SIZE_CHANGED="gridSizeChanged";f.EVENT_VIEWPORT_CHANGED="viewportChanged";f.EVENT_SCROLLBAR_WIDTH_CHANGED="scrollbarWidthChanged";f.EVENT_FIRST_DATA_RENDERED="firstDataRendered";f.EVENT_DRAG_STARTED="dragStarted";f.EVENT_DRAG_STOPPED="dragStopped";f.EVENT_CHECKBOX_CHANGED="checkboxChanged";f.EVENT_ROW_EDITING_STARTED="rowEditingStarted";f.EVENT_ROW_EDITING_STOPPED="rowEditingStopped";f.EVENT_CELL_EDITING_STARTED="cellEditingStarted";f.EVENT_CELL_EDITING_STOPPED="cellEditingStopped";f.EVENT_BODY_SCROLL="bodyScroll";f.EVENT_BODY_SCROLL_END="bodyScrollEnd";f.EVENT_HEIGHT_SCALE_CHANGED="heightScaleChanged";f.EVENT_PAGINATION_CHANGED="paginationChanged";f.EVENT_COMPONENT_STATE_CHANGED="componentStateChanged";f.EVENT_STORE_REFRESHED="storeRefreshed";f.EVENT_STATE_UPDATED="stateUpdated";f.EVENT_COLUMN_MENU_VISIBLE_CHANGED="columnMenuVisibleChanged";f.EVENT_CONTEXT_MENU_VISIBLE_CHANGED="contextMenuVisibleChanged";f.EVENT_BODY_HEIGHT_CHANGED="bodyHeightChanged";f.EVENT_COLUMN_CONTAINER_WIDTH_CHANGED="columnContainerWidthChanged";f.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED="displayedColumnsWidthChanged";f.EVENT_SCROLL_VISIBILITY_CHANGED="scrollVisibilityChanged";f.EVENT_COLUMN_HOVER_CHANGED="columnHoverChanged";f.EVENT_FLASH_CELLS="flashCells";f.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED="paginationPixelOffsetChanged";f.EVENT_DISPLAYED_ROWS_CHANGED="displayedRowsChanged";f.EVENT_LEFT_PINNED_WIDTH_CHANGED="leftPinnedWidthChanged";f.EVENT_RIGHT_PINNED_WIDTH_CHANGED="rightPinnedWidthChanged";f.EVENT_ROW_CONTAINER_HEIGHT_CHANGED="rowContainerHeightChanged";f.EVENT_HEADER_HEIGHT_CHANGED="headerHeightChanged";f.EVENT_COLUMN_HEADER_HEIGHT_CHANGED="columnHeaderHeightChanged";f.EVENT_ROW_DRAG_ENTER="rowDragEnter";f.EVENT_ROW_DRAG_MOVE="rowDragMove";f.EVENT_ROW_DRAG_LEAVE="rowDragLeave";f.EVENT_ROW_DRAG_END="rowDragEnd";f.EVENT_GRID_STYLES_CHANGED="gridStylesChanged";f.EVENT_COLUMN_ROW_GROUP_CHANGE_REQUEST="columnRowGroupChangeRequest";f.EVENT_COLUMN_PIVOT_CHANGE_REQUEST="columnPivotChangeRequest";f.EVENT_COLUMN_VALUE_CHANGE_REQUEST="columnValueChangeRequest";f.EVENT_COLUMN_AGG_FUNC_CHANGE_REQUEST="columnAggFuncChangeRequest";f.EVENT_STORE_UPDATED="storeUpdated";f.EVENT_FILTER_DESTROYED="filterDestroyed";f.EVENT_ROW_DATA_UPDATE_STARTED="rowDataUpdateStarted";f.EVENT_ROW_COUNT_READY="rowCountReady";f.EVENT_ADVANCED_FILTER_ENABLED_CHANGED="advancedFilterEnabledChanged";f.EVENT_DATA_TYPES_INFERRED="dataTypesInferred";f.EVENT_FIELD_VALUE_CHANGED="fieldValueChanged";f.EVENT_FIELD_PICKER_VALUE_SELECTED="fieldPickerValueSelected";f.EVENT_SIDE_BAR_UPDATED="sideBarUpdated";var Bu=new Set([f.EVENT_GRID_PRE_DESTROYED,f.EVENT_FILL_START]),fx=class{constructor(){this.existingIds={}}getInstanceIdForKey(t){let e=this.existingIds[t],i;return typeof e!="number"?i=0:i=e+1,this.existingIds[t]=i,i}},Zs="ag-Grid-AutoColumn",dd=class extends A{createAutoGroupColumns(t){let e=[],i=this.gos.get("treeData"),o=this.gos.isGroupMultiAutoColumn();return i&&o&&(console.warn('AG Grid: you cannot mix groupDisplayType = "multipleColumns" with treeData, only one column can be used to display groups when doing tree data'),o=!1),o?t.forEach((r,n)=>{e.push(this.createOneAutoGroupColumn(r,n))}):e.push(this.createOneAutoGroupColumn()),e}updateAutoGroupColumns(t,e){t.forEach((i,o)=>this.updateOneAutoGroupColumn(i,o,e))}createOneAutoGroupColumn(t,e){let i;t?i=`${Zs}-${t.getId()}`:i=Zs;let o=this.createAutoGroupColDef(i,t,e);o.colId=i;let r=new ke(o,null,i,!0);return this.context.createBean(r),r}updateOneAutoGroupColumn(t,e,i){let o=t.getColDef(),r=typeof o.showRowGroup=="string"?o.showRowGroup:void 0,n=r!=null?this.columnModel.getPrimaryColumn(r):void 0,s=this.createAutoGroupColDef(t.getId(),n??void 0,e);t.setColDef(s,null,i),this.columnFactory.applyColumnState(t,s,i)}createAutoGroupColDef(t,e,i){let o=this.createBaseColDef(e),r=this.gos.get("autoGroupColumnDef");ei(o,r),o=this.columnFactory.addColumnDefaultAndTypes(o,t),this.gos.get("treeData")||X(o.field)&&X(o.valueGetter)&&X(o.filterValueGetter)&&o.filter!=="agGroupColumnFilter"&&(o.filter=!1),i&&i>0&&(o.headerCheckboxSelection=!1);let n=this.gos.isColumnsSortingCoupledToGroup(),s=o.valueGetter||o.field!=null;return n&&!s&&(o.sortIndex=void 0,o.initialSort=void 0),o}createBaseColDef(t){let e=this.gos.get("autoGroupColumnDef"),o={headerName:this.localeService.getLocaleTextFunc()("group","Group")};if(e&&(e.cellRenderer||e.cellRendererSelector)||(o.cellRenderer="agGroupCellRenderer"),t){let n=t.getColDef();Object.assign(o,{headerName:this.columnModel.getDisplayNameForColumn(t,"header"),headerValueGetter:n.headerValueGetter}),n.cellRenderer&&Object.assign(o,{cellRendererParams:{innerRenderer:n.cellRenderer,innerRendererParams:n.cellRendererParams}}),o.showRowGroup=t.getColId()}else o.showRowGroup=!0;return o}};g([v("columnModel")],dd.prototype,"columnModel",2);g([v("columnFactory")],dd.prototype,"columnFactory",2);dd=g([V("autoGroupColService")],dd);var mx={};_t(mx,{camelCaseToHumanText:()=>vx,camelCaseToHyphenated:()=>Cx,capitalise:()=>SF,escapeString:()=>rt,utf8_encode:()=>bF});var wF=/[&<>"']/g,yF={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function bF(t){let e=String.fromCharCode;function i(u){let h=[];if(!u)return[];let p=u.length,m=0,C,w;for(;m<p;)C=u.charCodeAt(m++),C>=55296&&C<=56319&&m<p?(w=u.charCodeAt(m++),(w&64512)==56320?h.push(((C&1023)<<10)+(w&1023)+65536):(h.push(C),m--)):h.push(C);return h}function o(u){if(u>=55296&&u<=57343)throw Error("Lone surrogate U+"+u.toString(16).toUpperCase()+" is not a scalar value")}function r(u,h){return e(u>>h&63|128)}function n(u){if(u>=0&&u<=31&&u!==10)return`_x${u.toString(16).toUpperCase().padStart(4,"0")}_`;if(!(u&4294967168))return e(u);let h="";return u&4294965248?u&4294901760?u&4292870144||(h=e(u>>18&7|240),h+=r(u,12),h+=r(u,6)):(o(u),h=e(u>>12&15|224),h+=r(u,6)):h=e(u>>6&31|192),h+=e(u&63|128),h}let s=i(t),a=s.length,l=-1,d,c="";for(;++l<a;)d=s[l],c+=n(d);return c}function SF(t){return t[0].toUpperCase()+t.substring(1).toLowerCase()}function rt(t,e){if(t==null)return null;let i=t.toString().toString();return e?i:i.replace(wF,o=>yF[o])}function vx(t){if(!t||t==null)return null;let e=/([a-z])([A-Z])/g,i=/([A-Z]+)([A-Z])([a-z])/g;return t.replace(e,"$1 $2").replace(i,"$1 $2$3").replace(/\./g," ").split(" ").map(r=>r.substring(0,1).toUpperCase()+(r.length>1?r.substring(1,r.length):"")).join(" ")}function Cx(t){return t.replace(/[A-Z]/g,e=>`-${e.toLocaleLowerCase()}`)}var wx={};_t(wx,{convertToMap:()=>_r,keys:()=>_F,mapById:()=>xF});function _r(t){let e=new Map;return t.forEach(i=>e.set(i[0],i[1])),e}function xF(t,e){let i=new Map;return t.forEach(o=>i.set(e(o),o)),i}function _F(t){let e=[];return t.forEach((i,o)=>e.push(o)),e}var xt=class extends A{constructor(){super(...arguments),this.primaryHeaderRowCount=0,this.secondaryHeaderRowCount=0,this.gridHeaderRowCount=0,this.displayedColumnsLeft=[],this.displayedColumnsRight=[],this.displayedColumnsCenter=[],this.displayedColumns=[],this.displayedColumnsAndGroupsMap={},this.viewportColumns=[],this.viewportColumnsHash="",this.headerViewportColumns=[],this.viewportColumnsCenter=[],this.headerViewportColumnsCenter=[],this.viewportRowLeft={},this.viewportRowRight={},this.viewportRowCenter={},this.autoHeightActiveAtLeastOnce=!1,this.rowGroupColumns=[],this.valueColumns=[],this.pivotColumns=[],this.ready=!1,this.changeEventsDispatching=!1,this.autoGroupsNeedBuilding=!1,this.forceRecreateAutoGroups=!1,this.pivotMode=!1,this.bodyWidth=0,this.leftWidth=0,this.rightWidth=0,this.bodyWidthDirty=!0,this.shouldQueueResizeOperations=!1,this.resizeOperationQueue=[]}init(){this.suppressColumnVirtualisation=this.gos.get("suppressColumnVirtualisation");let t=this.gos.get("pivotMode");this.isPivotSettingAllowed(t)&&(this.pivotMode=t),this.addManagedPropertyListeners(["groupDisplayType","treeData","treeDataDisplayType","groupHideOpenParents"],e=>this.buildAutoGroupColumns(qs(e.source))),this.addManagedPropertyListener("autoGroupColumnDef",e=>this.onAutoGroupColumnDefChanged(qs(e.source))),this.addManagedPropertyListeners(["defaultColDef","columnTypes","suppressFieldDotNotation"],e=>this.onSharedColDefChanged(qs(e.source))),this.addManagedPropertyListener("pivotMode",e=>this.setPivotMode(this.gos.get("pivotMode"),qs(e.source))),this.addManagedListener(this.eventService,f.EVENT_FIRST_DATA_RENDERED,()=>this.onFirstDataRendered())}buildAutoGroupColumns(t){this.columnDefs&&(this.autoGroupsNeedBuilding=!0,this.forceRecreateAutoGroups=!0,this.updateGridColumns(),this.updateDisplayedColumns(t))}onAutoGroupColumnDefChanged(t){this.groupAutoColumns&&this.autoGroupColService.updateAutoGroupColumns(this.groupAutoColumns,t)}onSharedColDefChanged(t){this.gridColumns&&(this.groupAutoColumns&&this.autoGroupColService.updateAutoGroupColumns(this.groupAutoColumns,t),this.createColumnsFromColumnDefs(!0,t))}setColumnDefs(t,e){let i=!!this.columnDefs;this.columnDefs=t,this.createColumnsFromColumnDefs(i,e)}recreateColumnDefs(t){this.onSharedColDefChanged(t)}destroyOldColumns(t,e){let i={};if(!t)return;ko(null,t,r=>{i[r.getInstanceId()]=r}),e&&ko(null,e,r=>{i[r.getInstanceId()]=null});let o=Object.values(i).filter(r=>r!=null);this.destroyBeans(o)}destroyColumns(){this.destroyOldColumns(this.primaryColumnTree),this.destroyOldColumns(this.secondaryBalancedTree),this.destroyOldColumns(this.groupAutoColsBalancedTree)}createColumnsFromColumnDefs(t,e){let i=t?this.compareColumnStatesAndDispatchEvents(e):void 0;this.valueCache.expire(),this.autoGroupsNeedBuilding=!0;let o=this.primaryColumns,r=this.primaryColumnTree,n=this.columnFactory.createColumnTree(this.columnDefs,!0,r,e);this.destroyOldColumns(this.primaryColumnTree,n.columnTree),this.primaryColumnTree=n.columnTree,this.primaryHeaderRowCount=n.treeDept+1,this.primaryColumns=this.getColumnsFromTree(this.primaryColumnTree),this.primaryColumnsMap={},this.primaryColumns.forEach(l=>this.primaryColumnsMap[l.getId()]=l),this.extractRowGroupColumns(e,o),this.extractPivotColumns(e,o),this.extractValueColumns(e,o),this.ready=!0;let s=this.gridColsArePrimary===void 0;(this.gridColsArePrimary||s||this.autoGroupsNeedBuilding)&&(this.updateGridColumns(),t&&this.gridColsArePrimary&&!this.gos.get("maintainColumnOrder")&&this.orderGridColumnsLikePrimary(),this.updateDisplayedColumns(e),this.checkViewportColumns()),this.dispatchEverythingChanged(e),this.changeEventsDispatching=!0,i&&i(),this.changeEventsDispatching=!1,this.dispatchNewColumnsLoaded(e)}shouldRowModelIgnoreRefresh(){return this.changeEventsDispatching}dispatchNewColumnsLoaded(t){let e={type:f.EVENT_NEW_COLUMNS_LOADED,source:t};this.eventService.dispatchEvent(e),t==="gridInitializing"&&this.onColumnsReady()}dispatchEverythingChanged(t){let e={type:f.EVENT_COLUMN_EVERYTHING_CHANGED,source:t};this.eventService.dispatchEvent(e)}orderGridColumnsLikePrimary(){let t=this.primaryColumns;if(!t)return;let e=t.filter(o=>this.gridColumns.indexOf(o)>=0),i=this.gridColumns.filter(o=>e.indexOf(o)<0);this.gridColumns=[...i,...e],this.gridColumns=this.placeLockedColumns(this.gridColumns)}getAllDisplayedAutoHeightCols(){return this.displayedAutoHeightCols}setViewport(){this.gos.get("enableRtl")?(this.viewportLeft=this.bodyWidth-this.scrollPosition-this.scrollWidth,this.viewportRight=this.bodyWidth-this.scrollPosition):(this.viewportLeft=this.scrollPosition,this.viewportRight=this.scrollWidth+this.scrollPosition)}checkViewportColumns(t=!1){if(this.displayedColumnsCenter==null||!this.extractViewport())return;let i={type:f.EVENT_VIRTUAL_COLUMNS_CHANGED,afterScroll:t};this.eventService.dispatchEvent(i)}setViewportPosition(t,e,i=!1){(t!==this.scrollWidth||e!==this.scrollPosition||this.bodyWidthDirty)&&(this.scrollWidth=t,this.scrollPosition=e,this.bodyWidthDirty=!0,this.setViewport(),this.ready&&this.checkViewportColumns(i))}isPivotMode(){return this.pivotMode}isPivotSettingAllowed(t){return t&&this.gos.get("treeData")?(q("Pivot mode not available with treeData."),!1):!0}setPivotMode(t,e){if(t===this.pivotMode||!this.isPivotSettingAllowed(this.pivotMode)||(this.pivotMode=t,!this.gridColumns))return;this.autoGroupsNeedBuilding=!0,this.updateGridColumns(),this.updateDisplayedColumns(e);let i={type:f.EVENT_COLUMN_PIVOT_MODE_CHANGED};this.eventService.dispatchEvent(i)}getSecondaryPivotColumn(t,e){if(X(this.secondaryColumns))return null;let i=this.getPrimaryColumn(e),o=null;return this.secondaryColumns.forEach(r=>{let n=r.getColDef().pivotKeys,s=r.getColDef().pivotValueColumn;ho(n,t)&&s===i&&(o=r)}),o}setBeans(t){this.logger=t.create("columnModel")}setFirstRightAndLastLeftPinned(t){let e,i;this.gos.get("enableRtl")?(e=this.displayedColumnsLeft?this.displayedColumnsLeft[0]:null,i=this.displayedColumnsRight?be(this.displayedColumnsRight):null):(e=this.displayedColumnsLeft?be(this.displayedColumnsLeft):null,i=this.displayedColumnsRight?this.displayedColumnsRight[0]:null),this.gridColumns.forEach(o=>{o.setLastLeftPinned(o===e,t),o.setFirstRightPinned(o===i,t)})}autoSizeColumns(t){if(this.shouldQueueResizeOperations){this.resizeOperationQueue.push(()=>this.autoSizeColumns(t));return}let{columns:e,skipHeader:i,skipHeaderGroups:o,stopAtGroup:r,source:n="api"}=t;this.animationFrameService.flushAllFrames();let s=[],a=-1,l=i??this.gos.get("skipHeaderOnAutoSize"),d=o??l;for(;a!==0;)a=0,this.actionOnGridColumns(e,c=>{if(s.indexOf(c)>=0)return!1;let u=this.autoWidthCalculator.getPreferredWidthForColumn(c,l);if(u>0){let h=this.normaliseColumnWidth(c,u);c.setActualWidth(h,n),s.push(c),a++}return!0},n);d||this.autoSizeColumnGroupsByColumns(e,n,r),this.dispatchColumnResizedEvent(s,!0,"autosizeColumns")}dispatchColumnResizedEvent(t,e,i,o=null){if(t&&t.length){let r={type:f.EVENT_COLUMN_RESIZED,columns:t,column:t.length===1?t[0]:null,flexColumns:o,finished:e,source:i};this.eventService.dispatchEvent(r)}}dispatchColumnChangedEvent(t,e,i){let o={type:t,columns:e,column:e&&e.length==1?e[0]:null,source:i};this.eventService.dispatchEvent(o)}dispatchColumnMovedEvent(t){let{movedColumns:e,source:i,toIndex:o,finished:r}=t,n={type:f.EVENT_COLUMN_MOVED,columns:e,column:e&&e.length===1?e[0]:null,toIndex:o,finished:r,source:i};this.eventService.dispatchEvent(n)}dispatchColumnPinnedEvent(t,e){if(!t.length)return;let i=t.length===1?t[0]:null,o=this.getCommonValue(t,n=>n.getPinned()),r={type:f.EVENT_COLUMN_PINNED,pinned:o??null,columns:t,column:i,source:e};this.eventService.dispatchEvent(r)}dispatchColumnVisibleEvent(t,e){if(!t.length)return;let i=t.length===1?t[0]:null,o=this.getCommonValue(t,n=>n.isVisible()),r={type:f.EVENT_COLUMN_VISIBLE,visible:o,columns:t,column:i,source:e};this.eventService.dispatchEvent(r)}autoSizeColumn(t,e,i){t&&this.autoSizeColumns({columns:[t],skipHeader:i,skipHeaderGroups:!0,source:e})}autoSizeColumnGroupsByColumns(t,e,i){let o=new Set;this.getGridColumns(t).forEach(a=>{let l=a.getParent();for(;l&&l!=i;)l.isPadding()||o.add(l),l=l.getParent()});let n,s=[];for(let a of o){for(let l of this.ctrlsService.getHeaderRowContainerCtrls())if(n=l.getHeaderCtrlForColumn(a),n)break;n&&n.resizeLeafColumnsToFit(e)}return s}autoSizeAllColumns(t,e){if(this.shouldQueueResizeOperations){this.resizeOperationQueue.push(()=>this.autoSizeAllColumns(t,e));return}let i=this.getAllDisplayedColumns();this.autoSizeColumns({columns:i,skipHeader:e,source:t})}getColumnsFromTree(t){let e=[],i=o=>{for(let r=0;r<o.length;r++){let n=o[r];n instanceof ke?e.push(n):n instanceof ot&&i(n.getChildren())}};return i(t),e}getAllDisplayedTrees(){return this.displayedTreeLeft&&this.displayedTreeRight&&this.displayedTreeCentre?this.displayedTreeLeft.concat(this.displayedTreeCentre).concat(this.displayedTreeRight):null}getPrimaryColumnTree(){return this.primaryColumnTree}getHeaderRowCount(){return this.gridHeaderRowCount}getDisplayedTreeLeft(){return this.displayedTreeLeft}getDisplayedTreeRight(){return this.displayedTreeRight}getDisplayedTreeCentre(){return this.displayedTreeCentre}isColumnDisplayed(t){return this.getAllDisplayedColumns().indexOf(t)>=0}getAllDisplayedColumns(){return this.displayedColumns}getViewportColumns(){return this.viewportColumns}getDisplayedLeftColumnsForRow(t){return this.colSpanActive?this.getDisplayedColumnsForRow(t,this.displayedColumnsLeft):this.displayedColumnsLeft}getDisplayedRightColumnsForRow(t){return this.colSpanActive?this.getDisplayedColumnsForRow(t,this.displayedColumnsRight):this.displayedColumnsRight}isColSpanActive(){return this.colSpanActive}getDisplayedColumnsForRow(t,e,i,o){let r=[],n=null;for(let s=0;s<e.length;s++){let a=e[s],l=e.length-s,d=Math.min(a.getColSpan(t),l),c=[a];if(d>1){let h=d-1;for(let p=1;p<=h;p++)c.push(e[s+p]);s+=h}let u;i?(u=!1,c.forEach(h=>{i(h)&&(u=!0)})):u=!0,u&&(r.length===0&&n&&(o&&o(a))&&r.push(n),r.push(a)),n=a}return r}getViewportCenterColumnsForRow(t){if(!this.colSpanActive)return this.viewportColumnsCenter;let e=o=>{let r=o.getLeft();return T(r)&&r>this.viewportLeft},i=this.isColumnVirtualisationSuppressed()?null:this.isColumnInRowViewport.bind(this);return this.getDisplayedColumnsForRow(t,this.displayedColumnsCenter,i,e)}isColumnAtEdge(t,e){let i=this.getAllDisplayedColumns();if(!i.length)return!1;let o=e==="first",r;if(t instanceof ft){let n=t.getDisplayedLeafColumns();if(!n.length)return!1;r=o?n[0]:be(n)}else r=t;return(o?i[0]:be(i))===r}getAriaColumnIndex(t){let e;return t instanceof ft?e=t.getLeafColumns()[0]:e=t,this.ariaOrderColumns.indexOf(e)+1}isColumnInHeaderViewport(t){return t.isAutoHeaderHeight()?!0:this.isColumnInRowViewport(t)}isColumnInRowViewport(t){if(t.isAutoHeight())return!0;let e=t.getLeft()||0,i=e+t.getActualWidth(),o=this.viewportLeft-200,r=this.viewportRight+200,n=e<o&&i<o,s=e>r&&i>r;return!n&&!s}getDisplayedColumnsLeftWidth(){return this.getWidthOfColsInList(this.displayedColumnsLeft)}getDisplayedColumnsRightWidth(){return this.getWidthOfColsInList(this.displayedColumnsRight)}updatePrimaryColumnList(t,e,i,o,r,n){if(!t||Mi(t))return;let s=!1;if(t.forEach(l=>{if(!l)return;let d=this.getPrimaryColumn(l);if(d){if(i){if(e.indexOf(d)>=0)return;e.push(d)}else{if(e.indexOf(d)<0)return;Jt(e,d)}o(d),s=!0}}),!s)return;this.autoGroupsNeedBuilding&&this.updateGridColumns(),this.updateDisplayedColumns(n);let a={type:r,columns:e,column:e.length===1?e[0]:null,source:n};this.eventService.dispatchEvent(a)}setRowGroupColumns(t,e){this.autoGroupsNeedBuilding=!0,this.setPrimaryColumnList(t,this.rowGroupColumns,f.EVENT_COLUMN_ROW_GROUP_CHANGED,!0,this.setRowGroupActive.bind(this),e)}setRowGroupActive(t,e,i){t!==e.isRowGroupActive()&&(e.setRowGroupActive(t,i),t&&!this.gos.get("suppressRowGroupHidesColumns")&&this.setColumnsVisible([e],!1,i),!t&&!this.gos.get("suppressMakeColumnVisibleAfterUnGroup")&&this.setColumnsVisible([e],!0,i))}addRowGroupColumns(t,e){this.autoGroupsNeedBuilding=!0,this.updatePrimaryColumnList(t,this.rowGroupColumns,!0,this.setRowGroupActive.bind(this,!0),f.EVENT_COLUMN_ROW_GROUP_CHANGED,e)}removeRowGroupColumns(t,e){this.autoGroupsNeedBuilding=!0,this.updatePrimaryColumnList(t,this.rowGroupColumns,!1,this.setRowGroupActive.bind(this,!1),f.EVENT_COLUMN_ROW_GROUP_CHANGED,e)}addPivotColumns(t,e){this.updatePrimaryColumnList(t,this.pivotColumns,!0,i=>i.setPivotActive(!0,e),f.EVENT_COLUMN_PIVOT_CHANGED,e)}setPivotColumns(t,e){this.setPrimaryColumnList(t,this.pivotColumns,f.EVENT_COLUMN_PIVOT_CHANGED,!0,(i,o)=>{o.setPivotActive(i,e)},e)}removePivotColumns(t,e){this.updatePrimaryColumnList(t,this.pivotColumns,!1,i=>i.setPivotActive(!1,e),f.EVENT_COLUMN_PIVOT_CHANGED,e)}setPrimaryColumnList(t,e,i,o,r,n){if(!this.gridColumns)return;let s=new Map;e.forEach((a,l)=>s.set(a,l)),e.length=0,T(t)&&t.forEach(a=>{let l=this.getPrimaryColumn(a);l&&e.push(l)}),e.forEach((a,l)=>{let d=s.get(a);if(d===void 0){s.set(a,0);return}o&&d!==l||s.delete(a)}),(this.primaryColumns||[]).forEach(a=>{let l=e.indexOf(a)>=0;r(l,a)}),this.autoGroupsNeedBuilding&&this.updateGridColumns(),this.updateDisplayedColumns(n),this.dispatchColumnChangedEvent(i,[...s.keys()],n)}setValueColumns(t,e){this.setPrimaryColumnList(t,this.valueColumns,f.EVENT_COLUMN_VALUE_CHANGED,!1,this.setValueActive.bind(this),e)}setValueActive(t,e,i){if(t!==e.isValueActive()&&(e.setValueActive(t,i),t&&!e.getAggFunc()&&this.aggFuncService)){let o=this.aggFuncService.getDefaultAggFunc(e);e.setAggFunc(o)}}addValueColumns(t,e){this.updatePrimaryColumnList(t,this.valueColumns,!0,this.setValueActive.bind(this,!0),f.EVENT_COLUMN_VALUE_CHANGED,e)}removeValueColumns(t,e){this.updatePrimaryColumnList(t,this.valueColumns,!1,this.setValueActive.bind(this,!1),f.EVENT_COLUMN_VALUE_CHANGED,e)}normaliseColumnWidth(t,e){let i=t.getMinWidth();T(i)&&e<i&&(e=i);let o=t.getMaxWidth();return T(o)&&t.isGreaterThanMax(e)&&(e=o),e}getPrimaryOrGridColumn(t){return this.getPrimaryColumn(t)||this.getGridColumn(t)}setColumnWidths(t,e,i,o){let r=[];t.forEach(n=>{let s=this.getPrimaryOrGridColumn(n.key);if(!s)return;if(r.push({width:n.newWidth,ratios:[1],columns:[s]}),this.gos.get("colResizeDefault")==="shift"&&(e=!e),e){let l=this.getDisplayedColAfter(s);if(!l)return;let d=s.getActualWidth()-n.newWidth,c=l.getActualWidth()+d;r.push({width:c,ratios:[1],columns:[l]})}}),r.length!==0&&this.resizeColumnSets({resizeSets:r,finished:i,source:o})}checkMinAndMaxWidthsForSet(t){let{columns:e,width:i}=t,o=0,r=0,n=!0;e.forEach(l=>{let d=l.getMinWidth();o+=d||0;let c=l.getMaxWidth();T(c)&&c>0?r+=c:n=!1});let s=i>=o,a=!n||i<=r;return s&&a}resizeColumnSets(t){let{resizeSets:e,finished:i,source:o}=t;if(!(!e||e.every(c=>this.checkMinAndMaxWidthsForSet(c)))){if(i){let c=e&&e.length>0?e[0].columns:null;this.dispatchColumnResizedEvent(c,i,o)}return}let n=[],s=[];e.forEach(c=>{let{width:u,columns:h,ratios:p}=c,m={},C={};h.forEach(y=>s.push(y));let w=!0,b=0;for(;w;){if(b++,b>1e3){console.error("AG Grid: infinite loop in resizeColumnSets");break}w=!1;let y=[],_=0,x=u;h.forEach((D,R)=>{if(C[D.getId()])x-=m[D.getId()];else{y.push(D);let N=p[R];_+=N}});let E=1/_;y.forEach((D,R)=>{let P=R===y.length-1,N;P?N=x:(N=Math.round(p[R]*u*E),x-=N);let $=D.getMinWidth(),K=D.getMaxWidth();T($)&&N<$?(N=$,C[D.getId()]=!0,w=!0):T(K)&&K>0&&N>K&&(N=K,C[D.getId()]=!0,w=!0),m[D.getId()]=N})}h.forEach(y=>{let _=m[y.getId()];y.getActualWidth()!==_&&(y.setActualWidth(_,o),n.push(y))})});let a=n.length>0,l=[];a&&(l=this.refreshFlexedColumns({resizingCols:s,skipSetLeft:!0}),this.setLeftValues(o),this.updateBodyWidths(),this.checkViewportColumns());let d=s.concat(l);(a||i)&&this.dispatchColumnResizedEvent(d,i,o,l)}setColumnAggFunc(t,e,i){if(!t)return;let o=this.getPrimaryColumn(t);o&&(o.setAggFunc(e),this.dispatchColumnChangedEvent(f.EVENT_COLUMN_VALUE_CHANGED,[o],i))}moveRowGroupColumn(t,e,i){if(this.isRowGroupEmpty())return;let o=this.rowGroupColumns[t],r=this.rowGroupColumns.slice(t,e);this.rowGroupColumns.splice(t,1),this.rowGroupColumns.splice(e,0,o);let n={type:f.EVENT_COLUMN_ROW_GROUP_CHANGED,columns:r,column:r.length===1?r[0]:null,source:i};this.eventService.dispatchEvent(n)}moveColumns(t,e,i,o=!0){if(!this.gridColumns)return;if(this.columnAnimationService.start(),e>this.gridColumns.length-t.length){console.warn("AG Grid: tried to insert columns in invalid location, toIndex = "+e),console.warn("AG Grid: remember that you should not count the moving columns when calculating the new index");return}let r=this.getGridColumns(t);this.doesMovePassRules(r,e)&&(rm(this.gridColumns,r,e),this.updateDisplayedColumns(i),this.dispatchColumnMovedEvent({movedColumns:r,source:i,toIndex:e,finished:o}),this.columnAnimationService.finish())}doesMovePassRules(t,e){let i=this.getProposedColumnOrder(t,e);return this.doesOrderPassRules(i)}doesOrderPassRules(t){return!(!this.doesMovePassMarryChildren(t)||!this.doesMovePassLockedPositions(t))}getProposedColumnOrder(t,e){let i=this.gridColumns.slice();return rm(i,t,e),i}sortColumnsLikeGridColumns(t){!t||t.length<=1||t.filter(i=>this.gridColumns.indexOf(i)<0).length>0||t.sort((i,o)=>{let r=this.gridColumns.indexOf(i),n=this.gridColumns.indexOf(o);return r-n})}doesMovePassLockedPositions(t){let e=0,i=!0,o=r=>r?r===!0||r==="left"?0:2:1;return t.forEach(r=>{let n=o(r.getColDef().lockPosition);n<e&&(i=!1),e=n}),i}doesMovePassMarryChildren(t){let e=!0;return ko(null,this.gridBalancedTree,i=>{if(!(i instanceof ot))return;let o=i,r=o.getColGroupDef();if(!(r&&r.marryChildren))return;let s=[];o.getLeafColumns().forEach(u=>{let h=t.indexOf(u);s.push(h)});let a=Math.max.apply(Math,s),l=Math.min.apply(Math,s),d=a-l,c=o.getLeafColumns().length-1;d>c&&(e=!1)}),e}moveColumnByIndex(t,e,i){if(!this.gridColumns)return;let o=this.gridColumns[t];this.moveColumns([o],e,i)}getColumnDefs(){if(!this.primaryColumns)return;let t=this.primaryColumns.slice();return this.gridColsArePrimary?t.sort((e,i)=>this.gridColumns.indexOf(e)-this.gridColumns.indexOf(i)):this.lastPrimaryOrder&&t.sort((e,i)=>this.lastPrimaryOrder.indexOf(e)-this.lastPrimaryOrder.indexOf(i)),this.columnDefFactory.buildColumnDefs(t,this.rowGroupColumns,this.pivotColumns)}getBodyContainerWidth(){return this.bodyWidth}getContainerWidth(t){switch(t){case"left":return this.leftWidth;case"right":return this.rightWidth;default:return this.bodyWidth}}updateBodyWidths(){let t=this.getWidthOfColsInList(this.displayedColumnsCenter),e=this.getWidthOfColsInList(this.displayedColumnsLeft),i=this.getWidthOfColsInList(this.displayedColumnsRight);if(this.bodyWidthDirty=this.bodyWidth!==t,this.bodyWidth!==t||this.leftWidth!==e||this.rightWidth!==i){this.bodyWidth=t,this.leftWidth=e,this.rightWidth=i;let r={type:f.EVENT_COLUMN_CONTAINER_WIDTH_CHANGED};this.eventService.dispatchEvent(r);let n={type:f.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED};this.eventService.dispatchEvent(n)}}getValueColumns(){return this.valueColumns?this.valueColumns:[]}getPivotColumns(){return this.pivotColumns?this.pivotColumns:[]}isPivotActive(){return this.pivotColumns&&this.pivotColumns.length>0&&this.pivotMode}getRowGroupColumns(){return this.rowGroupColumns?this.rowGroupColumns:[]}getDisplayedCenterColumns(){return this.displayedColumnsCenter}getDisplayedLeftColumns(){return this.displayedColumnsLeft}getDisplayedRightColumns(){return this.displayedColumnsRight}getAllPrimaryColumns(){return this.primaryColumns?this.primaryColumns:null}getSecondaryColumns(){return this.secondaryColumns?this.secondaryColumns:null}getAllColumnsForQuickFilter(){return this.columnsForQuickFilter}getAllGridColumns(){var t;return(t=this.gridColumns)!=null?t:[]}isRowGroupEmpty(){return Mi(this.rowGroupColumns)}setColumnsVisible(t,e=!1,i){this.applyColumnState({state:t.map(o=>({colId:typeof o=="string"?o:o.getColId(),hide:!e}))},i)}setColumnsPinned(t,e,i){if(!this.gridColumns)return;if(this.gos.isDomLayout("print")){console.warn("AG Grid: Changing the column pinning status is not allowed with domLayout='print'");return}this.columnAnimationService.start();let o;e===!0||e==="left"?o="left":e==="right"?o="right":o=null,this.actionOnGridColumns(t,r=>r.getPinned()!==o?(r.setPinned(o),!0):!1,i,()=>({type:f.EVENT_COLUMN_PINNED,pinned:o,column:null,columns:null,source:i})),this.columnAnimationService.finish()}actionOnGridColumns(t,e,i,o){if(Mi(t))return;let r=[];if(t.forEach(n=>{if(!n)return;let s=this.getGridColumn(n);if(!s)return;e(s)!==!1&&r.push(s)}),!!r.length&&(this.updateDisplayedColumns(i),T(o)&&o)){let n=o();n.columns=r,n.column=r.length===1?r[0]:null,this.eventService.dispatchEvent(n)}}getDisplayedColBefore(t){let e=this.getAllDisplayedColumns(),i=e.indexOf(t);return i>0?e[i-1]:null}getDisplayedColAfter(t){let e=this.getAllDisplayedColumns(),i=e.indexOf(t);return i<e.length-1?e[i+1]:null}getDisplayedGroupAtDirection(t,e){let i=t.getProvidedColumnGroup().getLevel()+t.getPaddingLevel(),o=t.getDisplayedLeafColumns(),r=e==="After"?be(o):o[0],n=`getDisplayedCol${e}`;for(;;){let s=this[n](r);if(!s)return null;let a=this.getColumnGroupAtLevel(s,i);if(a!==t)return a}}getColumnGroupAtLevel(t,e){let i=t.getParent(),o,r;for(;o=i.getProvidedColumnGroup().getLevel(),r=i.getPaddingLevel(),!(o+r<=e);)i=i.getParent();return i}isPinningLeft(){return this.displayedColumnsLeft.length>0}isPinningRight(){return this.displayedColumnsRight.length>0}getPrimaryAndSecondaryAndAutoColumns(){return[].concat(this.primaryColumns||[],this.groupAutoColumns||[],this.secondaryColumns||[])}createStateItemFromColumn(t){let e=t.isRowGroupActive()?this.rowGroupColumns.indexOf(t):null,i=t.isPivotActive()?this.pivotColumns.indexOf(t):null,o=t.isValueActive()?t.getAggFunc():null,r=t.getSort()!=null?t.getSort():null,n=t.getSortIndex()!=null?t.getSortIndex():null,s=t.getFlex()!=null&&t.getFlex()>0?t.getFlex():null;return{colId:t.getColId(),width:t.getActualWidth(),hide:!t.isVisible(),pinned:t.getPinned(),sort:r,sortIndex:n,aggFunc:o,rowGroup:t.isRowGroupActive(),rowGroupIndex:e,pivot:t.isPivotActive(),pivotIndex:i,flex:s}}getColumnState(){if(X(this.primaryColumns)||!this.isAlive())return[];let e=this.getPrimaryAndSecondaryAndAutoColumns().map(this.createStateItemFromColumn.bind(this));return this.orderColumnStateList(e),e}orderColumnStateList(t){let e=_r(this.gridColumns.map((i,o)=>[i.getColId(),o]));t.sort((i,o)=>{let r=e.has(i.colId)?e.get(i.colId):-1,n=e.has(o.colId)?e.get(o.colId):-1;return r-n})}resetColumnState(t){if(Mi(this.primaryColumns))return;let e=this.getColumnsFromTree(this.primaryColumnTree),i=[],o=1e3,r=1e3,n=[];this.groupAutoColumns&&(n=n.concat(this.groupAutoColumns)),e&&(n=n.concat(e)),n.forEach(s=>{let a=this.getColumnStateFromColDef(s);X(a.rowGroupIndex)&&a.rowGroup&&(a.rowGroupIndex=o++),X(a.pivotIndex)&&a.pivot&&(a.pivotIndex=r++),i.push(a)}),this.applyColumnState({state:i,applyOrder:!0},t)}getColumnStateFromColDef(t){let e=(m,C)=>m??C??null,i=t.getColDef(),o=e(i.sort,i.initialSort),r=e(i.sortIndex,i.initialSortIndex),n=e(i.hide,i.initialHide),s=e(i.pinned,i.initialPinned),a=e(i.width,i.initialWidth),l=e(i.flex,i.initialFlex),d=e(i.rowGroupIndex,i.initialRowGroupIndex),c=e(i.rowGroup,i.initialRowGroup);d==null&&(c==null||c==!1)&&(d=null,c=null);let u=e(i.pivotIndex,i.initialPivotIndex),h=e(i.pivot,i.initialPivot);u==null&&(h==null||h==!1)&&(u=null,h=null);let p=e(i.aggFunc,i.initialAggFunc);return{colId:t.getColId(),sort:o,sortIndex:r,hide:n,pinned:s,width:a,flex:l,rowGroup:c,rowGroupIndex:d,pivot:h,pivotIndex:u,aggFunc:p}}applyColumnState(t,e){if(Mi(this.primaryColumns))return!1;if(t&&t.state&&!t.state.forEach)return console.warn("AG Grid: applyColumnState() - the state attribute should be an array, however an array was not found. Please provide an array of items (one for each col you want to change) for state."),!1;let i=(n,s,a)=>{let l=this.compareColumnStatesAndDispatchEvents(e);this.autoGroupsNeedBuilding=!0;let d=s.slice(),c={},u={},h=[],p=[],m=0,C=this.rowGroupColumns.slice(),w=this.pivotColumns.slice();n.forEach(x=>{let E=x.colId||"";if(E.startsWith(Zs)){h.push(x),p.push(x);return}let R=a(E);R?(this.syncColumnWithStateItem(R,x,t.defaultState,c,u,!1,e),Jt(d,R)):(p.push(x),m+=1)});let b=x=>this.syncColumnWithStateItem(x,null,t.defaultState,c,u,!1,e);d.forEach(b);let y=(x,E,D,R)=>{let P=x[D.getId()],N=x[R.getId()],$=P!=null,K=N!=null;if($&&K)return P-N;if($)return-1;if(K)return 1;let ae=E.indexOf(D),Ne=E.indexOf(R),At=ae>=0,Ie=Ne>=0;return At&&Ie?ae-Ne:At?-1:1};this.rowGroupColumns.sort(y.bind(this,c,C)),this.pivotColumns.sort(y.bind(this,u,w)),this.updateGridColumns();let _=this.groupAutoColumns?this.groupAutoColumns.slice():[];return h.forEach(x=>{let E=this.getAutoColumn(x.colId);Jt(_,E),this.syncColumnWithStateItem(E,x,t.defaultState,null,null,!0,e)}),_.forEach(b),this.applyOrderAfterApplyState(t),this.updateDisplayedColumns(e),this.dispatchEverythingChanged(e),l(),{unmatchedAndAutoStates:p,unmatchedCount:m}};this.columnAnimationService.start();let{unmatchedAndAutoStates:o,unmatchedCount:r}=i(t.state||[],this.primaryColumns||[],n=>this.getPrimaryColumn(n));return(o.length>0||T(t.defaultState))&&(r=i(o,this.secondaryColumns||[],n=>this.getSecondaryColumn(n)).unmatchedCount),this.columnAnimationService.finish(),r===0}applyOrderAfterApplyState(t){if(!t.applyOrder||!t.state)return;let e=[],i={};t.state.forEach(r=>{if(!r.colId||i[r.colId])return;let n=this.gridColumnsMap[r.colId];n&&(e.push(n),i[r.colId]=!0)});let o=0;if(this.gridColumns.forEach(r=>{let n=r.getColId();if(i[n]!=null)return;n.startsWith(Zs)?ad(e,r,o++):e.push(r)}),e=this.placeLockedColumns(e),!this.doesMovePassMarryChildren(e)){console.warn("AG Grid: Applying column order broke a group where columns should be married together. Applying new order has been discarded.");return}this.gridColumns=e}compareColumnStatesAndDispatchEvents(t){let e={rowGroupColumns:this.rowGroupColumns.slice(),pivotColumns:this.pivotColumns.slice(),valueColumns:this.valueColumns.slice()},i=this.getColumnState(),o={};return i.forEach(r=>{o[r.colId]=r}),()=>{let r=this.getPrimaryAndSecondaryAndAutoColumns(),n=(C,w,b,y)=>{let _=w.map(y),x=b.map(y);if(ho(_,x))return;let D=new Set(w);b.forEach(N=>{D.delete(N)||D.add(N)});let R=[...D],P={type:C,columns:R,column:R.length===1?R[0]:null,source:t};this.eventService.dispatchEvent(P)},s=C=>{let w=[];return r.forEach(b=>{let y=o[b.getColId()];y&&C(y,b)&&w.push(b)}),w},a=C=>C.getColId();n(f.EVENT_COLUMN_ROW_GROUP_CHANGED,e.rowGroupColumns,this.rowGroupColumns,a),n(f.EVENT_COLUMN_PIVOT_CHANGED,e.pivotColumns,this.pivotColumns,a);let d=s((C,w)=>{let b=C.aggFunc!=null,y=b!=w.isValueActive(),_=b&&C.aggFunc!=w.getAggFunc();return y||_});d.length>0&&this.dispatchColumnChangedEvent(f.EVENT_COLUMN_VALUE_CHANGED,d,t);let c=(C,w)=>C.width!=w.getActualWidth();this.dispatchColumnResizedEvent(s(c),!0,t);let u=(C,w)=>C.pinned!=w.getPinned();this.dispatchColumnPinnedEvent(s(u),t);let h=(C,w)=>C.hide==w.isVisible();this.dispatchColumnVisibleEvent(s(h),t);let m=s((C,w)=>C.sort!=w.getSort()||C.sortIndex!=w.getSortIndex());m.length>0&&this.sortController.dispatchSortChangedEvents(t,m),this.normaliseColumnMovedEventForColumnState(i,t)}}getCommonValue(t,e){if(!t||t.length==0)return;let i=e(t[0]);for(let o=1;o<t.length;o++)if(i!==e(t[o]))return;return i}normaliseColumnMovedEventForColumnState(t,e){let i=this.getColumnState(),o={};i.forEach(l=>o[l.colId]=l);let r={};t.forEach(l=>{o[l.colId]&&(r[l.colId]=!0)});let n=t.filter(l=>r[l.colId]),s=i.filter(l=>r[l.colId]),a=[];s.forEach((l,d)=>{let c=n&&n[d];if(c&&c.colId!==l.colId){let u=this.getGridColumn(c.colId);u&&a.push(u)}}),a.length&&this.dispatchColumnMovedEvent({movedColumns:a,source:e,finished:!0})}syncColumnWithStateItem(t,e,i,o,r,n,s){var a;if(!t)return;let l=(x,E)=>{let D={value1:void 0,value2:void 0},R=!1;return e&&(e[x]!==void 0&&(D.value1=e[x],R=!0),T(E)&&e[E]!==void 0&&(D.value2=e[E],R=!0)),!R&&i&&(i[x]!==void 0&&(D.value1=i[x]),T(E)&&i[E]!==void 0&&(D.value2=i[E])),D},d=l("hide").value1;d!==void 0&&t.setVisible(!d,s);let c=l("pinned").value1;c!==void 0&&t.setPinned(c);let u=(a=t.getColDef().minWidth)!=null?a:this.environment.getMinColWidth(),h=l("flex").value1;if(h!==void 0&&t.setFlex(h),h==null){let x=l("width").value1;x!=null&&u!=null&&x>=u&&t.setActualWidth(x,s)}let p=l("sort").value1;p!==void 0&&(p==="desc"||p==="asc"?t.setSort(p,s):t.setSort(void 0,s));let m=l("sortIndex").value1;if(m!==void 0&&t.setSortIndex(m),n||!t.isPrimary())return;let C=l("aggFunc").value1;C!==void 0&&(typeof C=="string"?(t.setAggFunc(C),t.isValueActive()||(t.setValueActive(!0,s),this.valueColumns.push(t))):(T(C)&&console.warn("AG Grid: stateItem.aggFunc must be a string. if using your own aggregation functions, register the functions first before using them in get/set state. This is because it is intended for the column state to be stored and retrieved as simple JSON."),t.isValueActive()&&(t.setValueActive(!1,s),Jt(this.valueColumns,t))));let{value1:w,value2:b}=l("rowGroup","rowGroupIndex");(w!==void 0||b!==void 0)&&(typeof b=="number"||w?(t.isRowGroupActive()||(t.setRowGroupActive(!0,s),this.rowGroupColumns.push(t)),o&&typeof b=="number"&&(o[t.getId()]=b)):t.isRowGroupActive()&&(t.setRowGroupActive(!1,s),Jt(this.rowGroupColumns,t)));let{value1:y,value2:_}=l("pivot","pivotIndex");(y!==void 0||_!==void 0)&&(typeof _=="number"||y?(t.isPivotActive()||(t.setPivotActive(!0,s),this.pivotColumns.push(t)),r&&typeof _=="number"&&(r[t.getId()]=_)):t.isPivotActive()&&(t.setPivotActive(!1,s),Jt(this.pivotColumns,t)))}getGridColumns(t){return this.getColumns(t,this.getGridColumn.bind(this))}getColumns(t,e){let i=[];return t&&t.forEach(o=>{let r=e(o);r&&i.push(r)}),i}getColumnWithValidation(t){if(t==null)return null;let e=this.getGridColumn(t);return e||console.warn("AG Grid: could not find column "+t),e}getPrimaryColumn(t){return this.primaryColumns?this.getColumn(t,this.primaryColumns,this.primaryColumnsMap):null}getGridColumn(t){return this.getColumn(t,this.gridColumns,this.gridColumnsMap)}lookupGridColumn(t){return this.gridColumnsMap[t]}getSecondaryColumn(t){return this.secondaryColumns?this.getColumn(t,this.secondaryColumns,this.secondaryColumnsMap):null}getColumn(t,e,i){if(!t||!i)return null;if(typeof t=="string"&&i[t])return i[t];for(let o=0;o<e.length;o++)if(this.columnsMatch(e[o],t))return e[o];return this.getAutoColumn(t)}getSourceColumnsForGroupColumn(t){let e=t.getColDef().showRowGroup;if(!e)return null;if(e===!0)return this.rowGroupColumns.slice(0);let i=this.getPrimaryColumn(e);return i?[i]:null}getAutoColumn(t){return!this.groupAutoColumns||!T(this.groupAutoColumns)||X(this.groupAutoColumns)?null:this.groupAutoColumns.find(e=>this.columnsMatch(e,t))||null}columnsMatch(t,e){let i=t===e,o=t.getColDef()===e,r=t.getColId()==e;return i||o||r}getDisplayNameForColumn(t,e,i=!1){if(!t)return null;let o=this.getHeaderName(t.getColDef(),t,null,null,e);return i?this.wrapHeaderNameWithAggFunc(t,o):o}getDisplayNameForProvidedColumnGroup(t,e,i){let o=e?e.getColGroupDef():null;return o?this.getHeaderName(o,null,t,e,i):null}getDisplayNameForColumnGroup(t,e){return this.getDisplayNameForProvidedColumnGroup(t,t.getProvidedColumnGroup(),e)}getHeaderName(t,e,i,o,r){let n=t.headerValueGetter;if(n){let s=this.gos.addGridCommonParams({colDef:t,column:e,columnGroup:i,providedColumnGroup:o,location:r});return typeof n=="function"?n(s):typeof n=="string"?this.expressionService.evaluate(n,s):(console.warn("AG Grid: headerValueGetter must be a function or a string"),"")}else{if(t.headerName!=null)return t.headerName;if(t.field)return vx(t.field)}return""}wrapHeaderNameWithAggFunc(t,e){if(this.gos.get("suppressAggFuncInHeader"))return e;let i=t.getColDef().pivotValueColumn,o=T(i),r=null,n;if(o){let s=this.gos.get("removePivotHeaderRowWhenSingleValueColumn")&&this.valueColumns.length===1,a=t.getColDef().pivotTotalColumnIds!==void 0;if(s&&!a)return e;r=i?i.getAggFunc():null,n=!0}else{let s=t.isValueActive(),a=this.pivotMode||!this.isRowGroupEmpty();s&&a?(r=t.getAggFunc(),n=!0):n=!1}if(n){let s=typeof r=="string"?r:"func";return`${this.localeService.getLocaleTextFunc()(s,s)}(${e})`}return e}getColumnGroup(t,e){if(!t)return null;if(t instanceof ft)return t;let i=this.getAllDisplayedTrees(),o=typeof e=="number",r=null;return mn(i,!1,n=>{if(n instanceof ft){let s=n,a;o?a=t===s.getGroupId()&&e===s.getPartId():a=t===s.getGroupId(),a&&(r=s)}}),r}isReady(){return this.ready}extractValueColumns(t,e){this.valueColumns=this.extractColumns(e,this.valueColumns,(i,o)=>i.setValueActive(o,t),()=>{},()=>{},i=>{let o=i.aggFunc;if(o===null||o==="")return null;if(o!==void 0)return!!o},i=>i.initialAggFunc!=null&&i.initialAggFunc!=""),this.valueColumns.forEach(i=>{let o=i.getColDef();o.aggFunc!=null&&o.aggFunc!=""?i.setAggFunc(o.aggFunc):i.getAggFunc()||i.setAggFunc(o.initialAggFunc)})}extractRowGroupColumns(t,e){this.rowGroupColumns=this.extractColumns(e,this.rowGroupColumns,(i,o)=>i.setRowGroupActive(o,t),i=>i.rowGroupIndex,i=>i.initialRowGroupIndex,i=>i.rowGroup,i=>i.initialRowGroup)}extractColumns(t=[],e=[],i,o,r,n,s){let a=[],l=[];(this.primaryColumns||[]).forEach(u=>{let h=t.indexOf(u)<0,p=u.getColDef(),m=Yu(n(p)),C=Yu(s(p)),w=Er(o(p)),b=Er(r(p)),y;m!==void 0?y=m:w!==void 0?w===null?y=!1:y=w>=0:h?C!==void 0?y=C:b!==void 0?y=b!=null&&b>=0:y=!1:y=e.indexOf(u)>=0,y&&((h?w!=null||b!=null:w!=null)?a.push(u):l.push(u))});let d=u=>{let h=o(u.getColDef()),p=r(u.getColDef());return h??p};a.sort((u,h)=>{let p=d(u),m=d(h);return p===m?0:p<m?-1:1});let c=[].concat(a);return e.forEach(u=>{l.indexOf(u)>=0&&c.push(u)}),l.forEach(u=>{c.indexOf(u)<0&&c.push(u)}),e.forEach(u=>{c.indexOf(u)<0&&i(u,!1)}),c.forEach(u=>{e.indexOf(u)<0&&i(u,!0)}),c}extractPivotColumns(t,e){this.pivotColumns=this.extractColumns(e,this.pivotColumns,(i,o)=>i.setPivotActive(o,t),i=>i.pivotIndex,i=>i.initialPivotIndex,i=>i.pivot,i=>i.initialPivot)}resetColumnGroupState(t){if(!this.primaryColumnTree)return;let e=[];ko(null,this.primaryColumnTree,i=>{if(i instanceof ot){let o=i.getColGroupDef(),r={groupId:i.getGroupId(),open:o?o.openByDefault:void 0};e.push(r)}}),this.setColumnGroupState(e,t)}getColumnGroupState(){let t=[];return ko(null,this.gridBalancedTree,e=>{e instanceof ot&&t.push({groupId:e.getGroupId(),open:e.isExpanded()})}),t}setColumnGroupState(t,e){if(!this.gridBalancedTree)return;this.columnAnimationService.start();let i=[];if(t.forEach(o=>{let r=o.groupId,n=o.open,s=this.getProvidedColumnGroup(r);s&&s.isExpanded()!==n&&(this.logger.log("columnGroupOpened("+s.getGroupId()+","+n+")"),s.setExpanded(n),i.push(s))}),this.updateGroupsAndDisplayedColumns(e),this.setFirstRightAndLastLeftPinned(e),i.length){let o={type:f.EVENT_COLUMN_GROUP_OPENED,columnGroup:ot.length===1?i[0]:void 0,columnGroups:i};this.eventService.dispatchEvent(o)}this.columnAnimationService.finish()}setColumnGroupOpened(t,e,i){let o;t instanceof ot?o=t.getId():o=t||"",this.setColumnGroupState([{groupId:o,open:e}],i)}getProvidedColumnGroup(t){typeof t!="string"&&console.error("AG Grid: group key must be a string");let e=null;return ko(null,this.gridBalancedTree,i=>{i instanceof ot&&i.getId()===t&&(e=i)}),e}calculateColumnsForDisplay(){let t;return this.pivotMode&&X(this.secondaryColumns)?t=this.gridColumns.filter(e=>{let i=this.groupAutoColumns&&wi(this.groupAutoColumns,e),o=this.valueColumns&&wi(this.valueColumns,e);return i||o}):t=this.gridColumns.filter(e=>this.groupAutoColumns&&wi(this.groupAutoColumns,e)||e.isVisible()),t}checkColSpanActiveInCols(t){let e=!1;return t.forEach(i=>{T(i.getColDef().colSpan)&&(e=!0)}),e}calculateColumnsForGroupDisplay(){this.groupDisplayColumns=[],this.groupDisplayColumnsMap={};let t=e=>{let i=e.getColDef(),o=i.showRowGroup;i&&T(o)&&(this.groupDisplayColumns.push(e),typeof o=="string"?this.groupDisplayColumnsMap[o]=e:o===!0&&this.getRowGroupColumns().forEach(r=>{this.groupDisplayColumnsMap[r.getId()]=e}))};this.gridColumns.forEach(t)}getGroupDisplayColumns(){return this.groupDisplayColumns}getGroupDisplayColumnForGroup(t){return this.groupDisplayColumnsMap[t]}updateDisplayedColumns(t){let e=this.calculateColumnsForDisplay();this.buildDisplayedTrees(e),this.updateGroupsAndDisplayedColumns(t),this.setFirstRightAndLastLeftPinned(t)}isSecondaryColumnsPresent(){return T(this.secondaryColumns)}setSecondaryColumns(t,e){if(!this.gridColumns)return;let i=t;if(!(!i&&X(this.secondaryColumns))){if(i){this.processSecondaryColumnDefinitions(t);let o=this.columnFactory.createColumnTree(t,!1,this.secondaryBalancedTree||this.previousSecondaryColumns||void 0,e);this.destroyOldColumns(this.secondaryBalancedTree,o.columnTree),this.secondaryBalancedTree=o.columnTree,this.secondaryHeaderRowCount=o.treeDept+1,this.secondaryColumns=this.getColumnsFromTree(this.secondaryBalancedTree),this.secondaryColumnsMap={},this.secondaryColumns.forEach(r=>this.secondaryColumnsMap[r.getId()]=r),this.previousSecondaryColumns=null}else this.previousSecondaryColumns=this.secondaryBalancedTree,this.secondaryBalancedTree=null,this.secondaryHeaderRowCount=-1,this.secondaryColumns=null,this.secondaryColumnsMap={};this.updateGridColumns(),this.updateDisplayedColumns(e)}}processSecondaryColumnDefinitions(t){let e=this.gos.get("processPivotResultColDef"),i=this.gos.get("processPivotResultColGroupDef");if(!e&&!i)return;let o=r=>{r.forEach(n=>{if(T(n.children)){let a=n;i&&i(a),o(a.children)}else e&&e(n)})};t&&o(t)}updateGridColumns(){let t=this.gridBalancedTree;if(this.gridColsArePrimary?this.lastPrimaryOrder=this.gridColumns:this.lastSecondaryOrder=this.gridColumns,this.createGroupAutoColumnsIfNeeded()){let o=_r(this.groupAutoColumns.map(r=>[r,!0]));this.lastPrimaryOrder&&(this.lastPrimaryOrder=this.lastPrimaryOrder.filter(r=>!o.has(r)),this.lastPrimaryOrder=[...this.groupAutoColumns,...this.lastPrimaryOrder]),this.lastSecondaryOrder&&(this.lastSecondaryOrder=this.lastSecondaryOrder.filter(r=>!o.has(r)),this.lastSecondaryOrder=[...this.groupAutoColumns,...this.lastSecondaryOrder])}let i;if(this.secondaryColumns&&this.secondaryBalancedTree){let o=this.secondaryColumns.some(r=>this.gridColumnsMap[r.getColId()]!==void 0);this.gridBalancedTree=this.secondaryBalancedTree.slice(),this.gridHeaderRowCount=this.secondaryHeaderRowCount,this.gridColumns=this.secondaryColumns.slice(),this.gridColsArePrimary=!1,o&&(i=this.lastSecondaryOrder)}else this.primaryColumns&&(this.gridBalancedTree=this.primaryColumnTree.slice(),this.gridHeaderRowCount=this.primaryHeaderRowCount,this.gridColumns=this.primaryColumns.slice(),this.gridColsArePrimary=!0,i=this.lastPrimaryOrder);if(this.addAutoGroupToGridColumns(),this.orderGridColsLike(i),this.gridColumns=this.placeLockedColumns(this.gridColumns),this.calculateColumnsForGroupDisplay(),this.refreshQuickFilterColumns(),this.clearDisplayedAndViewportColumns(),this.colSpanActive=this.checkColSpanActiveInCols(this.gridColumns),this.gridColumnsMap={},this.gridColumns.forEach(o=>this.gridColumnsMap[o.getId()]=o),this.setAutoHeightActive(),!ho(t,this.gridBalancedTree)){let o={type:f.EVENT_GRID_COLUMNS_CHANGED};this.eventService.dispatchEvent(o)}}setAutoHeightActive(){this.autoHeightActive=this.gridColumns.filter(t=>t.isAutoHeight()).length>0,this.autoHeightActive&&(this.autoHeightActiveAtLeastOnce=!0,this.gos.isRowModelType("clientSide")||this.gos.isRowModelType("serverSide")||q("autoHeight columns only work with Client Side Row Model and Server Side Row Model."))}orderGridColsLike(t){if(X(t))return;let e=_r(t.map((l,d)=>[l,d])),i=!0;if(this.gridColumns.forEach(l=>{e.has(l)&&(i=!1)}),i)return;let o=_r(this.gridColumns.map(l=>[l,!0])),r=t.filter(l=>o.has(l)),n=_r(r.map(l=>[l,!0])),s=this.gridColumns.filter(l=>!n.has(l)),a=r.slice();s.forEach(l=>{let d=l.getOriginalParent();if(!d){a.push(l);return}let c=[];for(;!c.length&&d;)d.getLeafColumns().forEach(m=>{let C=a.indexOf(m)>=0,w=c.indexOf(m)<0;C&&w&&c.push(m)}),d=d.getOriginalParent();if(!c.length){a.push(l);return}let u=c.map(p=>a.indexOf(p)),h=Math.max(...u);ad(a,l,h+1)}),this.gridColumns=a}isPrimaryColumnGroupsPresent(){return this.primaryHeaderRowCount>1}refreshQuickFilterColumns(){var t;let e=(t=this.isPivotMode()&&!this.gos.get("applyQuickFilterBeforePivotOrAgg")?this.secondaryColumns:this.primaryColumns)!=null?t:[];this.groupAutoColumns&&(e=e.concat(this.groupAutoColumns)),this.columnsForQuickFilter=this.gos.get("includeHiddenColumnsInQuickFilter")?e:e.filter(i=>i.isVisible()||i.isRowGroupActive())}placeLockedColumns(t){let e=[],i=[],o=[];return t.forEach(r=>{let n=r.getColDef().lockPosition;n==="right"?o.push(r):n==="left"||n===!0?e.push(r):i.push(r)}),[...e,...i,...o]}addAutoGroupToGridColumns(){if(X(this.groupAutoColumns)){this.destroyOldColumns(this.groupAutoColsBalancedTree),this.groupAutoColsBalancedTree=null;return}this.gridColumns=this.groupAutoColumns?this.groupAutoColumns.concat(this.gridColumns):this.gridColumns;let t=this.columnFactory.createForAutoGroups(this.groupAutoColumns,this.gridBalancedTree);this.destroyOldColumns(this.groupAutoColsBalancedTree,t),this.groupAutoColsBalancedTree=t,this.gridBalancedTree=t.concat(this.gridBalancedTree)}clearDisplayedAndViewportColumns(){this.viewportRowLeft={},this.viewportRowRight={},this.viewportRowCenter={},this.displayedColumnsLeft=[],this.displayedColumnsRight=[],this.displayedColumnsCenter=[],this.displayedColumns=[],this.ariaOrderColumns=[],this.viewportColumns=[],this.headerViewportColumns=[],this.viewportColumnsHash=""}updateGroupsAndDisplayedColumns(t){this.updateOpenClosedVisibilityInColumnGroups(),this.deriveDisplayedColumns(t),this.refreshFlexedColumns(),this.extractViewport(),this.updateBodyWidths();let e={type:f.EVENT_DISPLAYED_COLUMNS_CHANGED};this.eventService.dispatchEvent(e)}deriveDisplayedColumns(t){this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeLeft,this.displayedColumnsLeft),this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeCentre,this.displayedColumnsCenter),this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeRight,this.displayedColumnsRight),this.joinColumnsAriaOrder(),this.joinDisplayedColumns(),this.setLeftValues(t),this.displayedAutoHeightCols=this.displayedColumns.filter(e=>e.isAutoHeight())}isAutoRowHeightActive(){return this.autoHeightActive}wasAutoRowHeightEverActive(){return this.autoHeightActiveAtLeastOnce}joinColumnsAriaOrder(){let t=this.getAllGridColumns(),e=[],i=[],o=[];for(let r of t){let n=r.getPinned();n?n===!0||n==="left"?e.push(r):o.push(r):i.push(r)}this.ariaOrderColumns=e.concat(i).concat(o)}joinDisplayedColumns(){this.gos.get("enableRtl")?this.displayedColumns=this.displayedColumnsRight.concat(this.displayedColumnsCenter).concat(this.displayedColumnsLeft):this.displayedColumns=this.displayedColumnsLeft.concat(this.displayedColumnsCenter).concat(this.displayedColumnsRight)}setLeftValues(t){this.setLeftValuesOfColumns(t),this.setLeftValuesOfGroups()}setLeftValuesOfColumns(t){if(!this.primaryColumns)return;let e=this.getPrimaryAndSecondaryAndAutoColumns().slice(0),i=this.gos.get("enableRtl");[this.displayedColumnsLeft,this.displayedColumnsRight,this.displayedColumnsCenter].forEach(o=>{if(i){let r=this.getWidthOfColsInList(o);o.forEach(n=>{r-=n.getActualWidth(),n.setLeft(r,t)})}else{let r=0;o.forEach(n=>{n.setLeft(r,t),r+=n.getActualWidth()})}ax(e,o)}),e.forEach(o=>{o.setLeft(null,t)})}setLeftValuesOfGroups(){[this.displayedTreeLeft,this.displayedTreeRight,this.displayedTreeCentre].forEach(t=>{t.forEach(e=>{e instanceof ft&&e.checkLeft()})})}derivedDisplayedColumnsFromDisplayedTree(t,e){e.length=0,mn(t,!0,i=>{i instanceof ke&&e.push(i)})}isColumnVirtualisationSuppressed(){return this.suppressColumnVirtualisation||this.viewportRight===0}extractViewportColumns(){this.isColumnVirtualisationSuppressed()?(this.viewportColumnsCenter=this.displayedColumnsCenter,this.headerViewportColumnsCenter=this.displayedColumnsCenter):(this.viewportColumnsCenter=this.displayedColumnsCenter.filter(this.isColumnInRowViewport.bind(this)),this.headerViewportColumnsCenter=this.displayedColumnsCenter.filter(this.isColumnInHeaderViewport.bind(this))),this.viewportColumns=this.viewportColumnsCenter.concat(this.displayedColumnsLeft).concat(this.displayedColumnsRight),this.headerViewportColumns=this.headerViewportColumnsCenter.concat(this.displayedColumnsLeft).concat(this.displayedColumnsRight)}getVirtualHeaderGroupRow(t,e){let i;switch(t){case"left":i=this.viewportRowLeft[e];break;case"right":i=this.viewportRowRight[e];break;default:i=this.viewportRowCenter[e];break}return X(i)&&(i=[]),i}calculateHeaderRows(){this.viewportRowLeft={},this.viewportRowRight={},this.viewportRowCenter={};let t={};this.headerViewportColumns.forEach(i=>t[i.getId()]=!0);let e=(i,o,r)=>{let n=!1;for(let s=0;s<i.length;s++){let a=i[s],l=!1;if(a instanceof ke)l=t[a.getId()]===!0;else{let c=a.getDisplayedChildren();c&&(l=e(c,o,r+1))}l&&(n=!0,o[r]||(o[r]=[]),o[r].push(a))}return n};e(this.displayedTreeLeft,this.viewportRowLeft,0),e(this.displayedTreeRight,this.viewportRowRight,0),e(this.displayedTreeCentre,this.viewportRowCenter,0)}extractViewport(){let t=o=>`${o.getId()}-${o.getPinned()||"normal"}`;this.extractViewportColumns();let e=this.viewportColumns.map(t).join("#"),i=this.viewportColumnsHash!==e;return i&&(this.viewportColumnsHash=e,this.calculateHeaderRows()),i}refreshFlexedColumns(t={}){var e;let i=t.source?t.source:"flex";if(t.viewportWidth!=null&&(this.flexViewportWidth=t.viewportWidth),!this.flexViewportWidth)return[];let o=-1;if(t.resizingCols){let h=new Set(t.resizingCols),p=this.displayedColumnsCenter;for(let m=p.length-1;m>=0;m--)if(h.has(p[m])){o=m;break}}let r=0,n=[],s=0,a=0;for(let h=0;h<this.displayedColumnsCenter.length;h++)this.displayedColumnsCenter[h].getFlex()&&h>o?(n.push(this.displayedColumnsCenter[h]),a+=this.displayedColumnsCenter[h].getFlex(),s+=(e=this.displayedColumnsCenter[h].getMinWidth())!=null?e:0):r+=this.displayedColumnsCenter[h].getActualWidth();if(!n.length)return[];let l=[];r+s>this.flexViewportWidth&&(n.forEach(h=>{var p;return h.setActualWidth((p=h.getMinWidth())!=null?p:0,i)}),l=n,n=[]);let d=[],c;e:for(;;){c=this.flexViewportWidth-r;let h=c/a;for(let p=0;p<n.length;p++){let m=n[p],C=h*m.getFlex(),w=0,b=m.getMinWidth(),y=m.getMaxWidth();if(T(b)&&C<b?w=b:T(y)&&C>y&&(w=y),w){m.setActualWidth(w,i),Im(n,m),a-=m.getFlex(),l.push(m),r+=m.getActualWidth();continue e}d[p]=Math.round(C)}break}let u=c;return n.forEach((h,p)=>{h.setActualWidth(Math.min(d[p],u),i),l.push(h),u-=d[p]}),t.skipSetLeft||this.setLeftValues(i),t.updateBodyWidths&&this.updateBodyWidths(),t.fireResizedEvent&&this.dispatchColumnResizedEvent(l,!0,i,n),n}sizeColumnsToFit(t,e="sizeColumnsToFit",i,o){var r,n,s,a,l;if(this.shouldQueueResizeOperations){this.resizeOperationQueue.push(()=>this.sizeColumnsToFit(t,e,i,o));return}let d={};o&&((r=o?.columnLimits)==null||r.forEach(b=>{var y=b,{key:_}=y,x=rF(y,["key"]);d[typeof _=="string"?_:_.getColId()]=x}));let c=this.getAllDisplayedColumns(),u=t===this.getWidthOfColsInList(c);if(t<=0||!c.length||u)return;let h=[],p=[];c.forEach(b=>{b.getColDef().suppressSizeToFit===!0?p.push(b):h.push(b)});let m=h.slice(0),C=!1,w=b=>{Jt(h,b),p.push(b)};for(h.forEach(b=>{var y,_;b.resetActualWidth(e);let x=d?.[b.getId()],E=(y=x?.minWidth)!=null?y:o?.defaultMinWidth,D=(_=x?.maxWidth)!=null?_:o?.defaultMaxWidth,R=b.getActualWidth();typeof E=="number"&&R<E?b.setActualWidth(E,e,!0):typeof D=="number"&&R>D&&b.setActualWidth(D,e,!0)});!C;){C=!0;let b=t-this.getWidthOfColsInList(p);if(b<=0)h.forEach(y=>{var _,x;let E=(x=(_=d?.[y.getId()])==null?void 0:_.minWidth)!=null?x:o?.defaultMinWidth;if(typeof E=="number"){y.setActualWidth(E,e,!0);return}y.setMinimum(e)});else{let y=b/this.getWidthOfColsInList(h),_=b;for(let x=h.length-1;x>=0;x--){let E=h[x],D=d?.[E.getId()],R=(n=D?.minWidth)!=null?n:o?.defaultMinWidth,P=(s=D?.maxWidth)!=null?s:o?.defaultMaxWidth,N=(a=E.getMinWidth())!=null?a:0,$=(l=E.getMaxWidth())!=null?l:Number.MAX_VALUE,K=typeof R=="number"&&R>N?R:E.getMinWidth(),ae=typeof P=="number"&&P<$?P:E.getMaxWidth(),Ne=Math.round(E.getActualWidth()*y);T(K)&&Ne<K?(Ne=K,w(E),C=!1):T(ae)&&Ne>ae?(Ne=ae,w(E),C=!1):x===0&&(Ne=_),E.setActualWidth(Ne,e,!0),_-=Ne}}}m.forEach(b=>{b.fireColumnWidthChangedEvent(e)}),this.setLeftValues(e),this.updateBodyWidths(),!i&&this.dispatchColumnResizedEvent(m,!0,e)}buildDisplayedTrees(t){let e=[],i=[],o=[];t.forEach(n=>{switch(n.getPinned()){case"left":e.push(n);break;case"right":i.push(n);break;default:o.push(n);break}});let r=new fx;this.displayedTreeLeft=this.displayedGroupCreator.createDisplayedGroups(e,r,"left",this.displayedTreeLeft),this.displayedTreeRight=this.displayedGroupCreator.createDisplayedGroups(i,r,"right",this.displayedTreeRight),this.displayedTreeCentre=this.displayedGroupCreator.createDisplayedGroups(o,r,null,this.displayedTreeCentre),this.updateDisplayedMap()}updateDisplayedMap(){this.displayedColumnsAndGroupsMap={};let t=e=>{this.displayedColumnsAndGroupsMap[e.getUniqueId()]=e};mn(this.displayedTreeCentre,!1,t),mn(this.displayedTreeLeft,!1,t),mn(this.displayedTreeRight,!1,t)}isDisplayed(t){return this.displayedColumnsAndGroupsMap[t.getUniqueId()]===t}updateOpenClosedVisibilityInColumnGroups(){let t=this.getAllDisplayedTrees();mn(t,!1,e=>{e instanceof ft&&e.calculateDisplayedColumns()})}getGroupAutoColumns(){return this.groupAutoColumns}createGroupAutoColumnsIfNeeded(){let t=this.forceRecreateAutoGroups;if(this.forceRecreateAutoGroups=!1,!this.autoGroupsNeedBuilding)return!1;this.autoGroupsNeedBuilding=!1;let e=this.gos.isGroupUseEntireRow(this.pivotMode),i=this.pivotMode?this.gos.get("pivotSuppressAutoColumn"):this.isGroupSuppressAutoColumn();if((this.rowGroupColumns.length>0||this.gos.get("treeData"))&&!i&&!e){let n=this.autoGroupColService.createAutoGroupColumns(this.rowGroupColumns);if(!this.autoColsEqual(n,this.groupAutoColumns)||t)return this.groupAutoColumns=n,!0}else this.groupAutoColumns=null;return!1}isGroupSuppressAutoColumn(){return this.gos.get("groupDisplayType")==="custom"?!0:this.gos.get("treeDataDisplayType")==="custom"}autoColsEqual(t,e){return ho(t,e,(i,o)=>i.getColId()===o.getColId())}getWidthOfColsInList(t){return t.reduce((e,i)=>e+i.getActualWidth(),0)}getFirstDisplayedColumn(){let t=this.gos.get("enableRtl"),e=["getDisplayedLeftColumns","getDisplayedCenterColumns","getDisplayedRightColumns"];t&&e.reverse();for(let i=0;i<e.length;i++){let o=this[e[i]]();if(o.length)return t?be(o):o[0]}return null}setColumnHeaderHeight(t,e){if(t.setAutoHeaderHeight(e)){let o={type:f.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,column:t,columns:[t],source:"autosizeColumnHeaderHeight"};this.eventService.dispatchEvent(o)}}getColumnGroupHeaderRowHeight(){return this.isPivotMode()?this.getPivotGroupHeaderHeight():this.getGroupHeaderHeight()}getColumnHeaderRowHeight(){let t=this.isPivotMode()?this.getPivotHeaderHeight():this.getHeaderHeight(),e=this.getAllDisplayedColumns().filter(i=>i.isAutoHeaderHeight()).map(i=>i.getAutoHeaderHeight()||0);return Math.max(t,...e)}getHeaderHeight(){var t;return(t=this.gos.get("headerHeight"))!=null?t:this.environment.getFromTheme(25,"headerHeight")}getFloatingFiltersHeight(){var t;return(t=this.gos.get("floatingFiltersHeight"))!=null?t:this.getHeaderHeight()}getGroupHeaderHeight(){var t;return(t=this.gos.get("groupHeaderHeight"))!=null?t:this.getHeaderHeight()}getPivotHeaderHeight(){var t;return(t=this.gos.get("pivotHeaderHeight"))!=null?t:this.getHeaderHeight()}getPivotGroupHeaderHeight(){var t;return(t=this.gos.get("pivotGroupHeaderHeight"))!=null?t:this.getGroupHeaderHeight()}queueResizeOperations(){this.shouldQueueResizeOperations=!0}processResizeOperations(){this.shouldQueueResizeOperations=!1,this.resizeOperationQueue.forEach(t=>t()),this.resizeOperationQueue=[]}resetColumnDefIntoColumn(t,e){let i=t.getUserProvidedColDef();if(!i)return!1;let o=this.columnFactory.addColumnDefaultAndTypes(i,t.getColId());return t.setColDef(o,i,e),!0}isColumnGroupingLocked(t){let e=this.gos.get("groupLockGroupColumns");if(!t.isRowGroupActive()||e===0)return!1;if(e===-1)return!0;let i=this.rowGroupColumns.findIndex(o=>o.getColId()===t.getColId());return e>i}generateColumnStateForRowGroupAndPivotIndexes(t,e){let i={},o=(r,n,s,a,l,d)=>{if(!n.length||!this.primaryColumns)return[];let c=Object.keys(r),u=new Set(c),h=new Set(c),p=new Set(n.map(E=>{let D=E.getColId();return h.delete(D),D}).concat(c)),m=[],C={},w=0;for(let E=0;E<this.primaryColumns.length;E++){let D=this.primaryColumns[E].getColId();p.has(D)&&(m.push(D),C[D]=w++)}let b=1e3,y=!1,_=0,x=E=>{let D=C[E];for(let R=_;R<D;R++){let P=m[R];h.has(P)&&(r[P][l]=b++,h.delete(P))}_=D};n.forEach(E=>{let D=E.getColId();if(u.has(D))x(D),r[D][l]=b++;else{let R=E.getColDef();(R[l]===null||R[l]===void 0&&R[d]==null)&&(y||(R[s]||R[s]===void 0&&R[a]?x(D):(h.forEach($=>{r[$][l]=b+C[$]}),b+=m.length,y=!0)),i[D]||(i[D]={colId:D}),i[D][l]=b++)}})};return o(t,this.rowGroupColumns,"rowGroup","initialRowGroup","rowGroupIndex","initialRowGroupIndex"),o(e,this.pivotColumns,"pivot","initialPivot","pivotIndex","initialPivotIndex"),Object.values(i)}onColumnsReady(){let t=this.gos.get("autoSizeStrategy");if(!t)return;let{type:e}=t;setTimeout(()=>{if(e==="fitGridWidth"){let{columnLimits:i,defaultMinWidth:o,defaultMaxWidth:r}=t,n=i?.map(({colId:s,minWidth:a,maxWidth:l})=>({key:s,minWidth:a,maxWidth:l}));this.ctrlsService.getGridBodyCtrl().sizeColumnsToFit({defaultMinWidth:o,defaultMaxWidth:r,columnLimits:n})}else e==="fitProvidedWidth"&&this.sizeColumnsToFit(t.width,"sizeColumnsToFit")})}onFirstDataRendered(){let t=this.gos.get("autoSizeStrategy");if(t?.type!=="fitCellContents")return;let{colIds:e,skipHeader:i}=t;setTimeout(()=>{e?this.autoSizeColumns({columns:e,skipHeader:i,source:"autosizeColumns"}):this.autoSizeAllColumns("autosizeColumns",i)})}};g([v("expressionService")],xt.prototype,"expressionService",2);g([v("columnFactory")],xt.prototype,"columnFactory",2);g([v("displayedGroupCreator")],xt.prototype,"displayedGroupCreator",2);g([v("ctrlsService")],xt.prototype,"ctrlsService",2);g([v("autoWidthCalculator")],xt.prototype,"autoWidthCalculator",2);g([v("columnAnimationService")],xt.prototype,"columnAnimationService",2);g([v("autoGroupColService")],xt.prototype,"autoGroupColService",2);g([v("valueCache")],xt.prototype,"valueCache",2);g([v("animationFrameService")],xt.prototype,"animationFrameService",2);g([v("sortController")],xt.prototype,"sortController",2);g([v("columnDefFactory")],xt.prototype,"columnDefFactory",2);g([Re("aggFuncService")],xt.prototype,"aggFuncService",2);g([I],xt.prototype,"init",1);g([Kt],xt.prototype,"destroyColumns",1);g([ji(0,Ti("loggerFactory"))],xt.prototype,"setBeans",1);xt=g([V("columnModel")],xt);function qs(t){return t==="gridOptionsUpdated"?"gridOptionsChanged":t}function mn(t,e,i){if(t)for(let o=0;o<t.length;o++){let r=t[o];if(r instanceof ft){let n=e?r.getDisplayedChildren():r.getChildren();mn(n,e,i)}i(r)}}var sm=class extends A{createDisplayedGroups(t,e,i,o){let r=this.mapOldGroupsById(o),n=[],s=t;for(;s.length;){let a=s;s=[];let l=0,d=c=>{let u=l;l=c;let h=a[u],m=(h instanceof ft?h.getProvidedColumnGroup():h).getOriginalParent();if(m==null){for(let w=u;w<c;w++)n.push(a[w]);return}let C=this.createColumnGroup(m,e,r,i);for(let w=u;w<c;w++)C.addChild(a[w]);s.push(C)};for(let c=1;c<a.length;c++){let u=a[c],p=(u instanceof ft?u.getProvidedColumnGroup():u).getOriginalParent(),m=a[l],w=(m instanceof ft?m.getProvidedColumnGroup():m).getOriginalParent();p!==w&&d(c)}l<a.length&&d(a.length)}return this.setupParentsIntoColumns(n,null),n}createColumnGroup(t,e,i,o){let r=t.getGroupId(),n=e.getInstanceIdForKey(r),s=ft.createUniqueId(r,n),a=i[s];return a&&a.getProvidedColumnGroup()!==t&&(a=null),T(a)?a.reset():(a=new ft(t,r,n,o),this.context.createBean(a)),a}mapOldGroupsById(t){let e={},i=o=>{o.forEach(r=>{if(r instanceof ft){let n=r;e[r.getUniqueId()]=n,i(n.getChildren())}})};return t&&i(t),e}setupParentsIntoColumns(t,e){t.forEach(i=>{if(i.setParent(e),i instanceof ft){let o=i;this.setupParentsIntoColumns(o.getChildren(),o)}})}};sm=g([V("displayedGroupCreator")],sm);var EF={enableBrowserTooltips:!0,tooltipTrigger:!0,tooltipMouseTrack:!0,tooltipShowMode:!0,tooltipInteraction:!0,defaultColGroupDef:!0,suppressAutoSize:!0,skipHeaderOnAutoSize:!0,autoSizeStrategy:!0,components:!0,stopEditingWhenCellsLoseFocus:!0,undoRedoCellEditing:!0,undoRedoCellEditingLimit:!0,excelStyles:!0,cacheQuickFilter:!0,excludeHiddenColumnsFromQuickFilter:!0,advancedFilterModel:!0,customChartThemes:!0,chartThemeOverrides:!0,enableChartToolPanelsButton:!0,suppressChartToolPanelsButton:!0,chartToolPanelsDef:!0,loadingCellRendererSelector:!0,localeText:!0,keepDetailRows:!0,keepDetailRowsCount:!0,detailRowHeight:!0,detailRowAutoHeight:!0,tabIndex:!0,valueCache:!0,valueCacheNeverExpires:!0,enableCellExpressions:!0,suppressParentsInRowNodes:!0,suppressTouch:!0,suppressAsyncEvents:!0,suppressBrowserResizeObserver:!0,suppressPropertyNamesCheck:!0,debug:!0,loadingOverlayComponent:!0,suppressLoadingOverlay:!0,noRowsOverlayComponent:!0,paginationPageSizeSelector:!0,paginateChildRows:!0,pivotPanelShow:!0,pivotSuppressAutoColumn:!0,suppressExpandablePivotGroups:!0,aggFuncs:!0,suppressAggFuncInHeader:!0,suppressAggAtRootLevel:!0,removePivotHeaderRowWhenSingleValueColumn:!0,allowShowChangeAfterFilter:!0,ensureDomOrder:!0,enableRtl:!0,suppressColumnVirtualisation:!0,suppressMaxRenderedRowRestriction:!0,suppressRowVirtualisation:!0,rowDragText:!0,suppressGroupMaintainValueType:!0,groupLockGroupColumns:!0,rowGroupPanelSuppressSort:!0,suppressGroupRowsSticky:!0,rowModelType:!0,cacheOverflowSize:!0,infiniteInitialRowCount:!0,serverSideInitialRowCount:!0,suppressServerSideInfiniteScroll:!0,maxBlocksInCache:!0,maxConcurrentDatasourceRequests:!0,blockLoadDebounceMillis:!0,serverSideOnlyRefreshFilteredGroups:!0,serverSidePivotResultFieldSeparator:!0,viewportRowModelPageSize:!0,viewportRowModelBufferSize:!0,debounceVerticalScrollbar:!0,suppressAnimationFrame:!0,suppressPreventDefaultOnMouseWheel:!0,scrollbarWidth:!0,icons:!0,suppressRowTransform:!0,gridId:!0,functionsPassive:!0,enableGroupEdit:!0,initialState:!0,processUnpinnedColumns:!0,createChartContainer:!0,getLocaleText:!0,getRowId:!0,reactiveCustomComponents:!0,columnMenu:!0},ct=class{};ct.STRING_PROPERTIES=["rowSelection","overlayLoadingTemplate","overlayNoRowsTemplate","gridId","quickFilterText","rowModelType","editType","domLayout","clipboardDelimiter","rowGroupPanelShow","multiSortKey","pivotColumnGroupTotals","pivotRowTotals","pivotPanelShow","fillHandleDirection","groupDisplayType","treeDataDisplayType","colResizeDefault","tooltipTrigger","serverSidePivotResultFieldSeparator","columnMenu","tooltipShowMode","grandTotalRow"];ct.OBJECT_PROPERTIES=["components","rowStyle","context","autoGroupColumnDef","localeText","icons","datasource","serverSideDatasource","viewportDatasource","groupRowRendererParams","aggFuncs","fullWidthCellRendererParams","defaultColGroupDef","defaultColDef","defaultCsvExportParams","defaultExcelExportParams","columnTypes","rowClassRules","detailCellRendererParams","loadingCellRendererParams","loadingOverlayComponentParams","noRowsOverlayComponentParams","popupParent","statusBar","sideBar","chartThemeOverrides","customChartThemes","chartToolPanelsDef","dataTypeDefinitions","advancedFilterModel","advancedFilterParent","advancedFilterBuilderParams","initialState","autoSizeStrategy"];ct.ARRAY_PROPERTIES=["sortingOrder","alignedGrids","rowData","columnDefs","excelStyles","pinnedTopRowData","pinnedBottomRowData","chartThemes","rowClass","paginationPageSizeSelector"];ct.NUMBER_PROPERTIES=["rowHeight","detailRowHeight","rowBuffer","headerHeight","groupHeaderHeight","groupLockGroupColumns","floatingFiltersHeight","pivotHeaderHeight","pivotGroupHeaderHeight","groupDefaultExpanded","pivotDefaultExpanded","viewportRowModelPageSize","viewportRowModelBufferSize","autoSizePadding","maxBlocksInCache","maxConcurrentDatasourceRequests","tooltipShowDelay","tooltipHideDelay","cacheOverflowSize","paginationPageSize","cacheBlockSize","infiniteInitialRowCount","serverSideInitialRowCount","scrollbarWidth","asyncTransactionWaitMillis","blockLoadDebounceMillis","keepDetailRowsCount","undoRedoCellEditingLimit","cellFlashDelay","cellFadeDelay","cellFlashDuration","cellFadeDuration","tabIndex","pivotMaxGeneratedColumns"];ct.BOOLEAN_PROPERTIES=["suppressMakeColumnVisibleAfterUnGroup","suppressRowClickSelection","suppressCellFocus","suppressHeaderFocus","suppressHorizontalScroll","groupSelectsChildren","alwaysShowHorizontalScroll","alwaysShowVerticalScroll","debug","enableBrowserTooltips","enableCellExpressions","groupIncludeTotalFooter","groupSuppressBlankHeader","suppressMenuHide","suppressRowDeselection","unSortIcon","suppressMultiSort","alwaysMultiSort","singleClickEdit","suppressLoadingOverlay","suppressNoRowsOverlay","suppressAutoSize","skipHeaderOnAutoSize","suppressParentsInRowNodes","suppressColumnMoveAnimation","suppressMovableColumns","suppressFieldDotNotation","enableRangeSelection","enableRangeHandle","enableFillHandle","suppressClearOnFillReduction","deltaSort","suppressTouch","suppressAsyncEvents","allowContextMenuWithControlKey","suppressContextMenu","enableCellChangeFlash","suppressDragLeaveHidesColumns","suppressRowGroupHidesColumns","suppressMiddleClickScrolls","suppressPreventDefaultOnMouseWheel","suppressCopyRowsToClipboard","copyHeadersToClipboard","copyGroupHeadersToClipboard","pivotMode","suppressAggFuncInHeader","suppressColumnVirtualisation","alwaysAggregateAtRootLevel","suppressAggAtRootLevel","suppressFocusAfterRefresh","functionsPassive","functionsReadOnly","animateRows","groupSelectsFiltered","groupRemoveSingleChildren","groupRemoveLowestSingleChildren","enableRtl","suppressClickEdit","rowDragEntireRow","rowDragManaged","suppressRowDrag","suppressMoveWhenRowDragging","rowDragMultiRow","enableGroupEdit","embedFullWidthRows","suppressPaginationPanel","groupHideOpenParents","groupAllowUnbalanced","pagination","paginationAutoPageSize","suppressScrollOnNewData","suppressScrollWhenPopupsAreOpen","purgeClosedRowNodes","cacheQuickFilter","includeHiddenColumnsInQuickFilter","excludeHiddenColumnsFromQuickFilter","ensureDomOrder","accentedSort","suppressChangeDetection","valueCache","valueCacheNeverExpires","aggregateOnlyChangedColumns","suppressAnimationFrame","suppressExcelExport","suppressCsvExport","includeHiddenColumnsInAdvancedFilter","suppressMultiRangeSelection","enterMovesDown","enterMovesDownAfterEdit","enterNavigatesVerticallyAfterEdit","enterNavigatesVertically","suppressPropertyNamesCheck","rowMultiSelectWithClick","suppressRowHoverHighlight","suppressRowTransform","suppressClipboardPaste","suppressLastEmptyLineOnPaste","enableCharts","enableChartToolPanelsButton","suppressChartToolPanelsButton","suppressMaintainUnsortedOrder","enableCellTextSelection","suppressBrowserResizeObserver","suppressMaxRenderedRowRestriction","excludeChildrenWhenTreeDataFiltering","tooltipMouseTrack","tooltipInteraction","keepDetailRows","paginateChildRows","preventDefaultOnContextMenu","undoRedoCellEditing","allowDragFromColumnsToolPanel","pivotSuppressAutoColumn","suppressExpandablePivotGroups","debounceVerticalScrollbar","detailRowAutoHeight","serverSideFilterAllLevels","serverSideSortAllLevels","serverSideEnableClientSideSort","serverSideOnlyRefreshFilteredGroups","serverSideSortOnServer","serverSideFilterOnServer","suppressAggFilteredOnly","showOpenedGroup","suppressClipboardApi","suppressModelUpdateAfterUpdateTransaction","stopEditingWhenCellsLoseFocus","maintainColumnOrder","groupMaintainOrder","columnHoverHighlight","readOnlyEdit","suppressRowVirtualisation","enableCellEditingOnBackspace","resetRowDataOnUpdate","removePivotHeaderRowWhenSingleValueColumn","suppressCopySingleCellRanges","suppressGroupRowsSticky","suppressCutToClipboard","suppressServerSideInfiniteScroll","rowGroupPanelSuppressSort","allowShowChangeAfterFilter","enableAdvancedFilter","masterDetail","treeData","suppressGroupMaintainValueType","reactiveCustomComponents","applyQuickFilterBeforePivotOrAgg","suppressServerSideFullWidthLoadingRow","suppressAdvancedFilterEval"];ct.OTHER_PROPERTIES=["suppressStickyTotalRow"];ct.FUNCTIONAL_PROPERTIES=["doesExternalFilterPass","processPivotResultColDef","processPivotResultColGroupDef","getBusinessKeyForNode","isRowSelectable","rowDragText","groupRowRenderer","fullWidthCellRenderer","loadingCellRenderer","loadingOverlayComponent","noRowsOverlayComponent","detailCellRenderer","quickFilterParser","quickFilterMatcher"];ct.CALLBACK_PROPERTIES=["getLocaleText","isExternalFilterPresent","getRowHeight","getRowClass","getRowStyle","getContextMenuItems","getMainMenuItems","processRowPostCreate","processCellForClipboard","getGroupRowAgg","isFullWidthRow","sendToClipboard","navigateToNextHeader","tabToNextHeader","navigateToNextCell","tabToNextCell","processCellFromClipboard","getDocument","postProcessPopup","getChildCount","getDataPath","isRowMaster","postSortRows","processHeaderForClipboard","processUnpinnedColumns","processGroupHeaderForClipboard","paginationNumberFormatter","processDataFromClipboard","getServerSideGroupKey","isServerSideGroup","createChartContainer","getChartToolbarItems","fillOperation","isApplyServerSideTransaction","getServerSideGroupLevelParams","isServerSideGroupOpenByDefault","isGroupOpenByDefault","initialGroupOrderComparator","groupIncludeFooter","loadingCellRendererSelector","getRowId","groupAggFiltering","chartMenuItems","groupTotalRow"];ct.FUNCTION_PROPERTIES=[...ct.FUNCTIONAL_PROPERTIES,...ct.CALLBACK_PROPERTIES];ct.ALL_PROPERTIES=[...ct.ARRAY_PROPERTIES,...ct.OBJECT_PROPERTIES,...ct.STRING_PROPERTIES,...ct.NUMBER_PROPERTIES,...ct.FUNCTION_PROPERTIES,...ct.BOOLEAN_PROPERTIES,...ct.OTHER_PROPERTIES];var cd=ct,Rt=class Wu{static getCallbackForEvent(e){return!e||e.length<2?e:"on"+e[0].toUpperCase()+e.substring(1)}static getGridOptionKeys(){return this.ALL_PROPERTIES_AND_CALLBACKS}static combineAttributesAndGridOptions(e,i){typeof e!="object"&&(e={});let o=j({},e);return Wu.getGridOptionKeys().forEach(n=>{let s=i[n];typeof s<"u"&&s!==Wu.VUE_OMITTED_PROPERTY&&(o[n]=s)}),o}static processOnChange(e,i,o){if(!e)return;let r={},n=!1;if(Object.keys(e).filter(a=>Wu.ALL_PROPERTIES_AND_CALLBACKS_SET.has(a)).forEach(a=>{r[a]=e[a],n=!0}),!n)return;i.__internalUpdateGridOptions(r,!0);let s={type:f.EVENT_COMPONENT_STATE_CHANGED};Nt(r,(a,l)=>{s[a]=l}),i.dispatchEvent(s)}};Rt.EVENTS=yn(f);Rt.VUE_OMITTED_PROPERTY="AG-VUE-OMITTED-PROPERTY";Rt.EXCLUDED_INTERNAL_EVENTS=[f.EVENT_SCROLLBAR_WIDTH_CHANGED,f.EVENT_CHECKBOX_CHANGED,f.EVENT_HEIGHT_SCALE_CHANGED,f.EVENT_BODY_HEIGHT_CHANGED,f.EVENT_COLUMN_CONTAINER_WIDTH_CHANGED,f.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,f.EVENT_SCROLL_VISIBILITY_CHANGED,f.EVENT_COLUMN_HOVER_CHANGED,f.EVENT_FLASH_CELLS,f.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED,f.EVENT_DISPLAYED_ROWS_CHANGED,f.EVENT_LEFT_PINNED_WIDTH_CHANGED,f.EVENT_RIGHT_PINNED_WIDTH_CHANGED,f.EVENT_ROW_CONTAINER_HEIGHT_CHANGED,f.EVENT_STORE_UPDATED,f.EVENT_COLUMN_PANEL_ITEM_DRAG_START,f.EVENT_COLUMN_PANEL_ITEM_DRAG_END,f.EVENT_KEY_SHORTCUT_CHANGED_CELL_START,f.EVENT_KEY_SHORTCUT_CHANGED_CELL_END,f.EVENT_FULL_WIDTH_ROW_FOCUSED,f.EVENT_HEADER_HEIGHT_CHANGED,f.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,f.EVENT_CELL_FOCUS_CLEARED,f.EVENT_GRID_STYLES_CHANGED,f.EVENT_FILTER_DESTROYED,f.EVENT_ROW_DATA_UPDATE_STARTED,f.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,f.EVENT_DATA_TYPES_INFERRED,f.EVENT_FIELD_VALUE_CHANGED,f.EVENT_FIELD_PICKER_VALUE_SELECTED,f.EVENT_SUPPRESS_COLUMN_MOVE_CHANGED,f.EVENT_SUPPRESS_MENU_HIDE_CHANGED,f.EVENT_SUPPRESS_FIELD_DOT_NOTATION,f.EVENT_ROW_COUNT_READY,f.EVENT_SIDE_BAR_UPDATED];Rt.PUBLIC_EVENTS=Rt.EVENTS.filter(t=>!wi(Rt.EXCLUDED_INTERNAL_EVENTS,t));Rt.EVENT_CALLBACKS=Rt.EVENTS.map(t=>Rt.getCallbackForEvent(t));Rt.BOOLEAN_PROPERTIES=cd.BOOLEAN_PROPERTIES;Rt.ALL_PROPERTIES=cd.ALL_PROPERTIES;Rt.ALL_PROPERTIES_AND_CALLBACKS=[...Rt.ALL_PROPERTIES,...Rt.EVENT_CALLBACKS];Rt.ALL_PROPERTIES_AND_CALLBACKS_SET=new Set(Rt.ALL_PROPERTIES_AND_CALLBACKS);var Fd=Rt,am=class extends A{constructor(){super(...arguments),this.componentsMappedByName={}}setupComponents(t){t&&t.forEach(e=>this.addComponent(e))}addComponent(t){let i=t.componentName.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase().toUpperCase();this.componentsMappedByName[i]=t.componentClass}getComponentClass(t){return this.componentsMappedByName[t]}};am=g([V("agStackComponentsRegistry")],am);var yx={};_t(yx,{getAriaCheckboxStateName:()=>bh,getAriaLabel:()=>_x,getAriaLevel:()=>DF,getAriaPosInSet:()=>xx,getAriaSortState:()=>Sx,removeAriaExpanded:()=>Mx,removeAriaSort:()=>Ox,setAriaActiveDescendant:()=>Lm,setAriaAtomic:()=>Ex,setAriaChecked:()=>MF,setAriaColCount:()=>Ix,setAriaColIndex:()=>zm,setAriaColSpan:()=>Px,setAriaControls:()=>Gm,setAriaDescribedBy:()=>RF,setAriaDisabled:()=>km,setAriaExpanded:()=>No,setAriaHidden:()=>Od,setAriaLabel:()=>yi,setAriaLabelledBy:()=>Js,setAriaLevel:()=>Rx,setAriaLive:()=>Om,setAriaMultiSelectable:()=>Tx,setAriaPosInSet:()=>yh,setAriaRelevant:()=>Dx,setAriaRole:()=>Xe,setAriaRowCount:()=>Ax,setAriaRowIndex:()=>Nm,setAriaSelected:()=>ea,setAriaSetSize:()=>wh,setAriaSort:()=>Fx});function Oi(t,e,i){i==null||typeof i=="string"&&i==""?Fm(t,e):ki(t,e,i)}function ki(t,e,i){t.setAttribute(bx(e),i.toString())}function Fm(t,e){t.removeAttribute(bx(e))}function bx(t){return`aria-${t}`}function Xe(t,e){e?t.setAttribute("role",e):t.removeAttribute("role")}function Sx(t){let e;return t==="asc"?e="ascending":t==="desc"?e="descending":t==="mixed"?e="other":e="none",e}function DF(t){return parseInt(t.getAttribute("aria-level"),10)}function xx(t){return parseInt(t.getAttribute("aria-posinset"),10)}function _x(t){return t.getAttribute("aria-label")}function yi(t,e){Oi(t,"label",e)}function Js(t,e){Oi(t,"labelledby",e)}function RF(t,e){Oi(t,"describedby",e)}function Om(t,e){Oi(t,"live",e)}function Ex(t,e){Oi(t,"atomic",e)}function Dx(t,e){Oi(t,"relevant",e)}function Rx(t,e){Oi(t,"level",e)}function km(t,e){Oi(t,"disabled",e)}function Od(t,e){Oi(t,"hidden",e)}function Lm(t,e){Oi(t,"activedescendant",e)}function No(t,e){ki(t,"expanded",e)}function Mx(t){Fm(t,"expanded")}function wh(t,e){ki(t,"setsize",e)}function yh(t,e){ki(t,"posinset",e)}function Tx(t,e){ki(t,"multiselectable",e)}function Ax(t,e){ki(t,"rowcount",e)}function Nm(t,e){ki(t,"rowindex",e)}function Ix(t,e){ki(t,"colcount",e)}function zm(t,e){ki(t,"colindex",e)}function Px(t,e){ki(t,"colspan",e)}function Fx(t,e){ki(t,"sort",e)}function Ox(t){Fm(t,"sort")}function ea(t,e){Oi(t,"selected",e)}function MF(t,e){ki(t,"checked",e===void 0?"mixed":e)}function Gm(t,e){Oi(t,"controls",e.id),Js(e,t.id)}function bh(t,e){return e===void 0?t("ariaIndeterminate","indeterminate"):e===!0?t("ariaChecked","checked"):t("ariaUnchecked","unchecked")}var kx={};_t(kx,{browserSupportsPreventScroll:()=>Wm,getBodyHeight:()=>zx,getBodyWidth:()=>Nx,getMaxDivHeight:()=>Lx,getSafariVersion:()=>Vm,getScrollbarWidth:()=>Gx,getTabIndex:()=>eh,isBrowserChrome:()=>Sh,isBrowserFirefox:()=>Hm,isBrowserSafari:()=>fo,isIOSUserAgent:()=>Vo,isInvisibleScrollbar:()=>Um,isMacOsUserAgent:()=>Bm});var Vf,Gu,Hf,Bf,Wf,Uf,lm,dm;function fo(){return Vf===void 0&&(Vf=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),Vf}function Vm(){if(Gu===void 0)if(fo()){let t=navigator.userAgent.match(/version\/(\d+)/i);t&&(Gu=t[1]!=null?parseFloat(t[1]):0)}else Gu=0;return Gu}function Sh(){if(Hf===void 0){let t=window;Hf=!!t.chrome&&(!!t.chrome.webstore||!!t.chrome.runtime)||/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}return Hf}function Hm(){return Bf===void 0&&(Bf=/(firefox)/i.test(navigator.userAgent)),Bf}function Bm(){return Wf===void 0&&(Wf=/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)),Wf}function Vo(){return Uf===void 0&&(Uf=/iPad|iPhone|iPod/.test(navigator.platform)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1),Uf}function Wm(){return!fo()||Vm()>=15}function eh(t){if(!t)return null;let e=t.tabIndex,i=t.getAttribute("tabIndex");return e===-1&&(i===null||i===""&&!Hm())?null:e.toString()}function Lx(){if(!document.body)return-1;let t=1e6,e=navigator.userAgent.toLowerCase().match(/firefox/)?6e6:1e9,i=document.createElement("div");for(document.body.appendChild(i);;){let o=t*2;if(i.style.height=o+"px",o>e||i.clientHeight!==o)break;t=o}return document.body.removeChild(i),t}function Nx(){var t,e,i;return(i=(t=document.body)==null?void 0:t.clientWidth)!=null?i:window.innerHeight||((e=document.documentElement)==null?void 0:e.clientWidth)||-1}function zx(){var t,e,i;return(i=(t=document.body)==null?void 0:t.clientHeight)!=null?i:window.innerHeight||((e=document.documentElement)==null?void 0:e.clientHeight)||-1}function Gx(){return dm==null&&Vx(),dm}function Vx(){let t=document.body,e=document.createElement("div");e.style.width=e.style.height="100px",e.style.opacity="0",e.style.overflow="scroll",e.style.msOverflowStyle="scrollbar",e.style.position="absolute",t.appendChild(e);let i=e.offsetWidth-e.clientWidth;i===0&&e.clientWidth===0&&(i=null),e.parentNode&&e.parentNode.removeChild(e),i!=null&&(dm=i,lm=i===0)}function Um(){return lm==null&&Vx(),lm}var Hx={};_t(Hx,{dateToFormattedString:()=>Qs,parseDateTimeFromString:()=>ti,serialiseDate:()=>Ai});var Bx={};_t(Bx,{cleanNumber:()=>TF,createArrayOfNumbers:()=>Wx,decToHex:()=>AF,formatNumberCommas:()=>jm,formatNumberTwoDecimalPlacesAndCommas:()=>IF,padStartWidthZeros:()=>Ys,sum:()=>PF});function Ys(t,e){return t.toString().padStart(e,"0")}function Wx(t,e){let i=[];for(let o=t;o<=e;o++)i.push(o);return i}function TF(t){return typeof t=="string"&&(t=parseInt(t,10)),typeof t=="number"?Math.floor(t):null}function AF(t,e){let i="";for(let o=0;o<e;o++)i+=String.fromCharCode(t&255),t>>>=8;return i}function IF(t,e,i){return typeof t!="number"?"":jm(Math.round(t*100)/100,e,i)}function jm(t,e,i){return typeof t!="number"?"":t.toString().replace(".",i).replace(/(\d)(?=(\d{3})+(?!\d))/g,`$1${e}`)}function PF(t){return t==null?null:t.reduce((e,i)=>e+i,0)}function Ai(t,e=!0,i="-"){if(!t)return null;let o=[t.getFullYear(),t.getMonth()+1,t.getDate()].map(r=>Ys(r,2)).join(i);return e&&(o+=" "+[t.getHours(),t.getMinutes(),t.getSeconds()].map(r=>Ys(r,2)).join(":")),o}var jf=t=>{if(t>3&&t<21)return"th";switch(t%10){case 1:return"st";case 2:return"nd";case 3:return"rd"}return"th"};function Qs(t,e="YYYY-MM-DD"){let i=Ys(t.getFullYear(),4),o=["January","February","March","April","May","June","July","August","September","October","November","December"],r=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],n={YYYY:()=>i.slice(i.length-4,i.length),YY:()=>i.slice(i.length-2,i.length),Y:()=>`${t.getFullYear()}`,MMMM:()=>o[t.getMonth()],MMM:()=>o[t.getMonth()].slice(0,3),MM:()=>Ys(t.getMonth()+1,2),Mo:()=>`${t.getMonth()+1}${jf(t.getMonth()+1)}`,M:()=>`${t.getMonth()+1}`,Do:()=>`${t.getDate()}${jf(t.getDate())}`,DD:()=>Ys(t.getDate(),2),D:()=>`${t.getDate()}`,dddd:()=>r[t.getDay()],ddd:()=>r[t.getDay()].slice(0,3),dd:()=>r[t.getDay()].slice(0,2),do:()=>`${t.getDay()}${jf(t.getDay())}`,d:()=>`${t.getDay()}`},s=new RegExp(Object.keys(n).join("|"),"g");return e.replace(s,a=>a in n?n[a]():a)}function ti(t){if(!t)return null;let[e,i]=t.split(" ");if(!e)return null;let o=e.split("-").map(u=>parseInt(u,10));if(o.filter(u=>!isNaN(u)).length!==3)return null;let[r,n,s]=o,a=new Date(r,n-1,s);if(a.getFullYear()!==r||a.getMonth()!==n-1||a.getDate()!==s)return null;if(!i||i==="00:00:00")return a;let[l,d,c]=i.split(":").map(u=>parseInt(u,10));return l>=0&&l<24&&a.setHours(l),d>=0&&d<60&&a.setMinutes(d),c>=0&&c<60&&a.setSeconds(c),a}var Ux={};_t(Ux,{FOCUSABLE_EXCLUDE:()=>qm,FOCUSABLE_SELECTOR:()=>jx,addOrRemoveAttribute:()=>po,addStylesToElement:()=>Jm,bindCellRendererToHtmlElement:()=>tv,clearElement:()=>Je,copyNodeList:()=>Qx,ensureDomOrder:()=>Xm,formatSize:()=>xh,getAbsoluteHeight:()=>$m,getAbsoluteWidth:()=>ud,getElementRectWithOffset:()=>Ym,getElementSize:()=>Pr,getInnerHeight:()=>kd,getInnerWidth:()=>zn,getScrollLeft:()=>gd,insertWithDomOrder:()=>Kx,isElementChildOfClass:()=>bn,isFocusableFormField:()=>Km,isHorizontalScrollShowing:()=>$x,isInDOM:()=>Qm,isNodeOrElement:()=>Ld,isRtlNegativeScroll:()=>hd,isVerticalScrollShowing:()=>Yx,isVisible:()=>ni,iterateNamedNodeMap:()=>Xx,loadTemplate:()=>ii,nodeListForEach:()=>ev,radioCssClass:()=>cm,removeFromParent:()=>qi,setDisabled:()=>ta,setDisplayed:()=>me,setDomChildOrder:()=>Zm,setElementHeight:()=>FF,setElementWidth:()=>fd,setFixedHeight:()=>Sn,setFixedWidth:()=>Ii,setScrollLeft:()=>pd,setVisible:()=>qx});var Vu;function cm(t,e,i){let o=t.parentElement,r=o&&o.firstChild;for(;r;)e&&r.classList.toggle(e,r===t),i&&r.classList.toggle(i,r!==t),r=r.nextSibling}var jx="[tabindex], input, select, button, textarea, [href]",qm="[disabled], .ag-disabled:not(.ag-button), .ag-disabled *";function Km(t){let e=Element.prototype.matches||Element.prototype.msMatchesSelector,o=e.call(t,"input, select, button, textarea"),r=e.call(t,qm),n=ni(t);return o&&!r&&n}function me(t,e,i={}){let{skipAriaHidden:o}=i;t.classList.toggle("ag-hidden",!e),o||Od(t,!e)}function qx(t,e,i={}){let{skipAriaHidden:o}=i;t.classList.toggle("ag-invisible",!e),o||Od(t,!e)}function ta(t,e){let i="disabled",o=e?r=>r.setAttribute(i,""):r=>r.removeAttribute(i);o(t),ev(t.querySelectorAll("input"),r=>o(r))}function bn(t,e,i){let o=0;for(;t;){if(t.classList.contains(e))return!0;if(t=t.parentElement,typeof i=="number"){if(++o>i)break}else if(t===i)break}return!1}function Pr(t){let{height:e,width:i,borderTopWidth:o,borderRightWidth:r,borderBottomWidth:n,borderLeftWidth:s,paddingTop:a,paddingRight:l,paddingBottom:d,paddingLeft:c,marginTop:u,marginRight:h,marginBottom:p,marginLeft:m,boxSizing:C}=window.getComputedStyle(t);return{height:parseFloat(e||"0"),width:parseFloat(i||"0"),borderTopWidth:parseFloat(o||"0"),borderRightWidth:parseFloat(r||"0"),borderBottomWidth:parseFloat(n||"0"),borderLeftWidth:parseFloat(s||"0"),paddingTop:parseFloat(a||"0"),paddingRight:parseFloat(l||"0"),paddingBottom:parseFloat(d||"0"),paddingLeft:parseFloat(c||"0"),marginTop:parseFloat(u||"0"),marginRight:parseFloat(h||"0"),marginBottom:parseFloat(p||"0"),marginLeft:parseFloat(m||"0"),boxSizing:C}}function kd(t){let e=Pr(t);return e.boxSizing==="border-box"?e.height-e.paddingTop-e.paddingBottom:e.height}function zn(t){let e=Pr(t);return e.boxSizing==="border-box"?e.width-e.paddingLeft-e.paddingRight:e.width}function $m(t){let e=Pr(t),i=e.marginBottom+e.marginTop;return Math.ceil(t.offsetHeight+i)}function ud(t){let e=Pr(t),i=e.marginLeft+e.marginRight;return Math.ceil(t.offsetWidth+i)}function Ym(t){let e=t.getBoundingClientRect(),{borderTopWidth:i,borderLeftWidth:o,borderRightWidth:r,borderBottomWidth:n}=Pr(t);return{top:e.top+(i||0),left:e.left+(o||0),right:e.right+(r||0),bottom:e.bottom+(n||0)}}function hd(){if(typeof Vu=="boolean")return Vu;let t=document.createElement("div");return t.style.direction="rtl",t.style.width="1px",t.style.height="1px",t.style.position="fixed",t.style.top="0px",t.style.overflow="hidden",t.dir="rtl",t.innerHTML=`<div style="width: 2px">
            <span style="display: inline-block; width: 1px"></span>
            <span style="display: inline-block; width: 1px"></span>
        </div>`,document.body.appendChild(t),t.scrollLeft=1,Vu=Math.floor(t.scrollLeft)===0,document.body.removeChild(t),Vu}function gd(t,e){let i=t.scrollLeft;return e&&(i=Math.abs(i),Sh()&&!hd()&&(i=t.scrollWidth-t.clientWidth-i)),i}function pd(t,e,i){i&&(hd()?e*=-1:(fo()||Sh())&&(e=t.scrollWidth-t.clientWidth-e)),t.scrollLeft=e}function Je(t){for(;t&&t.firstChild;)t.removeChild(t.firstChild)}function qi(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function Qm(t){return!!t.offsetParent}function ni(t){let e=t;return e.checkVisibility?e.checkVisibility({checkVisibilityCSS:!0}):!(!Qm(t)||window.getComputedStyle(t).visibility!=="visible")}function ii(t){let e=document.createElement("div");return e.innerHTML=(t||"").trim(),e.firstChild}function Xm(t,e,i){i&&i.nextSibling===e||(i?i.nextSibling?t.insertBefore(e,i.nextSibling):t.appendChild(e):t.firstChild&&t.firstChild!==e&&t.insertAdjacentElement("afterbegin",e))}function Zm(t,e){for(let i=0;i<e.length;i++){let o=e[i],r=t.children[i];r!==o&&t.insertBefore(o,r)}}function Kx(t,e,i){i?i.insertAdjacentElement("afterend",e):t.firstChild?t.insertAdjacentElement("afterbegin",e):t.appendChild(e)}function Jm(t,e){if(e)for(let[i,o]of Object.entries(e)){if(!i||!i.length||o==null)continue;let r=Cx(i),n=o.toString(),s=n.replace(/\s*!important/g,""),a=s.length!=n.length?"important":void 0;t.style.setProperty(r,s,a)}}function $x(t){return t.clientWidth<t.scrollWidth}function Yx(t){return t.clientHeight<t.scrollHeight}function fd(t,e){e==="flex"?(t.style.removeProperty("width"),t.style.removeProperty("minWidth"),t.style.removeProperty("maxWidth"),t.style.flex="1 1 auto"):Ii(t,e)}function Ii(t,e){e=xh(e),t.style.width=e.toString(),t.style.maxWidth=e.toString(),t.style.minWidth=e.toString()}function FF(t,e){e==="flex"?(t.style.removeProperty("height"),t.style.removeProperty("minHeight"),t.style.removeProperty("maxHeight"),t.style.flex="1 1 auto"):Sn(t,e)}function Sn(t,e){e=xh(e),t.style.height=e.toString(),t.style.maxHeight=e.toString(),t.style.minHeight=e.toString()}function xh(t){return typeof t=="number"?`${t}px`:t}function Ld(t){return t instanceof Node||t instanceof HTMLElement}function Qx(t){if(t==null)return[];let e=[];return ev(t,i=>e.push(i)),e}function Xx(t,e){if(t)for(let i=0;i<t.length;i++){let o=t[i];e(o.name,o.value)}}function po(t,e,i){i==null?t.removeAttribute(e):t.setAttribute(e,i.toString())}function ev(t,e){if(t!=null)for(let i=0;i<t.length;i++)e(t[i])}function tv(t,e){t.then(i=>{let o=i.getGui();o!=null&&(typeof o=="object"?e.appendChild(o):e.innerHTML=o)})}var Zx={};_t(Zx,{fuzzyCheckStrings:()=>Jx,fuzzySuggestions:()=>Nd});function Jx(t,e,i){let o={},r=t.filter(n=>!e.some(s=>s===n));return r.length>0&&r.forEach(n=>o[n]=Nd(n,i).values),o}function Nd(t,e,i,o){let r=e.map((a,l)=>({value:a,relevance:OF(t.toLowerCase(),a.toLocaleLowerCase()),idx:l}));if(r.sort((a,l)=>l.relevance-a.relevance),i&&(r=r.filter(a=>a.relevance!==0)),r.length>0&&o&&o>0){let l=r[0].relevance*o;r=r.filter(d=>l-d.relevance<0)}let n=[],s=[];for(let a of r)n.push(a.value),s.push(a.idx);return{values:n,indices:s}}function OF(t,e){let i=t.replace(/\s/g,""),o=e.replace(/\s/g,""),r=0,n=-1;for(let s=0;s<i.length;s++){let a=o.indexOf(i[s],n+1);a!==-1&&(n=a,r+=100-n*100/1e4*100)}return r}var e_={};_t(e_,{createIcon:()=>Ri,createIconNoSpan:()=>qe,iconNameClassMap:()=>t_});var t_={columnGroupOpened:"expanded",columnGroupClosed:"contracted",columnSelectClosed:"tree-closed",columnSelectOpen:"tree-open",columnSelectIndeterminate:"tree-indeterminate",columnMovePin:"pin",columnMoveHide:"eye-slash",columnMoveMove:"arrows",columnMoveLeft:"left",columnMoveRight:"right",columnMoveGroup:"group",columnMoveValue:"aggregation",columnMovePivot:"pivot",dropNotAllowed:"not-allowed",groupContracted:"tree-closed",groupExpanded:"tree-open",setFilterGroupClosed:"tree-closed",setFilterGroupOpen:"tree-open",setFilterGroupIndeterminate:"tree-indeterminate",chart:"chart",close:"cross",cancel:"cancel",check:"tick",first:"first",previous:"previous",next:"next",last:"last",linked:"linked",unlinked:"unlinked",colorPicker:"color-picker",groupLoading:"loading",menu:"menu",menuAlt:"menu-alt",filter:"filter",columns:"columns",maximize:"maximize",minimize:"minimize",menuPin:"pin",menuValue:"aggregation",menuAddRowGroup:"group",menuRemoveRowGroup:"group",clipboardCopy:"copy",clipboardCut:"cut",clipboardPaste:"paste",pivotPanel:"pivot",rowGroupPanel:"group",valuePanel:"aggregation",columnDrag:"grip",rowDrag:"grip",save:"save",csvExport:"csv",excelExport:"excel",smallDown:"small-down",smallLeft:"small-left",smallRight:"small-right",smallUp:"small-up",sortAscending:"asc",sortDescending:"desc",sortUnSort:"none",advancedFilterBuilder:"group",advancedFilterBuilderDrag:"grip",advancedFilterBuilderInvalid:"not-allowed",advancedFilterBuilderMoveUp:"up",advancedFilterBuilderMoveDown:"down",advancedFilterBuilderAdd:"plus",advancedFilterBuilderRemove:"minus",chartsMenuEdit:"chart",chartsMenuAdvancedSettings:"settings",chartsMenuAdd:"plus"};function Ri(t,e,i){let o=qe(t,e,i);if(o){let{className:n}=o;if(typeof n=="string"&&n.indexOf("ag-icon")>-1||typeof n=="object"&&n["ag-icon"])return o}let r=document.createElement("span");return r.appendChild(o),r}function qe(t,e,i,o){let r=null,n=i&&i.getColDef().icons;if(n&&(r=n[t]),e&&!r){let s=e.get("icons");s&&(r=s[t])}if(r){let s;if(typeof r=="function")s=r();else if(typeof r=="string")s=r;else throw new Error("icon from grid options needs to be a string or a function");if(typeof s=="string")return ii(s);if(Ld(s))return s;console.warn("AG Grid: iconRenderer should return back a string or a dom object")}else{let s=document.createElement("span"),a=t_[t];return a||(o?a=t:(console.warn(`AG Grid: Did not find icon ${t}`),a="")),s.setAttribute("class",`ag-icon ag-icon-${a}`),s.setAttribute("unselectable","on"),Xe(s,"presentation"),s}}var i_={};_t(i_,{isDeleteKey:()=>n_,isEventFromPrintableCharacter:()=>_h,isUserSuppressingHeaderKeyboardEvent:()=>o_,isUserSuppressingKeyboardEvent:()=>th,normaliseQwertyAzerty:()=>r_});var S=class{};S.BACKSPACE="Backspace";S.TAB="Tab";S.ENTER="Enter";S.ESCAPE="Escape";S.SPACE=" ";S.LEFT="ArrowLeft";S.UP="ArrowUp";S.RIGHT="ArrowRight";S.DOWN="ArrowDown";S.DELETE="Delete";S.F2="F2";S.PAGE_UP="PageUp";S.PAGE_DOWN="PageDown";S.PAGE_HOME="Home";S.PAGE_END="End";S.A="KeyA";S.C="KeyC";S.D="KeyD";S.V="KeyV";S.X="KeyX";S.Y="KeyY";S.Z="KeyZ";var kF=65,LF=67,NF=86,zF=68,GF=90,VF=89;function _h(t){return t.altKey||t.ctrlKey||t.metaKey?!1:t.key.length===1}function th(t,e,i,o,r){let n=o?o.getColDef().suppressKeyboardEvent:void 0;if(!n)return!1;let s=t.addGridCommonParams({event:e,editing:r,column:o,node:i,data:i.data,colDef:o.getColDef()});return!!(n&&n(s))}function o_(t,e,i,o){let r=o.getDefinition(),n=r&&r.suppressHeaderKeyboardEvent;if(!T(n))return!1;let s=t.addGridCommonParams({colDef:r,column:o,headerRowIndex:i,event:e});return!!n(s)}function r_(t){let{keyCode:e}=t,i;switch(e){case kF:i=S.A;break;case LF:i=S.C;break;case NF:i=S.V;break;case zF:i=S.D;break;case GF:i=S.Z;break;case VF:i=S.Y;break;default:i=t.code}return i}function n_(t,e=!1){return t===S.DELETE?!0:!e&&t===S.BACKSPACE?Bm():!1}var s_={};_t(s_,{areEventsNear:()=>iv});function iv(t,e,i){if(i===0)return!1;let o=Math.abs(t.clientX-e.clientX),r=Math.abs(t.clientY-e.clientY);return Math.max(o,r)<=i}var a_={};_t(a_,{sortRowNodesByOrder:()=>HF});function HF(t,e){if(!t)return!1;let i=(s,a)=>{let l=e[s.id],d=e[a.id],c=l!==void 0,u=d!==void 0,h=c&&u,p=!c&&!u;return h?l-d:p?s.__objectId-a.__objectId:c?1:-1},o,r,n=!1;for(let s=0;s<t.length-1;s++)if(o=t[s],r=t[s+1],i(o,r)>0){n=!0;break}return n?(t.sort(i),!0):!1}var l_={};_t(l_,{convertToSet:()=>ov});function ov(t){let e=new Set;return t.forEach(i=>e.add(i)),e}var BF=j(j(j(j(j(j(j(j(j(j(j(j(j(j(j(j(j(j({},yx),rx),kx),Hx),Ux),ox),YS),Zx),qS),e_),i_),wx),s_),Bx),KS),a_),l_),mx),ce=BF,ia=class{constructor(t=0,e=1){this.nextValue=t,this.step=e}next(){let t=this.nextValue;return this.nextValue+=this.step,t}peek(){return this.nextValue}skip(t){this.nextValue+=t}};var ri=class Uu{constructor(e){this.status=0,this.resolution=null,this.waiters=[],e(i=>this.onDone(i),i=>this.onReject(i))}static all(e){return new Uu(i=>{let o=e.length,r=new Array(o);e.forEach((n,s)=>{n.then(a=>{r[s]=a,o--,o===0&&i(r)})})})}static resolve(e=null){return new Uu(i=>i(e))}then(e){return new Uu(i=>{this.status===1?i(e(this.resolution)):this.waiters.push(o=>i(e(o)))})}resolveNow(e,i){return this.status===1?i(this.resolution):e}onDone(e){this.status=1,this.resolution=e,this.waiters.forEach(i=>i(e))}onReject(e){console.warn("TBI")}};var WF=class{constructor(t){this.cssClassStates={},this.getGui=t}addCssClass(t){let e=(t||"").split(" ");if(e.length>1){e.forEach(o=>this.addCssClass(o));return}if(this.cssClassStates[t]!==!0&&t.length){let o=this.getGui();o&&o.classList.add(t),this.cssClassStates[t]=!0}}removeCssClass(t){let e=(t||"").split(" ");if(e.length>1){e.forEach(o=>this.removeCssClass(o));return}if(this.cssClassStates[t]!==!1&&t.length){let o=this.getGui();o&&o.classList.remove(t),this.cssClassStates[t]=!1}}containsCssClass(t){let e=this.getGui();return e?e.classList.contains(t):!1}addOrRemoveCssClass(t,e){if(!t)return;if(t.indexOf(" ")>=0){let o=(t||"").split(" ");if(o.length>1){o.forEach(r=>this.addOrRemoveCssClass(r,e));return}}if(this.cssClassStates[t]!==e&&t.length){let o=this.getGui();o&&o.classList.toggle(t,e),this.cssClassStates[t]=e}}},zd=class vn extends A{constructor(e,i,o,r){super(),this.parentComp=e,this.tooltipShowDelayOverride=i,this.tooltipHideDelayOverride=o,this.shouldDisplayTooltip=r,this.SHOW_QUICK_TOOLTIP_DIFF=1e3,this.FADE_OUT_TOOLTIP_TIMEOUT=1e3,this.INTERACTIVE_HIDE_DELAY=100,this.interactionEnabled=!1,this.isInteractingWithTooltip=!1,this.state=0,this.tooltipInstanceCount=0,this.tooltipMouseTrack=!1}postConstruct(){this.gos.get("tooltipInteraction")&&(this.interactionEnabled=!0),this.tooltipTrigger=this.getTooltipTrigger(),this.tooltipMouseTrack=this.gos.get("tooltipMouseTrack");let e=this.parentComp.getGui();this.tooltipTrigger===0&&(this.addManagedListener(e,"mouseenter",this.onMouseEnter.bind(this)),this.addManagedListener(e,"mouseleave",this.onMouseLeave.bind(this))),this.tooltipTrigger===1&&(this.addManagedListener(e,"focusin",this.onFocusIn.bind(this)),this.addManagedListener(e,"focusout",this.onFocusOut.bind(this))),this.addManagedListener(e,"mousemove",this.onMouseMove.bind(this)),this.interactionEnabled||(this.addManagedListener(e,"mousedown",this.onMouseDown.bind(this)),this.addManagedListener(e,"keydown",this.onKeyDown.bind(this)))}getGridOptionsTooltipDelay(e){let i=this.gos.get(e);return i<0&&q(`${e} should not be lower than 0`),Math.max(200,i)}getTooltipDelay(e){var i,o;return e==="show"?(i=this.tooltipShowDelayOverride)!=null?i:this.getGridOptionsTooltipDelay("tooltipShowDelay"):(o=this.tooltipHideDelayOverride)!=null?o:this.getGridOptionsTooltipDelay("tooltipHideDelay")}destroy(){this.setToDoNothing(),super.destroy()}getTooltipTrigger(){let e=this.gos.get("tooltipTrigger");return!e||e==="hover"?0:1}onMouseEnter(e){this.interactionEnabled&&this.interactiveTooltipTimeoutId&&(this.unlockService(),this.startHideTimeout()),!Vo()&&(vn.isLocked?this.showTooltipTimeoutId=window.setTimeout(()=>{this.prepareToShowTooltip(e)},this.INTERACTIVE_HIDE_DELAY):this.prepareToShowTooltip(e))}onMouseMove(e){this.lastMouseEvent&&(this.lastMouseEvent=e),this.tooltipMouseTrack&&this.state===2&&this.tooltipComp&&this.positionTooltip()}onMouseDown(){this.setToDoNothing()}onMouseLeave(){this.interactionEnabled?this.lockService():this.setToDoNothing()}onFocusIn(){this.prepareToShowTooltip()}onFocusOut(e){var i;let o=e.relatedTarget,r=this.parentComp.getGui(),n=(i=this.tooltipComp)==null?void 0:i.getGui();this.isInteractingWithTooltip||r.contains(o)||this.interactionEnabled&&n?.contains(o)||this.setToDoNothing()}onKeyDown(){this.setToDoNothing()}prepareToShowTooltip(e){if(this.state!=0||vn.isLocked)return;let i=0;e&&(i=this.isLastTooltipHiddenRecently()?200:this.getTooltipDelay("show")),this.lastMouseEvent=e||null,this.showTooltipTimeoutId=window.setTimeout(this.showTooltip.bind(this),i),this.state=1}isLastTooltipHiddenRecently(){let e=new Date().getTime(),i=vn.lastTooltipHideTime;return e-i<this.SHOW_QUICK_TOOLTIP_DIFF}setToDoNothing(){this.state===2&&this.hideTooltip(),this.onBodyScrollEventCallback&&(this.onBodyScrollEventCallback(),this.onBodyScrollEventCallback=void 0),this.onColumnMovedEventCallback&&(this.onColumnMovedEventCallback(),this.onColumnMovedEventCallback=void 0),this.clearTimeouts(),this.state=0,this.lastMouseEvent=null}showTooltip(){let e=j({},this.parentComp.getTooltipParams());if(!T(e.value)||this.shouldDisplayTooltip&&!this.shouldDisplayTooltip()){this.setToDoNothing();return}this.state=2,this.tooltipInstanceCount++;let i=this.newTooltipComponentCallback.bind(this,this.tooltipInstanceCount);this.userComponentFactory.getTooltipCompDetails(e).newAgStackInstance().then(i)}hideTooltip(e){if(!e&&this.isInteractingWithTooltip)return;this.tooltipComp&&(this.destroyTooltipComp(),vn.lastTooltipHideTime=new Date().getTime());let i={type:f.EVENT_TOOLTIP_HIDE,parentGui:this.parentComp.getGui()};this.eventService.dispatchEvent(i),this.state=0}newTooltipComponentCallback(e,i){if(this.state!==2||this.tooltipInstanceCount!==e){this.getContext().destroyBean(i);return}let r=i.getGui();this.tooltipComp=i,r.classList.contains("ag-tooltip")||r.classList.add("ag-tooltip-custom"),this.tooltipTrigger===0&&r.classList.add("ag-tooltip-animate"),this.interactionEnabled&&r.classList.add("ag-tooltip-interactive");let n=this.localeService.getLocaleTextFunc(),s=this.popupService.addPopup({eChild:r,ariaLabel:n("ariaLabelTooltip","Tooltip")});s&&(this.tooltipPopupDestroyFunc=s.hideFunc),this.positionTooltip(),this.tooltipTrigger===1&&(this.onBodyScrollEventCallback=this.addManagedListener(this.eventService,f.EVENT_BODY_SCROLL,this.setToDoNothing.bind(this)),this.onColumnMovedEventCallback=this.addManagedListener(this.eventService,f.EVENT_COLUMN_MOVED,this.setToDoNothing.bind(this))),this.interactionEnabled&&(this.tooltipTrigger===0?(this.tooltipMouseEnterListener=this.addManagedListener(r,"mouseenter",this.onTooltipMouseEnter.bind(this))||null,this.tooltipMouseLeaveListener=this.addManagedListener(r,"mouseleave",this.onTooltipMouseLeave.bind(this))||null):(this.tooltipFocusInListener=this.addManagedListener(r,"focusin",this.onTooltipFocusIn.bind(this))||null,this.tooltipFocusOutListener=this.addManagedListener(r,"focusout",this.onTooltipFocusOut.bind(this))||null));let a={type:f.EVENT_TOOLTIP_SHOW,tooltipGui:r,parentGui:this.parentComp.getGui()};this.eventService.dispatchEvent(a),this.startHideTimeout()}onTooltipMouseEnter(){this.isInteractingWithTooltip=!0,this.unlockService()}onTooltipMouseLeave(){this.isInteractingWithTooltip=!1,this.lockService()}onTooltipFocusIn(){this.isInteractingWithTooltip=!0}onTooltipFocusOut(e){var i;let o=this.parentComp.getGui(),r=(i=this.tooltipComp)==null?void 0:i.getGui(),n=e.relatedTarget;r?.contains(n)||(this.isInteractingWithTooltip=!1,o.contains(n)?this.startHideTimeout():this.hideTooltip())}positionTooltip(){let e={type:"tooltip",ePopup:this.tooltipComp.getGui(),nudgeY:18,skipObserver:this.tooltipMouseTrack};this.lastMouseEvent?this.popupService.positionPopupUnderMouseEvent(He(j({},e),{mouseEvent:this.lastMouseEvent})):this.popupService.positionPopupByComponent(He(j({},e),{eventSource:this.parentComp.getGui(),position:"under",keepWithinBounds:!0,nudgeY:5}))}destroyTooltipComp(){this.tooltipComp.getGui().classList.add("ag-tooltip-hiding");let e=this.tooltipPopupDestroyFunc,i=this.tooltipComp,o=this.tooltipTrigger===0?this.FADE_OUT_TOOLTIP_TIMEOUT:0;window.setTimeout(()=>{e(),this.getContext().destroyBean(i)},o),this.clearTooltipListeners(),this.tooltipPopupDestroyFunc=void 0,this.tooltipComp=void 0}clearTooltipListeners(){[this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener,this.tooltipFocusInListener,this.tooltipFocusOutListener].forEach(e=>{e&&e()}),this.tooltipMouseEnterListener=this.tooltipMouseLeaveListener=this.tooltipFocusInListener=this.tooltipFocusOutListener=null}lockService(){vn.isLocked=!0,this.interactiveTooltipTimeoutId=window.setTimeout(()=>{this.unlockService(),this.setToDoNothing()},this.INTERACTIVE_HIDE_DELAY)}unlockService(){vn.isLocked=!1,this.clearInteractiveTimeout()}startHideTimeout(){this.clearHideTimeout(),this.hideTooltipTimeoutId=window.setTimeout(this.hideTooltip.bind(this),this.getTooltipDelay("hide"))}clearShowTimeout(){this.showTooltipTimeoutId&&(window.clearTimeout(this.showTooltipTimeoutId),this.showTooltipTimeoutId=void 0)}clearHideTimeout(){this.hideTooltipTimeoutId&&(window.clearTimeout(this.hideTooltipTimeoutId),this.hideTooltipTimeoutId=void 0)}clearInteractiveTimeout(){this.interactiveTooltipTimeoutId&&(window.clearTimeout(this.interactiveTooltipTimeoutId),this.interactiveTooltipTimeoutId=void 0)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout(),this.clearInteractiveTimeout()}};zd.isLocked=!1;g([v("popupService")],zd.prototype,"popupService",2);g([v("userComponentFactory")],zd.prototype,"userComponentFactory",2);g([I],zd.prototype,"postConstruct",1);var UF=zd,Ho=class extends A{constructor(t,e){super(),this.ctrl=t,e&&(this.beans=e)}postConstruct(){this.refreshToolTip()}setBrowserTooltip(t){let e="title",i=this.ctrl.getGui();i&&(t!=null&&t!=""?i.setAttribute(e,t):i.removeAttribute(e))}updateTooltipText(){this.tooltip=this.ctrl.getTooltipValue()}createTooltipFeatureIfNeeded(){var t,e,i,o;if(this.tooltipManager!=null)return;let r={getTooltipParams:()=>this.getTooltipParams(),getGui:()=>this.ctrl.getGui()};this.tooltipManager=this.createBean(new UF(r,(e=(t=this.ctrl).getTooltipShowDelayOverride)==null?void 0:e.call(t),(o=(i=this.ctrl).getTooltipHideDelayOverride)==null?void 0:o.call(i),this.ctrl.shouldDisplayTooltip),this.beans.context)}refreshToolTip(){this.browserTooltips=this.beans.gos.get("enableBrowserTooltips"),this.updateTooltipText(),this.browserTooltips?(this.setBrowserTooltip(this.tooltip),this.tooltipManager&&(this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context))):(this.setBrowserTooltip(null),this.createTooltipFeatureIfNeeded())}getTooltipParams(){let t=this.ctrl,e=t.getColumn?t.getColumn():void 0,i=t.getColDef?t.getColDef():void 0,o=t.getRowNode?t.getRowNode():void 0;return{location:t.getLocation(),colDef:i,column:e,rowIndex:t.getRowIndex?t.getRowIndex():void 0,node:o,data:o?o.data:void 0,value:this.getTooltipText(),valueFormatted:t.getValueFormatted?t.getValueFormatted():void 0,hideTooltipCallback:()=>{var r;return(r=this.tooltipManager)==null?void 0:r.hideTooltip(!0)}}}getTooltipText(){return this.tooltip}destroy(){this.tooltipManager&&(this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context)),super.destroy()}};g([v("beans")],Ho.prototype,"beans",2);g([I],Ho.prototype,"postConstruct",1);var jF=new ia,Gd=class um extends A{constructor(e){super(),this.displayed=!0,this.visible=!0,this.compId=jF.next(),this.cssClassManager=new WF(()=>this.eGui),e&&this.setTemplate(e)}preConstructOnComponent(){this.usingBrowserTooltips=this.gos.get("enableBrowserTooltips")}getCompId(){return this.compId}getTooltipParams(){return{value:this.tooltipText,location:"UNKNOWN"}}setTooltip(e){let{newTooltipText:i,showDelayOverride:o,hideDelayOverride:r,location:n,shouldDisplayTooltip:s}=e||{};this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),this.tooltipText!==i&&(this.tooltipText=i);let a=()=>this.tooltipText;i!=null&&(this.tooltipFeature=this.createBean(new Ho({getTooltipValue:a,getGui:()=>this.getGui(),getLocation:()=>n??"UNKNOWN",getColDef:e?.getColDef,getColumn:e?.getColumn,getTooltipShowDelayOverride:o!=null?()=>o:void 0,getTooltipHideDelayOverride:r!=null?()=>r:void 0,shouldDisplayTooltip:s})))}createChildComponentsFromTags(e,i){Qx(e.childNodes).forEach(r=>{if(!(r instanceof HTMLElement))return;let n=this.createComponentFromElement(r,s=>{s.getGui()&&this.copyAttributesFromNode(r,s.getGui())},i);if(n){if(n.addItems&&r.children.length){this.createChildComponentsFromTags(r,i);let s=Array.prototype.slice.call(r.children);n.addItems(s)}this.swapComponentForNode(n,e,r)}else r.childNodes&&this.createChildComponentsFromTags(r,i)})}createComponentFromElement(e,i,o){let r=e.nodeName,n=o?o[e.getAttribute("ref")]:void 0,s=this.agStackComponentsRegistry.getComponentClass(r);if(s){um.elementGettingCreated=e;let a=new s(n);return a.setParentComponent(this),this.createBean(a,null,i),a}return null}copyAttributesFromNode(e,i){Xx(e.attributes,(o,r)=>i.setAttribute(o,r))}swapComponentForNode(e,i,o){let r=e.getGui();i.replaceChild(r,o),i.insertBefore(document.createComment(o.nodeName),r),this.addDestroyFunc(this.destroyBean.bind(this,e)),this.swapInComponentForQuerySelectors(e,o)}swapInComponentForQuerySelectors(e,i){let o=this;this.iterateOverQuerySelectors(r=>{o[r.attributeName]===i&&(o[r.attributeName]=e)})}iterateOverQuerySelectors(e){let i=Object.getPrototypeOf(this);for(;i!=null;){let o=i.__agComponentMetaData,r=ph(i.constructor);o&&o[r]&&o[r].querySelectors&&o[r].querySelectors.forEach(n=>e(n)),i=Object.getPrototypeOf(i)}}activateTabIndex(e){let i=this.gos.get("tabIndex");e||(e=[]),e.length||e.push(this.getGui()),e.forEach(o=>o.setAttribute("tabindex",i.toString()))}setTemplate(e,i){let o=ii(e);this.setTemplateFromElement(o,i)}setTemplateFromElement(e,i){this.eGui=e,this.eGui.__agComponent=this,this.wireQuerySelectors(),this.getContext()&&this.createChildComponentsFromTags(this.getGui(),i)}createChildComponentsPreConstruct(){this.getGui()&&this.createChildComponentsFromTags(this.getGui())}wireQuerySelectors(){if(!this.eGui)return;let e=this;this.iterateOverQuerySelectors(i=>{let o=n=>e[i.attributeName]=n;if(i.refSelector&&this.getAttribute("ref")===i.refSelector)o(this.eGui);else{let n=this.eGui.querySelector(i.querySelector);n&&o(n.__agComponent||n)}})}getGui(){return this.eGui}getFocusableElement(){return this.eGui}getAriaElement(){return this.getFocusableElement()}setParentComponent(e){this.parentComponent=e}getParentComponent(){return this.parentComponent}setGui(e){this.eGui=e}queryForHtmlElement(e){return this.eGui.querySelector(e)}queryForHtmlInputElement(e){return this.eGui.querySelector(e)}appendChild(e,i){if(e!=null)if(i||(i=this.eGui),Ld(e))i.appendChild(e);else{let o=e;i.appendChild(o.getGui())}}isDisplayed(){return this.displayed}setVisible(e,i={}){if(e!==this.visible){this.visible=e;let{skipAriaHidden:o}=i;qx(this.eGui,e,{skipAriaHidden:o})}}setDisplayed(e,i={}){if(e!==this.displayed){this.displayed=e;let{skipAriaHidden:o}=i;me(this.eGui,e,{skipAriaHidden:o});let r={type:um.EVENT_DISPLAYED_CHANGED,visible:this.displayed};this.dispatchEvent(r)}}destroy(){this.parentComponent&&(this.parentComponent=void 0),this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature));let e=this.eGui;e&&e.__agComponent&&(e.__agComponent=void 0),super.destroy()}addGuiEventListener(e,i,o){this.eGui.addEventListener(e,i,o),this.addDestroyFunc(()=>this.eGui.removeEventListener(e,i))}addCssClass(e){this.cssClassManager.addCssClass(e)}removeCssClass(e){this.cssClassManager.removeCssClass(e)}containsCssClass(e){return this.cssClassManager.containsCssClass(e)}addOrRemoveCssClass(e,i){this.cssClassManager.addOrRemoveCssClass(e,i)}getAttribute(e){let{eGui:i}=this;return i?i.getAttribute(e):null}getRefElement(e){return this.queryForHtmlElement(`[ref="${e}"]`)}};Gd.EVENT_DISPLAYED_CHANGED="displayedChanged";g([v("agStackComponentsRegistry")],Gd.prototype,"agStackComponentsRegistry",2);g([JS],Gd.prototype,"preConstructOnComponent",1);g([JS],Gd.prototype,"createChildComponentsPreConstruct",1);var J=Gd;function k(t){return qF.bind(this,`[ref=${t}]`,t)}function qF(t,e,i,o,r){if(t===null){console.error("AG Grid: QuerySelector selector should not be null");return}if(typeof r=="number"){console.error("AG Grid: QuerySelector should be on an attribute");return}KF(i,"querySelectors",{attributeName:o,querySelector:t,refSelector:e})}function KF(t,e,i){let o=$F(t,ph(t.constructor));o[e]||(o[e]=[]),o[e].push(i)}function $F(t,e){return t.__agComponentMetaData||(t.__agComponentMetaData={}),t.__agComponentMetaData[e]||(t.__agComponentMetaData[e]={}),t.__agComponentMetaData[e]}var rv=class extends J{constructor(){super(`
            <div class="ag-floating-filter-input" role="presentation">
                <ag-input-text-field ref="eFloatingFilterText"></ag-input-text-field>
            </div>`)}destroy(){super.destroy()}init(t){this.params=t;let e=this.columnModel.getDisplayNameForColumn(t.column,"header",!0),i=this.localeService.getLocaleTextFunc();this.eFloatingFilterText.setDisabled(!0).setInputAriaLabel(`${e} ${i("ariaFilterInput","Filter Input")}`)}onParentModelChanged(t){if(t==null){this.eFloatingFilterText.setValue("");return}this.params.parentFilterInstance(e=>{if(e.getModelAsString){let i=e.getModelAsString(t);this.eFloatingFilterText.setValue(i)}})}onParamsUpdated(t){this.refresh(t)}refresh(t){this.init(t)}};g([k("eFloatingFilterText")],rv.prototype,"eFloatingFilterText",2);g([v("columnModel")],rv.prototype,"columnModel",2);var d_=class{constructor(t,e,i,o,r){this.alive=!0,this.context=t,this.eParent=o,e.getDateCompDetails(i).newAgStackInstance().then(a=>{if(!this.alive){t.destroyBean(a);return}this.dateComp=a,a&&(o.appendChild(a.getGui()),a.afterGuiAttached&&a.afterGuiAttached(),this.tempValue&&a.setDate(this.tempValue),this.disabled!=null&&this.setDateCompDisabled(this.disabled),r?.(this))})}destroy(){this.alive=!1,this.dateComp=this.context.destroyBean(this.dateComp)}getDate(){return this.dateComp?this.dateComp.getDate():this.tempValue}setDate(t){this.dateComp?this.dateComp.setDate(t):this.tempValue=t}setDisabled(t){this.dateComp?this.setDateCompDisabled(t):this.disabled=t}setDisplayed(t){me(this.eParent,t)}setInputPlaceholder(t){this.dateComp&&this.dateComp.setInputPlaceholder&&this.dateComp.setInputPlaceholder(t)}setInputAriaLabel(t){this.dateComp&&this.dateComp.setInputAriaLabel&&this.dateComp.setInputAriaLabel(t)}afterGuiAttached(t){this.dateComp&&typeof this.dateComp.afterGuiAttached=="function"&&this.dateComp.afterGuiAttached(t)}updateParams(t){var e,i;let o=!1;(e=this.dateComp)!=null&&e.refresh&&typeof this.dateComp.refresh=="function"&&this.dateComp.refresh(t)!==null&&(o=!0),!o&&((i=this.dateComp)!=null&&i.onParamsUpdated)&&typeof this.dateComp.onParamsUpdated=="function"&&this.dateComp.onParamsUpdated(t)!==null&&q("Custom date component method 'onParamsUpdated' is deprecated. Use 'refresh' instead.")}setDateCompDisabled(t){this.dateComp!=null&&this.dateComp.setDisabled!=null&&this.dateComp.setDisabled(t)}},c_=class{constructor(){this.customFilterOptions={}}init(t,e){this.filterOptions=t.filterOptions||e,this.mapCustomOptions(),this.selectDefaultItem(t)}getFilterOptions(){return this.filterOptions}mapCustomOptions(){this.filterOptions&&this.filterOptions.forEach(t=>{if(typeof t=="string")return;let e=[["displayKey"],["displayName"],["predicate","test"]],i=o=>o.some(r=>t[r]!=null)?!0:(console.warn(`AG Grid: ignoring FilterOptionDef as it doesn't contain one of '${o}'`),!1);if(!e.every(i)){this.filterOptions=this.filterOptions.filter(o=>o===t)||[];return}this.customFilterOptions[t.displayKey]=t})}selectDefaultItem(t){if(t.defaultOption)this.defaultOption=t.defaultOption;else if(this.filterOptions.length>=1){let e=this.filterOptions[0];typeof e=="string"?this.defaultOption=e:e.displayKey?this.defaultOption=e.displayKey:console.warn("AG Grid: invalid FilterOptionDef supplied as it doesn't contain a 'displayKey'")}else console.warn("AG Grid: no filter options for filter")}getDefaultOption(){return this.defaultOption}getCustomOption(t){return this.customFilterOptions[t]}},u_={applyFilter:"Apply",clearFilter:"Clear",resetFilter:"Reset",cancelFilter:"Cancel",textFilter:"Text Filter",numberFilter:"Number Filter",dateFilter:"Date Filter",setFilter:"Set Filter",filterOoo:"Filter...",empty:"Choose one",equals:"Equals",notEqual:"Does not equal",lessThan:"Less than",greaterThan:"Greater than",inRange:"Between",inRangeStart:"From",inRangeEnd:"To",lessThanOrEqual:"Less than or equal to",greaterThanOrEqual:"Greater than or equal to",contains:"Contains",notContains:"Does not contain",startsWith:"Begins with",endsWith:"Ends with",blank:"Blank",notBlank:"Not blank",before:"Before",after:"After",andCondition:"AND",orCondition:"OR",dateFormatOoo:"yyyy-mm-dd"},Eh=class h_ extends A{constructor(e,i={}){super(),this.eFocusableElement=e,this.callbacks=i,this.callbacks=j({shouldStopEventPropagation:()=>!1,onTabKeyDown:o=>{if(o.defaultPrevented)return;let r=this.focusService.findNextFocusableElement(this.eFocusableElement,!1,o.shiftKey);r&&(r.focus(),o.preventDefault())}},i)}postConstruct(){this.eFocusableElement.classList.add(h_.FOCUS_MANAGED_CLASS),this.addKeyDownListeners(this.eFocusableElement),this.callbacks.onFocusIn&&this.addManagedListener(this.eFocusableElement,"focusin",this.callbacks.onFocusIn),this.callbacks.onFocusOut&&this.addManagedListener(this.eFocusableElement,"focusout",this.callbacks.onFocusOut)}addKeyDownListeners(e){this.addManagedListener(e,"keydown",i=>{if(!(i.defaultPrevented||$i(i))){if(this.callbacks.shouldStopEventPropagation(i)){Qi(i);return}i.key===S.TAB?this.callbacks.onTabKeyDown(i):this.callbacks.handleKeyDown&&this.callbacks.handleKeyDown(i)}})}};Eh.FOCUS_MANAGED_CLASS="ag-focus-managed";g([v("focusService")],Eh.prototype,"focusService",2);g([I],Eh.prototype,"postConstruct",1);var Fr=Eh,g_="ag-resizer-wrapper",YF=`<div class="${g_}">
        <div ref="eTopLeftResizer" class="ag-resizer ag-resizer-topLeft"></div>
        <div ref="eTopResizer" class="ag-resizer ag-resizer-top"></div>
        <div ref="eTopRightResizer" class="ag-resizer ag-resizer-topRight"></div>
        <div ref="eRightResizer" class="ag-resizer ag-resizer-right"></div>
        <div ref="eBottomRightResizer" class="ag-resizer ag-resizer-bottomRight"></div>
        <div ref="eBottomResizer" class="ag-resizer ag-resizer-bottom"></div>
        <div ref="eBottomLeftResizer" class="ag-resizer ag-resizer-bottomLeft"></div>
        <div ref="eLeftResizer" class="ag-resizer ag-resizer-left"></div>
    </div>`,ha=class extends A{constructor(t,e){super(),this.element=t,this.dragStartPosition={x:0,y:0},this.position={x:0,y:0},this.lastSize={width:-1,height:-1},this.positioned=!1,this.resizersAdded=!1,this.resizeListeners=[],this.boundaryEl=null,this.isResizing=!1,this.isMoving=!1,this.resizable={},this.movable=!1,this.currentResizer=null,this.config=Object.assign({},{popup:!1},e)}center(){let{clientHeight:t,clientWidth:e}=this.offsetParent,i=e/2-this.getWidth()/2,o=t/2-this.getHeight()/2;this.offsetElement(i,o)}initialisePosition(){if(this.positioned)return;let{centered:t,forcePopupParentAsOffsetParent:e,minWidth:i,width:o,minHeight:r,height:n,x:s,y:a}=this.config;this.offsetParent||this.setOffsetParent();let l=0,d=0,c=ni(this.element);if(c){let u=this.findBoundaryElement(),h=window.getComputedStyle(u);if(h.minWidth!=null){let p=u.offsetWidth-this.element.offsetWidth;d=parseInt(h.minWidth,10)-p}if(h.minHeight!=null){let p=u.offsetHeight-this.element.offsetHeight;l=parseInt(h.minHeight,10)-p}}if(this.minHeight=r||l,this.minWidth=i||d,o&&this.setWidth(o),n&&this.setHeight(n),(!o||!n)&&this.refreshSize(),t)this.center();else if(s||a)this.offsetElement(s,a);else if(c&&e){let u=this.boundaryEl,h=!0;if(u||(u=this.findBoundaryElement(),h=!1),u){let p=parseFloat(u.style.top),m=parseFloat(u.style.left);h?this.offsetElement(isNaN(m)?0:m,isNaN(p)?0:p):this.setPosition(m,p)}}this.positioned=!!this.offsetParent}isPositioned(){return this.positioned}getPosition(){return this.position}setMovable(t,e){if(!this.config.popup||t===this.movable)return;this.movable=t;let i=this.moveElementDragListener||{eElement:e,onDragStart:this.onMoveStart.bind(this),onDragging:this.onMove.bind(this),onDragStop:this.onMoveEnd.bind(this)};t?(this.dragService.addDragSource(i),this.moveElementDragListener=i):(this.dragService.removeDragSource(i),this.moveElementDragListener=void 0)}setResizable(t){if(this.clearResizeListeners(),t?this.addResizers():this.removeResizers(),typeof t=="boolean"){if(t===!1)return;t={topLeft:t,top:t,topRight:t,right:t,bottomRight:t,bottom:t,bottomLeft:t,left:t}}Object.keys(t).forEach(e=>{let o=!!t[e],r=this.getResizerElement(e),n={dragStartPixels:0,eElement:r,onDragStart:s=>this.onResizeStart(s,e),onDragging:this.onResize.bind(this),onDragStop:s=>this.onResizeEnd(s,e)};(o||!this.isAlive()&&!o)&&(o?(this.dragService.addDragSource(n),this.resizeListeners.push(n),r.style.pointerEvents="all"):r.style.pointerEvents="none",this.resizable[e]=o)})}removeSizeFromEl(){this.element.style.removeProperty("height"),this.element.style.removeProperty("width"),this.element.style.removeProperty("flex")}restoreLastSize(){this.element.style.flex="0 0 auto";let{height:t,width:e}=this.lastSize;e!==-1&&(this.element.style.width=`${e}px`),t!==-1&&(this.element.style.height=`${t}px`)}getHeight(){return this.element.offsetHeight}setHeight(t){let{popup:e}=this.config,i=this.element,o=!1;if(typeof t=="string"&&t.indexOf("%")!==-1)Sn(i,t),t=$m(i),o=!0;else if(t=Math.max(this.minHeight,t),this.positioned){let r=this.getAvailableHeight();r&&t>r&&(t=r)}this.getHeight()!==t&&(o?(i.style.maxHeight="unset",i.style.minHeight="unset"):e?Sn(i,t):(i.style.height=`${t}px`,i.style.flex="0 0 auto",this.lastSize.height=typeof t=="number"?t:parseFloat(t)))}getAvailableHeight(){let{popup:t,forcePopupParentAsOffsetParent:e}=this.config;this.positioned||this.initialisePosition();let{clientHeight:i}=this.offsetParent;if(!i)return null;let o=this.element.getBoundingClientRect(),r=this.offsetParent.getBoundingClientRect(),n=t?this.position.y:o.top,s=t?0:r.top,a=0;if(e){let d=this.element.parentElement;if(d){let{bottom:c}=d.getBoundingClientRect();a=c-o.bottom}}return i+s-n-a}getWidth(){return this.element.offsetWidth}setWidth(t){let e=this.element,{popup:i}=this.config,o=!1;if(typeof t=="string"&&t.indexOf("%")!==-1)Ii(e,t),t=ud(e),o=!0;else if(this.positioned){t=Math.max(this.minWidth,t);let{clientWidth:r}=this.offsetParent,n=i?this.position.x:this.element.getBoundingClientRect().left;r&&t+n>r&&(t=r-n)}this.getWidth()!==t&&(o?(e.style.maxWidth="unset",e.style.minWidth="unset"):this.config.popup?Ii(e,t):(e.style.width=`${t}px`,e.style.flex=" unset",this.lastSize.width=typeof t=="number"?t:parseFloat(t)))}offsetElement(t=0,e=0){let{forcePopupParentAsOffsetParent:i}=this.config,o=i?this.boundaryEl:this.element;o&&(this.popupService.positionPopup({ePopup:o,keepWithinBounds:!0,skipObserver:this.movable||this.isResizable(),updatePosition:()=>({x:t,y:e})}),this.setPosition(parseFloat(o.style.left),parseFloat(o.style.top)))}constrainSizeToAvailableHeight(t){if(!this.config.forcePopupParentAsOffsetParent)return;let e=()=>{let i=this.getAvailableHeight();this.element.style.setProperty("max-height",`${i}px`)};t?this.resizeObserverSubscriber=this.resizeObserverService.observeResize(this.popupService.getPopupParent(),e):(this.element.style.removeProperty("max-height"),this.resizeObserverSubscriber&&(this.resizeObserverSubscriber(),this.resizeObserverSubscriber=void 0))}setPosition(t,e){this.position.x=t,this.position.y=e}updateDragStartPosition(t,e){this.dragStartPosition={x:t,y:e}}calculateMouseMovement(t){let{e,isLeft:i,isTop:o,anywhereWithin:r,topBuffer:n}=t,s=e.clientX-this.dragStartPosition.x,a=e.clientY-this.dragStartPosition.y,l=this.shouldSkipX(e,!!i,!!r,s)?0:s,d=this.shouldSkipY(e,!!o,n,a)?0:a;return{movementX:l,movementY:d}}shouldSkipX(t,e,i,o){let r=this.element.getBoundingClientRect(),n=this.offsetParent.getBoundingClientRect(),s=this.boundaryEl.getBoundingClientRect(),a=this.config.popup?this.position.x:r.left,l=a<=0&&n.left>=t.clientX||n.right<=t.clientX&&n.right<=s.right;return l?!0:(e?l=o<0&&t.clientX>a+n.left||o>0&&t.clientX<a+n.left:i?l=o<0&&t.clientX>s.right||o>0&&t.clientX<a+n.left:l=o<0&&t.clientX>s.right||o>0&&t.clientX<s.right,l)}shouldSkipY(t,e,i=0,o){let r=this.element.getBoundingClientRect(),n=this.offsetParent.getBoundingClientRect(),s=this.boundaryEl.getBoundingClientRect(),a=this.config.popup?this.position.y:r.top,l=a<=0&&n.top>=t.clientY||n.bottom<=t.clientY&&n.bottom<=s.bottom;return l?!0:(e?l=o<0&&t.clientY>a+n.top+i||o>0&&t.clientY<a+n.top:l=o<0&&t.clientY>s.bottom||o>0&&t.clientY<s.bottom,l)}createResizeMap(){let t=this.element;this.resizerMap={topLeft:{element:t.querySelector("[ref=eTopLeftResizer]")},top:{element:t.querySelector("[ref=eTopResizer]")},topRight:{element:t.querySelector("[ref=eTopRightResizer]")},right:{element:t.querySelector("[ref=eRightResizer]")},bottomRight:{element:t.querySelector("[ref=eBottomRightResizer]")},bottom:{element:t.querySelector("[ref=eBottomResizer]")},bottomLeft:{element:t.querySelector("[ref=eBottomLeftResizer]")},left:{element:t.querySelector("[ref=eLeftResizer]")}}}addResizers(){if(this.resizersAdded)return;let t=this.element;if(!t)return;let i=new DOMParser().parseFromString(YF,"text/html").body;t.appendChild(i.firstChild),this.createResizeMap(),this.resizersAdded=!0}removeResizers(){this.resizerMap=void 0;let t=this.element.querySelector(`.${g_}`);t&&this.element.removeChild(t),this.resizersAdded=!1}getResizerElement(t){return this.resizerMap[t].element}onResizeStart(t,e){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.currentResizer={isTop:!!e.match(/top/i),isRight:!!e.match(/right/i),isBottom:!!e.match(/bottom/i),isLeft:!!e.match(/left/i)},this.element.classList.add("ag-resizing"),this.resizerMap[e].element.classList.add("ag-active");let{popup:i,forcePopupParentAsOffsetParent:o}=this.config;!i&&!o&&this.applySizeToSiblings(this.currentResizer.isBottom||this.currentResizer.isTop),this.isResizing=!0,this.updateDragStartPosition(t.clientX,t.clientY)}getSiblings(){let e=this.element.parentElement;return e?Array.prototype.slice.call(e.children).filter(i=>!i.classList.contains("ag-hidden")):null}getMinSizeOfSiblings(){let t=this.getSiblings()||[],e=0,i=0;for(let o=0;o<t.length;o++){let r=t[o],n=!!r.style.flex&&r.style.flex!=="0 0 auto";if(r===this.element)continue;let s=this.minHeight||0,a=this.minWidth||0;if(n){let l=window.getComputedStyle(r);l.minHeight&&(s=parseInt(l.minHeight,10)),l.minWidth&&(a=parseInt(l.minWidth,10))}else s=r.offsetHeight,a=r.offsetWidth;e+=s,i+=a}return{height:e,width:i}}applySizeToSiblings(t){let e=null,i=this.getSiblings();if(i){for(let o=0;o<i.length;o++){let r=i[o];r!==e&&(t?r.style.height=`${r.offsetHeight}px`:r.style.width=`${r.offsetWidth}px`,r.style.flex="0 0 auto",r===this.element&&(e=i[o+1]))}e&&(e.style.removeProperty("height"),e.style.removeProperty("min-height"),e.style.removeProperty("max-height"),e.style.flex="1 1 auto")}}isResizable(){return Object.values(this.resizable).some(t=>t)}onResize(t){if(!this.isResizing||!this.currentResizer)return;let{popup:e,forcePopupParentAsOffsetParent:i}=this.config,{isTop:o,isRight:r,isBottom:n,isLeft:s}=this.currentResizer,a=r||s,l=n||o,{movementX:d,movementY:c}=this.calculateMouseMovement({e:t,isLeft:s,isTop:o}),u=this.position.x,h=this.position.y,p=0,m=0;if(a&&d){let C=s?-1:1,w=this.getWidth(),b=w+d*C,y=!1;s&&(p=w-b,(u+p<=0||b<=this.minWidth)&&(y=!0,p=0)),y||this.setWidth(b)}if(l&&c){let C=o?-1:1,w=this.getHeight(),b=w+c*C,y=!1;o?(m=w-b,(h+m<=0||b<=this.minHeight)&&(y=!0,m=0)):!this.config.popup&&!this.config.forcePopupParentAsOffsetParent&&w<b&&this.getMinSizeOfSiblings().height+b>this.element.parentElement.offsetHeight&&(y=!0),y||this.setHeight(b)}this.updateDragStartPosition(t.clientX,t.clientY),((e||i)&&p||m)&&this.offsetElement(u+p,h+m)}onResizeEnd(t,e){this.isResizing=!1,this.currentResizer=null,this.boundaryEl=null;let i={type:"resize"};this.element.classList.remove("ag-resizing"),this.resizerMap[e].element.classList.remove("ag-active"),this.dispatchEvent(i)}refreshSize(){let t=this.element;this.config.popup&&(this.config.width||this.setWidth(t.offsetWidth),this.config.height||this.setHeight(t.offsetHeight))}onMoveStart(t){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.isMoving=!0,this.element.classList.add("ag-moving"),this.updateDragStartPosition(t.clientX,t.clientY)}onMove(t){if(!this.isMoving)return;let{x:e,y:i}=this.position,o;this.config.calculateTopBuffer&&(o=this.config.calculateTopBuffer());let{movementX:r,movementY:n}=this.calculateMouseMovement({e:t,isTop:!0,anywhereWithin:!0,topBuffer:o});this.offsetElement(e+r,i+n),this.updateDragStartPosition(t.clientX,t.clientY)}onMoveEnd(){this.isMoving=!1,this.boundaryEl=null,this.element.classList.remove("ag-moving")}setOffsetParent(){this.config.forcePopupParentAsOffsetParent?this.offsetParent=this.popupService.getPopupParent():this.offsetParent=this.element.offsetParent}findBoundaryElement(){let t=this.element;for(;t;){if(window.getComputedStyle(t).position!=="static")return t;t=t.parentElement}return this.element}clearResizeListeners(){for(;this.resizeListeners.length;){let t=this.resizeListeners.pop();this.dragService.removeDragSource(t)}}destroy(){super.destroy(),this.moveElementDragListener&&this.dragService.removeDragSource(this.moveElementDragListener),this.constrainSizeToAvailableHeight(!1),this.clearResizeListeners(),this.removeResizers()}};g([v("popupService")],ha.prototype,"popupService",2);g([v("resizeObserverService")],ha.prototype,"resizeObserverService",2);g([v("dragService")],ha.prototype,"dragService",2);var Dh=class Jl extends J{constructor(e){super(),this.filterNameKey=e,this.applyActive=!1,this.hidePopup=null,this.debouncePending=!1,this.appliedModel=null,this.buttonListeners=[]}postConstruct(){this.resetTemplate(),this.createManagedBean(new Fr(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)})),this.positionableFeature=new ha(this.getPositionableElement(),{forcePopupParentAsOffsetParent:!0}),this.createBean(this.positionableFeature)}handleKeyDown(e){}getFilterTitle(){return this.translate(this.filterNameKey)}isFilterActive(){return!!this.appliedModel}resetTemplate(e){let i=this.getGui();i&&i.removeEventListener("submit",this.onFormSubmit);let o=`
            <form class="ag-filter-wrapper">
                <div class="ag-filter-body-wrapper ag-${this.getCssIdentifier()}-body-wrapper" ref="eFilterBody">
                    ${this.createBodyTemplate()}
                </div>
            </form>`;this.setTemplate(o,e),i=this.getGui(),i&&i.addEventListener("submit",this.onFormSubmit)}isReadOnly(){return!!this.providedFilterParams.readOnly}init(e){this.setParams(e),this.resetUiToDefaults(!0).then(()=>{this.updateUiVisibility(),this.setupOnBtApplyDebounce()})}setParams(e){this.providedFilterParams=e,this.applyActive=Jl.isUseApplyButton(e),this.resetButtonsPanel()}updateParams(e){this.providedFilterParams=e,this.applyActive=Jl.isUseApplyButton(e),this.resetUiToActiveModel(this.getModel(),()=>{this.updateUiVisibility(),this.setupOnBtApplyDebounce()})}resetButtonsPanel(){let{buttons:e}=this.providedFilterParams,i=e&&e.length>0&&!this.isReadOnly();if(this.eButtonsPanel?(Je(this.eButtonsPanel),this.buttonListeners.forEach(n=>n?.()),this.buttonListeners=[]):i&&(this.eButtonsPanel=document.createElement("div"),this.eButtonsPanel.classList.add("ag-filter-apply-panel")),!i){this.eButtonsPanel&&qi(this.eButtonsPanel);return}let o=document.createDocumentFragment(),r=n=>{let s,a;switch(n){case"apply":s=this.translate("applyFilter"),a=c=>this.onBtApply(!1,!1,c);break;case"clear":s=this.translate("clearFilter"),a=()=>this.onBtClear();break;case"reset":s=this.translate("resetFilter"),a=()=>this.onBtReset();break;case"cancel":s=this.translate("cancelFilter"),a=c=>{this.onBtCancel(c)};break;default:console.warn("AG Grid: Unknown button type specified");return}let d=ii(`<button
                    type="${n==="apply"?"submit":"button"}"
                    ref="${n}FilterButton"
                    class="ag-button ag-standard-button ag-filter-apply-panel-button"
                >${s}
                </button>`);this.buttonListeners.push(this.addManagedListener(d,"click",a)),o.append(d)};ov(e).forEach(n=>r(n)),this.eButtonsPanel.append(o),this.getGui().appendChild(this.eButtonsPanel)}getDefaultDebounceMs(){return 0}setupOnBtApplyDebounce(){let e=Jl.getDebounceMs(this.providedFilterParams,this.getDefaultDebounceMs()),i=Ut(this.checkApplyDebounce.bind(this),e);this.onBtApplyDebounce=()=>{this.debouncePending=!0,i()}}checkApplyDebounce(){this.debouncePending&&(this.debouncePending=!1,this.onBtApply())}getModel(){return this.appliedModel?this.appliedModel:null}setModel(e){return(e!=null?this.setModelIntoUi(e):this.resetUiToDefaults()).then(()=>{this.updateUiVisibility(),this.applyModel("api")})}onBtCancel(e){this.resetUiToActiveModel(this.getModel(),()=>{this.handleCancelEnd(e)})}handleCancelEnd(e){this.providedFilterParams.closeOnApply&&this.close(e)}resetUiToActiveModel(e,i){let o=()=>{this.onUiChanged(!1,"prevent"),i?.()};e!=null?this.setModelIntoUi(e).then(o):this.resetUiToDefaults().then(o)}onBtClear(){this.resetUiToDefaults().then(()=>this.onUiChanged())}onBtReset(){this.onBtClear(),this.onBtApply()}applyModel(e="api"){let i=this.getModelFromUi();if(!this.isModelValid(i))return!1;let o=this.appliedModel;return this.appliedModel=i,!this.areModelsEqual(o,i)}isModelValid(e){return!0}onFormSubmit(e){e.preventDefault()}onBtApply(e=!1,i=!1,o){o&&o.preventDefault(),this.applyModel(i?"rowDataUpdated":"ui")&&this.providedFilterParams.filterChangedCallback({afterFloatingFilter:e,afterDataChange:i,source:"columnFilter"});let{closeOnApply:r}=this.providedFilterParams;r&&this.applyActive&&!e&&!i&&this.close(o)}onNewRowsLoaded(){}close(e){if(!this.hidePopup)return;let i=e,o=i&&i.key,r;(o==="Enter"||o==="Space")&&(r={keyboardEvent:i}),this.hidePopup(r),this.hidePopup=null}onUiChanged(e=!1,i){if(this.updateUiVisibility(),this.providedFilterParams.filterModifiedCallback(),this.applyActive&&!this.isReadOnly()){let o=this.isModelValid(this.getModelFromUi()),r=this.getRefElement("applyFilterButton");r&&ta(r,!o)}e&&!i||i==="immediately"?this.onBtApply(e):(!this.applyActive&&!i||i==="debounce")&&this.onBtApplyDebounce()}afterGuiAttached(e){e&&(this.hidePopup=e.hidePopup),this.refreshFilterResizer(e?.container)}refreshFilterResizer(e){if(!this.positionableFeature||e==="toolPanel")return;let i=e==="floatingFilter"||e==="columnFilter",{positionableFeature:o,gos:r}=this;i?(o.restoreLastSize(),o.setResizable(r.get("enableRtl")?{bottom:!0,bottomLeft:!0,left:!0}:{bottom:!0,bottomRight:!0,right:!0})):(this.positionableFeature.removeSizeFromEl(),this.positionableFeature.setResizable(!1)),this.positionableFeature.constrainSizeToAvailableHeight(!0)}afterGuiDetached(){this.checkApplyDebounce(),this.positionableFeature&&this.positionableFeature.constrainSizeToAvailableHeight(!1)}static getDebounceMs(e,i){return Jl.isUseApplyButton(e)?(e.debounceMs!=null&&console.warn("AG Grid: debounceMs is ignored when apply button is present"),0):e.debounceMs!=null?e.debounceMs:i}static isUseApplyButton(e){return!!e.buttons&&e.buttons.indexOf("apply")>=0}refresh(e){return this.providedFilterParams=e,!0}destroy(){let e=this.getGui();e&&e.removeEventListener("submit",this.onFormSubmit),this.hidePopup=null,this.positionableFeature&&(this.positionableFeature=this.destroyBean(this.positionableFeature)),this.appliedModel=null,super.destroy()}translate(e){return this.localeService.getLocaleTextFunc()(e,u_[e])}getCellValue(e){return this.providedFilterParams.getValue(e)}getPositionableElement(){return this.eFilterBody}};g([v("rowModel")],Dh.prototype,"rowModel",2);g([k("eFilterBody")],Dh.prototype,"eFilterBody",2);g([I],Dh.prototype,"postConstruct",1);var ih=Dh,nv=class extends J{constructor(t,e){super(e),this.labelSeparator="",this.labelAlignment="left",this.disabled=!1,this.label="",this.config=t||{}}postConstruct(){this.addCssClass("ag-labeled"),this.eLabel.classList.add("ag-label");let{labelSeparator:t,label:e,labelWidth:i,labelAlignment:o,disabled:r}=this.config;r!=null&&this.setDisabled(r),t!=null&&this.setLabelSeparator(t),e!=null&&this.setLabel(e),i!=null&&this.setLabelWidth(i),this.setLabelAlignment(o||this.labelAlignment),this.refreshLabel()}refreshLabel(){Je(this.eLabel),typeof this.label=="string"?this.eLabel.innerText=this.label+this.labelSeparator:this.label&&this.eLabel.appendChild(this.label),this.label===""?(me(this.eLabel,!1),Xe(this.eLabel,"presentation")):(me(this.eLabel,!0),Xe(this.eLabel,null))}setLabelSeparator(t){return this.labelSeparator===t?this:(this.labelSeparator=t,this.label!=null&&this.refreshLabel(),this)}getLabelId(){return this.eLabel.id=this.eLabel.id||`ag-${this.getCompId()}-label`,this.eLabel.id}getLabel(){return this.label}setLabel(t){return this.label===t?this:(this.label=t,this.refreshLabel(),this)}setLabelAlignment(t){let i=this.getGui().classList;return i.toggle("ag-label-align-left",t==="left"),i.toggle("ag-label-align-right",t==="right"),i.toggle("ag-label-align-top",t==="top"),this}setLabelEllipsis(t){return this.eLabel.classList.toggle("ag-label-ellipsis",t),this}setLabelWidth(t){return this.label==null?this:(fd(this.eLabel,t),this)}setDisabled(t){t=!!t;let e=this.getGui();return ta(e,t),e.classList.toggle("ag-disabled",t),this.disabled=t,this}isDisabled(){return!!this.disabled}};g([I],nv.prototype,"postConstruct",1);var p_=class extends nv{constructor(t,e,i){super(t,e),this.className=i}postConstruct(){super.postConstruct();let{width:t,value:e,onValueChange:i}=this.config;t!=null&&this.setWidth(t),e!=null&&this.setValue(e),i!=null&&this.onValueChange(i),this.className&&this.addCssClass(this.className),this.refreshAriaLabelledBy()}refreshAriaLabelledBy(){let t=this.getAriaElement(),e=this.getLabelId();_x(t)!==null?Js(t,""):Js(t,e??"")}setAriaLabel(t){return yi(this.getAriaElement(),t),this.refreshAriaLabelledBy(),this}onValueChange(t){return this.addManagedListener(this,f.EVENT_FIELD_VALUE_CHANGED,()=>t(this.getValue())),this}getWidth(){return this.getGui().clientWidth}setWidth(t){return Ii(this.getGui(),t),this}getPreviousValue(){return this.previousValue}getValue(){return this.value}setValue(t,e){return this.value===t?this:(this.previousValue=this.value,this.value=t,e||this.dispatchEvent({type:f.EVENT_FIELD_VALUE_CHANGED}),this)}},QF=`
    <div class="ag-picker-field" role="presentation">
        <div ref="eLabel"></div>
            <div ref="eWrapper" class="ag-wrapper ag-picker-field-wrapper ag-picker-collapsed">
            <div ref="eDisplayField" class="ag-picker-field-display"></div>
            <div ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></div>
        </div>
    </div>`,Gn=class extends p_{constructor(t){if(super(t,t?.template||QF,t?.className),this.isPickerDisplayed=!1,this.skipClick=!1,this.pickerGap=4,this.hideCurrentPicker=null,this.ariaRole=t?.ariaRole,this.onPickerFocusIn=this.onPickerFocusIn.bind(this),this.onPickerFocusOut=this.onPickerFocusOut.bind(this),!t)return;let{pickerGap:e,maxPickerHeight:i,variableWidth:o,minPickerWidth:r,maxPickerWidth:n}=t;e!=null&&(this.pickerGap=e),this.variableWidth=!!o,i!=null&&this.setPickerMaxHeight(i),r!=null&&this.setPickerMinWidth(r),n!=null&&this.setPickerMaxWidth(n)}postConstruct(){super.postConstruct(),this.setupAria();let t=`ag-${this.getCompId()}-display`;this.eDisplayField.setAttribute("id",t);let e=this.getAriaElement();this.addManagedListener(e,"keydown",this.onKeyDown.bind(this)),this.addManagedListener(this.eLabel,"mousedown",this.onLabelOrWrapperMouseDown.bind(this)),this.addManagedListener(this.eWrapper,"mousedown",this.onLabelOrWrapperMouseDown.bind(this));let{pickerIcon:i,inputWidth:o}=this.config;if(i){let r=qe(i,this.gos);r&&this.eIcon.appendChild(r)}o!=null&&this.setInputWidth(o)}setupAria(){let t=this.getAriaElement();t.setAttribute("tabindex",this.gos.get("tabIndex").toString()),No(t,!1),this.ariaRole&&Xe(t,this.ariaRole)}onLabelOrWrapperMouseDown(t){if(t){let e=this.getFocusableElement();if(e!==this.eWrapper&&t?.target===e)return;t.preventDefault(),this.getFocusableElement().focus()}if(this.skipClick){this.skipClick=!1;return}this.isDisabled()||(this.isPickerDisplayed?this.hidePicker():this.showPicker())}onKeyDown(t){switch(t.key){case S.UP:case S.DOWN:case S.ENTER:case S.SPACE:t.preventDefault(),this.onLabelOrWrapperMouseDown();break;case S.ESCAPE:this.isPickerDisplayed&&(t.preventDefault(),t.stopPropagation(),this.hideCurrentPicker&&this.hideCurrentPicker());break}}showPicker(){this.isPickerDisplayed=!0,this.pickerComponent||(this.pickerComponent=this.createPickerComponent());let t=this.pickerComponent.getGui();t.addEventListener("focusin",this.onPickerFocusIn),t.addEventListener("focusout",this.onPickerFocusOut),this.hideCurrentPicker=this.renderAndPositionPicker(),this.toggleExpandedStyles(!0)}renderAndPositionPicker(){let t=this.gos.getDocument(),e=this.pickerComponent.getGui();this.gos.get("suppressScrollWhenPopupsAreOpen")||(this.destroyMouseWheelFunc=this.addManagedListener(this.eventService,f.EVENT_BODY_SCROLL,()=>{this.hidePicker()}));let i=this.localeService.getLocaleTextFunc(),{pickerAriaLabelKey:o,pickerAriaLabelValue:r,modalPicker:n=!0}=this.config,s={modal:n,eChild:e,closeOnEsc:!0,closedCallback:()=>{let p=this.gos.getActiveDomElement(),m=!p||p===t.body;this.beforeHidePicker(),m&&this.isAlive()&&this.getFocusableElement().focus()},ariaLabel:i(o,r)},a=this.popupService.addPopup(s),{maxPickerHeight:l,minPickerWidth:d,maxPickerWidth:c,variableWidth:u}=this;u?(d&&(e.style.minWidth=d),e.style.width=xh(ud(this.eWrapper)),c&&(e.style.maxWidth=c)):fd(e,c??ud(this.eWrapper));let h=l??`${kd(this.popupService.getPopupParent())}px`;return e.style.setProperty("max-height",h),e.style.position="absolute",this.alignPickerToComponent(),a.hideFunc}alignPickerToComponent(){if(!this.pickerComponent)return;let{pickerType:t}=this.config,{pickerGap:e}=this,i=this.gos.get("enableRtl")?"right":"left";this.popupService.positionPopupByComponent({type:t,eventSource:this.eWrapper,ePopup:this.pickerComponent.getGui(),position:"under",alignSide:i,keepWithinBounds:!0,nudgeY:e})}beforeHidePicker(){this.destroyMouseWheelFunc&&(this.destroyMouseWheelFunc(),this.destroyMouseWheelFunc=void 0),this.toggleExpandedStyles(!1);let t=this.pickerComponent.getGui();t.removeEventListener("focusin",this.onPickerFocusIn),t.removeEventListener("focusout",this.onPickerFocusOut),this.isPickerDisplayed=!1,this.pickerComponent=void 0,this.hideCurrentPicker=null}toggleExpandedStyles(t){if(!this.isAlive())return;let e=this.getAriaElement();No(e,t),this.eWrapper.classList.toggle("ag-picker-expanded",t),this.eWrapper.classList.toggle("ag-picker-collapsed",!t)}onPickerFocusIn(){this.togglePickerHasFocus(!0)}onPickerFocusOut(t){var e;(e=this.pickerComponent)!=null&&e.getGui().contains(t.relatedTarget)||this.togglePickerHasFocus(!1)}togglePickerHasFocus(t){this.pickerComponent&&this.eWrapper.classList.toggle("ag-picker-has-focus",t)}hidePicker(){this.hideCurrentPicker&&this.hideCurrentPicker()}setInputWidth(t){return fd(this.eWrapper,t),this}getFocusableElement(){return this.eWrapper}setPickerGap(t){return this.pickerGap=t,this}setPickerMinWidth(t){return typeof t=="number"&&(t=`${t}px`),this.minPickerWidth=t??void 0,this}setPickerMaxWidth(t){return typeof t=="number"&&(t=`${t}px`),this.maxPickerWidth=t??void 0,this}setPickerMaxHeight(t){return typeof t=="number"&&(t=`${t}px`),this.maxPickerHeight=t??void 0,this}destroy(){this.hidePicker(),super.destroy()}};g([v("popupService")],Gn.prototype,"popupService",2);g([k("eLabel")],Gn.prototype,"eLabel",2);g([k("eWrapper")],Gn.prototype,"eWrapper",2);g([k("eDisplayField")],Gn.prototype,"eDisplayField",2);g([k("eIcon")],Gn.prototype,"eIcon",2);var Rh=class ju extends J{constructor(e="default",i=!1){super(`<div class="ag-list ag-${e}-list" role="listbox"></div>`),this.cssIdentifier=e,this.unFocusable=i,this.options=[],this.itemEls=[]}init(){let e=this.getGui();this.addManagedListener(e,"mouseleave",()=>this.clearHighlighted()),!this.unFocusable&&this.addManagedListener(e,"keydown",this.handleKeyDown.bind(this))}handleKeyDown(e){let i=e.key;switch(i){case S.ENTER:if(!this.highlightedEl)this.setValue(this.getValue());else{let o=this.itemEls.indexOf(this.highlightedEl);this.setValueByIndex(o)}break;case S.DOWN:case S.UP:e.preventDefault(),this.navigate(i);break;case S.PAGE_DOWN:case S.PAGE_UP:case S.PAGE_HOME:case S.PAGE_END:e.preventDefault(),this.navigateToPage(i);break}}navigate(e){let i=e===S.DOWN,o;if(!this.highlightedEl)o=this.itemEls[i?0:this.itemEls.length-1];else{let n=this.itemEls.indexOf(this.highlightedEl)+(i?1:-1);n=Math.min(Math.max(n,0),this.itemEls.length-1),o=this.itemEls[n]}this.highlightItem(o)}navigateToPage(e){if(!this.highlightedEl||this.itemEls.length===0)return;let i=this.itemEls.indexOf(this.highlightedEl),o=this.options.length-1,r=this.itemEls[0].clientHeight,n=Math.floor(this.getGui().clientHeight/r),s=-1;e===S.PAGE_HOME?s=0:e===S.PAGE_END?s=o:e===S.PAGE_DOWN?s=Math.min(i+n,o):e===S.PAGE_UP&&(s=Math.max(i-n,0)),s!==-1&&this.highlightItem(this.itemEls[s])}addOptions(e){return e.forEach(i=>this.addOption(i)),this}addOption(e){let{value:i,text:o}=e,r=o||i;return this.options.push({value:i,text:r}),this.renderOption(i,r),this.updateIndices(),this}clearOptions(){this.options=[],this.reset(!0),this.itemEls.forEach(e=>{qi(e)}),this.itemEls=[]}updateIndices(){let e=this.getGui().querySelectorAll(".ag-list-item");e.forEach((i,o)=>{yh(i,o+1),wh(i,e.length)})}renderOption(e,i){let o=this.gos.getDocument(),r=o.createElement("div");Xe(r,"option"),r.classList.add("ag-list-item",`ag-${this.cssIdentifier}-list-item`);let n=o.createElement("span");r.appendChild(n),n.textContent=i,this.unFocusable||(r.tabIndex=-1),this.itemEls.push(r),this.addManagedListener(r,"mousemove",()=>this.highlightItem(r)),this.addManagedListener(r,"mousedown",s=>{s.preventDefault(),this.setValue(e)}),this.createManagedBean(new Ho({getTooltipValue:()=>i,getGui:()=>r,getLocation:()=>"UNKNOWN",shouldDisplayTooltip:()=>n.scrollWidth>n.clientWidth})),this.getGui().appendChild(r)}setValue(e,i){if(this.value===e)return this.fireItemSelected(),this;if(e==null)return this.reset(i),this;let o=this.options.findIndex(r=>r.value===e);if(o!==-1){let r=this.options[o];this.value=r.value,this.displayValue=r.text,this.highlightItem(this.itemEls[o]),i||this.fireChangeEvent()}return this}setValueByIndex(e){return this.setValue(this.options[e].value)}getValue(){return this.value}getDisplayValue(){return this.displayValue}refreshHighlighted(){this.clearHighlighted();let e=this.options.findIndex(i=>i.value===this.value);e!==-1&&this.highlightItem(this.itemEls[e])}reset(e){this.value=null,this.displayValue=null,this.clearHighlighted(),e||this.fireChangeEvent()}highlightItem(e){if(!ni(e))return;this.clearHighlighted(),this.highlightedEl=e,this.highlightedEl.classList.add(ju.ACTIVE_CLASS),ea(this.highlightedEl,!0);let i=this.getGui(),{scrollTop:o,clientHeight:r}=i,{offsetTop:n,offsetHeight:s}=e;(n+s>o+r||n<o)&&this.highlightedEl.scrollIntoView({block:"nearest"}),this.unFocusable||this.highlightedEl.focus()}clearHighlighted(){!this.highlightedEl||!ni(this.highlightedEl)||(this.highlightedEl.classList.remove(ju.ACTIVE_CLASS),ea(this.highlightedEl,!1),this.highlightedEl=null)}fireChangeEvent(){this.dispatchEvent({type:f.EVENT_FIELD_VALUE_CHANGED}),this.fireItemSelected()}fireItemSelected(){this.dispatchEvent({type:ju.EVENT_ITEM_SELECTED})}};Rh.EVENT_ITEM_SELECTED="selectedItem";Rh.ACTIVE_CLASS="ag-active-item";g([I],Rh.prototype,"init",1);var ES=Rh,f_=class m_ extends Gn{constructor(e){super(j({pickerAriaLabelKey:"ariaLabelSelectField",pickerAriaLabelValue:"Select Field",pickerType:"ag-list",className:"ag-select",pickerIcon:"smallDown",ariaRole:"combobox"},e))}postConstruct(){super.postConstruct(),this.createListComponent(),this.eWrapper.tabIndex=this.gos.get("tabIndex");let{options:e,value:i,placeholder:o}=this.config;e!=null&&this.addOptions(e),i!=null&&this.setValue(i,!0),o&&i==null&&(this.eDisplayField.textContent=o),this.addManagedListener(this.eWrapper,"focusout",this.onWrapperFocusOut.bind(this))}onWrapperFocusOut(e){this.eWrapper.contains(e.relatedTarget)||this.hidePicker()}createListComponent(){this.listComponent=this.createBean(new ES("select",!0)),this.listComponent.setParentComponent(this);let e=this.listComponent.getAriaElement(),i=`ag-select-list-${this.listComponent.getCompId()}`;e.setAttribute("id",i),Gm(this.getAriaElement(),e),this.listComponent.addManagedListener(this.listComponent,ES.EVENT_ITEM_SELECTED,()=>{this.hidePicker(),this.dispatchEvent({type:m_.EVENT_ITEM_SELECTED})}),this.listComponent.addManagedListener(this.listComponent,f.EVENT_FIELD_VALUE_CHANGED,()=>{this.listComponent&&(this.setValue(this.listComponent.getValue(),!1,!0),this.hidePicker())})}createPickerComponent(){return this.listComponent}onKeyDown(e){var i;let{key:o}=e;switch(o===S.TAB&&this.hidePicker(),o){case S.ENTER:case S.UP:case S.DOWN:case S.PAGE_UP:case S.PAGE_DOWN:case S.PAGE_HOME:case S.PAGE_END:e.preventDefault(),this.isPickerDisplayed?(i=this.listComponent)==null||i.handleKeyDown(e):super.onKeyDown(e);break;case S.ESCAPE:super.onKeyDown(e);break}}showPicker(){this.listComponent&&(super.showPicker(),this.listComponent.refreshHighlighted())}addOptions(e){return e.forEach(i=>this.addOption(i)),this}addOption(e){return this.listComponent.addOption(e),this}clearOptions(){var e;return(e=this.listComponent)==null||e.clearOptions(),this}setValue(e,i,o){if(this.value===e||!this.listComponent)return this;if(o||this.listComponent.setValue(e,!0),this.listComponent.getValue()===this.getValue())return this;let n=this.listComponent.getDisplayValue();return n==null&&this.config.placeholder&&(n=this.config.placeholder),this.eDisplayField.textContent=n,this.setTooltip({newTooltipText:n??null,shouldDisplayTooltip:()=>this.eDisplayField.scrollWidth>this.eDisplayField.clientWidth}),super.setValue(e,i)}destroy(){this.listComponent&&(this.destroyBean(this.listComponent),this.listComponent=void 0),super.destroy()}};f_.EVENT_ITEM_SELECTED="selectedItem";var Mh=f_,Ki=class extends p_{constructor(t,e,i="text",o="input"){super(t,`
            <div role="presentation">
                <div ref="eLabel" class="ag-input-field-label"></div>
                <div ref="eWrapper" class="ag-wrapper ag-input-wrapper" role="presentation">
                    <${o} ref="eInput" class="ag-input-field-input"></${o}>
                </div>
            </div>`,e),this.inputType=i,this.displayFieldTag=o}postConstruct(){super.postConstruct(),this.setInputType(),this.eLabel.classList.add(`${this.className}-label`),this.eWrapper.classList.add(`${this.className}-input-wrapper`),this.eInput.classList.add(`${this.className}-input`),this.addCssClass("ag-input-field"),this.eInput.id=this.eInput.id||`ag-${this.getCompId()}-input`;let{inputName:t,inputWidth:e}=this.config;t!=null&&this.setInputName(t),e!=null&&this.setInputWidth(e),this.addInputListeners(),this.activateTabIndex([this.eInput])}addInputListeners(){this.addManagedListener(this.eInput,"input",t=>this.setValue(t.target.value))}setInputType(){this.displayFieldTag==="input"&&this.eInput.setAttribute("type",this.inputType)}getInputElement(){return this.eInput}setInputWidth(t){return fd(this.eWrapper,t),this}setInputName(t){return this.getInputElement().setAttribute("name",t),this}getFocusableElement(){return this.eInput}setMaxLength(t){let e=this.eInput;return e.maxLength=t,this}setInputPlaceholder(t){return po(this.eInput,"placeholder",t),this}setInputAriaLabel(t){return yi(this.eInput,t),this.refreshAriaLabelledBy(),this}setDisabled(t){return ta(this.eInput,t),super.setDisabled(t)}setAutoComplete(t){if(t===!0)po(this.eInput,"autocomplete",null);else{let e=typeof t=="string"?t:"off";po(this.eInput,"autocomplete",e)}return this}};g([k("eLabel")],Ki.prototype,"eLabel",2);g([k("eWrapper")],Ki.prototype,"eWrapper",2);g([k("eInput")],Ki.prototype,"eInput",2);var Th=class extends Ki{constructor(t,e="ag-checkbox",i="checkbox"){super(t,e,i),this.labelAlignment="right",this.selected=!1,this.readOnly=!1,this.passive=!1}postConstruct(){super.postConstruct();let{readOnly:t,passive:e}=this.config;typeof t=="boolean"&&this.setReadOnly(t),typeof e=="boolean"&&this.setPassive(e)}addInputListeners(){this.addManagedListener(this.eInput,"click",this.onCheckboxClick.bind(this)),this.addManagedListener(this.eLabel,"click",this.toggle.bind(this))}getNextValue(){return this.selected===void 0?!0:!this.selected}setPassive(t){this.passive=t}isReadOnly(){return this.readOnly}setReadOnly(t){this.eWrapper.classList.toggle("ag-disabled",t),this.eInput.disabled=t,this.readOnly=t}setDisabled(t){return this.eWrapper.classList.toggle("ag-disabled",t),super.setDisabled(t)}toggle(){if(this.eInput.disabled)return;let t=this.isSelected(),e=this.getNextValue();this.passive?this.dispatchChange(e,t):this.setValue(e)}getValue(){return this.isSelected()}setValue(t,e){return this.refreshSelectedClass(t),this.setSelected(t,e),this}setName(t){let e=this.getInputElement();return e.name=t,this}isSelected(){return this.selected}setSelected(t,e){this.isSelected()!==t&&(this.previousValue=this.isSelected(),t=this.selected=typeof t=="boolean"?t:void 0,this.eInput.checked=t,this.eInput.indeterminate=t===void 0,e||this.dispatchChange(this.selected,this.previousValue))}dispatchChange(t,e,i){this.dispatchEvent({type:f.EVENT_FIELD_VALUE_CHANGED,selected:t,previousValue:e,event:i});let o=this.getInputElement(),r={type:f.EVENT_CHECKBOX_CHANGED,id:o.id,name:o.name,selected:t,previousValue:e};this.eventService.dispatchEvent(r)}onCheckboxClick(t){if(this.passive||this.eInput.disabled)return;let e=this.isSelected(),i=this.selected=t.target.checked;this.refreshSelectedClass(i),this.dispatchChange(i,e,t)}refreshSelectedClass(t){this.eWrapper.classList.toggle("ag-checked",t===!0),this.eWrapper.classList.toggle("ag-indeterminate",t==null)}},v_=class extends Th{constructor(t){super(t,"ag-radio-button","radio")}isSelected(){return this.eInput.checked}toggle(){this.eInput.disabled||this.isSelected()||this.setValue(!0)}addInputListeners(){super.addInputListeners(),this.addManagedListener(this.eventService,f.EVENT_CHECKBOX_CHANGED,this.onChange.bind(this))}onChange(t){t.selected&&t.name&&this.eInput.name&&this.eInput.name===t.name&&t.id&&this.eInput.id!==t.id&&this.setValue(!1,!0)}},sv=class{constructor(t,e,i){this.localeService=t,this.optionsFactory=e,this.valueFormatter=i}getModelAsString(t){if(!t)return null;let e=t.operator!=null,i=this.localeService.getLocaleTextFunc();if(e){let o=t,{conditions:r}=o;if(!r){let{condition1:a,condition2:l}=o;r=[a,l]}let n=r.map(a=>this.getModelAsString(a)),s=o.operator==="AND"?"andCondition":"orCondition";return n.join(` ${i(s,u_[s])} `)}else{if(t.type===Qe.BLANK||t.type===Qe.NOT_BLANK)return i(t.type,t.type);{let o=t,r=this.optionsFactory.getCustomOption(o.type),{displayKey:n,displayName:s,numberOfInputs:a}=r||{};return n&&s&&a===0?(i(n,s),s):this.conditionToString(o,r)}}}updateParams(t){this.optionsFactory=t.optionsFactory}formatValue(t){var e;return this.valueFormatter?(e=this.valueFormatter(t??null))!=null?e:"":String(t)}},$t=class Bs extends ih{constructor(){super(...arguments),this.eTypes=[],this.eJoinOperatorPanels=[],this.eJoinOperatorsAnd=[],this.eJoinOperatorsOr=[],this.eConditionBodies=[],this.listener=()=>this.onUiChanged(),this.lastUiCompletePosition=null,this.joinOperatorId=0}getNumberOfInputs(e){let i=this.optionsFactory.getCustomOption(e);if(i){let{numberOfInputs:r}=i;return r??1}let o=[Bs.EMPTY,Bs.NOT_BLANK,Bs.BLANK];return e&&o.indexOf(e)>=0?0:e===Bs.IN_RANGE?2:1}onFloatingFilterChanged(e,i){this.setTypeFromFloatingFilter(e),this.setValueFromFloatingFilter(i),this.onUiChanged(!0)}setTypeFromFloatingFilter(e){this.eTypes.forEach((i,o)=>{o===0?i.setValue(e,!0):i.setValue(this.optionsFactory.getDefaultOption(),!0)})}getModelFromUi(){let e=this.getUiCompleteConditions();return e.length===0?null:this.maxNumConditions>1&&e.length>1?{filterType:this.getFilterType(),operator:this.getJoinOperator(),condition1:e[0],condition2:e[1],conditions:e}:e[0]}getConditionTypes(){return this.eTypes.map(e=>e.getValue())}getConditionType(e){return this.eTypes[e].getValue()}getJoinOperator(){return this.eJoinOperatorsOr.length===0?this.defaultJoinOperator:this.eJoinOperatorsOr[0].getValue()===!0?"OR":"AND"}areModelsEqual(e,i){if(!e&&!i)return!0;if(!e&&i||e&&!i)return!1;let o=!e.operator,r=!i.operator;if(!o&&r||o&&!r)return!1;let s;if(o){let a=e,l=i;s=this.areSimpleModelsEqual(a,l)}else{let a=e,l=i;s=a.operator===l.operator&&ho(a.conditions,l.conditions,(d,c)=>this.areSimpleModelsEqual(d,c))}return s}shouldRefresh(e){var i,o,r;let n=this.getModel(),s=n?(i=n.conditions)!=null?i:[n]:null,a=(r=(o=e.filterOptions)==null?void 0:o.map(d=>typeof d=="string"?d:d.displayKey))!=null?r:this.getDefaultFilterOptions();return!(!(!s||s.every(d=>a.find(c=>c===d.type)!==void 0))||typeof e.maxNumConditions=="number"&&s&&s.length>e.maxNumConditions)}refresh(e){return!this.shouldRefresh(e)||!super.refresh(e)?!1:(this.setParams(e),this.removeConditionsAndOperators(0),this.createOption(),this.setModel(this.getModel()),!0)}setModelIntoUi(e){if(e.operator){let o=e;o.conditions||(o.conditions=[o.condition1,o.condition2]);let r=this.validateAndUpdateConditions(o.conditions),n=this.getNumConditions();if(r<n)this.removeConditionsAndOperators(r);else if(r>n)for(let a=n;a<r;a++)this.createJoinOperatorPanel(),this.createOption();let s=o.operator==="OR";this.eJoinOperatorsAnd.forEach(a=>a.setValue(!s,!0)),this.eJoinOperatorsOr.forEach(a=>a.setValue(s,!0)),o.conditions.forEach((a,l)=>{this.eTypes[l].setValue(a.type,!0),this.setConditionIntoUi(a,l)})}else{let o=e;this.getNumConditions()>1&&this.removeConditionsAndOperators(1),this.eTypes[0].setValue(o.type,!0),this.setConditionIntoUi(o,0)}return this.lastUiCompletePosition=this.getNumConditions()-1,this.createMissingConditionsAndOperators(),this.onUiChanged(),ri.resolve()}validateAndUpdateConditions(e){let i=e.length;return i>this.maxNumConditions&&(e.splice(this.maxNumConditions),q('Filter Model contains more conditions than "filterParams.maxNumConditions". Additional conditions have been ignored.'),i=this.maxNumConditions),i}doesFilterPass(e){var i;let o=this.getModel();if(o==null)return!0;let{operator:r}=o,n=[];if(r){let a=o;n.push(...(i=a.conditions)!=null?i:[])}else n.push(o);return n[r&&r==="OR"?"some":"every"](a=>this.individualConditionPasses(e,a))}setParams(e){super.setParams(e),this.setNumConditions(e),this.defaultJoinOperator=this.getDefaultJoinOperator(e.defaultJoinOperator),this.filterPlaceholder=e.filterPlaceholder,this.optionsFactory=new c_,this.optionsFactory.init(e,this.getDefaultFilterOptions()),this.createFilterListOptions(),this.createOption(),this.createMissingConditionsAndOperators(),this.isReadOnly()&&this.eFilterBody.setAttribute("tabindex","-1")}setNumConditions(e){var i,o;e.suppressAndOrCondition!=null&&q('Since v29.2 "filterParams.suppressAndOrCondition" is deprecated. Use "filterParams.maxNumConditions = 1" instead.'),e.alwaysShowBothConditions!=null&&q('Since v29.2 "filterParams.alwaysShowBothConditions" is deprecated. Use "filterParams.numAlwaysVisibleConditions = 2" instead.'),this.maxNumConditions=(i=e.maxNumConditions)!=null?i:e.suppressAndOrCondition?1:2,this.maxNumConditions<1&&(q('"filterParams.maxNumConditions" must be greater than or equal to zero.'),this.maxNumConditions=1),this.numAlwaysVisibleConditions=(o=e.numAlwaysVisibleConditions)!=null?o:e.alwaysShowBothConditions?2:1,this.numAlwaysVisibleConditions<1&&(q('"filterParams.numAlwaysVisibleConditions" must be greater than or equal to zero.'),this.numAlwaysVisibleConditions=1),this.numAlwaysVisibleConditions>this.maxNumConditions&&(q('"filterParams.numAlwaysVisibleConditions" cannot be greater than "filterParams.maxNumConditions".'),this.numAlwaysVisibleConditions=this.maxNumConditions)}createOption(){let e=this.createManagedBean(new Mh);this.eTypes.push(e),e.addCssClass("ag-filter-select"),this.eFilterBody.appendChild(e.getGui());let i=this.createValueElement();this.eConditionBodies.push(i),this.eFilterBody.appendChild(i),this.putOptionsIntoDropdown(e),this.resetType(e);let o=this.getNumConditions()-1;this.forEachPositionInput(o,r=>this.resetInput(r)),this.addChangedListeners(e,o)}createJoinOperatorPanel(){let e=document.createElement("div");this.eJoinOperatorPanels.push(e),e.classList.add("ag-filter-condition");let i=this.createJoinOperator(this.eJoinOperatorsAnd,e,"and"),o=this.createJoinOperator(this.eJoinOperatorsOr,e,"or");this.eFilterBody.appendChild(e);let r=this.eJoinOperatorPanels.length-1,n=this.joinOperatorId++;this.resetJoinOperatorAnd(i,r,n),this.resetJoinOperatorOr(o,r,n),this.isReadOnly()||(i.onValueChange(this.listener),o.onValueChange(this.listener))}createJoinOperator(e,i,o){let r=this.createManagedBean(new v_);return e.push(r),r.addCssClass("ag-filter-condition-operator"),r.addCssClass(`ag-filter-condition-operator-${o}`),i.appendChild(r.getGui()),r}getDefaultJoinOperator(e){return e==="AND"||e==="OR"?e:"AND"}createFilterListOptions(){let e=this.optionsFactory.getFilterOptions();this.filterListOptions=e.map(i=>typeof i=="string"?this.createBoilerplateListOption(i):this.createCustomListOption(i))}putOptionsIntoDropdown(e){this.filterListOptions.forEach(i=>{e.addOption(i)}),e.setDisabled(this.filterListOptions.length<=1)}createBoilerplateListOption(e){return{value:e,text:this.translate(e)}}createCustomListOption(e){let{displayKey:i}=e,o=this.optionsFactory.getCustomOption(e.displayKey);return{value:i,text:o?this.localeService.getLocaleTextFunc()(o.displayKey,o.displayName):this.translate(i)}}isAllowTwoConditions(){return this.maxNumConditions>=2}createBodyTemplate(){return""}getCssIdentifier(){return"simple-filter"}updateUiVisibility(){let e=this.getJoinOperator();this.updateNumConditions(),this.updateConditionStatusesAndValues(this.lastUiCompletePosition,e)}updateNumConditions(){var e;let i=-1,o=!0;for(let r=0;r<this.getNumConditions();r++)this.isConditionUiComplete(r)?i=r:o=!1;if(this.shouldAddNewConditionAtEnd(o))this.createJoinOperatorPanel(),this.createOption();else{let r=(e=this.lastUiCompletePosition)!=null?e:this.getNumConditions()-2;if(i<r){this.removeConditionsAndOperators(r+1);let n=i+1,s=r-n;s>0&&this.removeConditionsAndOperators(n,s),this.createMissingConditionsAndOperators()}}this.lastUiCompletePosition=i}updateConditionStatusesAndValues(e,i){this.eTypes.forEach((r,n)=>{let s=this.isConditionDisabled(n,e);r.setDisabled(s||this.filterListOptions.length<=1),n===1&&(ta(this.eJoinOperatorPanels[0],s),this.eJoinOperatorsAnd[0].setDisabled(s),this.eJoinOperatorsOr[0].setDisabled(s))}),this.eConditionBodies.forEach((r,n)=>{me(r,this.isConditionBodyVisible(n))});let o=(i??this.getJoinOperator())==="OR";this.eJoinOperatorsAnd.forEach((r,n)=>{r.setValue(!o,!0)}),this.eJoinOperatorsOr.forEach((r,n)=>{r.setValue(o,!0)}),this.forEachInput((r,n,s,a)=>{this.setElementDisplayed(r,n<a),this.setElementDisabled(r,this.isConditionDisabled(s,e))}),this.resetPlaceholder()}shouldAddNewConditionAtEnd(e){return e&&this.getNumConditions()<this.maxNumConditions&&!this.isReadOnly()}removeConditionsAndOperators(e,i){if(e>=this.getNumConditions())return;this.removeComponents(this.eTypes,e,i),this.removeElements(this.eConditionBodies,e,i),this.removeValueElements(e,i);let o=Math.max(e-1,0);this.removeElements(this.eJoinOperatorPanels,o,i),this.removeComponents(this.eJoinOperatorsAnd,o,i),this.removeComponents(this.eJoinOperatorsOr,o,i)}removeElements(e,i,o){this.removeItems(e,i,o).forEach(n=>qi(n))}removeComponents(e,i,o){this.removeItems(e,i,o).forEach(n=>{qi(n.getGui()),this.destroyBean(n)})}removeItems(e,i,o){return o==null?e.splice(i):e.splice(i,o)}afterGuiAttached(e){if(super.afterGuiAttached(e),this.resetPlaceholder(),!e?.suppressFocus)if(this.isReadOnly())this.eFilterBody.focus();else{let i=this.getInputs(0)[0];if(!i)return;i instanceof Ki&&i.getInputElement().focus()}}afterGuiDetached(){super.afterGuiDetached();let e=this.getModel();this.resetUiToActiveModel(e);let i=-1,o=-1,r=!1,n=this.getJoinOperator();for(let a=this.getNumConditions()-1;a>=0;a--)if(this.isConditionUiComplete(a))i===-1&&(i=a,o=a);else{let l=a>=this.numAlwaysVisibleConditions&&!this.isConditionUiComplete(a-1),d=a<i;(l||d)&&(this.removeConditionsAndOperators(a,1),r=!0,d&&o--)}let s=!1;this.getNumConditions()<this.numAlwaysVisibleConditions&&(this.createMissingConditionsAndOperators(),s=!0),this.shouldAddNewConditionAtEnd(o===this.getNumConditions()-1)&&(this.createJoinOperatorPanel(),this.createOption(),s=!0),s&&this.updateConditionStatusesAndValues(o,n),r&&this.updateJoinOperatorsDisabled(),this.lastUiCompletePosition=o}getPlaceholderText(e,i){let o=this.translate(e);if(fh(this.filterPlaceholder)){let r=this.filterPlaceholder,n=this.eTypes[i].getValue(),s=this.translate(n);o=r({filterOptionKey:n,filterOption:s,placeholder:o})}else typeof this.filterPlaceholder=="string"&&(o=this.filterPlaceholder);return o}resetPlaceholder(){let e=this.localeService.getLocaleTextFunc();this.forEachInput((i,o,r,n)=>{if(!(i instanceof Ki))return;let s=o===0&&n>1?"inRangeStart":o===0?"filterOoo":"inRangeEnd",a=o===0&&n>1?e("ariaFilterFromValue","Filter from value"):o===0?e("ariaFilterValue","Filter Value"):e("ariaFilterToValue","Filter to Value");i.setInputPlaceholder(this.getPlaceholderText(s,r)),i.setInputAriaLabel(a)})}setElementValue(e,i,o){e instanceof Ki&&e.setValue(i!=null?String(i):null,!0)}setElementDisplayed(e,i){e instanceof J&&me(e.getGui(),i)}setElementDisabled(e,i){e instanceof J&&ta(e.getGui(),i)}attachElementOnChange(e,i){e instanceof Ki&&e.onValueChange(i)}forEachInput(e){this.getConditionTypes().forEach((i,o)=>{this.forEachPositionTypeInput(o,i,e)})}forEachPositionInput(e,i){let o=this.getConditionType(e);this.forEachPositionTypeInput(e,o,i)}forEachPositionTypeInput(e,i,o){let r=this.getNumberOfInputs(i),n=this.getInputs(e);for(let s=0;s<n.length;s++){let a=n[s];a!=null&&o(a,s,e,r)}}isConditionDisabled(e,i){return this.isReadOnly()?!0:e===0?!1:e>i+1}isConditionBodyVisible(e){let i=this.getConditionType(e);return this.getNumberOfInputs(i)>0}isConditionUiComplete(e){return!(e>=this.getNumConditions()||this.getConditionType(e)===Bs.EMPTY||this.getValues(e).some(o=>o==null))}getNumConditions(){return this.eTypes.length}getUiCompleteConditions(){let e=[];for(let i=0;i<this.getNumConditions();i++)this.isConditionUiComplete(i)&&e.push(this.createCondition(i));return e}createMissingConditionsAndOperators(){if(!this.isReadOnly())for(let e=this.getNumConditions();e<this.numAlwaysVisibleConditions;e++)this.createJoinOperatorPanel(),this.createOption()}resetUiToDefaults(e){return this.removeConditionsAndOperators(this.isReadOnly()?1:this.numAlwaysVisibleConditions),this.eTypes.forEach(i=>this.resetType(i)),this.eJoinOperatorsAnd.forEach((i,o)=>this.resetJoinOperatorAnd(i,o,this.joinOperatorId+o)),this.eJoinOperatorsOr.forEach((i,o)=>this.resetJoinOperatorOr(i,o,this.joinOperatorId+o)),this.joinOperatorId++,this.forEachInput(i=>this.resetInput(i)),this.resetPlaceholder(),this.createMissingConditionsAndOperators(),this.lastUiCompletePosition=null,e||this.onUiChanged(),ri.resolve()}resetType(e){let o=this.localeService.getLocaleTextFunc()("ariaFilteringOperator","Filtering operator");e.setValue(this.optionsFactory.getDefaultOption(),!0).setAriaLabel(o).setDisabled(this.isReadOnly()||this.filterListOptions.length<=1)}resetJoinOperatorAnd(e,i,o){this.resetJoinOperator(e,i,this.isDefaultOperator("AND"),this.translate("andCondition"),o)}resetJoinOperatorOr(e,i,o){this.resetJoinOperator(e,i,this.isDefaultOperator("OR"),this.translate("orCondition"),o)}resetJoinOperator(e,i,o,r,n){this.updateJoinOperatorDisabled(e.setValue(o,!0).setName(`ag-simple-filter-and-or-${this.getCompId()}-${n}`).setLabel(r),i)}updateJoinOperatorsDisabled(){this.eJoinOperatorsAnd.forEach((e,i)=>this.updateJoinOperatorDisabled(e,i)),this.eJoinOperatorsOr.forEach((e,i)=>this.updateJoinOperatorDisabled(e,i))}updateJoinOperatorDisabled(e,i){e.setDisabled(this.isReadOnly()||i>0)}resetInput(e){this.setElementValue(e,null),this.setElementDisabled(e,this.isReadOnly())}setConditionIntoUi(e,i){let o=this.mapValuesFromModel(e);this.forEachInput((r,n,s,a)=>{s===i&&this.setElementValue(r,o[n]!=null?o[n]:null)})}setValueFromFloatingFilter(e){this.forEachInput((i,o,r,n)=>{this.setElementValue(i,o===0&&r===0?e:null,!0)})}isDefaultOperator(e){return e===this.defaultJoinOperator}addChangedListeners(e,i){this.isReadOnly()||(e.onValueChange(this.listener),this.forEachPositionInput(i,o=>{this.attachElementOnChange(o,this.listener)}))}individualConditionPasses(e,i){let o=this.getCellValue(e.node),r=this.mapValuesFromModel(i),n=this.optionsFactory.getCustomOption(i.type),s=this.evaluateCustomFilter(n,r,o);return s??(o==null?this.evaluateNullValue(i.type):this.evaluateNonNullValue(r,o,i,e))}evaluateCustomFilter(e,i,o){if(e==null)return;let{predicate:r}=e;if(r!=null&&!i.some(n=>n==null))return r(i,o)}isBlank(e){return e==null||typeof e=="string"&&e.trim().length===0}hasInvalidInputs(){return!1}};$t.EMPTY="empty";$t.BLANK="blank";$t.NOT_BLANK="notBlank";$t.EQUALS="equals";$t.NOT_EQUAL="notEqual";$t.LESS_THAN="lessThan";$t.LESS_THAN_OR_EQUAL="lessThanOrEqual";$t.GREATER_THAN="greaterThan";$t.GREATER_THAN_OR_EQUAL="greaterThanOrEqual";$t.IN_RANGE="inRange";$t.CONTAINS="contains";$t.NOT_CONTAINS="notContains";$t.STARTS_WITH="startsWith";$t.ENDS_WITH="endsWith";var Qe=$t,dt=class pt extends Qe{setParams(e){super.setParams(e),this.scalarFilterParams=e}evaluateNullValue(e){switch(e){case pt.EQUALS:case pt.NOT_EQUAL:if(this.scalarFilterParams.includeBlanksInEquals)return!0;break;case pt.GREATER_THAN:case pt.GREATER_THAN_OR_EQUAL:if(this.scalarFilterParams.includeBlanksInGreaterThan)return!0;break;case pt.LESS_THAN:case pt.LESS_THAN_OR_EQUAL:if(this.scalarFilterParams.includeBlanksInLessThan)return!0;break;case pt.IN_RANGE:if(this.scalarFilterParams.includeBlanksInRange)return!0;break;case pt.BLANK:return!0;case pt.NOT_BLANK:return!1}return!1}evaluateNonNullValue(e,i,o){let r=this.comparator(),n=e[0]!=null?r(e[0],i):0;switch(o.type){case pt.EQUALS:return n===0;case pt.NOT_EQUAL:return n!==0;case pt.GREATER_THAN:return n>0;case pt.GREATER_THAN_OR_EQUAL:return n>=0;case pt.LESS_THAN:return n<0;case pt.LESS_THAN_OR_EQUAL:return n<=0;case pt.IN_RANGE:{let s=r(e[1],i);return this.scalarFilterParams.inRangeInclusive?n>=0&&s<=0:n>0&&s<0}case pt.BLANK:return this.isBlank(i);case pt.NOT_BLANK:return!this.isBlank(i);default:return console.warn('AG Grid: Unexpected type of filter "'+o.type+'", it looks like the filter was configured with incorrect Filter Options'),!0}}},DS=1e3,RS=1/0,C_=class extends sv{constructor(t,e,i){super(e,i),this.dateFilterParams=t}conditionToString(t,e){let{type:i}=t,{numberOfInputs:o}=e||{},r=i==Qe.IN_RANGE||o===2,n=ti(t.dateFrom),s=ti(t.dateTo),a=this.dateFilterParams.inRangeFloatingFilterDateFormat;if(r){let l=n!==null?Qs(n,a):"null",d=s!==null?Qs(s,a):"null";return`${l}-${d}`}return n!=null?Qs(n,a):`${i}`}updateParams(t){super.updateParams(t),this.dateFilterParams=t.dateFilterParams}},av=class w_ extends dt{constructor(){super("dateFilter"),this.eConditionPanelsFrom=[],this.eConditionPanelsTo=[],this.dateConditionFromComps=[],this.dateConditionToComps=[],this.minValidYear=DS,this.maxValidYear=RS,this.minValidDate=null,this.maxValidDate=null}afterGuiAttached(e){super.afterGuiAttached(e),this.dateConditionFromComps[0].afterGuiAttached(e)}mapValuesFromModel(e){let{dateFrom:i,dateTo:o,type:r}=e||{};return[i&&ti(i)||null,o&&ti(o)||null].slice(0,this.getNumberOfInputs(r))}comparator(){return this.dateFilterParams.comparator?this.dateFilterParams.comparator:this.defaultComparator.bind(this)}defaultComparator(e,i){let o=i;return i==null||o<e?-1:o>e?1:0}setParams(e){this.dateFilterParams=e,super.setParams(e);let i=(o,r)=>{if(e[o]!=null)if(isNaN(e[o]))console.warn(`AG Grid: DateFilter ${o} is not a number`);else return e[o]==null?r:Number(e[o]);return r};this.minValidYear=i("minValidYear",DS),this.maxValidYear=i("maxValidYear",RS),this.minValidYear>this.maxValidYear&&console.warn("AG Grid: DateFilter minValidYear should be <= maxValidYear"),e.minValidDate?this.minValidDate=e.minValidDate instanceof Date?e.minValidDate:ti(e.minValidDate):this.minValidDate=null,e.maxValidDate?this.maxValidDate=e.maxValidDate instanceof Date?e.maxValidDate:ti(e.maxValidDate):this.maxValidDate=null,this.minValidDate&&this.maxValidDate&&this.minValidDate>this.maxValidDate&&console.warn("AG Grid: DateFilter minValidDate should be <= maxValidDate"),this.filterModelFormatter=new C_(this.dateFilterParams,this.localeService,this.optionsFactory)}createDateCompWrapper(e){let i=new d_(this.getContext(),this.userComponentFactory,{onDateChanged:()=>this.onUiChanged(),filterParams:this.dateFilterParams},e);return this.addDestroyFunc(()=>i.destroy()),i}setElementValue(e,i){e.setDate(i)}setElementDisplayed(e,i){e.setDisplayed(i)}setElementDisabled(e,i){e.setDisabled(i)}getDefaultFilterOptions(){return w_.DEFAULT_FILTER_OPTIONS}createValueElement(){let i=this.gos.getDocument().createElement("div");return i.classList.add("ag-filter-body"),this.createFromToElement(i,this.eConditionPanelsFrom,this.dateConditionFromComps,"from"),this.createFromToElement(i,this.eConditionPanelsTo,this.dateConditionToComps,"to"),i}createFromToElement(e,i,o,r){let s=this.gos.getDocument().createElement("div");s.classList.add(`ag-filter-${r}`),s.classList.add(`ag-filter-date-${r}`),i.push(s),e.appendChild(s),o.push(this.createDateCompWrapper(s))}removeValueElements(e,i){this.removeDateComps(this.dateConditionFromComps,e,i),this.removeDateComps(this.dateConditionToComps,e,i),this.removeItems(this.eConditionPanelsFrom,e,i),this.removeItems(this.eConditionPanelsTo,e,i)}removeDateComps(e,i,o){this.removeItems(e,i,o).forEach(n=>n.destroy())}isValidDateValue(e){if(e===null)return!1;if(this.minValidDate){if(e<this.minValidDate)return!1}else if(e.getUTCFullYear()<this.minValidYear)return!1;if(this.maxValidDate){if(e>this.maxValidDate)return!1}else if(e.getUTCFullYear()>this.maxValidYear)return!1;return!0}isConditionUiComplete(e){if(!super.isConditionUiComplete(e))return!1;let i=!0;return this.forEachInput((o,r,n,s)=>{n!==e||!i||r>=s||(i=i&&this.isValidDateValue(o.getDate()))}),i}areSimpleModelsEqual(e,i){return e.dateFrom===i.dateFrom&&e.dateTo===i.dateTo&&e.type===i.type}getFilterType(){return"date"}createCondition(e){let i=this.getConditionType(e),o={},r=this.getValues(e);return r.length>0&&(o.dateFrom=Ai(r[0])),r.length>1&&(o.dateTo=Ai(r[1])),j({dateFrom:null,dateTo:null,filterType:this.getFilterType(),type:i},o)}resetPlaceholder(){let e=this.localeService.getLocaleTextFunc(),i=this.translate("dateFormatOoo"),o=e("ariaFilterValue","Filter Value");this.forEachInput(r=>{r.setInputPlaceholder(i),r.setInputAriaLabel(o)})}getInputs(e){return e>=this.dateConditionFromComps.length?[null,null]:[this.dateConditionFromComps[e],this.dateConditionToComps[e]]}getValues(e){let i=[];return this.forEachPositionInput(e,(o,r,n,s)=>{r<s&&i.push(o.getDate())}),i}translate(e){return e===dt.LESS_THAN?super.translate("before"):e===dt.GREATER_THAN?super.translate("after"):super.translate(e)}getModelAsString(e){var i;return(i=this.filterModelFormatter.getModelAsString(e))!=null?i:""}};av.DEFAULT_FILTER_OPTIONS=[dt.EQUALS,dt.NOT_EQUAL,dt.LESS_THAN,dt.GREATER_THAN,dt.IN_RANGE,dt.BLANK,dt.NOT_BLANK];g([v("userComponentFactory")],av.prototype,"userComponentFactory",2);var y_=av,lv=class extends J{getDefaultDebounceMs(){return 0}destroy(){super.destroy()}isEventFromFloatingFilter(t){return t&&t.afterFloatingFilter}isEventFromDataChange(t){return t?.afterDataChange}getLastType(){return this.lastType}isReadOnly(){return this.readOnly}setLastTypeFromModel(t){if(!t){this.lastType=this.optionsFactory.getDefaultOption();return}let e=t.operator,i;e?i=t.conditions[0]:i=t,this.lastType=i.type}canWeEditAfterModelFromParentFilter(t){if(!t)return this.isTypeEditable(this.lastType);if(t.operator)return!1;let i=t;return this.isTypeEditable(i.type)}init(t){this.setSimpleParams(t,!1)}setSimpleParams(t,e=!0){this.optionsFactory=new c_,this.optionsFactory.init(t.filterParams,this.getDefaultFilterOptions()),e||(this.lastType=this.optionsFactory.getDefaultOption()),this.readOnly=!!t.filterParams.readOnly;let i=this.isTypeEditable(this.optionsFactory.getDefaultOption());this.setEditable(i)}onParamsUpdated(t){this.refresh(t)}refresh(t){this.setSimpleParams(t)}doesFilterHaveSingleInput(t){let e=this.optionsFactory.getCustomOption(t),{numberOfInputs:i}=e||{};return i==null||i==1}isTypeEditable(t){let e=[Qe.IN_RANGE,Qe.EMPTY,Qe.BLANK,Qe.NOT_BLANK];return!!t&&!this.isReadOnly()&&this.doesFilterHaveSingleInput(t)&&e.indexOf(t)<0}getAriaLabel(t){let e=this.columnModel.getDisplayNameForColumn(t.column,"header",!0),i=this.localeService.getLocaleTextFunc();return`${e} ${i("ariaFilterInput","Filter Input")}`}};g([v("columnModel")],lv.prototype,"columnModel",2);var Ah=class extends lv{constructor(){super(`
            <div class="ag-floating-filter-input" role="presentation">
                <ag-input-text-field ref="eReadOnlyText"></ag-input-text-field>
                <div ref="eDateWrapper" style="display: flex;"></div>
            </div>`)}getDefaultFilterOptions(){return y_.DEFAULT_FILTER_OPTIONS}init(t){super.init(t),this.params=t,this.filterParams=t.filterParams,this.createDateComponent(),this.filterModelFormatter=new C_(this.filterParams,this.localeService,this.optionsFactory);let e=this.localeService.getLocaleTextFunc();this.eReadOnlyText.setDisabled(!0).setInputAriaLabel(e("ariaDateFilterInput","Date Filter Input"))}onParamsUpdated(t){this.refresh(t)}refresh(t){super.refresh(t),this.params=t,this.filterParams=t.filterParams,this.updateDateComponent(),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory,dateFilterParams:this.filterParams}),this.updateCompOnModelChange(t.currentParentModel())}updateCompOnModelChange(t){let e=!this.isReadOnly()&&this.canWeEditAfterModelFromParentFilter(t);if(this.setEditable(e),e){if(t){let i=t;this.dateComp.setDate(ti(i.dateFrom))}else this.dateComp.setDate(null);this.eReadOnlyText.setValue("")}else this.eReadOnlyText.setValue(this.filterModelFormatter.getModelAsString(t)),this.dateComp.setDate(null)}setEditable(t){me(this.eDateWrapper,t),me(this.eReadOnlyText.getGui(),!t)}onParentModelChanged(t,e){this.isEventFromFloatingFilter(e)||this.isEventFromDataChange(e)||(super.setLastTypeFromModel(t),this.updateCompOnModelChange(t))}onDateChanged(){let t=this.dateComp.getDate(),e=Ai(t);this.params.parentFilterInstance(i=>{if(i){let o=ti(e);i.onFloatingFilterChanged(this.getLastType()||null,o)}})}getDateComponentParams(){let t=ih.getDebounceMs(this.params.filterParams,this.getDefaultDebounceMs());return{onDateChanged:Ut(this.onDateChanged.bind(this),t),filterParams:this.params.column.getColDef().filterParams}}createDateComponent(){this.dateComp=new d_(this.getContext(),this.userComponentFactory,this.getDateComponentParams(),this.eDateWrapper,t=>{t.setInputAriaLabel(this.getAriaLabel(this.params))}),this.addDestroyFunc(()=>this.dateComp.destroy())}updateDateComponent(){let t=this.gos.addGridCommonParams(this.getDateComponentParams());this.dateComp.updateParams(t)}getFilterModelFormatter(){return this.filterModelFormatter}};g([v("userComponentFactory")],Ah.prototype,"userComponentFactory",2);g([k("eReadOnlyText")],Ah.prototype,"eReadOnlyText",2);g([k("eDateWrapper")],Ah.prototype,"eDateWrapper",2);var b_=class extends J{constructor(){super(`
            <div class="ag-filter-filter">
                <ag-input-text-field class="ag-date-filter" ref="eDateInput"></ag-input-text-field>
            </div>`)}destroy(){super.destroy()}init(t){this.params=t,this.setParams(t);let e=this.eDateInput.getInputElement();this.addManagedListener(e,"mousedown",()=>{this.eDateInput.isDisabled()||this.usingSafariDatePicker||e.focus()}),this.addManagedListener(e,"input",i=>{i.target===this.gos.getActiveDomElement()&&(this.eDateInput.isDisabled()||this.params.onDateChanged())})}setParams(t){let e=this.eDateInput.getInputElement(),i=this.shouldUseBrowserDatePicker(t);this.usingSafariDatePicker=i&&fo(),e.type=i?"date":"text";let{minValidYear:o,maxValidYear:r,minValidDate:n,maxValidDate:s}=t.filterParams||{};if(n&&o&&q("DateFilter should not have both minValidDate and minValidYear parameters set at the same time! minValidYear will be ignored."),s&&r&&q("DateFilter should not have both maxValidDate and maxValidYear parameters set at the same time! maxValidYear will be ignored."),n&&s){let[a,l]=[n,s].map(d=>d instanceof Date?d:ti(d));a&&l&&a.getTime()>l.getTime()&&q("DateFilter parameter minValidDate should always be lower than or equal to parameter maxValidDate.")}n?n instanceof Date?e.min=Qs(n):e.min=n:o&&(e.min=`${o}-01-01`),s?s instanceof Date?e.max=Qs(s):e.max=s:r&&(e.max=`${r}-12-31`)}onParamsUpdated(t){this.refresh(t)}refresh(t){this.params=t,this.setParams(t)}getDate(){return ti(this.eDateInput.getValue())}setDate(t){this.eDateInput.setValue(Ai(t,!1))}setInputPlaceholder(t){this.eDateInput.setInputPlaceholder(t)}setInputAriaLabel(t){this.eDateInput.setAriaLabel(t)}setDisabled(t){this.eDateInput.setDisabled(t)}afterGuiAttached(t){(!t||!t.suppressFocus)&&this.eDateInput.getInputElement().focus()}shouldUseBrowserDatePicker(t){return t.filterParams&&t.filterParams.browserDatePicker!=null?t.filterParams.browserDatePicker:Sh()||Hm()||fo()&&Vm()>=14.1}};g([k("eDateInput")],b_.prototype,"eDateInput",2);var Vn=class extends Ki{constructor(t,e="ag-text-field",i="text"){super(t,e,i)}postConstruct(){super.postConstruct(),this.config.allowedCharPattern&&this.preventDisallowedCharacters()}setValue(t,e){return this.eInput.value!==t&&(this.eInput.value=T(t)?t:""),super.setValue(t,e)}setStartValue(t){this.setValue(t,!0)}preventDisallowedCharacters(){let t=new RegExp(`[${this.config.allowedCharPattern}]`),e=i=>{_h(i)&&i.key&&!t.test(i.key)&&i.preventDefault()};this.addManagedListener(this.eInput,"keydown",e),this.addManagedListener(this.eInput,"paste",i=>{var o;let r=(o=i.clipboardData)==null?void 0:o.getData("text");r&&r.split("").some(n=>!t.test(n))&&i.preventDefault()})}},dv=class extends Vn{constructor(t){super(t,"ag-number-field","number")}postConstruct(){super.postConstruct(),this.addManagedListener(this.eInput,"blur",()=>{let r=parseFloat(this.eInput.value),n=isNaN(r)?"":this.normalizeValue(r.toString());this.value!==n&&this.setValue(n)}),this.addManagedListener(this.eInput,"wheel",this.onWheel.bind(this)),this.eInput.step="any";let{precision:t,min:e,max:i,step:o}=this.config;typeof t=="number"&&this.setPrecision(t),typeof e=="number"&&this.setMin(e),typeof i=="number"&&this.setMax(i),typeof o=="number"&&this.setStep(o)}onWheel(t){this.gos.getActiveDomElement()===this.eInput&&t.preventDefault()}normalizeValue(t){if(t==="")return"";this.precision!=null&&(t=this.adjustPrecision(t));let e=parseFloat(t);return this.min!=null&&e<this.min?t=this.min.toString():this.max!=null&&e>this.max&&(t=this.max.toString()),t}adjustPrecision(t,e){if(this.precision==null)return t;if(e){let o=parseFloat(t).toFixed(this.precision);return parseFloat(o).toString()}let i=String(t).split(".");if(i.length>1){if(i[1].length<=this.precision)return t;if(this.precision>0)return`${i[0]}.${i[1].slice(0,this.precision)}`}return i[0]}setMin(t){return this.min===t?this:(this.min=t,po(this.eInput,"min",t),this)}setMax(t){return this.max===t?this:(this.max=t,po(this.eInput,"max",t),this)}setPrecision(t){return this.precision=t,this}setStep(t){return this.step===t?this:(this.step=t,po(this.eInput,"step",t),this)}setValue(t,e){return this.setValueOrInputValue(i=>super.setValue(i,e),()=>this,t)}setStartValue(t){return this.setValueOrInputValue(e=>super.setValue(e,!0),e=>{this.eInput.value=e},t)}setValueOrInputValue(t,e,i){if(T(i)){let o=this.isScientificNotation(i);if(o&&this.eInput.validity.valid)return t(i);if(!o){i=this.adjustPrecision(i);let r=this.normalizeValue(i);o=i!=r}if(o)return e(i)}return t(i)}getValue(){if(!this.eInput.validity.valid)return;let t=this.eInput.value;return this.isScientificNotation(t)?this.adjustPrecision(t,!0):super.getValue()}isScientificNotation(t){return typeof t=="string"&&t.includes("e")}},S_=class extends sv{conditionToString(t,e){let{numberOfInputs:i}=e||{};return t.type==Qe.IN_RANGE||i===2?`${this.formatValue(t.filter)}-${this.formatValue(t.filterTo)}`:t.filter!=null?this.formatValue(t.filter):`${t.type}`}};function hm(t){let{allowedCharPattern:e}=t??{};return e??null}var x_=class __ extends dt{constructor(){super("numberFilter"),this.eValuesFrom=[],this.eValuesTo=[]}refresh(e){return this.numberFilterParams.allowedCharPattern!==e.allowedCharPattern?!1:super.refresh(e)}mapValuesFromModel(e){let{filter:i,filterTo:o,type:r}=e||{};return[this.processValue(i),this.processValue(o)].slice(0,this.getNumberOfInputs(r))}getDefaultDebounceMs(){return 500}comparator(){return(e,i)=>e===i?0:e<i?1:-1}setParams(e){this.numberFilterParams=e,super.setParams(e),this.filterModelFormatter=new S_(this.localeService,this.optionsFactory,this.numberFilterParams.numberFormatter)}getDefaultFilterOptions(){return __.DEFAULT_FILTER_OPTIONS}setElementValue(e,i,o){let r=!o&&this.numberFilterParams.numberFormatter?this.numberFilterParams.numberFormatter(i??null):i;super.setElementValue(e,r)}createValueElement(){let e=hm(this.numberFilterParams),i=document.createElement("div");return i.classList.add("ag-filter-body"),Xe(i,"presentation"),this.createFromToElement(i,this.eValuesFrom,"from",e),this.createFromToElement(i,this.eValuesTo,"to",e),i}createFromToElement(e,i,o,r){let n=this.createManagedBean(r?new Vn({allowedCharPattern:r}):new dv);n.addCssClass(`ag-filter-${o}`),n.addCssClass("ag-filter-filter"),i.push(n),e.appendChild(n.getGui())}removeValueElements(e,i){this.removeComponents(this.eValuesFrom,e,i),this.removeComponents(this.eValuesTo,e,i)}getValues(e){let i=[];return this.forEachPositionInput(e,(o,r,n,s)=>{r<s&&i.push(this.processValue(this.stringToFloat(o.getValue())))}),i}areSimpleModelsEqual(e,i){return e.filter===i.filter&&e.filterTo===i.filterTo&&e.type===i.type}getFilterType(){return"number"}processValue(e){return e==null||isNaN(e)?null:e}stringToFloat(e){if(typeof e=="number")return e;let i=go(e);return i!=null&&i.trim()===""&&(i=null),this.numberFilterParams.numberParser?this.numberFilterParams.numberParser(i):i==null||i.trim()==="-"?null:parseFloat(i)}createCondition(e){let i=this.getConditionType(e),o={filterType:this.getFilterType(),type:i},r=this.getValues(e);return r.length>0&&(o.filter=r[0]),r.length>1&&(o.filterTo=r[1]),o}getInputs(e){return e>=this.eValuesFrom.length?[null,null]:[this.eValuesFrom[e],this.eValuesTo[e]]}getModelAsString(e){var i;return(i=this.filterModelFormatter.getModelAsString(e))!=null?i:""}hasInvalidInputs(){let e=!1;return this.forEachInput(i=>{if(!i.getInputElement().validity.valid){e=!0;return}}),e}};x_.DEFAULT_FILTER_OPTIONS=[dt.EQUALS,dt.NOT_EQUAL,dt.GREATER_THAN,dt.GREATER_THAN_OR_EQUAL,dt.LESS_THAN,dt.LESS_THAN_OR_EQUAL,dt.IN_RANGE,dt.BLANK,dt.NOT_BLANK];var E_=x_,D_=class extends sv{conditionToString(t,e){let{numberOfInputs:i}=e||{};return t.type==Qe.IN_RANGE||i===2?`${t.filter}-${t.filterTo}`:t.filter!=null?`${t.filter}`:`${t.type}`}},Ui=class Ws extends Qe{constructor(){super("textFilter"),this.eValuesFrom=[],this.eValuesTo=[]}static trimInput(e){let i=e&&e.trim();return i===""?e:i}getDefaultDebounceMs(){return 500}setParams(e){this.textFilterParams=e,super.setParams(e),this.matcher=this.getTextMatcher(),this.formatter=this.textFilterParams.textFormatter||(this.textFilterParams.caseSensitive?Ws.DEFAULT_FORMATTER:Ws.DEFAULT_LOWERCASE_FORMATTER),this.filterModelFormatter=new D_(this.localeService,this.optionsFactory)}getTextMatcher(){let e=this.textFilterParams.textCustomComparator;return e?(ce.warnOnce("textCustomComparator is deprecated, use textMatcher instead."),({filterOption:i,value:o,filterText:r})=>e(i,o,r)):this.textFilterParams.textMatcher||Ws.DEFAULT_MATCHER}createCondition(e){let i=this.getConditionType(e),o={filterType:this.getFilterType(),type:i},r=this.getValuesWithSideEffects(e,!0);return r.length>0&&(o.filter=r[0]),r.length>1&&(o.filterTo=r[1]),o}getFilterType(){return"text"}areSimpleModelsEqual(e,i){return e.filter===i.filter&&e.filterTo===i.filterTo&&e.type===i.type}getInputs(e){return e>=this.eValuesFrom.length?[null,null]:[this.eValuesFrom[e],this.eValuesTo[e]]}getValues(e){return this.getValuesWithSideEffects(e,!1)}getValuesWithSideEffects(e,i){let o=[];return this.forEachPositionInput(e,(r,n,s,a)=>{var l;if(n<a){let d=go(r.getValue());i&&this.textFilterParams.trimInput&&(d=(l=Ws.trimInput(d))!=null?l:null,r.setValue(d,!0)),o.push(d)}}),o}getDefaultFilterOptions(){return Ws.DEFAULT_FILTER_OPTIONS}createValueElement(){let e=document.createElement("div");return e.classList.add("ag-filter-body"),Xe(e,"presentation"),this.createFromToElement(e,this.eValuesFrom,"from"),this.createFromToElement(e,this.eValuesTo,"to"),e}createFromToElement(e,i,o){let r=this.createManagedBean(new Vn);r.addCssClass(`ag-filter-${o}`),r.addCssClass("ag-filter-filter"),i.push(r),e.appendChild(r.getGui())}removeValueElements(e,i){this.removeComponents(this.eValuesFrom,e,i),this.removeComponents(this.eValuesTo,e,i)}mapValuesFromModel(e){let{filter:i,filterTo:o,type:r}=e||{};return[i||null,o||null].slice(0,this.getNumberOfInputs(r))}evaluateNullValue(e){let i=[Qe.NOT_EQUAL,Qe.NOT_CONTAINS,Qe.BLANK];return e?i.indexOf(e)>=0:!1}evaluateNonNullValue(e,i,o,r){let n=e.map(m=>this.formatter(m))||[],s=this.formatter(i),{api:a,colDef:l,column:d,columnApi:c,context:u,textFormatter:h}=this.textFilterParams;if(o.type===Qe.BLANK)return this.isBlank(i);if(o.type===Qe.NOT_BLANK)return!this.isBlank(i);let p={api:a,colDef:l,column:d,columnApi:c,context:u,node:r.node,data:r.data,filterOption:o.type,value:s,textFormatter:h};return n.some(m=>this.matcher(He(j({},p),{filterText:m})))}getModelAsString(e){var i;return(i=this.filterModelFormatter.getModelAsString(e))!=null?i:""}};Ui.DEFAULT_FILTER_OPTIONS=[Qe.CONTAINS,Qe.NOT_CONTAINS,Qe.EQUALS,Qe.NOT_EQUAL,Qe.STARTS_WITH,Qe.ENDS_WITH,Qe.BLANK,Qe.NOT_BLANK];Ui.DEFAULT_FORMATTER=t=>t;Ui.DEFAULT_LOWERCASE_FORMATTER=t=>t==null?null:t.toString().toLowerCase();Ui.DEFAULT_MATCHER=({filterOption:t,value:e,filterText:i})=>{if(i==null)return!1;switch(t){case Ui.CONTAINS:return e.indexOf(i)>=0;case Ui.NOT_CONTAINS:return e.indexOf(i)<0;case Ui.EQUALS:return e===i;case Ui.NOT_EQUAL:return e!=i;case Ui.STARTS_WITH:return e.indexOf(i)===0;case Ui.ENDS_WITH:let o=e.lastIndexOf(i);return o>=0&&o===e.length-i.length;default:return!1}};var cv=Ui,R_=class extends A{constructor(t){super(),this.params=t,this.valueChangedListener=()=>{}}setupGui(t){var e;this.eFloatingFilterTextInput=this.createManagedBean(new Vn((e=this.params)==null?void 0:e.config));let i=this.eFloatingFilterTextInput.getGui();t.appendChild(i),this.addManagedListener(i,"input",o=>this.valueChangedListener(o)),this.addManagedListener(i,"keydown",o=>this.valueChangedListener(o))}setEditable(t){this.eFloatingFilterTextInput.setDisabled(!t)}setAutoComplete(t){this.eFloatingFilterTextInput.setAutoComplete(t)}getValue(){return this.eFloatingFilterTextInput.getValue()}setValue(t,e){this.eFloatingFilterTextInput.setValue(t,e)}setValueChangedListener(t){this.valueChangedListener=t}setParams(t){this.setAriaLabel(t.ariaLabel),t.autoComplete!==void 0&&this.setAutoComplete(t.autoComplete)}setAriaLabel(t){this.eFloatingFilterTextInput.setInputAriaLabel(t)}},Ih=class extends lv{postConstruct(){this.setTemplate(`
            <div class="ag-floating-filter-input" role="presentation" ref="eFloatingFilterInputContainer"></div>
        `)}getDefaultDebounceMs(){return 500}onParentModelChanged(t,e){this.isEventFromFloatingFilter(e)||this.isEventFromDataChange(e)||(this.setLastTypeFromModel(t),this.setEditable(this.canWeEditAfterModelFromParentFilter(t)),this.floatingFilterInputService.setValue(this.getFilterModelFormatter().getModelAsString(t)))}init(t){this.setupFloatingFilterInputService(t),super.init(t),this.setTextInputParams(t)}setupFloatingFilterInputService(t){this.floatingFilterInputService=this.createFloatingFilterInputService(t),this.floatingFilterInputService.setupGui(this.eFloatingFilterInputContainer)}setTextInputParams(t){var e;this.params=t;let i=(e=t.browserAutoComplete)!=null?e:!1;if(this.floatingFilterInputService.setParams({ariaLabel:this.getAriaLabel(t),autoComplete:i}),this.applyActive=ih.isUseApplyButton(this.params.filterParams),!this.isReadOnly()){let o=ih.getDebounceMs(this.params.filterParams,this.getDefaultDebounceMs()),r=Ut(this.syncUpWithParentFilter.bind(this),o);this.floatingFilterInputService.setValueChangedListener(r)}}onParamsUpdated(t){this.refresh(t)}refresh(t){super.refresh(t),this.setTextInputParams(t)}recreateFloatingFilterInputService(t){let e=this.floatingFilterInputService.getValue();Je(this.eFloatingFilterInputContainer),this.destroyBean(this.floatingFilterInputService),this.setupFloatingFilterInputService(t),this.floatingFilterInputService.setValue(e,!0)}syncUpWithParentFilter(t){let e=t.key===S.ENTER;if(this.applyActive&&!e)return;let i=this.floatingFilterInputService.getValue();this.params.filterParams.trimInput&&(i=cv.trimInput(i),this.floatingFilterInputService.setValue(i,!0)),this.params.parentFilterInstance(o=>{o&&o.onFloatingFilterChanged(this.getLastType()||null,i||null)})}setEditable(t){this.floatingFilterInputService.setEditable(t)}};g([k("eFloatingFilterInputContainer")],Ih.prototype,"eFloatingFilterInputContainer",2);g([I],Ih.prototype,"postConstruct",1);var XF=class extends A{constructor(){super(...arguments),this.valueChangedListener=()=>{},this.numberInputActive=!0}setupGui(t){this.eFloatingFilterNumberInput=this.createManagedBean(new dv),this.eFloatingFilterTextInput=this.createManagedBean(new Vn),this.eFloatingFilterTextInput.setDisabled(!0);let e=this.eFloatingFilterNumberInput.getGui(),i=this.eFloatingFilterTextInput.getGui();t.appendChild(e),t.appendChild(i),this.setupListeners(e,o=>this.valueChangedListener(o)),this.setupListeners(i,o=>this.valueChangedListener(o))}setEditable(t){this.numberInputActive=t,this.eFloatingFilterNumberInput.setDisplayed(this.numberInputActive),this.eFloatingFilterTextInput.setDisplayed(!this.numberInputActive)}setAutoComplete(t){this.eFloatingFilterNumberInput.setAutoComplete(t),this.eFloatingFilterTextInput.setAutoComplete(t)}getValue(){return this.getActiveInputElement().getValue()}setValue(t,e){this.getActiveInputElement().setValue(t,e)}getActiveInputElement(){return this.numberInputActive?this.eFloatingFilterNumberInput:this.eFloatingFilterTextInput}setValueChangedListener(t){this.valueChangedListener=t}setupListeners(t,e){this.addManagedListener(t,"input",e),this.addManagedListener(t,"keydown",e)}setParams(t){this.setAriaLabel(t.ariaLabel),t.autoComplete!==void 0&&this.setAutoComplete(t.autoComplete)}setAriaLabel(t){this.eFloatingFilterNumberInput.setInputAriaLabel(t),this.eFloatingFilterTextInput.setInputAriaLabel(t)}},ZF=class extends Ih{init(t){var e;super.init(t),this.filterModelFormatter=new S_(this.localeService,this.optionsFactory,(e=t.filterParams)==null?void 0:e.numberFormatter)}onParamsUpdated(t){this.refresh(t)}refresh(t){hm(t.filterParams)!==this.allowedCharPattern&&this.recreateFloatingFilterInputService(t),super.refresh(t),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})}getDefaultFilterOptions(){return E_.DEFAULT_FILTER_OPTIONS}getFilterModelFormatter(){return this.filterModelFormatter}createFloatingFilterInputService(t){return this.allowedCharPattern=hm(t.filterParams),this.allowedCharPattern?this.createManagedBean(new R_({config:{allowedCharPattern:this.allowedCharPattern}})):this.createManagedBean(new XF)}},JF=class extends Ih{init(t){super.init(t),this.filterModelFormatter=new D_(this.localeService,this.optionsFactory)}onParamsUpdated(t){this.refresh(t)}refresh(t){super.refresh(t),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})}getDefaultFilterOptions(){return cv.DEFAULT_FILTER_OPTIONS}getFilterModelFormatter(){return this.filterModelFormatter}createFloatingFilterInputService(){return this.createManagedBean(new R_)}},Vd=class ed{constructor(e,i=!1){this.destroyFuncs=[],this.touching=!1,this.eventService=new Yi,this.eElement=e,this.preventMouseClick=i;let o=this.onTouchStart.bind(this),r=this.onTouchMove.bind(this),n=this.onTouchEnd.bind(this);this.eElement.addEventListener("touchstart",o,{passive:!0}),this.eElement.addEventListener("touchmove",r,{passive:!0}),this.eElement.addEventListener("touchend",n,{passive:!1}),this.destroyFuncs.push(()=>{this.eElement.removeEventListener("touchstart",o,{passive:!0}),this.eElement.removeEventListener("touchmove",r,{passive:!0}),this.eElement.removeEventListener("touchend",n,{passive:!1})})}getActiveTouch(e){for(let i=0;i<e.length;i++)if(e[i].identifier===this.touchStart.identifier)return e[i];return null}addEventListener(e,i){this.eventService.addEventListener(e,i)}removeEventListener(e,i){this.eventService.removeEventListener(e,i)}onTouchStart(e){if(this.touching)return;this.touchStart=e.touches[0],this.touching=!0,this.moved=!1;let i=this.touchStart;window.setTimeout(()=>{let o=this.touchStart===i;if(this.touching&&o&&!this.moved){this.moved=!0;let r={type:ed.EVENT_LONG_TAP,touchStart:this.touchStart,touchEvent:e};this.eventService.dispatchEvent(r)}},500)}onTouchMove(e){if(!this.touching)return;let i=this.getActiveTouch(e.touches);if(!i)return;!iv(i,this.touchStart,4)&&(this.moved=!0)}onTouchEnd(e){if(this.touching){if(!this.moved){let i={type:ed.EVENT_TAP,touchStart:this.touchStart};this.eventService.dispatchEvent(i),this.checkForDoubleTap()}this.preventMouseClick&&e.cancelable&&e.preventDefault(),this.touching=!1}}checkForDoubleTap(){let e=new Date().getTime();if(this.lastTapTime&&this.lastTapTime>0)if(e-this.lastTapTime>ed.DOUBLE_TAP_MILLIS){let o={type:ed.EVENT_DOUBLE_TAP,touchStart:this.touchStart};this.eventService.dispatchEvent(o),this.lastTapTime=null}else this.lastTapTime=e;else this.lastTapTime=e}destroy(){this.destroyFuncs.forEach(e=>e())}};Vd.EVENT_TAP="tap";Vd.EVENT_DOUBLE_TAP="doubleTap";Vd.EVENT_LONG_TAP="longTap";Vd.DOUBLE_TAP_MILLIS=500;var St=Vd,Bo=class M_ extends J{constructor(e){super(),e||this.setTemplate(M_.TEMPLATE)}attachCustomElements(e,i,o,r,n){this.eSortOrder=e,this.eSortAsc=i,this.eSortDesc=o,this.eSortMixed=r,this.eSortNone=n}setupSort(e,i=!1){this.column=e,this.suppressOrder=i,this.setupMultiSortIndicator(),!(!this.column.isSortable()&&!this.column.getColDef().showRowGroup)&&(this.addInIcon("sortAscending",this.eSortAsc,e),this.addInIcon("sortDescending",this.eSortDesc,e),this.addInIcon("sortUnSort",this.eSortNone,e),this.addManagedPropertyListener("unSortIcon",()=>this.updateIcons()),this.addManagedListener(this.eventService,f.EVENT_NEW_COLUMNS_LOADED,()=>this.updateIcons()),this.addManagedListener(this.eventService,f.EVENT_SORT_CHANGED,()=>this.onSortChanged()),this.addManagedListener(this.eventService,f.EVENT_COLUMN_ROW_GROUP_CHANGED,()=>this.onSortChanged()),this.onSortChanged())}addInIcon(e,i,o){if(i==null)return;let r=qe(e,this.gos,o);r&&i.appendChild(r)}onSortChanged(){this.updateIcons(),this.suppressOrder||this.updateSortOrder()}updateIcons(){let e=this.sortController.getDisplaySortForColumn(this.column);if(this.eSortAsc){let i=e==="asc";me(this.eSortAsc,i,{skipAriaHidden:!0})}if(this.eSortDesc){let i=e==="desc";me(this.eSortDesc,i,{skipAriaHidden:!0})}if(this.eSortNone){let i=!this.column.getColDef().unSortIcon&&!this.gos.get("unSortIcon"),o=e==null;me(this.eSortNone,!i&&o,{skipAriaHidden:!0})}}setupMultiSortIndicator(){this.addInIcon("sortUnSort",this.eSortMixed,this.column);let e=this.column.getColDef().showRowGroup;this.gos.isColumnsSortingCoupledToGroup()&&e&&(this.addManagedListener(this.eventService,f.EVENT_SORT_CHANGED,()=>this.updateMultiSortIndicator()),this.addManagedListener(this.eventService,f.EVENT_COLUMN_ROW_GROUP_CHANGED,()=>this.updateMultiSortIndicator()),this.updateMultiSortIndicator())}updateMultiSortIndicator(){if(this.eSortMixed){let e=this.sortController.getDisplaySortForColumn(this.column)==="mixed";me(this.eSortMixed,e,{skipAriaHidden:!0})}}updateSortOrder(){var e;if(!this.eSortOrder)return;let i=this.sortController.getColumnsWithSortingOrdered(),o=(e=this.sortController.getDisplaySortIndexForColumn(this.column))!=null?e:-1,r=i.some(s=>{var a;return(a=this.sortController.getDisplaySortIndexForColumn(s))!=null?a:!1}),n=o>=0&&r;me(this.eSortOrder,n,{skipAriaHidden:!0}),o>=0?this.eSortOrder.textContent=(o+1).toString():Je(this.eSortOrder)}};Bo.TEMPLATE=`<span class="ag-sort-indicator-container">
            <span ref="eSortOrder" class="ag-sort-indicator-icon ag-sort-order ag-hidden" aria-hidden="true"></span>
            <span ref="eSortAsc" class="ag-sort-indicator-icon ag-sort-ascending-icon ag-hidden" aria-hidden="true"></span>
            <span ref="eSortDesc" class="ag-sort-indicator-icon ag-sort-descending-icon ag-hidden" aria-hidden="true"></span>
            <span ref="eSortMixed" class="ag-sort-indicator-icon ag-sort-mixed-icon ag-hidden" aria-hidden="true"></span>
            <span ref="eSortNone" class="ag-sort-indicator-icon ag-sort-none-icon ag-hidden" aria-hidden="true"></span>
        </span>`;g([k("eSortOrder")],Bo.prototype,"eSortOrder",2);g([k("eSortAsc")],Bo.prototype,"eSortAsc",2);g([k("eSortDesc")],Bo.prototype,"eSortDesc",2);g([k("eSortMixed")],Bo.prototype,"eSortMixed",2);g([k("eSortNone")],Bo.prototype,"eSortNone",2);g([v("columnModel")],Bo.prototype,"columnModel",2);g([v("sortController")],Bo.prototype,"sortController",2);var uv=Bo,Gt=class T_ extends J{constructor(){super(...arguments),this.lastMovingChanged=0}destroy(){super.destroy()}refresh(e){let i=this.params;return this.params=e,this.workOutTemplate()!=this.currentTemplate||this.workOutShowMenu()!=this.currentShowMenu||this.workOutSort()!=this.currentSort||this.shouldSuppressMenuHide()!=this.currentSuppressMenuHide||i.enableFilterButton!=e.enableFilterButton||i.enableFilterIcon!=e.enableFilterIcon?!1:(this.setDisplayName(e),!0)}workOutTemplate(){var e;let i=(e=this.params.template)!=null?e:T_.TEMPLATE;return i=i&&i.trim?i.trim():i,i}init(e){this.params=e,this.currentTemplate=this.workOutTemplate(),this.setTemplate(this.currentTemplate),this.setupTap(),this.setMenu(),this.setupSort(),this.setupFilterIcon(),this.setupFilterButton(),this.setDisplayName(e)}setDisplayName(e){if(this.currentDisplayName!=e.displayName){this.currentDisplayName=e.displayName;let i=rt(this.currentDisplayName,!0);this.eText&&(this.eText.textContent=i)}}addInIcon(e,i,o){if(i==null)return;let r=qe(e,this.gos,o);r&&i.appendChild(r)}setupTap(){let{gos:e}=this;if(e.get("suppressTouch"))return;let i=new St(this.getGui(),!0),o=this.shouldSuppressMenuHide(),r=o&&T(this.eMenu),n=r?new St(this.eMenu,!0):i;if(this.params.enableMenu){let s=r?"EVENT_TAP":"EVENT_LONG_TAP",a=l=>this.params.showColumnMenuAfterMouseClick(l.touchStart);this.addManagedListener(n,St[s],a)}if(this.params.enableSorting){let s=a=>{var l,d;let c=a.touchStart.target;o&&((l=this.eMenu)!=null&&l.contains(c)||(d=this.eFilterButton)!=null&&d.contains(c))||this.sortController.progressSort(this.params.column,!1,"uiColumnSorted")};this.addManagedListener(i,St.EVENT_TAP,s)}if(this.params.enableFilterButton){let s=new St(this.eFilterButton,!0);this.addManagedListener(s,"tap",()=>this.params.showFilter(this.eFilterButton)),this.addDestroyFunc(()=>s.destroy())}this.addDestroyFunc(()=>i.destroy()),r&&this.addDestroyFunc(()=>n.destroy())}workOutShowMenu(){return this.params.enableMenu&&this.menuService.isHeaderMenuButtonEnabled()}shouldSuppressMenuHide(){return this.menuService.isHeaderMenuButtonAlwaysShowEnabled()}setMenu(){if(!this.eMenu)return;if(this.currentShowMenu=this.workOutShowMenu(),!this.currentShowMenu){qi(this.eMenu),this.eMenu=void 0;return}let e=this.menuService.isLegacyMenuEnabled();this.addInIcon(e?"menu":"menuAlt",this.eMenu,this.params.column),this.eMenu.classList.toggle("ag-header-menu-icon",!e),this.currentSuppressMenuHide=this.shouldSuppressMenuHide(),this.addManagedListener(this.eMenu,"click",()=>this.params.showColumnMenu(this.eMenu)),this.eMenu.classList.toggle("ag-header-menu-always-show",this.currentSuppressMenuHide)}onMenuKeyboardShortcut(e){var i,o,r,n;let{column:s}=this.params,a=this.menuService.isLegacyMenuEnabled();if(e&&!a){if(this.menuService.isFilterMenuInHeaderEnabled(s))return this.params.showFilter((o=(i=this.eFilterButton)!=null?i:this.eMenu)!=null?o:this.getGui()),!0}else if(this.params.enableMenu)return this.params.showColumnMenu((n=(r=this.eMenu)!=null?r:this.eFilterButton)!=null?n:this.getGui()),!0;return!1}workOutSort(){return this.params.enableSorting}setupSort(){if(this.currentSort=this.params.enableSorting,this.eSortIndicator||(this.eSortIndicator=this.context.createBean(new uv(!0)),this.eSortIndicator.attachCustomElements(this.eSortOrder,this.eSortAsc,this.eSortDesc,this.eSortMixed,this.eSortNone)),this.eSortIndicator.setupSort(this.params.column),!this.currentSort)return;this.addManagedListener(this.params.column,ke.EVENT_MOVING_CHANGED,()=>{this.lastMovingChanged=new Date().getTime()}),this.eLabel&&this.addManagedListener(this.eLabel,"click",i=>{let o=this.params.column.isMoving(),n=new Date().getTime()-this.lastMovingChanged<50;if(!(o||n)){let l=this.gos.get("multiSortKey")==="ctrl"?i.ctrlKey||i.metaKey:i.shiftKey;this.params.progressSort(l)}});let e=()=>{if(this.addOrRemoveCssClass("ag-header-cell-sorted-asc",this.params.column.isSortAscending()),this.addOrRemoveCssClass("ag-header-cell-sorted-desc",this.params.column.isSortDescending()),this.addOrRemoveCssClass("ag-header-cell-sorted-none",this.params.column.isSortNone()),this.params.column.getColDef().showRowGroup){let i=this.columnModel.getSourceColumnsForGroupColumn(this.params.column),r=!i?.every(n=>this.params.column.getSort()==n.getSort());this.addOrRemoveCssClass("ag-header-cell-sorted-mixed",r)}};this.addManagedListener(this.eventService,f.EVENT_SORT_CHANGED,e),this.addManagedListener(this.eventService,f.EVENT_COLUMN_ROW_GROUP_CHANGED,e)}setupFilterIcon(){this.eFilter&&this.configureFilter(this.params.enableFilterIcon,this.eFilter,this.onFilterChangedIcon.bind(this))}setupFilterButton(){if(!this.eFilterButton)return;this.configureFilter(this.params.enableFilterButton,this.eFilterButton,this.onFilterChangedButton.bind(this))?this.addManagedListener(this.eFilterButton,"click",()=>this.params.showFilter(this.eFilterButton)):this.eFilterButton=void 0}configureFilter(e,i,o){if(!e)return qi(i),!1;let{column:r}=this.params;return this.addInIcon("filter",i,r),this.addManagedListener(r,ke.EVENT_FILTER_CHANGED,o),o(),!0}onFilterChangedIcon(){let e=this.params.column.isFilterActive();me(this.eFilter,e,{skipAriaHidden:!0})}onFilterChangedButton(){let e=this.params.column.isFilterActive();this.eFilterButton.classList.toggle("ag-filter-active",e)}getAnchorElementForMenu(e){var i,o,r,n;return e?(o=(i=this.eFilterButton)!=null?i:this.eMenu)!=null?o:this.getGui():(n=(r=this.eMenu)!=null?r:this.eFilterButton)!=null?n:this.getGui()}};Gt.TEMPLATE=`<div class="ag-cell-label-container" role="presentation">
            <span ref="eMenu" class="ag-header-icon ag-header-cell-menu-button" aria-hidden="true"></span>
            <span ref="eFilterButton" class="ag-header-icon ag-header-cell-filter-button" aria-hidden="true"></span>
            <div ref="eLabel" class="ag-header-cell-label" role="presentation">
                <span ref="eText" class="ag-header-cell-text"></span>
                <span ref="eFilter" class="ag-header-icon ag-header-label-icon ag-filter-icon" aria-hidden="true"></span>
                <ag-sort-indicator ref="eSortIndicator"></ag-sort-indicator>
            </div>
        </div>`;g([v("sortController")],Gt.prototype,"sortController",2);g([v("menuService")],Gt.prototype,"menuService",2);g([v("columnModel")],Gt.prototype,"columnModel",2);g([k("eFilter")],Gt.prototype,"eFilter",2);g([k("eFilterButton")],Gt.prototype,"eFilterButton",2);g([k("eSortIndicator")],Gt.prototype,"eSortIndicator",2);g([k("eMenu")],Gt.prototype,"eMenu",2);g([k("eLabel")],Gt.prototype,"eLabel",2);g([k("eText")],Gt.prototype,"eText",2);g([k("eSortOrder")],Gt.prototype,"eSortOrder",2);g([k("eSortAsc")],Gt.prototype,"eSortAsc",2);g([k("eSortDesc")],Gt.prototype,"eSortDesc",2);g([k("eSortMixed")],Gt.prototype,"eSortMixed",2);g([k("eSortNone")],Gt.prototype,"eSortNone",2);var gm=Gt,Hd=class A_ extends J{constructor(){super(A_.TEMPLATE)}destroy(){super.destroy()}init(e){this.params=e,this.checkWarnings(),this.setupLabel(),this.addGroupExpandIcon(),this.setupExpandIcons()}checkWarnings(){this.params.template&&q("A template was provided for Header Group Comp - templates are only supported for Header Comps (not groups)")}setupExpandIcons(){this.addInIcon("columnGroupOpened","agOpened"),this.addInIcon("columnGroupClosed","agClosed");let e=r=>{if($i(r))return;let n=!this.params.columnGroup.isExpanded();this.columnModel.setColumnGroupOpened(this.params.columnGroup.getProvidedColumnGroup(),n,"uiColumnExpanded")};this.addTouchAndClickListeners(this.eCloseIcon,e),this.addTouchAndClickListeners(this.eOpenIcon,e);let i=r=>{Qi(r)};this.addManagedListener(this.eCloseIcon,"dblclick",i),this.addManagedListener(this.eOpenIcon,"dblclick",i),this.addManagedListener(this.getGui(),"dblclick",e),this.updateIconVisibility();let o=this.params.columnGroup.getProvidedColumnGroup();this.addManagedListener(o,ot.EVENT_EXPANDED_CHANGED,this.updateIconVisibility.bind(this)),this.addManagedListener(o,ot.EVENT_EXPANDABLE_CHANGED,this.updateIconVisibility.bind(this))}addTouchAndClickListeners(e,i){let o=new St(e,!0);this.addManagedListener(o,St.EVENT_TAP,i),this.addDestroyFunc(()=>o.destroy()),this.addManagedListener(e,"click",i)}updateIconVisibility(){if(this.params.columnGroup.isExpandable()){let i=this.params.columnGroup.isExpanded();me(this.eOpenIcon,i),me(this.eCloseIcon,!i)}else me(this.eOpenIcon,!1),me(this.eCloseIcon,!1)}addInIcon(e,i){let o=qe(e,this.gos,null);o&&this.getRefElement(i).appendChild(o)}addGroupExpandIcon(){if(!this.params.columnGroup.isExpandable()){me(this.eOpenIcon,!1),me(this.eCloseIcon,!1);return}}setupLabel(){var e;let{displayName:i,columnGroup:o}=this.params;if(T(i)){let r=rt(i,!0);this.getRefElement("agLabel").textContent=r}this.addOrRemoveCssClass("ag-sticky-label",!((e=o.getColGroupDef())!=null&&e.suppressStickyLabel))}};Hd.TEMPLATE=`<div class="ag-header-group-cell-label" ref="agContainer" role="presentation">
            <span ref="agLabel" class="ag-header-group-text" role="presentation"></span>
            <span ref="agOpened" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-expanded"></span>
            <span ref="agClosed" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-collapsed"></span>
        </div>`;g([v("columnModel")],Hd.prototype,"columnModel",2);g([k("agOpened")],Hd.prototype,"eOpenIcon",2);g([k("agClosed")],Hd.prototype,"eCloseIcon",2);var eO=Hd,Hn=class extends J{isPopup(){return!0}setParentComponent(t){t.addCssClass("ag-has-popup"),super.setParentComponent(t)}destroy(){let t=this.parentComponent;t&&t.isAlive()&&t.getGui().classList.remove("ag-has-popup"),super.destroy()}},hv=class I_ extends Hn{constructor(){super(I_.TEMPLATE)}init(e){this.params=e,this.focusAfterAttached=e.cellStartedEdit,this.eTextArea.setMaxLength(e.maxLength||200).setCols(e.cols||60).setRows(e.rows||10),T(e.value,!0)&&this.eTextArea.setValue(e.value.toString(),!0),this.addGuiEventListener("keydown",this.onKeyDown.bind(this)),this.activateTabIndex()}onKeyDown(e){let i=e.key;(i===S.LEFT||i===S.UP||i===S.RIGHT||i===S.DOWN||e.shiftKey&&i===S.ENTER)&&e.stopPropagation()}afterGuiAttached(){let e=this.localeService.getLocaleTextFunc();this.eTextArea.setInputAriaLabel(e("ariaInputEditor","Input Editor")),this.focusAfterAttached&&this.eTextArea.getFocusableElement().focus()}getValue(){let e=this.eTextArea.getValue();return!T(e)&&!T(this.params.value)?this.params.value:this.params.parseValue(e)}};hv.TEMPLATE=`<div class="ag-large-text">
            <ag-input-text-area ref="eTextArea" class="ag-large-text-input"></ag-input-text-area>
        </div>`;g([k("eTextArea")],hv.prototype,"eTextArea",2);var tO=hv,gv=class extends Hn{constructor(){super(`<div class="ag-cell-edit-wrapper">
                <ag-select class="ag-cell-editor" ref="eSelect"></ag-select>
            </div>`),this.startedByEnter=!1}init(t){this.focusAfterAttached=t.cellStartedEdit;let{eSelect:e,valueService:i,gos:o}=this,{values:r,value:n,eventKey:s}=t;if(X(r)){console.warn("AG Grid: no values found for select cellEditor");return}this.startedByEnter=s!=null?s===S.ENTER:!1;let a=!1;r.forEach(u=>{let h={value:u},p=i.formatValue(t.column,null,u),m=p!=null;h.text=m?p:u,e.addOption(h),a=a||n===u}),a?e.setValue(t.value,!0):t.values.length&&e.setValue(t.values[0],!0);let{valueListGap:l,valueListMaxWidth:d,valueListMaxHeight:c}=t;l!=null&&e.setPickerGap(l),c!=null&&e.setPickerMaxHeight(c),d!=null&&e.setPickerMaxWidth(d),o.get("editType")!=="fullRow"&&this.addManagedListener(this.eSelect,Mh.EVENT_ITEM_SELECTED,()=>t.stopEditing())}afterGuiAttached(){this.focusAfterAttached&&this.eSelect.getFocusableElement().focus(),this.startedByEnter&&setTimeout(()=>{this.isAlive()&&this.eSelect.showPicker()})}focusIn(){this.eSelect.getFocusableElement().focus()}getValue(){return this.eSelect.getValue()}isPopup(){return!1}};g([v("valueService")],gv.prototype,"valueService",2);g([k("eSelect")],gv.prototype,"eSelect",2);var Bd=class extends Hn{constructor(t){super(`
            <div class="ag-cell-edit-wrapper">
                ${t.getTemplate()}
            </div>`),this.cellEditorInput=t}init(t){this.params=t;let e=this.eInput;this.cellEditorInput.init(e,t);let i;if(t.cellStartedEdit){this.focusAfterAttached=!0;let o=t.eventKey;o===S.BACKSPACE||t.eventKey===S.DELETE?i="":o&&o.length===1?i=o:(i=this.cellEditorInput.getStartValue(),o!==S.F2&&(this.highlightAllOnFocus=!0))}else this.focusAfterAttached=!1,i=this.cellEditorInput.getStartValue();i!=null&&e.setStartValue(i),this.addManagedListener(e.getGui(),"keydown",o=>{let{key:r}=o;(r===S.PAGE_UP||r===S.PAGE_DOWN)&&o.preventDefault()})}afterGuiAttached(){var t,e;let i=this.localeService.getLocaleTextFunc(),o=this.eInput;if(o.setInputAriaLabel(i("ariaInputEditor","Input Editor")),!this.focusAfterAttached)return;fo()||o.getFocusableElement().focus();let r=o.getInputElement();this.highlightAllOnFocus?r.select():(e=(t=this.cellEditorInput).setCaret)==null||e.call(t)}focusIn(){let t=this.eInput,e=t.getFocusableElement(),i=t.getInputElement();e.focus(),i.select()}getValue(){return this.cellEditorInput.getValue()}isPopup(){return!1}};g([k("eInput")],Bd.prototype,"eInput",2);var iO=class{getTemplate(){return'<ag-input-text-field class="ag-cell-editor" ref="eInput"></ag-input-text-field>'}init(t,e){this.eInput=t,this.params=e,e.maxLength!=null&&t.setMaxLength(e.maxLength)}getValue(){let t=this.eInput.getValue();return!T(t)&&!T(this.params.value)?this.params.value:this.params.parseValue(t)}getStartValue(){return this.params.useFormatter||this.params.column.getColDef().refData?this.params.formatValue(this.params.value):this.params.value}setCaret(){let t=this.eInput.getValue(),e=T(t)&&t.length||0;e&&this.eInput.getInputElement().setSelectionRange(e,e)}},MS=class extends Bd{constructor(){super(new iO)}},oO="\u2191",rO="\u2193",P_=class extends J{constructor(){super(),this.refreshCount=0;let t=document.createElement("span"),e=document.createElement("span");e.setAttribute("class","ag-value-change-delta");let i=document.createElement("span");i.setAttribute("class","ag-value-change-value"),t.appendChild(e),t.appendChild(i),this.setTemplateFromElement(t)}init(t){this.eValue=this.queryForHtmlElement(".ag-value-change-value"),this.eDelta=this.queryForHtmlElement(".ag-value-change-delta"),this.refresh(t,!0)}showDelta(t,e){let i=Math.abs(e),o=t.formatValue(i),r=T(o)?o:i,n=e>=0;n?this.eDelta.textContent=oO+r:this.eDelta.textContent=rO+r,this.eDelta.classList.toggle("ag-value-change-delta-up",n),this.eDelta.classList.toggle("ag-value-change-delta-down",!n)}setTimerToRemoveDelta(){this.refreshCount++;let t=this.refreshCount;this.getFrameworkOverrides().wrapIncoming(()=>{window.setTimeout(()=>{t===this.refreshCount&&this.hideDeltaValue()},2e3)})}hideDeltaValue(){this.eValue.classList.remove("ag-value-change-value-highlight"),Je(this.eDelta)}refresh(t,e=!1){let i=t.value;if(i===this.lastValue||(T(t.valueFormatted)?this.eValue.textContent=t.valueFormatted:T(t.value)?this.eValue.textContent=i:Je(this.eValue),this.filterManager.isSuppressFlashingCellsBecauseFiltering()))return!1;if(typeof i=="number"&&typeof this.lastValue=="number"){let o=i-this.lastValue;this.showDelta(t,o)}return this.lastValue&&this.eValue.classList.add("ag-value-change-value-highlight"),e||this.setTimerToRemoveDelta(),this.lastValue=i,!0}};g([v("filterManager")],P_.prototype,"filterManager",2);var F_=class extends J{constructor(){super(),this.refreshCount=0;let t=document.createElement("span"),e=document.createElement("span");e.setAttribute("class","ag-value-slide-current"),t.appendChild(e),this.setTemplateFromElement(t),this.eCurrent=this.queryForHtmlElement(".ag-value-slide-current")}init(t){this.refresh(t,!0)}addSlideAnimation(){this.refreshCount++;let t=this.refreshCount;this.ePrevious&&this.getGui().removeChild(this.ePrevious);let e=document.createElement("span");e.setAttribute("class","ag-value-slide-previous ag-value-slide-out"),this.ePrevious=e,this.ePrevious.textContent=this.eCurrent.textContent,this.getGui().insertBefore(this.ePrevious,this.eCurrent),this.getFrameworkOverrides().wrapIncoming(()=>{window.setTimeout(()=>{t===this.refreshCount&&this.ePrevious.classList.add("ag-value-slide-out-end")},50),window.setTimeout(()=>{t===this.refreshCount&&(this.getGui().removeChild(this.ePrevious),this.ePrevious=null)},3e3)})}refresh(t,e=!1){let i=t.value;return X(i)&&(i=""),i===this.lastValue||this.filterManager.isSuppressFlashingCellsBecauseFiltering()?!1:(e||this.addSlideAnimation(),this.lastValue=i,T(t.valueFormatted)?this.eCurrent.textContent=t.valueFormatted:T(t.value)?this.eCurrent.textContent=i:Je(this.eCurrent),!0)}};g([v("filterManager")],F_.prototype,"filterManager",2);var Be=class ze{constructor(e){this.rowIndex=null,this.key=null,this.childrenMapped={},this.displayed=!1,this.rowTop=null,this.oldRowTop=null,this.selectable=!0,this.__objectId=ze.OBJECT_ID_SEQUENCE++,this.__autoHeights={},this.alreadyRendered=!1,this.highlighted=null,this.hovered=!1,this.selected=!1,this.beans=e}setData(e){this.setDataCommon(e,!1)}updateData(e){this.setDataCommon(e,!0)}setDataCommon(e,i){let o=this.data;this.data=e,this.beans.valueCache.onDataChanged(),this.updateDataOnDetailNode(),this.checkRowSelectable(),this.resetQuickFilterAggregateText();let r=this.createDataChangedEvent(e,o,i);this.dispatchLocalEvent(r)}updateDataOnDetailNode(){this.detailNode&&(this.detailNode.data=this.data)}createDataChangedEvent(e,i,o){return{type:ze.EVENT_DATA_CHANGED,node:this,oldData:i,newData:e,update:o}}createLocalRowEvent(e){return{type:e,node:this}}getRowIndexString(){return this.rowPinned==="top"?"t-"+this.rowIndex:this.rowPinned==="bottom"?"b-"+this.rowIndex:this.rowIndex.toString()}createDaemonNode(){let e=new ze(this.beans);return e.id=this.id,e.data=this.data,e.__daemon=!0,e.selected=this.selected,e.level=this.level,e}setDataAndId(e,i){let o=T(this.id)?this.createDaemonNode():null,r=this.data;this.data=e,this.updateDataOnDetailNode(),this.setId(i),this.checkRowSelectable(),this.beans.selectionService.syncInRowNode(this,o);let n=this.createDataChangedEvent(e,r,!1);this.dispatchLocalEvent(n)}checkRowSelectable(){let e=this.beans.gos.get("isRowSelectable");this.setRowSelectable(e?e(this):!0)}setRowSelectable(e,i){if(this.selectable!==e){if(this.selectable=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(ze.EVENT_SELECTABLE_CHANGED)),i)return;if(this.beans.gos.get("groupSelectsChildren")){let r=this.calculateSelectedFromChildren();this.setSelectedParams({newValue:r??!1,source:"selectableChanged"});return}this.isSelected()&&!this.selectable&&this.setSelectedParams({newValue:!1,source:"selectableChanged"})}}setId(e){let i=this.beans.gos.getCallback("getRowId");if(i)if(this.data){let o=this.getGroupKeys(!0);this.id=i({data:this.data,parentKeys:o.length>0?o:void 0,level:this.level}),this.id!==null&&typeof this.id=="string"&&this.id.startsWith(ze.ID_PREFIX_ROW_GROUP)&&console.error(`AG Grid: Row IDs cannot start with ${ze.ID_PREFIX_ROW_GROUP}, this is a reserved prefix for AG Grid's row grouping feature.`),this.id!==null&&typeof this.id!="string"&&(this.id=""+this.id)}else this.id=void 0;else this.id=e}getGroupKeys(e=!1){let i=[],o=this;for(e&&(o=o.parent);o&&o.level>=0;)i.push(o.key),o=o.parent;return i.reverse(),i}isPixelInRange(e){return!T(this.rowTop)||!T(this.rowHeight)?!1:e>=this.rowTop&&e<this.rowTop+this.rowHeight}setFirstChild(e){this.firstChild!==e&&(this.firstChild=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(ze.EVENT_FIRST_CHILD_CHANGED)))}setLastChild(e){this.lastChild!==e&&(this.lastChild=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(ze.EVENT_LAST_CHILD_CHANGED)))}setChildIndex(e){this.childIndex!==e&&(this.childIndex=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(ze.EVENT_CHILD_INDEX_CHANGED)))}setRowTop(e){this.oldRowTop=this.rowTop,this.rowTop!==e&&(this.rowTop=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(ze.EVENT_TOP_CHANGED)),this.setDisplayed(e!==null))}clearRowTopAndRowIndex(){this.oldRowTop=null,this.setRowTop(null),this.setRowIndex(null)}setDisplayed(e){this.displayed!==e&&(this.displayed=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(ze.EVENT_DISPLAYED_CHANGED)))}setDragging(e){this.dragging!==e&&(this.dragging=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(ze.EVENT_DRAGGING_CHANGED)))}setHighlighted(e){e!==this.highlighted&&(this.highlighted=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(ze.EVENT_HIGHLIGHT_CHANGED)))}setHovered(e){this.hovered!==e&&(this.hovered=e)}isHovered(){return this.hovered}setAllChildrenCount(e){this.allChildrenCount!==e&&(this.allChildrenCount=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(ze.EVENT_ALL_CHILDREN_COUNT_CHANGED)))}setMaster(e){this.master!==e&&(this.master&&!e&&(this.expanded=!1),this.master=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(ze.EVENT_MASTER_CHANGED)))}setGroup(e){this.group!==e&&(this.group&&!e&&(this.expanded=!1),this.group=e,this.updateHasChildren(),this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(ze.EVENT_GROUP_CHANGED)))}setRowHeight(e,i=!1){this.rowHeight=e,this.rowHeightEstimated=i,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(ze.EVENT_HEIGHT_CHANGED))}setRowAutoHeight(e,i){this.__autoHeights||(this.__autoHeights={}),this.__autoHeights[i.getId()]=e,e!=null&&(this.checkAutoHeightsDebounced==null&&(this.checkAutoHeightsDebounced=Ut(this.checkAutoHeights.bind(this),1)),this.checkAutoHeightsDebounced())}checkAutoHeights(){let e=!1,i=!0,o=0,r=this.__autoHeights;if(r==null||(this.beans.columnModel.getAllDisplayedAutoHeightCols().forEach(a=>{let l=r[a.getId()];if(l==null)if(this.beans.columnModel.isColSpanActive()){let d=[];switch(a.getPinned()){case"left":d=this.beans.columnModel.getDisplayedLeftColumnsForRow(this);break;case"right":d=this.beans.columnModel.getDisplayedRightColumnsForRow(this);break;case null:d=this.beans.columnModel.getViewportCenterColumnsForRow(this);break}if(d.includes(a)){e=!0;return}l=-1}else{e=!0;return}else i=!1;l>o&&(o=l)}),e)||((i||o<10)&&(o=this.beans.gos.getRowHeightForNode(this).height),o==this.rowHeight))return;this.setRowHeight(o);let s=this.beans.rowModel;s.onRowHeightChangedDebounced&&s.onRowHeightChangedDebounced()}setRowIndex(e){this.rowIndex!==e&&(this.rowIndex=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(ze.EVENT_ROW_INDEX_CHANGED)))}setUiLevel(e){this.uiLevel!==e&&(this.uiLevel=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(ze.EVENT_UI_LEVEL_CHANGED)))}setExpanded(e,i,o){if(this.expanded===e)return;this.expanded=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(ze.EVENT_EXPANDED_CHANGED));let r=Object.assign({},this.createGlobalRowEvent(f.EVENT_ROW_GROUP_OPENED),{expanded:e,event:i||null});this.beans.rowNodeEventThrottle.dispatchExpanded(r,o),this.beans.rowRenderer.refreshCells({rowNodes:[this]})}createGlobalRowEvent(e){return this.beans.gos.addGridCommonParams({type:e,node:this,data:this.data,rowIndex:this.rowIndex,rowPinned:this.rowPinned})}dispatchLocalEvent(e){this.eventService&&this.eventService.dispatchEvent(e)}setDataValue(e,i,o){let n=(()=>{var l;return typeof e!="string"?e:(l=this.beans.columnModel.getGridColumn(e))!=null?l:this.beans.columnModel.getPrimaryColumn(e)})(),s=this.getValueFromValueService(n);if(this.beans.gos.get("readOnlyEdit"))return this.dispatchEventForSaveValueReadOnly(n,s,i,o),!1;let a=this.beans.valueService.setValue(this,n,i,o);return this.dispatchCellChangedEvent(n,i,s),this.checkRowSelectable(),a}getValueFromValueService(e){var i,o;let r=this.leafGroup&&this.beans.columnModel.isPivotMode(),n=this.group&&this.expanded&&!this.footer&&!r,s=!1,a=(i=this.beans.gos.get("groupTotalRow"))!=null?i:this.beans.gos.get("groupIncludeFooter");typeof a!="function"?s=!!a:s=!!((o=this.beans.gos.getCallback("groupTotalRow"))!=null?o:this.beans.gos.getCallback("groupIncludeFooter"))({node:this});let l=this.beans.gos.get("groupSuppressBlankHeader"),d=n&&s&&!l;return this.beans.valueService.getValue(e,this,!1,d)}dispatchEventForSaveValueReadOnly(e,i,o,r){let n=this.beans.gos.addGridCommonParams({type:f.EVENT_CELL_EDIT_REQUEST,event:null,rowIndex:this.rowIndex,rowPinned:this.rowPinned,column:e,colDef:e.getColDef(),data:this.data,node:this,oldValue:i,newValue:o,value:o,source:r});this.beans.eventService.dispatchEvent(n)}setGroupValue(e,i){let o=this.beans.columnModel.getGridColumn(e);X(this.groupData)&&(this.groupData={});let r=o.getColId(),n=this.groupData[r];n!==i&&(this.groupData[r]=i,this.dispatchCellChangedEvent(o,i,n))}setAggData(e){let i=this.aggData;if(this.aggData=e,this.eventService){let o=r=>{let n=this.aggData?this.aggData[r]:void 0,s=i?i[r]:void 0;if(n===s)return;let a=this.beans.columnModel.lookupGridColumn(r);a&&this.dispatchCellChangedEvent(a,n,s)};for(let r in this.aggData)o(r);for(let r in e)r in this.aggData||o(r)}}updateHasChildren(){let e=this.group&&!this.footer||this.childrenAfterGroup&&this.childrenAfterGroup.length>0;if(this.beans.gos.isRowModelType("serverSide")){let o=this.beans.gos.get("treeData"),r=this.beans.gos.get("isServerSideGroup");e=!this.stub&&!this.footer&&(o?!!r&&r(this.data):!!this.group)}e!==this.__hasChildren&&(this.__hasChildren=!!e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(ze.EVENT_HAS_CHILDREN_CHANGED)))}hasChildren(){return this.__hasChildren==null&&this.updateHasChildren(),this.__hasChildren}isEmptyRowGroupNode(){return this.group&&Mi(this.childrenAfterGroup)}dispatchCellChangedEvent(e,i,o){let r={type:ze.EVENT_CELL_CHANGED,node:this,column:e,newValue:i,oldValue:o};this.dispatchLocalEvent(r)}resetQuickFilterAggregateText(){this.quickFilterAggregateText=null}isExpandable(){return this.footer?!1:this.beans.columnModel.isPivotMode()?this.hasChildren()&&!this.leafGroup:this.hasChildren()||!!this.master}isSelected(){return this.footer?this.sibling.isSelected():this.selected}depthFirstSearch(e){this.childrenAfterGroup&&this.childrenAfterGroup.forEach(i=>i.depthFirstSearch(e)),e(this)}calculateSelectedFromChildren(){var e;let i=!1,o=!1,r=!1;if(!((e=this.childrenAfterGroup)!=null&&e.length))return this.selectable?this.selected:null;for(let n=0;n<this.childrenAfterGroup.length;n++){let s=this.childrenAfterGroup[n],a=s.isSelected();if(!s.selectable){let l=s.calculateSelectedFromChildren();if(l===null)continue;a=l}switch(a){case!0:i=!0;break;case!1:o=!0;break;default:r=!0;break}}if(!(r||i&&o))return i?!0:o?!1:this.selectable?this.selected:null}setSelectedInitialValue(e){this.selected=e}selectThisNode(e,i,o="api"){let r=!this.selectable&&e,n=this.selected===e;if(r||n)return!1;this.selected=e,this.eventService&&this.dispatchLocalEvent(this.createLocalRowEvent(ze.EVENT_ROW_SELECTED));let s=this.sibling;s&&s.footer&&s.eventService&&s.dispatchLocalEvent(s.createLocalRowEvent(ze.EVENT_ROW_SELECTED));let a=He(j({},this.createGlobalRowEvent(f.EVENT_ROW_SELECTED)),{event:i||null,source:o});return this.beans.eventService.dispatchEvent(a),!0}setSelected(e,i=!1,o="api"){if(typeof o=="boolean"){console.warn("AG Grid: since version v30, rowNode.setSelected() property `suppressFinishActions` has been removed, please use `gridApi.setNodesSelected()` for bulk actions, and the event `source` property for ignoring events instead.");return}this.setSelectedParams({newValue:e,clearSelection:i,rangeSelect:!1,source:o})}setSelectedParams(e){return this.rowPinned?(console.warn("AG Grid: cannot select pinned rows"),0):this.id===void 0?(console.warn("AG Grid: cannot select node until id for node is known"),0):this.beans.selectionService.setNodesSelected(He(j({},e),{nodes:[this.footer?this.sibling:this]}))}isRowPinned(){return this.rowPinned==="top"||this.rowPinned==="bottom"}isParentOfNode(e){let i=this.parent;for(;i;){if(i===e)return!0;i=i.parent}return!1}addEventListener(e,i){var o,r;this.eventService||(this.eventService=new Yi),this.beans.frameworkOverrides.shouldWrapOutgoing&&!this.frameworkEventListenerService&&(this.eventService.setFrameworkOverrides(this.beans.frameworkOverrides),this.frameworkEventListenerService=new Am(this.beans.frameworkOverrides));let n=(r=(o=this.frameworkEventListenerService)==null?void 0:o.wrap(i))!=null?r:i;this.eventService.addEventListener(e,n)}removeEventListener(e,i){var o,r;if(!this.eventService)return;let n=(r=(o=this.frameworkEventListenerService)==null?void 0:o.unwrap(i))!=null?r:i;this.eventService.removeEventListener(e,n),this.eventService.noRegisteredListenersExist()&&(this.eventService=null)}onMouseEnter(){this.dispatchLocalEvent(this.createLocalRowEvent(ze.EVENT_MOUSE_ENTER))}onMouseLeave(){this.dispatchLocalEvent(this.createLocalRowEvent(ze.EVENT_MOUSE_LEAVE))}getFirstChildOfFirstChild(e){let i=this,o=!0,r=!1,n=null;for(;o&&!r;){let s=i.parent;T(s)&&i.firstChild?s.rowGroupColumn===e&&(r=!0,n=s):o=!1,i=s}return r?n:null}isFullWidthCell(){if(this.detail)return!0;let e=this.beans.gos.getCallback("isFullWidthRow");return e?e({rowNode:this}):!1}getRoute(){if(this.key==null)return;let e=[],i=this;for(;i.key!=null;)e.push(i.key),i=i.parent;return e.reverse()}createFooter(){if(this.sibling)return;let e=new Set(["eventService","__objectId","sticky"]),i=new ze(this.beans);Object.keys(this).forEach(o=>{e.has(o)||(i[o]=this[o])}),i.footer=!0,i.setRowTop(null),i.setRowIndex(null),i.oldRowTop=null,i.id="rowGroupFooter_"+this.id,i.sibling=this,this.sibling=i}destroyFooter(){this.sibling&&(this.sibling.setRowTop(null),this.sibling.setRowIndex(null),this.sibling=void 0)}};Be.ID_PREFIX_ROW_GROUP="row-group-";Be.ID_PREFIX_TOP_PINNED="t-";Be.ID_PREFIX_BOTTOM_PINNED="b-";Be.OBJECT_ID_SEQUENCE=0;Be.EVENT_ROW_SELECTED="rowSelected";Be.EVENT_DATA_CHANGED="dataChanged";Be.EVENT_CELL_CHANGED="cellChanged";Be.EVENT_ALL_CHILDREN_COUNT_CHANGED="allChildrenCountChanged";Be.EVENT_MASTER_CHANGED="masterChanged";Be.EVENT_GROUP_CHANGED="groupChanged";Be.EVENT_MOUSE_ENTER="mouseEnter";Be.EVENT_MOUSE_LEAVE="mouseLeave";Be.EVENT_HEIGHT_CHANGED="heightChanged";Be.EVENT_TOP_CHANGED="topChanged";Be.EVENT_DISPLAYED_CHANGED="displayedChanged";Be.EVENT_FIRST_CHILD_CHANGED="firstChildChanged";Be.EVENT_LAST_CHILD_CHANGED="lastChildChanged";Be.EVENT_CHILD_INDEX_CHANGED="childIndexChanged";Be.EVENT_ROW_INDEX_CHANGED="rowIndexChanged";Be.EVENT_EXPANDED_CHANGED="expandedChanged";Be.EVENT_HAS_CHILDREN_CHANGED="hasChildrenChanged";Be.EVENT_SELECTABLE_CHANGED="selectableChanged";Be.EVENT_UI_LEVEL_CHANGED="uiLevelChanged";Be.EVENT_HIGHLIGHT_CHANGED="rowHighlightChanged";Be.EVENT_DRAGGING_CHANGED="draggingChanged";var de=Be,Ph=class extends J{constructor(){super(`
            <div class="ag-selection-checkbox" role="presentation">
                <ag-checkbox role="presentation" ref="eCheckbox"></ag-checkbox>
            </div>`)}postConstruct(){this.eCheckbox.setPassive(!0)}getCheckboxId(){return this.eCheckbox.getInputElement().id}onDataChanged(){this.onSelectionChanged()}onSelectableChanged(){this.showOrHideSelect()}onSelectionChanged(){let t=this.localeService.getLocaleTextFunc(),e=this.rowNode.isSelected(),i=bh(t,e),[o,r]=this.rowNode.selectable?["ariaRowToggleSelection","Press Space to toggle row selection"]:["ariaRowSelectionDisabled","Row Selection is disabled for this row"],n=t(o,r);this.eCheckbox.setValue(e,!0),this.eCheckbox.setInputAriaLabel(`${n} (${i})`)}onClicked(t,e,i){return this.rowNode.setSelectedParams({newValue:t,rangeSelect:i.shiftKey,groupSelectsFiltered:e,event:i,source:"checkboxSelected"})}init(t){if(this.rowNode=t.rowNode,this.column=t.column,this.overrides=t.overrides,this.onSelectionChanged(),this.addManagedListener(this.eCheckbox.getInputElement(),"dblclick",o=>{Qi(o)}),this.addManagedListener(this.eCheckbox.getInputElement(),"click",o=>{Qi(o);let r=this.gos.get("groupSelectsFiltered"),n=this.eCheckbox.getValue();this.shouldHandleIndeterminateState(n,r)?this.onClicked(!0,r,o||{})===0&&this.onClicked(!1,r,o):n?this.onClicked(!1,r,o):this.onClicked(!0,r,o||{})}),this.addManagedListener(this.rowNode,de.EVENT_ROW_SELECTED,this.onSelectionChanged.bind(this)),this.addManagedListener(this.rowNode,de.EVENT_DATA_CHANGED,this.onDataChanged.bind(this)),this.addManagedListener(this.rowNode,de.EVENT_SELECTABLE_CHANGED,this.onSelectableChanged.bind(this)),this.gos.get("isRowSelectable")||typeof this.getIsVisible()=="function"){let o=this.showOrHideSelect.bind(this);this.addManagedListener(this.eventService,f.EVENT_DISPLAYED_COLUMNS_CHANGED,o),this.addManagedListener(this.rowNode,de.EVENT_DATA_CHANGED,o),this.addManagedListener(this.rowNode,de.EVENT_CELL_CHANGED,o),this.showOrHideSelect()}this.eCheckbox.getInputElement().setAttribute("tabindex","-1")}shouldHandleIndeterminateState(t,e){return e&&(this.eCheckbox.getPreviousValue()===void 0||t===void 0)&&this.gos.isRowModelType("clientSide")}showOrHideSelect(){var t,e,i;let o=this.rowNode.selectable,r=this.getIsVisible();if(o)if(typeof r=="function"){let s=(t=this.overrides)==null?void 0:t.callbackParams;if(!this.column)o=r(He(j({},s),{node:this.rowNode,data:this.rowNode.data}));else{let a=this.column.createColumnFunctionCallbackParams(this.rowNode);o=r(j(j({},s),a))}}else o=r??!1;if((e=this.column)==null?void 0:e.getColDef().showDisabledCheckboxes){this.eCheckbox.setDisabled(!o),this.setVisible(!0),this.setDisplayed(!0);return}if((i=this.overrides)!=null&&i.removeHidden){this.setDisplayed(o);return}this.setVisible(o)}getIsVisible(){var t,e;return this.overrides?this.overrides.isVisible:(e=(t=this.column)==null?void 0:t.getColDef())==null?void 0:e.checkboxSelection}};g([k("eCheckbox")],Ph.prototype,"eCheckbox",2);g([I],Ph.prototype,"postConstruct",1);var O_=(t=>(t[t.Left=0]="Left",t[t.Right=1]="Right",t))(O_||{});var te=class extends A{constructor(){super(...arguments),this.dragSourceAndParamsList=[],this.dropTargets=[]}init(){this.ePinnedIcon=Ri("columnMovePin",this.gos,null),this.eHideIcon=Ri("columnMoveHide",this.gos,null),this.eMoveIcon=Ri("columnMoveMove",this.gos,null),this.eLeftIcon=Ri("columnMoveLeft",this.gos,null),this.eRightIcon=Ri("columnMoveRight",this.gos,null),this.eGroupIcon=Ri("columnMoveGroup",this.gos,null),this.eAggregateIcon=Ri("columnMoveValue",this.gos,null),this.ePivotIcon=Ri("columnMovePivot",this.gos,null),this.eDropNotAllowedIcon=Ri("dropNotAllowed",this.gos,null)}addDragSource(t,e=!1){let i={eElement:t.eElement,dragStartPixels:t.dragStartPixels,onDragStart:this.onDragStart.bind(this,t),onDragStop:this.onDragStop.bind(this),onDragging:this.onDragging.bind(this),includeTouch:e};this.dragSourceAndParamsList.push({params:i,dragSource:t}),this.dragService.addDragSource(i)}removeDragSource(t){let e=this.dragSourceAndParamsList.find(i=>i.dragSource===t);e&&(this.dragService.removeDragSource(e.params),Jt(this.dragSourceAndParamsList,e))}clearDragSourceParamsList(){this.dragSourceAndParamsList.forEach(t=>this.dragService.removeDragSource(t.params)),this.dragSourceAndParamsList.length=0,this.dropTargets.length=0}nudge(){this.dragging&&this.onDragging(this.eventLastTime,!0)}onDragStart(t,e){this.dragging=!0,this.dragSource=t,this.eventLastTime=e,this.dragItem=this.dragSource.getDragItem(),this.lastDropTarget=void 0,this.dragSource.onDragStarted&&this.dragSource.onDragStarted(),this.createGhost()}onDragStop(t){if(this.eventLastTime=null,this.dragging=!1,this.dragSource.onDragStopped&&this.dragSource.onDragStopped(),this.lastDropTarget&&this.lastDropTarget.onDragStop){let e=this.createDropTargetEvent(this.lastDropTarget,t,null,null,!1);this.lastDropTarget.onDragStop(e)}this.lastDropTarget=null,this.dragItem=null,this.removeGhost()}onDragging(t,e){var i,o,r,n;let s=this.getHorizontalDirection(t),a=this.getVerticalDirection(t);this.eventLastTime=t,this.positionGhost(t);let l=this.dropTargets.filter(c=>this.isMouseOnDropTarget(t,c)),d=this.findCurrentDropTarget(t,l);if(d!==this.lastDropTarget)this.leaveLastTargetIfExists(t,s,a,e),this.lastDropTarget!==null&&d===null&&((o=(i=this.dragSource).onGridExit)==null||o.call(i,this.dragItem)),this.lastDropTarget===null&&d!==null&&((n=(r=this.dragSource).onGridEnter)==null||n.call(r,this.dragItem)),this.enterDragTargetIfExists(d,t,s,a,e),this.lastDropTarget=d;else if(d&&d.onDragging){let c=this.createDropTargetEvent(d,t,s,a,e);d.onDragging(c)}}getAllContainersFromDropTarget(t){let e=t.getSecondaryContainers?t.getSecondaryContainers():null,i=[[t.getContainer()]];return e?i.concat(e):i}allContainersIntersect(t,e){for(let i of e){let o=i.getBoundingClientRect();if(o.width===0||o.height===0)return!1;let r=t.clientX>=o.left&&t.clientX<o.right,n=t.clientY>=o.top&&t.clientY<o.bottom;if(!r||!n)return!1}return!0}isMouseOnDropTarget(t,e){let i=this.getAllContainersFromDropTarget(e),o=!1;for(let r of i)if(this.allContainersIntersect(t,r)){o=!0;break}return e.targetContainsSource&&!e.getContainer().contains(this.dragSource.eElement)?!1:o&&e.isInterestedIn(this.dragSource.type,this.dragSource.eElement)}findCurrentDropTarget(t,e){let i=e.length;if(i===0)return null;if(i===1)return e[0];let r=this.gos.getRootNode().elementsFromPoint(t.clientX,t.clientY);for(let n of r)for(let s of e)if(dx(this.getAllContainersFromDropTarget(s)).indexOf(n)!==-1)return s;return null}enterDragTargetIfExists(t,e,i,o,r){if(t){if(t.onDragEnter){let n=this.createDropTargetEvent(t,e,i,o,r);t.onDragEnter(n)}this.setGhostIcon(t.getIconName?t.getIconName():null)}}leaveLastTargetIfExists(t,e,i,o){if(this.lastDropTarget){if(this.lastDropTarget.onDragLeave){let r=this.createDropTargetEvent(this.lastDropTarget,t,e,i,o);this.lastDropTarget.onDragLeave(r)}this.setGhostIcon(null)}}addDropTarget(t){this.dropTargets.push(t)}removeDropTarget(t){this.dropTargets=this.dropTargets.filter(e=>e.getContainer()!==t.getContainer())}hasExternalDropZones(){return this.dropTargets.some(t=>t.external)}findExternalZone(t){return this.dropTargets.filter(i=>i.external).find(i=>i.getContainer()===t.getContainer())||null}getHorizontalDirection(t){let e=this.eventLastTime&&this.eventLastTime.clientX,i=t.clientX;return e===i?null:e>i?0:1}getVerticalDirection(t){let e=this.eventLastTime&&this.eventLastTime.clientY,i=t.clientY;return e===i?null:e>i?0:1}createDropTargetEvent(t,e,i,o,r){let n=t.getContainer(),s=n.getBoundingClientRect(),{gridApi:a,columnApi:l,dragItem:d,dragSource:c}=this,u=e.clientX-s.left,h=e.clientY-s.top;return{event:e,x:u,y:h,vDirection:o,hDirection:i,dragSource:c,fromNudge:r,dragItem:d,api:a,columnApi:l,dropZoneTarget:n}}positionGhost(t){let e=this.eGhost;if(!e)return;let o=e.getBoundingClientRect().height,r=Nx()-2,n=zx()-2,s=Ym(e.offsetParent),{clientY:a,clientX:l}=t,d=a-s.top-o/2,c=l-s.left-10,u=this.gos.getDocument(),h=u.defaultView||window,p=h.pageYOffset||u.documentElement.scrollTop,m=h.pageXOffset||u.documentElement.scrollLeft;r>0&&c+e.clientWidth>r+m&&(c=r+m-e.clientWidth),c<0&&(c=0),n>0&&d+e.clientHeight>n+p&&(d=n+p-e.clientHeight),d<0&&(d=0),e.style.left=`${c}px`,e.style.top=`${d}px`}removeGhost(){this.eGhost&&this.eGhostParent&&this.eGhostParent.removeChild(this.eGhost),this.eGhost=null}createGhost(){this.eGhost=ii(te.GHOST_TEMPLATE),this.mouseEventService.stampTopLevelGridCompWithGridInstance(this.eGhost);let{theme:t}=this.environment.getTheme();t&&this.eGhost.classList.add(t),this.eGhostIcon=this.eGhost.querySelector(".ag-dnd-ghost-icon"),this.setGhostIcon(null);let e=this.eGhost.querySelector(".ag-dnd-ghost-label"),i=this.dragSource.dragItemName;fh(i)&&(i=i()),e.innerHTML=rt(i)||"",this.eGhost.style.height="25px",this.eGhost.style.top="20px",this.eGhost.style.left="20px";let o=this.gos.getDocument(),r=null,n=null;try{r=o.fullscreenElement}catch{}finally{r||(r=this.gos.getRootNode());let s=r.querySelector("body");s?n=s:r instanceof ShadowRoot?n=r:r instanceof Document?n=r?.documentElement:n=r}this.eGhostParent=n,this.eGhostParent?this.eGhostParent.appendChild(this.eGhost):console.warn("AG Grid: could not find document body, it is needed for dragging columns")}setGhostIcon(t,e=!1){Je(this.eGhostIcon);let i=null;switch(t||(t=this.dragSource.getDefaultIconName?this.dragSource.getDefaultIconName():te.ICON_NOT_ALLOWED),t){case te.ICON_PINNED:i=this.ePinnedIcon;break;case te.ICON_MOVE:i=this.eMoveIcon;break;case te.ICON_LEFT:i=this.eLeftIcon;break;case te.ICON_RIGHT:i=this.eRightIcon;break;case te.ICON_GROUP:i=this.eGroupIcon;break;case te.ICON_AGGREGATE:i=this.eAggregateIcon;break;case te.ICON_PIVOT:i=this.ePivotIcon;break;case te.ICON_NOT_ALLOWED:i=this.eDropNotAllowedIcon;break;case te.ICON_HIDE:i=this.eHideIcon;break}this.eGhostIcon.classList.toggle("ag-shake-left-to-right",e),!(i===this.eHideIcon&&this.gos.get("suppressDragLeaveHidesColumns"))&&i&&this.eGhostIcon.appendChild(i)}};te.ICON_PINNED="pinned";te.ICON_MOVE="move";te.ICON_LEFT="left";te.ICON_RIGHT="right";te.ICON_GROUP="group";te.ICON_AGGREGATE="aggregate";te.ICON_PIVOT="pivot";te.ICON_NOT_ALLOWED="notAllowed";te.ICON_HIDE="hide";te.GHOST_TEMPLATE=`<div class="ag-dnd-ghost ag-unselectable">
            <span class="ag-dnd-ghost-icon ag-shake-left-to-right"></span>
            <div class="ag-dnd-ghost-label"></div>
        </div>`;g([v("dragService")],te.prototype,"dragService",2);g([v("mouseEventService")],te.prototype,"mouseEventService",2);g([v("columnApi")],te.prototype,"columnApi",2);g([v("gridApi")],te.prototype,"gridApi",2);g([I],te.prototype,"init",1);g([Kt],te.prototype,"clearDragSourceParamsList",1);te=g([V("dragAndDropService")],te);var Rn=class extends J{constructor(t,e,i,o,r,n){super(),this.cellValueFn=t,this.rowNode=e,this.column=i,this.customGui=o,this.dragStartPixels=r,this.suppressVisibilityChange=n,this.dragSource=null}isCustomGui(){return this.customGui!=null}postConstruct(){if(this.customGui?this.setDragElement(this.customGui,this.dragStartPixels):(this.setTemplate('<div class="ag-drag-handle ag-row-drag" aria-hidden="true"></div>'),this.getGui().appendChild(qe("rowDrag",this.gos,null)),this.addDragSource()),this.checkCompatibility(),!this.suppressVisibilityChange){let t=this.gos.get("rowDragManaged")?new N_(this,this.beans,this.rowNode,this.column):new L_(this,this.beans,this.rowNode,this.column);this.createManagedBean(t,this.beans.context)}}setDragElement(t,e){this.setTemplateFromElement(t),this.addDragSource(e)}getSelectedNodes(){if(!this.gos.get("rowDragMultiRow"))return[this.rowNode];let e=this.beans.selectionService.getSelectedNodes();return e.indexOf(this.rowNode)!==-1?e:[this.rowNode]}checkCompatibility(){let t=this.gos.get("rowDragManaged");this.gos.get("treeData")&&t&&q("If using row drag with tree data, you cannot have rowDragManaged=true")}getDragItem(){return{rowNode:this.rowNode,rowNodes:this.getSelectedNodes(),columns:this.column?[this.column]:void 0,defaultTextValue:this.cellValueFn()}}getRowDragText(t){if(t){let e=t.getColDef();if(e.rowDragText)return e.rowDragText}return this.gos.get("rowDragText")}addDragSource(t=4){this.dragSource&&this.removeDragSource();let e=this.localeService.getLocaleTextFunc();this.dragSource={type:2,eElement:this.getGui(),dragItemName:()=>{var i;let o=this.getDragItem(),r=((i=o.rowNodes)==null?void 0:i.length)||1,n=this.getRowDragText(this.column);return n?n(o,r):r===1?this.cellValueFn():`${r} ${e("rowDragRows","rows")}`},getDragItem:()=>this.getDragItem(),dragStartPixels:t,dragSourceDomDataKey:this.gos.getDomDataKey()},this.beans.dragAndDropService.addDragSource(this.dragSource,!0)}removeDragSource(){this.dragSource&&this.beans.dragAndDropService.removeDragSource(this.dragSource),this.dragSource=null}};g([v("beans")],Rn.prototype,"beans",2);g([I],Rn.prototype,"postConstruct",1);g([Kt],Rn.prototype,"removeDragSource",1);var k_=class extends A{constructor(t,e,i){super(),this.parent=t,this.rowNode=e,this.column=i}setDisplayedOrVisible(t){let e={skipAriaHidden:!0};if(t)this.parent.setDisplayed(!1,e);else{let i=!0,o=!1;this.column&&(i=this.column.isRowDrag(this.rowNode)||this.parent.isCustomGui(),o=fh(this.column.getColDef().rowDrag)),o?(this.parent.setDisplayed(!0,e),this.parent.setVisible(i,e)):(this.parent.setDisplayed(i,e),this.parent.setVisible(!0,e))}}},L_=class extends k_{constructor(t,e,i,o){super(t,i,o),this.beans=e}postConstruct(){this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this)),this.addManagedListener(this.rowNode,de.EVENT_DATA_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,de.EVENT_CELL_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,de.EVENT_CELL_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,f.EVENT_NEW_COLUMNS_LOADED,this.workOutVisibility.bind(this)),this.workOutVisibility()}onSuppressRowDrag(){this.workOutVisibility()}workOutVisibility(){let t=this.gos.get("suppressRowDrag");this.setDisplayedOrVisible(t)}};g([I],L_.prototype,"postConstruct",1);var N_=class extends k_{constructor(t,e,i,o){super(t,i,o),this.beans=e}postConstruct(){this.addManagedListener(this.beans.eventService,f.EVENT_SORT_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,f.EVENT_FILTER_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,f.EVENT_COLUMN_ROW_GROUP_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,f.EVENT_NEW_COLUMNS_LOADED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,de.EVENT_DATA_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,de.EVENT_CELL_CHANGED,this.workOutVisibility.bind(this)),this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this)),this.workOutVisibility()}onSuppressRowDrag(){this.workOutVisibility()}workOutVisibility(){let e=this.beans.ctrlsService.getGridBodyCtrl().getRowDragFeature(),i=e&&e.shouldPreventRowMove(),o=this.gos.get("suppressRowDrag"),r=this.beans.dragAndDropService.hasExternalDropZones(),n=i&&!r||o;this.setDisplayedOrVisible(n)}};g([I],N_.prototype,"postConstruct",1);var ga=class extends A{init(t,e,i,o,r,n,s){var a,l,d,c;this.params=s,this.eGui=e,this.eCheckbox=i,this.eExpanded=o,this.eContracted=r,this.comp=t,this.compClass=n;let{node:u,value:h,colDef:p}=s,m=this.isTopLevelFooter();if(!m){if(this.isEmbeddedRowMismatch())return;if(u.footer&&this.gos.get("groupHideOpenParents")){let w=p&&p.showRowGroup,b=u.rowGroupColumn&&u.rowGroupColumn.getColId();if(w!==b)return}}if(this.setupShowingValueForOpenedParent(),this.findDisplayedGroupNode(),!m){let C=s.node.footer&&s.node.rowGroupIndex===this.columnModel.getRowGroupColumns().findIndex(D=>{var R;return D.getColId()===((R=s.colDef)==null?void 0:R.showRowGroup)}),b=this.gos.get("groupDisplayType")!="multipleColumns"||this.gos.get("treeData")||this.gos.get("showOpenedGroup")&&!s.node.footer&&(!s.node.group||s.node.rowGroupIndex!=null&&s.node.rowGroupIndex>this.columnModel.getRowGroupColumns().findIndex(D=>{var R;return D.getColId()===((R=s.colDef)==null?void 0:R.showRowGroup)})),y=!u.group&&(((a=this.params.colDef)==null?void 0:a.field)||((l=this.params.colDef)==null?void 0:l.valueGetter)),_=this.isExpandable(),x=this.columnModel.isPivotMode()&&u.leafGroup&&((d=u.rowGroupColumn)==null?void 0:d.getColId())===((c=s.column)==null?void 0:c.getColDef().showRowGroup);if(!this.showingValueForOpenedParent&&!_&&!y&&!b&&!C&&!x)return}this.addExpandAndContract(),this.addFullWidthRowDraggerIfNeeded(),this.addCheckboxIfNeeded(),this.addValueElement(),this.setupIndent(),this.refreshAriaExpanded()}getCellAriaRole(){var t,e;let i=(t=this.params.colDef)==null?void 0:t.cellAriaRole,o=(e=this.params.column)==null?void 0:e.getColDef().cellAriaRole;return i||o||"gridcell"}destroy(){super.destroy(),this.expandListener=null}refreshAriaExpanded(){let{node:t,eGridCell:e}=this.params;if(this.expandListener&&(this.expandListener=this.expandListener()),!this.isExpandable()){Mx(e);return}let i=()=>{No(e,!!t.expanded)};this.expandListener=this.addManagedListener(t,de.EVENT_EXPANDED_CHANGED,i)||null,i()}isTopLevelFooter(){if(!this.gos.getGrandTotalRow()||this.params.value!=null||this.params.node.level!=-1)return!1;let e=this.params.colDef;if(e==null||e.showRowGroup===!0)return!0;let o=this.columnModel.getRowGroupColumns();return!o||o.length===0?!0:o[0].getId()===e.showRowGroup}isEmbeddedRowMismatch(){if(!this.params.fullWidth||!this.gos.get("embedFullWidthRows"))return!1;let t=this.params.pinned==="left",e=this.params.pinned==="right",i=!t&&!e;return this.gos.get("enableRtl")?this.columnModel.isPinningLeft()?!e:!i:this.columnModel.isPinningLeft()?!t:!i}findDisplayedGroupNode(){let t=this.params.column,e=this.params.node;if(this.showingValueForOpenedParent){let i=e.parent;for(;i!=null;){if(i.rowGroupColumn&&t.isRowGroupDisplayed(i.rowGroupColumn.getId())){this.displayedGroupNode=i;break}i=i.parent}}X(this.displayedGroupNode)&&(this.displayedGroupNode=e)}setupShowingValueForOpenedParent(){let t=this.params.node,e=this.params.column;if(!this.gos.get("groupHideOpenParents")){this.showingValueForOpenedParent=!1;return}if(!t.groupData){this.showingValueForOpenedParent=!1;return}if(t.rowGroupColumn!=null){let r=t.rowGroupColumn.getId();if(e.isRowGroupDisplayed(r)){this.showingValueForOpenedParent=!1;return}}let o=t.groupData[e.getId()]!=null;this.showingValueForOpenedParent=o}addValueElement(){this.displayedGroupNode.footer?this.addFooterValue():(this.addGroupValue(),this.addChildCount())}addGroupValue(){var t;let e=this.adjustParamsWithDetailsFromRelatedColumn(),i=this.getInnerCompDetails(e),{valueFormatted:o,value:r}=e,n=o;if(n==null){let s=this.displayedGroupNode.rowGroupColumn&&((t=this.params.column)==null?void 0:t.isRowGroupDisplayed(this.displayedGroupNode.rowGroupColumn.getId()));this.displayedGroupNode.key===""&&this.displayedGroupNode.group&&s?n=this.localeService.getLocaleTextFunc()("blanks","(Blanks)"):n=r??null}this.comp.setInnerRenderer(i,n)}adjustParamsWithDetailsFromRelatedColumn(){let t=this.displayedGroupNode.rowGroupColumn,e=this.params.column;if(!t)return this.params;if(e!=null&&!e.isRowGroupDisplayed(t.getId()))return this.params;let o=this.params,{value:r,node:n}=this.params,s=this.valueService.formatValue(t,n,r);return He(j({},o),{valueFormatted:s})}addFooterValue(){let t=this.params.totalValueGetter;if(!t){let o=this.params.footerValueGetter;o&&(t=o,q("As of v31.3, footerValueGetter is deprecated. Use `totalValueGetter` instead."))}let e="";if(t){let o=Mm(this.params);o.value=this.params.value,typeof t=="function"?e=t(o):typeof t=="string"?e=this.expressionService.evaluate(t,o):console.warn("AG Grid: footerValueGetter should be either a function or a string (expression)")}else e=this.localeService.getLocaleTextFunc()("footerTotal","Total")+" "+(this.params.value!=null?this.params.value:"");let i=this.getInnerCompDetails(this.params);this.comp.setInnerRenderer(i,e)}getInnerCompDetails(t){if(t.fullWidth)return this.userComponentFactory.getFullWidthGroupRowInnerCellRenderer(this.gos.get("groupRowRendererParams"),t);let e=this.userComponentFactory.getInnerRendererDetails(t,t),i=s=>s&&s.componentClass==this.compClass;if(e&&!i(e))return e;let o=this.displayedGroupNode.rowGroupColumn,r=o?o.getColDef():void 0;if(!r)return;let n=this.userComponentFactory.getCellRendererDetails(r,t);if(n&&!i(n))return n;if(i(n)&&r.cellRendererParams&&r.cellRendererParams.innerRenderer)return this.userComponentFactory.getInnerRendererDetails(r.cellRendererParams,t)}addChildCount(){this.params.suppressCount||(this.addManagedListener(this.displayedGroupNode,de.EVENT_ALL_CHILDREN_COUNT_CHANGED,this.updateChildCount.bind(this)),this.updateChildCount())}updateChildCount(){let t=this.displayedGroupNode.allChildrenCount,o=this.isShowRowGroupForThisRow()&&t!=null&&t>=0?`(${t})`:"";this.comp.setChildCount(o)}isShowRowGroupForThisRow(){if(this.gos.get("treeData"))return!0;let t=this.displayedGroupNode.rowGroupColumn;if(!t)return!1;let e=this.params.column;return e==null||e.isRowGroupDisplayed(t.getId())}addExpandAndContract(){var t;let e=this.params,i=qe("groupExpanded",this.gos,null),o=qe("groupContracted",this.gos,null);i&&this.eExpanded.appendChild(i),o&&this.eContracted.appendChild(o);let r=e.eGridCell;!(((t=this.params.column)==null?void 0:t.isCellEditable(e.node))&&this.gos.get("enableGroupEdit"))&&this.isExpandable()&&!e.suppressDoubleClickExpand&&this.addManagedListener(r,"dblclick",this.onCellDblClicked.bind(this)),this.addManagedListener(this.eExpanded,"click",this.onExpandClicked.bind(this)),this.addManagedListener(this.eContracted,"click",this.onExpandClicked.bind(this)),this.addManagedListener(r,"keydown",this.onKeyDown.bind(this)),this.addManagedListener(e.node,de.EVENT_EXPANDED_CHANGED,this.showExpandAndContractIcons.bind(this)),this.showExpandAndContractIcons();let s=this.onRowNodeIsExpandableChanged.bind(this);this.addManagedListener(this.displayedGroupNode,de.EVENT_ALL_CHILDREN_COUNT_CHANGED,s),this.addManagedListener(this.displayedGroupNode,de.EVENT_MASTER_CHANGED,s),this.addManagedListener(this.displayedGroupNode,de.EVENT_GROUP_CHANGED,s),this.addManagedListener(this.displayedGroupNode,de.EVENT_HAS_CHILDREN_CHANGED,s)}onExpandClicked(t){$i(t)||(Qi(t),this.onExpandOrContract(t))}onExpandOrContract(t){let e=this.displayedGroupNode,i=!e.expanded;!i&&e.sticky&&this.scrollToStickyNode(e),e.setExpanded(i,t)}scrollToStickyNode(t){this.ctrlsService.getGridBodyCtrl().getScrollFeature().setVerticalScrollPosition(t.rowTop-t.stickyRowTop)}isExpandable(){if(this.showingValueForOpenedParent)return!0;let t=this.displayedGroupNode,e=this.columnModel.isPivotMode()&&t.leafGroup;if(!(t.isExpandable()&&!t.footer&&!e))return!1;let o=this.params.column;return o!=null&&typeof o.getColDef().showRowGroup=="string"?this.isShowRowGroupForThisRow():!0}showExpandAndContractIcons(){let{params:t,displayedGroupNode:e,columnModel:i}=this,{node:o}=t,r=this.isExpandable();if(r){let d=this.showingValueForOpenedParent?!0:o.expanded;this.comp.setExpandedDisplayed(d),this.comp.setContractedDisplayed(!d)}else this.comp.setExpandedDisplayed(!1),this.comp.setContractedDisplayed(!1);let n=i.isPivotMode(),s=n&&e.leafGroup,a=r&&!s,l=o.footer&&o.level===-1;this.comp.addOrRemoveCssClass("ag-cell-expandable",a),this.comp.addOrRemoveCssClass("ag-row-group",a),n?this.comp.addOrRemoveCssClass("ag-pivot-leaf-group",s):l||this.comp.addOrRemoveCssClass("ag-row-group-leaf-indent",!a)}onRowNodeIsExpandableChanged(){this.showExpandAndContractIcons(),this.setIndent(),this.refreshAriaExpanded()}setupIndent(){let t=this.params.node;this.params.suppressPadding||(this.addManagedListener(t,de.EVENT_UI_LEVEL_CHANGED,this.setIndent.bind(this)),this.setIndent())}setIndent(){if(this.gos.get("groupHideOpenParents"))return;let t=this.params,e=t.node,i=!!t.colDef,o=this.gos.get("treeData"),n=!i||o||t.colDef.showRowGroup===!0?e.uiLevel:0;this.indentClass&&this.comp.addOrRemoveCssClass(this.indentClass,!1),this.indentClass="ag-row-group-indent-"+n,this.comp.addOrRemoveCssClass(this.indentClass,!0)}addFullWidthRowDraggerIfNeeded(){if(!this.params.fullWidth||!this.params.rowDrag)return;let t=new Rn(()=>this.params.value,this.params.node);this.createManagedBean(t,this.context),this.eGui.insertAdjacentElement("afterbegin",t.getGui())}isUserWantsSelected(){let t=this.params.checkbox;return typeof t=="function"||t===!0}addCheckboxIfNeeded(){let t=this.displayedGroupNode,e=this.isUserWantsSelected()&&!t.footer&&!t.rowPinned&&!t.detail;if(e){let i=new Ph;this.getContext().createBean(i),i.init({rowNode:this.params.node,column:this.params.column,overrides:{isVisible:this.params.checkbox,callbackParams:this.params,removeHidden:!0}}),this.eCheckbox.appendChild(i.getGui()),this.addDestroyFunc(()=>this.getContext().destroyBean(i))}this.comp.setCheckboxVisible(e)}onKeyDown(t){!(t.key===S.ENTER)||this.params.suppressEnterExpand||this.params.column&&this.params.column.isCellEditable(this.params.node)||this.onExpandOrContract(t)}onCellDblClicked(t){if($i(t))return;Ju(this.eExpanded,t)||Ju(this.eContracted,t)||this.onExpandOrContract(t)}};g([v("expressionService")],ga.prototype,"expressionService",2);g([v("valueService")],ga.prototype,"valueService",2);g([v("columnModel")],ga.prototype,"columnModel",2);g([v("userComponentFactory")],ga.prototype,"userComponentFactory",2);g([v("ctrlsService")],ga.prototype,"ctrlsService",2);var Bn=class z_ extends J{constructor(){super(z_.TEMPLATE)}init(e){let i={setInnerRenderer:(s,a)=>this.setRenderDetails(s,a),setChildCount:s=>this.eChildCount.textContent=s,addOrRemoveCssClass:(s,a)=>this.addOrRemoveCssClass(s,a),setContractedDisplayed:s=>me(this.eContracted,s),setExpandedDisplayed:s=>me(this.eExpanded,s),setCheckboxVisible:s=>this.eCheckbox.classList.toggle("ag-invisible",!s)},o=this.createManagedBean(new ga),r=!e.colDef,n=this.getGui();o.init(i,n,this.eCheckbox,this.eExpanded,this.eContracted,this.constructor,e),r&&Xe(n,o.getCellAriaRole())}setRenderDetails(e,i){if(e){let o=e.newAgStackInstance();if(!o)return;o.then(r=>{if(!r)return;let n=()=>this.context.destroyBean(r);this.isAlive()?(this.eValue.appendChild(r.getGui()),this.addDestroyFunc(n)):n()})}else this.eValue.innerText=i}destroy(){this.getContext().destroyBean(this.innerCellRenderer),super.destroy()}refresh(){return!1}};Bn.TEMPLATE=`<span class="ag-cell-wrapper">
            <span class="ag-group-expanded" ref="eExpanded"></span>
            <span class="ag-group-contracted" ref="eContracted"></span>
            <span class="ag-group-checkbox ag-invisible" ref="eCheckbox"></span>
            <span class="ag-group-value" ref="eValue"></span>
            <span class="ag-group-child-count" ref="eChildCount"></span>
        </span>`;g([k("eExpanded")],Bn.prototype,"eExpanded",2);g([k("eContracted")],Bn.prototype,"eContracted",2);g([k("eCheckbox")],Bn.prototype,"eCheckbox",2);g([k("eValue")],Bn.prototype,"eValue",2);g([k("eChildCount")],Bn.prototype,"eChildCount",2);var TS=Bn,Fh=class G_ extends J{constructor(){super(G_.TEMPLATE)}init(e){e.node.failedLoad?this.setupFailed():this.setupLoading()}setupFailed(){let e=this.localeService.getLocaleTextFunc();this.eLoadingText.innerText=e("loadingError","ERR")}setupLoading(){let e=qe("groupLoading",this.gos,null);e&&this.eLoadingIcon.appendChild(e);let i=this.localeService.getLocaleTextFunc();this.eLoadingText.innerText=i("loadingOoo","Loading")}refresh(e){return!1}destroy(){super.destroy()}};Fh.TEMPLATE=`<div class="ag-loading">
            <span class="ag-loading-icon" ref="eLoadingIcon"></span>
            <span class="ag-loading-text" ref="eLoadingText"></span>
        </div>`;g([k("eLoadingIcon")],Fh.prototype,"eLoadingIcon",2);g([k("eLoadingText")],Fh.prototype,"eLoadingText",2);var nO=Fh,V_=class H_ extends J{constructor(){super(H_.TEMPLATE)}init(e){let i=`ag-cell-skeleton-renderer-${this.getCompId()}`;this.getGui().setAttribute("id",i),this.addDestroyFunc(()=>Js(e.eParentOfValue)),Js(e.eParentOfValue,i),e.node.failedLoad?this.setupFailed():this.setupLoading()}setupFailed(){let e=this.localeService.getLocaleTextFunc();this.getGui().innerText=e("loadingError","ERR");let i=e("ariaSkeletonCellLoadingFailed","Row failed to load");yi(this.getGui(),i)}setupLoading(){let i=this.gos.getDocument().createElement("div");i.classList.add("ag-skeleton-effect"),this.getGui().appendChild(i);let r=this.localeService.getLocaleTextFunc()("ariaSkeletonCellLoading","Row data is loading");yi(this.getGui(),r)}refresh(e){return!1}destroy(){super.destroy()}};V_.TEMPLATE='<div class="ag-skeleton-container"></div>';var sO=V_,B_=class W_ extends J{constructor(){super()}destroy(){super.destroy()}init(e){let i=this.gos.get("overlayLoadingTemplate");if(this.setTemplate(i??W_.DEFAULT_LOADING_OVERLAY_TEMPLATE),!i){let o=this.localeService.getLocaleTextFunc();setTimeout(()=>{this.getGui().textContent=o("loadingOoo","Loading...")})}}};B_.DEFAULT_LOADING_OVERLAY_TEMPLATE='<span aria-live="polite" aria-atomic="true" class="ag-overlay-loading-center"></span>';var aO=B_,U_=class j_ extends J{constructor(){super()}destroy(){super.destroy()}init(e){let i=this.gos.get("overlayNoRowsTemplate");if(this.setTemplate(i??j_.DEFAULT_NO_ROWS_TEMPLATE),!i){let o=this.localeService.getLocaleTextFunc();setTimeout(()=>{this.getGui().textContent=o("noRowsToShow","No Rows To Show")})}}};U_.DEFAULT_NO_ROWS_TEMPLATE='<span class="ag-overlay-no-rows-center"></span>';var lO=U_,dO=class extends Hn{constructor(){super('<div class="ag-tooltip"></div>')}init(t){let{value:e}=t;this.getGui().textContent=rt(e,!0)}},cO=class{getTemplate(){return'<ag-input-number-field class="ag-cell-editor" ref="eInput"></ag-input-number-field>'}init(t,e){this.eInput=t,this.params=e,e.max!=null&&t.setMax(e.max),e.min!=null&&t.setMin(e.min),e.precision!=null&&t.setPrecision(e.precision),e.step!=null&&t.setStep(e.step);let i=t.getInputElement();e.preventStepping?t.addManagedListener(i,"keydown",this.preventStepping):e.showStepperButtons&&i.classList.add("ag-number-field-input-stepper")}preventStepping(t){(t.key===S.UP||t.key===S.DOWN)&&t.preventDefault()}getValue(){let t=this.eInput.getValue();if(!T(t)&&!T(this.params.value))return this.params.value;let e=this.params.parseValue(t);if(e==null)return e;if(typeof e=="string"){if(e==="")return null;e=Number(e)}return isNaN(e)?null:e}getStartValue(){return this.params.value}},uO=class extends Bd{constructor(){super(new cO)}},hO=class{getTemplate(){return'<ag-input-date-field class="ag-cell-editor" ref="eInput"></ag-input-date-field>'}init(t,e){this.eInput=t,this.params=e,e.min!=null&&t.setMin(e.min),e.max!=null&&t.setMax(e.max),e.step!=null&&t.setStep(e.step)}getValue(){let t=this.eInput.getDate();return!T(t)&&!T(this.params.value)?this.params.value:t??null}getStartValue(){let{value:t}=this.params;if(t instanceof Date)return Ai(t,!1)}},gO=class extends Bd{constructor(){super(new hO)}},pO=class{constructor(t){this.getDataTypeService=t}getTemplate(){return'<ag-input-date-field class="ag-cell-editor" ref="eInput"></ag-input-date-field>'}init(t,e){this.eInput=t,this.params=e,e.min!=null&&t.setMin(e.min),e.max!=null&&t.setMax(e.max),e.step!=null&&t.setStep(e.step)}getValue(){let t=this.formatDate(this.eInput.getDate());return!T(t)&&!T(this.params.value)?this.params.value:this.params.parseValue(t??"")}getStartValue(){var t,e;return Ai((e=this.parseDate((t=this.params.value)!=null?t:void 0))!=null?e:null,!1)}parseDate(t){return this.getDataTypeService().getDateParserFunction(this.params.column)(t)}formatDate(t){return this.getDataTypeService().getDateFormatterFunction(this.params.column)(t)}},q_=class extends Bd{constructor(){super(new pO(()=>this.dataTypeService))}};g([v("dataTypeService")],q_.prototype,"dataTypeService",2);var pv=class K_ extends J{constructor(){super(K_.TEMPLATE)}init(e){this.params=e,this.updateCheckbox(e);let i=this.eCheckbox.getInputElement();i.setAttribute("tabindex","-1"),Om(i,"polite"),this.addManagedListener(i,"click",o=>{if(Qi(o),this.eCheckbox.isDisabled())return;let r=this.eCheckbox.getValue();this.onCheckboxChanged(r)}),this.addManagedListener(i,"dblclick",o=>{Qi(o)}),this.addManagedListener(this.params.eGridCell,"keydown",o=>{if(o.key===S.SPACE&&!this.eCheckbox.isDisabled()){this.params.eGridCell===this.gos.getActiveDomElement()&&this.eCheckbox.toggle();let r=this.eCheckbox.getValue();this.onCheckboxChanged(r),o.preventDefault()}})}refresh(e){return this.params=e,this.updateCheckbox(e),!0}updateCheckbox(e){var i,o,r;let n,s=!0;if(e.node.group&&e.column){let u=e.column.getColId();u.startsWith(Zs)?n=e.value==null||e.value===""?void 0:e.value==="true":e.node.aggData&&e.node.aggData[u]!==void 0?n=(i=e.value)!=null?i:void 0:s=!1}else n=(o=e.value)!=null?o:void 0;if(!s){this.eCheckbox.setDisplayed(!1);return}this.eCheckbox.setValue(n);let a=e.disabled!=null?e.disabled:!((r=e.column)!=null&&r.isCellEditable(e.node));this.eCheckbox.setDisabled(a);let l=this.localeService.getLocaleTextFunc(),d=bh(l,n),c=a?d:`${l("ariaToggleCellValue","Press SPACE to toggle cell value")} (${d})`;this.eCheckbox.setInputAriaLabel(c)}onCheckboxChanged(e){let{column:i,node:o,rowIndex:r,value:n}=this.params,s={type:f.EVENT_CELL_EDITING_STARTED,column:i,colDef:i?.getColDef(),data:o.data,node:o,rowIndex:r,rowPinned:o.rowPinned,value:n};this.eventService.dispatchEvent(s);let a=this.params.node.setDataValue(this.params.column,e,"edit"),l={type:f.EVENT_CELL_EDITING_STOPPED,column:i,colDef:i?.getColDef(),data:o.data,node:o,rowIndex:r,rowPinned:o.rowPinned,value:n,oldValue:n,newValue:e,valueChanged:a};this.eventService.dispatchEvent(l)}};pv.TEMPLATE=`
        <div class="ag-cell-wrapper ag-checkbox-cell" role="presentation">
            <ag-checkbox role="presentation" ref="eCheckbox"></ag-checkbox>
        </div>`;g([k("eCheckbox")],pv.prototype,"eCheckbox",2);var fO=pv,$_=class extends Hn{constructor(){super(`
            <div class="ag-cell-wrapper ag-cell-edit-wrapper ag-checkbox-edit">
                <ag-checkbox role="presentation" ref="eCheckbox"></ag-checkbox>
            </div>`)}init(t){var e;this.params=t;let i=(e=t.value)!=null?e:void 0;this.eCheckbox.setValue(i),this.eCheckbox.getInputElement().setAttribute("tabindex","-1"),this.setAriaLabel(i),this.addManagedListener(this.eCheckbox,f.EVENT_FIELD_VALUE_CHANGED,r=>this.setAriaLabel(r.selected))}getValue(){return this.eCheckbox.getValue()}focusIn(){this.eCheckbox.getFocusableElement().focus()}afterGuiAttached(){this.params.cellStartedEdit&&this.focusIn()}isPopup(){return!1}setAriaLabel(t){let e=this.localeService.getLocaleTextFunc(),i=bh(e,t),o=e("ariaToggleCellValue","Press SPACE to toggle cell value");this.eCheckbox.setInputAriaLabel(`${o} (${i})`)}};g([k("eCheckbox")],$_.prototype,"eCheckbox",2);var mO=class extends J{constructor(){super(),this.setTemplate("<div></div>")}init(t){var e;this.params=t,this.cssClassPrefix=(e=this.params.cssClassPrefix)!=null?e:"ag-menu-option",this.addIcon(),this.addName(),this.addShortcut(),this.addSubMenu()}configureDefaults(){return!0}addIcon(){if(this.params.isCompact)return;let t=ii(`<span ref="eIcon" class="${this.getClassName("part")} ${this.getClassName("icon")}" role="presentation"></span>`);this.params.checked?t.appendChild(qe("check",this.gos)):this.params.icon&&(Ld(this.params.icon)?t.appendChild(this.params.icon):typeof this.params.icon=="string"?t.innerHTML=this.params.icon:console.warn("AG Grid: menu item icon must be DOM node or string")),this.getGui().appendChild(t)}addName(){let t=ii(`<span ref="eName" class="${this.getClassName("part")} ${this.getClassName("text")}">${this.params.name||""}</span>`);this.getGui().appendChild(t)}addShortcut(){if(this.params.isCompact)return;let t=ii(`<span ref="eShortcut" class="${this.getClassName("part")} ${this.getClassName("shortcut")}">${this.params.shortcut||""}</span>`);this.getGui().appendChild(t)}addSubMenu(){let t=ii(`<span ref="ePopupPointer" class="${this.getClassName("part")} ${this.getClassName("popup-pointer")}"></span>`),e=this.getGui();if(this.params.subMenu){let i=this.gos.get("enableRtl")?"smallLeft":"smallRight";No(e,!1),t.appendChild(qe(i,this.gos))}e.appendChild(t)}getClassName(t){return`${this.cssClassPrefix}-${t}`}destroy(){super.destroy()}},oh=class extends A{constructor(){super(...arguments),this.agGridDefaults={agDateInput:b_,agColumnHeader:gm,agColumnGroupHeader:eO,agSortIndicator:uv,agTextColumnFloatingFilter:JF,agNumberColumnFloatingFilter:ZF,agDateColumnFloatingFilter:Ah,agReadOnlyFloatingFilter:rv,agAnimateShowChangeCellRenderer:P_,agAnimateSlideCellRenderer:F_,agGroupCellRenderer:TS,agGroupRowRenderer:TS,agLoadingCellRenderer:nO,agSkeletonCellRenderer:sO,agCheckboxCellRenderer:fO,agCellEditor:MS,agTextCellEditor:MS,agNumberCellEditor:uO,agDateCellEditor:gO,agDateStringCellEditor:q_,agSelectCellEditor:gv,agLargeTextCellEditor:tO,agCheckboxCellEditor:$_,agTextColumnFilter:cv,agNumberColumnFilter:E_,agDateColumnFilter:y_,agLoadingOverlay:aO,agNoRowsOverlay:lO,agTooltipComponent:dO,agMenuItem:mO},this.enterpriseAgDefaultCompsModule={agSetColumnFilter:"@ag-grid-enterprise/set-filter",agSetColumnFloatingFilter:"@ag-grid-enterprise/set-filter",agMultiColumnFilter:"@ag-grid-enterprise/multi-filter",agMultiColumnFloatingFilter:"@ag-grid-enterprise/multi-filter",agGroupColumnFilter:"@ag-grid-enterprise/row-grouping",agGroupColumnFloatingFilter:"@ag-grid-enterprise/row-grouping",agRichSelect:"@ag-grid-enterprise/rich-select",agRichSelectCellEditor:"@ag-grid-enterprise/rich-select",agDetailCellRenderer:"@ag-grid-enterprise/master-detail",agSparklineCellRenderer:"@ag-grid-enterprise/sparklines"},this.jsComps={}}init(){let t=this.gos.get("components");t!=null&&Nt(t,(e,i)=>this.registerJsComponent(e,i))}registerDefaultComponent(t,e){if(this.agGridDefaults[t]){console.error("Trying to overwrite a default component. You should call registerComponent");return}this.agGridDefaults[t]=e}registerJsComponent(t,e){this.jsComps[t]=e}retrieve(t,e){let i=(a,l)=>({componentFromFramework:l,component:a}),o=this.getFrameworkOverrides().frameworkComponent(e,this.gos.get("components"));if(o!=null)return i(o,!0);let r=this.jsComps[e];if(r){let a=this.getFrameworkOverrides().isFrameworkComponent(r);return i(r,a)}let n=this.agGridDefaults[e];if(n)return i(n,!1);let s=this.enterpriseAgDefaultCompsModule[e];return s?De.__assertRegistered(s,`AG Grid '${t}' component: ${e}`,this.context.getGridId()):Xs(()=>{this.warnAboutMissingComponent(t,e)},"MissingComp"+e),null}warnAboutMissingComponent(t,e){let i=[...Object.keys(this.agGridDefaults).filter(r=>!["agCellEditor","agGroupRowRenderer","agSortIndicator"].includes(r)),...Object.keys(this.jsComps)],o=Nd(e,i,!0,.8).values;console.warn(`AG Grid: Could not find '${e}' component. It was configured as "${t}: '${e}'" but it wasn't found in the list of registered components.`),o.length>0&&console.warn(`         Did you mean: [${o.slice(0,3)}]?`),console.warn(`If using a custom component check it has been registered as described in: ${this.getFrameworkOverrides().getDocLink("components/")}`)}};g([I],oh.prototype,"init",1);oh=g([V("userComponentRegistry")],oh);var vO={propertyName:"dateComponent",cellRenderer:!1},CO={propertyName:"headerComponent",cellRenderer:!1},wO={propertyName:"headerGroupComponent",cellRenderer:!1},AS={propertyName:"cellRenderer",cellRenderer:!0},yO={propertyName:"loadingCellRenderer",cellRenderer:!0},bO={propertyName:"cellEditor",cellRenderer:!1},IS={propertyName:"innerRenderer",cellRenderer:!0},SO={propertyName:"loadingOverlayComponent",cellRenderer:!1},xO={propertyName:"noRowsOverlayComponent",cellRenderer:!1},_O={propertyName:"tooltipComponent",cellRenderer:!1},pm={propertyName:"filter",cellRenderer:!1},EO={propertyName:"floatingFilterComponent",cellRenderer:!1},DO={propertyName:"toolPanel",cellRenderer:!1},RO={propertyName:"statusPanel",cellRenderer:!1},MO={propertyName:"fullWidthCellRenderer",cellRenderer:!0},TO={propertyName:"loadingCellRenderer",cellRenderer:!0},AO={propertyName:"groupRowRenderer",cellRenderer:!0},IO={propertyName:"detailCellRenderer",cellRenderer:!0},PO={propertyName:"menuItem",cellRenderer:!1},Y_=class{static getFloatingFilterType(t){return this.filterToFloatingFilterMapping[t]}};Y_.filterToFloatingFilterMapping={set:"agSetColumnFloatingFilter",agSetColumnFilter:"agSetColumnFloatingFilter",multi:"agMultiColumnFloatingFilter",agMultiColumnFilter:"agMultiColumnFloatingFilter",group:"agGroupColumnFloatingFilter",agGroupColumnFilter:"agGroupColumnFloatingFilter",number:"agNumberColumnFloatingFilter",agNumberColumnFilter:"agNumberColumnFloatingFilter",date:"agDateColumnFloatingFilter",agDateColumnFilter:"agDateColumnFloatingFilter",text:"agTextColumnFloatingFilter",agTextColumnFilter:"agTextColumnFloatingFilter"};var Rr=class extends A{getHeaderCompDetails(t,e){return this.getCompDetails(t,CO,"agColumnHeader",e)}getHeaderGroupCompDetails(t){let e=t.columnGroup.getColGroupDef();return this.getCompDetails(e,wO,"agColumnGroupHeader",t)}getFullWidthCellRendererDetails(t){return this.getCompDetails(this.gridOptions,MO,null,t,!0)}getFullWidthLoadingCellRendererDetails(t){return this.getCompDetails(this.gridOptions,TO,"agLoadingCellRenderer",t,!0)}getFullWidthGroupCellRendererDetails(t){return this.getCompDetails(this.gridOptions,AO,"agGroupRowRenderer",t,!0)}getFullWidthDetailCellRendererDetails(t){return this.getCompDetails(this.gridOptions,IO,"agDetailCellRenderer",t,!0)}getInnerRendererDetails(t,e){return this.getCompDetails(t,IS,null,e)}getFullWidthGroupRowInnerCellRenderer(t,e){return this.getCompDetails(t,IS,null,e)}getCellRendererDetails(t,e){return this.getCompDetails(t,AS,null,e)}getLoadingCellRendererDetails(t,e){return this.getCompDetails(t,yO,"agSkeletonCellRenderer",e,!0)}getCellEditorDetails(t,e){return this.getCompDetails(t,bO,"agCellEditor",e,!0)}getFilterDetails(t,e,i){return this.getCompDetails(t,pm,i,e,!0)}getDateCompDetails(t){return this.getCompDetails(this.gridOptions,vO,"agDateInput",t,!0)}getLoadingOverlayCompDetails(t){return this.getCompDetails(this.gridOptions,SO,"agLoadingOverlay",t,!0)}getNoRowsOverlayCompDetails(t){return this.getCompDetails(this.gridOptions,xO,"agNoRowsOverlay",t,!0)}getTooltipCompDetails(t){return this.getCompDetails(t.colDef,_O,"agTooltipComponent",t,!0)}getSetFilterCellRendererDetails(t,e){return this.getCompDetails(t,AS,null,e)}getFloatingFilterCompDetails(t,e,i){return this.getCompDetails(t,EO,i,e)}getToolPanelCompDetails(t,e){return this.getCompDetails(t,DO,null,e,!0)}getStatusPanelCompDetails(t,e){return this.getCompDetails(t,RO,null,e,!0)}getMenuItemCompDetails(t,e){return this.getCompDetails(t,PO,"agMenuItem",e,!0)}getCompDetails(t,e,i,o,r=!1){let{propertyName:n,cellRenderer:s}=e,{compName:a,jsComp:l,fwComp:d,paramsFromSelector:c,popupFromSelector:u,popupPositionFromSelector:h}=this.getCompKeys(t,e,o),p=b=>{let y=this.userComponentRegistry.retrieve(n,b);y&&(l=y.componentFromFramework?void 0:y.component,d=y.componentFromFramework?y.component:void 0)};if(a!=null&&p(a),l==null&&d==null&&i!=null&&p(i),l&&s&&!this.agComponentUtils.doesImplementIComponent(l)&&(l=this.agComponentUtils.adaptFunction(n,l)),!l&&!d){r&&console.error(`AG Grid: Could not find component ${a}, did you forget to configure this component?`);return}let m=this.mergeParamsWithApplicationProvidedParams(t,e,o,c),C=l==null,w=l||d;return{componentFromFramework:C,componentClass:w,params:m,type:e,popupFromSelector:u,popupPositionFromSelector:h,newAgStackInstance:()=>this.newAgStackInstance(w,C,m,e)}}getCompKeys(t,e,i){let{propertyName:o}=e,r,n,s,a,l,d;if(t){let c=t,u=c[o+"Selector"],h=u?u(i):null,p=m=>{typeof m=="string"?r=m:m!=null&&m!==!0&&(this.getFrameworkOverrides().isFrameworkComponent(m)?s=m:n=m)};h?(p(h.component),a=h.params,l=h.popup,d=h.popupPosition):p(c[o])}return{compName:r,jsComp:n,fwComp:s,paramsFromSelector:a,popupFromSelector:l,popupPositionFromSelector:d}}newAgStackInstance(t,e,i,o){let r=o.propertyName,n=!e,s;if(n)s=new t;else{let l=this.componentMetadataProvider.retrieve(r);s=this.frameworkComponentWrapper.wrap(t,l.mandatoryMethodList,l.optionalMethodList,o)}let a=this.initComponent(s,i);return a==null?ri.resolve(s):a.then(()=>s)}mergeParamsWithApplicationProvidedParams(t,e,i,o=null){let r=this.gos.getGridCommonParams();ei(r,i);let n=t,s=n&&n[e.propertyName+"Params"];if(typeof s=="function"){let a=s(i);ei(r,a)}else typeof s=="object"&&ei(r,s);return ei(r,o),r}initComponent(t,e){if(this.context.createBean(t),t.init!=null)return t.init(e)}getDefaultFloatingFilterType(t,e){if(t==null)return null;let i=null,{compName:o,jsComp:r,fwComp:n}=this.getCompKeys(t,pm);return o?i=Y_.getFloatingFilterType(o):r==null&&n==null&&t.filter===!0&&(i=e()),i}};g([v("gridOptions")],Rr.prototype,"gridOptions",2);g([v("agComponentUtils")],Rr.prototype,"agComponentUtils",2);g([v("componentMetadataProvider")],Rr.prototype,"componentMetadataProvider",2);g([v("userComponentRegistry")],Rr.prototype,"userComponentRegistry",2);g([Re("frameworkComponentWrapper")],Rr.prototype,"frameworkComponentWrapper",2);Rr=g([V("userComponentFactory")],Rr);var Q_=class{constructor(t){this.tickingInterval=null,this.onScrollCallback=null,this.scrollContainer=t.scrollContainer,this.scrollHorizontally=t.scrollAxis.indexOf("x")!==-1,this.scrollVertically=t.scrollAxis.indexOf("y")!==-1,this.scrollByTick=t.scrollByTick!=null?t.scrollByTick:20,t.onScrollCallback&&(this.onScrollCallback=t.onScrollCallback),this.scrollVertically&&(this.getVerticalPosition=t.getVerticalPosition,this.setVerticalPosition=t.setVerticalPosition),this.scrollHorizontally&&(this.getHorizontalPosition=t.getHorizontalPosition,this.setHorizontalPosition=t.setHorizontalPosition),this.shouldSkipVerticalScroll=t.shouldSkipVerticalScroll||(()=>!1),this.shouldSkipHorizontalScroll=t.shouldSkipHorizontalScroll||(()=>!1)}check(t,e=!1){let i=e||this.shouldSkipVerticalScroll();if(i&&this.shouldSkipHorizontalScroll())return;let o=this.scrollContainer.getBoundingClientRect(),r=this.scrollByTick;this.tickLeft=t.clientX<o.left+r,this.tickRight=t.clientX>o.right-r,this.tickUp=t.clientY<o.top+r&&!i,this.tickDown=t.clientY>o.bottom-r&&!i,this.tickLeft||this.tickRight||this.tickUp||this.tickDown?this.ensureTickingStarted():this.ensureCleared()}ensureTickingStarted(){this.tickingInterval===null&&(this.tickingInterval=window.setInterval(this.doTick.bind(this),100),this.tickCount=0)}doTick(){this.tickCount++;let t;if(t=this.tickCount>20?200:this.tickCount>10?80:40,this.scrollVertically){let e=this.getVerticalPosition();this.tickUp&&this.setVerticalPosition(e-t),this.tickDown&&this.setVerticalPosition(e+t)}if(this.scrollHorizontally){let e=this.getHorizontalPosition();this.tickLeft&&this.setHorizontalPosition(e-t),this.tickRight&&this.setHorizontalPosition(e+t)}this.onScrollCallback&&this.onScrollCallback()}ensureCleared(){this.tickingInterval&&(window.clearInterval(this.tickingInterval),this.tickingInterval=null)}},Si=class extends A{constructor(t){super(),this.eContainer=t}postConstruct(){this.gos.isRowModelType("clientSide")&&(this.clientSideRowModel=this.rowModel),this.ctrlsService.whenReady(t=>{let e=t.gridBodyCtrl;this.autoScrollService=new Q_({scrollContainer:e.getBodyViewportElement(),scrollAxis:"y",getVerticalPosition:()=>e.getScrollFeature().getVScrollPosition().top,setVerticalPosition:i=>e.getScrollFeature().setVerticalScrollPosition(i),onScrollCallback:()=>{this.onDragging(this.lastDraggingEvent)}})})}getContainer(){return this.eContainer}isInterestedIn(t){return t===2}getIconName(){return this.gos.get("rowDragManaged")&&this.shouldPreventRowMove()?te.ICON_NOT_ALLOWED:te.ICON_MOVE}shouldPreventRowMove(){return!!(this.columnModel.getRowGroupColumns().length||this.filterManager.isAnyFilterPresent()||this.sortController.isSortActive())}getRowNodes(t){if(!this.isFromThisGrid(t))return t.dragItem.rowNodes||[];let e=t.dragItem.rowNode;if(this.gos.get("rowDragMultiRow")){let o=[...this.selectionService.getSelectedNodes()].sort((r,n)=>r.rowIndex==null||n.rowIndex==null?0:this.getRowIndexNumber(r)-this.getRowIndexNumber(n));if(o.indexOf(e)!==-1)return o}return[e]}onDragEnter(t){t.dragItem.rowNodes=this.getRowNodes(t),this.dispatchGridEvent(f.EVENT_ROW_DRAG_ENTER,t),this.getRowNodes(t).forEach(e=>{e.setDragging(!0)}),this.onEnterOrDragging(t)}onDragging(t){this.onEnterOrDragging(t)}isFromThisGrid(t){let{dragSourceDomDataKey:e}=t.dragSource;return e===this.gos.getDomDataKey()}isDropZoneWithinThisGrid(t){let i=this.ctrlsService.getGridBodyCtrl().getGui(),{dropZoneTarget:o}=t;return!i.contains(o)}onEnterOrDragging(t){this.dispatchGridEvent(f.EVENT_ROW_DRAG_MOVE,t),this.lastDraggingEvent=t;let e=this.mouseEventService.getNormalisedPosition(t).y;this.gos.get("rowDragManaged")&&this.doManagedDrag(t,e),this.autoScrollService.check(t.event)}doManagedDrag(t,e){let i=this.isFromThisGrid(t),o=this.gos.get("rowDragManaged"),r=t.dragItem.rowNodes;o&&this.shouldPreventRowMove()||(this.gos.get("suppressMoveWhenRowDragging")||!i?this.isDropZoneWithinThisGrid(t)||this.clientSideRowModel.highlightRowAtPixel(r[0],e):this.moveRows(r,e))}getRowIndexNumber(t){return parseInt(be(t.getRowIndexString().split("-")),10)}moveRowAndClearHighlight(t){let e=this.clientSideRowModel.getLastHighlightedRowNode(),i=e&&e.highlighted===1,o=this.mouseEventService.getNormalisedPosition(t).y,r=t.dragItem.rowNodes,n=i?1:0;if(this.isFromThisGrid(t))r.forEach(s=>{s.rowTop<o&&(n-=1)}),this.moveRows(r,o,n);else{let s=this.gos.getCallback("getRowId"),a=this.clientSideRowModel.getRowIndexAtPixel(o)+1;this.clientSideRowModel.getHighlightPosition(o)===0&&a--,this.clientSideRowModel.updateRowData({add:r.map(l=>l.data).filter(l=>!this.clientSideRowModel.getRowNode(s?s({data:l,level:0}):l.id)),addIndex:a})}this.clearRowHighlight()}clearRowHighlight(){this.clientSideRowModel.highlightRowAtPixel(null)}moveRows(t,e,i=0){var o;this.clientSideRowModel.ensureRowsAtPixel(t,e,i)&&(this.focusService.clearFocusedCell(),(o=this.rangeService)==null||o.removeAllCellRanges())}addRowDropZone(t){if(!t.getContainer()){q("addRowDropZone - A container target needs to be provided");return}if(this.dragAndDropService.findExternalZone(t)){console.warn("AG Grid: addRowDropZone - target already exists in the list of DropZones. Use `removeRowDropZone` before adding it again.");return}let e={getContainer:t.getContainer};t.fromGrid?e=t:(t.onDragEnter&&(e.onDragEnter=i=>{t.onDragEnter(this.draggingToRowDragEvent(f.EVENT_ROW_DRAG_ENTER,i))}),t.onDragLeave&&(e.onDragLeave=i=>{t.onDragLeave(this.draggingToRowDragEvent(f.EVENT_ROW_DRAG_LEAVE,i))}),t.onDragging&&(e.onDragging=i=>{t.onDragging(this.draggingToRowDragEvent(f.EVENT_ROW_DRAG_MOVE,i))}),t.onDragStop&&(e.onDragStop=i=>{t.onDragStop(this.draggingToRowDragEvent(f.EVENT_ROW_DRAG_END,i))})),this.dragAndDropService.addDropTarget(j({isInterestedIn:i=>i===2,getIconName:()=>te.ICON_MOVE,external:!0},e))}getRowDropZone(t){let e=this.getContainer.bind(this),i=this.onDragEnter.bind(this),o=this.onDragLeave.bind(this),r=this.onDragging.bind(this),n=this.onDragStop.bind(this);return t?{getContainer:e,onDragEnter:t.onDragEnter?s=>{i(s),t.onDragEnter(this.draggingToRowDragEvent(f.EVENT_ROW_DRAG_ENTER,s))}:i,onDragLeave:t.onDragLeave?s=>{o(s),t.onDragLeave(this.draggingToRowDragEvent(f.EVENT_ROW_DRAG_LEAVE,s))}:o,onDragging:t.onDragging?s=>{r(s),t.onDragging(this.draggingToRowDragEvent(f.EVENT_ROW_DRAG_MOVE,s))}:r,onDragStop:t.onDragStop?s=>{n(s),t.onDragStop(this.draggingToRowDragEvent(f.EVENT_ROW_DRAG_END,s))}:n,fromGrid:!0}:{getContainer:e,onDragEnter:i,onDragLeave:o,onDragging:r,onDragStop:n,fromGrid:!0}}draggingToRowDragEvent(t,e){let i=this.mouseEventService.getNormalisedPosition(e).y,o=i>this.paginationProxy.getCurrentPageHeight(),r=-1,n;o||(r=this.rowModel.getRowIndexAtPixel(i),n=this.rowModel.getRow(r));let s;switch(e.vDirection){case 1:s="down";break;case 0:s="up";break;default:s=null;break}return this.gos.addGridCommonParams({type:t,event:e.event,node:e.dragItem.rowNode,nodes:e.dragItem.rowNodes,overIndex:r,overNode:n,y:i,vDirection:s})}dispatchGridEvent(t,e){let i=this.draggingToRowDragEvent(t,e);this.eventService.dispatchEvent(i)}onDragLeave(t){this.dispatchGridEvent(f.EVENT_ROW_DRAG_LEAVE,t),this.stopDragging(t),this.gos.get("rowDragManaged")&&this.clearRowHighlight()}onDragStop(t){this.dispatchGridEvent(f.EVENT_ROW_DRAG_END,t),this.stopDragging(t),this.gos.get("rowDragManaged")&&(this.gos.get("suppressMoveWhenRowDragging")||!this.isFromThisGrid(t))&&!this.isDropZoneWithinThisGrid(t)&&this.moveRowAndClearHighlight(t)}stopDragging(t){this.autoScrollService.ensureCleared(),this.getRowNodes(t).forEach(e=>{e.setDragging(!1)})}};g([v("dragAndDropService")],Si.prototype,"dragAndDropService",2);g([v("rowModel")],Si.prototype,"rowModel",2);g([v("paginationProxy")],Si.prototype,"paginationProxy",2);g([v("columnModel")],Si.prototype,"columnModel",2);g([v("focusService")],Si.prototype,"focusService",2);g([v("sortController")],Si.prototype,"sortController",2);g([v("filterManager")],Si.prototype,"filterManager",2);g([v("selectionService")],Si.prototype,"selectionService",2);g([v("mouseEventService")],Si.prototype,"mouseEventService",2);g([v("ctrlsService")],Si.prototype,"ctrlsService",2);g([Re("rangeService")],Si.prototype,"rangeService",2);g([I],Si.prototype,"postConstruct",1);var md=class extends A{constructor(){super(...arguments),this.dragEndFunctions=[],this.dragSources=[]}removeAllListeners(){this.dragSources.forEach(this.removeListener.bind(this)),this.dragSources.length=0}removeListener(t){let e=t.dragSource.eElement,i=t.mouseDownListener;if(e.removeEventListener("mousedown",i),t.touchEnabled){let o=t.touchStartListener;e.removeEventListener("touchstart",o,{passive:!0})}}removeDragSource(t){let e=this.dragSources.find(i=>i.dragSource===t);e&&(this.removeListener(e),Jt(this.dragSources,e))}isDragging(){return this.dragging}addDragSource(t){let e=this.onMouseDown.bind(this,t),{eElement:i,includeTouch:o,stopPropagationForTouch:r}=t;i.addEventListener("mousedown",e);let n=null,s=this.gos.get("suppressTouch");o&&!s&&(n=a=>{Km(a.target)||(a.cancelable&&(a.preventDefault(),r&&a.stopPropagation()),this.onTouchStart(t,a))},i.addEventListener("touchstart",n,{passive:!1})),this.dragSources.push({dragSource:t,mouseDownListener:e,touchStartListener:n,touchEnabled:!!o})}getStartTarget(){return this.startTarget}onTouchStart(t,e){this.currentDragParams=t,this.dragging=!1;let i=e.touches[0];this.touchLastTime=i,this.touchStart=i;let o=l=>this.onTouchMove(l,t.eElement),r=l=>this.onTouchUp(l,t.eElement),n=l=>{l.cancelable&&l.preventDefault()},s=e.target,a=[{target:this.gos.getRootNode(),type:"touchmove",listener:n,options:{passive:!1}},{target:s,type:"touchmove",listener:o,options:{passive:!0}},{target:s,type:"touchend",listener:r,options:{passive:!0}},{target:s,type:"touchcancel",listener:r,options:{passive:!0}}];this.addTemporaryEvents(a),t.dragStartPixels===0&&this.onCommonMove(i,this.touchStart,t.eElement)}onMouseDown(t,e){let i=e;if(t.skipMouseEvent&&t.skipMouseEvent(e)||i._alreadyProcessedByDragService||(i._alreadyProcessedByDragService=!0,e.button!==0))return;this.shouldPreventMouseEvent(e)&&e.preventDefault(),this.currentDragParams=t,this.dragging=!1,this.mouseStartEvent=e,this.startTarget=e.target;let o=l=>this.onMouseMove(l,t.eElement),r=l=>this.onMouseUp(l,t.eElement),n=l=>l.preventDefault(),s=this.gos.getRootNode(),a=[{target:s,type:"mousemove",listener:o},{target:s,type:"mouseup",listener:r},{target:s,type:"contextmenu",listener:n}];this.addTemporaryEvents(a),t.dragStartPixels===0&&this.onMouseMove(e,t.eElement)}addTemporaryEvents(t){t.forEach(e=>{let{target:i,type:o,listener:r,options:n}=e;i.addEventListener(o,r,n)}),this.dragEndFunctions.push(()=>{t.forEach(e=>{let{target:i,type:o,listener:r,options:n}=e;i.removeEventListener(o,r,n)})})}isEventNearStartEvent(t,e){let{dragStartPixels:i}=this.currentDragParams,o=T(i)?i:4;return iv(t,e,o)}getFirstActiveTouch(t){for(let e=0;e<t.length;e++)if(t[e].identifier===this.touchStart.identifier)return t[e];return null}onCommonMove(t,e,i){if(!this.dragging){if(!this.dragging&&this.isEventNearStartEvent(t,e))return;this.dragging=!0;let o={type:f.EVENT_DRAG_STARTED,target:i};this.eventService.dispatchEvent(o),this.currentDragParams.onDragStart(e),this.currentDragParams.onDragging(e)}this.currentDragParams.onDragging(t)}onTouchMove(t,e){let i=this.getFirstActiveTouch(t.touches);i&&this.onCommonMove(i,this.touchStart,e)}onMouseMove(t,e){var i;fo()&&((i=this.gos.getDocument().getSelection())==null||i.removeAllRanges()),this.shouldPreventMouseEvent(t)&&t.preventDefault(),this.onCommonMove(t,this.mouseStartEvent,e)}shouldPreventMouseEvent(t){let e=this.gos.get("enableCellTextSelection"),i=t.type==="mousemove";return e&&i&&t.cancelable&&this.mouseEventService.isEventFromThisGrid(t)&&!this.isOverFormFieldElement(t)}isOverFormFieldElement(t){let e=t.target,i=e?.tagName.toLocaleLowerCase();return!!i?.match("^a$|textarea|input|select|button")}onTouchUp(t,e){let i=this.getFirstActiveTouch(t.changedTouches);i||(i=this.touchLastTime),this.onUpCommon(i,e)}onMouseUp(t,e){this.onUpCommon(t,e)}onUpCommon(t,e){if(this.dragging){this.dragging=!1,this.currentDragParams.onDragStop(t);let i={type:f.EVENT_DRAG_STOPPED,target:e};this.eventService.dispatchEvent(i)}this.mouseStartEvent=null,this.startTarget=null,this.touchStart=null,this.touchLastTime=null,this.currentDragParams=null,this.dragEndFunctions.forEach(i=>i()),this.dragEndFunctions.length=0}};g([v("mouseEventService")],md.prototype,"mouseEventService",2);g([Kt],md.prototype,"removeAllListeners",1);md=g([V("dragService")],md);var qf="ag-list-item-hovered",X_=class extends A{constructor(t,e,i){super(),this.comp=t,this.virtualList=e,this.params=i,this.currentDragValue=null,this.lastHoveredListItem=null}postConstruct(){this.addManagedListener(this.params.eventSource,this.params.listItemDragStartEvent,this.listItemDragStart.bind(this)),this.addManagedListener(this.params.eventSource,this.params.listItemDragEndEvent,this.listItemDragEnd.bind(this)),this.createDropTarget(),this.createAutoScrollService()}listItemDragStart(t){this.currentDragValue=this.params.getCurrentDragValue(t),this.moveBlocked=this.params.isMoveBlocked(this.currentDragValue)}listItemDragEnd(){window.setTimeout(()=>{this.currentDragValue=null,this.moveBlocked=!1},10)}createDropTarget(){let t={isInterestedIn:e=>e===this.params.dragSourceType,getIconName:()=>this.moveBlocked?te.ICON_PINNED:te.ICON_MOVE,getContainer:()=>this.comp.getGui(),onDragging:e=>this.onDragging(e),onDragStop:()=>this.onDragStop(),onDragLeave:()=>this.onDragLeave()};this.dragAndDropService.addDropTarget(t)}createAutoScrollService(){let t=this.virtualList.getGui();this.autoScrollService=new Q_({scrollContainer:t,scrollAxis:"y",getVerticalPosition:()=>t.scrollTop,setVerticalPosition:e=>t.scrollTop=e})}onDragging(t){if(!this.currentDragValue||this.moveBlocked)return;let e=this.getListDragItem(t),i=this.virtualList.getComponentAt(e.rowIndex);if(!i)return;let o=i.getGui().parentElement;this.lastHoveredListItem&&this.lastHoveredListItem.rowIndex===e.rowIndex&&this.lastHoveredListItem.position===e.position||(this.autoScrollService.check(t.event),this.clearHoveredItems(),this.lastHoveredListItem=e,cm(o,qf),cm(o,`ag-item-highlight-${e.position}`))}getListDragItem(t){let e=this.virtualList.getGui(),i=parseFloat(window.getComputedStyle(e).paddingTop),o=this.virtualList.getRowHeight(),r=this.virtualList.getScrollTop(),n=Math.max(0,(t.y-i+r)/o),s=this.params.getNumRows(this.comp)-1,a=Math.min(s,n)|0;return{rowIndex:a,position:Math.round(n)>n||n>s?"bottom":"top",component:this.virtualList.getComponentAt(a)}}onDragStop(){this.moveBlocked||(this.params.moveItem(this.currentDragValue,this.lastHoveredListItem),this.clearHoveredItems(),this.autoScrollService.ensureCleared())}onDragLeave(){this.clearHoveredItems(),this.autoScrollService.ensureCleared()}clearHoveredItems(){this.virtualList.getGui().querySelectorAll(`.${qf}`).forEach(e=>{[qf,"ag-item-highlight-top","ag-item-highlight-bottom"].forEach(i=>{e.classList.remove(i)})}),this.lastHoveredListItem=null}};g([v("dragAndDropService")],X_.prototype,"dragAndDropService",2);g([I],X_.prototype,"postConstruct",1);function wn(t){let e=t;return e!=null&&e.getFrameworkComponentInstance!=null?e.getFrameworkComponentInstance():t}var ge=class{constructor(){this.detailGridInfoMap={},this.destroyCalled=!1}init(){switch(this.rowModel.getType()){case"clientSide":this.clientSideRowModel=this.rowModel;break;case"infinite":this.infiniteRowModel=this.rowModel;break;case"serverSide":this.serverSideRowModel=this.rowModel;break}this.ctrlsService.whenReady(t=>{this.gridBodyCtrl=t.gridBodyCtrl})}__getAlignedGridService(){return this.alignedGridsService}getGridId(){return this.context.getGridId()}addDetailGridInfo(t,e){this.detailGridInfoMap[t]=e}removeDetailGridInfo(t){delete this.detailGridInfoMap[t]}getDetailGridInfo(t){return this.detailGridInfoMap[t]}forEachDetailGridInfo(t){let e=0;Nt(this.detailGridInfoMap,(i,o)=>{T(o)&&(t(o,e),e++)})}getDataAsCsv(t){if(De.__assertRegistered("@ag-grid-community/csv-export","api.getDataAsCsv",this.context.getGridId()))return this.csvCreator.getDataAsCsv(t)}exportDataAsCsv(t){De.__assertRegistered("@ag-grid-community/csv-export","api.exportDataAsCsv",this.context.getGridId())&&this.csvCreator.exportDataAsCsv(t)}assertNotExcelMultiSheet(t,e){return De.__assertRegistered("@ag-grid-enterprise/excel-export","api."+t,this.context.getGridId())?this.excelCreator.getFactoryMode()===1?(console.warn("AG Grid: The Excel Exporter is currently on Multi Sheet mode. End that operation by calling 'api.getMultipleSheetAsExcel()' or 'api.exportMultipleSheetsAsExcel()'"),!1):!0:!1}getDataAsExcel(t){if(this.assertNotExcelMultiSheet("getDataAsExcel",t))return this.excelCreator.getDataAsExcel(t)}exportDataAsExcel(t){this.assertNotExcelMultiSheet("exportDataAsExcel",t)&&this.excelCreator.exportDataAsExcel(t)}getSheetDataForExcel(t){if(De.__assertRegistered("@ag-grid-enterprise/excel-export","api.getSheetDataForExcel",this.context.getGridId()))return this.excelCreator.setFactoryMode(1),this.excelCreator.getSheetDataForExcel(t)}getMultipleSheetsAsExcel(t){if(De.__assertRegistered("@ag-grid-enterprise/excel-export","api.getMultipleSheetsAsExcel",this.context.getGridId()))return this.excelCreator.getMultipleSheetsAsExcel(t)}exportMultipleSheetsAsExcel(t){De.__assertRegistered("@ag-grid-enterprise/excel-export","api.exportMultipleSheetsAsExcel",this.context.getGridId())&&this.excelCreator.exportMultipleSheetsAsExcel(t)}setGridAriaProperty(t,e){if(!t)return;let i=this.ctrlsService.getGridBodyCtrl().getGui(),o=`aria-${t}`;e===null?i.removeAttribute(o):i.setAttribute(o,e)}logMissingRowModel(t,...e){console.error(`AG Grid: api.${t} can only be called when gridOptions.rowModelType is ${e.join(" or ")}`)}logDeprecation(t,e,i,o){q(`Since ${t} api.${e} is deprecated. Please use ${i} instead. ${o??""}`)}getPinnedTopRowCount(){return this.pinnedRowModel.getPinnedTopRowCount()}getPinnedBottomRowCount(){return this.pinnedRowModel.getPinnedBottomRowCount()}getPinnedTopRow(t){return this.pinnedRowModel.getPinnedTopRow(t)}getPinnedBottomRow(t){return this.pinnedRowModel.getPinnedBottomRow(t)}expireValueCache(){this.valueCache.expire()}getVerticalPixelRange(){return this.gridBodyCtrl.getScrollFeature().getVScrollPosition()}getHorizontalPixelRange(){return this.gridBodyCtrl.getScrollFeature().getHScrollPosition()}refreshCells(t={}){this.frameworkOverrides.wrapIncoming(()=>this.rowRenderer.refreshCells(t))}flashCells(t={}){let e=i=>q(`Since v31.1 api.flashCells parameter '${i}Delay' is deprecated. Please use '${i}Duration' instead.`);T(t.fadeDelay)&&e("fade"),T(t.flashDelay)&&e("flash"),this.frameworkOverrides.wrapIncoming(()=>this.rowRenderer.flashCells(t))}redrawRows(t={}){let e=t?t.rowNodes:void 0;this.frameworkOverrides.wrapIncoming(()=>this.rowRenderer.redrawRows(e))}refreshHeader(){this.frameworkOverrides.wrapIncoming(()=>this.ctrlsService.getHeaderRowContainerCtrls().forEach(t=>t.refresh()))}isAnyFilterPresent(){return this.filterManager.isAnyFilterPresent()}isColumnFilterPresent(){return this.filterManager.isColumnFilterPresent()||this.filterManager.isAggregateFilterPresent()}isQuickFilterPresent(){return this.filterManager.isQuickFilterPresent()}getModel(){return q("Since v31.1 getModel() is deprecated. Please use the appropriate grid API methods instead."),this.rowModel}setRowNodeExpanded(t,e,i,o){this.expansionService.setRowNodeExpanded(t,e,i,o)}onGroupExpandedOrCollapsed(){if(X(this.clientSideRowModel)){this.logMissingRowModel("onGroupExpandedOrCollapsed","clientSide");return}this.expansionService.onGroupExpandedOrCollapsed()}refreshClientSideRowModel(t){if(X(this.clientSideRowModel)){this.logMissingRowModel("refreshClientSideRowModel","clientSide");return}this.clientSideRowModel.refreshModel(t)}isAnimationFrameQueueEmpty(){return this.animationFrameService.isQueueEmpty()}flushAllAnimationFrames(){this.animationFrameService.flushAllFrames()}getRowNode(t){return this.rowModel.getRowNode(t)}getSizesForCurrentTheme(){return{rowHeight:this.gos.getRowHeightAsNumber(),headerHeight:this.columnModel.getHeaderHeight()}}expandAll(){this.clientSideRowModel||this.serverSideRowModel?this.expansionService.expandAll(!0):this.logMissingRowModel("expandAll","clientSide","serverSide")}collapseAll(){this.clientSideRowModel||this.serverSideRowModel?this.expansionService.expandAll(!1):this.logMissingRowModel("collapseAll","clientSide","serverSide")}addRenderedRowListener(t,e,i){this.rowRenderer.addRenderedRowListener(t,e,i)}getQuickFilter(){return this.gos.get("quickFilterText")}getAdvancedFilterModel(){return De.__assertRegistered("@ag-grid-enterprise/advanced-filter","api.getAdvancedFilterModel",this.context.getGridId())?this.filterManager.getAdvancedFilterModel():null}setAdvancedFilterModel(t){this.filterManager.setAdvancedFilterModel(t)}showAdvancedFilterBuilder(){De.__assertRegistered("@ag-grid-enterprise/advanced-filter","api.setAdvancedFilterModel",this.context.getGridId())&&this.filterManager.showAdvancedFilterBuilder("api")}setNodesSelected(t){if(!t.nodes.every(s=>s.rowPinned?(console.warn("AG Grid: cannot select pinned rows"),!1):s.id===void 0?(console.warn("AG Grid: cannot select node until id for node is known"),!1):!0))return;let{nodes:i,source:o,newValue:r}=t,n=i;this.selectionService.setNodesSelected({nodes:n,source:o??"api",newValue:r})}selectAll(t="apiSelectAll"){this.selectionService.selectAllRowNodes({source:t})}deselectAll(t="apiSelectAll"){this.selectionService.deselectAllRowNodes({source:t})}selectAllFiltered(t="apiSelectAllFiltered"){this.selectionService.selectAllRowNodes({source:t,justFiltered:!0})}deselectAllFiltered(t="apiSelectAllFiltered"){this.selectionService.deselectAllRowNodes({source:t,justFiltered:!0})}getServerSideSelectionState(){return X(this.serverSideRowModel)?(this.logMissingRowModel("getServerSideSelectionState","serverSide"),null):this.selectionService.getSelectionState()}setServerSideSelectionState(t){if(X(this.serverSideRowModel)){this.logMissingRowModel("setServerSideSelectionState","serverSide");return}this.selectionService.setSelectionState(t,"api")}selectAllOnCurrentPage(t="apiSelectAllCurrentPage"){this.selectionService.selectAllRowNodes({source:t,justCurrentPage:!0})}deselectAllOnCurrentPage(t="apiSelectAllCurrentPage"){this.selectionService.deselectAllRowNodes({source:t,justCurrentPage:!0})}showLoadingOverlay(){this.overlayService.showLoadingOverlay()}showNoRowsOverlay(){this.overlayService.showNoRowsOverlay()}hideOverlay(){this.overlayService.hideOverlay()}getSelectedNodes(){return this.selectionService.getSelectedNodes()}getSelectedRows(){return this.selectionService.getSelectedRows()}getBestCostNodeSelection(){if(X(this.clientSideRowModel)){this.logMissingRowModel("getBestCostNodeSelection","clientSide");return}return this.selectionService.getBestCostNodeSelection()}getRenderedNodes(){return this.rowRenderer.getRenderedNodes()}ensureColumnVisible(t,e="auto"){this.frameworkOverrides.wrapIncoming(()=>this.gridBodyCtrl.getScrollFeature().ensureColumnVisible(t,e),"ensureVisible")}ensureIndexVisible(t,e){this.frameworkOverrides.wrapIncoming(()=>this.gridBodyCtrl.getScrollFeature().ensureIndexVisible(t,e),"ensureVisible")}ensureNodeVisible(t,e=null){this.frameworkOverrides.wrapIncoming(()=>this.gridBodyCtrl.getScrollFeature().ensureNodeVisible(t,e),"ensureVisible")}forEachLeafNode(t){if(X(this.clientSideRowModel)){this.logMissingRowModel("forEachLeafNode","clientSide");return}this.clientSideRowModel.forEachLeafNode(t)}forEachNode(t,e){this.rowModel.forEachNode(t,e)}forEachNodeAfterFilter(t){if(X(this.clientSideRowModel)){this.logMissingRowModel("forEachNodeAfterFilter","clientSide");return}this.clientSideRowModel.forEachNodeAfterFilter(t)}forEachNodeAfterFilterAndSort(t){if(X(this.clientSideRowModel)){this.logMissingRowModel("forEachNodeAfterFilterAndSort","clientSide");return}this.clientSideRowModel.forEachNodeAfterFilterAndSort(t)}getFilterInstance(t,e){return q("'getFilterInstance' is deprecated. To get/set individual filter models, use 'getColumnFilterModel' or 'setColumnFilterModel' instead. To get hold of the filter instance, use 'getColumnFilterInstance' which returns the instance asynchronously."),this.filterManager.getFilterInstance(t,e)}getColumnFilterInstance(t){return this.filterManager.getColumnFilterInstance(t)}destroyFilter(t){let e=this.columnModel.getPrimaryColumn(t);if(e)return this.filterManager.destroyFilter(e,"api")}getStatusPanel(t){if(!De.__assertRegistered("@ag-grid-enterprise/status-bar","api.getStatusPanel",this.context.getGridId()))return;let e=this.statusBarService.getStatusPanel(t);return wn(e)}getColumnDef(t){let e=this.columnModel.getPrimaryColumn(t);return e?e.getColDef():null}getColumnDefs(){return this.columnModel.getColumnDefs()}onFilterChanged(t="api"){this.filterManager.onFilterChanged({source:t})}onSortChanged(){this.sortController.onSortChanged("api")}setFilterModel(t){this.frameworkOverrides.wrapIncoming(()=>this.filterManager.setFilterModel(t))}getFilterModel(){return this.filterManager.getFilterModel()}getColumnFilterModel(t){return this.filterManager.getColumnFilterModel(t)}setColumnFilterModel(t,e){return this.filterManager.setColumnFilterModel(t,e)}getFocusedCell(){return this.focusService.getFocusedCell()}clearFocusedCell(){return this.focusService.clearFocusedCell()}setFocusedCell(t,e,i){this.focusService.setFocusedCell({rowIndex:t,column:e,rowPinned:i,forceBrowserFocus:!0})}addRowDropZone(t){this.gridBodyCtrl.getRowDragFeature().addRowDropZone(t)}removeRowDropZone(t){let e=this.dragAndDropService.findExternalZone(t);e&&this.dragAndDropService.removeDropTarget(e)}getRowDropZoneParams(t){return this.gridBodyCtrl.getRowDragFeature().getRowDropZone(t)}assertSideBarLoaded(t){return De.__assertRegistered("@ag-grid-enterprise/side-bar","api."+t,this.context.getGridId())}isSideBarVisible(){return this.assertSideBarLoaded("isSideBarVisible")&&this.sideBarService.getSideBarComp().isDisplayed()}setSideBarVisible(t){this.assertSideBarLoaded("setSideBarVisible")&&this.sideBarService.getSideBarComp().setDisplayed(t)}setSideBarPosition(t){this.assertSideBarLoaded("setSideBarPosition")&&this.sideBarService.getSideBarComp().setSideBarPosition(t)}openToolPanel(t){this.assertSideBarLoaded("openToolPanel")&&this.sideBarService.getSideBarComp().openToolPanel(t,"api")}closeToolPanel(){this.assertSideBarLoaded("closeToolPanel")&&this.sideBarService.getSideBarComp().close("api")}getOpenedToolPanel(){return this.assertSideBarLoaded("getOpenedToolPanel")?this.sideBarService.getSideBarComp().openedItem():null}refreshToolPanel(){this.assertSideBarLoaded("refreshToolPanel")&&this.sideBarService.getSideBarComp().refresh()}isToolPanelShowing(){return this.assertSideBarLoaded("isToolPanelShowing")&&this.sideBarService.getSideBarComp().isToolPanelShowing()}getToolPanelInstance(t){if(this.assertSideBarLoaded("getToolPanelInstance")){let e=this.sideBarService.getSideBarComp().getToolPanelInstance(t);return wn(e)}}getSideBar(){if(this.assertSideBarLoaded("getSideBar"))return this.sideBarService.getSideBarComp().getDef()}resetRowHeights(){if(T(this.clientSideRowModel)){if(this.columnModel.isAutoRowHeightActive()){console.warn("AG Grid: calling gridApi.resetRowHeights() makes no sense when using Auto Row Height.");return}this.clientSideRowModel.resetRowHeights()}}setRowCount(t,e){if(this.serverSideRowModel){if(this.columnModel.isRowGroupEmpty()){this.serverSideRowModel.setRowCount(t,e);return}console.error("AG Grid: setRowCount cannot be used while using row grouping.");return}if(this.infiniteRowModel){this.infiniteRowModel.setRowCount(t,e);return}this.logMissingRowModel("setRowCount","infinite","serverSide")}onRowHeightChanged(){this.clientSideRowModel?this.clientSideRowModel.onRowHeightChanged():this.serverSideRowModel&&this.serverSideRowModel.onRowHeightChanged()}getValue(t,e){return this.logDeprecation("31.3","getValue","getCellValue"),this.getCellValue({colKey:t,rowNode:e})}getCellValue(t){var e;let{colKey:i,rowNode:o,useFormatter:r}=t,n=(e=this.columnModel.getPrimaryColumn(i))!=null?e:this.columnModel.getGridColumn(i);if(X(n))return null;let s=this.valueService.getValue(n,o);if(r){let a=this.valueService.formatValue(n,o,s);return a??rt(s,!0)}return s}addEventListener(t,e){this.apiEventService.addEventListener(t,e)}addGlobalListener(t){this.apiEventService.addGlobalListener(t)}removeEventListener(t,e){this.apiEventService.removeEventListener(t,e)}removeGlobalListener(t){this.apiEventService.removeGlobalListener(t)}dispatchEvent(t){this.eventService.dispatchEvent(t)}destroy(){var t;let e=`See ${this.frameworkOverrides.getDocLink("grid-lifecycle/#grid-pre-destroyed")}`;if(this.destroyCalled)return;let i={type:f.EVENT_GRID_PRE_DESTROYED,state:this.getState()};this.dispatchEvent(i),this.destroyCalled=!0,(t=this.ctrlsService.get("gridCtrl"))==null||t.destroyGridUi(),this.context.destroy(),this.detailGridInfoMap={},$S(this,["isDestroyed"],e)}isDestroyed(){return this.destroyCalled}resetQuickFilter(){this.filterManager.resetQuickFilterCache()}getCellRanges(){return this.rangeService?this.rangeService.getCellRanges():(De.__assertRegistered("@ag-grid-enterprise/range-selection","api.getCellRanges",this.context.getGridId()),null)}addCellRange(t){if(this.rangeService){this.rangeService.addCellRange(t);return}De.__assertRegistered("@ag-grid-enterprise/range-selection","api.addCellRange",this.context.getGridId())}clearRangeSelection(){this.rangeService&&this.rangeService.removeAllCellRanges(),De.__assertRegistered("@ag-grid-enterprise/range-selection","gridApi.clearRangeSelection",this.context.getGridId())}undoCellEditing(){this.undoRedoService.undo("api")}redoCellEditing(){this.undoRedoService.redo("api")}getCurrentUndoSize(){return this.undoRedoService.getCurrentUndoStackSize()}getCurrentRedoSize(){return this.undoRedoService.getCurrentRedoStackSize()}assertChart(t,e){if(De.__assertRegistered("@ag-grid-enterprise/charts","api."+t,this.context.getGridId()))return this.frameworkOverrides.wrapIncoming(()=>e())}getChartModels(){return this.assertChart("getChartModels",()=>this.chartService.getChartModels())}getChartRef(t){return this.assertChart("getChartRef",()=>this.chartService.getChartRef(t))}getChartImageDataURL(t){return this.assertChart("getChartImageDataURL",()=>this.chartService.getChartImageDataURL(t))}downloadChart(t){return this.assertChart("downloadChart",()=>this.chartService.downloadChart(t))}openChartToolPanel(t){return this.assertChart("openChartToolPanel",()=>this.chartService.openChartToolPanel(t))}closeChartToolPanel(t){return this.assertChart("closeChartToolPanel",()=>this.chartService.closeChartToolPanel(t.chartId))}createRangeChart(t){return this.assertChart("createRangeChart",()=>this.chartService.createRangeChart(t))}createPivotChart(t){return this.assertChart("createPivotChart",()=>this.chartService.createPivotChart(t))}createCrossFilterChart(t){return this.assertChart("createCrossFilterChart",()=>this.chartService.createCrossFilterChart(t))}updateChart(t){return this.assertChart("updateChart",()=>this.chartService.updateChart(t))}restoreChart(t,e){return this.assertChart("restoreChart",()=>this.chartService.restoreChart(t,e))}assertClipboard(t,e){De.__assertRegistered("@ag-grid-enterprise/clipboard","api"+t,this.context.getGridId())&&e()}copyToClipboard(t){this.assertClipboard("copyToClipboard",()=>this.clipboardService.copyToClipboard(t))}cutToClipboard(t){this.assertClipboard("cutToClipboard",()=>this.clipboardService.cutToClipboard(t))}copySelectedRowsToClipboard(t){this.assertClipboard("copySelectedRowsToClipboard",()=>this.clipboardService.copySelectedRowsToClipboard(t))}copySelectedRangeToClipboard(t){this.assertClipboard("copySelectedRangeToClipboard",()=>this.clipboardService.copySelectedRangeToClipboard(t))}copySelectedRangeDown(){this.assertClipboard("copySelectedRangeDown",()=>this.clipboardService.copyRangeDown())}pasteFromClipboard(){this.assertClipboard("pasteFromClipboard",()=>this.clipboardService.pasteFromClipboard())}showColumnMenuAfterButtonClick(t,e){q("'showColumnMenuAfterButtonClick' is deprecated. Use 'IHeaderParams.showColumnMenu' within a header component, or 'api.showColumnMenu' elsewhere.");let i=this.columnModel.getGridColumn(t);this.menuService.showColumnMenu({column:i,buttonElement:e,positionBy:"button"})}showColumnMenuAfterMouseClick(t,e){q("'showColumnMenuAfterMouseClick' is deprecated. Use 'IHeaderParams.showColumnMenuAfterMouseClick' within a header component, or 'api.showColumnMenu' elsewhere.");let i=this.columnModel.getGridColumn(t);if(i||(i=this.columnModel.getPrimaryColumn(t)),!i){console.error(`AG Grid: column '${t}' not found`);return}this.menuService.showColumnMenu({column:i,mouseEvent:e,positionBy:"mouse"})}showContextMenu(t){let{rowNode:e,column:i,value:o,x:r,y:n}=t||{},{x:s,y:a}=this.menuService.getContextMenuPosition(e,i);r!=null&&(s=r),n!=null&&(a=n),this.menuService.showContextMenu({mouseEvent:new MouseEvent("mousedown",{clientX:s,clientY:a}),rowNode:e,column:i,value:o})}showColumnChooser(t){this.menuService.showColumnChooser({chooserParams:t})}showColumnFilter(t){let e=this.columnModel.getGridColumn(t);if(!e){console.error(`AG Grid: column '${t}' not found`);return}this.menuService.showFilterMenu({column:e,containerType:"columnFilter",positionBy:"auto"})}showColumnMenu(t){let e=this.columnModel.getGridColumn(t);if(!e){console.error(`AG Grid: column '${t}' not found`);return}this.menuService.showColumnMenu({column:e,positionBy:"auto"})}hidePopupMenu(){this.menuService.hidePopupMenu()}hideColumnChooser(){this.menuService.hideColumnChooser()}tabToNextCell(t){return this.navigationService.tabToNextCell(!1,t)}tabToPreviousCell(t){return this.navigationService.tabToNextCell(!0,t)}getCellRendererInstances(t={}){return this.rowRenderer.getCellRendererInstances(t).map(wn)}getCellEditorInstances(t={}){return this.rowRenderer.getCellEditorInstances(t).map(wn)}getEditingCells(){return this.rowRenderer.getEditingCells()}stopEditing(t=!1){this.rowRenderer.stopEditing(t)}startEditingCell(t){let e=this.columnModel.getGridColumn(t.colKey);if(!e){console.warn(`AG Grid: no column found for ${t.colKey}`);return}let i={rowIndex:t.rowIndex,rowPinned:t.rowPinned||null,column:e};t.rowPinned==null&&this.ensureIndexVisible(t.rowIndex),this.ensureColumnVisible(t.colKey);let r=this.navigationService.getCellByPosition(i);r&&(this.focusService.isCellFocused(i)||this.focusService.setFocusedCell(i),r.startRowOrCellEdit(t.key))}addAggFunc(t,e){this.logDeprecation("v31.1","addAggFunc(key, func)","addAggFuncs({ key: func })"),this.aggFuncService&&this.aggFuncService.addAggFuncs({key:e})}addAggFuncs(t){this.aggFuncService&&this.aggFuncService.addAggFuncs(t)}clearAggFuncs(){this.aggFuncService&&this.aggFuncService.clear()}applyServerSideTransaction(t){if(!this.serverSideTransactionManager){this.logMissingRowModel("applyServerSideTransaction","serverSide");return}return this.serverSideTransactionManager.applyTransaction(t)}applyServerSideTransactionAsync(t,e){if(!this.serverSideTransactionManager){this.logMissingRowModel("applyServerSideTransactionAsync","serverSide");return}return this.serverSideTransactionManager.applyTransactionAsync(t,e)}applyServerSideRowData(t){var e,i;let o=(e=t.startRow)!=null?e:0,r=(i=t.route)!=null?i:[];if(o<0){console.warn(`AG Grid: invalid value ${t.startRow} for startRow, the value should be >= 0`);return}this.serverSideRowModel?this.serverSideRowModel.applyRowData(t.successParams,o,r):this.logMissingRowModel("setServerSideDatasource","serverSide")}retryServerSideLoads(){if(!this.serverSideRowModel){this.logMissingRowModel("retryServerSideLoads","serverSide");return}this.serverSideRowModel.retryLoads()}flushServerSideAsyncTransactions(){if(!this.serverSideTransactionManager){this.logMissingRowModel("flushServerSideAsyncTransactions","serverSide");return}return this.serverSideTransactionManager.flushAsyncTransactions()}applyTransaction(t){if(!this.clientSideRowModel){this.logMissingRowModel("applyTransaction","clientSide");return}return this.frameworkOverrides.wrapIncoming(()=>this.clientSideRowModel.updateRowData(t))}applyTransactionAsync(t,e){if(!this.clientSideRowModel){this.logMissingRowModel("applyTransactionAsync","clientSide");return}this.frameworkOverrides.wrapIncoming(()=>this.clientSideRowModel.batchUpdateRowData(t,e))}flushAsyncTransactions(){if(!this.clientSideRowModel){this.logMissingRowModel("flushAsyncTransactions","clientSide");return}this.frameworkOverrides.wrapIncoming(()=>this.clientSideRowModel.flushAsyncTransactions())}refreshInfiniteCache(){this.infiniteRowModel?this.infiniteRowModel.refreshCache():this.logMissingRowModel("refreshInfiniteCache","infinite")}purgeInfiniteCache(){this.infiniteRowModel?this.infiniteRowModel.purgeCache():this.logMissingRowModel("purgeInfiniteCache","infinite")}refreshServerSide(t){if(!this.serverSideRowModel){this.logMissingRowModel("refreshServerSide","serverSide");return}this.serverSideRowModel.refreshStore(t)}getServerSideGroupLevelState(){return this.serverSideRowModel?this.serverSideRowModel.getStoreState():(this.logMissingRowModel("getServerSideGroupLevelState","serverSide"),[])}getInfiniteRowCount(){if(this.infiniteRowModel)return this.infiniteRowModel.getRowCount();this.logMissingRowModel("getInfiniteRowCount","infinite")}isLastRowIndexKnown(){if(this.infiniteRowModel)return this.infiniteRowModel.isLastRowIndexKnown();this.logMissingRowModel("isLastRowIndexKnown","infinite")}getCacheBlockState(){return this.rowNodeBlockLoader.getBlockState()}getFirstDisplayedRow(){return this.logDeprecation("v31.1","getFirstDisplayedRow","getFirstDisplayedRowIndex"),this.getFirstDisplayedRowIndex()}getFirstDisplayedRowIndex(){return this.rowRenderer.getFirstVirtualRenderedRow()}getLastDisplayedRow(){return this.logDeprecation("v31.1","getLastDisplayedRow","getLastDisplayedRowIndex"),this.getLastDisplayedRowIndex()}getLastDisplayedRowIndex(){return this.rowRenderer.getLastVirtualRenderedRow()}getDisplayedRowAtIndex(t){return this.rowModel.getRow(t)}getDisplayedRowCount(){return this.rowModel.getRowCount()}paginationIsLastPageFound(){return this.paginationProxy.isLastPageFound()}paginationGetPageSize(){return this.paginationProxy.getPageSize()}paginationGetCurrentPage(){return this.paginationProxy.getCurrentPage()}paginationGetTotalPages(){return this.paginationProxy.getTotalPages()}paginationGetRowCount(){return this.paginationProxy.getMasterRowCount()}paginationGoToNextPage(){this.paginationProxy.goToNextPage()}paginationGoToPreviousPage(){this.paginationProxy.goToPreviousPage()}paginationGoToFirstPage(){this.paginationProxy.goToFirstPage()}paginationGoToLastPage(){this.paginationProxy.goToLastPage()}paginationGoToPage(t){this.paginationProxy.goToPage(t)}sizeColumnsToFit(t){typeof t=="number"?this.columnModel.sizeColumnsToFit(t,"api"):this.gridBodyCtrl.sizeColumnsToFit(t)}setColumnGroupOpened(t,e){this.columnModel.setColumnGroupOpened(t,e,"api")}getColumnGroup(t,e){return this.columnModel.getColumnGroup(t,e)}getProvidedColumnGroup(t){return this.columnModel.getProvidedColumnGroup(t)}getDisplayNameForColumn(t,e){return this.columnModel.getDisplayNameForColumn(t,e)||""}getDisplayNameForColumnGroup(t,e){return this.columnModel.getDisplayNameForColumnGroup(t,e)||""}getColumn(t){return this.columnModel.getPrimaryColumn(t)}getColumns(){return this.columnModel.getAllPrimaryColumns()}applyColumnState(t){return this.columnModel.applyColumnState(t,"api")}getColumnState(){return this.columnModel.getColumnState()}resetColumnState(){this.columnModel.resetColumnState("api")}getColumnGroupState(){return this.columnModel.getColumnGroupState()}setColumnGroupState(t){this.columnModel.setColumnGroupState(t,"api")}resetColumnGroupState(){this.columnModel.resetColumnGroupState("api")}isPinning(){return this.columnModel.isPinningLeft()||this.columnModel.isPinningRight()}isPinningLeft(){return this.columnModel.isPinningLeft()}isPinningRight(){return this.columnModel.isPinningRight()}getDisplayedColAfter(t){return this.columnModel.getDisplayedColAfter(t)}getDisplayedColBefore(t){return this.columnModel.getDisplayedColBefore(t)}setColumnVisible(t,e){this.logDeprecation("v31.1","setColumnVisible(key,visible)","setColumnsVisible([key],visible)"),this.columnModel.setColumnsVisible([t],e,"api")}setColumnsVisible(t,e){this.columnModel.setColumnsVisible(t,e,"api")}setColumnPinned(t,e){this.logDeprecation("v31.1","setColumnPinned(key,pinned)","setColumnsPinned([key],pinned)"),this.columnModel.setColumnsPinned([t],e,"api")}setColumnsPinned(t,e){this.columnModel.setColumnsPinned(t,e,"api")}getAllGridColumns(){return this.columnModel.getAllGridColumns()}getDisplayedLeftColumns(){return this.columnModel.getDisplayedLeftColumns()}getDisplayedCenterColumns(){return this.columnModel.getDisplayedCenterColumns()}getDisplayedRightColumns(){return this.columnModel.getDisplayedRightColumns()}getAllDisplayedColumns(){return this.columnModel.getAllDisplayedColumns()}getAllDisplayedVirtualColumns(){return this.columnModel.getViewportColumns()}moveColumn(t,e){this.logDeprecation("v31.1","moveColumn(key, toIndex)","moveColumns([key], toIndex)"),this.columnModel.moveColumns([t],e,"api")}moveColumnByIndex(t,e){this.columnModel.moveColumnByIndex(t,e,"api")}moveColumns(t,e){this.columnModel.moveColumns(t,e,"api")}moveRowGroupColumn(t,e){this.columnModel.moveRowGroupColumn(t,e,"api")}setColumnAggFunc(t,e){this.columnModel.setColumnAggFunc(t,e,"api")}setColumnWidth(t,e,i=!0,o="api"){this.logDeprecation("v31.1","setColumnWidth(col, width)","setColumnWidths([{key: col, newWidth: width}])"),this.columnModel.setColumnWidths([{key:t,newWidth:e}],!1,i,o)}setColumnWidths(t,e=!0,i="api"){this.columnModel.setColumnWidths(t,!1,e,i)}isPivotMode(){return this.columnModel.isPivotMode()}getPivotResultColumn(t,e){return this.columnModel.getSecondaryPivotColumn(t,e)}setValueColumns(t){this.columnModel.setValueColumns(t,"api")}getValueColumns(){return this.columnModel.getValueColumns()}removeValueColumn(t){this.logDeprecation("v31.1","removeValueColumn(colKey)","removeValueColumns([colKey])"),this.columnModel.removeValueColumns([t],"api")}removeValueColumns(t){this.columnModel.removeValueColumns(t,"api")}addValueColumn(t){this.logDeprecation("v31.1","addValueColumn(colKey)","addValueColumns([colKey])"),this.columnModel.addValueColumns([t],"api")}addValueColumns(t){this.columnModel.addValueColumns(t,"api")}setRowGroupColumns(t){this.columnModel.setRowGroupColumns(t,"api")}removeRowGroupColumn(t){this.logDeprecation("v31.1","removeRowGroupColumn(colKey)","removeRowGroupColumns([colKey])"),this.columnModel.removeRowGroupColumns([t],"api")}removeRowGroupColumns(t){this.columnModel.removeRowGroupColumns(t,"api")}addRowGroupColumn(t){this.logDeprecation("v31.1","addRowGroupColumn(colKey)","addRowGroupColumns([colKey])"),this.columnModel.addRowGroupColumns([t],"api")}addRowGroupColumns(t){this.columnModel.addRowGroupColumns(t,"api")}getRowGroupColumns(){return this.columnModel.getRowGroupColumns()}setPivotColumns(t){this.columnModel.setPivotColumns(t,"api")}removePivotColumn(t){this.logDeprecation("v31.1","removePivotColumn(colKey)","removePivotColumns([colKey])"),this.columnModel.removePivotColumns([t],"api")}removePivotColumns(t){this.columnModel.removePivotColumns(t,"api")}addPivotColumn(t){this.logDeprecation("v31.1","addPivotColumn(colKey)","addPivotColumns([colKey])"),this.columnModel.addPivotColumns([t],"api")}addPivotColumns(t){this.columnModel.addPivotColumns(t,"api")}getPivotColumns(){return this.columnModel.getPivotColumns()}getLeftDisplayedColumnGroups(){return this.columnModel.getDisplayedTreeLeft()}getCenterDisplayedColumnGroups(){return this.columnModel.getDisplayedTreeCentre()}getRightDisplayedColumnGroups(){return this.columnModel.getDisplayedTreeRight()}getAllDisplayedColumnGroups(){return this.columnModel.getAllDisplayedTrees()}autoSizeColumn(t,e){return this.logDeprecation("v31.1","autoSizeColumn(key, skipHeader)","autoSizeColumns([key], skipHeader)"),this.columnModel.autoSizeColumns({columns:[t],skipHeader:e,source:"api"})}autoSizeColumns(t,e){this.columnModel.autoSizeColumns({columns:t,skipHeader:e,source:"api"})}autoSizeAllColumns(t){this.columnModel.autoSizeAllColumns("api",t)}setPivotResultColumns(t){this.columnModel.setSecondaryColumns(t,"api")}getPivotResultColumns(){return this.columnModel.getSecondaryColumns()}getState(){return this.stateService.getState()}getGridOption(t){return this.gos.get(t)}setGridOption(t,e){this.updateGridOptions({[t]:e})}updateGridOptions(t){this.gos.updateGridOptions({options:t})}__internalUpdateGridOptions(t,e){this.gos.updateGridOptions({options:t,force:e,source:"gridOptionsUpdated"})}deprecatedUpdateGridOption(t,e){q(`set${t.charAt(0).toUpperCase()}${t.slice(1,t.length)} is deprecated. Please use 'api.setGridOption('${t}', newValue)' or 'api.updateGridOptions({ ${t}: newValue })' instead.`),this.setGridOption(t,e)}setPivotMode(t){this.deprecatedUpdateGridOption("pivotMode",t)}setPinnedTopRowData(t){this.deprecatedUpdateGridOption("pinnedTopRowData",t)}setPinnedBottomRowData(t){this.deprecatedUpdateGridOption("pinnedBottomRowData",t)}setPopupParent(t){this.deprecatedUpdateGridOption("popupParent",t)}setSuppressModelUpdateAfterUpdateTransaction(t){this.deprecatedUpdateGridOption("suppressModelUpdateAfterUpdateTransaction",t)}setDataTypeDefinitions(t){this.deprecatedUpdateGridOption("dataTypeDefinitions",t)}setPagination(t){this.deprecatedUpdateGridOption("pagination",t)}paginationSetPageSize(t){this.deprecatedUpdateGridOption("paginationPageSize",t)}setSideBar(t){this.deprecatedUpdateGridOption("sideBar",t)}setSuppressClipboardPaste(t){this.deprecatedUpdateGridOption("suppressClipboardPaste",t)}setGroupRemoveSingleChildren(t){this.deprecatedUpdateGridOption("groupRemoveSingleChildren",t)}setGroupRemoveLowestSingleChildren(t){this.deprecatedUpdateGridOption("groupRemoveLowestSingleChildren",t)}setGroupDisplayType(t){this.deprecatedUpdateGridOption("groupDisplayType",t)}setGroupIncludeFooter(t){this.deprecatedUpdateGridOption("groupIncludeFooter",t)}setGroupIncludeTotalFooter(t){this.deprecatedUpdateGridOption("groupIncludeTotalFooter",t)}setRowClass(t){this.deprecatedUpdateGridOption("rowClass",t)}setDeltaSort(t){this.deprecatedUpdateGridOption("deltaSort",t)}setSuppressRowDrag(t){this.deprecatedUpdateGridOption("suppressRowDrag",t)}setSuppressMoveWhenRowDragging(t){this.deprecatedUpdateGridOption("suppressMoveWhenRowDragging",t)}setSuppressRowClickSelection(t){this.deprecatedUpdateGridOption("suppressRowClickSelection",t)}setEnableAdvancedFilter(t){this.deprecatedUpdateGridOption("enableAdvancedFilter",t)}setIncludeHiddenColumnsInAdvancedFilter(t){this.deprecatedUpdateGridOption("includeHiddenColumnsInAdvancedFilter",t)}setAdvancedFilterParent(t){this.deprecatedUpdateGridOption("advancedFilterParent",t)}setAdvancedFilterBuilderParams(t){this.deprecatedUpdateGridOption("advancedFilterBuilderParams",t)}setQuickFilter(t){q("setQuickFilter is deprecated. Please use 'api.setGridOption('quickFilterText', newValue)' or 'api.updateGridOptions({ quickFilterText: newValue })' instead."),this.gos.updateGridOptions({options:{quickFilterText:t}})}setExcludeHiddenColumnsFromQuickFilter(t){this.deprecatedUpdateGridOption("includeHiddenColumnsInQuickFilter",!t)}setIncludeHiddenColumnsInQuickFilter(t){this.deprecatedUpdateGridOption("includeHiddenColumnsInQuickFilter",t)}setQuickFilterParser(t){this.deprecatedUpdateGridOption("quickFilterParser",t)}setQuickFilterMatcher(t){this.deprecatedUpdateGridOption("quickFilterMatcher",t)}setAlwaysShowHorizontalScroll(t){this.deprecatedUpdateGridOption("alwaysShowHorizontalScroll",t)}setAlwaysShowVerticalScroll(t){this.deprecatedUpdateGridOption("alwaysShowVerticalScroll",t)}setFunctionsReadOnly(t){this.deprecatedUpdateGridOption("functionsReadOnly",t)}setColumnDefs(t,e="api"){q("setColumnDefs is deprecated. Please use 'api.setGridOption('columnDefs', newValue)' or 'api.updateGridOptions({ columnDefs: newValue })' instead."),this.gos.updateGridOptions({options:{columnDefs:t},source:e})}setAutoGroupColumnDef(t,e="api"){q("setAutoGroupColumnDef is deprecated. Please use 'api.setGridOption('autoGroupColumnDef', newValue)' or 'api.updateGridOptions({ autoGroupColumnDef: newValue })' instead."),this.gos.updateGridOptions({options:{autoGroupColumnDef:t},source:e})}setDefaultColDef(t,e="api"){q("setDefaultColDef is deprecated. Please use 'api.setGridOption('defaultColDef', newValue)' or 'api.updateGridOptions({ defaultColDef: newValue })' instead."),this.gos.updateGridOptions({options:{defaultColDef:t},source:e})}setColumnTypes(t,e="api"){q("setColumnTypes is deprecated. Please use 'api.setGridOption('columnTypes', newValue)' or 'api.updateGridOptions({ columnTypes: newValue })' instead."),this.gos.updateGridOptions({options:{columnTypes:t},source:e})}setTreeData(t){this.deprecatedUpdateGridOption("treeData",t)}setServerSideDatasource(t){this.deprecatedUpdateGridOption("serverSideDatasource",t)}setCacheBlockSize(t){this.deprecatedUpdateGridOption("cacheBlockSize",t)}setDatasource(t){this.deprecatedUpdateGridOption("datasource",t)}setViewportDatasource(t){this.deprecatedUpdateGridOption("viewportDatasource",t)}setRowData(t){this.deprecatedUpdateGridOption("rowData",t)}setEnableCellTextSelection(t){this.deprecatedUpdateGridOption("enableCellTextSelection",t)}setHeaderHeight(t){this.deprecatedUpdateGridOption("headerHeight",t)}setDomLayout(t){this.deprecatedUpdateGridOption("domLayout",t)}setFillHandleDirection(t){this.deprecatedUpdateGridOption("fillHandleDirection",t)}setGroupHeaderHeight(t){this.deprecatedUpdateGridOption("groupHeaderHeight",t)}setFloatingFiltersHeight(t){this.deprecatedUpdateGridOption("floatingFiltersHeight",t)}setPivotHeaderHeight(t){this.deprecatedUpdateGridOption("pivotHeaderHeight",t)}setPivotGroupHeaderHeight(t){this.deprecatedUpdateGridOption("pivotGroupHeaderHeight",t)}setAnimateRows(t){this.deprecatedUpdateGridOption("animateRows",t)}setIsExternalFilterPresent(t){this.deprecatedUpdateGridOption("isExternalFilterPresent",t)}setDoesExternalFilterPass(t){this.deprecatedUpdateGridOption("doesExternalFilterPass",t)}setNavigateToNextCell(t){this.deprecatedUpdateGridOption("navigateToNextCell",t)}setTabToNextCell(t){this.deprecatedUpdateGridOption("tabToNextCell",t)}setTabToNextHeader(t){this.deprecatedUpdateGridOption("tabToNextHeader",t)}setNavigateToNextHeader(t){this.deprecatedUpdateGridOption("navigateToNextHeader",t)}setRowGroupPanelShow(t){this.deprecatedUpdateGridOption("rowGroupPanelShow",t)}setGetGroupRowAgg(t){this.deprecatedUpdateGridOption("getGroupRowAgg",t)}setGetBusinessKeyForNode(t){this.deprecatedUpdateGridOption("getBusinessKeyForNode",t)}setGetChildCount(t){this.deprecatedUpdateGridOption("getChildCount",t)}setProcessRowPostCreate(t){this.deprecatedUpdateGridOption("processRowPostCreate",t)}setGetRowId(t){q("getRowId is a static property and can no longer be updated.")}setGetRowClass(t){this.deprecatedUpdateGridOption("getRowClass",t)}setIsFullWidthRow(t){this.deprecatedUpdateGridOption("isFullWidthRow",t)}setIsRowSelectable(t){this.deprecatedUpdateGridOption("isRowSelectable",t)}setIsRowMaster(t){this.deprecatedUpdateGridOption("isRowMaster",t)}setPostSortRows(t){this.deprecatedUpdateGridOption("postSortRows",t)}setGetDocument(t){this.deprecatedUpdateGridOption("getDocument",t)}setGetContextMenuItems(t){this.deprecatedUpdateGridOption("getContextMenuItems",t)}setGetMainMenuItems(t){this.deprecatedUpdateGridOption("getMainMenuItems",t)}setProcessCellForClipboard(t){this.deprecatedUpdateGridOption("processCellForClipboard",t)}setSendToClipboard(t){this.deprecatedUpdateGridOption("sendToClipboard",t)}setProcessCellFromClipboard(t){this.deprecatedUpdateGridOption("processCellFromClipboard",t)}setProcessPivotResultColDef(t){this.deprecatedUpdateGridOption("processPivotResultColDef",t)}setProcessPivotResultColGroupDef(t){this.deprecatedUpdateGridOption("processPivotResultColGroupDef",t)}setPostProcessPopup(t){this.deprecatedUpdateGridOption("postProcessPopup",t)}setInitialGroupOrderComparator(t){this.deprecatedUpdateGridOption("initialGroupOrderComparator",t)}setGetChartToolbarItems(t){this.deprecatedUpdateGridOption("getChartToolbarItems",t)}setPaginationNumberFormatter(t){this.deprecatedUpdateGridOption("paginationNumberFormatter",t)}setGetServerSideGroupLevelParams(t){this.deprecatedUpdateGridOption("getServerSideGroupLevelParams",t)}setIsServerSideGroupOpenByDefault(t){this.deprecatedUpdateGridOption("isServerSideGroupOpenByDefault",t)}setIsApplyServerSideTransaction(t){this.deprecatedUpdateGridOption("isApplyServerSideTransaction",t)}setIsServerSideGroup(t){this.deprecatedUpdateGridOption("isServerSideGroup",t)}setGetServerSideGroupKey(t){this.deprecatedUpdateGridOption("getServerSideGroupKey",t)}setGetRowStyle(t){this.deprecatedUpdateGridOption("getRowStyle",t)}setGetRowHeight(t){this.deprecatedUpdateGridOption("getRowHeight",t)}};g([v("rowRenderer")],ge.prototype,"rowRenderer",2);g([v("navigationService")],ge.prototype,"navigationService",2);g([v("filterManager")],ge.prototype,"filterManager",2);g([v("columnModel")],ge.prototype,"columnModel",2);g([v("selectionService")],ge.prototype,"selectionService",2);g([v("gridOptionsService")],ge.prototype,"gos",2);g([v("valueService")],ge.prototype,"valueService",2);g([v("alignedGridsService")],ge.prototype,"alignedGridsService",2);g([v("eventService")],ge.prototype,"eventService",2);g([v("pinnedRowModel")],ge.prototype,"pinnedRowModel",2);g([v("context")],ge.prototype,"context",2);g([v("rowModel")],ge.prototype,"rowModel",2);g([v("sortController")],ge.prototype,"sortController",2);g([v("paginationProxy")],ge.prototype,"paginationProxy",2);g([v("focusService")],ge.prototype,"focusService",2);g([v("dragAndDropService")],ge.prototype,"dragAndDropService",2);g([v("menuService")],ge.prototype,"menuService",2);g([v("valueCache")],ge.prototype,"valueCache",2);g([v("animationFrameService")],ge.prototype,"animationFrameService",2);g([v("ctrlsService")],ge.prototype,"ctrlsService",2);g([v("overlayService")],ge.prototype,"overlayService",2);g([v("stateService")],ge.prototype,"stateService",2);g([v("expansionService")],ge.prototype,"expansionService",2);g([v("apiEventService")],ge.prototype,"apiEventService",2);g([v("frameworkOverrides")],ge.prototype,"frameworkOverrides",2);g([v("undoRedoService")],ge.prototype,"undoRedoService",2);g([v("rowNodeBlockLoader")],ge.prototype,"rowNodeBlockLoader",2);g([Re("csvCreator")],ge.prototype,"csvCreator",2);g([Re("excelCreator")],ge.prototype,"excelCreator",2);g([Re("rangeService")],ge.prototype,"rangeService",2);g([Re("clipboardService")],ge.prototype,"clipboardService",2);g([Re("aggFuncService")],ge.prototype,"aggFuncService",2);g([Re("statusBarService")],ge.prototype,"statusBarService",2);g([Re("chartService")],ge.prototype,"chartService",2);g([Re("ssrmTransactionManager")],ge.prototype,"serverSideTransactionManager",2);g([Re("sideBarService")],ge.prototype,"sideBarService",2);g([I],ge.prototype,"init",1);ge=g([V("gridApi")],ge);var oi=class extends A{constructor(){super(...arguments),this.quickFilter=null,this.quickFilterParts=null}postConstruct(){this.addManagedListener(this.eventService,f.EVENT_COLUMN_PIVOT_MODE_CHANGED,()=>this.resetQuickFilterCache()),this.addManagedListener(this.eventService,f.EVENT_NEW_COLUMNS_LOADED,()=>this.resetQuickFilterCache()),this.addManagedListener(this.eventService,f.EVENT_COLUMN_ROW_GROUP_CHANGED,()=>this.resetQuickFilterCache()),this.addManagedListener(this.eventService,f.EVENT_COLUMN_VISIBLE,()=>{this.gos.get("includeHiddenColumnsInQuickFilter")||this.resetQuickFilterCache()}),this.addManagedPropertyListener("quickFilterText",t=>this.setQuickFilter(t.currentValue)),this.addManagedPropertyListeners(["includeHiddenColumnsInQuickFilter","applyQuickFilterBeforePivotOrAgg"],()=>this.onQuickFilterColumnConfigChanged()),this.quickFilter=this.parseQuickFilter(this.gos.get("quickFilterText")),this.parser=this.gos.get("quickFilterParser"),this.matcher=this.gos.get("quickFilterMatcher"),this.setQuickFilterParts(),this.addManagedPropertyListeners(["quickFilterMatcher","quickFilterParser"],()=>this.setQuickFilterParserAndMatcher())}isQuickFilterPresent(){return this.quickFilter!==null}doesRowPassQuickFilter(t){let e=this.gos.get("cacheQuickFilter");return this.matcher?this.doesRowPassQuickFilterMatcher(e,t):this.quickFilterParts.every(i=>e?this.doesRowPassQuickFilterCache(t,i):this.doesRowPassQuickFilterNoCache(t,i))}resetQuickFilterCache(){this.rowModel.forEachNode(t=>t.quickFilterAggregateText=null)}setQuickFilterParts(){let{quickFilter:t,parser:e}=this;t?this.quickFilterParts=e?e(t):t.split(" "):this.quickFilterParts=null}parseQuickFilter(t){return T(t)?this.gos.isRowModelType("clientSide")?t.toUpperCase():(console.warn("AG Grid - Quick filtering only works with the Client-Side Row Model"),null):null}setQuickFilter(t){if(t!=null&&typeof t!="string"){console.warn(`AG Grid - Grid option quickFilterText only supports string inputs, received: ${typeof t}`);return}let e=this.parseQuickFilter(t);this.quickFilter!==e&&(this.quickFilter=e,this.setQuickFilterParts(),this.dispatchEvent({type:oi.EVENT_QUICK_FILTER_CHANGED}))}setQuickFilterParserAndMatcher(){let t=this.gos.get("quickFilterParser"),e=this.gos.get("quickFilterMatcher"),i=t!==this.parser||e!==this.matcher;this.parser=t,this.matcher=e,i&&(this.setQuickFilterParts(),this.dispatchEvent({type:oi.EVENT_QUICK_FILTER_CHANGED}))}onQuickFilterColumnConfigChanged(){this.columnModel.refreshQuickFilterColumns(),this.resetQuickFilterCache(),this.isQuickFilterPresent()&&this.dispatchEvent({type:oi.EVENT_QUICK_FILTER_CHANGED})}doesRowPassQuickFilterNoCache(t,e){return this.columnModel.getAllColumnsForQuickFilter().some(o=>{let r=this.getQuickFilterTextForColumn(o,t);return T(r)&&r.indexOf(e)>=0})}doesRowPassQuickFilterCache(t,e){return this.checkGenerateQuickFilterAggregateText(t),t.quickFilterAggregateText.indexOf(e)>=0}doesRowPassQuickFilterMatcher(t,e){let i;t?(this.checkGenerateQuickFilterAggregateText(e),i=e.quickFilterAggregateText):i=this.getQuickFilterAggregateText(e);let{quickFilterParts:o,matcher:r}=this;return r(o,i)}checkGenerateQuickFilterAggregateText(t){t.quickFilterAggregateText||(t.quickFilterAggregateText=this.getQuickFilterAggregateText(t))}getQuickFilterTextForColumn(t,e){let i=this.valueService.getValue(t,e,!0),o=t.getColDef();if(o.getQuickFilterText){let r=this.gos.addGridCommonParams({value:i,node:e,data:e.data,column:t,colDef:o});i=o.getQuickFilterText(r)}return T(i)?i.toString().toUpperCase():null}getQuickFilterAggregateText(t){let e=[];return this.columnModel.getAllColumnsForQuickFilter().forEach(o=>{let r=this.getQuickFilterTextForColumn(o,t);T(r)&&e.push(r)}),e.join(oi.QUICK_FILTER_SEPARATOR)}};oi.EVENT_QUICK_FILTER_CHANGED="quickFilterChanged";oi.QUICK_FILTER_SEPARATOR=`
`;g([v("valueService")],oi.prototype,"valueService",2);g([v("columnModel")],oi.prototype,"columnModel",2);g([v("rowModel")],oi.prototype,"rowModel",2);g([I],oi.prototype,"postConstruct",1);oi=g([V("quickFilterService")],oi);var Pi=class extends A{constructor(){super(...arguments),this.allColumnFilters=new Map,this.allColumnListeners=new Map,this.activeAggregateFilters=[],this.activeColumnFilters=[],this.processingFilterChange=!1,this.filterModelUpdateQueue=[],this.columnFilterModelUpdateQueue=[],this.advancedFilterModelUpdateQueue=[]}init(){var t,e,i;this.addManagedListener(this.eventService,f.EVENT_GRID_COLUMNS_CHANGED,()=>this.onColumnsChanged()),this.addManagedListener(this.eventService,f.EVENT_COLUMN_VALUE_CHANGED,()=>this.refreshFiltersForAggregations()),this.addManagedListener(this.eventService,f.EVENT_COLUMN_PIVOT_CHANGED,()=>this.refreshFiltersForAggregations()),this.addManagedListener(this.eventService,f.EVENT_COLUMN_PIVOT_MODE_CHANGED,()=>this.refreshFiltersForAggregations()),this.addManagedListener(this.eventService,f.EVENT_NEW_COLUMNS_LOADED,()=>this.updateAdvancedFilterColumns()),this.addManagedListener(this.eventService,f.EVENT_COLUMN_VISIBLE,()=>this.updateAdvancedFilterColumns()),this.addManagedListener(this.eventService,f.EVENT_ROW_DATA_UPDATED,()=>this.onNewRowsLoaded("rowDataUpdated")),this.externalFilterPresent=this.isExternalFilterPresentCallback(),this.addManagedPropertyListeners(["isExternalFilterPresent","doesExternalFilterPass"],()=>{this.onFilterChanged({source:"api"})}),this.updateAggFiltering(),this.addManagedPropertyListener("groupAggFiltering",()=>{this.updateAggFiltering(),this.onFilterChanged()}),this.addManagedPropertyListener("advancedFilterModel",o=>this.setAdvancedFilterModel(o.currentValue)),this.addManagedListener(this.eventService,f.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,({enabled:o})=>this.onAdvancedFilterEnabledChanged(o)),this.addManagedListener(this.eventService,f.EVENT_DATA_TYPES_INFERRED,()=>this.processFilterModelUpdateQueue()),this.addManagedListener(this.quickFilterService,oi.EVENT_QUICK_FILTER_CHANGED,()=>this.onFilterChanged({source:"quickFilter"})),this.initialFilterModel=j({},(i=(e=(t=this.gos.get("initialState"))==null?void 0:t.filter)==null?void 0:e.filterModel)!=null?i:{})}isExternalFilterPresentCallback(){let t=this.gos.getCallback("isExternalFilterPresent");return typeof t=="function"?t({}):!1}doesExternalFilterPass(t){let e=this.gos.get("doesExternalFilterPass");return typeof e=="function"?e(t):!1}setFilterModel(t,e="api"){if(this.isAdvancedFilterEnabled()){this.warnAdvancedFilters();return}if(this.dataTypeService.isPendingInference()){this.filterModelUpdateQueue.push({model:t,source:e});return}let i=[],o=this.getFilterModel();if(t){let r=ov(Object.keys(t));this.allColumnFilters.forEach((n,s)=>{let a=t[s];i.push(this.setModelOnFilterWrapper(n.filterPromise,a)),r.delete(s)}),r.forEach(n=>{let s=this.columnModel.getPrimaryColumn(n)||this.columnModel.getGridColumn(n);if(!s){console.warn("AG Grid: setFilterModel() - no column found for colId: "+n);return}if(!s.isFilterAllowed()){console.warn("AG Grid: setFilterModel() - unable to fully apply model, filtering disabled for colId: "+n);return}let a=this.getOrCreateFilterWrapper(s,"NO_UI");if(!a){console.warn("AG-Grid: setFilterModel() - unable to fully apply model, unable to create filter for colId: "+n);return}i.push(this.setModelOnFilterWrapper(a.filterPromise,t[n]))})}else this.allColumnFilters.forEach(r=>{i.push(this.setModelOnFilterWrapper(r.filterPromise,null))});ri.all(i).then(()=>{let r=this.getFilterModel(),n=[];this.allColumnFilters.forEach((s,a)=>{let l=o?o[a]:null,d=r?r[a]:null;ce.jsonEquals(l,d)||n.push(s.column)}),n.length>0&&this.onFilterChanged({columns:n,source:e})})}setModelOnFilterWrapper(t,e){return new ri(i=>{t.then(o=>{typeof o.setModel!="function"&&(console.warn("AG Grid: filter missing setModel method, which is needed for setFilterModel"),i()),(o.setModel(e)||ri.resolve()).then(()=>i())})})}getFilterModel(){let t={};return this.allColumnFilters.forEach((e,i)=>{let o=this.getModelFromFilterWrapper(e);T(o)&&(t[i]=o)}),t}getModelFromFilterWrapper(t){var e;let o=t.filterPromise.resolveNow(null,r=>r);return o==null?(e=this.initialFilterModel[t.column.getColId()])!=null?e:null:typeof o.getModel!="function"?(console.warn("AG Grid: filter API missing getModel method, which is needed for getFilterModel"),null):o.getModel()}isColumnFilterPresent(){return this.activeColumnFilters.length>0}isAggregateFilterPresent(){return!!this.activeAggregateFilters.length}isExternalFilterPresent(){return this.externalFilterPresent}isChildFilterPresent(){return this.isColumnFilterPresent()||this.isQuickFilterPresent()||this.isExternalFilterPresent()||this.isAdvancedFilterPresent()}isAdvancedFilterPresent(){return this.isAdvancedFilterEnabled()&&this.advancedFilterService.isFilterPresent()}onAdvancedFilterEnabledChanged(t){var e;t?this.allColumnFilters.size&&(this.allColumnFilters.forEach(i=>this.disposeFilterWrapper(i,"advancedFilterEnabled")),this.onFilterChanged({source:"advancedFilter"})):(e=this.advancedFilterService)!=null&&e.isFilterPresent()&&(this.advancedFilterService.setModel(null),this.onFilterChanged({source:"advancedFilter"}))}isAdvancedFilterEnabled(){var t;return!!((t=this.advancedFilterService)!=null&&t.isEnabled())}isAdvancedFilterHeaderActive(){return this.isAdvancedFilterEnabled()&&this.advancedFilterService.isHeaderActive()}doAggregateFiltersPass(t,e){return this.doColumnFiltersPass(t,e,!0)}updateActiveFilters(){this.activeColumnFilters.length=0,this.activeAggregateFilters.length=0;let t=o=>o?o.isFilterActive?o.isFilterActive():(console.warn("AG Grid: Filter is missing isFilterActive() method"),!1):!1,e=!!this.gos.getGroupAggFiltering(),i=o=>{if(!o.isPrimary())return!0;let n=!this.columnModel.isPivotActive();return!o.isValueActive()||!n?!1:this.columnModel.isPivotMode()?!0:e};this.allColumnFilters.forEach(o=>{if(o.filterPromise.resolveNow(!1,t)){let r=o.filterPromise.resolveNow(null,n=>n);i(o.column)?this.activeAggregateFilters.push(r):this.activeColumnFilters.push(r)}})}updateFilterFlagInColumns(t,e){this.allColumnFilters.forEach(i=>{let o=i.filterPromise.resolveNow(!1,r=>r.isFilterActive());i.column.setFilterActive(o,t,e)})}isAnyFilterPresent(){return this.isQuickFilterPresent()||this.isColumnFilterPresent()||this.isAggregateFilterPresent()||this.isExternalFilterPresent()||this.isAdvancedFilterPresent()}doColumnFiltersPass(t,e,i){let{data:o,aggData:r}=t,n=i?this.activeAggregateFilters:this.activeColumnFilters,s=i?r:o;for(let a=0;a<n.length;a++){let l=n[a];if(!(l==null||l===e)){if(typeof l.doesFilterPass!="function")throw new Error("Filter is missing method doesFilterPass");if(!l.doesFilterPass({node:t,data:s}))return!1}}return!0}resetQuickFilterCache(){this.quickFilterService.resetQuickFilterCache()}refreshFiltersForAggregations(){this.gos.getGroupAggFiltering()&&this.onFilterChanged()}callOnFilterChangedOutsideRenderCycle(t){let e=()=>this.onFilterChanged(t);this.rowRenderer.isRefreshInProgress()?setTimeout(e,0):e()}onFilterChanged(t={}){let{source:e,filterInstance:i,additionalEventAttributes:o,columns:r}=t;this.updateDependantFilters(),this.updateActiveFilters(),this.updateFilterFlagInColumns("filterChanged",o),this.externalFilterPresent=this.isExternalFilterPresentCallback(),this.allColumnFilters.forEach(s=>{s.filterPromise&&s.filterPromise.then(a=>{a&&a!==i&&a.onAnyFilterChanged&&a.onAnyFilterChanged()})});let n={source:e,type:f.EVENT_FILTER_CHANGED,columns:r||[]};o&&ei(n,o),this.processingFilterChange=!0,this.eventService.dispatchEvent(n),this.processingFilterChange=!1}isSuppressFlashingCellsBecauseFiltering(){var t;return!((t=this.gos.get("allowShowChangeAfterFilter"))!=null?t:!1)&&this.processingFilterChange}isQuickFilterPresent(){return this.quickFilterService.isQuickFilterPresent()}updateAggFiltering(){this.aggFiltering=!!this.gos.getGroupAggFiltering()}isAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&this.shouldApplyQuickFilterAfterAgg()}isNonAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&!this.shouldApplyQuickFilterAfterAgg()}shouldApplyQuickFilterAfterAgg(){return(this.aggFiltering||this.columnModel.isPivotMode())&&!this.gos.get("applyQuickFilterBeforePivotOrAgg")}doesRowPassOtherFilters(t,e){return this.doesRowPassFilter({rowNode:e,filterInstanceToSkip:t})}doesRowPassAggregateFilters(t){return!(this.isAggregateQuickFilterPresent()&&!this.quickFilterService.doesRowPassQuickFilter(t.rowNode)||this.isAggregateFilterPresent()&&!this.doAggregateFiltersPass(t.rowNode,t.filterInstanceToSkip))}doesRowPassFilter(t){return!(this.isNonAggregateQuickFilterPresent()&&!this.quickFilterService.doesRowPassQuickFilter(t.rowNode)||this.isExternalFilterPresent()&&!this.doesExternalFilterPass(t.rowNode)||this.isColumnFilterPresent()&&!this.doColumnFiltersPass(t.rowNode,t.filterInstanceToSkip)||this.isAdvancedFilterPresent()&&!this.advancedFilterService.doesFilterPass(t.rowNode))}onNewRowsLoaded(t){this.allColumnFilters.forEach(e=>{e.filterPromise.then(i=>{i.onNewRowsLoaded&&i.onNewRowsLoaded()})}),this.updateFilterFlagInColumns(t,{afterDataChange:!0}),this.updateActiveFilters()}createValueGetter(t){return({node:e})=>this.valueService.getValue(t,e,!0)}createGetValue(t){return(e,i)=>{let o=i?this.columnModel.getGridColumn(i):t;return o?this.valueService.getValue(o,e,!0):void 0}}getFilterComponent(t,e,i=!0){var o;if(i)return((o=this.getOrCreateFilterWrapper(t,e))==null?void 0:o.filterPromise)||null;let r=this.cachedFilter(t);return r?r.filterPromise:null}isFilterActive(t){let e=this.cachedFilter(t);return!!e&&e.filterPromise.resolveNow(!1,i=>i.isFilterActive())}getOrCreateFilterWrapper(t,e){if(!t.isFilterAllowed())return null;let i=this.cachedFilter(t);return i||(i=this.createFilterWrapper(t,e),this.setColumnFilterWrapper(t,i)),i}cachedFilter(t){return this.allColumnFilters.get(t.getColId())}getDefaultFilter(t){let e;if(De.__isRegistered("@ag-grid-enterprise/set-filter",this.context.getGridId()))e="agSetColumnFilter";else{let i=this.dataTypeService.getBaseDataType(t);i==="number"?e="agNumberColumnFilter":i==="date"||i==="dateString"?e="agDateColumnFilter":e="agTextColumnFilter"}return e}getDefaultFloatingFilter(t){let e;if(De.__isRegistered("@ag-grid-enterprise/set-filter",this.context.getGridId()))e="agSetColumnFloatingFilter";else{let i=this.dataTypeService.getBaseDataType(t);i==="number"?e="agNumberColumnFloatingFilter":i==="date"||i==="dateString"?e="agDateColumnFloatingFilter":e="agTextColumnFloatingFilter"}return e}createFilterInstance(t){let e=this.getDefaultFilter(t),i=t.getColDef(),o,r=He(j({},this.createFilterParams(t,i)),{filterModifiedCallback:()=>this.filterModifiedCallbackFactory(o,t)(),filterChangedCallback:s=>this.filterChangedCallbackFactory(o,t)(s),doesRowPassOtherFilter:s=>this.doesRowPassOtherFilters(o,s)}),n=this.userComponentFactory.getFilterDetails(i,r,e);return n?{filterPromise:()=>{let s=n.newAgStackInstance();return s&&s.then(a=>o=a),s},compDetails:n}:{filterPromise:null,compDetails:null}}createFilterParams(t,e){return this.gos.addGridCommonParams({column:t,colDef:Mm(e),rowModel:this.rowModel,filterChangedCallback:()=>{},filterModifiedCallback:()=>{},valueGetter:this.createValueGetter(t),getValue:this.createGetValue(t),doesRowPassOtherFilter:()=>!0})}createFilterWrapper(t,e){var i;let o={column:t,filterPromise:null,compiledElement:null,compDetails:null},{filterPromise:r,compDetails:n}=this.createFilterInstance(t);return o.filterPromise=(i=r?.())!=null?i:null,o.compDetails=n,o}onColumnsChanged(){let t=[];this.allColumnFilters.forEach((e,i)=>{let o;e.column.isPrimary()?o=this.columnModel.getPrimaryColumn(i):o=this.columnModel.getGridColumn(i),!(o&&o===e.column)&&(t.push(e.column),this.disposeFilterWrapper(e,"columnChanged"),this.disposeColumnListener(i))}),t.length>0?this.onFilterChanged({columns:t,source:"api"}):this.updateDependantFilters()}updateDependantFilters(){let t=this.columnModel.getGroupAutoColumns();t?.forEach(e=>{e.getColDef().filter==="agGroupColumnFilter"&&this.getOrCreateFilterWrapper(e,"NO_UI")})}isFilterAllowed(t){var e,i;if(this.isAdvancedFilterEnabled()||!t.isFilterAllowed())return!1;let r=this.allColumnFilters.get(t.getColId());return(i=(e=r?.filterPromise)==null?void 0:e.resolveNow(!0,n=>typeof n?.isFilterAllowed=="function"?n?.isFilterAllowed():!0))!=null?i:!0}getFloatingFilterCompDetails(t,e){let i=l=>{let d=this.getFilterComponent(t,"NO_UI");d?.then(c=>{l(wn(c))})},o=t.getColDef(),r=He(j({},this.createFilterParams(t,o)),{filterChangedCallback:()=>i(l=>this.filterChangedCallbackFactory(l,t)())}),n=this.userComponentFactory.mergeParamsWithApplicationProvidedParams(o,pm,r),s=this.userComponentFactory.getDefaultFloatingFilterType(o,()=>this.getDefaultFloatingFilter(t));s==null&&(s="agReadOnlyFloatingFilter");let a={column:t,filterParams:n,currentParentModel:()=>this.getCurrentFloatingFilterParentModel(t),parentFilterInstance:i,showParentFilter:e,suppressFilterButton:!1};return this.userComponentFactory.getFloatingFilterCompDetails(o,a,s)}getCurrentFloatingFilterParentModel(t){let e=this.getFilterComponent(t,"NO_UI",!1);return e?e.resolveNow(null,i=>i&&i.getModel()):null}destroyFilter(t,e="api"){let i=t.getColId(),o=this.allColumnFilters.get(i);this.disposeColumnListener(i),delete this.initialFilterModel[i],o&&(this.disposeFilterWrapper(o,e),this.onFilterChanged({columns:[t],source:"api"}))}disposeColumnListener(t){let e=this.allColumnListeners.get(t);e&&(this.allColumnListeners.delete(t),e())}disposeFilterWrapper(t,e){t.filterPromise.then(i=>{this.getContext().destroyBean(i),t.column.setFilterActive(!1,"filterDestroyed"),this.allColumnFilters.delete(t.column.getColId());let o={type:f.EVENT_FILTER_DESTROYED,source:e,column:t.column};this.eventService.dispatchEvent(o)})}filterModifiedCallbackFactory(t,e){return()=>{let i={type:f.EVENT_FILTER_MODIFIED,column:e,filterInstance:t};this.eventService.dispatchEvent(i)}}filterChangedCallbackFactory(t,e){return i=>{var o;let r=(o=i?.source)!=null?o:"api",n={filter:t,additionalEventAttributes:i,columns:[e],source:r};this.callOnFilterChangedOutsideRenderCycle(n)}}checkDestroyFilter(t){let e=this.allColumnFilters.get(t);if(!e)return;let i=e.column,{compDetails:o}=i.isFilterAllowed()?this.createFilterInstance(i):{compDetails:null};if(this.areFilterCompsDifferent(e.compDetails,o)){this.destroyFilter(i,"paramsUpdated");return}let r=i.getColDef().filterParams;if(!e.filterPromise){this.destroyFilter(i,"paramsUpdated");return}e.filterPromise.then(n=>{(n?.refresh?n.refresh(j(He(j({},this.createFilterParams(i,i.getColDef())),{filterModifiedCallback:this.filterModifiedCallbackFactory(n,i),filterChangedCallback:this.filterChangedCallbackFactory(n,i),doesRowPassOtherFilter:a=>this.doesRowPassOtherFilters(n,a)}),r)):!0)===!1&&this.destroyFilter(i,"paramsUpdated")})}setColumnFilterWrapper(t,e){let i=t.getColId();this.allColumnFilters.set(i,e),this.allColumnListeners.set(i,this.addManagedListener(t,ke.EVENT_COL_DEF_CHANGED,()=>this.checkDestroyFilter(i)))}areFilterCompsDifferent(t,e){if(!e||!t)return!0;let{componentClass:i}=t,{componentClass:o}=e;return!(i===o||i?.render&&o?.render&&i.render===o.render)}getAdvancedFilterModel(){return this.isAdvancedFilterEnabled()?this.advancedFilterService.getModel():null}setAdvancedFilterModel(t){if(this.isAdvancedFilterEnabled()){if(this.dataTypeService.isPendingInference()){this.advancedFilterModelUpdateQueue.push(t);return}this.advancedFilterService.setModel(t??null),this.onFilterChanged({source:"advancedFilter"})}}showAdvancedFilterBuilder(t){this.isAdvancedFilterEnabled()&&this.advancedFilterService.getCtrl().toggleFilterBuilder(t,!0)}updateAdvancedFilterColumns(){this.isAdvancedFilterEnabled()&&this.advancedFilterService.updateValidity()&&this.onFilterChanged({source:"advancedFilter"})}hasFloatingFilters(){return this.isAdvancedFilterEnabled()?!1:this.columnModel.getAllGridColumns().some(e=>e.getColDef().floatingFilter)}getFilterInstance(t,e){if(this.isAdvancedFilterEnabled()){this.warnAdvancedFilters();return}let i=this.getFilterInstanceImpl(t,r=>{if(!e)return;let n=wn(r);e(n)});return wn(i)}getColumnFilterInstance(t){return new Promise(e=>{this.getFilterInstance(t,i=>{e(i)})})}getFilterInstanceImpl(t,e){let i=this.columnModel.getPrimaryColumn(t);if(!i)return;let o=this.getFilterComponent(i,"NO_UI"),r=o&&o.resolveNow(null,n=>n);return r?setTimeout(e,0,r):o&&o.then(n=>{e(n)}),r}warnAdvancedFilters(){q("Column Filter API methods have been disabled as Advanced Filters are enabled.")}setupAdvancedFilterHeaderComp(t){var e;(e=this.advancedFilterService)==null||e.getCtrl().setupHeaderComp(t)}getHeaderRowCount(){return this.isAdvancedFilterHeaderActive()?1:0}getHeaderHeight(){return this.isAdvancedFilterHeaderActive()?this.advancedFilterService.getCtrl().getHeaderHeight():0}processFilterModelUpdateQueue(){this.filterModelUpdateQueue.forEach(({model:t,source:e})=>this.setFilterModel(t,e)),this.filterModelUpdateQueue=[],this.columnFilterModelUpdateQueue.forEach(({key:t,model:e,resolve:i})=>{this.setColumnFilterModel(t,e).then(()=>i())}),this.columnFilterModelUpdateQueue=[],this.advancedFilterModelUpdateQueue.forEach(t=>this.setAdvancedFilterModel(t)),this.advancedFilterModelUpdateQueue=[]}getColumnFilterModel(t){let e=this.getFilterWrapper(t);return e?this.getModelFromFilterWrapper(e):null}setColumnFilterModel(t,e){if(this.isAdvancedFilterEnabled())return this.warnAdvancedFilters(),Promise.resolve();if(this.dataTypeService.isPendingInference()){let n=()=>{},s=new Promise(a=>{n=a});return this.columnFilterModelUpdateQueue.push({key:t,model:e,resolve:n}),s}let i=this.columnModel.getPrimaryColumn(t),o=i?this.getOrCreateFilterWrapper(i,"NO_UI"):null;return o?(n=>new Promise(s=>{n.then(a=>s(a))}))(this.setModelOnFilterWrapper(o.filterPromise,e)):Promise.resolve()}getFilterWrapper(t){var e;let i=this.columnModel.getPrimaryColumn(t);return i&&(e=this.cachedFilter(i))!=null?e:null}destroy(){super.destroy(),this.allColumnFilters.forEach(t=>this.disposeFilterWrapper(t,"gridDestroyed")),this.allColumnListeners.clear()}};g([v("valueService")],Pi.prototype,"valueService",2);g([v("columnModel")],Pi.prototype,"columnModel",2);g([v("rowModel")],Pi.prototype,"rowModel",2);g([v("userComponentFactory")],Pi.prototype,"userComponentFactory",2);g([v("rowRenderer")],Pi.prototype,"rowRenderer",2);g([v("dataTypeService")],Pi.prototype,"dataTypeService",2);g([v("quickFilterService")],Pi.prototype,"quickFilterService",2);g([Re("advancedFilterService")],Pi.prototype,"advancedFilterService",2);g([I],Pi.prototype,"init",1);Pi=g([V("filterManager")],Pi);var Oh=class extends J{constructor(t,e){super('<div class="ag-filter"></div>'),this.column=t,this.source=e,this.filterWrapper=null}postConstruct(){this.createFilter(!0),this.addManagedListener(this.eventService,f.EVENT_FILTER_DESTROYED,this.onFilterDestroyed.bind(this))}hasFilter(){return!!this.filterWrapper}getFilter(){var t,e;return(e=(t=this.filterWrapper)==null?void 0:t.filterPromise)!=null?e:null}afterInit(){var t,e,i;return(i=(e=(t=this.filterWrapper)==null?void 0:t.filterPromise)==null?void 0:e.then(()=>{}))!=null?i:ri.resolve()}afterGuiAttached(t){var e,i;(i=(e=this.filterWrapper)==null?void 0:e.filterPromise)==null||i.then(o=>{var r;(r=o?.afterGuiAttached)==null||r.call(o,t)})}afterGuiDetached(){var t,e;(e=(t=this.filterWrapper)==null?void 0:t.filterPromise)==null||e.then(i=>{var o;(o=i?.afterGuiDetached)==null||o.call(i)})}createFilter(t){var e;let{column:i,source:o}=this;this.filterWrapper=this.filterManager.getOrCreateFilterWrapper(i,o),(e=this.filterWrapper)!=null&&e.filterPromise&&this.filterWrapper.filterPromise.then(r=>{let n=r.getGui();if(T(n)||console.warn(`AG Grid: getGui method from filter returned ${n}, it should be a DOM element or an HTML template string.`),typeof n=="string"&&(n=ii(n)),this.appendChild(n),t){let s={type:f.EVENT_FILTER_OPENED,column:i,source:o,eGui:this.getGui()};this.eventService.dispatchEvent(s)}})}onFilterDestroyed(t){(t.source==="api"||t.source==="paramsUpdated")&&t.column.getId()===this.column.getId()&&this.columnModel.getPrimaryColumn(this.column)&&(Je(this.getGui()),this.createFilter())}destroy(){this.filterWrapper=null,super.destroy()}};g([v("filterManager")],Oh.prototype,"filterManager",2);g([v("columnModel")],Oh.prototype,"columnModel",2);g([I],Oh.prototype,"postConstruct",1);var fv=class extends J{constructor(t,e){super(t),this.ctrl=e}getCtrl(){return this.ctrl}},Wn=class Z_ extends fv{constructor(e){super(Z_.TEMPLATE,e)}postConstruct(){let e=this.getGui(),i={addOrRemoveCssClass:(o,r)=>this.addOrRemoveCssClass(o,r),addOrRemoveBodyCssClass:(o,r)=>this.eFloatingFilterBody.classList.toggle(o,r),setButtonWrapperDisplayed:o=>me(this.eButtonWrapper,o),setCompDetails:o=>this.setCompDetails(o),getFloatingFilterComp:()=>this.compPromise,setWidth:o=>e.style.width=o,setMenuIcon:o=>this.eButtonShowMainFilter.appendChild(o)};this.ctrl.setComp(i,e,this.eButtonShowMainFilter,this.eFloatingFilterBody)}setCompDetails(e){if(!e){this.destroyFloatingFilterComp(),this.compPromise=null;return}this.compPromise=e.newAgStackInstance(),this.compPromise.then(i=>this.afterCompCreated(i))}destroyFloatingFilterComp(){this.floatingFilterComp&&(this.eFloatingFilterBody.removeChild(this.floatingFilterComp.getGui()),this.floatingFilterComp=this.destroyBean(this.floatingFilterComp))}afterCompCreated(e){if(e){if(!this.isAlive()){this.destroyBean(e);return}this.destroyFloatingFilterComp(),this.floatingFilterComp=e,this.eFloatingFilterBody.appendChild(e.getGui()),e.afterGuiAttached&&e.afterGuiAttached()}}};Wn.TEMPLATE=`<div class="ag-header-cell ag-floating-filter" role="gridcell">
            <div ref="eFloatingFilterBody" role="presentation"></div>
            <div class="ag-floating-filter-button ag-hidden" ref="eButtonWrapper" role="presentation">
                <button type="button" class="ag-button ag-floating-filter-button-button" ref="eButtonShowMainFilter" tabindex="-1"></button>
            </div>
        </div>`;g([k("eFloatingFilterBody")],Wn.prototype,"eFloatingFilterBody",2);g([k("eButtonWrapper")],Wn.prototype,"eButtonWrapper",2);g([k("eButtonShowMainFilter")],Wn.prototype,"eButtonShowMainFilter",2);g([I],Wn.prototype,"postConstruct",1);g([Kt],Wn.prototype,"destroyFloatingFilterComp",1);var FO=Wn;var kh=class extends A{constructor(t){super(),this.view=t}postConstruct(){this.addManagedPropertyListener("domLayout",this.updateLayoutClasses.bind(this)),this.updateLayoutClasses()}updateLayoutClasses(){let t=this.getDomLayout(),e={autoHeight:t==="autoHeight",normal:t==="normal",print:t==="print"},i=e.autoHeight?"ag-layout-auto-height":e.print?"ag-layout-print":"ag-layout-normal";this.view.updateLayoutClasses(i,e)}getDomLayout(){var t;let e=(t=this.gos.get("domLayout"))!=null?t:"normal";return["normal","print","autoHeight"].indexOf(e)===-1?(q(`${e} is not valid for DOM Layout, valid values are 'normal', 'autoHeight', 'print'.`),"normal"):e}};g([I],kh.prototype,"postConstruct",1);var Wo=class extends A{constructor(t){super(),this.lastScrollSource=[null,null],this.scrollLeft=-1,this.nextScrollTop=-1,this.scrollTop=-1,this.lastOffsetHeight=-1,this.lastScrollTop=-1,this.eBodyViewport=t,this.resetLastHScrollDebounced=Ut(()=>this.lastScrollSource[1]=null,500),this.resetLastVScrollDebounced=Ut(()=>this.lastScrollSource[0]=null,500)}postConstruct(){this.enableRtl=this.gos.get("enableRtl"),this.addManagedListener(this.eventService,f.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onDisplayedColumnsWidthChanged.bind(this)),this.ctrlsService.whenReady(t=>{this.centerRowsCtrl=t.center,this.onDisplayedColumnsWidthChanged(),this.addScrollListener()})}addScrollListener(){let{fakeHScrollComp:t,fakeVScrollComp:e}=this.ctrlsService.getParams();this.addManagedListener(this.centerRowsCtrl.getViewportElement(),"scroll",this.onHScroll.bind(this)),t.onScrollCallback(this.onFakeHScroll.bind(this));let i=this.gos.get("debounceVerticalScrollbar"),o=i?Ut(this.onVScroll.bind(this),100):this.onVScroll.bind(this),r=i?Ut(this.onFakeVScroll.bind(this),100):this.onFakeVScroll.bind(this);this.addManagedListener(this.eBodyViewport,"scroll",o),e.onScrollCallback(r)}onDisplayedColumnsWidthChanged(){this.enableRtl&&this.horizontallyScrollHeaderCenterAndFloatingCenter()}horizontallyScrollHeaderCenterAndFloatingCenter(t){if(this.centerRowsCtrl==null)return;t===void 0&&(t=this.centerRowsCtrl.getCenterViewportScrollLeft());let i=this.enableRtl?t:-t,{topCenter:o,stickyTopCenter:r,stickyBottomCenter:n,centerHeader:s,bottomCenter:a,fakeHScrollComp:l}=this.ctrlsService.getParams();s.setHorizontalScroll(-i),a.setContainerTranslateX(i),o.setContainerTranslateX(i),r.setContainerTranslateX(i),n.setContainerTranslateX(i);let d=this.centerRowsCtrl.getViewportElement(),c=this.lastScrollSource[1]===0;t=Math.abs(t),c?l.setScrollPosition(t):pd(d,t,this.enableRtl)}isControllingScroll(t,e){return this.lastScrollSource[e]==null?(this.lastScrollSource[e]=t,!0):this.lastScrollSource[e]===t}onFakeHScroll(){this.isControllingScroll(1,1)&&this.onHScrollCommon(1)}onHScroll(){this.isControllingScroll(0,1)&&this.onHScrollCommon(0)}onHScrollCommon(t){let e=this.centerRowsCtrl.getViewportElement(),{scrollLeft:i}=e;if(this.shouldBlockScrollUpdate(1,i,!0))return;let o;t===0?o=gd(e,this.enableRtl):o=this.ctrlsService.get("fakeHScrollComp").getScrollPosition(),this.doHorizontalScroll(Math.round(o)),this.resetLastHScrollDebounced()}onFakeVScroll(){this.isControllingScroll(1,0)&&this.onVScrollCommon(1)}onVScroll(){this.isControllingScroll(0,0)&&this.onVScrollCommon(0)}onVScrollCommon(t){let e;t===0?e=this.eBodyViewport.scrollTop:e=this.ctrlsService.get("fakeVScrollComp").getScrollPosition(),!this.shouldBlockScrollUpdate(0,e,!0)&&(this.animationFrameService.setScrollTop(e),this.nextScrollTop=e,t===0?this.ctrlsService.get("fakeVScrollComp").setScrollPosition(e):this.eBodyViewport.scrollTop=e,this.gos.get("suppressAnimationFrame")?this.scrollGridIfNeeded():this.animationFrameService.schedule(),this.resetLastVScrollDebounced())}doHorizontalScroll(t){let e=this.ctrlsService.get("fakeHScrollComp").getScrollPosition();this.scrollLeft===t&&t===e||(this.scrollLeft=t,this.fireScrollEvent(1),this.horizontallyScrollHeaderCenterAndFloatingCenter(t),this.centerRowsCtrl.onHorizontalViewportChanged(!0))}fireScrollEvent(t){let e={type:f.EVENT_BODY_SCROLL,direction:t===1?"horizontal":"vertical",left:this.scrollLeft,top:this.scrollTop};this.eventService.dispatchEvent(e),window.clearTimeout(this.scrollTimer),this.scrollTimer=void 0,this.scrollTimer=window.setTimeout(()=>{let i=He(j({},e),{type:f.EVENT_BODY_SCROLL_END});this.eventService.dispatchEvent(i)},100)}shouldBlockScrollUpdate(t,e,i=!1){return i&&!Vo()?!1:t===0?this.shouldBlockVerticalScroll(e):this.shouldBlockHorizontalScroll(e)}shouldBlockVerticalScroll(t){let e=kd(this.eBodyViewport),{scrollHeight:i}=this.eBodyViewport;return t<0||t+e>i}shouldBlockHorizontalScroll(t){let e=this.centerRowsCtrl.getCenterWidth(),{scrollWidth:i}=this.centerRowsCtrl.getViewportElement();if(this.enableRtl&&hd()){if(t>0)return!0}else if(t<0)return!0;return Math.abs(t)+e>i}redrawRowsAfterScroll(){this.fireScrollEvent(0)}checkScrollLeft(){this.scrollLeft!==this.centerRowsCtrl.getCenterViewportScrollLeft()&&this.onHScrollCommon(0)}scrollGridIfNeeded(){let t=this.scrollTop!=this.nextScrollTop;return t&&(this.scrollTop=this.nextScrollTop,this.redrawRowsAfterScroll()),t}setHorizontalScrollPosition(t,e=!1){let o=this.centerRowsCtrl.getViewportElement().scrollWidth-this.centerRowsCtrl.getCenterWidth();!e&&this.shouldBlockScrollUpdate(1,t)&&(this.enableRtl&&hd()?t=t>0?0:o:t=Math.min(Math.max(t,0),o)),pd(this.centerRowsCtrl.getViewportElement(),Math.abs(t),this.enableRtl),this.doHorizontalScroll(t)}setVerticalScrollPosition(t){this.eBodyViewport.scrollTop=t}getVScrollPosition(){return this.lastScrollTop=this.eBodyViewport.scrollTop,this.lastOffsetHeight=this.eBodyViewport.offsetHeight,{top:this.lastScrollTop,bottom:this.lastScrollTop+this.lastOffsetHeight}}getApproximateVScollPosition(){return this.lastScrollTop>=0&&this.lastOffsetHeight>=0?{top:this.scrollTop,bottom:this.scrollTop+this.lastOffsetHeight}:this.getVScrollPosition()}getHScrollPosition(){return this.centerRowsCtrl.getHScrollPosition()}isHorizontalScrollShowing(){return this.centerRowsCtrl.isHorizontalScrollShowing()}scrollHorizontally(t){let e=this.centerRowsCtrl.getViewportElement().scrollLeft;return this.setHorizontalScrollPosition(e+t),this.centerRowsCtrl.getViewportElement().scrollLeft-e}scrollToTop(){this.eBodyViewport.scrollTop=0}ensureNodeVisible(t,e=null){let i=this.rowModel.getRowCount(),o=-1;for(let r=0;r<i;r++){let n=this.rowModel.getRow(r);if(typeof t=="function"){if(n&&t(n)){o=r;break}}else if(t===n||t===n.data){o=r;break}}o>=0&&this.ensureIndexVisible(o,e)}ensureIndexVisible(t,e){if(this.gos.isDomLayout("print"))return;let i=this.paginationProxy.getRowCount();if(typeof t!="number"||t<0||t>=i){console.warn("AG Grid: Invalid row index for ensureIndexVisible: "+t);return}let r=this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel");this.getFrameworkOverrides().wrapIncoming(()=>{r||this.paginationProxy.goToPageWithIndex(t);let n=this.ctrlsService.getGridBodyCtrl(),s=n.getStickyTopHeight(),a=n.getStickyBottomHeight(),l=this.paginationProxy.getRow(t),d;do{let c=l.rowTop,u=l.rowHeight,h=this.paginationProxy.getPixelOffset(),p=l.rowTop-h,m=p+l.rowHeight,C=this.getVScrollPosition(),w=this.heightScaler.getDivStretchOffset(),b=C.top+w,y=C.bottom+w,_=y-b,x=this.heightScaler.getScrollPositionForPixel(p),E=this.heightScaler.getScrollPositionForPixel(m-_),D=Math.min((x+E)/2,p),R=b+s>p,P=y-a<m,N=null;e==="top"?N=x:e==="bottom"?N=E:e==="middle"?N=D:R?N=x-s:P&&(N=E+a),N!==null&&(this.setVerticalScrollPosition(N),this.rowRenderer.redraw({afterScroll:!0})),d=c!==l.rowTop||u!==l.rowHeight}while(d);this.animationFrameService.flushAllFrames()})}ensureColumnVisible(t,e="auto"){let i=this.columnModel.getGridColumn(t);if(!i||i.isPinned()||!this.columnModel.isColumnDisplayed(i))return;let o=this.getPositionedHorizontalScroll(i,e);this.getFrameworkOverrides().wrapIncoming(()=>{o!==null&&this.centerRowsCtrl.setCenterViewportScrollLeft(o),this.centerRowsCtrl.onHorizontalViewportChanged(),this.animationFrameService.flushAllFrames()})}setScrollPosition(t,e){this.getFrameworkOverrides().wrapIncoming(()=>{this.centerRowsCtrl.setCenterViewportScrollLeft(e),this.setVerticalScrollPosition(t),this.rowRenderer.redraw({afterScroll:!0}),this.animationFrameService.flushAllFrames()})}getPositionedHorizontalScroll(t,e){let{columnBeforeStart:i,columnAfterEnd:o}=this.isColumnOutsideViewport(t),r=this.centerRowsCtrl.getCenterWidth()<t.getActualWidth(),n=this.centerRowsCtrl.getCenterWidth(),s=this.enableRtl,a=(s?i:o)||r,l=s?o:i;e!=="auto"&&(a=e==="start",l=e==="end");let d=e==="middle";if(a||l||d){let{colLeft:c,colMiddle:u,colRight:h}=this.getColumnBounds(t);return d?u-n/2:a?s?h:c:s?c-n:h-n}return null}isColumnOutsideViewport(t){let{start:e,end:i}=this.getViewportBounds(),{colLeft:o,colRight:r}=this.getColumnBounds(t),n=this.enableRtl,s=n?e>r:i<r,a=n?i<o:e>o;return{columnBeforeStart:s,columnAfterEnd:a}}getColumnBounds(t){let e=this.enableRtl,i=this.columnModel.getBodyContainerWidth(),o=t.getActualWidth(),r=t.getLeft(),n=e?-1:1,s=e?i-r:r,a=s+o*n,l=s+o/2*n;return{colLeft:s,colMiddle:l,colRight:a}}getViewportBounds(){let t=this.centerRowsCtrl.getCenterWidth(),e=this.centerRowsCtrl.getCenterViewportScrollLeft(),i=e,o=t+e;return{start:i,end:o,width:t}}};g([v("ctrlsService")],Wo.prototype,"ctrlsService",2);g([v("animationFrameService")],Wo.prototype,"animationFrameService",2);g([v("paginationProxy")],Wo.prototype,"paginationProxy",2);g([v("rowModel")],Wo.prototype,"rowModel",2);g([v("rowContainerHeightService")],Wo.prototype,"heightScaler",2);g([v("rowRenderer")],Wo.prototype,"rowRenderer",2);g([v("columnModel")],Wo.prototype,"columnModel",2);g([I],Wo.prototype,"postConstruct",1);var J_="ag-force-vertical-scroll",OO="ag-selectable",kO="ag-column-moving",Yt=class extends A{constructor(){super(...arguments),this.stickyTopHeight=0,this.stickyBottomHeight=0}getScrollFeature(){return this.bodyScrollFeature}getBodyViewportElement(){return this.eBodyViewport}setComp(t,e,i,o,r,n,s){this.comp=t,this.eGridBody=e,this.eBodyViewport=i,this.eTop=o,this.eBottom=r,this.eStickyTop=n,this.eStickyBottom=s,this.setCellTextSelection(this.gos.get("enableCellTextSelection")),this.addManagedPropertyListener("enableCellTextSelection",a=>this.setCellTextSelection(a.currentValue)),this.createManagedBean(new kh(this.comp)),this.bodyScrollFeature=this.createManagedBean(new Wo(this.eBodyViewport)),this.addRowDragListener(),this.setupRowAnimationCssClass(),this.addEventListeners(),this.addFocusListeners([o,i,r,n,s]),this.onGridColumnsChanged(),this.addBodyViewportListener(),this.setFloatingHeights(),this.disableBrowserDragging(),this.addStopEditingWhenGridLosesFocus(),this.filterManager.setupAdvancedFilterHeaderComp(o),this.ctrlsService.register("gridBodyCtrl",this)}getComp(){return this.comp}addEventListeners(){this.addManagedListener(this.eventService,f.EVENT_GRID_COLUMNS_CHANGED,this.onGridColumnsChanged.bind(this)),this.addManagedListener(this.eventService,f.EVENT_SCROLL_VISIBILITY_CHANGED,this.onScrollVisibilityChanged.bind(this)),this.addManagedListener(this.eventService,f.EVENT_PINNED_ROW_DATA_CHANGED,this.onPinnedRowDataChanged.bind(this)),this.addManagedListener(this.eventService,f.EVENT_HEADER_HEIGHT_CHANGED,this.onHeaderHeightChanged.bind(this))}addFocusListeners(t){t.forEach(e=>{this.addManagedListener(e,"focusin",i=>{let{target:o}=i,r=bn(o,"ag-root",e);e.classList.toggle("ag-has-focus",!r)}),this.addManagedListener(e,"focusout",i=>{let{target:o,relatedTarget:r}=i,n=e.contains(r),s=bn(r,"ag-root",e);bn(o,"ag-root",e)||(!n||s)&&e.classList.remove("ag-has-focus")})})}setColumnMovingCss(t){this.comp.setColumnMovingCss(kO,t)}setCellTextSelection(t=!1){this.comp.setCellSelectableCss(OO,t)}onScrollVisibilityChanged(){let t=this.scrollVisibleService.isVerticalScrollShowing();this.setVerticalScrollPaddingVisible(t),this.setStickyWidth(t),this.setStickyBottomOffsetBottom();let e=t&&this.gos.getScrollbarWidth()||0,i=Um()?16:0,o=`calc(100% + ${e+i}px)`;this.animationFrameService.requestAnimationFrame(()=>this.comp.setBodyViewportWidth(o))}onGridColumnsChanged(){let t=this.columnModel.getAllGridColumns();this.comp.setColumnCount(t.length)}disableBrowserDragging(){this.addManagedListener(this.eGridBody,"dragstart",t=>{if(t.target instanceof HTMLImageElement)return t.preventDefault(),!1})}addStopEditingWhenGridLosesFocus(){if(!this.gos.get("stopEditingWhenCellsLoseFocus"))return;let t=i=>{let o=i.relatedTarget;if(eh(o)===null){this.rowRenderer.stopEditing();return}let r=e.some(n=>n.contains(o))&&this.mouseEventService.isElementInThisGrid(o);if(!r){let n=this.popupService;r=n.getActivePopups().some(s=>s.contains(o))||n.isElementWithinCustomPopup(o)}r||this.rowRenderer.stopEditing()},e=[this.eBodyViewport,this.eBottom,this.eTop,this.eStickyTop,this.eStickyBottom];e.forEach(i=>this.addManagedListener(i,"focusout",t))}updateRowCount(){let t=this.headerNavigationService.getHeaderRowCount()+this.filterManager.getHeaderRowCount(),e=this.rowModel.isLastRowIndexKnown()?this.rowModel.getRowCount():-1,i=e===-1?-1:t+e;this.comp.setRowCount(i)}registerBodyViewportResizeListener(t){this.comp.registerBodyViewportResizeListener(t)}setVerticalScrollPaddingVisible(t){let e=t?"scroll":"hidden";this.comp.setPinnedTopBottomOverflowY(e)}isVerticalScrollShowing(){let t=this.gos.get("alwaysShowVerticalScroll"),e=t?J_:null,i=this.gos.isDomLayout("normal");return this.comp.setAlwaysVerticalScrollClass(e,t),t||i&&Yx(this.eBodyViewport)}setupRowAnimationCssClass(){let t=()=>{let e=this.gos.isAnimateRows()&&!this.rowContainerHeightService.isStretching(),i=e?"ag-row-animation":"ag-row-no-animation";this.comp.setRowAnimationCssOnBodyViewport(i,e)};t(),this.addManagedListener(this.eventService,f.EVENT_HEIGHT_SCALE_CHANGED,t),this.addManagedPropertyListener("animateRows",t)}getGridBodyElement(){return this.eGridBody}addBodyViewportListener(){let t=this.onBodyViewportContextMenu.bind(this);this.addManagedListener(this.eBodyViewport,"contextmenu",t),this.mockContextMenuForIPad(t),this.addManagedListener(this.eBodyViewport,"wheel",this.onBodyViewportWheel.bind(this)),this.addManagedListener(this.eStickyTop,"wheel",this.onStickyWheel.bind(this)),this.addManagedListener(this.eStickyBottom,"wheel",this.onStickyWheel.bind(this)),this.addFullWidthContainerWheelListener()}addFullWidthContainerWheelListener(){let t=this.eBodyViewport.querySelector(".ag-full-width-container"),e=this.eBodyViewport.querySelector(".ag-center-cols-viewport");t&&e&&this.addManagedListener(t,"wheel",i=>this.onFullWidthContainerWheel(i,e))}onFullWidthContainerWheel(t,e){!t.deltaX||Math.abs(t.deltaY)>Math.abs(t.deltaX)||!this.mouseEventService.isEventFromThisGrid(t)||(t.preventDefault(),e.scrollBy({left:t.deltaX}))}onBodyViewportContextMenu(t,e,i){if(!t&&!i)return;this.gos.get("preventDefaultOnContextMenu")&&(t||i).preventDefault();let{target:o}=t||e;(o===this.eBodyViewport||o===this.ctrlsService.get("center").getViewportElement())&&this.menuService.showContextMenu({mouseEvent:t,touchEvent:i,value:null,anchorToElement:this.eGridBody})}mockContextMenuForIPad(t){if(!Vo())return;let e=new St(this.eBodyViewport),i=o=>{t(void 0,o.touchStart,o.touchEvent)};this.addManagedListener(e,St.EVENT_LONG_TAP,i),this.addDestroyFunc(()=>e.destroy())}onBodyViewportWheel(t){this.gos.get("suppressScrollWhenPopupsAreOpen")&&this.popupService.hasAnchoredPopup()&&t.preventDefault()}onStickyWheel(t){t.preventDefault(),t.offsetY&&this.scrollVertically(t.deltaY)}getGui(){return this.eGridBody}scrollVertically(t){let e=this.eBodyViewport.scrollTop;return this.bodyScrollFeature.setVerticalScrollPosition(e+t),this.eBodyViewport.scrollTop-e}addRowDragListener(){this.rowDragFeature=this.createManagedBean(new Si(this.eBodyViewport)),this.dragAndDropService.addDropTarget(this.rowDragFeature)}getRowDragFeature(){return this.rowDragFeature}onPinnedRowDataChanged(){this.setFloatingHeights()}setFloatingHeights(){let{pinnedRowModel:t}=this,e=t.getPinnedTopTotalHeight(),i=t.getPinnedBottomTotalHeight();this.comp.setTopHeight(e),this.comp.setBottomHeight(i),this.comp.setTopDisplay(e?"inherit":"none"),this.comp.setBottomDisplay(i?"inherit":"none"),this.setStickyTopOffsetTop(),this.setStickyBottomOffsetBottom()}setStickyTopHeight(t=0){this.comp.setStickyTopHeight(`${t}px`),this.stickyTopHeight=t}getStickyTopHeight(){return this.stickyTopHeight}setStickyBottomHeight(t=0){this.comp.setStickyBottomHeight(`${t}px`),this.stickyBottomHeight=t}getStickyBottomHeight(){return this.stickyBottomHeight}setStickyWidth(t){if(!t)this.comp.setStickyTopWidth("100%"),this.comp.setStickyBottomWidth("100%");else{let e=this.gos.getScrollbarWidth();this.comp.setStickyTopWidth(`calc(100% - ${e}px)`),this.comp.setStickyBottomWidth(`calc(100% - ${e}px)`)}}onHeaderHeightChanged(){this.setStickyTopOffsetTop()}setStickyTopOffsetTop(){let e=this.ctrlsService.get("gridHeaderCtrl").getHeaderHeight()+this.filterManager.getHeaderHeight(),i=this.pinnedRowModel.getPinnedTopTotalHeight(),o=0;e>0&&(o+=e),i>0&&(o+=i),o>0&&(o+=1),this.comp.setStickyTopTop(`${o}px`)}setStickyBottomOffsetBottom(){let t=this.pinnedRowModel.getPinnedBottomTotalHeight(),i=this.scrollVisibleService.isHorizontalScrollShowing()&&this.gos.getScrollbarWidth()||0,o=t+i;this.comp.setStickyBottomBottom(`${o}px`)}sizeColumnsToFit(t,e){let o=this.isVerticalScrollShowing()?this.gos.getScrollbarWidth():0,n=zn(this.eGridBody)-o;if(n>0){this.columnModel.sizeColumnsToFit(n,"sizeColumnsToFit",!1,t);return}e===void 0?window.setTimeout(()=>{this.sizeColumnsToFit(t,100)},0):e===100?window.setTimeout(()=>{this.sizeColumnsToFit(t,500)},100):e===500?window.setTimeout(()=>{this.sizeColumnsToFit(t,-1)},500):console.warn("AG Grid: tried to call sizeColumnsToFit() but the grid is coming back with zero width, maybe the grid is not visible yet on the screen?")}addScrollEventListener(t){this.eBodyViewport.addEventListener("scroll",t,{passive:!0})}removeScrollEventListener(t){this.eBodyViewport.removeEventListener("scroll",t)}};g([v("animationFrameService")],Yt.prototype,"animationFrameService",2);g([v("rowContainerHeightService")],Yt.prototype,"rowContainerHeightService",2);g([v("ctrlsService")],Yt.prototype,"ctrlsService",2);g([v("columnModel")],Yt.prototype,"columnModel",2);g([v("scrollVisibleService")],Yt.prototype,"scrollVisibleService",2);g([v("menuService")],Yt.prototype,"menuService",2);g([v("headerNavigationService")],Yt.prototype,"headerNavigationService",2);g([v("dragAndDropService")],Yt.prototype,"dragAndDropService",2);g([v("pinnedRowModel")],Yt.prototype,"pinnedRowModel",2);g([v("rowRenderer")],Yt.prototype,"rowRenderer",2);g([v("popupService")],Yt.prototype,"popupService",2);g([v("mouseEventService")],Yt.prototype,"mouseEventService",2);g([v("rowModel")],Yt.prototype,"rowModel",2);g([v("filterManager")],Yt.prototype,"filterManager",2);var Xl="ag-cell-range-selected",LO="ag-cell-range-chart",NO="ag-cell-range-single-cell",zO="ag-cell-range-chart-category",GO="ag-cell-range-handle",VO="ag-cell-range-top",HO="ag-cell-range-right",BO="ag-cell-range-bottom",WO="ag-cell-range-left",UO=class{constructor(t,e){this.beans=t,this.rangeService=t.rangeService,this.selectionHandleFactory=t.selectionHandleFactory,this.cellCtrl=e}setComp(t,e){this.cellComp=t,this.eGui=e,this.onRangeSelectionChanged()}onRangeSelectionChanged(){this.cellComp&&(this.rangeCount=this.rangeService.getCellRangeCount(this.cellCtrl.getCellPosition()),this.hasChartRange=this.getHasChartRange(),this.cellComp.addOrRemoveCssClass(Xl,this.rangeCount!==0),this.cellComp.addOrRemoveCssClass(`${Xl}-1`,this.rangeCount===1),this.cellComp.addOrRemoveCssClass(`${Xl}-2`,this.rangeCount===2),this.cellComp.addOrRemoveCssClass(`${Xl}-3`,this.rangeCount===3),this.cellComp.addOrRemoveCssClass(`${Xl}-4`,this.rangeCount>=4),this.cellComp.addOrRemoveCssClass(LO,this.hasChartRange),ea(this.eGui,this.rangeCount>0?!0:void 0),this.cellComp.addOrRemoveCssClass(NO,this.isSingleCell()),this.updateRangeBorders(),this.refreshHandle())}updateRangeBorders(){let t=this.getRangeBorders(),e=this.isSingleCell(),i=!e&&t.top,o=!e&&t.right,r=!e&&t.bottom,n=!e&&t.left;this.cellComp.addOrRemoveCssClass(VO,i),this.cellComp.addOrRemoveCssClass(HO,o),this.cellComp.addOrRemoveCssClass(BO,r),this.cellComp.addOrRemoveCssClass(WO,n)}isSingleCell(){let{rangeService:t}=this.beans;return this.rangeCount===1&&!!t&&!t.isMoreThanOneCell()}getHasChartRange(){let{rangeService:t}=this.beans;if(!this.rangeCount||!t)return!1;let e=t.getCellRanges();return e.length>0&&e.every(i=>wi([1,0],i.type))}updateRangeBordersIfRangeCount(){this.rangeCount>0&&(this.updateRangeBorders(),this.refreshHandle())}getRangeBorders(){let t=this.beans.gos.get("enableRtl"),e=!1,i=!1,o=!1,r=!1,n=this.cellCtrl.getCellPosition().column,s=this.beans.columnModel,a,l;t?(a=s.getDisplayedColAfter(n),l=s.getDisplayedColBefore(n)):(a=s.getDisplayedColBefore(n),l=s.getDisplayedColAfter(n));let d=this.rangeService.getCellRanges().filter(c=>this.rangeService.isCellInSpecificRange(this.cellCtrl.getCellPosition(),c));a||(r=!0),l||(i=!0);for(let c=0;c<d.length&&!(e&&i&&o&&r);c++){let u=d[c],h=this.rangeService.getRangeStartRow(u),p=this.rangeService.getRangeEndRow(u);!e&&this.beans.rowPositionUtils.sameRow(h,this.cellCtrl.getCellPosition())&&(e=!0),!o&&this.beans.rowPositionUtils.sameRow(p,this.cellCtrl.getCellPosition())&&(o=!0),!r&&a&&u.columns.indexOf(a)<0&&(r=!0),!i&&l&&u.columns.indexOf(l)<0&&(i=!0)}return{top:e,right:i,bottom:o,left:r}}refreshHandle(){if(this.beans.context.isDestroyed())return;let t=this.shouldHaveSelectionHandle();this.selectionHandle&&!t&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),t&&this.addSelectionHandle(),this.cellComp.addOrRemoveCssClass(GO,!!this.selectionHandle)}shouldHaveSelectionHandle(){let t=this.beans.gos,e=this.rangeService.getCellRanges(),i=e.length;if(this.rangeCount<1||i<1)return!1;let o=be(e),r=this.cellCtrl.getCellPosition(),n=t.get("enableFillHandle")&&!this.cellCtrl.isSuppressFillHandle(),s=t.get("enableRangeHandle"),a=i===1&&!this.cellCtrl.isEditing()&&(n||s);if(this.hasChartRange){let d=e[0].type===1&&this.rangeService.isCellInSpecificRange(r,e[0]);this.cellComp.addOrRemoveCssClass(zO,d),a=o.type===0}return a&&o.endRow!=null&&this.rangeService.isContiguousRange(o)&&this.rangeService.isBottomRightCell(o,r)}addSelectionHandle(){let t=this.beans.gos,e=be(this.rangeService.getCellRanges()).type,o=t.get("enableFillHandle")&&X(e)?0:1;this.selectionHandle&&this.selectionHandle.getType()!==o&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),this.selectionHandle||(this.selectionHandle=this.selectionHandleFactory.createSelectionHandle(o)),this.selectionHandle.refresh(this.cellCtrl)}destroy(){this.beans.context.destroyBean(this.selectionHandle)}},jO=class extends A{constructor(t,e){super(),this.cellCtrl=t,this.beans=e,this.column=t.getColumn(),this.rowNode=t.getRowNode()}setupRowSpan(){this.rowSpan=this.column.getRowSpan(this.rowNode),this.addManagedListener(this.beans.eventService,f.EVENT_NEW_COLUMNS_LOADED,()=>this.onNewColumnsLoaded())}setComp(t){this.eGui=t,this.setupColSpan(),this.setupRowSpan(),this.onLeftChanged(),this.onWidthChanged(),this.applyRowSpan()}onNewColumnsLoaded(){let t=this.column.getRowSpan(this.rowNode);this.rowSpan!==t&&(this.rowSpan=t,this.applyRowSpan(!0))}onDisplayColumnsChanged(){let t=this.getColSpanningList();ho(this.colsSpanning,t)||(this.colsSpanning=t,this.onWidthChanged(),this.onLeftChanged())}setupColSpan(){this.column.getColDef().colSpan!=null&&(this.colsSpanning=this.getColSpanningList(),this.addManagedListener(this.beans.eventService,f.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayColumnsChanged.bind(this)),this.addManagedListener(this.beans.eventService,f.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onWidthChanged.bind(this)))}onWidthChanged(){if(!this.eGui)return;let t=this.getCellWidth();this.eGui.style.width=`${t}px`}getCellWidth(){return this.colsSpanning?this.colsSpanning.reduce((t,e)=>t+e.getActualWidth(),0):this.column.getActualWidth()}getColSpanningList(){let t=this.column.getColSpan(this.rowNode),e=[];if(t===1)e.push(this.column);else{let i=this.column,o=this.column.getPinned();for(let r=0;i&&r<t&&(e.push(i),i=this.beans.columnModel.getDisplayedColAfter(i),!(!i||X(i)||o!==i.getPinned()));r++);}return e}onLeftChanged(){if(!this.eGui)return;let t=this.modifyLeftForPrintLayout(this.getCellLeft());this.eGui.style.left=t+"px"}getCellLeft(){let t;return this.beans.gos.get("enableRtl")&&this.colsSpanning?t=be(this.colsSpanning):t=this.column,t.getLeft()}modifyLeftForPrintLayout(t){if(!this.cellCtrl.isPrintLayout()||this.column.getPinned()==="left")return t;let e=this.beans.columnModel.getDisplayedColumnsLeftWidth();if(this.column.getPinned()==="right"){let i=this.beans.columnModel.getBodyContainerWidth();return e+i+(t||0)}return e+(t||0)}applyRowSpan(t){if(this.rowSpan===1&&!t)return;let i=this.beans.gos.getRowHeightAsNumber()*this.rowSpan;this.eGui.style.height=`${i}px`,this.eGui.style.zIndex="1"}destroy(){super.destroy()}},qO=class extends A{constructor(t,e){super(),this.staticClasses=[],this.cellCtrl=t,this.beans=e,this.column=t.getColumn(),this.rowNode=t.getRowNode()}setComp(t){this.cellComp=t,this.applyUserStyles(),this.applyCellClassRules(),this.applyClassesFromColDef()}applyCellClassRules(){let t=this.column.getColDef(),{cellClassRules:e}=t,i=this.beans.gos.addGridCommonParams({value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,colDef:t,column:this.column,rowIndex:this.rowNode.rowIndex});this.beans.stylingService.processClassRules(e===this.cellClassRules?void 0:this.cellClassRules,e,i,o=>this.cellComp.addOrRemoveCssClass(o,!0),o=>this.cellComp.addOrRemoveCssClass(o,!1)),this.cellClassRules=e}applyUserStyles(){let t=this.column.getColDef();if(!t.cellStyle)return;let e;if(typeof t.cellStyle=="function"){let i=this.beans.gos.addGridCommonParams({column:this.column,value:this.cellCtrl.getValue(),colDef:t,data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex}),o=t.cellStyle;e=o(i)}else e=t.cellStyle;e&&this.cellComp.setUserStyles(e)}applyClassesFromColDef(){let t=this.column.getColDef(),e=this.beans.gos.addGridCommonParams({value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,column:this.column,colDef:t,rowIndex:this.rowNode.rowIndex});this.staticClasses.length&&this.staticClasses.forEach(i=>this.cellComp.addOrRemoveCssClass(i,!1)),this.staticClasses=this.beans.stylingService.getStaticCellClasses(t,e),this.staticClasses.length&&this.staticClasses.forEach(i=>this.cellComp.addOrRemoveCssClass(i,!0))}destroy(){super.destroy()}},se=class{postConstruct(){this.gos.isRowModelType("clientSide")&&(this.clientSideRowModel=this.rowModel),this.gos.isRowModelType("serverSide")&&(this.serverSideRowModel=this.rowModel)}};g([v("resizeObserverService")],se.prototype,"resizeObserverService",2);g([v("paginationProxy")],se.prototype,"paginationProxy",2);g([v("context")],se.prototype,"context",2);g([v("gridOptionsService")],se.prototype,"gos",2);g([v("environment")],se.prototype,"environment",2);g([v("rowRenderer")],se.prototype,"rowRenderer",2);g([v("valueService")],se.prototype,"valueService",2);g([v("eventService")],se.prototype,"eventService",2);g([v("columnModel")],se.prototype,"columnModel",2);g([v("headerNavigationService")],se.prototype,"headerNavigationService",2);g([v("navigationService")],se.prototype,"navigationService",2);g([v("columnAnimationService")],se.prototype,"columnAnimationService",2);g([v("focusService")],se.prototype,"focusService",2);g([v("popupService")],se.prototype,"popupService",2);g([v("stylingService")],se.prototype,"stylingService",2);g([v("columnHoverService")],se.prototype,"columnHoverService",2);g([v("userComponentFactory")],se.prototype,"userComponentFactory",2);g([v("userComponentRegistry")],se.prototype,"userComponentRegistry",2);g([v("animationFrameService")],se.prototype,"animationFrameService",2);g([v("dragService")],se.prototype,"dragService",2);g([v("dragAndDropService")],se.prototype,"dragAndDropService",2);g([v("sortController")],se.prototype,"sortController",2);g([v("filterManager")],se.prototype,"filterManager",2);g([v("rowContainerHeightService")],se.prototype,"rowContainerHeightService",2);g([v("frameworkOverrides")],se.prototype,"frameworkOverrides",2);g([v("cellPositionUtils")],se.prototype,"cellPositionUtils",2);g([v("rowPositionUtils")],se.prototype,"rowPositionUtils",2);g([v("selectionService")],se.prototype,"selectionService",2);g([v("rowCssClassCalculator")],se.prototype,"rowCssClassCalculator",2);g([v("rowModel")],se.prototype,"rowModel",2);g([v("ctrlsService")],se.prototype,"ctrlsService",2);g([v("ctrlsFactory")],se.prototype,"ctrlsFactory",2);g([v("agStackComponentsRegistry")],se.prototype,"agStackComponentsRegistry",2);g([v("valueCache")],se.prototype,"valueCache",2);g([v("rowNodeEventThrottle")],se.prototype,"rowNodeEventThrottle",2);g([v("localeService")],se.prototype,"localeService",2);g([v("syncService")],se.prototype,"syncService",2);g([v("ariaAnnouncementService")],se.prototype,"ariaAnnouncementService",2);g([Re("rangeService")],se.prototype,"rangeService",2);g([Re("selectionHandleFactory")],se.prototype,"selectionHandleFactory",2);g([I],se.prototype,"postConstruct",1);se=g([V("beans")],se);var KO=class extends se{constructor(t,e,i){super(),this.cellCtrl=t,this.beans=e,this.column=i}onMouseEvent(t,e){if(!$i(e))switch(t){case"click":this.onCellClicked(e);break;case"mousedown":case"touchstart":this.onMouseDown(e);break;case"dblclick":this.onCellDoubleClicked(e);break;case"mouseout":this.onMouseOut(e);break;case"mouseover":this.onMouseOver(e);break}}onCellClicked(t){if(this.isDoubleClickOnIPad()){this.onCellDoubleClicked(t),t.preventDefault();return}let{eventService:e,rangeService:i,gos:o}=this.beans,r=t.ctrlKey||t.metaKey;i&&r&&i.getCellRangeCount(this.cellCtrl.getCellPosition())>1&&i.intersectLastRange(!0);let n=this.cellCtrl.createEvent(t,f.EVENT_CELL_CLICKED);e.dispatchEvent(n);let s=this.column.getColDef();s.onCellClicked&&window.setTimeout(()=>{this.beans.frameworkOverrides.wrapOutgoing(()=>{s.onCellClicked(n)})},0),(o.get("singleClickEdit")||s.singleClickEdit)&&!o.get("suppressClickEdit")&&!(t.shiftKey&&i?.getCellRanges().length!=0)&&this.cellCtrl.startRowOrCellEdit()}isDoubleClickOnIPad(){if(!Vo()||Pm("dblclick"))return!1;let t=new Date().getTime(),e=t-this.lastIPadMouseClickEvent<200;return this.lastIPadMouseClickEvent=t,e}onCellDoubleClicked(t){let e=this.column.getColDef(),i=this.cellCtrl.createEvent(t,f.EVENT_CELL_DOUBLE_CLICKED);this.beans.eventService.dispatchEvent(i),typeof e.onCellDoubleClicked=="function"&&window.setTimeout(()=>{this.beans.frameworkOverrides.wrapOutgoing(()=>{e.onCellDoubleClicked(i)})},0),!this.beans.gos.get("singleClickEdit")&&!this.beans.gos.get("suppressClickEdit")&&this.cellCtrl.startRowOrCellEdit(null,t)}onMouseDown(t){let{ctrlKey:e,metaKey:i,shiftKey:o}=t,r=t.target,{cellCtrl:n,beans:s}=this,{eventService:a,rangeService:l,focusService:d}=s;if(this.isRightClickInExistingRange(t))return;let c=l&&l.getCellRanges().length!=0;if(!o||!c){let u=fo()&&!n.isEditing()&&!Km(r);n.focusCell(u)}if(o&&c&&!d.isCellFocused(n.getCellPosition())){t.preventDefault();let u=d.getFocusedCell();if(u){let{column:h,rowIndex:p,rowPinned:m}=u,C=s.rowRenderer.getRowByPosition({rowIndex:p,rowPinned:m}),w=C?.getCellCtrl(h);w?.isEditing()&&w.stopEditing(),d.setFocusedCell({column:h,rowIndex:p,rowPinned:m,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}}if(!this.containsWidget(r)){if(l){let u=this.cellCtrl.getCellPosition();if(o)l.extendLatestRangeToCell(u);else{let h=e||i;l.setRangeToCell(u,h)}}a.dispatchEvent(this.cellCtrl.createEvent(t,f.EVENT_CELL_MOUSE_DOWN))}}isRightClickInExistingRange(t){let{rangeService:e}=this.beans;if(e){let i=e.isCellInAnyRange(this.cellCtrl.getCellPosition()),o=t.button===2||t.ctrlKey&&this.beans.gos.get("allowContextMenuWithControlKey");if(i&&o)return!0}return!1}containsWidget(t){return bn(t,"ag-selection-checkbox",3)}onMouseOut(t){if(this.mouseStayingInsideCell(t))return;let e=this.cellCtrl.createEvent(t,f.EVENT_CELL_MOUSE_OUT);this.beans.eventService.dispatchEvent(e),this.beans.columnHoverService.clearMouseOver()}onMouseOver(t){if(this.mouseStayingInsideCell(t))return;let e=this.cellCtrl.createEvent(t,f.EVENT_CELL_MOUSE_OVER);this.beans.eventService.dispatchEvent(e),this.beans.columnHoverService.setMouseOver([this.column])}mouseStayingInsideCell(t){if(!t.target||!t.relatedTarget)return!1;let e=this.cellCtrl.getGui(),i=e.contains(t.target),o=e.contains(t.relatedTarget);return i&&o}destroy(){}},$O=class extends A{constructor(t,e,i,o,r){super(),this.cellCtrl=t,this.beans=e,this.rowNode=o,this.rowCtrl=r}setComp(t){this.eGui=t}onKeyDown(t){let e=t.key;switch(e){case S.ENTER:this.onEnterKeyDown(t);break;case S.F2:this.onF2KeyDown(t);break;case S.ESCAPE:this.onEscapeKeyDown(t);break;case S.TAB:this.onTabKeyDown(t);break;case S.BACKSPACE:case S.DELETE:this.onBackspaceOrDeleteKeyDown(e,t);break;case S.DOWN:case S.UP:case S.RIGHT:case S.LEFT:this.onNavigationKeyDown(t,e);break}}onNavigationKeyDown(t,e){this.cellCtrl.isEditing()||(t.shiftKey&&this.cellCtrl.isRangeSelectionEnabled()?this.onShiftRangeSelect(t):this.beans.navigationService.navigateToNextCell(t,e,this.cellCtrl.getCellPosition(),!0),t.preventDefault())}onShiftRangeSelect(t){if(!this.beans.rangeService)return;let e=this.beans.rangeService.extendLatestRangeInDirection(t);e&&this.beans.navigationService.ensureCellVisible(e)}onTabKeyDown(t){this.beans.navigationService.onTabKeyDown(this.cellCtrl,t)}onBackspaceOrDeleteKeyDown(t,e){var i;let{cellCtrl:o,beans:r,rowNode:n}=this,{gos:s,rangeService:a,eventService:l}=r;if(!o.isEditing()){if(l.dispatchEvent({type:f.EVENT_KEY_SHORTCUT_CHANGED_CELL_START}),n_(t,s.get("enableCellEditingOnBackspace"))){if(a&&s.get("enableRangeSelection"))a.clearCellRangeCellValues({dispatchWrapperEvents:!0,wrapperEventSource:"deleteKey"});else if(o.isCellEditable()){let d=o.getColumn(),c=(i=this.beans.valueService.parseValue(d,n,"",n.getValueFromValueService(d)))!=null?i:null;n.setDataValue(d,c,"cellClear")}}else o.startRowOrCellEdit(t,e);l.dispatchEvent({type:f.EVENT_KEY_SHORTCUT_CHANGED_CELL_END})}}onEnterKeyDown(t){if(this.cellCtrl.isEditing()||this.rowCtrl.isEditing())this.cellCtrl.stopEditingAndFocus(!1,t.shiftKey);else if(this.beans.gos.get("enterNavigatesVertically")){let e=t.shiftKey?S.UP:S.DOWN;this.beans.navigationService.navigateToNextCell(null,e,this.cellCtrl.getCellPosition(),!1)}else this.cellCtrl.startRowOrCellEdit(S.ENTER,t),this.cellCtrl.isEditing()&&t.preventDefault()}onF2KeyDown(t){this.cellCtrl.isEditing()||this.cellCtrl.startRowOrCellEdit(S.F2,t)}onEscapeKeyDown(t){this.cellCtrl.isEditing()&&(this.cellCtrl.stopRowOrCellEdit(!0),this.cellCtrl.focusCell(!0))}processCharacter(t){if(t.target!==this.eGui||this.cellCtrl.isEditing())return;let o=t.key;o===" "?this.onSpaceKeyDown(t):(this.cellCtrl.startRowOrCellEdit(o,t),t.preventDefault())}onSpaceKeyDown(t){let{gos:e}=this.beans;if(!this.cellCtrl.isEditing()&&e.isRowSelection()){let i=this.rowNode.isSelected(),o=!i;if(o||!e.get("suppressRowDeselection")){let r=this.beans.gos.get("groupSelectsFiltered"),n=this.rowNode.setSelectedParams({newValue:o,rangeSelect:t.shiftKey,groupSelectsFiltered:r,event:t,source:"spaceKey"});i===void 0&&n===0&&this.rowNode.setSelectedParams({newValue:!1,rangeSelect:t.shiftKey,groupSelectsFiltered:r,event:t,source:"spaceKey"})}}t.preventDefault()}destroy(){super.destroy()}},eE=class extends J{constructor(t,e,i){super('<div class="ag-drag-handle ag-row-drag" draggable="true"></div>'),this.rowNode=t,this.column=e,this.eCell=i}postConstruct(){this.getGui().appendChild(qe("rowDrag",this.gos,null)),this.addGuiEventListener("mousedown",e=>{e.stopPropagation()}),this.addDragSource(),this.checkVisibility()}addDragSource(){this.addGuiEventListener("dragstart",this.onDragStart.bind(this))}onDragStart(t){let e=this.column.getColDef().dndSourceOnRowDrag;t.dataTransfer.setDragImage(this.eCell,0,0);let i=()=>{try{let o=JSON.stringify(this.rowNode.data);t.dataTransfer.setData("application/json",o),t.dataTransfer.setData("text/plain",o)}catch{}};if(e){let o=this.gos.addGridCommonParams({rowNode:this.rowNode,dragEvent:t});e(o)}else i()}checkVisibility(){let t=this.column.isDndSource(this.rowNode);this.setDisplayed(t)}};g([I],eE.prototype,"postConstruct",1);var YO="ag-column-first",QO="ag-column-last",Lh=class{static getHeaderClassesFromColDef(t,e,i,o){return X(t)?[]:this.getColumnClassesFromCollDef(t.headerClass,t,e,i,o)}static getToolPanelClassesFromColDef(t,e,i,o){return X(t)?[]:this.getColumnClassesFromCollDef(t.toolPanelClass,t,e,i,o)}static refreshFirstAndLastStyles(t,e,i){t.addOrRemoveCssClass(YO,i.isColumnAtEdge(e,"first")),t.addOrRemoveCssClass(QO,i.isColumnAtEdge(e,"last"))}static getClassParams(t,e,i,o){return e.addGridCommonParams({colDef:t,column:i,columnGroup:o})}static getColumnClassesFromCollDef(t,e,i,o,r){if(X(t))return[];let n;if(typeof t=="function"){let s=this.getClassParams(e,i,o,r);n=t(s)}else n=t;return typeof n=="string"?[n]:Array.isArray(n)?[...n]:[]}},XO="ag-cell",ZO="ag-cell-auto-height",JO="ag-cell-normal-height",ek="ag-cell-focus",tk="ag-cell-first-right-pinned",ik="ag-cell-last-left-pinned",ok="ag-cell-not-inline-editing",rk="ag-column-hover",nk="ag-cell-wrap-text",sk=0,tE=class fm extends A{constructor(e,i,o,r){super(),this.cellRangeFeature=null,this.cellPositionFeature=null,this.cellCustomStyleFeature=null,this.tooltipFeature=null,this.cellMouseListenerFeature=null,this.cellKeyboardListenerFeature=null,this.suppressRefreshCell=!1,this.onCellCompAttachedFuncs=[],this.column=e,this.rowNode=i,this.beans=o,this.rowCtrl=r,this.instanceId=e.getId()+"-"+sk++,this.colIdSanitised=rt(this.column.getId()),o.gos.get("suppressCellFocus")||(this.tabIndex=-1),this.createCellPosition(),this.addFeatures(),this.updateAndFormatValue(!1)}shouldRestoreFocus(){return this.beans.focusService.shouldRestoreFocus(this.cellPosition)}addFeatures(){this.cellPositionFeature=new jO(this,this.beans),this.addDestroyFunc(()=>{var i;(i=this.cellPositionFeature)==null||i.destroy(),this.cellPositionFeature=null}),this.cellCustomStyleFeature=new qO(this,this.beans),this.addDestroyFunc(()=>{var i;(i=this.cellCustomStyleFeature)==null||i.destroy(),this.cellCustomStyleFeature=null}),this.cellMouseListenerFeature=new KO(this,this.beans,this.column),this.addDestroyFunc(()=>{var i;(i=this.cellMouseListenerFeature)==null||i.destroy(),this.cellMouseListenerFeature=null}),this.cellKeyboardListenerFeature=new $O(this,this.beans,this.column,this.rowNode,this.rowCtrl),this.addDestroyFunc(()=>{var i;(i=this.cellKeyboardListenerFeature)==null||i.destroy(),this.cellKeyboardListenerFeature=null}),this.column.isTooltipEnabled()&&(this.enableTooltipFeature(),this.addDestroyFunc(()=>{this.disableTooltipFeature()})),this.beans.rangeService&&this.beans.gos.get("enableRangeSelection")&&(this.cellRangeFeature=new UO(this.beans,this),this.addDestroyFunc(()=>{var i;(i=this.cellRangeFeature)==null||i.destroy(),this.cellRangeFeature=null}))}enableTooltipFeature(e,i){let o=()=>{let s=this.column.getColDef(),a=this.rowNode.data;if(s.tooltipField&&T(a))return $s(a,s.tooltipField,this.column.isTooltipFieldContainsDots());let l=s.tooltipValueGetter;return l?l(this.beans.gos.addGridCommonParams({location:"cell",colDef:this.column.getColDef(),column:this.column,rowIndex:this.cellPosition.rowIndex,node:this.rowNode,data:this.rowNode.data,value:this.value,valueFormatted:this.valueFormatted})):null},r=this.beans.gos.get("tooltipShowMode")==="whenTruncated";!i&&r&&!this.isCellRenderer()&&(i=()=>{let s=this.getGui(),a=s.children.length===0?s:s.querySelector(".ag-cell-value");return a?a.scrollWidth>a.clientWidth:!0});let n={getColumn:()=>this.column,getColDef:()=>this.column.getColDef(),getRowIndex:()=>this.cellPosition.rowIndex,getRowNode:()=>this.rowNode,getGui:()=>this.getGui(),getLocation:()=>"cell",getTooltipValue:e!=null?()=>e:o,getValueFormatted:()=>this.valueFormatted,shouldDisplayTooltip:i};this.tooltipFeature=new Ho(n,this.beans)}disableTooltipFeature(){this.tooltipFeature&&(this.tooltipFeature.destroy(),this.tooltipFeature=null)}setComp(e,i,o,r,n){var s,a,l,d;this.cellComp=e,this.eGui=i,this.printLayout=r,this.addDomData(),this.onCellFocused(this.focusEventToRestore),this.applyStaticCssClasses(),this.setWrapText(),this.onFirstRightPinnedChanged(),this.onLastLeftPinnedChanged(),this.onColumnHover(),this.setupControlComps(),this.setupAutoHeight(o),this.refreshFirstAndLastStyles(),this.refreshAriaColIndex(),(s=this.cellPositionFeature)==null||s.setComp(i),(a=this.cellCustomStyleFeature)==null||a.setComp(e),(l=this.tooltipFeature)==null||l.refreshToolTip(),(d=this.cellKeyboardListenerFeature)==null||d.setComp(this.eGui),this.cellRangeFeature&&this.cellRangeFeature.setComp(e,i),n&&this.isCellEditable()?this.startEditing():this.showValue(),this.onCellCompAttachedFuncs.length&&(this.onCellCompAttachedFuncs.forEach(c=>c()),this.onCellCompAttachedFuncs=[])}setupAutoHeight(e){if(this.isAutoHeight=this.column.isAutoHeight(),!this.isAutoHeight||!e)return;let i=e.parentElement,o=this.beans.gos.getRowHeightForNode(this.rowNode).height,r=a=>{if(this.editing||!this.isAlive())return;let{paddingTop:l,paddingBottom:d,borderBottomWidth:c,borderTopWidth:u}=Pr(i),h=l+d+c+u,m=e.offsetHeight+h;if(a<5){let w=this.beans.gos.getDocument(),b=!w||!w.contains(e),y=m==0;if(b||y){window.setTimeout(()=>r(a+1),0);return}}let C=Math.max(m,o);this.rowNode.setRowAutoHeight(C,this.column)},n=()=>r(0);n();let s=this.beans.resizeObserverService.observeResize(e,n);this.addDestroyFunc(()=>{s(),this.rowNode.setRowAutoHeight(void 0,this.column)})}getCellAriaRole(){var e;return(e=this.column.getColDef().cellAriaRole)!=null?e:"gridcell"}getInstanceId(){return this.instanceId}getColumnIdSanitised(){return this.colIdSanitised}getTabIndex(){return this.tabIndex}isCellRenderer(){let e=this.column.getColDef();return e.cellRenderer!=null||e.cellRendererSelector!=null}getValueToDisplay(){var e;return(e=this.valueFormatted)!=null?e:this.value}showValue(e=!1){var i;let o=this.getValueToDisplay(),r;if(this.rowNode.stub){let n=this.createCellRendererParams();r=this.beans.userComponentFactory.getLoadingCellRendererDetails(this.column.getColDef(),n)}else if(this.isCellRenderer()){let n=this.createCellRendererParams();r=this.beans.userComponentFactory.getCellRendererDetails(this.column.getColDef(),n)}this.cellComp.setRenderDetails(r,o,e),(i=this.cellRangeFeature)==null||i.refreshHandle()}setupControlComps(){let e=this.column.getColDef();this.includeSelection=this.isIncludeControl(e.checkboxSelection),this.includeRowDrag=this.isIncludeControl(e.rowDrag),this.includeDndSource=this.isIncludeControl(e.dndSource),this.cellComp.setIncludeSelection(this.includeSelection),this.cellComp.setIncludeDndSource(this.includeDndSource),this.cellComp.setIncludeRowDrag(this.includeRowDrag)}isForceWrapper(){return this.beans.gos.get("enableCellTextSelection")||this.column.isAutoHeight()}isIncludeControl(e){return this.rowNode.rowPinned!=null?!1:typeof e=="function"||e===!0}refreshShouldDestroy(){let e=this.column.getColDef(),i=this.includeSelection!=this.isIncludeControl(e.checkboxSelection),o=this.includeRowDrag!=this.isIncludeControl(e.rowDrag),r=this.includeDndSource!=this.isIncludeControl(e.dndSource),n=this.isAutoHeight!=this.column.isAutoHeight();return i||o||r||n}startEditing(e=null,i=!1,o=null){if(!this.isCellEditable()||this.editing)return;if(!this.cellComp){this.onCellCompAttachedFuncs.push(()=>{this.startEditing(e,i,o)});return}let r=this.createCellEditorParams(e,i),n=this.column.getColDef(),s=this.beans.userComponentFactory.getCellEditorDetails(n,r);this.editCompDetails=s;let a=s?.popupFromSelector!=null?s.popupFromSelector:!!n.cellEditorPopup,l=s?.popupPositionFromSelector!=null?s.popupPositionFromSelector:n.cellEditorPopupPosition;this.setEditing(!0),this.cellComp.setEditDetails(s,a,l,this.beans.gos.get("reactiveCustomComponents"));let d=this.createEvent(o,f.EVENT_CELL_EDITING_STARTED);this.beans.eventService.dispatchEvent(d)}setEditing(e){var i;this.editing!==e&&(this.editing=e,(i=this.cellRangeFeature)==null||i.refreshHandle())}stopRowOrCellEdit(e=!1){this.beans.gos.get("editType")==="fullRow"?this.rowCtrl.stopEditing(e):this.stopEditing(e)}onPopupEditorClosed(){this.isEditing()&&this.stopEditingAndFocus()}takeValueFromCellEditor(e){let i={newValueExists:!1};if(e)return i;let o=this.cellComp.getCellEditor();return!o||o.isCancelAfterEnd&&o.isCancelAfterEnd()?i:{newValue:o.getValue(),newValueExists:!0}}saveNewValue(e,i){if(i===e)return!1;this.suppressRefreshCell=!0;let o=this.rowNode.setDataValue(this.column,i,"edit");return this.suppressRefreshCell=!1,o}stopEditing(e=!1){if(!this.editing)return!1;let{newValue:i,newValueExists:o}=this.takeValueFromCellEditor(e),r=this.rowNode.getValueFromValueService(this.column),n=!1;return o&&(n=this.saveNewValue(r,i)),this.setEditing(!1),this.cellComp.setEditDetails(),this.editCompDetails=void 0,this.updateAndFormatValue(!1),this.refreshCell({forceRefresh:!0,suppressFlash:!0}),this.dispatchEditingStoppedEvent(r,i,!e&&!!n),n}dispatchEditingStoppedEvent(e,i,o){let r=He(j({},this.createEvent(null,f.EVENT_CELL_EDITING_STOPPED)),{oldValue:e,newValue:i,valueChanged:o});this.beans.eventService.dispatchEvent(r)}createCellEditorParams(e,i){return this.beans.gos.addGridCommonParams({value:this.rowNode.getValueFromValueService(this.column),eventKey:e,column:this.column,colDef:this.column.getColDef(),rowIndex:this.getCellPosition().rowIndex,node:this.rowNode,data:this.rowNode.data,cellStartedEdit:i,onKeyDown:this.onKeyDown.bind(this),stopEditing:this.stopEditingAndFocus.bind(this),eGridCell:this.getGui(),parseValue:this.parseValue.bind(this),formatValue:this.formatValue.bind(this)})}createCellRendererParams(){return this.beans.gos.addGridCommonParams({value:this.value,valueFormatted:this.valueFormatted,getValue:()=>this.rowNode.getValueFromValueService(this.column),setValue:i=>this.beans.valueService.setValue(this.rowNode,this.column,i),formatValue:this.formatValue.bind(this),data:this.rowNode.data,node:this.rowNode,pinned:this.column.getPinned(),colDef:this.column.getColDef(),column:this.column,rowIndex:this.getCellPosition().rowIndex,refreshCell:this.refreshCell.bind(this),eGridCell:this.getGui(),eParentOfValue:this.cellComp.getParentOfValue(),registerRowDragger:(i,o,r,n)=>this.registerRowDragger(i,o,n),setTooltip:(i,o)=>{var r;this.tooltipFeature&&this.disableTooltipFeature(),this.enableTooltipFeature(i,o),(r=this.tooltipFeature)==null||r.refreshToolTip()}})}parseValue(e){return this.beans.valueService.parseValue(this.column,this.rowNode,e,this.getValue())}setFocusOutOnEditor(){if(!this.editing)return;let e=this.cellComp.getCellEditor();e&&e.focusOut&&e.focusOut()}setFocusInOnEditor(){if(!this.editing)return;let e=this.cellComp.getCellEditor();e&&e.focusIn?e.focusIn():this.focusCell(!0)}onCellChanged(e){e.column===this.column&&this.refreshCell({})}refreshOrDestroyCell(e){var i;this.refreshShouldDestroy()?(i=this.rowCtrl)==null||i.recreateCell(this):this.refreshCell(e)}refreshCell(e){var i,o,r,n;if(this.suppressRefreshCell||this.editing)return;let s=this.column.getColDef(),a=e!=null&&!!e.newData,l=e!=null&&!!e.suppressFlash||!!s.suppressCellFlash,d=s.field==null&&s.valueGetter==null&&s.showRowGroup==null,c=e&&e.forceRefresh||d||a,u=!!this.cellComp,h=this.updateAndFormatValue(u),p=c||h;if(u){if(p){this.showValue(a);let m=this.beans.filterManager.isSuppressFlashingCellsBecauseFiltering();!l&&!m&&(this.beans.gos.get("enableCellChangeFlash")||s.enableCellChangeFlash)&&this.flashCell(),(i=this.cellCustomStyleFeature)==null||i.applyUserStyles(),(o=this.cellCustomStyleFeature)==null||o.applyClassesFromColDef()}(r=this.tooltipFeature)==null||r.refreshToolTip(),(n=this.cellCustomStyleFeature)==null||n.applyCellClassRules()}}stopEditingAndFocus(e=!1,i=!1){this.stopRowOrCellEdit(),this.focusCell(!0),e||this.navigateAfterEdit(i)}navigateAfterEdit(e){if(this.beans.gos.get("enterNavigatesVerticallyAfterEdit")){let o=e?S.UP:S.DOWN;this.beans.navigationService.navigateToNextCell(null,o,this.getCellPosition(),!1)}}flashCell(e){var i,o;let r=(i=e?.flashDuration)!=null?i:e?.flashDelay,n=(o=e?.fadeDuration)!=null?o:e?.fadeDelay;this.animateCell("data-changed",r,n)}animateCell(e,i,o){if(!this.cellComp)return;let r=`ag-cell-${e}`,n=`ag-cell-${e}-animation`,{gos:s}=this.beans;i||(i=s.get("cellFlashDuration")),T(o)||(o=s.get("cellFadeDuration")),this.cellComp.addOrRemoveCssClass(r,!0),this.cellComp.addOrRemoveCssClass(n,!1),this.beans.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(()=>{this.isAlive()&&(this.cellComp.addOrRemoveCssClass(r,!1),this.cellComp.addOrRemoveCssClass(n,!0),this.eGui.style.transition=`background-color ${o}ms`,window.setTimeout(()=>{this.isAlive()&&(this.cellComp.addOrRemoveCssClass(n,!1),this.eGui.style.transition="")},o))},i)})}onFlashCells(e){if(!this.cellComp)return;let i=this.beans.cellPositionUtils.createId(this.getCellPosition());e.cells[i]&&this.animateCell("highlight")}isCellEditable(){return this.column.isCellEditable(this.rowNode)}isSuppressFillHandle(){return this.column.isSuppressFillHandle()}formatValue(e){var i;return(i=this.callValueFormatter(e))!=null?i:e}callValueFormatter(e){return this.beans.valueService.formatValue(this.column,this.rowNode,e)}updateAndFormatValue(e){let i=this.value,o=this.valueFormatted;return this.value=this.rowNode.getValueFromValueService(this.column),this.valueFormatted=this.callValueFormatter(this.value),e?!this.valuesAreEqual(i,this.value)||this.valueFormatted!=o:!0}valuesAreEqual(e,i){let o=this.column.getColDef();return o.equals?o.equals(e,i):e===i}getComp(){return this.cellComp}getValue(){return this.value}addDomData(){let e=this.getGui();this.beans.gos.setDomData(e,fm.DOM_DATA_KEY_CELL_CTRL,this),this.addDestroyFunc(()=>this.beans.gos.setDomData(e,fm.DOM_DATA_KEY_CELL_CTRL,null))}createEvent(e,i){return this.beans.gos.addGridCommonParams({type:i,node:this.rowNode,data:this.rowNode.data,value:this.value,column:this.column,colDef:this.column.getColDef(),rowPinned:this.rowNode.rowPinned,event:e,rowIndex:this.rowNode.rowIndex})}processCharacter(e){var i;(i=this.cellKeyboardListenerFeature)==null||i.processCharacter(e)}onKeyDown(e){var i;(i=this.cellKeyboardListenerFeature)==null||i.onKeyDown(e)}onMouseEvent(e,i){var o;(o=this.cellMouseListenerFeature)==null||o.onMouseEvent(e,i)}getGui(){return this.eGui}getColSpanningList(){return this.cellPositionFeature.getColSpanningList()}onLeftChanged(){var e;this.cellComp&&((e=this.cellPositionFeature)==null||e.onLeftChanged())}onDisplayedColumnsChanged(){this.eGui&&(this.refreshAriaColIndex(),this.refreshFirstAndLastStyles())}refreshFirstAndLastStyles(){let{cellComp:e,column:i,beans:o}=this;Lh.refreshFirstAndLastStyles(e,i,o.columnModel)}refreshAriaColIndex(){let e=this.beans.columnModel.getAriaColumnIndex(this.column);zm(this.getGui(),e)}isSuppressNavigable(){return this.column.isSuppressNavigable(this.rowNode)}onWidthChanged(){var e;return(e=this.cellPositionFeature)==null?void 0:e.onWidthChanged()}getColumn(){return this.column}getRowNode(){return this.rowNode}isPrintLayout(){return this.printLayout}getCellPosition(){return this.cellPosition}isEditing(){return this.editing}startRowOrCellEdit(e,i=null){if(!this.cellComp){this.onCellCompAttachedFuncs.push(()=>{this.startRowOrCellEdit(e,i)});return}this.beans.gos.get("editType")==="fullRow"?this.rowCtrl.startRowEditing(e,this):this.startEditing(e,!0,i)}getRowCtrl(){return this.rowCtrl}getRowPosition(){return{rowIndex:this.cellPosition.rowIndex,rowPinned:this.cellPosition.rowPinned}}updateRangeBordersIfRangeCount(){this.cellComp&&this.cellRangeFeature&&this.cellRangeFeature.updateRangeBordersIfRangeCount()}onRangeSelectionChanged(){this.cellComp&&this.cellRangeFeature&&this.cellRangeFeature.onRangeSelectionChanged()}isRangeSelectionEnabled(){return this.cellRangeFeature!=null}focusCell(e=!1){this.beans.focusService.setFocusedCell({rowIndex:this.getCellPosition().rowIndex,column:this.column,rowPinned:this.rowNode.rowPinned,forceBrowserFocus:e})}onRowIndexChanged(){this.createCellPosition(),this.onCellFocused(),this.cellRangeFeature&&this.cellRangeFeature.onRangeSelectionChanged()}onFirstRightPinnedChanged(){if(!this.cellComp)return;let e=this.column.isFirstRightPinned();this.cellComp.addOrRemoveCssClass(tk,e)}onLastLeftPinnedChanged(){if(!this.cellComp)return;let e=this.column.isLastLeftPinned();this.cellComp.addOrRemoveCssClass(ik,e)}onCellFocused(e){if(this.beans.gos.get("suppressCellFocus"))return;let i=this.beans.focusService.isCellFocused(this.cellPosition);if(!this.cellComp){i&&e?.forceBrowserFocus&&(this.focusEventToRestore=e);return}this.focusEventToRestore=void 0,this.cellComp.addOrRemoveCssClass(ek,i),i&&e&&e.forceBrowserFocus&&this.cellComp.getFocusableElement().focus({preventScroll:!!e.preventScrollOnBrowserFocus});let o=this.beans.gos.get("editType")==="fullRow";!i&&!o&&this.editing&&this.stopRowOrCellEdit(),i&&this.rowCtrl.announceDescription()}createCellPosition(){this.cellPosition={rowIndex:this.rowNode.rowIndex,rowPinned:go(this.rowNode.rowPinned),column:this.column}}applyStaticCssClasses(){this.cellComp.addOrRemoveCssClass(XO,!0),this.cellComp.addOrRemoveCssClass(ok,!0);let e=this.column.isAutoHeight()==!0;this.cellComp.addOrRemoveCssClass(ZO,e),this.cellComp.addOrRemoveCssClass(JO,!e)}onColumnHover(){if(!this.cellComp||!this.beans.gos.get("columnHoverHighlight"))return;let e=this.beans.columnHoverService.isHovered(this.column);this.cellComp.addOrRemoveCssClass(rk,e)}onColDefChanged(){if(!this.cellComp)return;if(this.column.isTooltipEnabled()?(this.disableTooltipFeature(),this.enableTooltipFeature()):this.disableTooltipFeature(),this.setWrapText(),!this.editing)this.refreshOrDestroyCell({forceRefresh:!0,suppressFlash:!0});else{let i=this.getCellEditor();if(i?.refresh){let{eventKey:o,cellStartedEdit:r}=this.editCompDetails.params,n=this.createCellEditorParams(o,r),s=this.column.getColDef(),a=this.beans.userComponentFactory.getCellEditorDetails(s,n);i.refresh(a.params)}}}setWrapText(){let e=this.column.getColDef().wrapText==!0;this.cellComp.addOrRemoveCssClass(nk,e)}dispatchCellContextMenuEvent(e){let i=this.column.getColDef(),o=this.createEvent(e,f.EVENT_CELL_CONTEXT_MENU);this.beans.eventService.dispatchEvent(o),i.onCellContextMenu&&window.setTimeout(()=>{this.beans.frameworkOverrides.wrapOutgoing(()=>{i.onCellContextMenu(o)})},0)}getCellRenderer(){return this.cellComp?this.cellComp.getCellRenderer():null}getCellEditor(){return this.cellComp?this.cellComp.getCellEditor():null}destroy(){this.onCellCompAttachedFuncs=[],super.destroy()}createSelectionCheckbox(){let e=new Ph;return this.beans.context.createBean(e),e.init({rowNode:this.rowNode,column:this.column}),e}createDndSource(){let e=new eE(this.rowNode,this.column,this.eGui);return this.beans.context.createBean(e),e}registerRowDragger(e,i,o){if(this.customRowDragComp){this.customRowDragComp.setDragElement(e,i);return}let r=this.createRowDragComp(e,i,o);r&&(this.customRowDragComp=r,this.addDestroyFunc(()=>{this.beans.context.destroyBean(r),this.customRowDragComp=null}))}createRowDragComp(e,i,o){let r=this.beans.gos.get("pagination"),n=this.beans.gos.get("rowDragManaged"),s=this.beans.gos.isRowModelType("clientSide");if(n){if(!s){q("managed row dragging is only allowed in the Client Side Row Model");return}if(r){q("managed row dragging is not possible when doing pagination");return}}let a=new Rn(()=>this.value,this.rowNode,this.column,e,i,o);return this.beans.context.createBean(a),a}};tE.DOM_DATA_KEY_CELL_CTRL="cellCtrl";var xn=tE,ak=0,iE=class mm extends A{constructor(e,i,o,r,n){super(),this.allRowGuis=[],this.active=!0,this.centerCellCtrls={list:[],map:{}},this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}},this.slideInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.fadeInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.rowDragComps=[],this.lastMouseDownOnDragger=!1,this.emptyStyle={},this.updateColumnListsPending=!1,this.rowId=null,this.businessKeySanitised=null,this.beans=i,this.gos=i.gos,this.rowNode=e,this.paginationPage=i.paginationProxy.getCurrentPage(),this.useAnimationFrameForCreate=r,this.printLayout=n,this.suppressRowTransform=this.gos.get("suppressRowTransform"),this.instanceId=e.id+"-"+ak++,this.rowId=rt(e.id),this.initRowBusinessKey(),this.rowFocused=i.focusService.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned),this.rowLevel=i.rowCssClassCalculator.calculateRowLevel(this.rowNode),this.setRowType(),this.setAnimateFlags(o),this.rowStyles=this.processStylesFromGridOptions(),this.isFullWidth()&&!this.gos.get("suppressCellFocus")&&(this.tabIndex=-1),this.addListeners()}initRowBusinessKey(){this.businessKeyForNodeFunc=this.gos.get("getBusinessKeyForNode"),this.updateRowBusinessKey()}updateRowBusinessKey(){if(typeof this.businessKeyForNodeFunc!="function")return;let e=this.businessKeyForNodeFunc(this.rowNode);this.businessKeySanitised=rt(e)}getRowId(){return this.rowId}getRowStyles(){return this.rowStyles}getTabIndex(){return this.tabIndex}isSticky(){return this.rowNode.sticky}getInstanceId(){return this.instanceId}setComp(e,i,o){let r={rowComp:e,element:i,containerType:o};this.allRowGuis.push(r),o==="left"?this.leftGui=r:o==="right"?this.rightGui=r:o==="fullWidth"?this.fullWidthGui=r:this.centerGui=r,this.initialiseRowComp(r),this.rowType!=="FullWidthLoading"&&!this.rowNode.rowPinned&&this.beans.rowRenderer.dispatchFirstDataRenderedEvent()}unsetComp(e){switch(this.allRowGuis=this.allRowGuis.filter(i=>i.containerType!==e),e){case"left":this.leftGui=void 0;break;case"right":this.rightGui=void 0;break;case"fullWidth":this.fullWidthGui=void 0;break;case"center":this.centerGui=void 0;break;default:}}isCacheable(){return this.rowType==="FullWidthDetail"&&this.gos.get("keepDetailRows")}setCached(e){let i=e?"none":"";this.allRowGuis.forEach(o=>o.element.style.display=i)}initialiseRowComp(e){let i=this.gos;this.listenOnDomOrder(e),this.beans.columnModel.wasAutoRowHeightEverActive()&&this.rowNode.checkAutoHeights(),this.onRowHeightChanged(e),this.updateRowIndexes(e),this.setFocusedClasses(e),this.setStylesFromGridOptions(!1,e),i.isRowSelection()&&this.rowNode.selectable&&this.onRowSelected(e),this.updateColumnLists(!this.useAnimationFrameForCreate);let o=e.rowComp;this.getInitialRowClasses(e.containerType).forEach(n=>o.addOrRemoveCssClass(n,!0)),this.executeSlideAndFadeAnimations(e),this.rowNode.group&&No(e.element,this.rowNode.expanded==!0),this.setRowCompRowId(o),this.setRowCompRowBusinessKey(o),i.setDomData(e.element,mm.DOM_DATA_KEY_ROW_CTRL,this),this.addDestroyFunc(()=>i.setDomData(e.element,mm.DOM_DATA_KEY_ROW_CTRL,null)),this.useAnimationFrameForCreate?this.beans.animationFrameService.createTask(this.addHoverFunctionality.bind(this,e.element),this.rowNode.rowIndex,"createTasksP2"):this.addHoverFunctionality(e.element),this.isFullWidth()&&this.setupFullWidth(e),i.get("rowDragEntireRow")&&this.addRowDraggerToRow(e),this.useAnimationFrameForCreate&&this.beans.animationFrameService.addDestroyTask(()=>{this.isAlive()&&e.rowComp.addOrRemoveCssClass("ag-after-created",!0)}),this.executeProcessRowPostCreateFunc()}setRowCompRowBusinessKey(e){this.businessKeySanitised!=null&&e.setRowBusinessKey(this.businessKeySanitised)}getBusinessKey(){return this.businessKeySanitised}setRowCompRowId(e){this.rowId=rt(this.rowNode.id),this.rowId!=null&&e.setRowId(this.rowId)}executeSlideAndFadeAnimations(e){let{containerType:i}=e;this.slideInAnimation[i]&&(tm(()=>{this.onTopChanged()}),this.slideInAnimation[i]=!1),this.fadeInAnimation[i]&&(tm(()=>{e.rowComp.addOrRemoveCssClass("ag-opacity-zero",!1)}),this.fadeInAnimation[i]=!1)}addRowDraggerToRow(e){if(this.gos.get("enableRangeSelection")){q("Setting `rowDragEntireRow: true` in the gridOptions doesn't work with `enableRangeSelection: true`");return}let i=this.beans.localeService.getLocaleTextFunc(),o=new Rn(()=>`1 ${i("rowDragRow","row")}`,this.rowNode,void 0,e.element,void 0,!0),r=this.createBean(o,this.beans.context);this.rowDragComps.push(r)}setupFullWidth(e){let i=this.getPinnedForContainer(e.containerType);if(this.rowType=="FullWidthDetail"&&!De.__assertRegistered("@ag-grid-enterprise/master-detail","cell renderer 'agDetailCellRenderer' (for master detail)",this.beans.context.getGridId()))return;let o=this.createFullWidthCompDetails(e.element,i);e.rowComp.showFullWidth(o)}isPrintLayout(){return this.printLayout}getFullWidthCellRenderers(){var e,i;return this.gos.get("embedFullWidthRows")?this.allRowGuis.map(o=>{var r;return(r=o?.rowComp)==null?void 0:r.getFullWidthCellRenderer()}):[(i=(e=this.fullWidthGui)==null?void 0:e.rowComp)==null?void 0:i.getFullWidthCellRenderer()]}getCellElement(e){let i=this.getCellCtrl(e);return i?i.getGui():null}executeProcessRowPostCreateFunc(){let e=this.gos.getCallback("processRowPostCreate");if(!e||!this.areAllContainersReady())return;let i={eRow:this.centerGui.element,ePinnedLeftRow:this.leftGui?this.leftGui.element:void 0,ePinnedRightRow:this.rightGui?this.rightGui.element:void 0,node:this.rowNode,rowIndex:this.rowNode.rowIndex,addRenderedRowListener:this.addEventListener.bind(this)};e(i)}areAllContainersReady(){let e=!!this.leftGui||!this.beans.columnModel.isPinningLeft(),i=!!this.centerGui,o=!!this.rightGui||!this.beans.columnModel.isPinningRight();return e&&i&&o}setRowType(){let e=this.rowNode.stub&&!this.gos.get("suppressServerSideFullWidthLoadingRow"),i=this.rowNode.isFullWidthCell(),o=this.gos.get("masterDetail")&&this.rowNode.detail,r=this.beans.columnModel.isPivotMode(),s=!!this.rowNode.group&&!this.rowNode.footer&&this.gos.isGroupUseEntireRow(r);e?this.rowType="FullWidthLoading":o?this.rowType="FullWidthDetail":i?this.rowType="FullWidth":s?this.rowType="FullWidthGroup":this.rowType="Normal"}updateColumnLists(e=!1,i=!1){if(this.isFullWidth())return;if(e||this.gos.get("suppressAnimationFrame")||this.printLayout){this.updateColumnListsImpl(i);return}this.updateColumnListsPending||(this.beans.animationFrameService.createTask(()=>{this.active&&this.updateColumnListsImpl(!0)},this.rowNode.rowIndex,"createTasksP1"),this.updateColumnListsPending=!0)}createCellCtrls(e,i,o=null){let r={list:[],map:{}},n=(s,a)=>{r.list.push(a),r.map[s]=a};return i.forEach(s=>{let a=s.getInstanceId(),l=e.map[a];l||(l=new xn(s,this.rowNode,this.beans,this)),n(a,l)}),e.list.forEach(s=>{if(r.map[s.getColumn().getInstanceId()]!=null)return;if(!this.isCellEligibleToBeRemoved(s,o)){n(s.getColumn().getInstanceId(),s);return}s.destroy()}),r}updateColumnListsImpl(e){this.updateColumnListsPending=!1,this.createAllCellCtrls(),this.setCellCtrls(e)}setCellCtrls(e){this.allRowGuis.forEach(i=>{let o=this.getCellCtrlsForContainer(i.containerType);i.rowComp.setCellCtrls(o,e)})}getCellCtrlsForContainer(e){switch(e){case"left":return this.leftCellCtrls.list;case"right":return this.rightCellCtrls.list;case"fullWidth":return[];case"center":return this.centerCellCtrls.list;default:let i=e;throw new Error(`Unhandled case: ${i}`)}}createAllCellCtrls(){let e=this.beans.columnModel;if(this.printLayout)this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,e.getAllDisplayedColumns()),this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}};else{let i=e.getViewportCenterColumnsForRow(this.rowNode);this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,i);let o=e.getDisplayedLeftColumnsForRow(this.rowNode);this.leftCellCtrls=this.createCellCtrls(this.leftCellCtrls,o,"left");let r=e.getDisplayedRightColumnsForRow(this.rowNode);this.rightCellCtrls=this.createCellCtrls(this.rightCellCtrls,r,"right")}}isCellEligibleToBeRemoved(e,i){if(e.getColumn().getPinned()!=i)return!0;let s=e.isEditing(),a=this.beans.focusService.isCellFocused(e.getCellPosition());if(s||a){let d=e.getColumn();return!(this.beans.columnModel.getAllDisplayedColumns().indexOf(d)>=0)}return!0}getDomOrder(){return this.gos.get("ensureDomOrder")||this.gos.isDomLayout("print")}listenOnDomOrder(e){let i=()=>{e.rowComp.setDomOrder(this.getDomOrder())};this.addManagedPropertyListener("domLayout",i),this.addManagedPropertyListener("ensureDomOrder",i)}setAnimateFlags(e){if(this.isSticky()||!e)return;let i=T(this.rowNode.oldRowTop),o=this.beans.columnModel.isPinningLeft(),r=this.beans.columnModel.isPinningRight();if(i){if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows")){this.slideInAnimation.fullWidth=!0;return}this.slideInAnimation.center=!0,this.slideInAnimation.left=o,this.slideInAnimation.right=r}else{if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows")){this.fadeInAnimation.fullWidth=!0;return}this.fadeInAnimation.center=!0,this.fadeInAnimation.left=o,this.fadeInAnimation.right=r}}isEditing(){return this.editingRow}isFullWidth(){return this.rowType!=="Normal"}refreshFullWidth(){let e=(a,l)=>a?a.rowComp.refreshFullWidth(()=>this.createFullWidthCompDetails(a.element,l).params):!0,i=e(this.fullWidthGui,null),o=e(this.centerGui,null),r=e(this.leftGui,"left"),n=e(this.rightGui,"right");return i&&o&&r&&n}addListeners(){this.addManagedListener(this.rowNode,de.EVENT_HEIGHT_CHANGED,()=>this.onRowHeightChanged()),this.addManagedListener(this.rowNode,de.EVENT_ROW_SELECTED,()=>this.onRowSelected()),this.addManagedListener(this.rowNode,de.EVENT_ROW_INDEX_CHANGED,this.onRowIndexChanged.bind(this)),this.addManagedListener(this.rowNode,de.EVENT_TOP_CHANGED,this.onTopChanged.bind(this)),this.addManagedListener(this.rowNode,de.EVENT_EXPANDED_CHANGED,this.updateExpandedCss.bind(this)),this.addManagedListener(this.rowNode,de.EVENT_HAS_CHILDREN_CHANGED,this.updateExpandedCss.bind(this)),this.rowNode.detail&&this.addManagedListener(this.rowNode.parent,de.EVENT_DATA_CHANGED,this.onRowNodeDataChanged.bind(this)),this.addManagedListener(this.rowNode,de.EVENT_DATA_CHANGED,this.onRowNodeDataChanged.bind(this)),this.addManagedListener(this.rowNode,de.EVENT_CELL_CHANGED,this.postProcessCss.bind(this)),this.addManagedListener(this.rowNode,de.EVENT_HIGHLIGHT_CHANGED,this.onRowNodeHighlightChanged.bind(this)),this.addManagedListener(this.rowNode,de.EVENT_DRAGGING_CHANGED,this.postProcessRowDragging.bind(this)),this.addManagedListener(this.rowNode,de.EVENT_UI_LEVEL_CHANGED,this.onUiLevelChanged.bind(this));let e=this.beans.eventService;this.addManagedListener(e,f.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED,this.onPaginationPixelOffsetChanged.bind(this)),this.addManagedListener(e,f.EVENT_HEIGHT_SCALE_CHANGED,this.onTopChanged.bind(this)),this.addManagedListener(e,f.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(e,f.EVENT_VIRTUAL_COLUMNS_CHANGED,this.onVirtualColumnsChanged.bind(this)),this.addManagedListener(e,f.EVENT_CELL_FOCUSED,this.onCellFocusChanged.bind(this)),this.addManagedListener(e,f.EVENT_CELL_FOCUS_CLEARED,this.onCellFocusChanged.bind(this)),this.addManagedListener(e,f.EVENT_PAGINATION_CHANGED,this.onPaginationChanged.bind(this)),this.addManagedListener(e,f.EVENT_MODEL_UPDATED,this.refreshFirstAndLastRowStyles.bind(this)),this.addManagedListener(e,f.EVENT_COLUMN_MOVED,this.updateColumnLists.bind(this)),this.addDestroyFunc(()=>{this.destroyBeans(this.rowDragComps,this.beans.context),this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature,this.beans.context))}),this.addManagedPropertyListeners(["rowDragEntireRow"],()=>{if(this.gos.get("rowDragEntireRow")){this.allRowGuis.forEach(o=>{this.addRowDraggerToRow(o)});return}this.destroyBeans(this.rowDragComps,this.beans.context),this.rowDragComps=[]}),this.addListenersForCellComps()}addListenersForCellComps(){this.addManagedListener(this.rowNode,de.EVENT_ROW_INDEX_CHANGED,()=>{this.getAllCellCtrls().forEach(e=>e.onRowIndexChanged())}),this.addManagedListener(this.rowNode,de.EVENT_CELL_CHANGED,e=>{this.getAllCellCtrls().forEach(i=>i.onCellChanged(e))})}onRowNodeDataChanged(e){if(this.isFullWidth()!==!!this.rowNode.isFullWidthCell()){this.beans.rowRenderer.redrawRow(this.rowNode);return}if(this.isFullWidth()){this.refreshFullWidth()||this.beans.rowRenderer.redrawRow(this.rowNode);return}this.getAllCellCtrls().forEach(o=>o.refreshCell({suppressFlash:!e.update,newData:!e.update})),this.allRowGuis.forEach(o=>{this.setRowCompRowId(o.rowComp),this.updateRowBusinessKey(),this.setRowCompRowBusinessKey(o.rowComp)}),this.onRowSelected(),this.postProcessCss()}postProcessCss(){this.setStylesFromGridOptions(!0),this.postProcessClassesFromGridOptions(),this.postProcessRowClassRules(),this.postProcessRowDragging()}onRowNodeHighlightChanged(){let e=this.rowNode.highlighted;this.allRowGuis.forEach(i=>{let o=e===0,r=e===1;i.rowComp.addOrRemoveCssClass("ag-row-highlight-above",o),i.rowComp.addOrRemoveCssClass("ag-row-highlight-below",r)})}postProcessRowDragging(){let e=this.rowNode.dragging;this.allRowGuis.forEach(i=>i.rowComp.addOrRemoveCssClass("ag-row-dragging",e))}updateExpandedCss(){let e=this.rowNode.isExpandable(),i=this.rowNode.expanded==!0;this.allRowGuis.forEach(o=>{o.rowComp.addOrRemoveCssClass("ag-row-group",e),o.rowComp.addOrRemoveCssClass("ag-row-group-expanded",e&&i),o.rowComp.addOrRemoveCssClass("ag-row-group-contracted",e&&!i),No(o.element,e&&i)})}onDisplayedColumnsChanged(){this.updateColumnLists(!0),this.beans.columnModel.wasAutoRowHeightEverActive()&&this.rowNode.checkAutoHeights()}onVirtualColumnsChanged(){this.updateColumnLists(!1,!0)}getRowPosition(){return{rowPinned:go(this.rowNode.rowPinned),rowIndex:this.rowNode.rowIndex}}onKeyboardNavigate(e){let i=this.allRowGuis.find(l=>l.element.contains(e.target));if(!((i?i.element:null)===e.target))return;let n=this.rowNode,s=this.beans.focusService.getFocusedCell(),a={rowIndex:n.rowIndex,rowPinned:n.rowPinned,column:s&&s.column};this.beans.navigationService.navigateToNextCell(e,e.key,a,!0),e.preventDefault()}onTabKeyDown(e){if(e.defaultPrevented||$i(e))return;let i=this.allRowGuis.find(s=>s.element.contains(e.target)),o=i?i.element:null,r=o===e.target,n=null;r||(n=this.beans.focusService.findNextFocusableElement(o,!1,e.shiftKey)),(this.isFullWidth()&&r||!n)&&this.beans.navigationService.onTabKeyDown(this,e)}getFullWidthElement(){return this.fullWidthGui?this.fullWidthGui.element:null}getRowYPosition(){var e;let i=(e=this.allRowGuis.find(o=>ni(o.element)))==null?void 0:e.element;return i?i.getBoundingClientRect().top:0}onFullWidthRowFocused(e){var i;let o=this.rowNode,r=e?this.isFullWidth()&&e.rowIndex===o.rowIndex&&e.rowPinned==o.rowPinned:!1,n=this.fullWidthGui?this.fullWidthGui.element:(i=this.centerGui)==null?void 0:i.element;n&&(n.classList.toggle("ag-full-width-focus",r),r&&n.focus({preventScroll:!0}))}recreateCell(e){this.centerCellCtrls=this.removeCellCtrl(this.centerCellCtrls,e),this.leftCellCtrls=this.removeCellCtrl(this.leftCellCtrls,e),this.rightCellCtrls=this.removeCellCtrl(this.rightCellCtrls,e),e.destroy(),this.updateColumnLists()}removeCellCtrl(e,i){let o={list:[],map:{}};return e.list.forEach(r=>{r!==i&&(o.list.push(r),o.map[r.getColumn().getInstanceId()]=r)}),o}onMouseEvent(e,i){switch(e){case"dblclick":this.onRowDblClick(i);break;case"click":this.onRowClick(i);break;case"touchstart":case"mousedown":this.onRowMouseDown(i);break}}createRowEvent(e,i){return this.gos.addGridCommonParams({type:e,node:this.rowNode,data:this.rowNode.data,rowIndex:this.rowNode.rowIndex,rowPinned:this.rowNode.rowPinned,event:i})}createRowEventWithSource(e,i){let o=this.createRowEvent(e,i);return o.source=this,o}onRowDblClick(e){if($i(e))return;let i=this.createRowEventWithSource(f.EVENT_ROW_DOUBLE_CLICKED,e);this.beans.eventService.dispatchEvent(i)}onRowMouseDown(e){if(this.lastMouseDownOnDragger=bn(e.target,"ag-row-drag",3),!this.isFullWidth())return;let i=this.rowNode,o=this.beans.columnModel;this.beans.rangeService&&this.beans.rangeService.removeAllCellRanges(),this.beans.focusService.setFocusedCell({rowIndex:i.rowIndex,column:o.getAllDisplayedColumns()[0],rowPinned:i.rowPinned,forceBrowserFocus:!0})}onRowClick(e){if($i(e)||this.lastMouseDownOnDragger)return;let o=this.createRowEventWithSource(f.EVENT_ROW_CLICKED,e);this.beans.eventService.dispatchEvent(o);let r=e.ctrlKey||e.metaKey,n=e.shiftKey;if(this.gos.get("groupSelectsChildren")&&this.rowNode.group||this.isRowSelectionBlocked()||this.gos.get("suppressRowClickSelection"))return;let a=this.gos.get("rowMultiSelectWithClick"),l=!this.gos.get("suppressRowDeselection"),d="rowClicked";if(this.rowNode.isSelected())a?this.rowNode.setSelectedParams({newValue:!1,event:e,source:d}):r?l&&this.rowNode.setSelectedParams({newValue:!1,event:e,source:d}):this.rowNode.setSelectedParams({newValue:!0,clearSelection:!n,rangeSelect:n,event:e,source:d});else{let c=a?!1:!r;this.rowNode.setSelectedParams({newValue:!0,clearSelection:c,rangeSelect:n,event:e,source:d})}}isRowSelectionBlocked(){return!this.rowNode.selectable||!!this.rowNode.rowPinned||!this.gos.isRowSelection()}setupDetailRowAutoHeight(e){if(this.rowType!=="FullWidthDetail"||!this.gos.get("detailRowAutoHeight"))return;let i=()=>{let r=e.clientHeight;if(r!=null&&r>0){let n=()=>{this.rowNode.setRowHeight(r),this.beans.clientSideRowModel?this.beans.clientSideRowModel.onRowHeightChanged():this.beans.serverSideRowModel&&this.beans.serverSideRowModel.onRowHeightChanged()};window.setTimeout(n,0)}},o=this.beans.resizeObserverService.observeResize(e,i);this.addDestroyFunc(o),i()}createFullWidthCompDetails(e,i){let o=this.gos.addGridCommonParams({fullWidth:!0,data:this.rowNode.data,node:this.rowNode,value:this.rowNode.key,valueFormatted:this.rowNode.key,rowIndex:this.rowNode.rowIndex,eGridCell:e,eParentOfValue:e,pinned:i,addRenderedRowListener:this.addEventListener.bind(this),registerRowDragger:(r,n,s,a)=>this.addFullWidthRowDragging(r,n,s,a),setTooltip:(r,n)=>this.refreshRowTooltip(r,n)});switch(this.rowType){case"FullWidthDetail":return this.beans.userComponentFactory.getFullWidthDetailCellRendererDetails(o);case"FullWidthGroup":return this.beans.userComponentFactory.getFullWidthGroupCellRendererDetails(o);case"FullWidthLoading":return this.beans.userComponentFactory.getFullWidthLoadingCellRendererDetails(o);default:return this.beans.userComponentFactory.getFullWidthCellRendererDetails(o)}}refreshRowTooltip(e,i){if(!this.fullWidthGui)return;let o={getGui:()=>this.fullWidthGui.element,getTooltipValue:()=>e,getLocation:()=>"fullWidthRow",shouldDisplayTooltip:i};this.tooltipFeature&&this.destroyBean(this.tooltipFeature,this.beans.context),this.tooltipFeature=this.createBean(new Ho(o,this.beans))}addFullWidthRowDragging(e,i,o="",r){if(!this.isFullWidth())return;let n=new Rn(()=>o,this.rowNode,void 0,e,i,r);this.createBean(n,this.beans.context),this.addDestroyFunc(()=>{this.destroyBean(n,this.beans.context)})}onUiLevelChanged(){let e=this.beans.rowCssClassCalculator.calculateRowLevel(this.rowNode);if(this.rowLevel!=e){let i="ag-row-level-"+e,o="ag-row-level-"+this.rowLevel;this.allRowGuis.forEach(r=>{r.rowComp.addOrRemoveCssClass(i,!0),r.rowComp.addOrRemoveCssClass(o,!1)})}this.rowLevel=e}isFirstRowOnPage(){return this.rowNode.rowIndex===this.beans.paginationProxy.getPageFirstRow()}isLastRowOnPage(){return this.rowNode.rowIndex===this.beans.paginationProxy.getPageLastRow()}refreshFirstAndLastRowStyles(){let e=this.isFirstRowOnPage(),i=this.isLastRowOnPage();this.firstRowOnPage!==e&&(this.firstRowOnPage=e,this.allRowGuis.forEach(o=>o.rowComp.addOrRemoveCssClass("ag-row-first",e))),this.lastRowOnPage!==i&&(this.lastRowOnPage=i,this.allRowGuis.forEach(o=>o.rowComp.addOrRemoveCssClass("ag-row-last",i)))}stopEditing(e=!1){if(this.stoppingRowEdit)return;let i=this.getAllCellCtrls(),o=this.editingRow;this.stoppingRowEdit=!0;let r=!1;for(let n of i){let s=n.stopEditing(e);o&&!e&&!r&&s&&(r=!0)}if(r){let n=this.createRowEvent(f.EVENT_ROW_VALUE_CHANGED);this.beans.eventService.dispatchEvent(n)}o&&this.setEditingRow(!1),this.stoppingRowEdit=!1}setInlineEditingCss(e){this.allRowGuis.forEach(i=>{i.rowComp.addOrRemoveCssClass("ag-row-inline-editing",e),i.rowComp.addOrRemoveCssClass("ag-row-not-inline-editing",!e)})}setEditingRow(e){this.editingRow=e,this.allRowGuis.forEach(o=>o.rowComp.addOrRemoveCssClass("ag-row-editing",e));let i=e?this.createRowEvent(f.EVENT_ROW_EDITING_STARTED):this.createRowEvent(f.EVENT_ROW_EDITING_STOPPED);this.beans.eventService.dispatchEvent(i)}startRowEditing(e=null,i=null,o=null){if(this.editingRow)return;this.getAllCellCtrls().reduce((n,s)=>{let a=s===i;return a?s.startEditing(e,a,o):s.startEditing(null,a,o),n?!0:s.isEditing()},!1)&&this.setEditingRow(!0)}getAllCellCtrls(){return this.leftCellCtrls.list.length===0&&this.rightCellCtrls.list.length===0?this.centerCellCtrls.list:[...this.centerCellCtrls.list,...this.leftCellCtrls.list,...this.rightCellCtrls.list]}postProcessClassesFromGridOptions(){let e=this.beans.rowCssClassCalculator.processClassesFromGridOptions(this.rowNode);!e||!e.length||e.forEach(i=>{this.allRowGuis.forEach(o=>o.rowComp.addOrRemoveCssClass(i,!0))})}postProcessRowClassRules(){this.beans.rowCssClassCalculator.processRowClassRules(this.rowNode,e=>{this.allRowGuis.forEach(i=>i.rowComp.addOrRemoveCssClass(e,!0))},e=>{this.allRowGuis.forEach(i=>i.rowComp.addOrRemoveCssClass(e,!1))})}setStylesFromGridOptions(e,i){e&&(this.rowStyles=this.processStylesFromGridOptions()),this.forEachGui(i,o=>o.rowComp.setUserStyles(this.rowStyles))}getPinnedForContainer(e){return e==="left"?"left":e==="right"?"right":null}getInitialRowClasses(e){let i=this.getPinnedForContainer(e),o={rowNode:this.rowNode,rowFocused:this.rowFocused,fadeRowIn:this.fadeInAnimation[e],rowIsEven:this.rowNode.rowIndex%2===0,rowLevel:this.rowLevel,fullWidthRow:this.isFullWidth(),firstRowOnPage:this.isFirstRowOnPage(),lastRowOnPage:this.isLastRowOnPage(),printLayout:this.printLayout,expandable:this.rowNode.isExpandable(),pinned:i};return this.beans.rowCssClassCalculator.getInitialRowClasses(o)}processStylesFromGridOptions(){let e=this.gos.get("rowStyle");if(e&&typeof e=="function"){console.warn("AG Grid: rowStyle should be an object of key/value styles, not be a function, use getRowStyle() instead");return}let i=this.gos.getCallback("getRowStyle"),o;if(i){let r={data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex};o=i(r)}return o||e?Object.assign({},e,o):this.emptyStyle}onRowSelected(e){let i=!!this.rowNode.isSelected();this.forEachGui(e,o=>{o.rowComp.addOrRemoveCssClass("ag-row-selected",i),ea(o.element,i),o.element.contains(this.beans.gos.getActiveDomElement())&&(o===this.centerGui||o===this.fullWidthGui)&&this.announceDescription()})}announceDescription(){if(this.isRowSelectionBlocked())return;let e=this.rowNode.isSelected();if(e&&this.beans.gos.get("suppressRowDeselection"))return;let o=this.beans.localeService.getLocaleTextFunc()(e?"ariaRowDeselect":"ariaRowSelect",`Press SPACE to ${e?"deselect":"select"} this row.`);this.beans.ariaAnnouncementService.announceValue(o)}addHoverFunctionality(e){this.active&&(this.addManagedListener(e,"mouseenter",()=>this.rowNode.onMouseEnter()),this.addManagedListener(e,"mouseleave",()=>this.rowNode.onMouseLeave()),this.addManagedListener(this.rowNode,de.EVENT_MOUSE_ENTER,()=>{!this.beans.dragService.isDragging()&&!this.gos.get("suppressRowHoverHighlight")&&(e.classList.add("ag-row-hover"),this.rowNode.setHovered(!0))}),this.addManagedListener(this.rowNode,de.EVENT_MOUSE_LEAVE,()=>{e.classList.remove("ag-row-hover"),this.rowNode.setHovered(!1)}))}roundRowTopToBounds(e){let i=this.beans.ctrlsService.getGridBodyCtrl().getScrollFeature().getApproximateVScollPosition(),o=this.applyPaginationOffset(i.top,!0)-100,r=this.applyPaginationOffset(i.bottom,!0)+100;return Math.min(Math.max(o,e),r)}getFrameworkOverrides(){return this.beans.frameworkOverrides}forEachGui(e,i){e?i(e):this.allRowGuis.forEach(i)}onRowHeightChanged(e){if(this.rowNode.rowHeight==null)return;let i=this.rowNode.rowHeight,o=this.beans.environment.getDefaultRowHeight(),n=this.gos.isGetRowHeightFunction()?this.gos.getRowHeightForNode(this.rowNode).height:void 0,s=n?`${Math.min(o,n)-2}px`:void 0;this.forEachGui(e,a=>{a.element.style.height=`${i}px`,s&&a.element.style.setProperty("--ag-line-height",s)})}addEventListener(e,i){super.addEventListener(e,i)}removeEventListener(e,i){super.removeEventListener(e,i)}destroyFirstPass(e=!1){if(this.active=!1,!e&&this.gos.isAnimateRows()&&!this.isSticky())if(this.rowNode.rowTop!=null){let r=this.roundRowTopToBounds(this.rowNode.rowTop);this.setRowTop(r)}else this.allRowGuis.forEach(r=>r.rowComp.addOrRemoveCssClass("ag-opacity-zero",!0));this.rowNode.setHovered(!1);let i=this.createRowEvent(f.EVENT_VIRTUAL_ROW_REMOVED);this.dispatchEvent(i),this.beans.eventService.dispatchEvent(i),super.destroy()}destroySecondPass(){this.allRowGuis.length=0,this.stopEditing();let e=i=>(i.list.forEach(o=>o.destroy()),{list:[],map:{}});this.centerCellCtrls=e(this.centerCellCtrls),this.leftCellCtrls=e(this.leftCellCtrls),this.rightCellCtrls=e(this.rightCellCtrls)}setFocusedClasses(e){this.forEachGui(e,i=>{i.rowComp.addOrRemoveCssClass("ag-row-focus",this.rowFocused),i.rowComp.addOrRemoveCssClass("ag-row-no-focus",!this.rowFocused)})}onCellFocusChanged(){let e=this.beans.focusService.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned);e!==this.rowFocused&&(this.rowFocused=e,this.setFocusedClasses()),!e&&this.editingRow&&this.stopEditing(!1)}onPaginationChanged(){let e=this.beans.paginationProxy.getCurrentPage();this.paginationPage!==e&&(this.paginationPage=e,this.onTopChanged()),this.refreshFirstAndLastRowStyles()}onTopChanged(){this.setRowTop(this.rowNode.rowTop)}onPaginationPixelOffsetChanged(){this.onTopChanged()}applyPaginationOffset(e,i=!1){if(this.rowNode.isRowPinned()||this.rowNode.sticky)return e;let o=this.beans.paginationProxy.getPixelOffset();return e+o*(i?1:-1)}setRowTop(e){if(!this.printLayout&&T(e)){let i=this.applyPaginationOffset(e),n=`${this.rowNode.isRowPinned()||this.rowNode.sticky?i:this.beans.rowContainerHeightService.getRealPixelPosition(i)}px`;this.setRowTopStyle(n)}}getInitialRowTop(e){return this.suppressRowTransform?this.getInitialRowTopShared(e):void 0}getInitialTransform(e){return this.suppressRowTransform?void 0:`translateY(${this.getInitialRowTopShared(e)})`}getInitialRowTopShared(e){if(this.printLayout)return"";let i;if(this.isSticky())i=this.rowNode.stickyRowTop;else{let o=this.slideInAnimation[e]?this.roundRowTopToBounds(this.rowNode.oldRowTop):this.rowNode.rowTop,r=this.applyPaginationOffset(o);i=this.rowNode.isRowPinned()?r:this.beans.rowContainerHeightService.getRealPixelPosition(r)}return i+"px"}setRowTopStyle(e){this.allRowGuis.forEach(i=>this.suppressRowTransform?i.rowComp.setTop(e):i.rowComp.setTransform(`translateY(${e})`))}getRowNode(){return this.rowNode}getCellCtrl(e){let i=null;return this.getAllCellCtrls().forEach(o=>{o.getColumn()==e&&(i=o)}),i!=null||this.getAllCellCtrls().forEach(o=>{o.getColSpanningList().indexOf(e)>=0&&(i=o)}),i}onRowIndexChanged(){this.rowNode.rowIndex!=null&&(this.onCellFocusChanged(),this.updateRowIndexes(),this.postProcessCss())}getRowIndex(){return this.rowNode.getRowIndexString()}updateRowIndexes(e){let i=this.rowNode.getRowIndexString(),o=this.beans.headerNavigationService.getHeaderRowCount()+this.beans.filterManager.getHeaderRowCount(),r=this.rowNode.rowIndex%2===0,n=o+this.rowNode.rowIndex+1;this.forEachGui(e,s=>{s.rowComp.setRowIndex(i),s.rowComp.addOrRemoveCssClass("ag-row-even",r),s.rowComp.addOrRemoveCssClass("ag-row-odd",!r),Nm(s.element,n)})}};iE.DOM_DATA_KEY_ROW_CTRL="renderedRow";var _n=iE,si=class extends A{constructor(t){super(),this.element=t}postConstruct(){this.addKeyboardListeners(),this.addMouseListeners(),this.mockContextMenuForIPad()}addKeyboardListeners(){let t="keydown",e=this.processKeyboardEvent.bind(this,t);this.addManagedListener(this.element,t,e)}addMouseListeners(){["dblclick","contextmenu","mouseover","mouseout","click",Pm("touchstart")?"touchstart":"mousedown"].forEach(i=>{let o=this.processMouseEvent.bind(this,i);this.addManagedListener(this.element,i,o)})}processMouseEvent(t,e){if(!this.mouseEventService.isEventFromThisGrid(e)||$i(e))return;let i=this.getRowForEvent(e),o=this.mouseEventService.getRenderedCellForEvent(e);t==="contextmenu"?this.handleContextMenuMouseEvent(e,void 0,i,o):(o&&o.onMouseEvent(t,e),i&&i.onMouseEvent(t,e))}mockContextMenuForIPad(){if(!Vo())return;let t=new St(this.element),e=i=>{let o=this.getRowForEvent(i.touchEvent),r=this.mouseEventService.getRenderedCellForEvent(i.touchEvent);this.handleContextMenuMouseEvent(void 0,i.touchEvent,o,r)};this.addManagedListener(t,St.EVENT_LONG_TAP,e),this.addDestroyFunc(()=>t.destroy())}getRowForEvent(t){let e=t.target;for(;e;){let i=this.gos.getDomData(e,_n.DOM_DATA_KEY_ROW_CTRL);if(i)return i;e=e.parentElement}return null}handleContextMenuMouseEvent(t,e,i,o){let r=i?i.getRowNode():null,n=o?o.getColumn():null,s=null;if(n){let d=t||e;o.dispatchCellContextMenuEvent(d??null),s=this.valueService.getValue(n,r)}let a=this.ctrlsService.getGridBodyCtrl(),l=o?o.getGui():a.getGridBodyElement();this.menuService.showContextMenu({mouseEvent:t,touchEvent:e,rowNode:r,column:n,value:s,anchorToElement:l})}getControlsForEventTarget(t){return{cellCtrl:Zu(this.gos,t,xn.DOM_DATA_KEY_CELL_CTRL),rowCtrl:Zu(this.gos,t,_n.DOM_DATA_KEY_ROW_CTRL)}}processKeyboardEvent(t,e){let{cellCtrl:i,rowCtrl:o}=this.getControlsForEventTarget(e.target);e.defaultPrevented||(i?this.processCellKeyboardEvent(i,t,e):o&&o.isFullWidth()&&this.processFullWidthRowKeyboardEvent(o,t,e))}processCellKeyboardEvent(t,e,i){let o=t.getRowNode(),r=t.getColumn(),n=t.isEditing();if(!th(this.gos,i,o,r,n)&&e==="keydown"&&(!n&&this.navigationService.handlePageScrollingKey(i)||t.onKeyDown(i),this.doGridOperations(i,t.isEditing()),_h(i)&&t.processCharacter(i)),e==="keydown"){let a=t.createEvent(i,f.EVENT_CELL_KEY_DOWN);this.eventService.dispatchEvent(a)}}processFullWidthRowKeyboardEvent(t,e,i){let o=t.getRowNode(),r=this.focusService.getFocusedCell(),n=r&&r.column;if(!th(this.gos,i,o,n,!1)){let a=i.key;if(e==="keydown")switch(a){case S.PAGE_HOME:case S.PAGE_END:case S.PAGE_UP:case S.PAGE_DOWN:this.navigationService.handlePageScrollingKey(i,!0);break;case S.UP:case S.DOWN:t.onKeyboardNavigate(i);break;case S.TAB:t.onTabKeyDown(i);break;default:}}if(e==="keydown"){let a=t.createRowEvent(f.EVENT_CELL_KEY_DOWN,i);this.eventService.dispatchEvent(a)}}doGridOperations(t,e){if(!t.ctrlKey&&!t.metaKey||e||!this.mouseEventService.isEventFromThisGrid(t))return;let i=r_(t);if(i===S.A)return this.onCtrlAndA(t);if(i===S.C)return this.onCtrlAndC(t);if(i===S.D)return this.onCtrlAndD(t);if(i===S.V)return this.onCtrlAndV(t);if(i===S.X)return this.onCtrlAndX(t);if(i===S.Y)return this.onCtrlAndY();if(i===S.Z)return this.onCtrlAndZ(t)}onCtrlAndA(t){let{pinnedRowModel:e,paginationProxy:i,rangeService:o}=this;if(o&&i.isRowsToRender()){let[r,n]=[e.isEmpty("top"),e.isEmpty("bottom")],s=r?null:"top",a,l;n?(a=null,l=this.paginationProxy.getRowCount()-1):(a="bottom",l=e.getPinnedBottomRowData().length-1);let d=this.columnModel.getAllDisplayedColumns();if(Mi(d))return;o.setCellRange({rowStartIndex:0,rowStartPinned:s,rowEndIndex:l,rowEndPinned:a,columnStart:d[0],columnEnd:be(d)})}t.preventDefault()}onCtrlAndC(t){if(!this.clipboardService||this.gos.get("enableCellTextSelection"))return;let{cellCtrl:e,rowCtrl:i}=this.getControlsForEventTarget(t.target);e?.isEditing()||i?.isEditing()||(t.preventDefault(),this.clipboardService.copyToClipboard())}onCtrlAndX(t){if(!this.clipboardService||this.gos.get("enableCellTextSelection")||this.gos.get("suppressCutToClipboard"))return;let{cellCtrl:e,rowCtrl:i}=this.getControlsForEventTarget(t.target);e?.isEditing()||i?.isEditing()||(t.preventDefault(),this.clipboardService.cutToClipboard(void 0,"ui"))}onCtrlAndV(t){let{cellCtrl:e,rowCtrl:i}=this.getControlsForEventTarget(t.target);e?.isEditing()||i?.isEditing()||this.clipboardService&&!this.gos.get("suppressClipboardPaste")&&this.clipboardService.pasteFromClipboard()}onCtrlAndD(t){this.clipboardService&&!this.gos.get("suppressClipboardPaste")&&this.clipboardService.copyRangeDown(),t.preventDefault()}onCtrlAndZ(t){this.gos.get("undoRedoCellEditing")&&(t.preventDefault(),t.shiftKey?this.undoRedoService.redo("ui"):this.undoRedoService.undo("ui"))}onCtrlAndY(){this.undoRedoService.redo("ui")}};g([v("mouseEventService")],si.prototype,"mouseEventService",2);g([v("valueService")],si.prototype,"valueService",2);g([v("menuService")],si.prototype,"menuService",2);g([v("ctrlsService")],si.prototype,"ctrlsService",2);g([v("navigationService")],si.prototype,"navigationService",2);g([v("focusService")],si.prototype,"focusService",2);g([v("undoRedoService")],si.prototype,"undoRedoService",2);g([v("columnModel")],si.prototype,"columnModel",2);g([v("paginationProxy")],si.prototype,"paginationProxy",2);g([v("pinnedRowModel")],si.prototype,"pinnedRowModel",2);g([Re("rangeService")],si.prototype,"rangeService",2);g([Re("clipboardService")],si.prototype,"clipboardService",2);g([I],si.prototype,"postConstruct",1);var pa=class extends A{constructor(t){super(),this.centerContainerCtrl=t}postConstruct(){this.ctrlsService.whenReady(t=>{this.gridBodyCtrl=t.gridBodyCtrl,this.listenForResize()}),this.addManagedListener(this.eventService,f.EVENT_SCROLLBAR_WIDTH_CHANGED,this.onScrollbarWidthChanged.bind(this)),this.addManagedPropertyListeners(["alwaysShowHorizontalScroll","alwaysShowVerticalScroll"],()=>{this.checkViewportAndScrolls()})}listenForResize(){let t=()=>this.onCenterViewportResized();this.centerContainerCtrl.registerViewportResizeListener(t),this.gridBodyCtrl.registerBodyViewportResizeListener(t)}onScrollbarWidthChanged(){this.checkViewportAndScrolls()}onCenterViewportResized(){if(this.centerContainerCtrl.isViewportInTheDOMTree()){this.keepPinnedColumnsNarrowerThanViewport(),this.checkViewportAndScrolls();let t=this.centerContainerCtrl.getCenterWidth();t!==this.centerWidth&&(this.centerWidth=t,this.columnModel.refreshFlexedColumns({viewportWidth:this.centerWidth,updateBodyWidths:!0,fireResizedEvent:!0}))}else this.bodyHeight=0}keepPinnedColumnsNarrowerThanViewport(){let t=this.gridBodyCtrl.getBodyViewportElement(),e=zn(t);if(e<=50)return;let i=this.getPinnedColumnsOverflowingViewport(e-50),o=this.gos.getCallback("processUnpinnedColumns");i.length&&(o&&(i=o({columns:i,viewportWidth:e})),this.columnModel.setColumnsPinned(i,null,"viewportSizeFeature"))}getPinnedColumnsOverflowingViewport(t){let e=this.pinnedWidthService.getPinnedRightWidth(),i=this.pinnedWidthService.getPinnedLeftWidth(),o=e+i;if(o<t)return[];let r=[...this.columnModel.getDisplayedLeftColumns()],n=[...this.columnModel.getDisplayedRightColumns()],s=0,a=0,l=0,d=[],c=o-l-t;for(;(a<r.length||s<n.length)&&c>0;){if(s<n.length){let u=n[s++];c-=u.getActualWidth(),d.push(u)}if(a<r.length&&c>0){let u=r[a++];c-=u.getActualWidth(),d.push(u)}}return d}checkViewportAndScrolls(){this.updateScrollVisibleService(),this.checkBodyHeight(),this.onHorizontalViewportChanged(),this.gridBodyCtrl.getScrollFeature().checkScrollLeft()}getBodyHeight(){return this.bodyHeight}checkBodyHeight(){let t=this.gridBodyCtrl.getBodyViewportElement(),e=kd(t);if(this.bodyHeight!==e){this.bodyHeight=e;let i={type:f.EVENT_BODY_HEIGHT_CHANGED};this.eventService.dispatchEvent(i)}}updateScrollVisibleService(){this.updateScrollVisibleServiceImpl(),setTimeout(this.updateScrollVisibleServiceImpl.bind(this),500)}updateScrollVisibleServiceImpl(){let t={horizontalScrollShowing:this.isHorizontalScrollShowing(),verticalScrollShowing:this.gridBodyCtrl.isVerticalScrollShowing()};this.scrollVisibleService.setScrollsVisible(t)}isHorizontalScrollShowing(){return this.centerContainerCtrl.isHorizontalScrollShowing()}onHorizontalViewportChanged(){let t=this.centerContainerCtrl.getCenterWidth(),e=this.centerContainerCtrl.getViewportScrollLeft();this.columnModel.setViewportPosition(t,e)}};g([v("ctrlsService")],pa.prototype,"ctrlsService",2);g([v("pinnedWidthService")],pa.prototype,"pinnedWidthService",2);g([v("columnModel")],pa.prototype,"columnModel",2);g([v("scrollVisibleService")],pa.prototype,"scrollVisibleService",2);g([I],pa.prototype,"postConstruct",1);var mv=class extends A{constructor(t){super(),this.element=t}postConstruct(){this.addManagedListener(this.eventService,f.EVENT_LEFT_PINNED_WIDTH_CHANGED,this.onPinnedLeftWidthChanged.bind(this))}onPinnedLeftWidthChanged(){let t=this.pinnedWidthService.getPinnedLeftWidth(),e=t>0;me(this.element,e),Ii(this.element,t)}getWidth(){return this.pinnedWidthService.getPinnedLeftWidth()}};g([v("pinnedWidthService")],mv.prototype,"pinnedWidthService",2);g([I],mv.prototype,"postConstruct",1);var vv=class extends A{constructor(t){super(),this.element=t}postConstruct(){this.addManagedListener(this.eventService,f.EVENT_RIGHT_PINNED_WIDTH_CHANGED,this.onPinnedRightWidthChanged.bind(this))}onPinnedRightWidthChanged(){let t=this.pinnedWidthService.getPinnedRightWidth(),e=t>0;me(this.element,e),Ii(this.element,t)}getWidth(){return this.pinnedWidthService.getPinnedRightWidth()}};g([v("pinnedWidthService")],vv.prototype,"pinnedWidthService",2);g([I],vv.prototype,"postConstruct",1);var Nh=class extends A{constructor(t,e){super(),this.eContainer=t,this.eViewport=e}postConstruct(){this.addManagedListener(this.eventService,f.EVENT_ROW_CONTAINER_HEIGHT_CHANGED,this.onHeightChanged.bind(this))}onHeightChanged(){let t=this.maxDivHeightScaler.getUiContainerHeight(),e=t!=null?`${t}px`:"";this.eContainer.style.height=e,this.eViewport&&(this.eViewport.style.height=e)}};g([v("rowContainerHeightService")],Nh.prototype,"maxDivHeightScaler",2);g([I],Nh.prototype,"postConstruct",1);var zh=class extends A{constructor(t){super(),this.eContainer=t}postConstruct(){if(!this.rangeService)return;this.params={eElement:this.eContainer,onDragStart:this.rangeService.onDragStart.bind(this.rangeService),onDragStop:this.rangeService.onDragStop.bind(this.rangeService),onDragging:this.rangeService.onDragging.bind(this.rangeService)},this.addManagedPropertyListener("enableRangeSelection",e=>{if(e.currentValue){this.enableFeature();return}this.disableFeature()}),this.addDestroyFunc(()=>this.disableFeature()),this.gos.get("enableRangeSelection")&&this.enableFeature()}enableFeature(){this.dragService.addDragSource(this.params)}disableFeature(){this.dragService.removeDragSource(this.params)}};g([v("dragService")],zh.prototype,"dragService",2);g([Re("rangeService")],zh.prototype,"rangeService",2);g([I],zh.prototype,"postConstruct",1);var fa=class extends A{constructor(t,e=!1){super(),this.callback=t,this.addSpacer=e}postConstruct(){let t=this.setWidth.bind(this);this.addManagedPropertyListener("domLayout",t),this.addManagedListener(this.eventService,f.EVENT_COLUMN_CONTAINER_WIDTH_CHANGED,t),this.addManagedListener(this.eventService,f.EVENT_DISPLAYED_COLUMNS_CHANGED,t),this.addManagedListener(this.eventService,f.EVENT_LEFT_PINNED_WIDTH_CHANGED,t),this.addSpacer&&(this.addManagedListener(this.eventService,f.EVENT_RIGHT_PINNED_WIDTH_CHANGED,t),this.addManagedListener(this.eventService,f.EVENT_SCROLL_VISIBILITY_CHANGED,t),this.addManagedListener(this.eventService,f.EVENT_SCROLLBAR_WIDTH_CHANGED,t)),this.setWidth()}setWidth(){let{columnModel:t}=this,e=this.gos.isDomLayout("print"),i=t.getBodyContainerWidth(),o=t.getDisplayedColumnsLeftWidth(),r=t.getDisplayedColumnsRightWidth(),n;e?n=i+o+r:(n=i,this.addSpacer&&(this.gos.get("enableRtl")?o:r)===0&&this.scrollVisibleService.isVerticalScrollShowing()&&(n+=this.gos.getScrollbarWidth())),this.callback(n)}};g([v("columnModel")],fa.prototype,"columnModel",2);g([v("scrollVisibleService")],fa.prototype,"scrollVisibleService",2);g([I],fa.prototype,"postConstruct",1);function lk(t){switch(t){case"center":case"topCenter":case"stickyTopCenter":case"bottomCenter":case"stickyBottomCenter":return"center";case"left":case"topLeft":case"stickyTopLeft":case"bottomLeft":case"stickyBottomLeft":return"left";case"right":case"topRight":case"stickyTopRight":case"bottomRight":case"stickyBottomRight":return"right";case"fullWidth":case"topFullWidth":case"stickyTopFullWidth":case"bottomFullWidth":case"stickyBottomFullWidth":return"fullWidth";default:throw Error("Invalid Row Container Type")}}var dk=_r([["center","ag-center-cols-container"],["left","ag-pinned-left-cols-container"],["right","ag-pinned-right-cols-container"],["fullWidth","ag-full-width-container"],["topCenter","ag-floating-top-container"],["topLeft","ag-pinned-left-floating-top"],["topRight","ag-pinned-right-floating-top"],["topFullWidth","ag-floating-top-full-width-container"],["stickyTopCenter","ag-sticky-top-container"],["stickyTopLeft","ag-pinned-left-sticky-top"],["stickyTopRight","ag-pinned-right-sticky-top"],["stickyTopFullWidth","ag-sticky-top-full-width-container"],["stickyBottomCenter","ag-sticky-bottom-container"],["stickyBottomLeft","ag-pinned-left-sticky-bottom"],["stickyBottomRight","ag-pinned-right-sticky-bottom"],["stickyBottomFullWidth","ag-sticky-bottom-full-width-container"],["bottomCenter","ag-floating-bottom-container"],["bottomLeft","ag-pinned-left-floating-bottom"],["bottomRight","ag-pinned-right-floating-bottom"],["bottomFullWidth","ag-floating-bottom-full-width-container"]]),ck=_r([["center","ag-center-cols-viewport"],["topCenter","ag-floating-top-viewport"],["stickyTopCenter","ag-sticky-top-viewport"],["bottomCenter","ag-floating-bottom-viewport"],["stickyBottomCenter","ag-sticky-bottom-viewport"]]),Un=class oE extends A{constructor(e){super(),this.visible=!0,this.EMPTY_CTRLS=[],this.name=e,this.isFullWithContainer=this.name==="topFullWidth"||this.name==="stickyTopFullWidth"||this.name==="stickyBottomFullWidth"||this.name==="bottomFullWidth"||this.name==="fullWidth"}static getRowContainerCssClasses(e){let i=dk.get(e),o=ck.get(e);return{container:i,viewport:o}}static getPinned(e){switch(e){case"bottomLeft":case"topLeft":case"stickyTopLeft":case"stickyBottomLeft":case"left":return"left";case"bottomRight":case"topRight":case"stickyTopRight":case"stickyBottomRight":case"right":return"right";default:return null}}postConstruct(){this.enableRtl=this.gos.get("enableRtl"),this.forContainers(["center"],()=>this.viewportSizeFeature=this.createManagedBean(new pa(this)))}registerWithCtrlsService(){switch(this.name){case"fullWidth":case"topFullWidth":case"stickyTopFullWidth":case"bottomFullWidth":case"stickyBottomFullWidth":return;default:this.ctrlsService.register(this.name,this)}}forContainers(e,i){e.indexOf(this.name)>=0&&i()}getContainerElement(){return this.eContainer}getViewportSizeFeature(){return this.viewportSizeFeature}setComp(e,i,o){this.comp=e,this.eContainer=i,this.eViewport=o,this.createManagedBean(new si(this.eContainer)),this.addPreventScrollWhileDragging(),this.listenOnDomOrder(),this.stopHScrollOnPinnedRows();let r=["topCenter","topLeft","topRight"],n=["stickyTopCenter","stickyTopLeft","stickyTopRight"],s=["stickyBottomCenter","stickyBottomLeft","stickyBottomRight"],a=["bottomCenter","bottomLeft","bottomRight"],l=["center","left","right"],d=[...r,...a,...l,...n,...s],c=["center","left","right","fullWidth"],u=["center","topCenter","stickyTopCenter","bottomCenter","stickyBottomCenter"],h=["left","bottomLeft","topLeft","stickyTopLeft","stickyBottomLeft"],p=["right","bottomRight","topRight","stickyTopRight","stickyBottomRight"];this.forContainers(h,()=>{this.pinnedWidthFeature=this.createManagedBean(new mv(this.eContainer)),this.addManagedListener(this.eventService,f.EVENT_LEFT_PINNED_WIDTH_CHANGED,()=>this.onPinnedWidthChanged())}),this.forContainers(p,()=>{this.pinnedWidthFeature=this.createManagedBean(new vv(this.eContainer)),this.addManagedListener(this.eventService,f.EVENT_RIGHT_PINNED_WIDTH_CHANGED,()=>this.onPinnedWidthChanged())}),this.forContainers(c,()=>this.createManagedBean(new Nh(this.eContainer,this.name==="center"?o:void 0))),this.forContainers(d,()=>this.createManagedBean(new zh(this.eContainer))),this.forContainers(u,()=>this.createManagedBean(new fa(m=>this.comp.setContainerWidth(`${m}px`)))),this.addListeners(),this.registerWithCtrlsService()}addListeners(){this.addManagedListener(this.eventService,f.EVENT_DISPLAYED_COLUMNS_CHANGED,()=>this.onDisplayedColumnsChanged()),this.addManagedListener(this.eventService,f.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,()=>this.onDisplayedColumnsWidthChanged()),this.addManagedListener(this.eventService,f.EVENT_DISPLAYED_ROWS_CHANGED,e=>this.onDisplayedRowsChanged(e.afterScroll)),this.onDisplayedColumnsChanged(),this.onDisplayedColumnsWidthChanged(),this.onDisplayedRowsChanged()}listenOnDomOrder(){if(["stickyTopCenter","stickyTopLeft","stickyTopRight","stickyTopFullWidth","stickyBottomCenter","stickyBottomLeft","stickyBottomRight","stickyBottomFullWidth"].indexOf(this.name)>=0){this.comp.setDomOrder(!0);return}let o=()=>{let r=this.gos.get("ensureDomOrder"),n=this.gos.isDomLayout("print");this.comp.setDomOrder(r||n)};this.addManagedPropertyListener("domLayout",o),o()}stopHScrollOnPinnedRows(){this.forContainers(["topCenter","stickyTopCenter","bottomCenter","stickyBottomCenter"],()=>{let e=()=>this.eViewport.scrollLeft=0;this.addManagedListener(this.eViewport,"scroll",e)})}onDisplayedColumnsChanged(){this.forContainers(["center"],()=>this.onHorizontalViewportChanged())}onDisplayedColumnsWidthChanged(){this.forContainers(["center"],()=>this.onHorizontalViewportChanged())}addPreventScrollWhileDragging(){let e=i=>{this.dragService.isDragging()&&i.cancelable&&i.preventDefault()};this.eContainer.addEventListener("touchmove",e,{passive:!1}),this.addDestroyFunc(()=>this.eContainer.removeEventListener("touchmove",e))}onHorizontalViewportChanged(e=!1){let i=this.getCenterWidth(),o=this.getCenterViewportScrollLeft();this.columnModel.setViewportPosition(i,o,e)}getCenterWidth(){return zn(this.eViewport)}getCenterViewportScrollLeft(){return gd(this.eViewport,this.enableRtl)}registerViewportResizeListener(e){let i=this.resizeObserverService.observeResize(this.eViewport,e);this.addDestroyFunc(()=>i())}isViewportInTheDOMTree(){return Qm(this.eViewport)}getViewportScrollLeft(){return gd(this.eViewport,this.enableRtl)}isHorizontalScrollShowing(){return this.gos.get("alwaysShowHorizontalScroll")||$x(this.eViewport)}getViewportElement(){return this.eViewport}setContainerTranslateX(e){this.eContainer.style.transform=`translateX(${e}px)`}getHScrollPosition(){return{left:this.eViewport.scrollLeft,right:this.eViewport.scrollLeft+this.eViewport.offsetWidth}}setCenterViewportScrollLeft(e){pd(this.eViewport,e,this.enableRtl)}isContainerVisible(){return!oE.getPinned(this.name)||!!this.pinnedWidthFeature&&this.pinnedWidthFeature.getWidth()>0}onPinnedWidthChanged(){let e=this.isContainerVisible();this.visible!=e&&(this.visible=e,this.onDisplayedRowsChanged())}onDisplayedRowsChanged(e=!1){let i=this.getRowCtrls();if(!this.visible||i.length===0){this.comp.setRowCtrls({rowCtrls:this.EMPTY_CTRLS});return}let o=this.gos.isDomLayout("print"),n=this.gos.get("embedFullWidthRows")||o,s=i.filter(a=>{let l=a.isFullWidth();return this.isFullWithContainer?!n&&l:n||!l});this.comp.setRowCtrls({rowCtrls:s,useFlushSync:e})}getRowCtrls(){switch(this.name){case"topCenter":case"topLeft":case"topRight":case"topFullWidth":return this.rowRenderer.getTopRowCtrls();case"stickyTopCenter":case"stickyTopLeft":case"stickyTopRight":case"stickyTopFullWidth":return this.rowRenderer.getStickyTopRowCtrls();case"stickyBottomCenter":case"stickyBottomLeft":case"stickyBottomRight":case"stickyBottomFullWidth":return this.rowRenderer.getStickyBottomRowCtrls();case"bottomCenter":case"bottomLeft":case"bottomRight":case"bottomFullWidth":return this.rowRenderer.getBottomRowCtrls();default:return this.rowRenderer.getCentreRowCtrls()}}};g([v("dragService")],Un.prototype,"dragService",2);g([v("ctrlsService")],Un.prototype,"ctrlsService",2);g([v("columnModel")],Un.prototype,"columnModel",2);g([v("resizeObserverService")],Un.prototype,"resizeObserverService",2);g([v("rowRenderer")],Un.prototype,"rowRenderer",2);g([I],Un.prototype,"postConstruct",1);var rE=Un,uk=`<div class="ag-root ag-unselectable" role="treegrid">
        <ag-header-root ref="gridHeader"></ag-header-root>
        <div class="ag-floating-top" ref="eTop" role="presentation">
            <ag-row-container ref="topLeftContainer" name="topLeft"></ag-row-container>
            <ag-row-container ref="topCenterContainer" name="topCenter"></ag-row-container>
            <ag-row-container ref="topRightContainer" name="topRight"></ag-row-container>
            <ag-row-container ref="topFullWidthContainer" name="topFullWidth"></ag-row-container>
        </div>
        <div class="ag-body" ref="eBody" role="presentation">
            <div class="ag-body-viewport" ref="eBodyViewport" role="presentation">
                <ag-row-container ref="leftContainer" name="left"></ag-row-container>
                <ag-row-container ref="centerContainer" name="center"></ag-row-container>
                <ag-row-container ref="rightContainer" name="right"></ag-row-container>
                <ag-row-container ref="fullWidthContainer" name="fullWidth"></ag-row-container>
            </div>
            <ag-fake-vertical-scroll></ag-fake-vertical-scroll>
        </div>
        <div class="ag-sticky-top" ref="eStickyTop" role="presentation">
            <ag-row-container ref="stickyTopLeftContainer" name="stickyTopLeft"></ag-row-container>
            <ag-row-container ref="stickyTopCenterContainer" name="stickyTopCenter"></ag-row-container>
            <ag-row-container ref="stickyTopRightContainer" name="stickyTopRight"></ag-row-container>
            <ag-row-container ref="stickyTopFullWidthContainer" name="stickyTopFullWidth"></ag-row-container>
        </div>
        <div class="ag-sticky-bottom" ref="eStickyBottom" role="presentation">
            <ag-row-container ref="stickyBottomLeftContainer" name="stickyBottomLeft"></ag-row-container>
            <ag-row-container ref="stickyBottomCenterContainer" name="stickyBottomCenter"></ag-row-container>
            <ag-row-container ref="stickyBottomRightContainer" name="stickyBottomRight"></ag-row-container>
            <ag-row-container ref="stickyBottomFullWidthContainer" name="stickyBottomFullWidth"></ag-row-container>
        </div>
        <div class="ag-floating-bottom" ref="eBottom" role="presentation">
            <ag-row-container ref="bottomLeftContainer" name="bottomLeft"></ag-row-container>
            <ag-row-container ref="bottomCenterContainer" name="bottomCenter"></ag-row-container>
            <ag-row-container ref="bottomRightContainer" name="bottomRight"></ag-row-container>
            <ag-row-container ref="bottomFullWidthContainer" name="bottomFullWidth"></ag-row-container>
        </div>
        <ag-fake-horizontal-scroll></ag-fake-horizontal-scroll>
        <ag-overlay-wrapper></ag-overlay-wrapper>
    </div>`,Xi=class extends J{constructor(){super(uk)}init(){let t=(i,o)=>{let r=`${i}px`;o.style.minHeight=r,o.style.height=r},e={setRowAnimationCssOnBodyViewport:(i,o)=>this.setRowAnimationCssOnBodyViewport(i,o),setColumnCount:i=>Ix(this.getGui(),i),setRowCount:i=>Ax(this.getGui(),i),setTopHeight:i=>t(i,this.eTop),setBottomHeight:i=>t(i,this.eBottom),setTopDisplay:i=>this.eTop.style.display=i,setBottomDisplay:i=>this.eBottom.style.display=i,setStickyTopHeight:i=>this.eStickyTop.style.height=i,setStickyTopTop:i=>this.eStickyTop.style.top=i,setStickyTopWidth:i=>this.eStickyTop.style.width=i,setStickyBottomHeight:i=>this.eStickyBottom.style.height=i,setStickyBottomBottom:i=>this.eStickyBottom.style.bottom=i,setStickyBottomWidth:i=>this.eStickyBottom.style.width=i,setColumnMovingCss:(i,o)=>this.addOrRemoveCssClass(i,o),updateLayoutClasses:(i,o)=>{[this.eBodyViewport.classList,this.eBody.classList].forEach(n=>{n.toggle("ag-layout-auto-height",o.autoHeight),n.toggle("ag-layout-normal",o.normal),n.toggle("ag-layout-print",o.print)}),this.addOrRemoveCssClass("ag-layout-auto-height",o.autoHeight),this.addOrRemoveCssClass("ag-layout-normal",o.normal),this.addOrRemoveCssClass("ag-layout-print",o.print)},setAlwaysVerticalScrollClass:(i,o)=>this.eBodyViewport.classList.toggle(J_,o),registerBodyViewportResizeListener:i=>{let o=this.resizeObserverService.observeResize(this.eBodyViewport,i);this.addDestroyFunc(()=>o())},setPinnedTopBottomOverflowY:i=>this.eTop.style.overflowY=this.eBottom.style.overflowY=i,setCellSelectableCss:(i,o)=>{[this.eTop,this.eBodyViewport,this.eBottom].forEach(r=>r.classList.toggle(i,o))},setBodyViewportWidth:i=>this.eBodyViewport.style.width=i};this.ctrl=this.createManagedBean(new Yt),this.ctrl.setComp(e,this.getGui(),this.eBodyViewport,this.eTop,this.eBottom,this.eStickyTop,this.eStickyBottom),(this.rangeService&&this.gos.get("enableRangeSelection")||this.gos.get("rowSelection")==="multiple")&&Tx(this.getGui(),!0)}setRowAnimationCssOnBodyViewport(t,e){let i=this.eBodyViewport.classList;i.toggle("ag-row-animation",e),i.toggle("ag-row-no-animation",!e)}getFloatingTopBottom(){return[this.eTop,this.eBottom]}};g([v("resizeObserverService")],Xi.prototype,"resizeObserverService",2);g([Re("rangeService")],Xi.prototype,"rangeService",2);g([k("eBodyViewport")],Xi.prototype,"eBodyViewport",2);g([k("eStickyTop")],Xi.prototype,"eStickyTop",2);g([k("eStickyBottom")],Xi.prototype,"eStickyBottom",2);g([k("eTop")],Xi.prototype,"eTop",2);g([k("eBottom")],Xi.prototype,"eBottom",2);g([k("gridHeader")],Xi.prototype,"headerRootComp",2);g([k("eBody")],Xi.prototype,"eBody",2);g([I],Xi.prototype,"init",1);var oa=class extends A{postConstruct(){this.addManagedListener(this.eventService,f.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,f.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onDisplayedColumnsWidthChanged.bind(this))}onDisplayedColumnsChanged(){this.update()}onDisplayedColumnsWidthChanged(){this.update()}update(){this.columnAnimationService.isActive()?this.columnAnimationService.executeLaterVMTurn(()=>{this.columnAnimationService.executeLaterVMTurn(()=>this.updateImpl())}):this.updateImpl()}updateImpl(){let t=this.ctrlsService.get("center");if(!t||this.columnAnimationService.isActive())return;let e={horizontalScrollShowing:t.isHorizontalScrollShowing(),verticalScrollShowing:this.isVerticalScrollShowing()};this.setScrollsVisible(e)}setScrollsVisible(t){if(this.horizontalScrollShowing!==t.horizontalScrollShowing||this.verticalScrollShowing!==t.verticalScrollShowing){this.horizontalScrollShowing=t.horizontalScrollShowing,this.verticalScrollShowing=t.verticalScrollShowing;let i={type:f.EVENT_SCROLL_VISIBILITY_CHANGED};this.eventService.dispatchEvent(i)}}isHorizontalScrollShowing(){return this.horizontalScrollShowing}isVerticalScrollShowing(){return this.verticalScrollShowing}};g([v("ctrlsService")],oa.prototype,"ctrlsService",2);g([v("columnAnimationService")],oa.prototype,"columnAnimationService",2);g([I],oa.prototype,"postConstruct",1);oa=g([V("scrollVisibleService")],oa);var Lo=class extends A{constructor(){super(...arguments),this.gridInstanceId=Lo.gridInstanceSequence.next()}stampTopLevelGridCompWithGridInstance(t){t[Lo.GRID_DOM_KEY]=this.gridInstanceId}getRenderedCellForEvent(t){return Zu(this.gos,t.target,xn.DOM_DATA_KEY_CELL_CTRL)}isEventFromThisGrid(t){return this.isElementInThisGrid(t.target)}isElementInThisGrid(t){let e=t;for(;e;){let i=e[Lo.GRID_DOM_KEY];if(T(i))return i===this.gridInstanceId;e=e.parentElement}return!1}getCellPositionForEvent(t){let e=this.getRenderedCellForEvent(t);return e?e.getCellPosition():null}getNormalisedPosition(t){let e=this.gos.isDomLayout("normal"),i=t,o,r;if(i.clientX!=null||i.clientY!=null?(o=i.clientX,r=i.clientY):(o=i.x,r=i.y),e){let n=this.ctrlsService.getGridBodyCtrl(),s=n.getScrollFeature().getVScrollPosition(),a=n.getScrollFeature().getHScrollPosition();o+=a.left,r+=s.top}return{x:o,y:r}}};Lo.gridInstanceSequence=new ia;Lo.GRID_DOM_KEY="__ag_grid_instance";g([v("ctrlsService")],Lo.prototype,"ctrlsService",2);Lo=g([V("mouseEventService")],Lo);var zt=class extends A{constructor(){super(),this.onPageDown=im(this.onPageDown,100),this.onPageUp=im(this.onPageUp,100)}postConstruct(){this.ctrlsService.whenReady(t=>{this.gridBodyCon=t.gridBodyCtrl})}handlePageScrollingKey(t,e=!1){let i=t.key,o=t.altKey,r=t.ctrlKey||t.metaKey,n=!!this.rangeService&&t.shiftKey,s=this.mouseEventService.getCellPositionForEvent(t),a=!1;switch(i){case S.PAGE_HOME:case S.PAGE_END:!r&&!o&&(this.onHomeOrEndKey(i),a=!0);break;case S.LEFT:case S.RIGHT:case S.UP:case S.DOWN:if(!s)return!1;r&&!o&&!n&&(this.onCtrlUpDownLeftRight(i,s),a=!0);break;case S.PAGE_DOWN:case S.PAGE_UP:!r&&!o&&(a=this.handlePageUpDown(i,s,e));break}return a&&t.preventDefault(),a}handlePageUpDown(t,e,i){return i&&(e=this.focusService.getFocusedCell()),e?(t===S.PAGE_UP?this.onPageUp(e):this.onPageDown(e),!0):!1}navigateTo(t){var e;let{scrollIndex:i,scrollType:o,scrollColumn:r,focusIndex:n,focusColumn:s}=t;T(r)&&!r.isPinned()&&this.gridBodyCon.getScrollFeature().ensureColumnVisible(r),T(i)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(i,o),t.isAsync||this.gridBodyCon.getScrollFeature().ensureIndexVisible(n),this.focusService.setFocusedCell({rowIndex:n,column:s,rowPinned:null,forceBrowserFocus:!0}),(e=this.rangeService)==null||e.setRangeToCell({rowIndex:n,rowPinned:null,column:s})}onPageDown(t){let i=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),o=this.getViewportHeight(),r=this.paginationProxy.getPixelOffset(),n=i.top+o,s=this.paginationProxy.getRowIndexAtPixel(n+r);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(t,s):this.navigateToNextPage(t,s)}onPageUp(t){let i=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),o=this.paginationProxy.getPixelOffset(),r=i.top,n=this.paginationProxy.getRowIndexAtPixel(r+o);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(t,n,!0):this.navigateToNextPage(t,n,!0)}navigateToNextPage(t,e,i=!1){let o=this.getViewportHeight(),r=this.paginationProxy.getPageFirstRow(),n=this.paginationProxy.getPageLastRow(),s=this.paginationProxy.getPixelOffset(),a=this.paginationProxy.getRow(t.rowIndex),l=i?a?.rowHeight-o-s:o-s,d=a?.rowTop+l,c=this.paginationProxy.getRowIndexAtPixel(d+s);if(c===t.rowIndex){let h=i?-1:1;e=c=t.rowIndex+h}let u;i?(u="bottom",c<r&&(c=r),e<r&&(e=r)):(u="top",c>n&&(c=n),e>n&&(e=n)),this.isRowTallerThanView(c)&&(e=c,u="top"),this.navigateTo({scrollIndex:e,scrollType:u,scrollColumn:null,focusIndex:c,focusColumn:t.column})}navigateToNextPageWithAutoHeight(t,e,i=!1){this.navigateTo({scrollIndex:e,scrollType:i?"bottom":"top",scrollColumn:null,focusIndex:e,focusColumn:t.column}),setTimeout(()=>{let o=this.getNextFocusIndexForAutoHeight(t,i);this.navigateTo({scrollIndex:e,scrollType:i?"bottom":"top",scrollColumn:null,focusIndex:o,focusColumn:t.column,isAsync:!0})},50)}getNextFocusIndexForAutoHeight(t,e=!1){var i;let o=e?-1:1,r=this.getViewportHeight(),n=this.paginationProxy.getPageLastRow(),s=0,a=t.rowIndex;for(;a>=0&&a<=n;){let l=this.paginationProxy.getRow(a);if(l){let d=(i=l.rowHeight)!=null?i:0;if(s+d>r)break;s+=d}a+=o}return Math.max(0,Math.min(a,n))}getViewportHeight(){let{gridBodyCtrl:t,center:e}=this.ctrlsService.getParams(),i=t.getScrollFeature().getVScrollPosition(),o=this.gos.getScrollbarWidth(),r=i.bottom-i.top;return e.isHorizontalScrollShowing()&&(r-=o),r}isRowTallerThanView(t){let e=this.paginationProxy.getRow(t);if(!e)return!1;let i=e.rowHeight;return typeof i!="number"?!1:i>this.getViewportHeight()}onCtrlUpDownLeftRight(t,e){let i=this.cellNavigationService.getNextCellToFocus(t,e,!0),{rowIndex:o,column:r}=i;this.navigateTo({scrollIndex:o,scrollType:null,scrollColumn:r,focusIndex:o,focusColumn:r})}onHomeOrEndKey(t){let e=t===S.PAGE_HOME,i=this.columnModel.getAllDisplayedColumns(),o=e?i[0]:be(i),r=e?this.paginationProxy.getPageFirstRow():this.paginationProxy.getPageLastRow();this.navigateTo({scrollIndex:r,scrollType:null,scrollColumn:o,focusIndex:r,focusColumn:o})}onTabKeyDown(t,e){let i=e.shiftKey,o=this.tabToNextCellCommon(t,i,e);if(o!==!1){o&&e.preventDefault();return}if(i){let{rowIndex:r,rowPinned:n}=t.getRowPosition();(n?r===0:r===this.paginationProxy.getPageFirstRow())&&(this.gos.get("headerHeight")===0||this.gos.get("suppressHeaderFocus")?this.focusService.focusNextGridCoreContainer(!0,!0):(e.preventDefault(),this.focusService.focusPreviousFromFirstCell(e)))}else t instanceof xn&&t.focusCell(!0),this.focusService.focusNextGridCoreContainer(i)&&e.preventDefault()}tabToNextCell(t,e){let i=this.focusService.getFocusedCell();if(!i)return!1;let o=this.getCellByPosition(i);return!o&&(o=this.rowRenderer.getRowByPosition(i),!o||!o.isFullWidth())?!1:!!this.tabToNextCellCommon(o,t,e)}tabToNextCellCommon(t,e,i){let o=t.isEditing();if(!o&&t instanceof xn){let s=t.getRowCtrl();s&&(o=s.isEditing())}let r;return o?this.gos.get("editType")==="fullRow"?r=this.moveToNextEditingRow(t,e,i):r=this.moveToNextEditingCell(t,e,i):r=this.moveToNextCellNotEditing(t,e),r===null?r:r||!!this.focusService.getFocusedHeader()}moveToNextEditingCell(t,e,i=null){let o=t.getCellPosition();t.getGui().focus(),t.stopEditing();let r=this.findNextCellToFocusOn(o,e,!0);return r===!1?null:r==null?!1:(r.startEditing(null,!0,i),r.focusCell(!1),!0)}moveToNextEditingRow(t,e,i=null){let o=t.getCellPosition(),r=this.findNextCellToFocusOn(o,e,!0);if(r===!1)return null;if(r==null)return!1;let n=r.getCellPosition(),s=this.isCellEditable(o),a=this.isCellEditable(n),l=n&&o.rowIndex===n.rowIndex&&o.rowPinned===n.rowPinned;return s&&t.setFocusOutOnEditor(),l||(t.getRowCtrl().stopEditing(),r.getRowCtrl().startRowEditing(void 0,void 0,i)),a?(r.setFocusInOnEditor(),r.focusCell()):r.focusCell(!0),!0}moveToNextCellNotEditing(t,e){let i=this.columnModel.getAllDisplayedColumns(),o;t instanceof _n?o=He(j({},t.getRowPosition()),{column:e?i[0]:be(i)}):o=t.getCellPosition();let r=this.findNextCellToFocusOn(o,e,!1);if(r===!1)return null;if(r instanceof xn)r.focusCell(!0);else if(r)return this.tryToFocusFullWidthRow(r.getRowPosition(),e);return T(r)}findNextCellToFocusOn(t,e,i){var o;let r=t;for(;;){t!==r&&(t=r),e||(r=this.getLastCellOfColSpan(r)),r=this.cellNavigationService.getNextTabbedCell(r,e);let n=this.gos.getCallback("tabToNextCell");if(T(n)){let d=n({backwards:e,editing:i,previousCellPosition:t,nextCellPosition:r||null});if(d===!0||d===null)d===null&&q("Returning `null` from tabToNextCell is deprecated. Return `true` to stay on the current cell, or `false` to let the browser handle the tab behaviour."),r=t;else{if(d===!1)return!1;d.floating&&(q("tabToNextCellFunc return type should have attributes: rowIndex, rowPinned, column. However you had 'floating', maybe you meant 'rowPinned'?"),d.rowPinned=d.floating),r={rowIndex:d.rowIndex,column:d.column,rowPinned:d.rowPinned}}}if(!r)return null;if(r.rowIndex<0){let l=this.headerNavigationService.getHeaderRowCount();return this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:l+r.rowIndex,column:r.column},fromCell:!0}),null}let s=this.gos.get("editType")==="fullRow";if(i&&!s&&!this.isCellEditable(r))continue;this.ensureCellVisible(r);let a=this.getCellByPosition(r);if(!a){let l=this.rowRenderer.getRowByPosition(r);if(!l||!l.isFullWidth()||i)continue;return l}if(!a.isSuppressNavigable())return(o=this.rangeService)==null||o.setRangeToCell(r),a}}isCellEditable(t){let e=this.lookupRowNodeForCell(t);return e?t.column.isCellEditable(e):!1}getCellByPosition(t){let e=this.rowRenderer.getRowByPosition(t);return e?e.getCellCtrl(t.column):null}lookupRowNodeForCell(t){return t.rowPinned==="top"?this.pinnedRowModel.getPinnedTopRow(t.rowIndex):t.rowPinned==="bottom"?this.pinnedRowModel.getPinnedBottomRow(t.rowIndex):this.paginationProxy.getRow(t.rowIndex)}navigateToNextCell(t,e,i,o){let r=i,n=!1;for(;r&&(r===i||!this.isValidNavigateCell(r));)this.gos.get("enableRtl")?e===S.LEFT&&(r=this.getLastCellOfColSpan(r)):e===S.RIGHT&&(r=this.getLastCellOfColSpan(r)),r=this.cellNavigationService.getNextCellToFocus(e,r),n=X(r);if(n&&t&&t.key===S.UP&&(r={rowIndex:-1,rowPinned:null,column:i.column}),o){let a=this.gos.getCallback("navigateToNextCell");if(T(a)){let d=a({key:e,previousCellPosition:i,nextCellPosition:r||null,event:t});T(d)?(d.floating&&(q("tabToNextCellFunc return type should have attributes: rowIndex, rowPinned, column. However you had 'floating', maybe you meant 'rowPinned'?"),d.rowPinned=d.floating),r={rowPinned:d.rowPinned,rowIndex:d.rowIndex,column:d.column}):r=null}}if(!r)return;if(r.rowIndex<0){let a=this.headerNavigationService.getHeaderRowCount();this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:a+r.rowIndex,column:i.column},event:t||void 0,fromCell:!0});return}let s=this.getNormalisedPosition(r);s?this.focusPosition(s):this.tryToFocusFullWidthRow(r)}getNormalisedPosition(t){this.ensureCellVisible(t);let e=this.getCellByPosition(t);return e?(t=e.getCellPosition(),this.ensureCellVisible(t),t):null}tryToFocusFullWidthRow(t,e=!1){let i=this.columnModel.getAllDisplayedColumns(),o=this.rowRenderer.getRowByPosition(t);if(!o||!o.isFullWidth())return!1;let r=this.focusService.getFocusedCell(),n={rowIndex:t.rowIndex,rowPinned:t.rowPinned,column:t.column||(e?be(i):i[0])};this.focusPosition(n);let s=r!=null?this.rowPositionUtils.before(n,r):!1,a={type:f.EVENT_FULL_WIDTH_ROW_FOCUSED,rowIndex:n.rowIndex,rowPinned:n.rowPinned,column:n.column,isFullWidthCell:!0,floating:n.rowPinned,fromBelow:s};return this.eventService.dispatchEvent(a),!0}focusPosition(t){var e;this.focusService.setFocusedCell({rowIndex:t.rowIndex,column:t.column,rowPinned:t.rowPinned,forceBrowserFocus:!0}),(e=this.rangeService)==null||e.setRangeToCell(t)}isValidNavigateCell(t){return!!this.rowPositionUtils.getRowNode(t)}getLastCellOfColSpan(t){let e=this.getCellByPosition(t);if(!e)return t;let i=e.getColSpanningList();return i.length===1?t:{rowIndex:t.rowIndex,column:be(i),rowPinned:t.rowPinned}}ensureCellVisible(t){let e=this.gos.isGroupRowsSticky(),i=this.rowModel.getRow(t.rowIndex);!(e&&i?.sticky)&&X(t.rowPinned)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(t.rowIndex),t.column.isPinned()||this.gridBodyCon.getScrollFeature().ensureColumnVisible(t.column)}};g([v("mouseEventService")],zt.prototype,"mouseEventService",2);g([v("paginationProxy")],zt.prototype,"paginationProxy",2);g([v("focusService")],zt.prototype,"focusService",2);g([v("columnModel")],zt.prototype,"columnModel",2);g([v("rowModel")],zt.prototype,"rowModel",2);g([v("ctrlsService")],zt.prototype,"ctrlsService",2);g([v("rowRenderer")],zt.prototype,"rowRenderer",2);g([v("headerNavigationService")],zt.prototype,"headerNavigationService",2);g([v("rowPositionUtils")],zt.prototype,"rowPositionUtils",2);g([v("cellNavigationService")],zt.prototype,"cellNavigationService",2);g([v("pinnedRowModel")],zt.prototype,"pinnedRowModel",2);g([Re("rangeService")],zt.prototype,"rangeService",2);g([I],zt.prototype,"postConstruct",1);zt=g([V("navigationService")],zt);var Cv=class nE extends Hn{constructor(e){super('<div class="ag-popup-editor" tabindex="-1"/>'),this.params=e}postConstruct(){this.gos.setDomData(this.getGui(),nE.DOM_KEY_POPUP_EDITOR_WRAPPER,!0),this.addKeyDownListener()}addKeyDownListener(){let e=this.getGui(),i=this.params,o=r=>{th(this.gos,r,i.node,i.column,!0)||i.onKeyDown(r)};this.addManagedListener(e,"keydown",o)}};Cv.DOM_KEY_POPUP_EDITOR_WRAPPER="popupEditorWrapper";g([I],Cv.prototype,"postConstruct",1);var hk=Cv,gk=class extends J{constructor(t,e,i,o,r){super(),this.rendererVersion=0,this.editorVersion=0,this.beans=t,this.column=e.getColumn(),this.rowNode=e.getRowNode(),this.rowCtrl=e.getRowCtrl(),this.eRow=o,this.cellCtrl=e;let n=document.createElement("div");n.setAttribute("comp-id",`${this.getCompId()}`),this.setTemplateFromElement(n);let s=this.getGui();this.forceWrapper=e.isForceWrapper(),this.refreshWrapper(!1);let a=(c,u)=>{u!=null&&u!=""?s.setAttribute(c,u):s.removeAttribute(c)};Xe(s,e.getCellAriaRole()),a("col-id",e.getColumnIdSanitised());let l=e.getTabIndex();l!==void 0&&a("tabindex",l.toString());let d={addOrRemoveCssClass:(c,u)=>this.addOrRemoveCssClass(c,u),setUserStyles:c=>Jm(s,c),getFocusableElement:()=>this.getFocusableElement(),setIncludeSelection:c=>this.includeSelection=c,setIncludeRowDrag:c=>this.includeRowDrag=c,setIncludeDndSource:c=>this.includeDndSource=c,setRenderDetails:(c,u,h)=>this.setRenderDetails(c,u,h),setEditDetails:(c,u,h)=>this.setEditDetails(c,u,h),getCellEditor:()=>this.cellEditor||null,getCellRenderer:()=>this.cellRenderer||null,getParentOfValue:()=>this.getParentOfValue()};e.setComp(d,this.getGui(),this.eCellWrapper,i,r)}getParentOfValue(){return this.eCellValue?this.eCellValue:this.eCellWrapper?this.eCellWrapper:this.getGui()}setRenderDetails(t,e,i){if(this.cellEditor&&!this.cellEditorPopupWrapper)return;this.firstRender=this.firstRender==null;let r=this.refreshWrapper(!1);this.refreshEditStyles(!1),t?!(i||r)&&this.refreshCellRenderer(t)||(this.destroyRenderer(),this.createCellRendererInstance(t)):(this.destroyRenderer(),this.insertValueWithoutCellRenderer(e))}setEditDetails(t,e,i){t?this.createCellEditorInstance(t,e,i):this.destroyEditor()}removeControls(){this.checkboxSelectionComp=this.beans.context.destroyBean(this.checkboxSelectionComp),this.dndSourceComp=this.beans.context.destroyBean(this.dndSourceComp),this.rowDraggingComp=this.beans.context.destroyBean(this.rowDraggingComp)}refreshWrapper(t){let e=this.includeRowDrag||this.includeDndSource||this.includeSelection,i=e||this.forceWrapper,o=i&&this.eCellWrapper==null;if(o){let d=document.createElement("div");d.setAttribute("role","presentation"),d.setAttribute("class","ag-cell-wrapper"),this.eCellWrapper=d,this.getGui().appendChild(this.eCellWrapper)}let r=!i&&this.eCellWrapper!=null;r&&(qi(this.eCellWrapper),this.eCellWrapper=void 0),this.addOrRemoveCssClass("ag-cell-value",!i);let n=!t&&i,s=n&&this.eCellValue==null;if(s){let d=document.createElement("span");d.setAttribute("role","presentation"),d.setAttribute("class","ag-cell-value"),this.eCellValue=d,this.eCellWrapper.appendChild(this.eCellValue)}let a=!n&&this.eCellValue!=null;a&&(qi(this.eCellValue),this.eCellValue=void 0);let l=o||r||s||a;return l&&this.removeControls(),t||e&&this.addControls(),l}addControls(){this.includeRowDrag&&this.rowDraggingComp==null&&(this.rowDraggingComp=this.cellCtrl.createRowDragComp(),this.rowDraggingComp&&this.eCellWrapper.insertBefore(this.rowDraggingComp.getGui(),this.eCellValue)),this.includeDndSource&&this.dndSourceComp==null&&(this.dndSourceComp=this.cellCtrl.createDndSource(),this.eCellWrapper.insertBefore(this.dndSourceComp.getGui(),this.eCellValue)),this.includeSelection&&this.checkboxSelectionComp==null&&(this.checkboxSelectionComp=this.cellCtrl.createSelectionCheckbox(),this.eCellWrapper.insertBefore(this.checkboxSelectionComp.getGui(),this.eCellValue))}createCellEditorInstance(t,e,i){let o=this.editorVersion,r=t.newAgStackInstance();if(!r)return;let{params:n}=t;r.then(a=>this.afterCellEditorCreated(o,a,n,e,i)),X(this.cellEditor)&&n.cellStartedEdit&&this.cellCtrl.focusCell(!0)}insertValueWithoutCellRenderer(t){let e=this.getParentOfValue();Je(e);let i=t!=null?rt(t,!0):null;i!=null&&(e.textContent=i)}destroyEditorAndRenderer(){this.destroyRenderer(),this.destroyEditor()}destroyRenderer(){let{context:t}=this.beans;this.cellRenderer=t.destroyBean(this.cellRenderer),qi(this.cellRendererGui),this.cellRendererGui=null,this.rendererVersion++}destroyEditor(){let{context:t}=this.beans;this.hideEditorPopup&&this.hideEditorPopup(),this.hideEditorPopup=void 0,this.cellEditor=t.destroyBean(this.cellEditor),this.cellEditorPopupWrapper=t.destroyBean(this.cellEditorPopupWrapper),qi(this.cellEditorGui),this.cellEditorGui=null,this.editorVersion++}refreshCellRenderer(t){if(this.cellRenderer==null||this.cellRenderer.refresh==null||this.cellRendererClass!==t.componentClass)return!1;let e=this.cellRenderer.refresh(t.params);return e===!0||e===void 0}createCellRendererInstance(t){let i=!this.beans.gos.get("suppressAnimationFrame"),o=this.rendererVersion,{componentClass:r}=t,n=()=>{if(this.rendererVersion!==o||!this.isAlive())return;let a=t.newAgStackInstance(),l=this.afterCellRendererCreated.bind(this,o,r);a&&a.then(l)};i&&this.firstRender?this.beans.animationFrameService.createTask(n,this.rowNode.rowIndex,"createTasksP2"):n()}getCtrl(){return this.cellCtrl}getRowCtrl(){return this.rowCtrl}getCellRenderer(){return this.cellRenderer}getCellEditor(){return this.cellEditor}afterCellRendererCreated(t,e,i){if(!this.isAlive()||t!==this.rendererVersion){this.beans.context.destroyBean(i);return}if(this.cellRenderer=i,this.cellRendererClass=e,this.cellRendererGui=this.cellRenderer.getGui(),this.cellRendererGui!=null){let r=this.getParentOfValue();Je(r),r.appendChild(this.cellRendererGui)}}afterCellEditorCreated(t,e,i,o,r){if(t!==this.editorVersion){this.beans.context.destroyBean(e);return}if(e.isCancelBeforeStart&&e.isCancelBeforeStart()){this.beans.context.destroyBean(e),this.cellCtrl.stopEditing(!0);return}if(!e.getGui){console.warn(`AG Grid: cellEditor for column ${this.column.getId()} is missing getGui() method`),this.beans.context.destroyBean(e);return}this.cellEditor=e,this.cellEditorGui=e.getGui();let a=o||e.isPopup!==void 0&&e.isPopup();a?this.addPopupCellEditor(i,r):this.addInCellEditor(),this.refreshEditStyles(!0,a),e.afterGuiAttached&&e.afterGuiAttached()}refreshEditStyles(t,e){var i;this.addOrRemoveCssClass("ag-cell-inline-editing",t&&!e),this.addOrRemoveCssClass("ag-cell-popup-editing",t&&!!e),this.addOrRemoveCssClass("ag-cell-not-inline-editing",!t||!!e),(i=this.rowCtrl)==null||i.setInlineEditingCss(t)}addInCellEditor(){let t=this.getGui();t.contains(this.beans.gos.getActiveDomElement())&&t.focus(),this.destroyRenderer(),this.refreshWrapper(!0),this.clearParentOfValue(),this.cellEditorGui&&this.getParentOfValue().appendChild(this.cellEditorGui)}addPopupCellEditor(t,e){this.beans.gos.get("editType")==="fullRow"&&console.warn("AG Grid: popup cellEditor does not work with fullRowEdit - you cannot use them both - either turn off fullRowEdit, or stop using popup editors.");let i=this.cellEditor;this.cellEditorPopupWrapper=this.beans.context.createBean(new hk(t));let o=this.cellEditorPopupWrapper.getGui();this.cellEditorGui&&o.appendChild(this.cellEditorGui);let r=this.beans.popupService,n=this.beans.gos.get("stopEditingWhenCellsLoseFocus"),s=e??(i.getPopupPosition?i.getPopupPosition():"over"),a=this.beans.gos.get("enableRtl"),l={ePopup:o,column:this.column,rowNode:this.rowNode,type:"popupCellEditor",eventSource:this.getGui(),position:s,alignSide:a?"right":"left",keepWithinBounds:!0},d=r.positionPopupByComponent.bind(r,l),c=this.beans.localeService.getLocaleTextFunc(),u=r.addPopup({modal:n,eChild:o,closeOnEsc:!0,closedCallback:()=>{this.cellCtrl.onPopupEditorClosed()},anchorToElement:this.getGui(),positionCallback:d,ariaLabel:c("ariaLabelCellEditor","Cell Editor")});u&&(this.hideEditorPopup=u.hideFunc)}detach(){this.eRow.removeChild(this.getGui())}destroy(){this.cellCtrl.stopEditing(),this.destroyEditorAndRenderer(),this.removeControls(),super.destroy()}clearParentOfValue(){let t=this.getGui();t.contains(this.beans.gos.getActiveDomElement())&&Wm()&&t.focus({preventScroll:!0}),Je(this.getParentOfValue())}},pk=class extends J{constructor(t,e,i){super(),this.cellComps={},this.beans=e,this.rowCtrl=t;let o=document.createElement("div");o.setAttribute("comp-id",`${this.getCompId()}`),o.setAttribute("style",this.getInitialStyle(i)),this.setTemplateFromElement(o);let r=this.getGui(),n=r.style;this.domOrder=this.rowCtrl.getDomOrder(),Xe(r,"row");let s=this.rowCtrl.getTabIndex();s!=null&&r.setAttribute("tabindex",s.toString());let a={setDomOrder:l=>this.domOrder=l,setCellCtrls:l=>this.setCellCtrls(l),showFullWidth:l=>this.showFullWidth(l),getFullWidthCellRenderer:()=>this.getFullWidthCellRenderer(),addOrRemoveCssClass:(l,d)=>this.addOrRemoveCssClass(l,d),setUserStyles:l=>Jm(r,l),setTop:l=>n.top=l,setTransform:l=>n.transform=l,setRowIndex:l=>r.setAttribute("row-index",l),setRowId:l=>r.setAttribute("row-id",l),setRowBusinessKey:l=>r.setAttribute("row-business-key",l),refreshFullWidth:l=>this.refreshFullWidth(l)};t.setComp(a,this.getGui(),i),this.addDestroyFunc(()=>{t.unsetComp(i)})}getInitialStyle(t){let e=this.rowCtrl.getInitialTransform(t);return e?`transform: ${e}`:`top: ${this.rowCtrl.getInitialRowTop(t)}`}showFullWidth(t){let e=o=>{if(this.isAlive()){let r=o.getGui();this.getGui().appendChild(r),this.rowCtrl.setupDetailRowAutoHeight(r),this.setFullWidthRowComp(o)}else this.beans.context.destroyBean(o)},i=t.newAgStackInstance();i&&i.then(e)}setCellCtrls(t){let e=Object.assign({},this.cellComps);t.forEach(o=>{let r=o.getInstanceId();this.cellComps[r]==null?this.newCellComp(o):e[r]=null});let i=Dr(e).filter(o=>o!=null);this.destroyCells(i),this.ensureDomOrder(t)}ensureDomOrder(t){if(!this.domOrder)return;let e=[];t.forEach(i=>{let o=this.cellComps[i.getInstanceId()];o&&e.push(o.getGui())}),Zm(this.getGui(),e)}newCellComp(t){let e=new gk(this.beans,t,this.rowCtrl.isPrintLayout(),this.getGui(),this.rowCtrl.isEditing());this.cellComps[t.getInstanceId()]=e,this.getGui().appendChild(e.getGui())}destroy(){super.destroy(),this.destroyAllCells()}destroyAllCells(){let t=Dr(this.cellComps).filter(e=>e!=null);this.destroyCells(t)}setFullWidthRowComp(t){this.fullWidthCellRenderer&&console.error("AG Grid - should not be setting fullWidthRowComponent twice"),this.fullWidthCellRenderer=t,this.addDestroyFunc(()=>{this.fullWidthCellRenderer=this.beans.context.destroyBean(this.fullWidthCellRenderer)})}getFullWidthCellRenderer(){return this.fullWidthCellRenderer}destroyCells(t){t.forEach(e=>{if(!e)return;let i=e.getCtrl().getInstanceId();this.cellComps[i]===e&&(e.detach(),e.destroy(),this.cellComps[i]=null)})}refreshFullWidth(t){let{fullWidthCellRenderer:e}=this;if(!e||!e.refresh)return!1;let i=t();return e.refresh(i)}};function fk(){let t=J.elementGettingCreated.getAttribute("name"),e=rE.getRowContainerCssClasses(t),i;return t==="center"||t==="topCenter"||t==="stickyTopCenter"||t==="bottomCenter"||t==="stickyBottomCenter"?i=`<div class="${e.viewport}" ref="eViewport" role="presentation">
                <div class="${e.container}" ref="eContainer"></div>
            </div>`:i=`<div class="${e.container}" ref="eContainer"></div>`,i}var ma=class extends J{constructor(){super(fk()),this.rowComps={},this.name=J.elementGettingCreated.getAttribute("name"),this.type=lk(this.name)}postConstruct(){let t={setViewportHeight:i=>this.eViewport.style.height=i,setRowCtrls:({rowCtrls:i})=>this.setRowCtrls(i),setDomOrder:i=>{this.domOrder=i},setContainerWidth:i=>this.eContainer.style.width=i};this.createManagedBean(new rE(this.name)).setComp(t,this.eContainer,this.eViewport)}preDestroy(){this.setRowCtrls([])}setRowCtrls(t){let e=j({},this.rowComps);this.rowComps={},this.lastPlacedElement=null;let i=o=>{let r=o.getInstanceId(),n=e[r];if(n)this.rowComps[r]=n,delete e[r],this.ensureDomOrder(n.getGui());else{if(!o.getRowNode().displayed)return;let s=new pk(o,this.beans,this.type);this.rowComps[r]=s,this.appendRow(s.getGui())}};t.forEach(i),Dr(e).forEach(o=>{this.eContainer.removeChild(o.getGui()),o.destroy()}),Xe(this.eContainer,"rowgroup")}appendRow(t){this.domOrder?Kx(this.eContainer,t,this.lastPlacedElement):this.eContainer.appendChild(t),this.lastPlacedElement=t}ensureDomOrder(t){this.domOrder&&(Xm(this.eContainer,t,this.lastPlacedElement),this.lastPlacedElement=t)}};g([v("beans")],ma.prototype,"beans",2);g([k("eViewport")],ma.prototype,"eViewport",2);g([k("eContainer")],ma.prototype,"eContainer",2);g([I],ma.prototype,"postConstruct",1);g([Kt],ma.prototype,"preDestroy",1);var wv=class{constructor(t){this.columnsToAggregate=[],this.columnsToGroup=[],this.columnsToPivot=[],this.pinned=t}onDragEnter(t){if(this.clearColumnsList(),this.gos.get("functionsReadOnly"))return;let e=t.dragItem.columns;e&&e.forEach(i=>{i.isPrimary()&&(i.isAnyFunctionActive()||(i.isAllowValue()?this.columnsToAggregate.push(i):i.isAllowRowGroup()?this.columnsToGroup.push(i):i.isAllowPivot()&&this.columnsToPivot.push(i)))})}getIconName(){return this.columnsToAggregate.length+this.columnsToGroup.length+this.columnsToPivot.length>0?this.pinned?te.ICON_PINNED:te.ICON_MOVE:null}onDragLeave(t){this.clearColumnsList()}clearColumnsList(){this.columnsToAggregate.length=0,this.columnsToGroup.length=0,this.columnsToPivot.length=0}onDragging(t){}onDragStop(t){this.columnsToAggregate.length>0&&this.columnModel.addValueColumns(this.columnsToAggregate,"toolPanelDragAndDrop"),this.columnsToGroup.length>0&&this.columnModel.addRowGroupColumns(this.columnsToGroup,"toolPanelDragAndDrop"),this.columnsToPivot.length>0&&this.columnModel.addPivotColumns(this.columnsToPivot,"toolPanelDragAndDrop")}};g([v("columnModel")],wv.prototype,"columnModel",2);g([v("gridOptionsService")],wv.prototype,"gos",2);var En=class{static attemptMoveColumns(t){let{isFromHeader:e,hDirection:i,xPosition:o,fromEnter:r,fakeEvent:n,pinned:s,gos:a,columnModel:l}=t,d=i===0,c=i===1,{allMovingColumns:u}=t;if(e){let x=[];u.forEach(E=>{var D;let R=null,P=E.getParent();for(;P!=null&&P.getDisplayedLeafColumns().length===1;)R=P,P=P.getParent();R!=null?(!!((D=R.getColGroupDef())!=null&&D.marryChildren)?R.getProvidedColumnGroup().getLeafColumns():R.getLeafColumns()).forEach(K=>{x.includes(K)||x.push(K)}):x.includes(E)||x.push(E)}),u=x}let h=u.slice();l.sortColumnsLikeGridColumns(h);let p=this.calculateValidMoves({movingCols:h,draggingRight:c,xPosition:o,pinned:s,gos:a,columnModel:l}),m=this.calculateOldIndex(h,l);if(p.length===0)return;let C=p[0],w=m!==null&&!r;if(e&&(w=m!==null),w&&!n&&(d&&C>=m||c&&C<=m))return;let b=l.getAllDisplayedColumns(),y=[],_=null;for(let x=0;x<p.length;x++){let E=p[x],D=l.getProposedColumnOrder(h,E);if(!l.doesOrderPassRules(D))continue;let R=D.filter(N=>b.includes(N));if(_===null)_=R;else if(!ho(R,_))break;let P=this.groupFragCount(D);y.push({move:E,fragCount:P})}if(y.length!==0)return y.sort((x,E)=>x.fragCount-E.fragCount),this.moveColumns(u,y[0].move,"uiColumnMoved",!1,l)}static moveColumns(t,e,i,o,r){return r.moveColumns(t,e,i,o),o?null:{columns:t,toIndex:e}}static calculateOldIndex(t,e){let i=e.getAllGridColumns(),o=sx(t.map(l=>i.indexOf(l))),r=o[0];return be(o)-r!==o.length-1?null:r}static groupFragCount(t){function e(o){let r=[],n=o.getOriginalParent();for(;n!=null;)r.push(n),n=n.getOriginalParent();return r}let i=0;for(let o=0;o<t.length-1;o++){let r=e(t[o]),n=e(t[o+1]);[r,n]=r.length>n.length?[r,n]:[n,r],r.forEach(s=>{n.indexOf(s)===-1&&i++})}return i}static getDisplayedColumns(t,e){switch(e){case"left":return t.getDisplayedLeftColumns();case"right":return t.getDisplayedRightColumns();default:return t.getDisplayedCenterColumns()}}static calculateValidMoves(t){let{movingCols:e,draggingRight:i,xPosition:o,pinned:r,gos:n,columnModel:s}=t;if(n.get("suppressMovableColumns")||e.some(y=>y.getColDef().suppressMovable))return[];let l=this.getDisplayedColumns(s,r),d=s.getAllGridColumns(),c=l.filter(y=>wi(e,y)),u=l.filter(y=>!wi(e,y)),h=d.filter(y=>!wi(e,y)),p=0,m=o;if(i){let y=0;c.forEach(_=>y+=_.getActualWidth()),m-=y}if(m>0){for(let y=0;y<u.length;y++){let _=u[y];if(m-=_.getActualWidth(),m<0)break;p++}i&&p++}let C;if(p>0){let y=u[p-1];C=h.indexOf(y)+1}else C=h.indexOf(u[0]),C===-1&&(C=0);let w=[C],b=(y,_)=>y-_;if(i){let y=C+1,_=d.length-1;for(;y<=_;)w.push(y),y++;w.sort(b)}else{let y=C,_=d.length-1,x=d[y];for(;y<=_&&l.indexOf(x)<0;)y++,w.push(y),x=d[y];y=C-1;let E=0;for(;y>=E;)w.push(y),y--;w.sort(b).reverse()}return w}static normaliseX(t,e,i,o,r){let n=r.getHeaderRowContainerCtrl(e).getViewport();return i&&(t-=n.getBoundingClientRect().left),o.get("enableRtl")&&(t=n.clientWidth-t),e==null&&(t+=r.get("center").getCenterViewportScrollLeft()),t}},va=class{constructor(t){this.needToMoveLeft=!1,this.needToMoveRight=!1,this.lastMovedInfo=null,this.pinned=t,this.isCenterContainer=!T(t)}init(){this.ctrlsService.whenReady(t=>{this.gridBodyCon=t.gridBodyCtrl})}getIconName(){return this.pinned?te.ICON_PINNED:te.ICON_MOVE}onDragEnter(t){let e=t.dragItem.columns;if(t.dragSource.type===0)this.setColumnsVisible(e,!0,"uiColumnDragged");else{let o=t.dragItem.visibleState,r=(e||[]).filter(n=>o[n.getId()]);this.setColumnsVisible(r,!0,"uiColumnDragged")}this.setColumnsPinned(e,this.pinned,"uiColumnDragged"),this.onDragging(t,!0,!0)}onDragLeave(){this.ensureIntervalCleared(),this.lastMovedInfo=null}setColumnsVisible(t,e,i){if(t){let o=t.filter(r=>!r.getColDef().lockVisible);this.columnModel.setColumnsVisible(o,e,i)}}setColumnsPinned(t,e,i){if(t){let o=t.filter(r=>!r.getColDef().lockPinned);this.columnModel.setColumnsPinned(o,e,i)}}onDragStop(){this.onDragging(this.lastDraggingEvent,!1,!0,!0),this.ensureIntervalCleared(),this.lastMovedInfo=null}checkCenterForScrolling(t){if(this.isCenterContainer){let e=this.ctrlsService.get("center"),i=e.getCenterViewportScrollLeft(),o=i+e.getCenterWidth();this.gos.get("enableRtl")?(this.needToMoveRight=t<i+50,this.needToMoveLeft=t>o-50):(this.needToMoveLeft=t<i+50,this.needToMoveRight=t>o-50),this.needToMoveLeft||this.needToMoveRight?this.ensureIntervalStarted():this.ensureIntervalCleared()}}onDragging(t=this.lastDraggingEvent,e=!1,i=!1,o=!1){var r;if(o){if(this.lastMovedInfo){let{columns:c,toIndex:u}=this.lastMovedInfo;En.moveColumns(c,u,"uiColumnMoved",!0,this.columnModel)}return}if(this.lastDraggingEvent=t,X(t.hDirection))return;let n=En.normaliseX(t.x,this.pinned,!1,this.gos,this.ctrlsService);e||this.checkCenterForScrolling(n);let s=this.normaliseDirection(t.hDirection),a=t.dragSource.type,l=((r=t.dragSource.getDragItem().columns)==null?void 0:r.filter(c=>c.getColDef().lockPinned?c.getPinned()==this.pinned:!0))||[],d=En.attemptMoveColumns({allMovingColumns:l,isFromHeader:a===1,hDirection:s,xPosition:n,pinned:this.pinned,fromEnter:e,fakeEvent:i,gos:this.gos,columnModel:this.columnModel});d&&(this.lastMovedInfo=d)}normaliseDirection(t){if(this.gos.get("enableRtl"))switch(t){case 0:return 1;case 1:return 0;default:console.error(`AG Grid: Unknown direction ${t}`)}else return t}ensureIntervalStarted(){this.movingIntervalId||(this.intervalCount=0,this.failedMoveAttempts=0,this.movingIntervalId=window.setInterval(this.moveInterval.bind(this),100),this.needToMoveLeft?this.dragAndDropService.setGhostIcon(te.ICON_LEFT,!0):this.dragAndDropService.setGhostIcon(te.ICON_RIGHT,!0))}ensureIntervalCleared(){this.movingIntervalId&&(window.clearInterval(this.movingIntervalId),this.movingIntervalId=null,this.dragAndDropService.setGhostIcon(te.ICON_MOVE))}moveInterval(){let t;this.intervalCount++,t=10+this.intervalCount*5,t>100&&(t=100);let e=null,i=this.gridBodyCon.getScrollFeature();if(this.needToMoveLeft?e=i.scrollHorizontally(-t):this.needToMoveRight&&(e=i.scrollHorizontally(t)),e!==0)this.onDragging(this.lastDraggingEvent),this.failedMoveAttempts=0;else{this.failedMoveAttempts++;let r=this.lastDraggingEvent.dragItem.columns.filter(n=>!n.getColDef().lockPinned);if(r.length>0&&(this.dragAndDropService.setGhostIcon(te.ICON_PINNED),this.failedMoveAttempts>7)){let n=this.needToMoveLeft?"left":"right";this.setColumnsPinned(r,n,"uiColumnDragged"),this.dragAndDropService.nudge()}}}};g([v("columnModel")],va.prototype,"columnModel",2);g([v("dragAndDropService")],va.prototype,"dragAndDropService",2);g([v("gridOptionsService")],va.prototype,"gos",2);g([v("ctrlsService")],va.prototype,"ctrlsService",2);g([I],va.prototype,"init",1);var Ca=class extends A{constructor(t,e){super(),this.pinned=t,this.eContainer=e}postConstruct(){this.ctrlsService.whenReady(t=>{switch(this.pinned){case"left":this.eSecondaryContainers=[[t.gridBodyCtrl.getBodyViewportElement(),t.left.getContainerElement()],[t.bottomLeft.getContainerElement()],[t.topLeft.getContainerElement()]];break;case"right":this.eSecondaryContainers=[[t.gridBodyCtrl.getBodyViewportElement(),t.right.getContainerElement()],[t.bottomRight.getContainerElement()],[t.topRight.getContainerElement()]];break;default:this.eSecondaryContainers=[[t.gridBodyCtrl.getBodyViewportElement(),t.center.getViewportElement()],[t.bottomCenter.getViewportElement()],[t.topCenter.getViewportElement()]];break}})}isInterestedIn(t){return t===1||t===0&&this.gos.get("allowDragFromColumnsToolPanel")}getSecondaryContainers(){return this.eSecondaryContainers}getContainer(){return this.eContainer}init(){this.moveColumnFeature=this.createManagedBean(new va(this.pinned)),this.bodyDropPivotTarget=this.createManagedBean(new wv(this.pinned)),this.dragAndDropService.addDropTarget(this)}getIconName(){return this.currentDropListener.getIconName()}isDropColumnInPivotMode(t){return this.columnModel.isPivotMode()&&t.dragSource.type===0}onDragEnter(t){this.currentDropListener=this.isDropColumnInPivotMode(t)?this.bodyDropPivotTarget:this.moveColumnFeature,this.currentDropListener.onDragEnter(t)}onDragLeave(t){this.currentDropListener.onDragLeave(t)}onDragging(t){this.currentDropListener.onDragging(t)}onDragStop(t){this.currentDropListener.onDragStop(t)}};g([v("dragAndDropService")],Ca.prototype,"dragAndDropService",2);g([v("columnModel")],Ca.prototype,"columnModel",2);g([v("ctrlsService")],Ca.prototype,"ctrlsService",2);g([I],Ca.prototype,"postConstruct",1);g([I],Ca.prototype,"init",1);var wa=class sE extends fv{constructor(e){super(sE.TEMPLATE,e),this.headerCompVersion=0,this.column=e.getColumnGroupChild(),this.pinned=e.getPinned()}postConstruct(){let e=this.getGui();((n,s)=>{s!=null&&s!=""?e.setAttribute(n,s):e.removeAttribute(n)})("col-id",this.column.getColId());let o={setWidth:n=>e.style.width=n,addOrRemoveCssClass:(n,s)=>this.addOrRemoveCssClass(n,s),setAriaSort:n=>n?Fx(e,n):Ox(e),setUserCompDetails:n=>this.setUserCompDetails(n),getUserCompInstance:()=>this.headerComp};this.ctrl.setComp(o,this.getGui(),this.eResize,this.eHeaderCompWrapper);let r=this.ctrl.getSelectAllGui();this.eResize.insertAdjacentElement("afterend",r)}destroyHeaderComp(){this.headerComp&&(this.eHeaderCompWrapper.removeChild(this.headerCompGui),this.headerComp=this.destroyBean(this.headerComp),this.headerCompGui=void 0)}setUserCompDetails(e){this.headerCompVersion++;let i=this.headerCompVersion;e.newAgStackInstance().then(o=>this.afterCompCreated(i,o))}afterCompCreated(e,i){if(e!=this.headerCompVersion||!this.isAlive()){this.destroyBean(i);return}this.destroyHeaderComp(),this.headerComp=i,this.headerCompGui=i.getGui(),this.eHeaderCompWrapper.appendChild(this.headerCompGui),this.ctrl.setDragSource(this.getGui())}};wa.TEMPLATE=`<div class="ag-header-cell" role="columnheader">
            <div ref="eResize" class="ag-header-cell-resize" role="presentation"></div>
            <div ref="eHeaderCompWrapper" class="ag-header-cell-comp-wrapper" role="presentation"></div>
        </div>`;g([k("eResize")],wa.prototype,"eResize",2);g([k("eHeaderCompWrapper")],wa.prototype,"eHeaderCompWrapper",2);g([I],wa.prototype,"postConstruct",1);g([Kt],wa.prototype,"destroyHeaderComp",1);var mk=wa,Gh=class aE extends fv{constructor(e){super(aE.TEMPLATE,e)}postConstruct(){let e=this.getGui(),i=(r,n)=>n!=null?e.setAttribute(r,n):e.removeAttribute(r);e.setAttribute("col-id",this.ctrl.getColId());let o={addOrRemoveCssClass:(r,n)=>this.addOrRemoveCssClass(r,n),setResizableDisplayed:r=>me(this.eResize,r),setWidth:r=>e.style.width=r,setAriaExpanded:r=>i("aria-expanded",r),setUserCompDetails:r=>this.setUserCompDetails(r),getUserCompInstance:()=>this.headerGroupComp};this.ctrl.setComp(o,e,this.eResize)}setUserCompDetails(e){e.newAgStackInstance().then(i=>this.afterHeaderCompCreated(i))}afterHeaderCompCreated(e){let i=()=>this.destroyBean(e);if(!this.isAlive()){i();return}let o=this.getGui(),r=e.getGui();o.appendChild(r),this.addDestroyFunc(i),this.headerGroupComp=e,this.ctrl.setDragSource(o)}};Gh.TEMPLATE=`<div class="ag-header-group-cell" role="columnheader">
            <div ref="eResize" class="ag-header-cell-resize" role="presentation"></div>
        </div>`;g([k("eResize")],Gh.prototype,"eResize",2);g([I],Gh.prototype,"postConstruct",1);var vk=Gh;var yv=class extends J{constructor(t){super(),this.headerComps={},this.ctrl=t,this.setTemplate(`<div class="${this.ctrl.getHeaderRowClass()}" role="row"></div>`)}init(){Nm(this.getGui(),this.ctrl.getAriaRowIndex());let t={setHeight:e=>this.getGui().style.height=e,setTop:e=>this.getGui().style.top=e,setHeaderCtrls:(e,i)=>this.setHeaderCtrls(e,i),setWidth:e=>this.getGui().style.width=e};this.ctrl.setComp(t)}destroyHeaderCtrls(){this.setHeaderCtrls([],!1)}setHeaderCtrls(t,e){if(!this.isAlive())return;let i=this.headerComps;if(this.headerComps={},t.forEach(o=>{let r=o.getInstanceId(),n=i[r];delete i[r],n==null&&(n=this.createHeaderComp(o),this.getGui().appendChild(n.getGui())),this.headerComps[r]=n}),Nt(i,(o,r)=>{this.getGui().removeChild(r.getGui()),this.destroyBean(r)}),e){let o=Dr(this.headerComps);o.sort((n,s)=>{let a=n.getCtrl().getColumnGroupChild().getLeft(),l=s.getCtrl().getColumnGroupChild().getLeft();return a-l});let r=o.map(n=>n.getGui());Zm(this.getGui(),r)}}createHeaderComp(t){let e;switch(this.ctrl.getType()){case"group":e=new vk(t);break;case"filter":e=new FO(t);break;default:e=new mk(t);break}return this.createBean(e),e.setParentComponent(this),e}};g([I],yv.prototype,"init",1);g([Kt],yv.prototype,"destroyHeaderCtrls",1);var Ck=0,Uo=class lE extends A{constructor(e,i,o){super(),this.resizeToggleTimeout=0,this.resizeMultiplier=1,this.resizeFeature=null,this.lastFocusEvent=null,this.dragSource=null,this.columnGroupChild=e,this.parentRowCtrl=o,this.beans=i,this.instanceId=e.getUniqueId()+"-"+Ck++}postConstruct(){this.addManagedPropertyListeners(["suppressHeaderFocus"],()=>this.refreshTabIndex())}shouldStopEventPropagation(e){let{headerRowIndex:i,column:o}=this.focusService.getFocusedHeader();return o_(this.gos,e,i,o)}getWrapperHasFocus(){return this.gos.getActiveDomElement()===this.eGui}setGui(e){this.eGui=e,this.addDomData(),this.addManagedListener(this.beans.eventService,f.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.onDisplayedColumnsChanged(),this.refreshTabIndex()}onDisplayedColumnsChanged(){!this.comp||!this.column||(this.refreshFirstAndLastStyles(),this.refreshAriaColIndex())}refreshFirstAndLastStyles(){let{comp:e,column:i,beans:o}=this;Lh.refreshFirstAndLastStyles(e,i,o.columnModel)}refreshAriaColIndex(){let{beans:e,column:i}=this,o=e.columnModel.getAriaColumnIndex(i);zm(this.eGui,o)}addResizeAndMoveKeyboardListeners(){this.resizeFeature&&(this.addManagedListener(this.eGui,"keydown",this.onGuiKeyDown.bind(this)),this.addManagedListener(this.eGui,"keyup",this.onGuiKeyUp.bind(this)))}refreshTabIndex(){this.gos.get("suppressHeaderFocus")?this.eGui.removeAttribute("tabindex"):this.eGui.setAttribute("tabindex","-1")}onGuiKeyDown(e){var i;let o=this.gos.getActiveDomElement(),r=e.key===S.LEFT||e.key===S.RIGHT;if(this.isResizing&&(e.preventDefault(),e.stopImmediatePropagation()),o!==this.eGui||!e.shiftKey&&!e.altKey||((this.isResizing||r)&&(e.preventDefault(),e.stopImmediatePropagation()),!r))return;let n=e.key===S.LEFT!==this.gos.get("enableRtl"),s=O_[n?"Left":"Right"];if(e.altKey){this.isResizing=!0,this.resizeMultiplier+=1;let a=this.getViewportAdjustedResizeDiff(e);this.resizeHeader(a,e.shiftKey),(i=this.resizeFeature)==null||i.toggleColumnResizing(!0)}else this.moveHeader(s)}getViewportAdjustedResizeDiff(e){let i=this.getResizeDiff(e);if(this.column.getPinned()){let r=this.pinnedWidthService.getPinnedLeftWidth(),n=this.pinnedWidthService.getPinnedRightWidth(),s=zn(this.ctrlsService.getGridBodyCtrl().getBodyViewportElement())-50;if(r+n+i>s)if(s>r+n)i=s-r-n;else return 0}return i}getResizeDiff(e){let i=e.key===S.LEFT!==this.gos.get("enableRtl"),o=this.column.getPinned(),r=this.gos.get("enableRtl");return o&&r!==(o==="right")&&(i=!i),(i?-1:1)*this.resizeMultiplier}onGuiKeyUp(){this.isResizing&&(this.resizeToggleTimeout&&(window.clearTimeout(this.resizeToggleTimeout),this.resizeToggleTimeout=0),this.isResizing=!1,this.resizeMultiplier=1,this.resizeToggleTimeout=setTimeout(()=>{var e;(e=this.resizeFeature)==null||e.toggleColumnResizing(!1)},150))}handleKeyDown(e){let i=this.getWrapperHasFocus();switch(e.key){case S.PAGE_DOWN:case S.PAGE_UP:case S.PAGE_HOME:case S.PAGE_END:i&&e.preventDefault()}}addDomData(){let e=lE.DOM_DATA_KEY_HEADER_CTRL;this.gos.setDomData(this.eGui,e,this),this.addDestroyFunc(()=>this.gos.setDomData(this.eGui,e,null))}getGui(){return this.eGui}focus(e){return this.eGui?(this.lastFocusEvent=e||null,this.eGui.focus(),!0):!1}getRowIndex(){return this.parentRowCtrl.getRowIndex()}getParentRowCtrl(){return this.parentRowCtrl}getPinned(){return this.parentRowCtrl.getPinned()}getInstanceId(){return this.instanceId}getColumnGroupChild(){return this.columnGroupChild}removeDragSource(){this.dragSource&&(this.dragAndDropService.removeDragSource(this.dragSource),this.dragSource=null)}handleContextMenuMouseEvent(e,i,o){let r=e??i;this.gos.get("preventDefaultOnContextMenu")&&r.preventDefault();let n=o instanceof ke?o:void 0;this.menuService.isHeaderContextMenuEnabled(n)&&this.menuService.showHeaderContextMenu(n,e,i),this.dispatchColumnMouseEvent(f.EVENT_COLUMN_HEADER_CONTEXT_MENU,o)}dispatchColumnMouseEvent(e,i){let o={type:e,column:i};this.eventService.dispatchEvent(o)}destroy(){super.destroy(),this.removeDragSource(),this.comp=null,this.column=null,this.resizeFeature=null,this.lastFocusEvent=null,this.columnGroupChild=null,this.parentRowCtrl=null,this.eGui=null}};Uo.DOM_DATA_KEY_HEADER_CTRL="headerCtrl";g([v("pinnedWidthService")],Uo.prototype,"pinnedWidthService",2);g([v("focusService")],Uo.prototype,"focusService",2);g([v("userComponentFactory")],Uo.prototype,"userComponentFactory",2);g([v("ctrlsService")],Uo.prototype,"ctrlsService",2);g([v("dragAndDropService")],Uo.prototype,"dragAndDropService",2);g([v("menuService")],Uo.prototype,"menuService",2);g([I],Uo.prototype,"postConstruct",1);var Vh=Uo,Hh=class extends A{constructor(t,e,i,o){super(),this.columnOrGroup=t,this.eCell=e,this.ariaEl=this.eCell.querySelector("[role=columnheader]")||this.eCell,this.colsSpanning=o,this.beans=i}setColsSpanning(t){this.colsSpanning=t,this.onLeftChanged()}getColumnOrGroup(){return this.beans.gos.get("enableRtl")&&this.colsSpanning?be(this.colsSpanning):this.columnOrGroup}postConstruct(){this.addManagedListener(this.columnOrGroup,ke.EVENT_LEFT_CHANGED,this.onLeftChanged.bind(this)),this.setLeftFirstTime(),this.addManagedListener(this.eventService,f.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onLeftChanged.bind(this)),this.addManagedPropertyListener("domLayout",this.onLeftChanged.bind(this))}setLeftFirstTime(){let t=this.beans.gos.get("suppressColumnMoveAnimation"),e=T(this.columnOrGroup.getOldLeft());this.beans.columnAnimationService.isActive()&&e&&!t?this.animateInLeft():this.onLeftChanged()}animateInLeft(){let t=this.getColumnOrGroup(),e=t.getLeft(),i=t.getOldLeft(),o=this.modifyLeftForPrintLayout(t,i),r=this.modifyLeftForPrintLayout(t,e);this.setLeft(o),this.actualLeft=r,this.beans.columnAnimationService.executeNextVMTurn(()=>{this.actualLeft===r&&this.setLeft(r)})}onLeftChanged(){let t=this.getColumnOrGroup(),e=t.getLeft();this.actualLeft=this.modifyLeftForPrintLayout(t,e),this.setLeft(this.actualLeft)}modifyLeftForPrintLayout(t,e){if(!this.beans.gos.isDomLayout("print")||t.getPinned()==="left")return e;let o=this.beans.columnModel.getDisplayedColumnsLeftWidth();if(t.getPinned()==="right"){let r=this.beans.columnModel.getBodyContainerWidth();return o+r+e}return o+e}setLeft(t){T(t)&&(this.eCell.style.left=`${t}px`);let e;if(this.columnOrGroup instanceof ke)e=this.columnOrGroup;else{let o=this.columnOrGroup.getLeafColumns();if(!o.length)return;o.length>1&&Px(this.ariaEl,o.length),e=o[0]}}};g([I],Hh.prototype,"postConstruct",1);var Wd=class extends A{constructor(t,e){super(),this.columns=t,this.element=e}postConstruct(){this.gos.get("columnHoverHighlight")&&this.addMouseHoverListeners()}addMouseHoverListeners(){this.addManagedListener(this.element,"mouseout",this.onMouseOut.bind(this)),this.addManagedListener(this.element,"mouseover",this.onMouseOver.bind(this))}onMouseOut(){this.columnHoverService.clearMouseOver()}onMouseOver(){this.columnHoverService.setMouseOver(this.columns)}};g([v("columnHoverService")],Wd.prototype,"columnHoverService",2);g([I],Wd.prototype,"postConstruct",1);var wk=class extends Vh{constructor(t,e,i){super(t,e,i),this.iconCreated=!1,this.column=t}setComp(t,e,i,o){this.comp=t,this.eButtonShowMainFilter=i,this.eFloatingFilterBody=o,this.setGui(e),this.setupActive(),this.setupWidth(),this.setupLeft(),this.setupHover(),this.setupFocus(),this.setupAria(),this.setupFilterButton(),this.setupUserComp(),this.setupSyncWithFilter(),this.setupUi(),this.addManagedListener(this.eButtonShowMainFilter,"click",this.showParentFilter.bind(this)),this.setupFilterChangedListener(),this.addManagedListener(this.column,ke.EVENT_COL_DEF_CHANGED,this.onColDefChanged.bind(this))}resizeHeader(){}moveHeader(){}setupActive(){let t=this.column.getColDef(),e=!!t.filter,i=!!t.floatingFilter;this.active=e&&i}setupUi(){if(this.comp.setButtonWrapperDisplayed(!this.suppressFilterButton&&this.active),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-full-body",this.suppressFilterButton),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-body",!this.suppressFilterButton),!this.active||this.iconCreated)return;let t=qe("filter",this.gos,this.column);t&&(this.iconCreated=!0,this.eButtonShowMainFilter.appendChild(t))}setupFocus(){this.createManagedBean(new Fr(this.eGui,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)}))}setupAria(){let t=this.localeService.getLocaleTextFunc();yi(this.eButtonShowMainFilter,t("ariaFilterMenuOpen","Open Filter Menu"))}onTabKeyDown(t){if(this.gos.getActiveDomElement()===this.eGui)return;let o=this.focusService.findNextFocusableElement(this.eGui,null,t.shiftKey);if(o){this.beans.headerNavigationService.scrollToColumn(this.column),t.preventDefault(),o.focus();return}let r=this.findNextColumnWithFloatingFilter(t.shiftKey);r&&this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:this.getParentRowCtrl().getRowIndex(),column:r},event:t})&&t.preventDefault()}findNextColumnWithFloatingFilter(t){let e=this.beans.columnModel,i=this.column;do if(i=t?e.getDisplayedColBefore(i):e.getDisplayedColAfter(i),!i)break;while(!i.getColDef().filter||!i.getColDef().floatingFilter);return i}handleKeyDown(t){super.handleKeyDown(t);let e=this.getWrapperHasFocus();switch(t.key){case S.UP:case S.DOWN:e||t.preventDefault();case S.LEFT:case S.RIGHT:if(e)return;t.stopPropagation();case S.ENTER:e&&this.focusService.focusInto(this.eGui)&&t.preventDefault();break;case S.ESCAPE:e||this.eGui.focus()}}onFocusIn(t){if(this.eGui.contains(t.relatedTarget))return;let i=!!t.relatedTarget&&!t.relatedTarget.classList.contains("ag-floating-filter"),o=!!t.relatedTarget&&bn(t.relatedTarget,"ag-floating-filter");if(i&&o&&t.target===this.eGui){let n=this.lastFocusEvent,s=!!(n&&n.key===S.TAB);if(n&&s){let a=n.shiftKey;this.focusService.focusInto(this.eGui,a)}}let r=this.getRowIndex();this.beans.focusService.setFocusedHeader(r,this.column)}setupHover(){this.createManagedBean(new Wd([this.column],this.eGui));let t=()=>{if(!this.gos.get("columnHoverHighlight"))return;let e=this.beans.columnHoverService.isHovered(this.column);this.comp.addOrRemoveCssClass("ag-column-hover",e)};this.addManagedListener(this.eventService,f.EVENT_COLUMN_HOVER_CHANGED,t),t()}setupLeft(){let t=new Hh(this.column,this.eGui,this.beans);this.createManagedBean(t)}setupFilterButton(){this.suppressFilterButton=!this.menuService.isFloatingFilterButtonEnabled(this.column),this.highlightFilterButtonWhenActive=!this.menuService.isLegacyMenuEnabled()}setupUserComp(){if(!this.active)return;let t=this.beans.filterManager.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter());t&&this.setCompDetails(t)}setCompDetails(t){this.userCompDetails=t,this.comp.setCompDetails(t)}showParentFilter(){let t=this.suppressFilterButton?this.eFloatingFilterBody:this.eButtonShowMainFilter;this.menuService.showFilterMenu({column:this.column,buttonElement:t,containerType:"floatingFilter",positionBy:"button"})}setupSyncWithFilter(){if(!this.active)return;let{filterManager:t}=this.beans,e=i=>{if(i?.source==="filterDestroyed"&&this.context.isDestroyed())return;let o=this.comp.getFloatingFilterComp();o&&o.then(r=>{var n;if(r){let s=t.getCurrentFloatingFilterParentModel(this.column);r.onParentModelChanged(s,i?this.gos.addGridCommonParams({columns:(n=i.columns)!=null?n:[],type:f.EVENT_FILTER_CHANGED,source:i.source==="api"?"api":"columnFilter"}):null)}})};this.destroySyncListener=this.addManagedListener(this.column,ke.EVENT_FILTER_CHANGED,e),t.isFilterActive(this.column)&&e(null)}setupWidth(){let t=()=>{let e=`${this.column.getActualWidth()}px`;this.comp.setWidth(e)};this.addManagedListener(this.column,ke.EVENT_WIDTH_CHANGED,t),t()}setupFilterChangedListener(){this.active&&(this.destroyFilterChangedListener=this.addManagedListener(this.column,ke.EVENT_FILTER_CHANGED,this.updateFilterButton.bind(this)),this.updateFilterButton())}updateFilterButton(){if(!this.suppressFilterButton&&this.comp){let t=this.beans.filterManager.isFilterAllowed(this.column);this.comp.setButtonWrapperDisplayed(t),this.highlightFilterButtonWhenActive&&t&&this.eButtonShowMainFilter.classList.toggle("ag-filter-active",this.column.isFilterActive())}}onColDefChanged(){var t,e;let i=this.active;this.setupActive();let o=!i&&this.active;i&&!this.active&&((t=this.destroySyncListener)==null||t.call(this),(e=this.destroyFilterChangedListener)==null||e.call(this));let r=this.active?this.beans.filterManager.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter()):null,n=this.comp.getFloatingFilterComp();!n||!r?this.updateCompDetails(r,o):n.then(s=>{var a;!s||this.beans.filterManager.areFilterCompsDifferent((a=this.userCompDetails)!=null?a:null,r)?this.updateCompDetails(r,o):this.updateFloatingFilterParams(r)})}updateCompDetails(t,e){this.isAlive()&&(this.setCompDetails(t),this.setupFilterButton(),this.setupUi(),e&&(this.setupSyncWithFilter(),this.setupFilterChangedListener()))}updateFloatingFilterParams(t){var e;if(!t)return;let i=t.params;(e=this.comp.getFloatingFilterComp())==null||e.then(o=>{let r=!1;o?.refresh&&typeof o.refresh=="function"&&o.refresh(i)!==null&&(r=!0),!r&&o?.onParamsUpdated&&typeof o.onParamsUpdated=="function"&&o.onParamsUpdated(i)!==null&&q("Custom floating filter method 'onParamsUpdated' is deprecated. Use 'refresh' instead.")})}destroy(){super.destroy(),this.eButtonShowMainFilter=null,this.eFloatingFilterBody=null,this.userCompDetails=null,this.destroySyncListener=null,this.destroyFilterChangedListener=null}},ya=class extends A{constructor(t,e,i,o,r){super(),this.pinned=t,this.column=e,this.eResize=i,this.comp=o,this.ctrl=r}postConstruct(){let t=[],e,i,o=()=>{if(me(this.eResize,e),!e)return;let s=this.horizontalResizeService.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});if(t.push(s),i){let a=this.gos.get("skipHeaderOnAutoSize"),l=()=>{this.columnModel.autoSizeColumn(this.column,"uiColumnResized",a)};this.eResize.addEventListener("dblclick",l);let d=new St(this.eResize);d.addEventListener(St.EVENT_DOUBLE_TAP,l),t.push(()=>{this.eResize.removeEventListener("dblclick",l),d.removeEventListener(St.EVENT_DOUBLE_TAP,l),d.destroy()})}},r=()=>{t.forEach(s=>s()),t.length=0},n=()=>{let s=this.column.isResizable(),a=!this.gos.get("suppressAutoSize")&&!this.column.getColDef().suppressAutoSize;(s!==e||a!==i)&&(e=s,i=a,r(),o())};n(),this.addDestroyFunc(r),this.ctrl.addRefreshFunction(n)}onResizing(t,e){let{column:i,lastResizeAmount:o,resizeStartWidth:r}=this,n=this.normaliseResizeAmount(e),s=r+n,a=[{key:i,newWidth:s}];if(this.column.getPinned()){let l=this.pinnedWidthService.getPinnedLeftWidth(),d=this.pinnedWidthService.getPinnedRightWidth(),c=zn(this.ctrlsService.getGridBodyCtrl().getBodyViewportElement())-50;if(l+d+(n-o)>c)return}this.lastResizeAmount=n,this.columnModel.setColumnWidths(a,this.resizeWithShiftKey,t,"uiColumnResized"),t&&this.toggleColumnResizing(!1)}onResizeStart(t){this.resizeStartWidth=this.column.getActualWidth(),this.lastResizeAmount=0,this.resizeWithShiftKey=t,this.toggleColumnResizing(!0)}toggleColumnResizing(t){this.comp.addOrRemoveCssClass("ag-column-resizing",t)}normaliseResizeAmount(t){let e=t,i=this.pinned!=="left",o=this.pinned==="right";return this.gos.get("enableRtl")?i&&(e*=-1):o&&(e*=-1),e}};g([v("horizontalResizeService")],ya.prototype,"horizontalResizeService",2);g([v("pinnedWidthService")],ya.prototype,"pinnedWidthService",2);g([v("ctrlsService")],ya.prototype,"ctrlsService",2);g([v("columnModel")],ya.prototype,"columnModel",2);g([I],ya.prototype,"postConstruct",1);var bv=class extends A{constructor(t){super(),this.cbSelectAllVisible=!1,this.processingEventFromCheckbox=!1,this.column=t}onSpaceKeyDown(t){let e=this.cbSelectAll;e.isDisplayed()&&!e.getGui().contains(this.gos.getActiveDomElement())&&(t.preventDefault(),e.setValue(!e.getValue()))}getCheckboxGui(){return this.cbSelectAll.getGui()}setComp(t){this.headerCellCtrl=t,this.cbSelectAll=this.createManagedBean(new Th),this.cbSelectAll.addCssClass("ag-header-select-all"),Xe(this.cbSelectAll.getGui(),"presentation"),this.showOrHideSelectAll(),this.addManagedListener(this.eventService,f.EVENT_NEW_COLUMNS_LOADED,this.onNewColumnsLoaded.bind(this)),this.addManagedListener(this.eventService,f.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,f.EVENT_SELECTION_CHANGED,this.onSelectionChanged.bind(this)),this.addManagedListener(this.eventService,f.EVENT_PAGINATION_CHANGED,this.onSelectionChanged.bind(this)),this.addManagedListener(this.eventService,f.EVENT_MODEL_UPDATED,this.onModelChanged.bind(this)),this.addManagedListener(this.cbSelectAll,f.EVENT_FIELD_VALUE_CHANGED,this.onCbSelectAll.bind(this)),Od(this.cbSelectAll.getGui(),!0),this.cbSelectAll.getInputElement().setAttribute("tabindex","-1"),this.refreshSelectAllLabel()}onNewColumnsLoaded(){this.showOrHideSelectAll()}onDisplayedColumnsChanged(){this.isAlive()&&this.showOrHideSelectAll()}showOrHideSelectAll(){this.cbSelectAllVisible=this.isCheckboxSelection(),this.cbSelectAll.setDisplayed(this.cbSelectAllVisible,{skipAriaHidden:!0}),this.cbSelectAllVisible&&(this.checkRightRowModelType("selectAllCheckbox"),this.checkSelectionType("selectAllCheckbox"),this.updateStateOfCheckbox()),this.refreshSelectAllLabel()}onModelChanged(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()}onSelectionChanged(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()}updateStateOfCheckbox(){if(this.processingEventFromCheckbox)return;this.processingEventFromCheckbox=!0;let t=this.selectionService.getSelectAllState(this.isFilteredOnly(),this.isCurrentPageOnly());this.cbSelectAll.setValue(t);let e=this.selectionService.hasNodesToSelect(this.isFilteredOnly(),this.isCurrentPageOnly());this.cbSelectAll.setDisabled(!e),this.refreshSelectAllLabel(),this.processingEventFromCheckbox=!1}refreshSelectAllLabel(){let t=this.localeService.getLocaleTextFunc(),i=this.cbSelectAll.getValue()?t("ariaChecked","checked"):t("ariaUnchecked","unchecked"),o=t("ariaRowSelectAll","Press Space to toggle all rows selection");this.cbSelectAllVisible?this.headerCellCtrl.setAriaDescriptionProperty("selectAll",`${o} (${i})`):this.headerCellCtrl.setAriaDescriptionProperty("selectAll",null),this.cbSelectAll.setInputAriaLabel(`${o} (${i})`),this.headerCellCtrl.announceAriaDescription()}checkSelectionType(t){return this.gos.get("rowSelection")==="multiple"?!0:(console.warn(`AG Grid: ${t} is only available if using 'multiple' rowSelection.`),!1)}checkRightRowModelType(t){let e=this.rowModel.getType();return e==="clientSide"||e==="serverSide"?!0:(console.warn(`AG Grid: ${t} is only available if using 'clientSide' or 'serverSide' rowModelType, you are using ${e}.`),!1)}onCbSelectAll(){if(this.processingEventFromCheckbox||!this.cbSelectAllVisible)return;let t=this.cbSelectAll.getValue(),e=this.isFilteredOnly(),i=this.isCurrentPageOnly(),o="uiSelectAll";i?o="uiSelectAllCurrentPage":e&&(o="uiSelectAllFiltered");let r={source:o,justFiltered:e,justCurrentPage:i};t?this.selectionService.selectAllRowNodes(r):this.selectionService.deselectAllRowNodes(r)}isCheckboxSelection(){let t=this.column.getColDef().headerCheckboxSelection;if(typeof t=="function"){let e=t,i=this.gos.addGridCommonParams({column:this.column,colDef:this.column.getColDef()});t=e(i)}return t?this.checkRightRowModelType("headerCheckboxSelection")&&this.checkSelectionType("headerCheckboxSelection"):!1}isFilteredOnly(){return!!this.column.getColDef().headerCheckboxSelectionFilteredOnly}isCurrentPageOnly(){return!!this.column.getColDef().headerCheckboxSelectionCurrentPageOnly}};g([v("rowModel")],bv.prototype,"rowModel",2);g([v("selectionService")],bv.prototype,"selectionService",2);var yk=class extends Vh{constructor(t,e,i){super(t,e,i),this.refreshFunctions=[],this.userHeaderClasses=new Set,this.ariaDescriptionProperties=new Map,this.column=t}setComp(t,e,i,o){this.comp=t,this.setGui(e),this.updateState(),this.setupWidth(),this.setupMovingCss(),this.setupMenuClass(),this.setupSortableClass(),this.setupWrapTextClass(),this.refreshSpanHeaderHeight(),this.setupAutoHeight(o),this.addColumnHoverListener(),this.setupFilterClass(),this.setupClassesFromColDef(),this.setupTooltip(),this.addActiveHeaderMouseListeners(),this.setupSelectAll(),this.setupUserComp(),this.refreshAria(),this.resizeFeature=this.createManagedBean(new ya(this.getPinned(),this.column,i,t,this)),this.createManagedBean(new Wd([this.column],e)),this.createManagedBean(new Hh(this.column,e,this.beans)),this.createManagedBean(new Fr(e,{shouldStopEventPropagation:r=>this.shouldStopEventPropagation(r),onTabKeyDown:()=>null,handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addResizeAndMoveKeyboardListeners(),this.addManagedPropertyListeners(["suppressMovableColumns","suppressMenuHide","suppressAggFuncInHeader"],this.refresh.bind(this)),this.addManagedListener(this.column,ke.EVENT_COL_DEF_CHANGED,this.refresh.bind(this)),this.addManagedListener(this.eventService,f.EVENT_COLUMN_VALUE_CHANGED,this.onColumnValueChanged.bind(this)),this.addManagedListener(this.eventService,f.EVENT_COLUMN_ROW_GROUP_CHANGED,this.onColumnRowGroupChanged.bind(this)),this.addManagedListener(this.eventService,f.EVENT_COLUMN_PIVOT_CHANGED,this.onColumnPivotChanged.bind(this)),this.addManagedListener(this.eventService,f.EVENT_HEADER_HEIGHT_CHANGED,this.onHeaderHeightChanged.bind(this))}resizeHeader(t,e){var i,o;if(!this.column.isResizable())return;let r=this.column.getActualWidth(),n=(i=this.column.getMinWidth())!=null?i:0,s=(o=this.column.getMaxWidth())!=null?o:Number.MAX_SAFE_INTEGER,a=Math.min(Math.max(r+t,n),s);this.beans.columnModel.setColumnWidths([{key:this.column,newWidth:a}],e,!0,"uiColumnResized")}moveHeader(t){let{eGui:e,column:i,gos:o,ctrlsService:r}=this,n=this.getPinned(),s=e.getBoundingClientRect().left,a=i.getActualWidth(),l=o.get("enableRtl"),d=t===0!==l,c=En.normaliseX(d?s-20:s+a+20,n,!0,o,r);En.attemptMoveColumns({allMovingColumns:[i],isFromHeader:!0,hDirection:t,xPosition:c,pinned:n,fromEnter:!1,fakeEvent:!1,gos:o,columnModel:this.beans.columnModel}),r.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(i,"auto")}setupUserComp(){let t=this.lookupUserCompDetails();this.setCompDetails(t)}setCompDetails(t){this.userCompDetails=t,this.comp.setUserCompDetails(t)}lookupUserCompDetails(){let t=this.createParams(),e=this.column.getColDef();return this.userComponentFactory.getHeaderCompDetails(e,t)}createParams(){return this.gos.addGridCommonParams({column:this.column,displayName:this.displayName,enableSorting:this.column.isSortable(),enableMenu:this.menuEnabled,enableFilterButton:this.openFilterEnabled&&this.menuService.isHeaderFilterButtonEnabled(this.column),enableFilterIcon:!this.openFilterEnabled||this.menuService.isLegacyMenuEnabled(),showColumnMenu:e=>{this.menuService.showColumnMenu({column:this.column,buttonElement:e,positionBy:"button"})},showColumnMenuAfterMouseClick:e=>{this.menuService.showColumnMenu({column:this.column,mouseEvent:e,positionBy:"mouse"})},showFilter:e=>{this.menuService.showFilterMenu({column:this.column,buttonElement:e,containerType:"columnFilter",positionBy:"button"})},progressSort:e=>{this.beans.sortController.progressSort(this.column,!!e,"uiColumnSorted")},setSort:(e,i)=>{this.beans.sortController.setSortForColumn(this.column,e,!!i,"uiColumnSorted")},eGridHeader:this.getGui(),setTooltip:(e,i)=>{this.setupTooltip(e,i)}})}setupSelectAll(){this.selectAllFeature=this.createManagedBean(new bv(this.column)),this.selectAllFeature.setComp(this)}getSelectAllGui(){return this.selectAllFeature.getCheckboxGui()}handleKeyDown(t){super.handleKeyDown(t),t.key===S.SPACE&&this.selectAllFeature.onSpaceKeyDown(t),t.key===S.ENTER&&this.onEnterKeyDown(t),t.key===S.DOWN&&t.altKey&&this.showMenuOnKeyPress(t,!1)}onEnterKeyDown(t){if(t.ctrlKey||t.metaKey)this.showMenuOnKeyPress(t,!0);else if(this.sortable){let e=t.shiftKey;this.beans.sortController.progressSort(this.column,e,"uiColumnSorted")}}showMenuOnKeyPress(t,e){let i=this.comp.getUserCompInstance();!i||!(i instanceof gm)||i.onMenuKeyboardShortcut(e)&&t.preventDefault()}onFocusIn(t){if(!this.getGui().contains(t.relatedTarget)){let e=this.getRowIndex();this.focusService.setFocusedHeader(e,this.column),this.announceAriaDescription()}this.focusService.isKeyboardMode()&&this.setActiveHeader(!0)}onFocusOut(t){this.getGui().contains(t.relatedTarget)||this.setActiveHeader(!1)}setupTooltip(t,e){this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature));let i=this.gos.get("tooltipShowMode")==="whenTruncated",o=this.eGui,r=this.column.getColDef();!e&&i&&!r.headerComponent&&(e=()=>{let a=o.querySelector(".ag-header-cell-text");return a?a.scrollWidth>a.clientWidth:!0});let n={getColumn:()=>this.column,getColDef:()=>this.column.getColDef(),getGui:()=>o,getLocation:()=>"header",getTooltipValue:()=>t??this.column.getColDef().headerTooltip,shouldDisplayTooltip:e},s=this.createManagedBean(new Ho(n));this.refreshFunctions.push(()=>s.refreshToolTip())}setupClassesFromColDef(){let t=()=>{let e=this.column.getColDef(),i=Lh.getHeaderClassesFromColDef(e,this.gos,this.column,null),o=this.userHeaderClasses;this.userHeaderClasses=new Set(i),i.forEach(r=>{o.has(r)?o.delete(r):this.comp.addOrRemoveCssClass(r,!0)}),o.forEach(r=>this.comp.addOrRemoveCssClass(r,!1))};this.refreshFunctions.push(t),t()}setDragSource(t){if(this.dragSourceElement=t,this.removeDragSource(),!t||!this.draggable)return;let{column:e,beans:i,displayName:o,dragAndDropService:r,gos:n}=this,{columnModel:s}=i,a=!this.gos.get("suppressDragLeaveHidesColumns"),l=this.dragSource={type:1,eElement:t,getDefaultIconName:()=>a?te.ICON_HIDE:te.ICON_NOT_ALLOWED,getDragItem:()=>this.createDragItem(e),dragItemName:o,onDragStarted:()=>{a=!n.get("suppressDragLeaveHidesColumns"),e.setMoving(!0,"uiColumnMoved")},onDragStopped:()=>e.setMoving(!1,"uiColumnMoved"),onGridEnter:d=>{var c;if(a){let u=((c=d?.columns)==null?void 0:c.filter(h=>!h.getColDef().lockVisible))||[];s.setColumnsVisible(u,!0,"uiColumnMoved")}},onGridExit:d=>{var c;if(a){let u=((c=d?.columns)==null?void 0:c.filter(h=>!h.getColDef().lockVisible))||[];s.setColumnsVisible(u,!1,"uiColumnMoved")}}};r.addDragSource(l,!0)}createDragItem(t){let e={};return e[t.getId()]=t.isVisible(),{columns:[t],visibleState:e}}updateState(){this.menuEnabled=this.menuService.isColumnMenuInHeaderEnabled(this.column),this.openFilterEnabled=this.menuService.isFilterMenuInHeaderEnabled(this.column),this.sortable=this.column.isSortable(),this.displayName=this.calculateDisplayName(),this.draggable=this.workOutDraggable()}addRefreshFunction(t){this.refreshFunctions.push(t)}refresh(){this.updateState(),this.refreshHeaderComp(),this.refreshAria(),this.refreshFunctions.forEach(t=>t())}refreshHeaderComp(){let t=this.lookupUserCompDetails();(this.comp.getUserCompInstance()!=null&&this.userCompDetails.componentClass==t.componentClass?this.attemptHeaderCompRefresh(t.params):!1)?this.setDragSource(this.dragSourceElement):this.setCompDetails(t)}attemptHeaderCompRefresh(t){let e=this.comp.getUserCompInstance();return!e||!e.refresh?!1:e.refresh(t)}calculateDisplayName(){return this.beans.columnModel.getDisplayNameForColumn(this.column,"header",!0)}checkDisplayName(){this.displayName!==this.calculateDisplayName()&&this.refresh()}workOutDraggable(){let t=this.column.getColDef();return!!(!this.gos.get("suppressMovableColumns")&&!t.suppressMovable&&!t.lockPosition)||!!t.enableRowGroup||!!t.enablePivot}onColumnRowGroupChanged(){this.checkDisplayName()}onColumnPivotChanged(){this.checkDisplayName()}onColumnValueChanged(){this.checkDisplayName()}setupWidth(){let t=()=>{let e=this.column.getActualWidth();this.comp.setWidth(`${e}px`)};this.addManagedListener(this.column,ke.EVENT_WIDTH_CHANGED,t),t()}setupMovingCss(){let t=()=>{this.comp.addOrRemoveCssClass("ag-header-cell-moving",this.column.isMoving())};this.addManagedListener(this.column,ke.EVENT_MOVING_CHANGED,t),t()}setupMenuClass(){let t=()=>{this.comp.addOrRemoveCssClass("ag-column-menu-visible",this.column.isMenuVisible())};this.addManagedListener(this.column,ke.EVENT_MENU_VISIBLE_CHANGED,t),t()}setupSortableClass(){let t=()=>{this.comp.addOrRemoveCssClass("ag-header-cell-sortable",!!this.sortable)};t(),this.addRefreshFunction(t),this.addManagedListener(this.eventService,ke.EVENT_SORT_CHANGED,this.refreshAriaSort.bind(this))}setupFilterClass(){let t=()=>{let e=this.column.isFilterActive();this.comp.addOrRemoveCssClass("ag-header-cell-filtered",e),this.refreshAria()};this.addManagedListener(this.column,ke.EVENT_FILTER_ACTIVE_CHANGED,t),t()}setupWrapTextClass(){let t=()=>{let e=!!this.column.getColDef().wrapHeaderText;this.comp.addOrRemoveCssClass("ag-header-cell-wrap-text",e)};t(),this.addRefreshFunction(t)}onDisplayedColumnsChanged(){super.onDisplayedColumnsChanged(),this.isAlive()&&this.onHeaderHeightChanged()}onHeaderHeightChanged(){this.refreshSpanHeaderHeight()}refreshSpanHeaderHeight(){let{eGui:t,column:e,comp:i,beans:o}=this;if(!e.isSpanHeaderHeight()){t.style.removeProperty("top"),t.style.removeProperty("height"),i.addOrRemoveCssClass("ag-header-span-height",!1),i.addOrRemoveCssClass("ag-header-span-total",!1);return}let{numberOfParents:r,isSpanningTotal:n}=this.column.getColumnGroupPaddingInfo();i.addOrRemoveCssClass("ag-header-span-height",r>0);let{columnModel:s}=o,a=s.getColumnHeaderRowHeight();if(r===0){i.addOrRemoveCssClass("ag-header-span-total",!1),t.style.setProperty("top","0px"),t.style.setProperty("height",`${a}px`);return}i.addOrRemoveCssClass("ag-header-span-total",n);let d=s.isPivotMode()?s.getPivotGroupHeaderHeight():s.getGroupHeaderHeight(),c=r*d;t.style.setProperty("top",`${-c}px`),t.style.setProperty("height",`${a+c}px`)}setupAutoHeight(t){let{columnModel:e,resizeObserverService:i}=this.beans,o=d=>{if(!this.isAlive())return;let{paddingTop:c,paddingBottom:u,borderBottomWidth:h,borderTopWidth:p}=Pr(this.getGui()),m=c+u+h+p,w=t.offsetHeight+m;if(d<5){let b=this.beans.gos.getDocument(),y=!b||!b.contains(t),_=w==0;if(y||_){window.setTimeout(()=>o(d+1),0);return}}e.setColumnHeaderHeight(this.column,w)},r=!1,n,s=()=>{let d=this.column.isAutoHeaderHeight();d&&!r&&a(),!d&&r&&l()},a=()=>{r=!0,o(0),this.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!0),n=i.observeResize(t,()=>o(0))},l=()=>{r=!1,n&&n(),this.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!1),n=void 0};s(),this.addDestroyFunc(()=>l()),this.addManagedListener(this.column,ke.EVENT_WIDTH_CHANGED,()=>r&&o(0)),this.addManagedListener(this.eventService,ke.EVENT_SORT_CHANGED,()=>{r&&window.setTimeout(()=>o(0))}),this.addRefreshFunction(s)}refreshAriaSort(){if(this.sortable){let t=this.localeService.getLocaleTextFunc(),e=this.beans.sortController.getDisplaySortForColumn(this.column)||null;this.comp.setAriaSort(Sx(e)),this.setAriaDescriptionProperty("sort",t("ariaSortableColumn","Press ENTER to sort"))}else this.comp.setAriaSort(),this.setAriaDescriptionProperty("sort",null)}refreshAriaMenu(){if(this.menuEnabled){let t=this.localeService.getLocaleTextFunc();this.setAriaDescriptionProperty("menu",t("ariaMenuColumn","Press ALT DOWN to open column menu"))}else this.setAriaDescriptionProperty("menu",null)}refreshAriaFilterButton(){if(this.openFilterEnabled&&!this.menuService.isLegacyMenuEnabled()){let t=this.localeService.getLocaleTextFunc();this.setAriaDescriptionProperty("filterButton",t("ariaFilterColumn","Press CTRL ENTER to open filter"))}else this.setAriaDescriptionProperty("filterButton",null)}refreshAriaFiltered(){let t=this.localeService.getLocaleTextFunc();this.column.isFilterActive()?this.setAriaDescriptionProperty("filter",t("ariaColumnFiltered","Column Filtered")):this.setAriaDescriptionProperty("filter",null)}setAriaDescriptionProperty(t,e){e!=null?this.ariaDescriptionProperties.set(t,e):this.ariaDescriptionProperties.delete(t)}announceAriaDescription(){if(!this.eGui.contains(this.beans.gos.getActiveDomElement()))return;let t=Array.from(this.ariaDescriptionProperties.keys()).sort((e,i)=>e==="filter"?-1:i.charCodeAt(0)-e.charCodeAt(0)).map(e=>this.ariaDescriptionProperties.get(e)).join(". ");this.beans.ariaAnnouncementService.announceValue(t)}refreshAria(){this.refreshAriaSort(),this.refreshAriaMenu(),this.refreshAriaFilterButton(),this.refreshAriaFiltered()}addColumnHoverListener(){let t=()=>{if(!this.gos.get("columnHoverHighlight"))return;let e=this.beans.columnHoverService.isHovered(this.column);this.comp.addOrRemoveCssClass("ag-column-hover",e)};this.addManagedListener(this.eventService,f.EVENT_COLUMN_HOVER_CHANGED,t),t()}getColId(){return this.column.getColId()}addActiveHeaderMouseListeners(){let t=o=>this.handleMouseOverChange(o.type==="mouseenter"),e=()=>this.dispatchColumnMouseEvent(f.EVENT_COLUMN_HEADER_CLICKED,this.column),i=o=>this.handleContextMenuMouseEvent(o,void 0,this.column);this.addManagedListener(this.getGui(),"mouseenter",t),this.addManagedListener(this.getGui(),"mouseleave",t),this.addManagedListener(this.getGui(),"click",e),this.addManagedListener(this.getGui(),"contextmenu",i)}handleMouseOverChange(t){this.setActiveHeader(t);let i={type:t?f.EVENT_COLUMN_HEADER_MOUSE_OVER:f.EVENT_COLUMN_HEADER_MOUSE_LEAVE,column:this.column};this.eventService.dispatchEvent(i)}setActiveHeader(t){this.comp.addOrRemoveCssClass("ag-header-active",t)}getAnchorElementForMenu(t){let e=this.comp.getUserCompInstance();return e instanceof gm?e.getAnchorElementForMenu(t):this.getGui()}destroy(){super.destroy(),this.refreshFunctions=null,this.selectAllFeature=null,this.dragSourceElement=null,this.userCompDetails=null,this.userHeaderClasses=null,this.ariaDescriptionProperties=null}},Ud=class extends A{constructor(t,e,i,o){super(),this.eResize=e,this.comp=t,this.pinned=i,this.columnGroup=o}postConstruct(){if(!this.columnGroup.isResizable()){this.comp.setResizableDisplayed(!1);return}let t=this.horizontalResizeService.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});if(this.addDestroyFunc(t),!this.gos.get("suppressAutoSize")){let e=this.gos.get("skipHeaderOnAutoSize");this.eResize.addEventListener("dblclick",()=>{let i=[];this.columnGroup.getDisplayedLeafColumns().forEach(r=>{r.getColDef().suppressAutoSize||i.push(r.getColId())}),i.length>0&&this.columnModel.autoSizeColumns({columns:i,skipHeader:e,stopAtGroup:this.columnGroup,source:"uiColumnResized"}),this.resizeLeafColumnsToFit("uiColumnResized")})}}onResizeStart(t){let e=this.getInitialValues(t);this.storeLocalValues(e),this.toggleColumnResizing(!0)}onResizing(t,e,i="uiColumnResized"){let o=this.normaliseDragChange(e),r=this.resizeStartWidth+o;this.resizeColumnsFromLocalValues(r,i,t)}getInitialValues(t){let e=this.getColumnsToResize(),i=this.getInitialSizeOfColumns(e),o=this.getSizeRatiosOfColumns(e,i),r={columnsToResize:e,resizeStartWidth:i,resizeRatios:o},n=null;if(t&&(n=this.columnModel.getDisplayedGroupAtDirection(this.columnGroup,"After")),n){let s=n.getDisplayedLeafColumns(),a=r.groupAfterColumns=s.filter(d=>d.isResizable()),l=r.groupAfterStartWidth=this.getInitialSizeOfColumns(a);r.groupAfterRatios=this.getSizeRatiosOfColumns(a,l)}else r.groupAfterColumns=void 0,r.groupAfterStartWidth=void 0,r.groupAfterRatios=void 0;return r}storeLocalValues(t){let{columnsToResize:e,resizeStartWidth:i,resizeRatios:o,groupAfterColumns:r,groupAfterStartWidth:n,groupAfterRatios:s}=t;this.resizeCols=e,this.resizeStartWidth=i,this.resizeRatios=o,this.resizeTakeFromCols=r,this.resizeTakeFromStartWidth=n,this.resizeTakeFromRatios=s}clearLocalValues(){this.resizeCols=void 0,this.resizeRatios=void 0,this.resizeTakeFromCols=void 0,this.resizeTakeFromRatios=void 0}resizeLeafColumnsToFit(t){let e=this.autoWidthCalculator.getPreferredWidthForColumnGroup(this.columnGroup),i=this.getInitialValues();e>i.resizeStartWidth&&this.resizeColumns(i,e,t,!0)}resizeColumnsFromLocalValues(t,e,i=!0){var o,r,n;if(!this.resizeCols||!this.resizeRatios)return;let s={columnsToResize:this.resizeCols,resizeStartWidth:this.resizeStartWidth,resizeRatios:this.resizeRatios,groupAfterColumns:(o=this.resizeTakeFromCols)!=null?o:void 0,groupAfterStartWidth:(r=this.resizeTakeFromStartWidth)!=null?r:void 0,groupAfterRatios:(n=this.resizeTakeFromRatios)!=null?n:void 0};this.resizeColumns(s,t,e,i)}resizeColumns(t,e,i,o=!0){let{columnsToResize:r,resizeStartWidth:n,resizeRatios:s,groupAfterColumns:a,groupAfterStartWidth:l,groupAfterRatios:d}=t,c=[];if(c.push({columns:r,ratios:s,width:e}),a){let u=e-n;c.push({columns:a,ratios:d,width:l-u})}this.columnModel.resizeColumnSets({resizeSets:c,finished:o,source:i}),o&&this.toggleColumnResizing(!1)}toggleColumnResizing(t){this.comp.addOrRemoveCssClass("ag-column-resizing",t)}getColumnsToResize(){return this.columnGroup.getDisplayedLeafColumns().filter(e=>e.isResizable())}getInitialSizeOfColumns(t){return t.reduce((e,i)=>e+i.getActualWidth(),0)}getSizeRatiosOfColumns(t,e){return t.map(i=>i.getActualWidth()/e)}normaliseDragChange(t){let e=t;return this.gos.get("enableRtl")?this.pinned!=="left"&&(e*=-1):this.pinned==="right"&&(e*=-1),e}destroy(){super.destroy(),this.clearLocalValues()}};g([v("horizontalResizeService")],Ud.prototype,"horizontalResizeService",2);g([v("autoWidthCalculator")],Ud.prototype,"autoWidthCalculator",2);g([v("columnModel")],Ud.prototype,"columnModel",2);g([I],Ud.prototype,"postConstruct",1);var dE=class extends A{constructor(t,e){super(),this.removeChildListenersFuncs=[],this.columnGroup=e,this.comp=t}postConstruct(){this.addListenersToChildrenColumns(),this.addManagedListener(this.columnGroup,ft.EVENT_DISPLAYED_CHILDREN_CHANGED,this.onDisplayedChildrenChanged.bind(this)),this.onWidthChanged(),this.addDestroyFunc(this.removeListenersOnChildrenColumns.bind(this))}addListenersToChildrenColumns(){this.removeListenersOnChildrenColumns();let t=this.onWidthChanged.bind(this);this.columnGroup.getLeafColumns().forEach(e=>{e.addEventListener("widthChanged",t),e.addEventListener("visibleChanged",t),this.removeChildListenersFuncs.push(()=>{e.removeEventListener("widthChanged",t),e.removeEventListener("visibleChanged",t)})})}removeListenersOnChildrenColumns(){this.removeChildListenersFuncs.forEach(t=>t()),this.removeChildListenersFuncs=[]}onDisplayedChildrenChanged(){this.addListenersToChildrenColumns(),this.onWidthChanged()}onWidthChanged(){let t=this.columnGroup.getActualWidth();this.comp.setWidth(`${t}px`),this.comp.addOrRemoveCssClass("ag-hidden",t===0)}};g([I],dE.prototype,"postConstruct",1);var bk=class extends Vh{constructor(t,e,i){super(t,e,i),this.onSuppressColMoveChange=()=>{if(!this.isAlive()||this.isSuppressMoving())this.removeDragSource();else if(!this.dragSource){let o=this.getGui();this.setDragSource(o)}},this.column=t}setComp(t,e,i){this.comp=t,this.setGui(e),this.displayName=this.beans.columnModel.getDisplayNameForColumnGroup(this.column,"header"),this.addClasses(),this.setupMovingCss(),this.setupExpandable(),this.setupTooltip(),this.addDestroyFunc(()=>{this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature))}),this.setupUserComp(),this.addHeaderMouseListeners();let o=this.getParentRowCtrl().getPinned(),r=this.column.getProvidedColumnGroup().getLeafColumns();this.createManagedBean(new Wd(r,e)),this.createManagedBean(new Hh(this.column,e,this.beans)),this.createManagedBean(new dE(t,this.column)),this.resizeFeature=this.createManagedBean(new Ud(t,i,o,this.column)),this.createManagedBean(new Fr(e,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:()=>{},handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)})),this.addManagedPropertyListener(f.EVENT_SUPPRESS_COLUMN_MOVE_CHANGED,this.onSuppressColMoveChange),this.addResizeAndMoveKeyboardListeners()}resizeHeader(t,e){if(!this.resizeFeature)return;let i=this.resizeFeature.getInitialValues(e);this.resizeFeature.resizeColumns(i,i.resizeStartWidth+t,"uiColumnResized",!0)}moveHeader(t){let{beans:e,eGui:i,column:o,gos:r,ctrlsService:n}=this,s=r.get("enableRtl"),a=t===0,l=this.getPinned(),d=i.getBoundingClientRect(),c=d.left,u=d.width,h=En.normaliseX(a!==s?c-20:c+u+20,l,!0,r,n),p=o.getGroupId(),m=this.focusService.getFocusedHeader();En.attemptMoveColumns({allMovingColumns:this.column.getLeafColumns(),isFromHeader:!0,hDirection:t,xPosition:h,pinned:l,fromEnter:!1,fakeEvent:!1,gos:r,columnModel:e.columnModel});let C=o.getDisplayedLeafColumns(),w=a?C[0]:be(C);this.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(w,"auto"),!this.isAlive()&&m&&this.restoreFocus(p,o,m)}restoreFocus(t,e,i){let o=e.getLeafColumns();if(!o.length)return;let r=o[0].getParent();if(!r)return;let n=this.findGroupWidthId(r,t);n&&this.focusService.focusHeaderPosition({headerPosition:He(j({},i),{column:n})})}findGroupWidthId(t,e){for(;t;){if(t.getGroupId()===e)return t;t=t.getParent()}return null}resizeLeafColumnsToFit(t){this.resizeFeature&&this.resizeFeature.resizeLeafColumnsToFit(t)}setupUserComp(){let t=this.gos.addGridCommonParams({displayName:this.displayName,columnGroup:this.column,setExpanded:i=>{this.beans.columnModel.setColumnGroupOpened(this.column.getProvidedColumnGroup(),i,"gridInitializing")},setTooltip:(i,o)=>{this.setupTooltip(i,o)}}),e=this.userComponentFactory.getHeaderGroupCompDetails(t);this.comp.setUserCompDetails(e)}addHeaderMouseListeners(){let t=o=>this.handleMouseOverChange(o.type==="mouseenter"),e=()=>this.dispatchColumnMouseEvent(f.EVENT_COLUMN_HEADER_CLICKED,this.column.getProvidedColumnGroup()),i=o=>this.handleContextMenuMouseEvent(o,void 0,this.column.getProvidedColumnGroup());this.addManagedListener(this.getGui(),"mouseenter",t),this.addManagedListener(this.getGui(),"mouseleave",t),this.addManagedListener(this.getGui(),"click",e),this.addManagedListener(this.getGui(),"contextmenu",i)}handleMouseOverChange(t){let i={type:t?f.EVENT_COLUMN_HEADER_MOUSE_OVER:f.EVENT_COLUMN_HEADER_MOUSE_LEAVE,column:this.column.getProvidedColumnGroup()};this.eventService.dispatchEvent(i)}setupTooltip(t,e){this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature));let i=this.column.getColGroupDef(),o=this.gos.get("tooltipShowMode")==="whenTruncated",r=this.eGui;!e&&o&&!i?.headerGroupComponent&&(e=()=>{let s=r.querySelector(".ag-header-group-text");return s?s.scrollWidth>s.clientWidth:!0});let n={getColumn:()=>this.column,getGui:()=>r,getLocation:()=>"headerGroup",getTooltipValue:()=>t??(i&&i.headerTooltip),shouldDisplayTooltip:e};i&&(n.getColDef=()=>i),this.createBean(new Ho(n))}setupExpandable(){let t=this.column.getProvidedColumnGroup();this.refreshExpanded(),this.addManagedListener(t,ot.EVENT_EXPANDABLE_CHANGED,this.refreshExpanded.bind(this)),this.addManagedListener(t,ot.EVENT_EXPANDED_CHANGED,this.refreshExpanded.bind(this))}refreshExpanded(){let t=this.column;this.expandable=t.isExpandable();let e=t.isExpanded();this.expandable?this.comp.setAriaExpanded(e?"true":"false"):this.comp.setAriaExpanded(void 0)}getColId(){return this.column.getUniqueId()}addClasses(){let t=this.column.getColGroupDef(),e=Lh.getHeaderClassesFromColDef(t,this.gos,null,this.column);this.column.isPadding()?(e.push("ag-header-group-cell-no-group"),this.column.getLeafColumns().every(o=>o.isSpanHeaderHeight())&&e.push("ag-header-span-height")):e.push("ag-header-group-cell-with-group"),e.forEach(i=>this.comp.addOrRemoveCssClass(i,!0))}setupMovingCss(){let e=this.column.getProvidedColumnGroup().getLeafColumns(),i=()=>this.comp.addOrRemoveCssClass("ag-header-cell-moving",this.column.isMoving());e.forEach(o=>{this.addManagedListener(o,ke.EVENT_MOVING_CHANGED,i)}),i()}onFocusIn(t){if(!this.eGui.contains(t.relatedTarget)){let e=this.getRowIndex();this.beans.focusService.setFocusedHeader(e,this.column)}}handleKeyDown(t){super.handleKeyDown(t);let e=this.getWrapperHasFocus();if(!(!this.expandable||!e)&&t.key===S.ENTER){let i=this.column,o=!i.isExpanded();this.beans.columnModel.setColumnGroupOpened(i.getProvidedColumnGroup(),o,"uiColumnExpanded")}}setDragSource(t){if(!this.isAlive()||this.isSuppressMoving()||(this.removeDragSource(),!t))return;let{beans:e,column:i,displayName:o,gos:r,dragAndDropService:n}=this,{columnModel:s}=e,a=i.getProvidedColumnGroup().getLeafColumns(),l=!r.get("suppressDragLeaveHidesColumns"),d=this.dragSource={type:1,eElement:t,getDefaultIconName:()=>l?te.ICON_HIDE:te.ICON_NOT_ALLOWED,dragItemName:o,getDragItem:()=>this.getDragItemForGroup(i),onDragStarted:()=>{l=!r.get("suppressDragLeaveHidesColumns"),a.forEach(c=>c.setMoving(!0,"uiColumnDragged"))},onDragStopped:()=>a.forEach(c=>c.setMoving(!1,"uiColumnDragged")),onGridEnter:c=>{var u;if(l){let h=((u=c?.columns)==null?void 0:u.filter(p=>!p.getColDef().lockVisible))||[];s.setColumnsVisible(h,!0,"uiColumnMoved")}},onGridExit:c=>{var u;if(l){let h=((u=c?.columns)==null?void 0:u.filter(p=>!p.getColDef().lockVisible))||[];s.setColumnsVisible(h,!1,"uiColumnMoved")}}};n.addDragSource(d,!0)}getDragItemForGroup(t){let e=t.getProvidedColumnGroup().getLeafColumns(),i={};e.forEach(r=>i[r.getId()]=r.isVisible());let o=[];return this.beans.columnModel.getAllDisplayedColumns().forEach(r=>{e.indexOf(r)>=0&&(o.push(r),Jt(e,r))}),e.forEach(r=>o.push(r)),{columns:o,visibleState:i}}isSuppressMoving(){let t=!1;return this.column.getLeafColumns().forEach(i=>{(i.getColDef().suppressMovable||i.getColDef().lockPosition)&&(t=!0)}),t||this.gos.get("suppressMovableColumns")}},Sk=0,rd=class extends A{constructor(t,e,i){super(),this.instanceId=Sk++,this.rowIndex=t,this.pinned=e,this.type=i;let o=i=="group"?"ag-header-row-column-group":i=="filter"?"ag-header-row-column-filter":"ag-header-row-column";this.headerRowClass=`ag-header-row ${o}`}postConstruct(){this.isPrintLayout=this.gos.isDomLayout("print"),this.isEnsureDomOrder=this.gos.get("ensureDomOrder")}getInstanceId(){return this.instanceId}setComp(t,e=!0){this.comp=t,e&&(this.onRowHeightChanged(),this.onVirtualColumnsChanged()),this.setWidth(),this.addEventListeners()}getHeaderRowClass(){return this.headerRowClass}getAriaRowIndex(){return this.rowIndex+1}addEventListeners(){this.addManagedListener(this.eventService,f.EVENT_COLUMN_RESIZED,this.onColumnResized.bind(this)),this.addManagedListener(this.eventService,f.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,f.EVENT_VIRTUAL_COLUMNS_CHANGED,t=>this.onVirtualColumnsChanged(t.afterScroll)),this.addManagedListener(this.eventService,f.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,this.onRowHeightChanged.bind(this)),this.addManagedListener(this.eventService,f.EVENT_GRID_STYLES_CHANGED,this.onRowHeightChanged.bind(this)),this.addManagedListener(this.eventService,f.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("domLayout",this.onDisplayedColumnsChanged.bind(this)),this.addManagedPropertyListener("ensureDomOrder",t=>this.isEnsureDomOrder=t.currentValue),this.addManagedPropertyListener("headerHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("pivotHeaderHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("groupHeaderHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("pivotGroupHeaderHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("floatingFiltersHeight",this.onRowHeightChanged.bind(this))}getHeaderCellCtrl(t){if(this.headerCellCtrls)return yn(this.headerCellCtrls).find(e=>e.getColumnGroupChild()===t)}onDisplayedColumnsChanged(){this.isPrintLayout=this.gos.isDomLayout("print"),this.onVirtualColumnsChanged(),this.setWidth(),this.onRowHeightChanged()}getType(){return this.type}onColumnResized(){this.setWidth()}setWidth(){let t=this.getWidthForRow();this.comp.setWidth(`${t}px`)}getWidthForRow(){let{columnModel:t}=this.beans;return this.isPrintLayout?this.pinned!=null?0:t.getContainerWidth("right")+t.getContainerWidth("left")+t.getContainerWidth(null):t.getContainerWidth(this.pinned)}onRowHeightChanged(){var{topOffset:t,rowHeight:e}=this.getTopAndHeight();this.comp.setTop(t+"px"),this.comp.setHeight(e+"px")}getTopAndHeight(){let{columnModel:t,filterManager:e}=this.beans,i=t.getHeaderRowCount(),o=[],r=0;e.hasFloatingFilters()&&(i++,r=1);let n=t.getColumnGroupHeaderRowHeight(),s=t.getColumnHeaderRowHeight(),a=1+r,l=i-a;for(let u=0;u<l;u++)o.push(n);o.push(s);for(let u=0;u<r;u++)o.push(t.getFloatingFiltersHeight());let d=0;for(let u=0;u<this.rowIndex;u++)d+=o[u];let c=o[this.rowIndex];return{topOffset:d,rowHeight:c}}getPinned(){return this.pinned}getRowIndex(){return this.rowIndex}onVirtualColumnsChanged(t=!1){let e=this.getHeaderCtrls(),i=this.isEnsureDomOrder||this.isPrintLayout;this.comp.setHeaderCtrls(e,i,t)}getHeaderCtrls(){let t=this.headerCellCtrls;this.headerCellCtrls=new Map;let e=this.getColumnsInViewport();for(let r of e)this.recycleAndCreateHeaderCtrls(r,t);let i=r=>{let{focusService:n,columnModel:s}=this.beans;return n.isHeaderWrapperFocused(r)?s.isDisplayed(r.getColumnGroupChild()):!1};if(t)for(let[r,n]of t)i(n)?this.headerCellCtrls.set(r,n):this.destroyBean(n);return Array.from(this.headerCellCtrls.values())}recycleAndCreateHeaderCtrls(t,e){if(!this.headerCellCtrls||t.isEmptyGroup())return;let i=t.getUniqueId(),o;if(e&&(o=e.get(i),e.delete(i)),o&&o.getColumnGroupChild()!=t&&(this.destroyBean(o),o=void 0),o==null)switch(this.type){case"filter":o=this.createBean(new wk(t,this.beans,this));break;case"group":o=this.createBean(new bk(t,this.beans,this));break;default:o=this.createBean(new yk(t,this.beans,this));break}this.headerCellCtrls.set(i,o)}getColumnsInViewport(){return this.isPrintLayout?this.getColumnsInViewportPrintLayout():this.getColumnsInViewportNormalLayout()}getColumnsInViewportPrintLayout(){if(this.pinned!=null)return[];let t=[],e=this.getActualDepth(),{columnModel:i}=this.beans;return["left",null,"right"].forEach(o=>{let r=i.getVirtualHeaderGroupRow(o,e);t=t.concat(r)}),t}getActualDepth(){return this.type=="filter"?this.rowIndex-1:this.rowIndex}getColumnsInViewportNormalLayout(){return this.beans.columnModel.getVirtualHeaderGroupRow(this.pinned,this.getActualDepth())}focusHeader(t,e){if(!this.headerCellCtrls)return!1;let o=Array.from(this.headerCellCtrls.values()).find(r=>r.getColumnGroupChild()==t);return o?o.focus(e):!1}destroy(){this.headerCellCtrls&&this.headerCellCtrls.forEach(t=>{this.destroyBean(t)}),this.headerCellCtrls=void 0,super.destroy()}};g([v("beans")],rd.prototype,"beans",2);g([I],rd.prototype,"postConstruct",1);var jn=class extends A{constructor(t){super(),this.hidden=!1,this.includeFloatingFilter=!1,this.groupsRowCtrls=[],this.pinned=t}setComp(t,e){this.comp=t,this.eViewport=e,this.setupCenterWidth(),this.setupPinnedWidth(),this.setupDragAndDrop(this.eViewport),this.addManagedListener(this.eventService,f.EVENT_GRID_COLUMNS_CHANGED,this.onGridColumnsChanged.bind(this)),this.addManagedListener(this.eventService,f.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,f.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.ctrlsService.registerHeaderContainer(this,this.pinned),this.columnModel.isReady()&&this.refresh()}setupDragAndDrop(t){let e=new Ca(this.pinned,t);this.createManagedBean(e)}refresh(t=!1){let e=new ia,i=this.focusService.getFocusHeaderToUseAfterRefresh(),o=()=>{let a=this.columnModel.getHeaderRowCount()-1;this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls);for(let l=0;l<a;l++){let d=this.createBean(new rd(e.next(),this.pinned,"group"));this.groupsRowCtrls.push(d)}},r=()=>{let a=e.next(),l=!this.hidden&&(this.columnsRowCtrl==null||!t||this.columnsRowCtrl.getRowIndex()!==a);(l||this.hidden)&&(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl)),l&&(this.columnsRowCtrl=this.createBean(new rd(a,this.pinned,"column")))},n=()=>{this.includeFloatingFilter=this.filterManager.hasFloatingFilters()&&!this.hidden;let a=()=>{this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)};if(!this.includeFloatingFilter){a();return}let l=e.next();if(this.filtersRowCtrl){let d=this.filtersRowCtrl.getRowIndex()!==l;(!t||d)&&a()}this.filtersRowCtrl||(this.filtersRowCtrl=this.createBean(new rd(l,this.pinned,"filter")))};o(),r(),n();let s=this.getAllCtrls();this.comp.setCtrls(s),this.restoreFocusOnHeader(i)}restoreFocusOnHeader(t){t==null||t.column.getPinned()!=this.pinned||this.focusService.focusHeaderPosition({headerPosition:t})}getAllCtrls(){let t=[...this.groupsRowCtrls];return this.columnsRowCtrl&&t.push(this.columnsRowCtrl),this.filtersRowCtrl&&t.push(this.filtersRowCtrl),t}onGridColumnsChanged(){this.refresh(!0)}onDisplayedColumnsChanged(){let t=this.filterManager.hasFloatingFilters()&&!this.hidden;this.includeFloatingFilter!==t&&this.refresh(!0)}setupCenterWidth(){this.pinned==null&&this.createManagedBean(new fa(t=>this.comp.setCenterWidth(`${t}px`),!0))}setHorizontalScroll(t){this.comp.setViewportScrollLeft(t)}setupPinnedWidth(){if(this.pinned==null)return;let t=this.pinned==="left",e=this.pinned==="right";this.hidden=!0;let i=()=>{let o=t?this.pinnedWidthService.getPinnedLeftWidth():this.pinnedWidthService.getPinnedRightWidth();if(o==null)return;let r=o==0,n=this.hidden!==r,s=this.gos.get("enableRtl"),a=this.gos.getScrollbarWidth(),d=this.scrollVisibleService.isVerticalScrollShowing()&&(s&&t||!s&&e)?o+a:o;this.comp.setPinnedContainerWidth(`${d}px`),this.comp.setDisplayed(!r),n&&(this.hidden=r,this.refresh())};this.addManagedListener(this.eventService,f.EVENT_LEFT_PINNED_WIDTH_CHANGED,i),this.addManagedListener(this.eventService,f.EVENT_RIGHT_PINNED_WIDTH_CHANGED,i),this.addManagedListener(this.eventService,f.EVENT_SCROLL_VISIBILITY_CHANGED,i),this.addManagedListener(this.eventService,f.EVENT_SCROLLBAR_WIDTH_CHANGED,i)}getHeaderCtrlForColumn(t){if(t instanceof ke)return this.columnsRowCtrl?this.columnsRowCtrl.getHeaderCellCtrl(t):void 0;if(this.groupsRowCtrls.length!==0)for(let e=0;e<this.groupsRowCtrls.length;e++){let i=this.groupsRowCtrls[e].getHeaderCellCtrl(t);if(i)return i}}getHtmlElementForColumnHeader(t){let e=this.getHeaderCtrlForColumn(t);return e?e.getGui():null}getRowType(t){let i=this.getAllCtrls()[t];return i?i.getType():void 0}focusHeader(t,e,i){let r=this.getAllCtrls()[t];return r?r.focusHeader(e,i):!1}getViewport(){return this.eViewport}getRowCount(){return this.groupsRowCtrls.length+(this.columnsRowCtrl?1:0)+(this.filtersRowCtrl?1:0)}destroy(){this.filtersRowCtrl&&(this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)),this.columnsRowCtrl&&(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl)),this.groupsRowCtrls&&this.groupsRowCtrls.length&&(this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls)),super.destroy()}};g([v("ctrlsService")],jn.prototype,"ctrlsService",2);g([v("scrollVisibleService")],jn.prototype,"scrollVisibleService",2);g([v("pinnedWidthService")],jn.prototype,"pinnedWidthService",2);g([v("columnModel")],jn.prototype,"columnModel",2);g([v("focusService")],jn.prototype,"focusService",2);g([v("filterManager")],jn.prototype,"filterManager",2);var qn=class qu extends J{constructor(e){super(),this.headerRowComps={},this.rowCompsList=[],this.pinned=e}init(){this.selectAndSetTemplate();let e={setDisplayed:o=>this.setDisplayed(o),setCtrls:o=>this.setCtrls(o),setCenterWidth:o=>this.eCenterContainer.style.width=o,setViewportScrollLeft:o=>this.getGui().scrollLeft=o,setPinnedContainerWidth:o=>{let r=this.getGui();r.style.width=o,r.style.maxWidth=o,r.style.minWidth=o}};this.createManagedBean(new jn(this.pinned)).setComp(e,this.getGui())}selectAndSetTemplate(){let e=this.pinned=="left",i=this.pinned=="right",o=e?qu.PINNED_LEFT_TEMPLATE:i?qu.PINNED_RIGHT_TEMPLATE:qu.CENTER_TEMPLATE;this.setTemplate(o),this.eRowContainer=this.eCenterContainer?this.eCenterContainer:this.getGui()}destroyRowComps(){this.setCtrls([])}destroyRowComp(e){this.destroyBean(e),this.eRowContainer.removeChild(e.getGui())}setCtrls(e){let i=this.headerRowComps;this.headerRowComps={},this.rowCompsList=[];let o,r=n=>{let s=n.getGui();s.parentElement!=this.eRowContainer&&this.eRowContainer.appendChild(s),o&&Xm(this.eRowContainer,s,o),o=s};e.forEach(n=>{let s=n.getInstanceId(),a=i[s];delete i[s];let l=a||this.createBean(new yv(n));this.headerRowComps[s]=l,this.rowCompsList.push(l),r(l)}),Dr(i).forEach(n=>this.destroyRowComp(n))}};qn.PINNED_LEFT_TEMPLATE='<div class="ag-pinned-left-header" role="rowgroup"></div>';qn.PINNED_RIGHT_TEMPLATE='<div class="ag-pinned-right-header" role="rowgroup"></div>';qn.CENTER_TEMPLATE=`<div class="ag-header-viewport" role="presentation">
            <div class="ag-header-container" ref="eCenterContainer" role="rowgroup"></div>
        </div>`;g([k("eCenterContainer")],qn.prototype,"eCenterContainer",2);g([I],qn.prototype,"init",1);g([Kt],qn.prototype,"destroyRowComps",1);var Kf=qn;var Mn=class extends A{constructor(){super(...arguments),this.currentHeaderRowWithoutSpan=-1}postConstruct(){this.ctrlsService.whenReady(e=>{this.gridBodyCon=e.gridBodyCtrl});let t=this.gos.getDocument();this.addManagedListener(t,"mousedown",()=>this.setCurrentHeaderRowWithoutSpan(-1))}getHeaderRowCount(){let t=this.ctrlsService.getHeaderRowContainerCtrl();return t?t.getRowCount():0}navigateVertically(t,e,i){if(e||(e=this.focusService.getFocusedHeader()),!e)return!1;let{headerRowIndex:o,column:r}=e,n=this.getHeaderRowCount(),s=t===0,{headerRowIndex:a,column:l,headerRowIndexWithoutSpan:d}=s?this.headerPositionUtils.getColumnVisibleParent(r,o):this.headerPositionUtils.getColumnVisibleChild(r,o),c=!1;return a<0&&(a=0,l=r,c=!0),a>=n?(a=-1,this.setCurrentHeaderRowWithoutSpan(-1)):d!==void 0&&(this.currentHeaderRowWithoutSpan=d),!c&&!l?!1:this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:a,column:l},allowUserOverride:!0,event:i})}setCurrentHeaderRowWithoutSpan(t){this.currentHeaderRowWithoutSpan=t}navigateHorizontally(t,e=!1,i){let o=this.focusService.getFocusedHeader(),r=t===2,n=this.gos.get("enableRtl"),s,a;if(this.currentHeaderRowWithoutSpan!==-1?o.headerRowIndex=this.currentHeaderRowWithoutSpan:this.currentHeaderRowWithoutSpan=o.headerRowIndex,r!==n?(a="Before",s=this.headerPositionUtils.findHeader(o,a)):(a="After",s=this.headerPositionUtils.findHeader(o,a)),s||!e)return this.focusService.focusHeaderPosition({headerPosition:s,direction:a,fromTab:e,allowUserOverride:!0,event:i});if(e){let l=this.gos.getCallback("tabToNextHeader");if(l)return this.focusService.focusHeaderPositionFromUserFunc({userFunc:l,headerPosition:s,direction:a})}return this.focusNextHeaderRow(o,a,i)}focusNextHeaderRow(t,e,i){let o=t.headerRowIndex,r=null,n;if(e==="Before"?o>0&&(n=o-1,this.currentHeaderRowWithoutSpan-=1,r=this.headerPositionUtils.findColAtEdgeForHeaderRow(n,"end")):(n=o+1,this.currentHeaderRowWithoutSpan<this.getHeaderRowCount()?this.currentHeaderRowWithoutSpan+=1:this.setCurrentHeaderRowWithoutSpan(-1),r=this.headerPositionUtils.findColAtEdgeForHeaderRow(n,"start")),!r)return!1;let{column:s,headerRowIndex:a}=this.headerPositionUtils.getHeaderIndexToFocus(r.column,r?.headerRowIndex);return this.focusService.focusHeaderPosition({headerPosition:{column:s,headerRowIndex:a},direction:e,fromTab:!0,allowUserOverride:!0,event:i})}scrollToColumn(t,e="After"){if(t.getPinned())return;let i;if(t instanceof ft){let o=t.getDisplayedLeafColumns();i=e==="Before"?be(o):o[0]}else i=t;this.gridBodyCon.getScrollFeature().ensureColumnVisible(i)}};g([v("focusService")],Mn.prototype,"focusService",2);g([v("headerPositionUtils")],Mn.prototype,"headerPositionUtils",2);g([v("ctrlsService")],Mn.prototype,"ctrlsService",2);g([I],Mn.prototype,"postConstruct",1);Mn=g([V("headerNavigationService")],Mn);var Kn=class extends A{setComp(t,e,i){this.comp=t,this.eGui=e,this.createManagedBean(new Fr(i,{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addManagedListener(this.eventService,f.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.onPivotModeChanged.bind(this)),this.addManagedListener(this.eventService,f.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.onPivotModeChanged(),this.setupHeaderHeight();let o=this.onHeaderContextMenu.bind(this);this.addManagedListener(this.eGui,"contextmenu",o),this.mockContextMenuForIPad(o),this.ctrlsService.register("gridHeaderCtrl",this)}setupHeaderHeight(){let t=this.setHeaderHeight.bind(this);t(),this.addManagedPropertyListener("headerHeight",t),this.addManagedPropertyListener("pivotHeaderHeight",t),this.addManagedPropertyListener("groupHeaderHeight",t),this.addManagedPropertyListener("pivotGroupHeaderHeight",t),this.addManagedPropertyListener("floatingFiltersHeight",t),this.addManagedListener(this.eventService,f.EVENT_DISPLAYED_COLUMNS_CHANGED,t),this.addManagedListener(this.eventService,f.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,t),this.addManagedListener(this.eventService,f.EVENT_GRID_STYLES_CHANGED,t),this.addManagedListener(this.eventService,f.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,t)}getHeaderHeight(){return this.headerHeight}setHeaderHeight(){let{columnModel:t}=this,e=0,i=t.getHeaderRowCount(),o;this.filterManager.hasFloatingFilters()&&(i++,e=1);let n=this.columnModel.getColumnGroupHeaderRowHeight(),s=this.columnModel.getColumnHeaderRowHeight(),a=1+e,l=i-a;if(o=e*t.getFloatingFiltersHeight(),o+=l*n,o+=s,this.headerHeight===o)return;this.headerHeight=o;let d=`${o+1}px`;this.comp.setHeightAndMinHeight(d),this.eventService.dispatchEvent({type:f.EVENT_HEADER_HEIGHT_CHANGED})}onPivotModeChanged(){let t=this.columnModel.isPivotMode();this.comp.addOrRemoveCssClass("ag-pivot-on",t),this.comp.addOrRemoveCssClass("ag-pivot-off",!t)}onDisplayedColumnsChanged(){let e=this.columnModel.getAllDisplayedColumns().some(i=>i.isSpanHeaderHeight());this.comp.addOrRemoveCssClass("ag-header-allow-overflow",e)}onTabKeyDown(t){let e=this.gos.get("enableRtl"),i=t.shiftKey!==e?2:3;(this.headerNavigationService.navigateHorizontally(i,!0,t)||this.focusService.focusNextGridCoreContainer(t.shiftKey))&&t.preventDefault()}handleKeyDown(t){let e=null;switch(t.key){case S.LEFT:e=2;case S.RIGHT:T(e)||(e=3),this.headerNavigationService.navigateHorizontally(e,!1,t);break;case S.UP:e=0;case S.DOWN:T(e)||(e=1),this.headerNavigationService.navigateVertically(e,null,t)&&t.preventDefault();break;default:return}}onFocusOut(t){let{relatedTarget:e}=t;!e&&this.eGui.contains(this.gos.getActiveDomElement())||this.eGui.contains(e)||this.focusService.clearFocusedHeader()}onHeaderContextMenu(t,e,i){if(!t&&!i||!this.menuService.isHeaderContextMenuEnabled())return;let{target:o}=t??e;(o===this.eGui||o===this.ctrlsService.getHeaderRowContainerCtrl().getViewport())&&this.menuService.showHeaderContextMenu(void 0,t,i)}mockContextMenuForIPad(t){if(!Vo())return;let e=new St(this.eGui),i=o=>{t(void 0,o.touchStart,o.touchEvent)};this.addManagedListener(e,St.EVENT_LONG_TAP,i),this.addDestroyFunc(()=>e.destroy())}};g([v("headerNavigationService")],Kn.prototype,"headerNavigationService",2);g([v("focusService")],Kn.prototype,"focusService",2);g([v("columnModel")],Kn.prototype,"columnModel",2);g([v("ctrlsService")],Kn.prototype,"ctrlsService",2);g([v("filterManager")],Kn.prototype,"filterManager",2);g([v("menuService")],Kn.prototype,"menuService",2);var Sv=class cE extends J{constructor(){super(cE.TEMPLATE)}postConstruct(){let e={addOrRemoveCssClass:(r,n)=>this.addOrRemoveCssClass(r,n),setHeightAndMinHeight:r=>{this.getGui().style.height=r,this.getGui().style.minHeight=r}};this.createManagedBean(new Kn).setComp(e,this.getGui(),this.getFocusableElement());let o=r=>{this.createManagedBean(r),this.appendChild(r)};o(new Kf("left")),o(new Kf(null)),o(new Kf("right"))}};Sv.TEMPLATE='<div class="ag-header" role="presentation"/>';g([I],Sv.prototype,"postConstruct",1);var xk=Sv,vd=class extends A{addResizeBar(t){let e={dragStartPixels:t.dragStartPixels||0,eElement:t.eResizeBar,onDragStart:this.onDragStart.bind(this,t),onDragStop:this.onDragStop.bind(this,t),onDragging:this.onDragging.bind(this,t),includeTouch:!0,stopPropagationForTouch:!0};return this.dragService.addDragSource(e),()=>this.dragService.removeDragSource(e)}onDragStart(t,e){this.dragStartX=e.clientX,this.setResizeIcons();let i=e instanceof MouseEvent&&e.shiftKey===!0;t.onResizeStart(i)}setResizeIcons(){let t=this.ctrlsService.get("gridCtrl");t.setResizeCursor(!0),t.disableUserSelect(!0)}onDragStop(t,e){t.onResizeEnd(this.resizeAmount),this.resetIcons()}resetIcons(){let t=this.ctrlsService.get("gridCtrl");t.setResizeCursor(!1),t.disableUserSelect(!1)}onDragging(t,e){this.resizeAmount=e.clientX-this.dragStartX,t.onResizing(this.resizeAmount)}};g([v("dragService")],vd.prototype,"dragService",2);g([v("ctrlsService")],vd.prototype,"ctrlsService",2);vd=g([V("horizontalResizeService")],vd);var Mr=class extends A{hideActiveMenu(){this.hidePopup&&this.hidePopup()}showMenuAfterMouseEvent(t,e,i){this.showPopup(t,o=>{this.popupService.positionPopupUnderMouseEvent({column:t,type:i,mouseEvent:e,ePopup:o})},i,e.target,this.menuService.isLegacyMenuEnabled())}showMenuAfterButtonClick(t,e,i){let o=-1,r="left",n=this.menuService.isLegacyMenuEnabled();!n&&this.gos.get("enableRtl")&&(o=1,r="right");let s=n?void 0:4*o,a=n?void 0:4;this.showPopup(t,l=>{this.popupService.positionPopupByComponent({type:i,eventSource:e,ePopup:l,nudgeX:s,nudgeY:a,alignSide:r,keepWithinBounds:!0,position:"under",column:t})},i,e,n)}showPopup(t,e,i,o,r){let n=t?this.createBean(new Oh(t,"COLUMN_MENU")):void 0;if(this.activeMenu=n,!n?.hasFilter()||!t)throw new Error("AG Grid - unable to show popup filter, filter instantiation failed");let s=document.createElement("div");Xe(s,"presentation"),s.classList.add("ag-menu"),r||s.classList.add("ag-filter-menu"),this.tabListener=this.addManagedListener(s,"keydown",m=>this.trapFocusWithin(m,s)),s.appendChild(n?.getGui());let a,l=()=>n?.afterGuiDetached(),d=this.menuService.isColumnMenuAnchoringEnabled()?o??this.ctrlsService.getGridBodyCtrl().getGui():void 0,c=m=>{t.setMenuVisible(!1,"contextMenu");let C=m instanceof KeyboardEvent;if(this.tabListener&&(this.tabListener=this.tabListener()),C&&o&&ni(o)){let w=this.focusService.findTabbableParent(o);w&&w.focus()}l(),this.destroyBean(this.activeMenu),this.dispatchVisibleChangedEvent(!1,i,t)},u=this.localeService.getLocaleTextFunc(),h=r&&i!=="columnFilter"?u("ariaLabelColumnMenu","Column Menu"):u("ariaLabelColumnFilter","Column Filter"),p=this.popupService.addPopup({modal:!0,eChild:s,closeOnEsc:!0,closedCallback:c,positionCallback:()=>e(s),anchorToElement:d,ariaLabel:h});p&&(this.hidePopup=a=p.hideFunc),n.afterInit().then(()=>{e(s),n.afterGuiAttached({container:i,hidePopup:a})}),t.setMenuVisible(!0,"contextMenu"),this.dispatchVisibleChangedEvent(!0,i,t)}trapFocusWithin(t,e){t.key!==S.TAB||t.defaultPrevented||this.focusService.findNextFocusableElement(e,!1,t.shiftKey)||(t.preventDefault(),this.focusService.focusInto(e,t.shiftKey))}dispatchVisibleChangedEvent(t,e,i){let o={type:f.EVENT_COLUMN_MENU_VISIBLE_CHANGED,visible:t,switchingTab:!1,key:e,column:i??null};this.eventService.dispatchEvent(o)}isMenuEnabled(t){var e;return t.isFilterAllowed()&&((e=t.getColDef().menuTabs)!=null?e:["filterMenuTab"]).includes("filterMenuTab")}showMenuAfterContextMenuEvent(){}destroy(){this.destroyBean(this.activeMenu),super.destroy()}};g([v("filterManager")],Mr.prototype,"filterManager",2);g([v("popupService")],Mr.prototype,"popupService",2);g([v("focusService")],Mr.prototype,"focusService",2);g([v("ctrlsService")],Mr.prototype,"ctrlsService",2);g([v("menuService")],Mr.prototype,"menuService",2);Mr=g([V("filterMenuFactory")],Mr);var xv=class extends A{constructor(t){super(),this.skipTabGuardFocus=!1,this.forcingFocusOut=!1;let{comp:e,eTopGuard:i,eBottomGuard:o,focusTrapActive:r,forceFocusOutWhenTabGuardsAreEmpty:n,focusInnerElement:s,onFocusIn:a,onFocusOut:l,shouldStopEventPropagation:d,onTabKeyDown:c,handleKeyDown:u,eFocusableElement:h}=t;this.comp=e,this.eTopGuard=i,this.eBottomGuard=o,this.providedFocusInnerElement=s,this.eFocusableElement=h,this.focusTrapActive=!!r,this.forceFocusOutWhenTabGuardsAreEmpty=!!n,this.providedFocusIn=a,this.providedFocusOut=l,this.providedShouldStopEventPropagation=d,this.providedOnTabKeyDown=c,this.providedHandleKeyDown=u}postConstruct(){this.createManagedBean(new Fr(this.eFocusableElement,{shouldStopEventPropagation:()=>this.shouldStopEventPropagation(),onTabKeyDown:t=>this.onTabKeyDown(t),handleKeyDown:t=>this.handleKeyDown(t),onFocusIn:t=>this.onFocusIn(t),onFocusOut:t=>this.onFocusOut(t)})),this.activateTabGuards(),[this.eTopGuard,this.eBottomGuard].forEach(t=>this.addManagedListener(t,"focus",this.onFocus.bind(this)))}handleKeyDown(t){this.providedHandleKeyDown&&this.providedHandleKeyDown(t)}tabGuardsAreActive(){return!!this.eTopGuard&&this.eTopGuard.hasAttribute("tabIndex")}shouldStopEventPropagation(){return this.providedShouldStopEventPropagation?this.providedShouldStopEventPropagation():!1}activateTabGuards(){if(this.forcingFocusOut)return;let t=this.gos.get("tabIndex");this.comp.setTabIndex(t.toString())}deactivateTabGuards(){this.comp.setTabIndex()}onFocus(t){if(this.skipTabGuardFocus){this.skipTabGuardFocus=!1;return}if(this.forceFocusOutWhenTabGuardsAreEmpty&&this.focusService.findFocusableElements(this.eFocusableElement,".ag-tab-guard").length===0){this.findNextElementOutsideAndFocus(t.target===this.eBottomGuard);return}let e=t.target===this.eBottomGuard;this.providedFocusInnerElement?this.providedFocusInnerElement(e):this.focusInnerElement(e)}findNextElementOutsideAndFocus(t){let e=this.gos.getDocument(),i=this.focusService.findFocusableElements(e.body,null,!0),o=i.indexOf(t?this.eTopGuard:this.eBottomGuard);if(o===-1)return;let r,n;t?(r=0,n=o):(r=o+1,n=i.length);let s=i.slice(r,n),a=this.gos.get("tabIndex");s.sort((l,d)=>{let c=parseInt(l.getAttribute("tabindex")||"0"),u=parseInt(d.getAttribute("tabindex")||"0");return u===a?1:c===a?-1:c===0?1:u===0?-1:c-u}),s[t?s.length-1:0].focus()}onFocusIn(t){this.focusTrapActive||(this.providedFocusIn&&this.providedFocusIn(t),this.deactivateTabGuards())}onFocusOut(t){this.focusTrapActive||(this.providedFocusOut&&this.providedFocusOut(t),this.eFocusableElement.contains(t.relatedTarget)||this.activateTabGuards())}onTabKeyDown(t){if(this.providedOnTabKeyDown){this.providedOnTabKeyDown(t);return}if(this.focusTrapActive||t.defaultPrevented)return;let e=this.tabGuardsAreActive();e&&this.deactivateTabGuards();let i=this.getNextFocusableElement(t.shiftKey);e&&setTimeout(()=>this.activateTabGuards(),0),i&&(i.focus(),t.preventDefault())}focusInnerElement(t=!1){let e=this.focusService.findFocusableElements(this.eFocusableElement);this.tabGuardsAreActive()&&(e.splice(0,1),e.splice(e.length-1,1)),e.length&&e[t?e.length-1:0].focus({preventScroll:!0})}getNextFocusableElement(t){return this.focusService.findNextFocusableElement(this.eFocusableElement,!1,t)}forceFocusOutOfContainer(t=!1){if(this.forcingFocusOut)return;let e=t?this.eTopGuard:this.eBottomGuard;this.activateTabGuards(),this.skipTabGuardFocus=!0,this.forcingFocusOut=!0,e.focus(),window.setTimeout(()=>{this.forcingFocusOut=!1,this.activateTabGuards()})}isTabGuard(t){return t===this.eTopGuard||t===this.eBottomGuard}};g([v("focusService")],xv.prototype,"focusService",2);g([I],xv.prototype,"postConstruct",1);var jd=class extends J{initialiseTabGuard(t){this.eTopGuard=this.createTabGuard("top"),this.eBottomGuard=this.createTabGuard("bottom"),this.eFocusableElement=this.getFocusableElement();let e=[this.eTopGuard,this.eBottomGuard],i={setTabIndex:o=>{e.forEach(r=>o!=null?r.setAttribute("tabindex",o):r.removeAttribute("tabindex"))}};this.addTabGuards(this.eTopGuard,this.eBottomGuard),this.tabGuardCtrl=this.createManagedBean(new xv({comp:i,focusTrapActive:!!t.focusTrapActive,eTopGuard:this.eTopGuard,eBottomGuard:this.eBottomGuard,eFocusableElement:this.eFocusableElement,onFocusIn:t.onFocusIn,onFocusOut:t.onFocusOut,focusInnerElement:t.focusInnerElement,handleKeyDown:t.handleKeyDown,onTabKeyDown:t.onTabKeyDown,shouldStopEventPropagation:t.shouldStopEventPropagation,forceFocusOutWhenTabGuardsAreEmpty:t.forceFocusOutWhenTabGuardsAreEmpty}))}createTabGuard(t){let e=document.createElement("div"),i=t==="top"?"ag-tab-guard-top":"ag-tab-guard-bottom";return e.classList.add("ag-tab-guard",i),Xe(e,"presentation"),e}addTabGuards(t,e){this.eFocusableElement.insertAdjacentElement("afterbegin",t),this.eFocusableElement.insertAdjacentElement("beforeend",e)}removeAllChildrenExceptTabGuards(){let t=[this.eTopGuard,this.eBottomGuard];Je(this.getFocusableElement()),this.addTabGuards(...t)}forceFocusOutOfContainer(t=!1){this.tabGuardCtrl.forceFocusOutOfContainer(t)}appendChild(t,e){Ld(t)||(t=t.getGui());let{eBottomGuard:i}=this;i?i.insertAdjacentElement("beforebegin",t):super.appendChild(t,e)}},Bh=class uE extends jd{constructor(e){super(uE.getTemplate(e.cssClass)),this.items=[],this.tabbedItemScrollMap=new Map,this.params=e}postConstruct(){this.setupHeader(),this.params.items&&this.params.items.forEach(e=>this.addItem(e)),this.initialiseTabGuard({onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),focusInnerElement:this.focusInnerElement.bind(this),focusTrapActive:!0}),this.addDestroyFunc(()=>{var e,i,o;return(o=(i=(e=this.activeItem)==null?void 0:e.tabbedItem)==null?void 0:i.afterDetachedCallback)==null?void 0:o.call(i)})}static getTemplate(e){return`<div class="ag-tabs ${e}">
            <div ref="eHeader"></div>
            <div ref="eBody" role="presentation" class="ag-tabs-body ${e?`${e}-body`:""}"></div>
        </div>`}setupHeader(){let{enableCloseButton:e,cssClass:i}=this.params,o=(r,n)=>{r.classList.add(`ag-tabs-${n}`),i&&r.classList.add(`${i}-${n}`)};e?(this.setupCloseButton(o),this.eTabHeader=this.gos.getDocument().createElement("div"),o(this.eHeader,"header-wrapper"),Xe(this.eHeader,"presentation"),this.eHeader.appendChild(this.eTabHeader)):this.eTabHeader=this.eHeader,Xe(this.eTabHeader,"tablist"),o(this.eTabHeader,"header")}setupCloseButton(e){let i=this.gos.getDocument(),o=i.createElement("button");e(o,"close-button");let r=qe("close",this.gos,void 0,!0);yi(o,this.params.closeButtonAriaLabel),o.appendChild(r),this.addManagedListener(o,"click",()=>{var s,a;return(a=(s=this.params).onCloseClicked)==null?void 0:a.call(s)});let n=i.createElement("div");e(n,"close-button-wrapper"),Xe(n,"presentation"),n.appendChild(o),this.eHeader.appendChild(n),this.eCloseButton=o}handleKeyDown(e){switch(e.key){case S.RIGHT:case S.LEFT:if(!this.eTabHeader.contains(this.gos.getActiveDomElement()))return;let i=e.key===S.RIGHT,o=this.gos.get("enableRtl"),r=this.items.indexOf(this.activeItem),n=i!==o?Math.min(r+1,this.items.length-1):Math.max(r-1,0);if(r===n)return;e.preventDefault();let s=this.items[n];this.showItemWrapper(s),s.eHeaderButton.focus();break;case S.UP:case S.DOWN:e.stopPropagation();break}}onTabKeyDown(e){var i,o,r,n;if(e.defaultPrevented)return;let{focusService:s,eHeader:a,eBody:l,activeItem:d,params:c}=this,{suppressTrapFocus:u,enableCloseButton:h}=c,p=this.gos.getActiveDomElement(),m=e.target,C=e.shiftKey;if(a.contains(p)){e.preventDefault(),h&&C&&!((i=this.eCloseButton)!=null&&i.contains(p))?(o=this.eCloseButton)==null||o.focus():u&&C?(r=this.focusService.findFocusableElementBeforeTabGuard(this.gos.getDocument().body,m))==null||r.focus():this.focusBody(e.shiftKey);return}let w=null;if(s.isTargetUnderManagedComponent(l,m)&&(C&&(w=this.focusService.findFocusableElementBeforeTabGuard(l,m)),!w&&!u&&(w=d.eHeaderButton)),!w&&l.contains(p)&&(w=s.findNextFocusableElement(l,!1,C),!w)){e.preventDefault(),u&&!C?this.forceFocusOutOfContainer(C):h&&!C?(n=this.eCloseButton)==null||n.focus():this.focusHeader();return}w&&(e.preventDefault(),w.focus())}focusInnerElement(e){e?this.focusHeader():this.focusBody(!0)}focusHeader(e){this.activeItem.eHeaderButton.focus({preventScroll:e})}focusBody(e){this.focusService.focusInto(this.eBody,e)}setAfterAttachedParams(e){this.afterAttachedParams=e}showFirstItem(){this.items.length>0&&this.showItemWrapper(this.items[0])}addItem(e){let i=document.createElement("span");Xe(i,"tab"),i.setAttribute("tabindex","-1"),i.appendChild(e.title),i.classList.add("ag-tab"),this.eTabHeader.appendChild(i),yi(i,e.titleLabel);let o={tabbedItem:e,eHeaderButton:i};this.items.push(o),i.addEventListener("click",this.showItemWrapper.bind(this,o))}showItem(e){let i=this.items.find(o=>o.tabbedItem===e);i&&this.showItemWrapper(i)}showItemWrapper(e){var i,o,r,n,s,a;let{tabbedItem:l,eHeaderButton:d}=e;if((o=(i=this.params).onItemClicked)==null||o.call(i,{item:l}),this.activeItem===e){(n=(r=this.params).onActiveItemClicked)==null||n.call(r);return}this.lastScrollListener&&(this.lastScrollListener=this.lastScrollListener()),Je(this.eBody),l.bodyPromise.then(c=>{this.eBody.appendChild(c);let u=!this.focusService.isKeyboardMode();if(this.params.suppressFocusBodyOnOpen||this.focusService.focusInto(this.eBody,!1,u),l.afterAttachedCallback&&l.afterAttachedCallback(this.afterAttachedParams),this.params.keepScrollPosition){let h=l.getScrollableContainer&&l.getScrollableContainer()||c;this.lastScrollListener=this.addManagedListener(h,"scroll",()=>{this.tabbedItemScrollMap.set(l.name,h.scrollTop)});let p=this.tabbedItemScrollMap.get(l.name);p!==void 0&&setTimeout(()=>{h.scrollTop=p},0)}}),this.activeItem&&(this.activeItem.eHeaderButton.classList.remove("ag-tab-selected"),(a=(s=this.activeItem.tabbedItem).afterDetachedCallback)==null||a.call(s)),d.classList.add("ag-tab-selected"),this.activeItem=e}};g([v("focusService")],Bh.prototype,"focusService",2);g([k("eHeader")],Bh.prototype,"eHeader",2);g([k("eBody")],Bh.prototype,"eBody",2);g([I],Bh.prototype,"postConstruct",1);var _k=50,vm=class extends A{constructor(){super(...arguments),this.polyfillFunctions=[]}observeResize(t,e){let i=this.gos.getWindow(),o=()=>{let a=new i.ResizeObserver(e);return a.observe(t),()=>a.disconnect()},r=()=>{var a,l;let d=(a=t?.clientWidth)!=null?a:0,c=(l=t?.clientHeight)!=null?l:0,u=!0,h=()=>{var p,m;if(u){let C=(p=t?.clientWidth)!=null?p:0,w=(m=t?.clientHeight)!=null?m:0;(C!==d||w!==c)&&(d=C,c=w,e()),this.doNextPolyfillTurn(h)}};return h(),()=>u=!1},n=this.gos.get("suppressBrowserResizeObserver");return!!i.ResizeObserver&&!n?o():this.getFrameworkOverrides().wrapIncoming(()=>r(),"resize-observer")}doNextPolyfillTurn(t){this.polyfillFunctions.push(t),this.schedulePolyfill()}schedulePolyfill(){if(this.polyfillScheduled)return;let t=()=>{let e=this.polyfillFunctions;this.polyfillScheduled=!1,this.polyfillFunctions=[],e.forEach(i=>i())};this.polyfillScheduled=!0,window.setTimeout(t,_k)}};vm=g([V("resizeObserverService")],vm);var ra=class extends A{constructor(){super(...arguments),this.createTasksP1={list:[],sorted:!1},this.createTasksP2={list:[],sorted:!1},this.destroyTasks=[],this.ticking=!1,this.scrollGoingDown=!0,this.lastPage=0,this.lastScrollTop=0,this.taskCount=0,this.cancelledTasks=new Set}setScrollTop(t){let e=this.gos.get("pagination");if(this.scrollGoingDown=t>=this.lastScrollTop,e&&t===0){let i=this.paginationProxy.getCurrentPage();i!==this.lastPage&&(this.lastPage=i,this.scrollGoingDown=!0)}this.lastScrollTop=t}init(){this.useAnimationFrame=!this.gos.get("suppressAnimationFrame")}isOn(){return this.useAnimationFrame}verifyAnimationFrameOn(t){this.useAnimationFrame===!1&&console.warn(`AG Grid: AnimationFrameService.${t} called but animation frames are off`)}createTask(t,e,i){this.verifyAnimationFrameOn(i);let o={task:t,index:e,createOrder:++this.taskCount};this.addTaskToList(this[i],o),this.schedule()}cancelTask(t){this.cancelledTasks.add(t)}addTaskToList(t,e){t.list.push(e),t.sorted=!1}sortTaskList(t){if(t.sorted)return;let e=this.scrollGoingDown?1:-1;t.list.sort((i,o)=>i.index!==o.index?e*(o.index-i.index):o.createOrder-i.createOrder),t.sorted=!0}addDestroyTask(t){this.verifyAnimationFrameOn("createTasksP3"),this.destroyTasks.push(t),this.schedule()}executeFrame(t){this.verifyAnimationFrameOn("executeFrame");let e=this.createTasksP1,i=e.list,o=this.createTasksP2,r=o.list,n=this.destroyTasks,s=new Date().getTime(),a=new Date().getTime()-s,l=t<=0,d=this.ctrlsService.getGridBodyCtrl();for(;l||a<t;){if(!d.getScrollFeature().scrollGridIfNeeded()){let u;if(i.length)this.sortTaskList(e),u=i.pop().task;else if(r.length)this.sortTaskList(o),u=r.pop().task;else if(n.length)u=n.pop();else{this.cancelledTasks.clear();break}this.cancelledTasks.has(u)||u()}a=new Date().getTime()-s}i.length||r.length||n.length?this.requestFrame():this.stopTicking()}stopTicking(){this.ticking=!1}flushAllFrames(){this.useAnimationFrame&&this.executeFrame(-1)}schedule(){this.useAnimationFrame&&(this.ticking||(this.ticking=!0,this.requestFrame()))}requestFrame(){let t=this.executeFrame.bind(this,60);this.requestAnimationFrame(t)}requestAnimationFrame(t){let e=this.gos.getWindow();e.requestAnimationFrame?e.requestAnimationFrame(t):e.webkitRequestAnimationFrame?e.webkitRequestAnimationFrame(t):e.setTimeout(t,0)}isQueueEmpty(){return!this.ticking}debounce(t){let e=!1;return()=>{if(!this.isOn()){window.setTimeout(t,0);return}e||(e=!0,this.addDestroyTask(()=>{e=!1,t()}))}}};g([v("ctrlsService")],ra.prototype,"ctrlsService",2);g([v("paginationProxy")],ra.prototype,"paginationProxy",2);g([I],ra.prototype,"init",1);ra=g([V("animationFrameService")],ra);var Cd=class extends A{postConstruct(){this.isClientSideRowModel=this.rowModel.getType()==="clientSide"}expandRows(t){if(!this.isClientSideRowModel)return;let e=new Set(t);this.rowModel.forEachNode(i=>{i.id&&e.has(i.id)&&(i.expanded=!0)}),this.onGroupExpandedOrCollapsed()}getExpandedRows(){let t=[];return this.rowModel.forEachNode(({expanded:e,id:i})=>{e&&i&&t.push(i)}),t}expandAll(t){this.isClientSideRowModel&&this.rowModel.expandOrCollapseAll(t)}setRowNodeExpanded(t,e,i,o){t&&(i&&t.parent&&t.parent.level!==-1&&this.setRowNodeExpanded(t.parent,e,i,o),t.setExpanded(e,void 0,o))}onGroupExpandedOrCollapsed(){this.isClientSideRowModel&&this.rowModel.refreshModel({step:"map"})}};g([v("rowModel")],Cd.prototype,"rowModel",2);g([I],Cd.prototype,"postConstruct",1);Cd=g([V("expansionService")],Cd);var Fi=class extends A{postConstruct(){var t;this.activeMenuFactory=(t=this.enterpriseMenuFactory)!=null?t:this.filterMenuFactory}showColumnMenu(t){this.showColumnMenuCommon(this.activeMenuFactory,t,"columnMenu")}showFilterMenu(t){let e=this.enterpriseMenuFactory&&this.isLegacyMenuEnabled()?this.enterpriseMenuFactory:this.filterMenuFactory;this.showColumnMenuCommon(e,t,t.containerType,!0)}showHeaderContextMenu(t,e,i){this.activeMenuFactory.showMenuAfterContextMenuEvent(t,e,i)}getContextMenuPosition(t,e){let i=this.getRowCtrl(t),o=this.getCellGui(i,e);if(!o)return i?{x:0,y:i.getRowYPosition()}:{x:0,y:0};let r=o.getBoundingClientRect();return{x:r.x+r.width/2,y:r.y+r.height/2}}showContextMenu(t){var e,i,o;let{column:r,rowNode:n}=t,{anchorToElement:s,value:a}=t;n&&r&&a==null&&(a=n.getValueFromValueService(r)),s==null&&(s=this.getContextMenuAnchorElement(n,r)),(o=this.contextMenuFactory)==null||o.onContextMenu((e=t.mouseEvent)!=null?e:null,(i=t.touchEvent)!=null?i:null,n??null,r??null,a,s)}showColumnChooser(t){var e;(e=this.columnChooserFactory)==null||e.showColumnChooser(t)}hidePopupMenu(){var t;(t=this.contextMenuFactory)==null||t.hideActiveMenu(),this.activeMenuFactory.hideActiveMenu()}hideColumnChooser(){var t;(t=this.columnChooserFactory)==null||t.hideActiveColumnChooser()}isColumnMenuInHeaderEnabled(t){let{suppressMenu:e,suppressHeaderMenuButton:i}=t.getColDef();return!(i??e)&&this.activeMenuFactory.isMenuEnabled(t)&&(this.isLegacyMenuEnabled()||!!this.enterpriseMenuFactory)}isFilterMenuInHeaderEnabled(t){return!t.getColDef().suppressHeaderFilterButton&&this.filterManager.isFilterAllowed(t)}isHeaderContextMenuEnabled(t){return!t?.getColDef().suppressHeaderContextMenu&&this.getColumnMenuType()==="new"}isHeaderMenuButtonAlwaysShowEnabled(){return this.isSuppressMenuHide()}isHeaderMenuButtonEnabled(){let t=!this.isSuppressMenuHide();return!(Vo()&&t)}isHeaderFilterButtonEnabled(t){return this.isFilterMenuInHeaderEnabled(t)&&!this.isLegacyMenuEnabled()&&!this.isFloatingFilterButtonDisplayed(t)}isFilterMenuItemEnabled(t){return this.filterManager.isFilterAllowed(t)&&!this.isLegacyMenuEnabled()&&!this.isFilterMenuInHeaderEnabled(t)&&!this.isFloatingFilterButtonDisplayed(t)}isColumnMenuAnchoringEnabled(){return!this.isLegacyMenuEnabled()}areAdditionalColumnMenuItemsEnabled(){return this.getColumnMenuType()==="new"}isLegacyMenuEnabled(){return this.getColumnMenuType()==="legacy"}isFloatingFilterButtonEnabled(t){var e;let i=t.getColDef(),o=(e=i.floatingFilterComponentParams)==null?void 0:e.suppressFilterButton;return o!=null&&q("As of v31.1, 'colDef.floatingFilterComponentParams.suppressFilterButton' is deprecated. Use 'colDef.suppressFloatingFilterButton' instead."),i.suppressFloatingFilterButton==null?!o:!i.suppressFloatingFilterButton}getColumnMenuType(){var t;return(t=this.gos.get("columnMenu"))!=null?t:"legacy"}isFloatingFilterButtonDisplayed(t){return!!t.getColDef().floatingFilter&&this.isFloatingFilterButtonEnabled(t)}isSuppressMenuHide(){let t=this.gos.get("suppressMenuHide");return this.isLegacyMenuEnabled()||this.gos.exists("suppressMenuHide")?t:!0}showColumnMenuCommon(t,e,i,o){let{column:r,positionBy:n}=e;if(n==="button"){let{buttonElement:s}=e;t.showMenuAfterButtonClick(r,s,i,o)}else if(n==="mouse"){let{mouseEvent:s}=e;t.showMenuAfterMouseEvent(r,s,i,o)}else r&&(this.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(r,"auto"),this.animationFrameService.requestAnimationFrame(()=>{let s=this.ctrlsService.getHeaderRowContainerCtrl(r.getPinned()).getHeaderCtrlForColumn(r);t.showMenuAfterButtonClick(r,s.getAnchorElementForMenu(o),i,!0)}))}getRowCtrl(t){let{rowIndex:e,rowPinned:i}=t||{};if(e!=null)return this.rowRenderer.getRowByPosition({rowIndex:e,rowPinned:i})||void 0}getCellGui(t,e){if(!t||!e)return;let i=t.getCellCtrl(e);return i?.getGui()||void 0}getContextMenuAnchorElement(t,e){let i=this.ctrlsService.getGridBodyCtrl().getGridBodyElement(),o=this.getRowCtrl(t);if(!o)return i;let r=this.getCellGui(o,e);return r||(o.isFullWidth()?o.getFullWidthElement():i)}};g([v("filterMenuFactory")],Fi.prototype,"filterMenuFactory",2);g([v("ctrlsService")],Fi.prototype,"ctrlsService",2);g([v("animationFrameService")],Fi.prototype,"animationFrameService",2);g([v("filterManager")],Fi.prototype,"filterManager",2);g([v("rowRenderer")],Fi.prototype,"rowRenderer",2);g([Re("columnChooserFactory")],Fi.prototype,"columnChooserFactory",2);g([Re("contextMenuFactory")],Fi.prototype,"contextMenuFactory",2);g([Re("enterpriseMenuFactory")],Fi.prototype,"enterpriseMenuFactory",2);g([I],Fi.prototype,"postConstruct",1);Fi=g([V("menuService")],Fi);var Tn=class extends A{postConstruct(){this.ctrlsService.whenReady(t=>{this.centerRowContainerCtrl=t.center})}getPreferredWidthForColumn(t,e){let i=this.getHeaderCellForColumn(t);if(!i)return-1;let o=this.rowRenderer.getAllCellsForColumn(t);return e||o.push(i),this.addElementsToContainerAndGetWidth(o)}getPreferredWidthForColumnGroup(t){let e=this.getHeaderCellForColumn(t);return e?this.addElementsToContainerAndGetWidth([e]):-1}addElementsToContainerAndGetWidth(t){let e=document.createElement("form");e.style.position="fixed";let i=this.centerRowContainerCtrl.getContainerElement();t.forEach(n=>this.cloneItemIntoDummy(n,e)),i.appendChild(e);let o=e.offsetWidth;i.removeChild(e);let r=this.getAutoSizePadding();return o+r}getAutoSizePadding(){return this.gos.get("autoSizePadding")}getHeaderCellForColumn(t){let e=null;return this.ctrlsService.getHeaderRowContainerCtrls().forEach(i=>{let o=i.getHtmlElementForColumnHeader(t);o!=null&&(e=o)}),e}cloneItemIntoDummy(t,e){let i=t.cloneNode(!0);i.style.width="",i.style.position="static",i.style.left="";let o=document.createElement("div"),r=o.classList;["ag-header-cell","ag-header-group-cell"].some(a=>i.classList.contains(a))?(r.add("ag-header","ag-header-row"),o.style.position="static"):r.add("ag-row");let s=t.parentElement;for(;s;){if(["ag-header-row","ag-row"].some(l=>s.classList.contains(l))){for(let l=0;l<s.classList.length;l++){let d=s.classList[l];d!="ag-row-position-absolute"&&r.add(d)}break}s=s.parentElement}o.appendChild(i),e.appendChild(o)}};g([v("rowRenderer")],Tn.prototype,"rowRenderer",2);g([v("ctrlsService")],Tn.prototype,"ctrlsService",2);g([v("rowCssClassCalculator")],Tn.prototype,"rowCssClassCalculator",2);g([I],Tn.prototype,"postConstruct",1);Tn=g([V("autoWidthCalculator")],Tn);var qd=class extends A{constructor(t,e){super(),this.createRowCon=t,this.destroyRowCtrls=e,this.stickyTopRowCtrls=[],this.stickyBottomRowCtrls=[],this.topContainerHeight=0,this.bottomContainerHeight=0}postConstruct(){this.isClientSide=this.rowModel.getType()==="clientSide",this.ctrlsService.whenReady(t=>{this.gridBodyCtrl=t.gridBodyCtrl})}getStickyTopRowCtrls(){return this.stickyTopRowCtrls}getStickyBottomRowCtrls(){return this.stickyBottomRowCtrls}getLastPixelOfGroup(t){return this.isClientSide?this.getClientSideLastPixelOfGroup(t):this.getServerSideLastPixelOfGroup(t)}getFirstPixelOfGroup(t){return t.footer?t.sibling.rowTop+t.sibling.rowHeight-1:t.hasChildren()?t.rowTop-1:0}getServerSideLastPixelOfGroup(t){var e,i,o,r;if(this.isClientSide)throw new Error("This func should only be called in server side row model.");if(t.isExpandable()||t.footer){if(t.master)return t.detailNode.rowTop+t.detailNode.rowHeight;if(!t.sibling||Math.abs(t.sibling.rowIndex-t.rowIndex)===1){let s=(e=t.childStore)==null?void 0:e.getStoreBounds();return t.footer&&(s=(i=t.sibling.childStore)==null?void 0:i.getStoreBounds()),((o=s?.heightPx)!=null?o:0)+((r=s?.topPx)!=null?r:0)}return t.footer?t.rowTop+t.rowHeight:t.sibling.rowTop+t.sibling.rowHeight}return Number.MAX_SAFE_INTEGER}getClientSideLastPixelOfGroup(t){if(!this.isClientSide)throw new Error("This func should only be called in client side row model.");if(t.isExpandable()||t.footer){let e=t.footer&&t.rowIndex===0,i=!t.sibling||Math.abs(t.sibling.rowIndex-t.rowIndex)===1;if(e||i){let o=t.footer?t.sibling:t;for(;o.isExpandable()&&o.expanded;)if(o.master)o=o.detailNode;else if(o.childrenAfterSort){if(o.childrenAfterSort.length===0)break;o=be(o.childrenAfterSort)}return o.rowTop+o.rowHeight}return t.footer?t.rowTop+t.rowHeight:t.sibling.rowTop+t.sibling.rowHeight}return Number.MAX_SAFE_INTEGER}updateStickyRows(t){let e=t==="top",i=0;if(!this.canRowsBeSticky())return this.refreshNodesAndContainerHeight(t,new Set,i);let o=e?this.rowRenderer.getFirstVisibleVerticalPixel():this.rowRenderer.getLastVisibleVerticalPixel(),r=new Set,n=d=>{if(r.add(d),e){let c=this.getLastPixelOfGroup(d),u=o+i+d.rowHeight;c<u?d.stickyRowTop=i+(c-u):d.stickyRowTop=i}else{let c=this.getFirstPixelOfGroup(d),u=o-(i+d.rowHeight);c>u?d.stickyRowTop=i-(c-u):d.stickyRowTop=i}i=0,r.forEach(c=>{let u=c.stickyRowTop+c.rowHeight;i<u&&(i=u)})},s=this.areFooterRowsStickySuppressed(),a=this.gos.get("suppressGroupRowsSticky"),l=d=>d.displayed?d.footer?s===!0||s==="grand"&&d.level===-1||s==="group"&&d.level>-1?!1:!r.has(d):d.isExpandable()?a===!0?!1:!r.has(d)&&d.expanded:!1:!1;for(let d=0;d<100;d++){let c=o+i;e||(c=o-i);let u=this.rowModel.getRowIndexAtPixel(c),h=this.rowModel.getRow(u);if(h==null)break;let m=this.getStickyAncestors(h).find(w=>(e?w.rowIndex<u:w.rowIndex>u)&&l(w));if(m){n(m);continue}if((e?h.rowTop<c:h.rowTop+h.rowHeight>c)&&l(h)){n(h);continue}break}return e||r.forEach(d=>{d.stickyRowTop=i-(d.stickyRowTop+d.rowHeight)}),this.refreshNodesAndContainerHeight(t,r,i)}areFooterRowsStickySuppressed(){let t=this.gos.get("suppressStickyTotalRow");if(t===!0)return!0;let e=!!this.gos.get("groupIncludeFooter")||t==="group",i=!!this.gos.get("groupIncludeTotalFooter")||t==="grand";return e&&i?!0:i?"grand":e?"group":!1}canRowsBeSticky(){let t=this.gos.isGroupRowsSticky(),e=this.areFooterRowsStickySuppressed(),i=this.gos.get("suppressGroupRowsSticky");return t&&(!e||!i)}getStickyAncestors(t){let e=[],i=t.footer?t.sibling:t.parent;for(;i;)i.sibling&&e.push(i.sibling),e.push(i),i=i.parent;return e.reverse()}checkStickyRows(){let t=this.updateStickyRows("top"),e=this.updateStickyRows("bottom");return t||e}destroyStickyCtrls(){this.refreshNodesAndContainerHeight("top",new Set,0),this.refreshNodesAndContainerHeight("bottom",new Set,0)}refreshStickyNode(t){let e=new Set;if(this.stickyTopRowCtrls.some(i=>i.getRowNode()===t)){for(let i=0;i<this.stickyTopRowCtrls.length;i++){let o=this.stickyTopRowCtrls[i].getRowNode();o!==t&&e.add(o)}this.refreshNodesAndContainerHeight("top",e,this.topContainerHeight)&&this.checkStickyRows();return}for(let i=0;i<this.stickyBottomRowCtrls.length;i++){let o=this.stickyBottomRowCtrls[i].getRowNode();o!==t&&e.add(o)}this.refreshNodesAndContainerHeight("bottom",e,this.bottomContainerHeight)&&this.checkStickyRows()}refreshNodesAndContainerHeight(t,e,i){let o=t==="top",r=o?this.stickyTopRowCtrls:this.stickyBottomRowCtrls,n={},s=[];for(let u=0;u<r.length;u++){let h=r[u].getRowNode();if(!e.has(h)){n[h.id]=r[u],h.sticky=!1;continue}s.push(r[u])}let a=new Set;for(let u=0;u<s.length;u++)a.add(s[u].getRowNode());let l=[];e.forEach(u=>{a.has(u)||(u.sticky=!0,l.push(this.createRowCon(u,!1,!1)))});let d=!!l.length||s.length!==r.length;o?this.topContainerHeight!==i&&(this.topContainerHeight=i,this.gridBodyCtrl.setStickyTopHeight(i),d=!0):this.bottomContainerHeight!==i&&(this.bottomContainerHeight=i,this.gridBodyCtrl.setStickyBottomHeight(i),d=!0),this.destroyRowCtrls(n,!1);let c=[...s,...l];return c.sort((u,h)=>h.getRowNode().rowIndex-u.getRowNode().rowIndex),o||c.reverse(),c.forEach(u=>u.setRowTop(u.getRowNode().stickyRowTop)),d?(o?this.stickyTopRowCtrls=c:this.stickyBottomRowCtrls=c,!0):!1}};g([v("rowModel")],qd.prototype,"rowModel",2);g([v("rowRenderer")],qd.prototype,"rowRenderer",2);g([v("ctrlsService")],qd.prototype,"ctrlsService",2);g([I],qd.prototype,"postConstruct",1);var bi=class extends A{constructor(){super(...arguments),this.destroyFuncsForColumnListeners=[],this.rowCtrlsByRowIndex={},this.zombieRowCtrls={},this.allRowCtrls=[],this.topRowCtrls=[],this.bottomRowCtrls=[],this.refreshInProgress=!1,this.dataFirstRenderedFired=!1,this.setupRangeSelectionListeners=()=>{let t=()=>{this.getAllCellCtrls().forEach(n=>n.onRangeSelectionChanged())},e=()=>{this.getAllCellCtrls().forEach(n=>n.updateRangeBordersIfRangeCount())},i=()=>{this.eventService.addEventListener(f.EVENT_RANGE_SELECTION_CHANGED,t),this.eventService.addEventListener(f.EVENT_COLUMN_MOVED,e),this.eventService.addEventListener(f.EVENT_COLUMN_PINNED,e),this.eventService.addEventListener(f.EVENT_COLUMN_VISIBLE,e)},o=()=>{this.eventService.removeEventListener(f.EVENT_RANGE_SELECTION_CHANGED,t),this.eventService.removeEventListener(f.EVENT_COLUMN_MOVED,e),this.eventService.removeEventListener(f.EVENT_COLUMN_PINNED,e),this.eventService.removeEventListener(f.EVENT_COLUMN_VISIBLE,e)};this.addDestroyFunc(()=>o()),this.addManagedPropertyListener("enableRangeSelection",n=>{n.currentValue?i():o()}),this.gos.get("enableRangeSelection")&&i()}}postConstruct(){this.ctrlsService.whenReady(t=>{this.gridBodyCtrl=t.gridBodyCtrl,this.initialise()})}initialise(){if(this.addManagedListener(this.eventService,f.EVENT_PAGINATION_CHANGED,this.onPageLoaded.bind(this)),this.addManagedListener(this.eventService,f.EVENT_PINNED_ROW_DATA_CHANGED,this.onPinnedRowDataChanged.bind(this)),this.addManagedListener(this.eventService,f.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,f.EVENT_BODY_SCROLL,this.onBodyScroll.bind(this)),this.addManagedListener(this.eventService,f.EVENT_BODY_HEIGHT_CHANGED,this.redraw.bind(this)),this.addManagedPropertyListeners(["domLayout","embedFullWidthRows"],()=>this.onDomLayoutChanged()),this.addManagedPropertyListeners(["suppressMaxRenderedRowRestriction","rowBuffer"],()=>this.redraw()),this.addManagedPropertyListeners(["suppressCellFocus","getBusinessKeyForNode","fullWidthCellRenderer","fullWidthCellRendererParams","rowStyle","getRowStyle","rowClass","getRowClass","rowClassRules","suppressStickyTotalRow","groupRowRenderer","groupRowRendererParams","loadingCellRenderer","loadingCellRendererParams","detailCellRenderer","detailCellRendererParams","enableRangeSelection","enableCellTextSelection"],()=>this.redrawRows()),this.gos.isGroupRowsSticky()){let t=this.rowModel.getType();(t==="clientSide"||t==="serverSide")&&(this.stickyRowFeature=this.createManagedBean(new qd(this.createRowCon.bind(this),this.destroyRowCtrls.bind(this))))}this.registerCellEventListeners(),this.initialiseCache(),this.printLayout=this.gos.isDomLayout("print"),this.embedFullWidthRows=this.printLayout||this.gos.get("embedFullWidthRows"),this.redrawAfterModelUpdate()}initialiseCache(){if(this.gos.get("keepDetailRows")){let t=this.getKeepDetailRowsCount(),e=t??3;this.cachedRowCtrls=new Ek(e)}}getKeepDetailRowsCount(){return this.gos.get("keepDetailRowsCount")}getStickyTopRowCtrls(){return this.stickyRowFeature?this.stickyRowFeature.getStickyTopRowCtrls():[]}getStickyBottomRowCtrls(){return this.stickyRowFeature?this.stickyRowFeature.getStickyBottomRowCtrls():[]}updateAllRowCtrls(){let t=Dr(this.rowCtrlsByRowIndex),e=Dr(this.zombieRowCtrls),i=this.cachedRowCtrls?this.cachedRowCtrls.getEntries():[];e.length>0||i.length>0?this.allRowCtrls=[...t,...e,...i]:this.allRowCtrls=t}onCellFocusChanged(t){this.getAllCellCtrls().forEach(e=>e.onCellFocused(t)),this.getFullWidthRowCtrls().forEach(e=>e.onFullWidthRowFocused(t))}registerCellEventListeners(){this.addManagedListener(this.eventService,f.EVENT_CELL_FOCUSED,t=>{this.onCellFocusChanged(t)}),this.addManagedListener(this.eventService,f.EVENT_CELL_FOCUS_CLEARED,()=>{this.onCellFocusChanged()}),this.addManagedListener(this.eventService,f.EVENT_FLASH_CELLS,t=>{this.getAllCellCtrls().forEach(e=>e.onFlashCells(t))}),this.addManagedListener(this.eventService,f.EVENT_COLUMN_HOVER_CHANGED,()=>{this.getAllCellCtrls().forEach(t=>t.onColumnHover())}),this.addManagedListener(this.eventService,f.EVENT_DISPLAYED_COLUMNS_CHANGED,()=>{this.getAllCellCtrls().forEach(t=>t.onDisplayedColumnsChanged())}),this.addManagedListener(this.eventService,f.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,()=>{this.printLayout&&this.getAllCellCtrls().forEach(t=>t.onLeftChanged())}),this.setupRangeSelectionListeners(),this.refreshListenersToColumnsForCellComps(),this.addManagedListener(this.eventService,f.EVENT_GRID_COLUMNS_CHANGED,this.refreshListenersToColumnsForCellComps.bind(this)),this.addDestroyFunc(this.removeGridColumnListeners.bind(this))}removeGridColumnListeners(){this.destroyFuncsForColumnListeners.forEach(t=>t()),this.destroyFuncsForColumnListeners.length=0}refreshListenersToColumnsForCellComps(){this.removeGridColumnListeners(),this.columnModel.getAllGridColumns().forEach(e=>{let i=l=>{this.getAllCellCtrls().forEach(d=>{d.getColumn()===e&&l(d)})},o=()=>{i(l=>l.onLeftChanged())},r=()=>{i(l=>l.onWidthChanged())},n=()=>{i(l=>l.onFirstRightPinnedChanged())},s=()=>{i(l=>l.onLastLeftPinnedChanged())},a=()=>{i(l=>l.onColDefChanged())};e.addEventListener("leftChanged",o),e.addEventListener("widthChanged",r),e.addEventListener("firstRightPinnedChanged",n),e.addEventListener("lastLeftPinnedChanged",s),e.addEventListener("colDefChanged",a),this.destroyFuncsForColumnListeners.push(()=>{e.removeEventListener("leftChanged",o),e.removeEventListener("widthChanged",r),e.removeEventListener("firstRightPinnedChanged",n),e.removeEventListener("lastLeftPinnedChanged",s),e.removeEventListener("colDefChanged",a)})})}onDomLayoutChanged(){let t=this.gos.isDomLayout("print"),e=t||this.gos.get("embedFullWidthRows"),i=e!==this.embedFullWidthRows||this.printLayout!==t;this.printLayout=t,this.embedFullWidthRows=e,i&&this.redrawAfterModelUpdate({domLayoutChanged:!0})}datasourceChanged(){this.firstRenderedRow=0,this.lastRenderedRow=-1;let t=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(t)}onPageLoaded(t){let e={recycleRows:t.keepRenderedRows,animate:t.animate,newData:t.newData,newPage:t.newPage,onlyBody:!0};this.redrawAfterModelUpdate(e)}getAllCellsForColumn(t){let e=[];return this.getAllRowCtrls().forEach(i=>{let o=i.getCellElement(t);o&&e.push(o)}),e}refreshFloatingRowComps(){this.refreshFloatingRows(this.topRowCtrls,this.pinnedRowModel.getPinnedTopRowData()),this.refreshFloatingRows(this.bottomRowCtrls,this.pinnedRowModel.getPinnedBottomRowData())}getTopRowCtrls(){return this.topRowCtrls}getCentreRowCtrls(){return this.allRowCtrls}getBottomRowCtrls(){return this.bottomRowCtrls}refreshFloatingRows(t,e){t.forEach(i=>{i.destroyFirstPass(),i.destroySecondPass()}),t.length=0,e&&e.forEach(i=>{let o=new _n(i,this.beans,!1,!1,this.printLayout);t.push(o)})}onPinnedRowDataChanged(){let t={recycleRows:!0};this.redrawAfterModelUpdate(t)}redrawRow(t,e=!1){var i;if(t.sticky)this.stickyRowFeature.refreshStickyNode(t);else if((i=this.cachedRowCtrls)!=null&&i.has(t)){this.cachedRowCtrls.removeRow(t);return}else{let o=r=>{let n=r[t.rowIndex];n&&n.getRowNode()===t&&(n.destroyFirstPass(),n.destroySecondPass(),r[t.rowIndex]=this.createRowCon(t,!1,!1))};switch(t.rowPinned){case"top":o(this.topRowCtrls);break;case"bottom":o(this.bottomRowCtrls);break;default:o(this.rowCtrlsByRowIndex),this.updateAllRowCtrls()}}e||this.dispatchDisplayedRowsChanged(!1)}redrawRows(t){if(t!=null){t?.forEach(i=>this.redrawRow(i,!0)),this.dispatchDisplayedRowsChanged(!1);return}this.redrawAfterModelUpdate()}getCellToRestoreFocusToAfterRefresh(t){let e=t?.suppressKeepFocus?null:this.focusService.getFocusCellToUseAfterRefresh();if(e==null)return null;let i=this.gos.getActiveDomElement(),o=this.gos.getDomData(i,xn.DOM_DATA_KEY_CELL_CTRL),r=this.gos.getDomData(i,_n.DOM_DATA_KEY_ROW_CTRL);return o||r?e:null}redrawAfterModelUpdate(t={}){this.getLockOnRefresh();let e=this.getCellToRestoreFocusToAfterRefresh(t);this.updateContainerHeights(),this.scrollToTopIfNewData(t);let i=!t.domLayoutChanged&&!!t.recycleRows,o=t.animate&&this.gos.isAnimateRows(),r=i?this.getRowsToRecycle():null;i||this.removeAllRowComps(),this.workOutFirstAndLastRowsToRender(),this.stickyRowFeature&&this.stickyRowFeature.checkStickyRows(),this.recycleRows(r,o),this.gridBodyCtrl.updateRowCount(),t.onlyBody||this.refreshFloatingRowComps(),this.dispatchDisplayedRowsChanged(),e!=null&&this.restoreFocusedCell(e),this.releaseLockOnRefresh()}scrollToTopIfNewData(t){let e=t.newData||t.newPage,i=this.gos.get("suppressScrollOnNewData");e&&!i&&this.gridBodyCtrl.getScrollFeature().scrollToTop()}updateContainerHeights(){if(this.printLayout){this.rowContainerHeightService.setModelHeight(null);return}let t=this.paginationProxy.getCurrentPageHeight();t===0&&(t=1),this.rowContainerHeightService.setModelHeight(t)}getLockOnRefresh(){if(this.refreshInProgress)throw new Error("AG Grid: cannot get grid to draw rows when it is in the middle of drawing rows. Your code probably called a grid API method while the grid was in the render stage. To overcome this, put the API call into a timeout, e.g. instead of api.redrawRows(), call setTimeout(function() { api.redrawRows(); }, 0). To see what part of your code that caused the refresh check this stacktrace.");this.refreshInProgress=!0}releaseLockOnRefresh(){this.refreshInProgress=!1}isRefreshInProgress(){return this.refreshInProgress}restoreFocusedCell(t){t&&(this.focusService.setRestoreFocusedCell(t),this.onCellFocusChanged(this.beans.gos.addGridCommonParams({rowIndex:t.rowIndex,column:t.column,rowPinned:t.rowPinned,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0,type:"mock"})))}stopEditing(t=!1){this.getAllRowCtrls().forEach(e=>{e.stopEditing(t)})}getAllCellCtrls(){let t=[],e=this.getAllRowCtrls(),i=e.length;for(let o=0;o<i;o++){let r=e[o].getAllCellCtrls(),n=r.length;for(let s=0;s<n;s++)t.push(r[s])}return t}getAllRowCtrls(){let t=this.stickyRowFeature&&this.stickyRowFeature.getStickyTopRowCtrls()||[],e=this.stickyRowFeature&&this.stickyRowFeature.getStickyBottomRowCtrls()||[],i=[...this.topRowCtrls,...this.bottomRowCtrls,...t,...e];for(let o in this.rowCtrlsByRowIndex)i.push(this.rowCtrlsByRowIndex[o]);return i}addRenderedRowListener(t,e,i){let o=this.rowCtrlsByRowIndex[e];o&&o.addEventListener(t,i)}flashCells(t={}){this.getCellCtrls(t.rowNodes,t.columns).forEach(e=>e.flashCell(t))}refreshCells(t={}){let e={forceRefresh:t.force,newData:!1,suppressFlash:t.suppressFlash};this.getCellCtrls(t.rowNodes,t.columns).forEach(i=>i.refreshOrDestroyCell(e)),t.rowNodes&&(this.getRowCtrls(t.rowNodes).forEach(i=>{if(!i.isFullWidth())return;i.refreshFullWidth()||this.redrawRow(i.getRowNode(),!0)}),this.dispatchDisplayedRowsChanged(!1))}getCellRendererInstances(t){var e;let i=this.getCellCtrls(t.rowNodes,t.columns).map(n=>n.getCellRenderer()).filter(n=>n!=null);if((e=t.columns)!=null&&e.length)return i;let o=[],r=this.mapRowNodes(t.rowNodes);return this.getAllRowCtrls().forEach(n=>{if(r&&!this.isRowInMap(n.getRowNode(),r)||!n.isFullWidth())return;let s=n.getFullWidthCellRenderers();for(let a=0;a<s.length;a++){let l=s[a];l!=null&&o.push(l)}}),[...o,...i]}getCellEditorInstances(t){let e=[];return this.getCellCtrls(t.rowNodes,t.columns).forEach(i=>{let o=i.getCellEditor();o&&e.push(o)}),e}getEditingCells(){let t=[];return this.getAllCellCtrls().forEach(e=>{if(e.isEditing()){let i=e.getCellPosition();t.push(i)}}),t}mapRowNodes(t){if(!t)return;let e={top:{},bottom:{},normal:{}};return t.forEach(i=>{let o=i.id;switch(i.rowPinned){case"top":e.top[o]=i;break;case"bottom":e.bottom[o]=i;break;default:e.normal[o]=i;break}}),e}isRowInMap(t,e){let i=t.id;switch(t.rowPinned){case"top":return e.top[i]!=null;case"bottom":return e.bottom[i]!=null;default:return e.normal[i]!=null}}getRowCtrls(t){let e=this.mapRowNodes(t),i=this.getAllRowCtrls();return!t||!e?i:i.filter(o=>{let r=o.getRowNode();return this.isRowInMap(r,e)})}getCellCtrls(t,e){let i;T(e)&&(i={},e.forEach(r=>{let n=this.columnModel.getGridColumn(r);T(n)&&(i[n.getId()]=!0)}));let o=[];return this.getRowCtrls(t).forEach(r=>{r.getAllCellCtrls().forEach(n=>{let s=n.getColumn().getId();i&&!i[s]||o.push(n)})}),o}destroy(){this.removeAllRowComps(),super.destroy()}removeAllRowComps(){let t=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(t),this.stickyRowFeature&&this.stickyRowFeature.destroyStickyCtrls()}getRowsToRecycle(){let t=[];Nt(this.rowCtrlsByRowIndex,(i,o)=>{o.getRowNode().id==null&&t.push(i)}),this.removeRowCtrls(t);let e={};return Nt(this.rowCtrlsByRowIndex,(i,o)=>{let r=o.getRowNode();e[r.id]=o}),this.rowCtrlsByRowIndex={},e}removeRowCtrls(t,e=!1){t.forEach(i=>{let o=this.rowCtrlsByRowIndex[i];o&&(o.destroyFirstPass(e),o.destroySecondPass()),delete this.rowCtrlsByRowIndex[i]})}onBodyScroll(t){t.direction==="vertical"&&this.redraw({afterScroll:!0})}redraw(t={}){let{afterScroll:e}=t,i;this.stickyRowFeature&&Wm()&&(i=this.getCellToRestoreFocusToAfterRefresh()||void 0);let o=this.firstRenderedRow,r=this.lastRenderedRow;this.workOutFirstAndLastRowsToRender();let n=!1;this.stickyRowFeature&&(n=this.stickyRowFeature.checkStickyRows());let s=this.firstRenderedRow!==o||this.lastRenderedRow!==r;if(!(e&&!n&&!s)&&(this.getLockOnRefresh(),this.recycleRows(null,!1,e),this.releaseLockOnRefresh(),this.dispatchDisplayedRowsChanged(e&&!n),i!=null)){let a=this.getCellToRestoreFocusToAfterRefresh();i!=null&&a==null&&(this.animationFrameService.flushAllFrames(),this.restoreFocusedCell(i))}}removeRowCompsNotToDraw(t,e){let i={};t.forEach(n=>i[n]=!0);let r=Object.keys(this.rowCtrlsByRowIndex).filter(n=>!i[n]);this.removeRowCtrls(r,e)}calculateIndexesToDraw(t){let e=Wx(this.firstRenderedRow,this.lastRenderedRow),i=(r,n)=>{let s=n.getRowNode().rowIndex;s!=null&&(s<this.firstRenderedRow||s>this.lastRenderedRow)&&this.doNotUnVirtualiseRow(n)&&e.push(s)};Nt(this.rowCtrlsByRowIndex,i),Nt(t,i),e.sort((r,n)=>r-n);let o=[];for(let r=0;r<e.length;r++){let n=e[r],s=this.paginationProxy.getRow(n);s&&!s.sticky&&o.push(n)}return o}recycleRows(t,e=!1,i=!1){let o=this.calculateIndexesToDraw(t);(this.printLayout||i)&&(e=!1),this.removeRowCompsNotToDraw(o,!e);let r=[];o.forEach(n=>{let s=this.createOrUpdateRowCtrl(n,t,e,i);T(s)&&r.push(s)}),t&&(i&&!this.gos.get("suppressAnimationFrame")&&!this.printLayout?this.beans.animationFrameService.addDestroyTask(()=>{this.destroyRowCtrls(t,e),this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}):this.destroyRowCtrls(t,e)),this.updateAllRowCtrls()}dispatchDisplayedRowsChanged(t=!1){let e={type:f.EVENT_DISPLAYED_ROWS_CHANGED,afterScroll:t};this.eventService.dispatchEvent(e)}onDisplayedColumnsChanged(){let t=this.columnModel.isPinningLeft(),e=this.columnModel.isPinningRight();(this.pinningLeft!==t||e!==this.pinningRight)&&(this.pinningLeft=t,this.pinningRight=e,this.embedFullWidthRows&&this.redrawFullWidthEmbeddedRows())}redrawFullWidthEmbeddedRows(){let t=[];this.getFullWidthRowCtrls().forEach(e=>{let i=e.getRowNode().rowIndex;t.push(i.toString())}),this.refreshFloatingRowComps(),this.removeRowCtrls(t),this.redraw({afterScroll:!0})}getFullWidthRowCtrls(t){let e=this.mapRowNodes(t);return this.getAllRowCtrls().filter(i=>{if(!i.isFullWidth())return!1;let o=i.getRowNode();return!(e!=null&&!this.isRowInMap(o,e))})}createOrUpdateRowCtrl(t,e,i,o){let r,n=this.rowCtrlsByRowIndex[t];if(n||(r=this.paginationProxy.getRow(t),T(r)&&T(e)&&e[r.id]&&r.alreadyRendered&&(n=e[r.id],e[r.id]=null)),!n)if(r||(r=this.paginationProxy.getRow(t)),T(r))n=this.createRowCon(r,i,o);else return;return r&&(r.alreadyRendered=!0),this.rowCtrlsByRowIndex[t]=n,n}destroyRowCtrls(t,e){let i=[];Nt(t,(o,r)=>{if(r){if(this.cachedRowCtrls&&r.isCacheable()){this.cachedRowCtrls.addRow(r);return}r.destroyFirstPass(!e),e?(this.zombieRowCtrls[r.getInstanceId()]=r,i.push(()=>{r.destroySecondPass(),delete this.zombieRowCtrls[r.getInstanceId()]})):r.destroySecondPass()}}),e&&(i.push(()=>{this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}),QS(i))}getRowBuffer(){return this.gos.get("rowBuffer")}getRowBufferInPixels(){let t=this.getRowBuffer(),e=this.gos.getRowHeightAsNumber();return t*e}workOutFirstAndLastRowsToRender(){this.rowContainerHeightService.updateOffset();let t,e;if(!this.paginationProxy.isRowsToRender())t=0,e=-1;else if(this.printLayout)this.environment.refreshRowHeightVariable(),t=this.paginationProxy.getPageFirstRow(),e=this.paginationProxy.getPageLastRow();else{let a=this.getRowBufferInPixels(),l=this.ctrlsService.getGridBodyCtrl(),d=this.gos.get("suppressRowVirtualisation"),c=!1,u,h;do{let b=this.paginationProxy.getPixelOffset(),{pageFirstPixel:y,pageLastPixel:_}=this.paginationProxy.getCurrentPagePixelRange(),x=this.rowContainerHeightService.getDivStretchOffset(),E=l.getScrollFeature().getVScrollPosition(),D=E.top,R=E.bottom;d?(u=y+x,h=_+x):(u=Math.max(D+b-a,y)+x,h=Math.min(R+b+a,_)+x),this.firstVisibleVPixel=Math.max(D+b,y)+x,this.lastVisibleVPixel=Math.min(R+b,_)+x,c=this.ensureAllRowsInRangeHaveHeightsCalculated(u,h)}while(c);let p=this.paginationProxy.getRowIndexAtPixel(u),m=this.paginationProxy.getRowIndexAtPixel(h),C=this.paginationProxy.getPageFirstRow(),w=this.paginationProxy.getPageLastRow();p<C&&(p=C),m>w&&(m=w),t=p,e=m}let i=this.gos.isDomLayout("normal"),o=this.gos.get("suppressMaxRenderedRowRestriction"),r=Math.max(this.getRowBuffer(),500);i&&!o&&e-t>r&&(e=t+r);let n=t!==this.firstRenderedRow,s=e!==this.lastRenderedRow;if(n||s){this.firstRenderedRow=t,this.lastRenderedRow=e;let a={type:f.EVENT_VIEWPORT_CHANGED,firstRow:t,lastRow:e};this.eventService.dispatchEvent(a)}}dispatchFirstDataRenderedEvent(){if(this.dataFirstRenderedFired)return;this.dataFirstRenderedFired=!0;let t={type:f.EVENT_FIRST_DATA_RENDERED,firstRow:this.firstRenderedRow,lastRow:this.lastRenderedRow};window.requestAnimationFrame(()=>{this.beans.eventService.dispatchEvent(t)})}ensureAllRowsInRangeHaveHeightsCalculated(t,e){let i=this.paginationProxy.ensureRowHeightsValid(t,e,-1,-1);return i&&this.updateContainerHeights(),i}getFirstVisibleVerticalPixel(){return this.firstVisibleVPixel}getLastVisibleVerticalPixel(){return this.lastVisibleVPixel}getFirstVirtualRenderedRow(){return this.firstRenderedRow}getLastVirtualRenderedRow(){return this.lastRenderedRow}doNotUnVirtualiseRow(t){let o=t.getRowNode(),r=this.focusService.isRowNodeFocused(o),n=t.isEditing(),s=o.detail;return r||n||s?!!this.paginationProxy.isRowPresent(o):!1}createRowCon(t,e,i){let o=this.cachedRowCtrls?this.cachedRowCtrls.getRow(t):null;if(o)return o;let r=this.gos.get("suppressAnimationFrame"),n=i&&!r&&!this.printLayout;return new _n(t,this.beans,e,n,this.printLayout)}getRenderedNodes(){let t=this.rowCtrlsByRowIndex;return Object.values(t).map(e=>e.getRowNode())}getRowByPosition(t){let e,{rowIndex:i}=t;switch(t.rowPinned){case"top":e=this.topRowCtrls[i];break;case"bottom":e=this.bottomRowCtrls[i];break;default:e=this.rowCtrlsByRowIndex[i],e||(e=this.getStickyTopRowCtrls().find(o=>o.getRowNode().rowIndex===i)||null,e||(e=this.getStickyBottomRowCtrls().find(o=>o.getRowNode().rowIndex===i)||null));break}return e}isRangeInRenderedViewport(t,e){if(t==null||e==null)return!1;let o=t>this.lastRenderedRow;return!(e<this.firstRenderedRow)&&!o}};g([v("animationFrameService")],bi.prototype,"animationFrameService",2);g([v("paginationProxy")],bi.prototype,"paginationProxy",2);g([v("columnModel")],bi.prototype,"columnModel",2);g([v("pinnedRowModel")],bi.prototype,"pinnedRowModel",2);g([v("rowModel")],bi.prototype,"rowModel",2);g([v("focusService")],bi.prototype,"focusService",2);g([v("beans")],bi.prototype,"beans",2);g([v("rowContainerHeightService")],bi.prototype,"rowContainerHeightService",2);g([v("ctrlsService")],bi.prototype,"ctrlsService",2);g([I],bi.prototype,"postConstruct",1);bi=g([V("rowRenderer")],bi);var Ek=class{constructor(t){this.entriesMap={},this.entriesList=[],this.maxCount=t}addRow(t){if(this.entriesMap[t.getRowNode().id]=t,this.entriesList.push(t),t.setCached(!0),this.entriesList.length>this.maxCount){let e=this.entriesList[0];e.destroyFirstPass(),e.destroySecondPass(),this.removeFromCache(e)}}getRow(t){if(t==null||t.id==null)return null;let e=this.entriesMap[t.id];return e?(this.removeFromCache(e),e.setCached(!1),e.getRowNode()!=t?null:e):null}has(t){return this.entriesMap[t.id]!=null}removeRow(t){let e=t.id,i=this.entriesMap[e];delete this.entriesMap[e],Jt(this.entriesList,i)}removeFromCache(t){let e=t.getRowNode().id;delete this.entriesMap[e],Jt(this.entriesList,t)}getEntries(){return this.entriesList}},wd=class extends A{init(){this.setPinnedTopRowData(),this.setPinnedBottomRowData(),this.addManagedPropertyListener("pinnedTopRowData",()=>this.setPinnedTopRowData()),this.addManagedPropertyListener("pinnedBottomRowData",()=>this.setPinnedBottomRowData())}isEmpty(t){let e=t==="top"?this.pinnedTopRows:this.pinnedBottomRows;return Mi(e)}isRowsToRender(t){return!this.isEmpty(t)}getRowAtPixel(t,e){let i=e==="top"?this.pinnedTopRows:this.pinnedBottomRows;if(Mi(i))return 0;for(let o=0;o<i.length;o++){let r=i[o];if(r.rowTop+r.rowHeight-1>=t)return o}return i.length-1}setPinnedTopRowData(){let t=this.gos.get("pinnedTopRowData");this.pinnedTopRows=this.createNodesFromData(t,!0);let e={type:f.EVENT_PINNED_ROW_DATA_CHANGED};this.eventService.dispatchEvent(e)}setPinnedBottomRowData(){let t=this.gos.get("pinnedBottomRowData");this.pinnedBottomRows=this.createNodesFromData(t,!1);let e={type:f.EVENT_PINNED_ROW_DATA_CHANGED};this.eventService.dispatchEvent(e)}createNodesFromData(t,e){let i=[];if(t){let o=0;t.forEach((r,n)=>{let s=new de(this.beans);s.data=r;let a=e?de.ID_PREFIX_TOP_PINNED:de.ID_PREFIX_BOTTOM_PINNED;s.id=a+n,s.rowPinned=e?"top":"bottom",s.setRowTop(o),s.setRowHeight(this.gos.getRowHeightForNode(s).height),s.setRowIndex(n),o+=s.rowHeight,i.push(s)})}return i}getPinnedTopRowData(){return this.pinnedTopRows}getPinnedBottomRowData(){return this.pinnedBottomRows}getPinnedTopTotalHeight(){return this.getTotalHeight(this.pinnedTopRows)}getPinnedTopRowCount(){return this.pinnedTopRows?this.pinnedTopRows.length:0}getPinnedBottomRowCount(){return this.pinnedBottomRows?this.pinnedBottomRows.length:0}getPinnedTopRow(t){return this.pinnedTopRows[t]}getPinnedBottomRow(t){return this.pinnedBottomRows[t]}forEachPinnedTopRow(t){Mi(this.pinnedTopRows)||this.pinnedTopRows.forEach(t)}forEachPinnedBottomRow(t){Mi(this.pinnedBottomRows)||this.pinnedBottomRows.forEach(t)}getPinnedBottomTotalHeight(){return this.getTotalHeight(this.pinnedBottomRows)}getTotalHeight(t){if(!t||t.length===0)return 0;let e=be(t);return e.rowTop+e.rowHeight}};g([v("beans")],wd.prototype,"beans",2);g([I],wd.prototype,"init",1);wd=g([V("pinnedRowModel")],wd);var Wh=class{constructor(t,e){this.active=!0,this.nodeIdsToColumns={},this.mapToItems={},this.keepingColumns=t,this.pathRoot={rowNode:e,children:null},this.mapToItems[e.id]=this.pathRoot}setInactive(){this.active=!1}isActive(){return this.active}depthFirstSearchChangedPath(t,e){if(t.children)for(let i=0;i<t.children.length;i++)this.depthFirstSearchChangedPath(t.children[i],e);e(t.rowNode)}depthFirstSearchEverything(t,e,i){if(t.childrenAfterGroup)for(let o=0;o<t.childrenAfterGroup.length;o++){let r=t.childrenAfterGroup[o];r.childrenAfterGroup?this.depthFirstSearchEverything(t.childrenAfterGroup[o],e,i):i&&e(r)}e(t)}forEachChangedNodeDepthFirst(t,e=!1,i=!1){this.active&&!i?this.depthFirstSearchChangedPath(this.pathRoot,t):this.depthFirstSearchEverything(this.pathRoot.rowNode,t,e)}executeFromRootNode(t){t(this.pathRoot.rowNode)}createPathItems(t){let e=t,i=0;for(;!this.mapToItems[e.id];){let o={rowNode:e,children:null};this.mapToItems[e.id]=o,i++,e=e.parent}return i}populateColumnsMap(t,e){if(!this.keepingColumns||!e)return;let i=t;for(;i;)this.nodeIdsToColumns[i.id]||(this.nodeIdsToColumns[i.id]={}),e.forEach(o=>this.nodeIdsToColumns[i.id][o.getId()]=!0),i=i.parent}linkPathItems(t,e){let i=t;for(let o=0;o<e;o++){let r=this.mapToItems[i.id],n=this.mapToItems[i.parent.id];n.children||(n.children=[]),n.children.push(r),i=i.parent}}addParentNode(t,e){if(!t||t.isRowPinned())return;let i=this.createPathItems(t);this.linkPathItems(t,i),this.populateColumnsMap(t,e)}canSkip(t){return this.active&&!this.mapToItems[t.id]}getValueColumnsForNode(t,e){if(!this.keepingColumns)return e;let i=this.nodeIdsToColumns[t.id];return e.filter(r=>i[r.getId()])}getNotValueColumnsForNode(t,e){if(!this.keepingColumns)return null;let i=this.nodeIdsToColumns[t.id];return e.filter(r=>!i[r.getId()])}},ba=class Cn extends A{constructor(e){super(),this.state=Cn.STATE_WAITING_TO_LOAD,this.version=0,this.id=e}getId(){return this.id}load(){this.state=Cn.STATE_LOADING,this.loadFromDatasource()}getVersion(){return this.version}setStateWaitingToLoad(){this.version++,this.state=Cn.STATE_WAITING_TO_LOAD}getState(){return this.state}pageLoadFailed(e){this.isRequestMostRecentAndLive(e)&&(this.state=Cn.STATE_FAILED,this.processServerFail()),this.dispatchLoadCompleted(!1)}success(e,i){this.successCommon(e,i)}pageLoaded(e,i,o){this.successCommon(e,{rowData:i,rowCount:o})}isRequestMostRecentAndLive(e){let i=e===this.version,o=this.isAlive();return i&&o}successCommon(e,i){this.dispatchLoadCompleted(),this.isRequestMostRecentAndLive(e)&&(this.state=Cn.STATE_LOADED,this.processServerResult(i))}dispatchLoadCompleted(e=!0){let i={type:Cn.EVENT_LOAD_COMPLETE,success:e,block:this};this.dispatchEvent(i)}};ba.EVENT_LOAD_COMPLETE="loadComplete";ba.STATE_WAITING_TO_LOAD="needsLoading";ba.STATE_LOADING="loading";ba.STATE_LOADED="loaded";ba.STATE_FAILED="failed";var Cm=ba,mo=class extends A{constructor(){super(...arguments),this.activeBlockLoadsCount=0,this.blocks=[],this.active=!0}postConstruct(){this.maxConcurrentRequests=this.getMaxConcurrentDatasourceRequests();let t=this.gos.get("blockLoadDebounceMillis");t&&t>0&&(this.checkBlockToLoadDebounce=ce.debounce(this.performCheckBlocksToLoad.bind(this),t))}setBeans(t){this.logger=t.create("RowNodeBlockLoader")}getMaxConcurrentDatasourceRequests(){let t=this.gos.get("maxConcurrentDatasourceRequests");if(t==null)return 2;if(!(t<=0))return t}addBlock(t){this.blocks.push(t),t.addEventListener(Cm.EVENT_LOAD_COMPLETE,this.loadComplete.bind(this)),this.checkBlockToLoad()}removeBlock(t){ce.removeFromArray(this.blocks,t)}destroy(){super.destroy(),this.active=!1}loadComplete(){this.activeBlockLoadsCount--,this.checkBlockToLoad(),this.dispatchEvent({type:mo.BLOCK_LOADED_EVENT}),this.activeBlockLoadsCount==0&&this.dispatchEvent({type:mo.BLOCK_LOADER_FINISHED_EVENT})}checkBlockToLoad(){this.checkBlockToLoadDebounce?this.checkBlockToLoadDebounce():this.performCheckBlocksToLoad()}performCheckBlocksToLoad(){if(!this.active)return;if(this.printCacheStatus(),this.maxConcurrentRequests!=null&&this.activeBlockLoadsCount>=this.maxConcurrentRequests){this.logger.log("checkBlockToLoad: max loads exceeded");return}let t=this.getAvailableLoadingCount(),e=this.blocks.filter(i=>i.getState()===Cm.STATE_WAITING_TO_LOAD).slice(0,t);this.registerLoads(e.length),e.forEach(i=>i.load()),this.printCacheStatus()}getBlockState(){if(this.gos.isRowModelType("serverSide"))return this.rowModel.getBlockStates();let t={};return this.blocks.forEach(e=>{let{id:i,state:o}=e.getBlockStateJson();t[i]=o}),t}printCacheStatus(){this.logger.isLogging()&&this.logger.log(`printCacheStatus: activePageLoadsCount = ${this.activeBlockLoadsCount}, blocks = ${JSON.stringify(this.getBlockState())}`)}isLoading(){return this.activeBlockLoadsCount>0}registerLoads(t){this.activeBlockLoadsCount+=t}getAvailableLoadingCount(){return this.maxConcurrentRequests!==void 0?this.maxConcurrentRequests-this.activeBlockLoadsCount:void 0}};mo.BLOCK_LOADED_EVENT="blockLoaded";mo.BLOCK_LOADER_FINISHED_EVENT="blockLoaderFinished";g([v("rowModel")],mo.prototype,"rowModel",2);g([I],mo.prototype,"postConstruct",1);g([ji(0,Ti("loggerFactory"))],mo.prototype,"setBeans",1);mo=g([V("rowNodeBlockLoader")],mo);var yd=class extends A{constructor(){super(...arguments),this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=0,this.pixelOffset=0,this.masterRowCount=0}postConstruct(){this.active=this.gos.get("pagination"),this.pageSizeFromGridOptions=this.gos.get("paginationPageSize"),this.paginateChildRows=this.isPaginateChildRows(),this.addManagedListener(this.eventService,f.EVENT_MODEL_UPDATED,this.onModelUpdated.bind(this)),this.addManagedPropertyListener("pagination",this.onPaginationGridOptionChanged.bind(this)),this.addManagedPropertyListener("paginationPageSize",this.onPageSizeGridOptionChanged.bind(this)),this.onModelUpdated()}ensureRowHeightsValid(t,e,i,o){let r=this.rowModel.ensureRowHeightsValid(t,e,this.getPageFirstRow(),this.getPageLastRow());return r&&this.calculatePages(),r}isPaginateChildRows(){return this.gos.get("groupRemoveSingleChildren")||this.gos.get("groupRemoveLowestSingleChildren")?!0:this.gos.get("paginateChildRows")}onModelUpdated(t){this.calculatePages();let e={type:f.EVENT_PAGINATION_CHANGED,animate:t?t.animate:!1,newData:t?t.newData:!1,newPage:t?t.newPage:!1,newPageSize:t?t.newPageSize:!1,keepRenderedRows:t?t.keepRenderedRows:!1};this.eventService.dispatchEvent(e)}onPaginationGridOptionChanged(){this.active=this.gos.get("pagination"),this.calculatePages();let t={type:f.EVENT_PAGINATION_CHANGED,animate:!1,newData:!1,newPage:!1,newPageSize:!1,keepRenderedRows:!0};this.eventService.dispatchEvent(t)}onPageSizeGridOptionChanged(){this.setPageSize(this.gos.get("paginationPageSize"),"gridOptions")}goToPage(t){if(!this.active||this.currentPage===t||typeof this.currentPage!="number")return;this.currentPage=t,this.calculatePages();let e={type:f.EVENT_PAGINATION_CHANGED,animate:!1,newData:!1,newPage:!0,newPageSize:!1,keepRenderedRows:!1};this.eventService.dispatchEvent(e)}getPixelOffset(){return this.pixelOffset}getRow(t){return this.rowModel.getRow(t)}getRowNode(t){return this.rowModel.getRowNode(t)}getRowIndexAtPixel(t){return this.rowModel.getRowIndexAtPixel(t)}getCurrentPageHeight(){return X(this.topRowBounds)||X(this.bottomRowBounds)?0:Math.max(this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight-this.topRowBounds.rowTop,0)}getCurrentPagePixelRange(){let t=this.topRowBounds?this.topRowBounds.rowTop:0,e=this.bottomRowBounds?this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight:0;return{pageFirstPixel:t,pageLastPixel:e}}isRowPresent(t){return this.rowModel.isRowPresent(t)?t.rowIndex>=this.topDisplayedRowIndex&&t.rowIndex<=this.bottomDisplayedRowIndex:!1}isEmpty(){return this.rowModel.isEmpty()}isRowsToRender(){return this.rowModel.isRowsToRender()}forEachNode(t){return this.rowModel.forEachNode(t)}forEachNodeOnPage(t){let e=this.getPageFirstRow(),i=this.getPageLastRow();for(let o=e;o<=i;o++){let r=this.getRow(o);r&&t(r)}}getType(){return this.rowModel.getType()}getRowBounds(t){let e=this.rowModel.getRowBounds(t);return e.rowIndex=t,e}getPageFirstRow(){return this.topRowBounds?this.topRowBounds.rowIndex:-1}getPageLastRow(){return this.bottomRowBounds?this.bottomRowBounds.rowIndex:-1}getRowCount(){return this.rowModel.getRowCount()}getPageForIndex(t){return Math.floor(t/this.pageSize)}goToPageWithIndex(t){if(!this.active)return;let e=this.getPageForIndex(t);this.goToPage(e)}isRowInPage(t){return this.active?this.getPageForIndex(t.rowIndex)===this.currentPage:!0}isLastPageFound(){return this.rowModel.isLastRowIndexKnown()}getCurrentPage(){return this.currentPage}goToNextPage(){this.goToPage(this.currentPage+1)}goToPreviousPage(){this.goToPage(this.currentPage-1)}goToFirstPage(){this.goToPage(0)}goToLastPage(){let t=this.rowModel.getRowCount(),e=Math.floor(t/this.pageSize);this.goToPage(e)}getPageSize(){return this.pageSize}getTotalPages(){return this.totalPages}setPage(t){this.currentPage=t}get pageSize(){return T(this.pageSizeAutoCalculated)?this.pageSizeAutoCalculated:T(this.pageSizeFromPageSizeSelector)?this.pageSizeFromPageSizeSelector:T(this.pageSizeFromInitialState)?this.pageSizeFromInitialState:T(this.pageSizeFromGridOptions)?this.pageSizeFromGridOptions:this.defaultPageSize}unsetAutoCalculatedPageSize(){if(this.pageSizeAutoCalculated===void 0)return;let t=this.pageSizeAutoCalculated;if(this.pageSizeAutoCalculated=void 0,this.pageSize===t)return;this.calculatePages();let e={type:f.EVENT_PAGINATION_CHANGED,animate:!1,newData:!1,newPage:!1,newPageSize:!0,keepRenderedRows:!1};this.eventService.dispatchEvent(e)}setPageSize(t,e){let i=this.pageSize;switch(e){case"autoCalculated":this.pageSizeAutoCalculated=t;break;case"pageSizeSelector":this.pageSizeFromPageSizeSelector=t,this.currentPage!==0&&this.goToFirstPage();break;case"initialState":this.pageSizeFromInitialState=t;break;case"gridOptions":this.pageSizeFromGridOptions=t,this.pageSizeFromInitialState=void 0,this.pageSizeFromPageSizeSelector=void 0,this.currentPage!==0&&this.goToFirstPage();break}if(i!==this.pageSize){this.calculatePages();let o={type:f.EVENT_PAGINATION_CHANGED,animate:!1,newData:!1,newPage:!1,newPageSize:!0,keepRenderedRows:!0};this.eventService.dispatchEvent(o)}}calculatePages(){this.active?this.paginateChildRows?this.calculatePagesAllRows():this.calculatePagesMasterRowsOnly():this.calculatedPagesNotActive(),this.topRowBounds=this.rowModel.getRowBounds(this.topDisplayedRowIndex),this.topRowBounds&&(this.topRowBounds.rowIndex=this.topDisplayedRowIndex),this.bottomRowBounds=this.rowModel.getRowBounds(this.bottomDisplayedRowIndex),this.bottomRowBounds&&(this.bottomRowBounds.rowIndex=this.bottomDisplayedRowIndex),this.setPixelOffset(T(this.topRowBounds)?this.topRowBounds.rowTop:0)}setPixelOffset(t){this.pixelOffset!==t&&(this.pixelOffset=t,this.eventService.dispatchEvent({type:f.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED}))}setZeroRows(){this.masterRowCount=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=-1,this.currentPage=0,this.totalPages=0}adjustCurrentPageIfInvalid(){this.currentPage>=this.totalPages&&(this.currentPage=this.totalPages-1),(!isFinite(this.currentPage)||isNaN(this.currentPage)||this.currentPage<0)&&(this.currentPage=0)}calculatePagesMasterRowsOnly(){if(this.masterRowCount=this.rowModel.getTopLevelRowCount(),this.masterRowCount<=0){this.setZeroRows();return}let t=this.masterRowCount-1;this.totalPages=Math.floor(t/this.pageSize)+1,this.adjustCurrentPageIfInvalid();let e=this.pageSize*this.currentPage,i=this.pageSize*(this.currentPage+1)-1;if(i>t&&(i=t),this.topDisplayedRowIndex=this.rowModel.getTopLevelRowDisplayedIndex(e),i===t)this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1;else{let o=this.rowModel.getTopLevelRowDisplayedIndex(i+1);this.bottomDisplayedRowIndex=o-1}}getMasterRowCount(){return this.masterRowCount}calculatePagesAllRows(){if(this.masterRowCount=this.rowModel.getRowCount(),this.masterRowCount===0){this.setZeroRows();return}let t=this.masterRowCount-1;this.totalPages=Math.floor(t/this.pageSize)+1,this.adjustCurrentPageIfInvalid(),this.topDisplayedRowIndex=this.pageSize*this.currentPage,this.bottomDisplayedRowIndex=this.pageSize*(this.currentPage+1)-1,this.bottomDisplayedRowIndex>t&&(this.bottomDisplayedRowIndex=t)}calculatedPagesNotActive(){this.setPageSize(void 0,"autoCalculated"),this.totalPages=1,this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1}};g([v("rowModel")],yd.prototype,"rowModel",2);g([I],yd.prototype,"postConstruct",1);yd=g([V("paginationProxy")],yd);var rh=class extends A{processAllCellClasses(t,e,i,o){this.processClassRules(void 0,t.cellClassRules,e,i,o),this.processStaticCellClasses(t,e,i)}processClassRules(t,e,i,o,r){if(e==null&&t==null)return;let n={},s={},a=(l,d)=>{l.split(" ").forEach(c=>{c.trim()!=""&&d(c)})};if(e){let l=Object.keys(e);for(let d=0;d<l.length;d++){let c=l[d],u=e[c],h;typeof u=="string"?h=this.expressionService.evaluate(u,i):typeof u=="function"&&(h=u(i)),a(c,p=>{h?n[p]=!0:s[p]=!0})}}t&&r&&Object.keys(t).forEach(l=>a(l,d=>{n[d]||(s[d]=!0)})),r&&Object.keys(s).forEach(r),Object.keys(n).forEach(o)}getStaticCellClasses(t,e){let{cellClass:i}=t;if(!i)return[];let o;return typeof i=="function"?o=i(e):o=i,typeof o=="string"&&(o=[o]),o||[]}processStaticCellClasses(t,e,i){this.getStaticCellClasses(t,e).forEach(r=>{i(r)})}};g([v("expressionService")],rh.prototype,"expressionService",2);rh=g([V("stylingService")],rh);var hE=class extends Th{constructor(t){super(t,"ag-toggle-button")}setValue(t,e){return super.setValue(t,e),this.addOrRemoveCssClass("ag-selected",this.getValue()),this}},Dk=class extends Ki{constructor(t){super(t,"ag-text-area",null,"textarea")}setValue(t,e){let i=super.setValue(t,e);return this.eInput.value=t,i}setCols(t){return this.eInput.cols=t,this}setRows(t){return this.eInput.rows=t,this}},Rk=class extends Vn{constructor(t){super(t,"ag-date-field","date")}postConstruct(){super.postConstruct(),this.addManagedListener(this.eInput,"wheel",this.onWheel.bind(this));let t=fo();this.addManagedListener(this.eInput,"mousedown",()=>{this.isDisabled()||t||this.eInput.focus()}),this.eInput.step="any"}onWheel(t){this.gos.getActiveDomElement()===this.eInput&&t.preventDefault()}setMin(t){var e;let i=t instanceof Date?(e=Ai(t??null,!1))!=null?e:void 0:t;return this.min===i?this:(this.min=i,po(this.eInput,"min",i),this)}setMax(t){var e;let i=t instanceof Date?(e=Ai(t??null,!1))!=null?e:void 0:t;return this.max===i?this:(this.max=i,po(this.eInput,"max",i),this)}setStep(t){return this.step===t?this:(this.step=t,po(this.eInput,"step",t),this)}getDate(){var t;if(this.eInput.validity.valid)return(t=ti(this.getValue()))!=null?t:void 0}setDate(t,e){this.setValue(Ai(t??null,!1),e)}},Mk=class extends Ki{constructor(t){super(t,"ag-range-field","range")}postConstruct(){super.postConstruct();let{min:t,max:e,step:i}=this.config;t!=null&&this.setMinValue(t),e!=null&&this.setMaxValue(e),this.setStep(i||1)}addInputListeners(){this.addManagedListener(this.eInput,"input",t=>{let e=t.target.value;this.setValue(e)})}setMinValue(t){return this.min=t,this.eInput.setAttribute("min",t.toString()),this}setMaxValue(t){return this.max=t,this.eInput.setAttribute("max",t.toString()),this}setStep(t){return this.eInput.setAttribute("step",t.toString()),this}setValue(t,e){this.min!=null&&(t=Math.max(parseFloat(t),this.min).toString()),this.max!=null&&(t=Math.min(parseFloat(t),this.max).toString());let i=super.setValue(t,e);return this.eInput.value=t,i}},_v=class extends J{constructor(t,e){super('<div class="ag-rich-select-row" role="presentation"></div>'),this.params=t,this.wrapperEl=e}postConstruct(){this.addManagedListener(this.getGui(),"click",this.onClick.bind(this))}setState(t){let e="";this.params.valueFormatter&&(e=this.params.valueFormatter(t)),this.populateWithRenderer(t,e)||this.populateWithoutRenderer(t,e),this.value=t}highlightString(t){let{parsedValue:e}=this;if(this.params.cellRenderer||!T(e))return;let i=T(t);if(i){let o=e?.toLocaleLowerCase().indexOf(t.toLocaleLowerCase());if(o>=0){let r=o+t.length,n=rt(e.slice(0,o),!0),s=rt(e.slice(o,r),!0),a=rt(e.slice(r));this.renderValueWithoutRenderer(`${n}<span class="ag-rich-select-row-text-highlight">${s}</span>${a}`)}else i=!1}i||this.renderValueWithoutRenderer(e)}updateHighlighted(t){var e;let i=this.getGui(),o=`ag-rich-select-row-${this.getCompId()}`;if((e=i.parentElement)==null||e.setAttribute("id",o),t){let r=this.getParentComponent().getAriaElement();Lm(r,o),this.wrapperEl.setAttribute("data-active-option",o)}ea(i.parentElement,t),this.addOrRemoveCssClass("ag-rich-select-row-selected",t)}populateWithoutRenderer(t,e){let i=this.gos.getDocument(),o=this.getGui(),r=i.createElement("span");r.style.overflow="hidden",r.style.textOverflow="ellipsis";let n=rt(T(e)?e:t,!0);this.parsedValue=T(n)?n:null,o.appendChild(r),this.renderValueWithoutRenderer(n),this.setTooltip({newTooltipText:this.parsedValue,shouldDisplayTooltip:()=>r.scrollWidth>r.clientWidth})}renderValueWithoutRenderer(t){let e=this.getGui().querySelector("span");e&&(e.innerHTML=T(t)?t:"&nbsp;")}populateWithRenderer(t,e){let i,o;return this.params.cellRenderer&&(o=this.userComponentFactory.getCellRendererDetails(this.params,{value:t,valueFormatted:e,setTooltip:(r,n)=>{this.setTooltip({newTooltipText:r,shouldDisplayTooltip:n})}})),o&&(i=o.newAgStackInstance()),i&&tv(i,this.getGui()),i?(i.then(r=>{this.addDestroyFunc(()=>{this.getContext().destroyBean(r)})}),!0):!1}onClick(){let t=this.getParentComponent(),e={type:f.EVENT_FIELD_PICKER_VALUE_SELECTED,fromEnterKey:!1,value:this.value};t?.dispatchEvent(e)}};g([v("userComponentFactory")],_v.prototype,"userComponentFactory",2);g([I],_v.prototype,"postConstruct",1);var Kd=class gE extends jd{constructor(e){super(gE.getTemplate(e?.cssIdentifier||"default")),this.renderedRows=new Map,this.rowHeight=20,this.pageSize=-1,this.isScrolling=!1,this.isHeightFromTheme=!0;let{cssIdentifier:i="default",ariaRole:o="listbox",listName:r}=e||{};this.cssIdentifier=i,this.ariaRole=o,this.listName=r}postConstruct(){this.addScrollListener(),this.rowHeight=this.getItemHeight(),this.addResizeObserver(),this.initialiseTabGuard({onFocusIn:e=>this.onFocusIn(e),onFocusOut:e=>this.onFocusOut(e),focusInnerElement:e=>this.focusInnerElement(e),onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e)}),this.setAriaProperties(),this.addManagedListener(this.eventService,f.EVENT_GRID_STYLES_CHANGED,this.onGridStylesChanged.bind(this))}onGridStylesChanged(){this.rowHeight=this.getItemHeight(),this.refresh()}setAriaProperties(){let i=this.localeService.getLocaleTextFunc()("ariaDefaultListName",this.listName||"List"),o=this.eContainer;Xe(o,this.ariaRole),yi(o,i)}addResizeObserver(){let e=()=>this.animationFrameService.requestAnimationFrame(()=>this.drawVirtualRows()),i=this.resizeObserverService.observeResize(this.getGui(),e);this.addDestroyFunc(i)}focusInnerElement(e){this.focusRow(e?this.model.getRowCount()-1:0)}onFocusIn(e){let i=e.target;i.classList.contains("ag-virtual-list-item")&&(this.lastFocusedRowIndex=xx(i)-1)}onFocusOut(e){this.getFocusableElement().contains(e.relatedTarget)||(this.lastFocusedRowIndex=null)}handleKeyDown(e){switch(e.key){case S.UP:case S.DOWN:this.navigate(e.key===S.UP)&&e.preventDefault();break;case S.PAGE_HOME:case S.PAGE_END:case S.PAGE_UP:case S.PAGE_DOWN:this.navigateToPage(e.key)!==null&&e.preventDefault();break}}onTabKeyDown(e){this.navigate(e.shiftKey)?e.preventDefault():(Qi(e),this.forceFocusOutOfContainer(e.shiftKey))}navigate(e){if(this.lastFocusedRowIndex==null)return!1;let i=this.lastFocusedRowIndex+(e?-1:1);return i<0||i>=this.model.getRowCount()?!1:(this.focusRow(i),!0)}navigateToPage(e,i="focused"){let o=!1;i==="focused"&&(i=this.getLastFocusedRow(),o=!0);let r=this.model.getRowCount()-1,n=-1;return e===S.PAGE_HOME?n=0:e===S.PAGE_END?n=r:e===S.PAGE_DOWN?n=Math.min(i+this.pageSize,r):e===S.PAGE_UP&&(n=Math.max(i-this.pageSize,0)),n===-1?null:(o?this.focusRow(n):this.ensureIndexVisible(n),n)}getLastFocusedRow(){return this.lastFocusedRowIndex}focusRow(e){this.isScrolling||(this.isScrolling=!0,this.ensureIndexVisible(e),this.animationFrameService.requestAnimationFrame(()=>{if(this.isScrolling=!1,!this.isAlive())return;let i=this.renderedRows.get(e);i&&i.eDiv.focus()}))}getComponentAt(e){let i=this.renderedRows.get(e);return i&&i.rowComponent}forEachRenderedRow(e){this.renderedRows.forEach((i,o)=>e(i.rowComponent,o))}static getTemplate(e){return`<div class="ag-virtual-list-viewport ag-${e}-virtual-list-viewport" role="presentation">
                <div class="ag-virtual-list-container ag-${e}-virtual-list-container" ref="eContainer"></div>
            </div>`}getItemHeight(){return this.isHeightFromTheme?this.environment.getListItemHeight():this.rowHeight}ensureIndexVisible(e,i=!0){let o=this.model.getRowCount();if(typeof e!="number"||e<0||e>=o)return console.warn("AG Grid: invalid row index for ensureIndexVisible: "+e),!1;let r=e*this.rowHeight,n=r+this.rowHeight,s=this.getGui(),a=s.scrollTop,l=s.offsetHeight,d=a+l,c=i?0:this.rowHeight,u=a>r+c,h=d<n-c;if(u)return s.scrollTop=r,!0;if(h){let p=n-l;return s.scrollTop=p,!0}return!1}setComponentCreator(e){this.componentCreator=e}setComponentUpdater(e){this.componentUpdater=e}getRowHeight(){return this.rowHeight}getScrollTop(){return this.getGui().scrollTop}setRowHeight(e){this.isHeightFromTheme=!1,this.rowHeight=e,this.refresh()}refresh(e){if(this.model==null||!this.isAlive())return;let i=this.model.getRowCount();this.eContainer.style.height=`${i*this.rowHeight}px`,Tm(()=>this.eContainer.clientHeight>=i*this.rowHeight,()=>{this.isAlive()&&(this.canSoftRefresh(e)?this.drawVirtualRows(!0):(this.clearVirtualRows(),this.drawVirtualRows()))})}canSoftRefresh(e){return!!(e&&this.renderedRows.size&&typeof this.model.areRowsEqual=="function"&&this.componentUpdater)}clearVirtualRows(){this.renderedRows.forEach((e,i)=>this.removeRow(i))}drawVirtualRows(e){if(!this.isAlive()||!this.model)return;let i=this.getGui(),o=i.scrollTop,r=o+i.offsetHeight,n=Math.floor(o/this.rowHeight),s=Math.floor(r/this.rowHeight);this.pageSize=Math.floor((r-o)/this.rowHeight),this.ensureRowsRendered(n,s,e)}ensureRowsRendered(e,i,o){this.renderedRows.forEach((r,n)=>{(n<e||n>i)&&n!==this.lastFocusedRowIndex&&this.removeRow(n)}),o&&this.refreshRows();for(let r=e;r<=i;r++)this.renderedRows.has(r)||r<this.model.getRowCount()&&this.insertRow(r)}insertRow(e){let i=this.model.getRow(e),o=document.createElement("div");o.classList.add("ag-virtual-list-item",`ag-${this.cssIdentifier}-virtual-list-item`),Xe(o,this.ariaRole==="tree"?"treeitem":"option"),wh(o,this.model.getRowCount()),yh(o,e+1),o.setAttribute("tabindex","-1"),o.style.height=`${this.rowHeight}px`,o.style.top=`${this.rowHeight*e}px`;let r=this.componentCreator(i,o);r.addGuiEventListener("focusin",()=>this.lastFocusedRowIndex=e),o.appendChild(r.getGui()),this.renderedRows.has(e-1)?this.renderedRows.get(e-1).eDiv.insertAdjacentElement("afterend",o):this.renderedRows.has(e+1)?this.renderedRows.get(e+1).eDiv.insertAdjacentElement("beforebegin",o):this.eContainer.appendChild(o),this.renderedRows.set(e,{rowComponent:r,eDiv:o,value:i})}removeRow(e){let i=this.renderedRows.get(e);this.eContainer.removeChild(i.eDiv),this.destroyBean(i.rowComponent),this.renderedRows.delete(e)}refreshRows(){let e=this.model.getRowCount();this.renderedRows.forEach((i,o)=>{var r,n;if(o>=e)this.removeRow(o);else{let s=this.model.getRow(o);(n=(r=this.model).areRowsEqual)!=null&&n.call(r,i.value,s)?this.componentUpdater(s,i.rowComponent):this.removeRow(o)}})}addScrollListener(){this.addGuiEventListener("scroll",()=>this.drawVirtualRows(),{passive:!0})}setModel(e){this.model=e}getAriaElement(){return this.eContainer}destroy(){this.isAlive()&&(this.clearVirtualRows(),super.destroy())}};g([v("resizeObserverService")],Kd.prototype,"resizeObserverService",2);g([v("animationFrameService")],Kd.prototype,"animationFrameService",2);g([k("eContainer")],Kd.prototype,"eContainer",2);g([I],Kd.prototype,"postConstruct",1);var pE=Kd,Tk=`
    <div class="ag-picker-field" role="presentation">
        <div ref="eLabel"></div>
            <div ref="eWrapper" class="ag-wrapper ag-picker-field-wrapper ag-rich-select-value ag-picker-collapsed">
            <div ref="eDisplayField" class="ag-picker-field-display"></div>
            <ag-input-text-field ref="eInput" class="ag-rich-select-field-input"></ag-input-text-field>
            <div ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></div>
        </div>
    </div>`,Uh=class extends Gn{constructor(t){var e,i;super(He(j({pickerAriaLabelKey:"ariaLabelRichSelectField",pickerAriaLabelValue:"Rich Select Field",pickerType:"ag-list",className:"ag-rich-select",pickerIcon:"smallDown",ariaRole:"combobox",template:(e=t?.template)!=null?e:Tk,modalPicker:!1},t),{maxPickerHeight:(i=t?.maxPickerHeight)!=null?i:"calc(var(--ag-row-height) * 6.5)"})),this.searchString="",this.highlightedItem=-1,this.lastRowHovered=-1,this.searchStringCreator=null;let{cellRowHeight:o,value:r,valueList:n,searchStringCreator:s}=t||{};o!=null&&(this.cellRowHeight=o),r!==void 0&&(this.value=r),n!=null&&(this.values=n),s&&(this.searchStringCreator=s)}postConstruct(){super.postConstruct(),this.createLoadingElement(),this.createListComponent();let{allowTyping:t,placeholder:e}=this.config;t?(this.eInput.setAutoComplete(!1).setInputPlaceholder(e),this.eDisplayField.classList.add("ag-hidden")):this.eInput.setDisplayed(!1),this.eWrapper.tabIndex=this.gos.get("tabIndex");let{searchDebounceDelay:i=300}=this.config;this.clearSearchString=Ut(this.clearSearchString,i),this.renderSelectedValue(),t&&(this.eInput.onValueChange(o=>this.searchTextFromString(o)),this.addManagedListener(this.eWrapper,"focus",this.onWrapperFocus.bind(this))),this.addManagedListener(this.eWrapper,"focusout",this.onWrapperFocusOut.bind(this))}createLoadingElement(){let t=this.gos.getDocument(),e=this.localeService.getLocaleTextFunc(),i=t.createElement("div");i.classList.add("ag-loading-text"),i.innerText=e("loadingOoo","Loading..."),this.eLoading=i}createListComponent(){this.listComponent=this.createBean(new pE({cssIdentifier:"rich-select"})),this.listComponent.setComponentCreator(this.createRowComponent.bind(this));let t=(a,l)=>{};this.listComponent.setComponentUpdater(t),this.listComponent.setParentComponent(this),this.addManagedListener(this.listComponent,f.EVENT_FIELD_PICKER_VALUE_SELECTED,a=>{this.onListValueSelected(a.value,a.fromEnterKey)});let{cellRowHeight:e}=this;e&&this.listComponent.setRowHeight(e);let i=this.listComponent.getGui(),o=this.listComponent.getAriaElement();this.addManagedListener(i,"mousemove",this.onPickerMouseMove.bind(this)),this.addManagedListener(i,"mousedown",a=>a.preventDefault()),i.classList.add("ag-rich-select-list");let r=`ag-rich-select-list-${this.listComponent.getCompId()}`;o.setAttribute("id",r);let s=this.localeService.getLocaleTextFunc()(this.config.pickerAriaLabelKey,this.config.pickerAriaLabelValue);yi(o,s),Gm(this.eWrapper,o)}renderSelectedValue(){let{value:t,eDisplayField:e,config:i}=this,{allowTyping:o,initialInputValue:r}=this.config,n=this.config.valueFormatter?this.config.valueFormatter(t):t;if(o){this.eInput.setValue(r??n);return}let s;i.cellRenderer&&(s=this.userComponentFactory.getCellRendererDetails(this.config,{value:t,valueFormatted:n}));let a;if(s&&(a=s.newAgStackInstance()),a)Je(e),tv(a,e),a.then(l=>{this.addDestroyFunc(()=>this.getContext().destroyBean(l))});else{if(T(this.value))e.innerText=n,e.classList.remove("ag-display-as-placeholder");else{let{placeholder:l}=i;T(l)?(e.innerHTML=`${rt(l)}`,e.classList.add("ag-display-as-placeholder")):Je(e)}this.setTooltip({newTooltipText:n??null,shouldDisplayTooltip:()=>this.eDisplayField.scrollWidth>this.eDisplayField.clientWidth})}}getCurrentValueIndex(){let{currentList:t,value:e}=this;if(e==null||!t)return-1;for(let i=0;i<t.length;i++)if(t[i]===e)return i;return-1}highlightFilterMatch(){var t;(t=this.listComponent)==null||t.forEachRenderedRow((e,i)=>{e.highlightString(this.searchString)})}highlightSelectedValue(t){var e;t==null&&(t=this.getCurrentValueIndex()),this.highlightedItem=t,(e=this.listComponent)==null||e.forEachRenderedRow((i,o)=>{let r=t===-1?!1:this.highlightedItem===o;i.updateHighlighted(r)})}setRowHeight(t){t!==this.cellRowHeight&&(this.cellRowHeight=t),this.listComponent&&this.listComponent.setRowHeight(t)}createPickerComponent(){let{values:t}=this;return t&&this.setValueList({valueList:t}),this.listComponent}setSearchStringCreator(t){this.searchStringCreator=t}setValueList(t){let{valueList:e,refresh:i}=t;this.listComponent&&this.currentList!==e&&(this.currentList=e,this.listComponent.setModel({getRowCount:()=>e.length,getRow:o=>e[o],areRowsEqual:(o,r)=>o===r}),i&&(this.values?this.listComponent.refresh(!0):(this.values=e,this.isPickerDisplayed&&this.showCurrentValueInPicker())))}showPicker(){super.showPicker(),this.showCurrentValueInPicker(),this.displayOrHidePicker()}showCurrentValueInPicker(){var t,e;if(!this.listComponent)return;if(!this.currentList){this.isPickerDisplayed&&this.eLoading&&this.listComponent.appendChild(this.eLoading);return}(t=this.eLoading)!=null&&t.offsetParent&&((e=this.eLoading.parentElement)==null||e.removeChild(this.eLoading));let i=this.getCurrentValueIndex();i!==-1?(this.listComponent.refresh(),this.listComponent.ensureIndexVisible(i),this.listComponent.refresh(!0),this.highlightSelectedValue(i)):this.listComponent.refresh()}beforeHidePicker(){this.highlightedItem=-1,super.beforeHidePicker()}onWrapperFocus(){if(!this.eInput)return;let t=this.eInput.getFocusableElement();t.focus(),t.select()}onWrapperFocusOut(t){this.eWrapper.contains(t.relatedTarget)||this.hidePicker()}buildSearchStringFromKeyboardEvent(t){let{key:e}=t;if(e===S.BACKSPACE)this.searchString=this.searchString.slice(0,-1),e="";else if(!_h(t))return;t.preventDefault(),this.searchTextFromCharacter(e)}searchTextFromCharacter(t){this.searchString+=t,this.runSearch(),this.clearSearchString()}searchTextFromString(t){t==null&&(t=""),this.searchString=t,this.runSearch()}buildSearchStrings(t){let{valueFormatter:e=o=>o}=this.config,i;return typeof t[0]=="number"||typeof t[0]=="string"?i=t.map(o=>e(o)):typeof t[0]=="object"&&this.searchStringCreator&&(i=this.searchStringCreator(t)),i}getSuggestionsAndFilteredValues(t,e){let i=[],o=[];if(!t.length)return{suggestions:i,filteredValues:o};let{searchType:r="fuzzy",filterList:n}=this.config;if(r==="fuzzy"){let s=Nd(this.searchString,e,!0);i=s.values;let a=s.indices;if(n&&a.length)for(let l=0;l<a.length;l++)o.push(this.values[a[l]])}else i=e.filter((s,a)=>{let l=s.toLocaleLowerCase(),d=this.searchString.toLocaleLowerCase(),c=r==="match"?l.startsWith(d):l.indexOf(d)!==-1;return n&&c&&o.push(this.values[a]),c});return{suggestions:i,filteredValues:o}}filterListModel(t){let{filterList:e}=this.config;e&&(this.setValueList({valueList:t,refresh:!0}),this.alignPickerToComponent())}runSearch(){var t,e;let{values:i}=this,o=this.buildSearchStrings(i);if(!o){this.highlightSelectedValue(-1);return}let{suggestions:r,filteredValues:n}=this.getSuggestionsAndFilteredValues(this.searchString,o),{filterList:s,highlightMatch:a,searchType:l="fuzzy"}=this.config,d=n.length,c=!!(s&&this.searchString!=="");if(this.filterListModel(c?n:i),r.length){let u=c?0:o.indexOf(r[0]);this.selectListItem(u)}else if(this.highlightSelectedValue(-1),!c||d)(t=this.listComponent)==null||t.ensureIndexVisible(0);else if(c){this.getAriaElement().removeAttribute("data-active-option");let u=(e=this.listComponent)==null?void 0:e.getAriaElement();u&&Lm(u,null)}a&&l!=="fuzzy"&&this.highlightFilterMatch(),this.displayOrHidePicker()}displayOrHidePicker(){var t;let e=(t=this.listComponent)==null?void 0:t.getGui(),i=this.currentList?this.currentList.length===0:!1;e?.classList.toggle("ag-hidden",i)}clearSearchString(){this.searchString=""}selectListItem(t,e){if(!this.isPickerDisplayed||!this.currentList||!this.listComponent||t<0||t>=this.currentList.length)return;this.listComponent.ensureIndexVisible(t,!e)&&!e&&this.listComponent.refresh(!0),this.highlightSelectedValue(t)}setValue(t,e,i){let o=this.currentList?this.currentList.indexOf(t):-1;return o===-1?this:(this.value=t,i||this.selectListItem(o),this.renderSelectedValue(),super.setValue(t,e))}createRowComponent(t){let e=new _v(this.config,this.eWrapper);e.setParentComponent(this.listComponent),this.getContext().createBean(e),e.setState(t);let{highlightMatch:i,searchType:o="fuzzy"}=this.config;return i&&o!=="fuzzy"&&e.highlightString(this.searchString),e}getRowForMouseEvent(t){let{listComponent:e}=this;if(!e)return-1;let o=(e?.getGui()).getBoundingClientRect(),r=e.getScrollTop(),n=t.clientY-o.top+r;return Math.floor(n/e.getRowHeight())}onPickerMouseMove(t){if(!this.listComponent)return;let e=this.getRowForMouseEvent(t);e!==-1&&e!=this.lastRowHovered&&(this.lastRowHovered=e,this.selectListItem(e,!0))}onNavigationKeyDown(t,e){t.preventDefault();let i=e===S.DOWN;if(!this.isPickerDisplayed&&i){this.showPicker();return}let o=this.highlightedItem,n=o===-1?0:o+(i?1:-1);this.selectListItem(n)}onPageNavigation(t){var e;if(!this.isPickerDisplayed)return;let i=(e=this.listComponent)==null?void 0:e.navigateToPage(t,this.highlightedItem);i!=null&&this.animationFrameService.requestAnimationFrame(()=>{if(!this.isAlive())return null;this.highlightSelectedValue(i)})}onEnterKeyDown(t){this.isPickerDisplayed&&(t.preventDefault(),this.currentList&&this.onListValueSelected(this.currentList[this.highlightedItem],!0))}onTabKeyDown(){!this.isPickerDisplayed||!this.currentList||this.setValue(this.currentList[this.highlightedItem],!1,!0)}onListValueSelected(t,e){this.setValue(t,!1,!0),this.dispatchPickerEvent(t,e),this.hidePicker()}dispatchPickerEvent(t,e){let i={type:f.EVENT_FIELD_PICKER_VALUE_SELECTED,fromEnterKey:e,value:t};this.dispatchEvent(i)}getFocusableElement(){let{allowTyping:t}=this.config;return t?this.eInput.getFocusableElement():super.getFocusableElement()}onKeyDown(t){let e=t.key,{allowTyping:i}=this.config;switch(e){case S.LEFT:case S.RIGHT:i||t.preventDefault();break;case S.PAGE_HOME:case S.PAGE_END:if(i){t.preventDefault();let o=this.eInput.getInputElement(),r=e===S.PAGE_HOME?0:o.value.length;o.setSelectionRange(r,r);break}case S.PAGE_UP:case S.PAGE_DOWN:t.preventDefault(),this.onPageNavigation(e);break;case S.DOWN:case S.UP:this.onNavigationKeyDown(t,e);break;case S.ESCAPE:this.isPickerDisplayed&&(ni(this.listComponent.getGui())&&(t.preventDefault(),Qi(t)),this.hidePicker());break;case S.ENTER:this.onEnterKeyDown(t);break;case S.TAB:this.onTabKeyDown();break;default:i||this.buildSearchStringFromKeyboardEvent(t)}}destroy(){this.listComponent&&(this.destroyBean(this.listComponent),this.listComponent=void 0),this.eLoading=void 0,super.destroy()}};g([v("userComponentFactory")],Uh.prototype,"userComponentFactory",2);g([v("animationFrameService")],Uh.prototype,"animationFrameService",2);g([k("eInput")],Uh.prototype,"eInput",2);var Sa=class fE extends nv{constructor(e){super(e,fE.TEMPLATE),this.labelAlignment="top"}init(){this.eSlider.addCssClass("ag-slider-field");let{minValue:e,maxValue:i,textFieldWidth:o,step:r,value:n,onValueChange:s}=this.config;e!=null&&this.setMinValue(e),i!=null&&this.setMaxValue(i),o!=null&&this.setTextFieldWidth(o),r!=null&&this.setStep(r),n!=null&&this.setValue(n),s!=null&&this.onValueChange(s)}onValueChange(e){let i=f.EVENT_FIELD_VALUE_CHANGED;return this.addManagedListener(this.eText,i,()=>{let o=parseFloat(this.eText.getValue());this.eSlider.setValue(o.toString(),!0),e(o||0)}),this.addManagedListener(this.eSlider,i,()=>{let o=this.eSlider.getValue();this.eText.setValue(o,!0),e(parseFloat(o))}),this}setSliderWidth(e){return this.eSlider.setWidth(e),this}setTextFieldWidth(e){return this.eText.setWidth(e),this}setMinValue(e){return this.eSlider.setMinValue(e),this.eText.setMin(e),this}setMaxValue(e){return this.eSlider.setMaxValue(e),this.eText.setMax(e),this}getValue(){return this.eText.getValue()}setValue(e,i){return this.getValue()===e?this:(this.eText.setValue(e,!0),this.eSlider.setValue(e,!0),i||this.dispatchEvent({type:f.EVENT_FIELD_VALUE_CHANGED}),this)}setStep(e){return this.eSlider.setStep(e),this.eText.setStep(e),this}};Sa.TEMPLATE=`<div class="ag-slider">
            <label ref="eLabel"></label>
            <div class="ag-wrapper ag-slider-wrapper">
                <ag-input-range ref="eSlider"></ag-input-range>
                <ag-input-number-field ref="eText"></ag-input-number-field>
            </div>
        </div>`;g([k("eLabel")],Sa.prototype,"eLabel",2);g([k("eSlider")],Sa.prototype,"eSlider",2);g([k("eText")],Sa.prototype,"eText",2);g([I],Sa.prototype,"init",1);var Ak=Sa,Or=class Us extends J{constructor(e={}){super(Us.getTemplate(e)),this.params=e,this.suppressEnabledCheckbox=!0,this.suppressToggleExpandOnEnableChange=!1;let{enabled:i,items:o,suppressEnabledCheckbox:r,expanded:n,suppressToggleExpandOnEnableChange:s,useToggle:a}=e;this.cssIdentifier=e.cssIdentifier||"default",this.enabled=i??!0,this.items=o||[],this.useToggle=a??!1,this.alignItems=e.alignItems||"center",this.expanded=n??!0,r!=null&&(this.suppressEnabledCheckbox=r),s!=null&&(this.suppressToggleExpandOnEnableChange=s)}static getTemplate(e){let i=e.cssIdentifier||"default",o=e.direction||"vertical";return`
            <div class="ag-group ag-${i}-group" role="presentation">
                <div ref="eToolbar" class="ag-group-toolbar ag-${i}-group-toolbar">
                    <ag-checkbox ref="cbGroupEnabled"></ag-checkbox>
                </div>
                <div ref="eContainer" class="ag-group-container ag-group-container-${o} ag-${i}-group-container"></div>
            </div>
        `}postConstruct(){if(this.setupTitleBar(),this.items.length){let r=this.items;this.items=[],this.addItems(r)}let e=this.localeService.getLocaleTextFunc();this.cbGroupEnabled.setLabel(e("enabled","Enabled")),this.enabled&&this.setEnabled(this.enabled,void 0,!0),this.setAlignItems(this.alignItems);let{onEnableChange:i,suppressOpenCloseIcons:o}=this.params;this.hideEnabledCheckbox(this.suppressEnabledCheckbox),this.hideOpenCloseIcons(o??!1),this.refreshChildDisplay(),me(this.eContainer,this.expanded),this.cbGroupEnabled.onValueChange(r=>{this.setEnabled(r,!0,this.suppressToggleExpandOnEnableChange),this.dispatchEnableChangeEvent(r)}),i!=null&&this.onEnableChange(i)}refreshChildDisplay(){var e;me(this.eToolbar,this.expanded&&!this.suppressEnabledCheckbox),(e=this.eTitleBar)==null||e.refreshOnExpand(this.expanded)}isExpanded(){return this.expanded}setAlignItems(e){this.alignItems!==e&&this.removeCssClass(`ag-group-item-alignment-${this.alignItems}`),this.alignItems=e;let i=`ag-group-item-alignment-${this.alignItems}`;return this.addCssClass(i),this}toggleGroupExpand(e){var i;let o=!1;if((i=this.eTitleBar)!=null&&i.isSuppressCollapse()&&!this.useToggle)e=!0,o=!0;else if(e=e??!this.expanded,this.expanded===e)return this;return this.expanded=e,this.refreshChildDisplay(),me(this.eContainer,e),o||this.dispatchEvent({type:e?Us.EVENT_EXPANDED:Us.EVENT_COLLAPSED}),this}addItems(e){e.forEach(i=>this.addItem(i))}prependItem(e){this.insertItem(e,!0)}addItem(e){this.insertItem(e,!1)}insertItem(e,i){let o=this.eContainer,r=e instanceof J?e.getGui():e;r.classList.add("ag-group-item",`ag-${this.cssIdentifier}-group-item`),i?(o.insertAdjacentElement("afterbegin",r),this.items.unshift(r)):(o.appendChild(r),this.items.push(r))}hideItem(e,i){let o=this.items[i];me(o,!e)}getItemIndex(e){let i=e instanceof J?e.getGui():e;return this.items.indexOf(i)}setTitle(e){var i;return(i=this.eTitleBar)==null||i.setTitle(e),this}addTitleBarWidget(e){var i;return(i=this.eTitleBar)==null||i.addWidget(e),this}addCssClassToTitleBar(e){var i;(i=this.eTitleBar)==null||i.addCssClass(e)}dispatchEnableChangeEvent(e){let i={type:Us.EVENT_ENABLE_CHANGE,enabled:e};this.dispatchEvent(i)}setEnabled(e,i,o){var r;return this.enabled=e,this.refreshDisabledStyles(),o||this.toggleGroupExpand(e),i||(this.cbGroupEnabled.setValue(e),(r=this.eToggle)==null||r.setValue(e)),this}isEnabled(){return this.enabled}onEnableChange(e){return this.addManagedListener(this,Us.EVENT_ENABLE_CHANGE,i=>e(i.enabled)),this}hideEnabledCheckbox(e){return this.suppressEnabledCheckbox=e,this.refreshChildDisplay(),this.refreshDisabledStyles(),this}hideOpenCloseIcons(e){var i;return(i=this.eTitleBar)==null||i.hideOpenCloseIcons(e),this}refreshDisabledStyles(){var e;let i=!this.enabled;this.eContainer.classList.toggle("ag-disabled",i),(e=this.eTitleBar)==null||e.refreshDisabledStyles(this.suppressEnabledCheckbox&&i),this.eContainer.classList.toggle("ag-disabled-group-container",i)}setupTitleBar(){let e=this.useToggle?this.createToggleTitleBar():this.createDefaultTitleBar();this.eToolbar.insertAdjacentElement("beforebegin",e.getGui())}createDefaultTitleBar(){let e=this.createManagedBean(new PS(this.params));return this.eTitleBar=e,e.refreshOnExpand(this.expanded),this.addManagedListener(e,PS.EVENT_EXPAND_CHANGED,i=>this.toggleGroupExpand(i.expanded)),e}createToggleTitleBar(){var e;let i=this.createManagedBean(new hE({value:this.enabled,label:this.params.title,labelAlignment:"left",labelWidth:"flex",onValueChange:o=>{this.setEnabled(o,!0),this.dispatchEnableChangeEvent(o)}}));return i.addCssClass("ag-group-title-bar"),i.addCssClass(`ag-${(e=this.params.cssIdentifier)!=null?e:"default"}-group-title-bar ag-unselectable`),this.eToggle=i,this.toggleGroupExpand(this.enabled),i}};Or.EVENT_EXPANDED="expanded";Or.EVENT_COLLAPSED="collapsed";Or.EVENT_ENABLE_CHANGE="enableChange";g([k("eToolbar")],Or.prototype,"eToolbar",2);g([k("cbGroupEnabled")],Or.prototype,"cbGroupEnabled",2);g([k("eContainer")],Or.prototype,"eContainer",2);g([I],Or.prototype,"postConstruct",1);var Ik=Or,$f="ag-disabled-group-title-bar",xa=class wm extends J{constructor(e={}){super(wm.getTemplate(e)),this.suppressOpenCloseIcons=!1;let{title:i,suppressOpenCloseIcons:o}=e;i&&i.length>0&&(this.title=i),o!=null&&(this.suppressOpenCloseIcons=o)}static getTemplate(e){var i;let o=(i=e.cssIdentifier)!=null?i:"default";return`
            <div class="ag-group-title-bar ag-${o}-group-title-bar ag-unselectable" role="button">
                <span class="ag-group-title-bar-icon ag-${o}-group-title-bar-icon" ref="eGroupOpenedIcon" role="presentation"></span>
                <span class="ag-group-title-bar-icon ag-${o}-group-title-bar-icon" ref="eGroupClosedIcon" role="presentation"></span>
                <span ref="eTitle" class="ag-group-title ag-${o}-group-title"></span>
            </div>
        `}postConstruct(){this.setTitle(this.title),this.hideOpenCloseIcons(this.suppressOpenCloseIcons),this.setupExpandContract()}setupExpandContract(){this.eGroupClosedIcon.appendChild(Ri("columnSelectClosed",this.gos,null)),this.eGroupOpenedIcon.appendChild(Ri("columnSelectOpen",this.gos,null)),this.addManagedListener(this.getGui(),"click",()=>this.dispatchExpandChanged()),this.addManagedListener(this.getGui(),"keydown",e=>{switch(e.key){case S.ENTER:case S.SPACE:e.preventDefault(),this.dispatchExpandChanged();break;case S.RIGHT:case S.LEFT:e.preventDefault(),this.dispatchExpandChanged(e.key===S.RIGHT);break}})}refreshOnExpand(e){this.refreshAriaStatus(e),this.refreshOpenCloseIcons(e)}refreshAriaStatus(e){this.suppressOpenCloseIcons||No(this.getGui(),e)}refreshOpenCloseIcons(e){let i=!this.suppressOpenCloseIcons;me(this.eGroupOpenedIcon,i&&e),me(this.eGroupClosedIcon,i&&!e)}isSuppressCollapse(){return this.suppressOpenCloseIcons}dispatchExpandChanged(e){let i={type:wm.EVENT_EXPAND_CHANGED,expanded:e};this.dispatchEvent(i)}setTitle(e){let i=this.getGui(),o=!!e&&e.length>0;e=o?e:void 0,this.eTitle.textContent=e??"",me(i,o),e!==this.title&&(this.title=e);let r=i.classList.contains($f);return this.refreshDisabledStyles(r),this}addWidget(e){return this.getGui().appendChild(e),this}hideOpenCloseIcons(e){return this.suppressOpenCloseIcons=e,e&&this.dispatchExpandChanged(!0),this}refreshDisabledStyles(e){let i=this.getGui();e?(i.classList.add($f),i.removeAttribute("tabindex")):(i.classList.remove($f),typeof this.title=="string"?i.setAttribute("tabindex","0"):i.removeAttribute("tabindex"))}};xa.EVENT_EXPAND_CHANGED="expandedChanged";g([k("eGroupOpenedIcon")],xa.prototype,"eGroupOpenedIcon",2);g([k("eGroupClosedIcon")],xa.prototype,"eGroupClosedIcon",2);g([k("eTitle")],xa.prototype,"eTitle",2);g([I],xa.prototype,"postConstruct",1);var PS=xa,Ev=class extends jd{constructor(t=0,e){super('<div class="ag-menu-list" role="tree"></div>'),this.level=t,this.menuItems=[],this.params=e??{column:null,node:null,value:null}}postConstruct(){this.initialiseTabGuard({onTabKeyDown:t=>this.onTabKeyDown(t),handleKeyDown:t=>this.handleKeyDown(t),onFocusIn:t=>this.handleFocusIn(t),onFocusOut:t=>this.handleFocusOut(t)})}onTabKeyDown(t){let e=this.getParentComponent(),i=e&&e.getGui();i&&i.classList.contains("ag-focus-managed")||t.preventDefault(),t.shiftKey&&this.closeIfIsChild(t)}handleKeyDown(t){switch(t.key){case S.UP:case S.RIGHT:case S.DOWN:case S.LEFT:t.preventDefault(),this.handleNavKey(t.key);break;case S.ESCAPE:this.closeIfIsChild()&&Qi(t);break}}handleFocusIn(t){var e,i;let o=t.relatedTarget;!this.tabGuardCtrl.isTabGuard(o)&&(this.getGui().contains(o)||(i=(e=this.activeMenuItem)==null?void 0:e.getSubMenuGui())!=null&&i.contains(o))||(this.activeMenuItem?this.activeMenuItem.activate():this.activateFirstItem())}handleFocusOut(t){var e;let i=t.relatedTarget;!this.activeMenuItem||this.getGui().contains(i)||(e=this.activeMenuItem.getSubMenuGui())!=null&&e.contains(i)||this.activeMenuItem.isSubMenuOpening()||this.activeMenuItem.deactivate()}clearActiveItem(){this.activeMenuItem&&(this.activeMenuItem.deactivate(),this.activeMenuItem=null)}addMenuItems(t){t!=null&&ri.all(t.map(e=>e==="separator"?ri.resolve({eGui:this.createSeparator()}):typeof e=="string"?(console.warn(`AG Grid: unrecognised menu item ${e}`),ri.resolve({eGui:null})):this.addItem(e))).then(e=>{e.forEach(i=>{i?.eGui&&(this.appendChild(i.eGui),i.comp&&this.menuItems.push(i.comp))})})}addItem(t){let e=this.createManagedBean(new Hu);return e.init({menuItemDef:t,isAnotherSubMenuOpen:()=>this.menuItems.some(i=>i.isSubMenuOpen()),level:this.level,contextParams:this.params}).then(()=>(e.setParentComponent(this),this.addManagedListener(e,Hu.EVENT_CLOSE_MENU,i=>{this.dispatchEvent(i)}),this.addManagedListener(e,Hu.EVENT_MENU_ITEM_ACTIVATED,i=>{this.activeMenuItem&&this.activeMenuItem!==i.menuItem&&this.activeMenuItem.deactivate(),this.activeMenuItem=i.menuItem}),{comp:e,eGui:e.getGui()}))}activateFirstItem(){let t=this.menuItems.filter(e=>!e.isDisabled())[0];t&&t.activate()}createSeparator(){return ii(`
            <div class="ag-menu-separator" aria-hidden="true">
                <div class="ag-menu-separator-part"></div>
                <div class="ag-menu-separator-part"></div>
                <div class="ag-menu-separator-part"></div>
                <div class="ag-menu-separator-part"></div>
            </div>`)}handleNavKey(t){switch(t){case S.UP:case S.DOWN:let i=this.findNextItem(t===S.UP);i&&i!==this.activeMenuItem&&i.activate();return}let e=this.gos.get("enableRtl")?S.RIGHT:S.LEFT;t===e?this.closeIfIsChild():this.openChild()}closeIfIsChild(t){let e=this.getParentComponent();return e&&e instanceof Hu?(t&&t.preventDefault(),e.closeSubMenu(),e.getGui().focus(),!0):!1}openChild(){this.activeMenuItem&&this.activeMenuItem.openSubMenu(!0)}findNextItem(t){let e=this.menuItems.filter(r=>!r.isDisabled());if(!e.length)return;if(!this.activeMenuItem)return t?be(e):e[0];t&&e.reverse();let i,o=!1;for(let r=0;r<e.length;r++){let n=e[r];if(!o){n===this.activeMenuItem&&(o=!0);continue}i=n;break}return o&&!i?e[0]:i||this.activeMenuItem}destroy(){this.clearActiveItem(),super.destroy()}};g([v("focusService")],Ev.prototype,"focusService",2);g([I],Ev.prototype,"postConstruct",1);var mE=class extends jd{constructor(t){super(),this.wrappedComponent=t,this.setTemplateFromElement(t.getGui())}postConstruct(){this.initialiseTabGuard({onTabKeyDown:t=>this.onTabKeyDown(t),handleKeyDown:t=>this.handleKeyDown(t)})}handleKeyDown(t){t.key===S.ESCAPE&&this.closePanel()}onTabKeyDown(t){t.defaultPrevented||(this.closePanel(),t.preventDefault())}closePanel(){let t=this.parentComponent;t.closeSubMenu(),setTimeout(()=>t.getGui().focus(),0)}};g([I],mE.prototype,"postConstruct",1);var _a=class js extends A{constructor(){super(...arguments),this.isActive=!1,this.subMenuIsOpen=!1,this.subMenuIsOpening=!1,this.suppressRootStyles=!0,this.suppressAria=!0,this.suppressFocus=!0}init(e){var i,o;let{menuItemDef:r,isAnotherSubMenuOpen:n,level:s,childComponent:a,contextParams:l}=e;return this.params=e.menuItemDef,this.level=s,this.isAnotherSubMenuOpen=n,this.childComponent=a,this.contextParams=l,this.cssClassPrefix=(o=(i=this.params.menuItemParams)==null?void 0:i.cssClassPrefix)!=null?o:"ag-menu-option",this.userComponentFactory.getMenuItemCompDetails(this.params,He(j({},r),{level:s,isAnotherSubMenuOpen:n,openSubMenu:c=>this.openSubMenu(c),closeSubMenu:()=>this.closeSubMenu(),closeMenu:c=>this.closeMenu(c),updateTooltip:(c,u)=>this.refreshTooltip(c,u),onItemActivated:()=>this.onItemActivated()})).newAgStackInstance().then(c=>{var u;this.menuItemComp=c;let h=(u=c.configureDefaults)==null?void 0:u.call(c);h&&this.configureDefaults(h===!0?void 0:h)})}addListeners(e,i){i?.suppressClick||this.addManagedListener(e,"click",o=>this.onItemSelected(o)),i?.suppressKeyboardSelect||this.addManagedListener(e,"keydown",o=>{(o.key===S.ENTER||o.key===S.SPACE)&&(o.preventDefault(),this.onItemSelected(o))}),i?.suppressMouseDown||this.addManagedListener(e,"mousedown",o=>{o.stopPropagation(),o.preventDefault()}),i?.suppressMouseOver||(this.addManagedListener(e,"mouseenter",()=>this.onMouseEnter()),this.addManagedListener(e,"mouseleave",()=>this.onMouseLeave()))}isDisabled(){return!!this.params.disabled}openSubMenu(e=!1){var i,o;if(this.closeSubMenu(),!this.params.subMenu)return;this.subMenuIsOpening=!0;let r=ii('<div class="ag-menu" role="presentation"></div>');this.eSubMenuGui=r;let n,s=()=>{this.subMenuIsOpening=!1};if(this.childComponent){let c=this.createBean(new mE(this.childComponent));c.setParentComponent(this);let u=c.getGui(),h="mouseenter",p=()=>this.cancelDeactivate();u.addEventListener(h,p),n=()=>u.removeEventListener(h,p),r.appendChild(u),this.childComponent.afterGuiAttached&&(s=()=>{this.childComponent.afterGuiAttached(),this.subMenuIsOpening=!1})}else if(this.params.subMenu){let c=this.createBean(new Ev(this.level+1,this.contextParams));c.setParentComponent(this),c.addMenuItems(this.params.subMenu),r.appendChild(c.getGui()),this.addManagedListener(c,js.EVENT_CLOSE_MENU,u=>this.dispatchEvent(u)),c.addGuiEventListener("mouseenter",()=>this.cancelDeactivate()),n=()=>this.destroyBean(c),e&&(s=()=>{c.activateFirstItem(),this.subMenuIsOpening=!1})}let a=this.popupService.positionPopupForMenu.bind(this.popupService,{eventSource:this.eGui,ePopup:r}),l=this.localeService.getLocaleTextFunc(),d=this.popupService.addPopup({modal:!0,eChild:r,positionCallback:a,anchorToElement:this.eGui,ariaLabel:l("ariaLabelSubMenu","SubMenu"),afterGuiAttached:s});this.subMenuIsOpen=!0,this.setAriaExpanded(!0),this.hideSubMenu=()=>{var c,u;d&&d.hideFunc(),this.subMenuIsOpen=!1,this.setAriaExpanded(!1),n(),(u=(c=this.menuItemComp).setExpanded)==null||u.call(c,!1),this.eSubMenuGui=void 0},(o=(i=this.menuItemComp).setExpanded)==null||o.call(i,!0)}setAriaExpanded(e){this.suppressAria||No(this.eGui,e)}closeSubMenu(){this.hideSubMenu&&(this.hideSubMenu(),this.hideSubMenu=null,this.setAriaExpanded(!1))}isSubMenuOpen(){return this.subMenuIsOpen}isSubMenuOpening(){return this.subMenuIsOpening}activate(e){var i,o;this.cancelActivate(),!this.params.disabled&&(this.isActive=!0,this.suppressRootStyles||this.eGui.classList.add(`${this.cssClassPrefix}-active`),(o=(i=this.menuItemComp).setActive)==null||o.call(i,!0),this.suppressFocus||this.eGui.focus({preventScroll:!0}),e&&this.params.subMenu&&window.setTimeout(()=>{this.isAlive()&&this.isActive&&this.openSubMenu()},300),this.onItemActivated())}deactivate(){var e,i;this.cancelDeactivate(),this.suppressRootStyles||this.eGui.classList.remove(`${this.cssClassPrefix}-active`),(i=(e=this.menuItemComp).setActive)==null||i.call(e,!1),this.isActive=!1,this.subMenuIsOpen&&this.hideSubMenu()}getGui(){return this.menuItemComp.getGui()}getParentComponent(){return this.parentComponent}setParentComponent(e){this.parentComponent=e}getSubMenuGui(){return this.eSubMenuGui}onItemSelected(e){var i,o;(o=(i=this.menuItemComp).select)==null||o.call(i),this.params.action?this.getFrameworkOverrides().wrapOutgoing(()=>this.params.action(this.gos.addGridCommonParams(j({},this.contextParams)))):this.openSubMenu(e&&e.type==="keydown"),!(this.params.subMenu&&!this.params.action||this.params.suppressCloseOnSelect)&&this.closeMenu(e)}closeMenu(e){let i={type:js.EVENT_CLOSE_MENU};e&&(e instanceof MouseEvent?i.mouseEvent=e:i.keyboardEvent=e),this.dispatchEvent(i)}onItemActivated(){let e={type:js.EVENT_MENU_ITEM_ACTIVATED,menuItem:this};this.dispatchEvent(e)}cancelActivate(){this.activateTimeoutId&&(window.clearTimeout(this.activateTimeoutId),this.activateTimeoutId=0)}cancelDeactivate(){this.deactivateTimeoutId&&(window.clearTimeout(this.deactivateTimeoutId),this.deactivateTimeoutId=0)}onMouseEnter(){this.cancelDeactivate(),this.isAnotherSubMenuOpen()?this.activateTimeoutId=window.setTimeout(()=>this.activate(!0),js.ACTIVATION_DELAY):this.activate(!0)}onMouseLeave(){this.cancelActivate(),this.isSubMenuOpen()?this.deactivateTimeoutId=window.setTimeout(()=>this.deactivate(),js.ACTIVATION_DELAY):this.deactivate()}configureDefaults(e){var i,o,r;if(!this.menuItemComp){setTimeout(()=>this.configureDefaults(e));return}let n=this.menuItemComp.getGui(),s=(o=(i=this.menuItemComp).getRootElement)==null?void 0:o.call(i);s&&(e?.suppressRootStyles||n.classList.add("ag-menu-option-custom"),n=s),this.eGui=n,this.suppressRootStyles=!!e?.suppressRootStyles,this.suppressRootStyles||(n.classList.add(this.cssClassPrefix),(r=this.params.cssClasses)==null||r.forEach(a=>n.classList.add(a)),this.params.disabled&&n.classList.add(`${this.cssClassPrefix}-disabled`)),e?.suppressTooltip||this.refreshTooltip(this.params.tooltip),this.suppressAria=!!e?.suppressAria,this.suppressAria||(Xe(n,"treeitem"),Rx(n,this.level+1),this.params.disabled&&km(n,!0)),e?.suppressTabIndex||n.setAttribute("tabindex","-1"),this.params.disabled||this.addListeners(n,e),this.suppressFocus=!!e?.suppressFocus}refreshTooltip(e,i){this.tooltip=e,this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),!(!e||!this.menuItemComp)&&(this.tooltipFeature=this.createBean(new Ho({getGui:()=>this.getGui(),getTooltipValue:()=>this.tooltip,getLocation:()=>"menu",shouldDisplayTooltip:i})))}destroy(){this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),super.destroy()}};_a.EVENT_CLOSE_MENU="closeMenu";_a.EVENT_MENU_ITEM_ACTIVATED="menuItemActivated";_a.ACTIVATION_DELAY=80;g([v("popupService")],_a.prototype,"popupService",2);g([v("userComponentFactory")],_a.prototype,"userComponentFactory",2);var Hu=_a,$n=class ym extends J{constructor(e){super(ym.getTemplate(e)),this.config=e,this.closable=!0}static getTemplate(e){let i=e.cssIdentifier||"default";return`<div class="ag-panel ag-${i}-panel" tabindex="-1">
            <div ref="eTitleBar" class="ag-panel-title-bar ag-${i}-panel-title-bar ag-unselectable">
                <span ref="eTitle" class="ag-panel-title-bar-title ag-${i}-panel-title-bar-title"></span>
                <div ref="eTitleBarButtons" class="ag-panel-title-bar-buttons ag-${i}-panel-title-bar-buttons"></div>
            </div>
            <div ref="eContentWrapper" class="ag-panel-content-wrapper ag-${i}-panel-content-wrapper"></div>
        </div>`}postConstruct(){let{component:e,closable:i,hideTitleBar:o,title:r,minWidth:n=250,width:s,minHeight:a=250,height:l,centered:d,popup:c,x:u,y:h}=this.config;this.positionableFeature=new ha(this.getGui(),{minWidth:n,width:s,minHeight:a,height:l,centered:d,x:u,y:h,popup:c,calculateTopBuffer:()=>this.positionableFeature.getHeight()-this.getBodyHeight()}),this.createManagedBean(this.positionableFeature);let p=this.getGui();e&&this.setBodyComponent(e),o?me(this.eTitleBar,!1):(r&&this.setTitle(r),this.setClosable(i??this.closable)),this.addManagedListener(this.eTitleBar,"mousedown",m=>{if(p.contains(m.relatedTarget)||p.contains(this.gos.getActiveDomElement())||this.eTitleBarButtons.contains(m.target)){m.preventDefault();return}let C=this.eContentWrapper.querySelector("button, [href], input, select, textarea, [tabindex]");C&&C.focus()}),!(c&&this.positionableFeature.isPositioned())&&(this.renderComponent&&this.renderComponent(),this.positionableFeature.initialisePosition(),this.eContentWrapper.style.height="0")}renderComponent(){let e=this.getGui();e.focus(),this.close=()=>{e.parentElement.removeChild(e),this.destroy()}}getHeight(){return this.positionableFeature.getHeight()}setHeight(e){this.positionableFeature.setHeight(e)}getWidth(){return this.positionableFeature.getWidth()}setWidth(e){this.positionableFeature.setWidth(e)}setClosable(e){if(e!==this.closable&&(this.closable=e),e){let i=this.closeButtonComp=new J(ym.CLOSE_BTN_TEMPLATE);this.getContext().createBean(i);let o=i.getGui(),r=qe("close",this.gos);r.classList.add("ag-panel-title-bar-button-icon"),o.appendChild(r),this.addTitleBarButton(i),i.addManagedListener(o,"click",this.onBtClose.bind(this))}else if(this.closeButtonComp){let i=this.closeButtonComp.getGui();i.parentElement.removeChild(i),this.closeButtonComp=this.destroyBean(this.closeButtonComp)}}setBodyComponent(e){e.setParentComponent(this),this.eContentWrapper.appendChild(e.getGui())}addTitleBarButton(e,i){let o=this.eTitleBarButtons,r=o.children,n=r.length;i==null&&(i=n),i=Math.max(0,Math.min(i,n)),e.addCssClass("ag-panel-title-bar-button");let s=e.getGui();i===0?o.insertAdjacentElement("afterbegin",s):i===n?o.insertAdjacentElement("beforeend",s):r[i-1].insertAdjacentElement("afterend",s),e.setParentComponent(this)}getBodyHeight(){return kd(this.eContentWrapper)}getBodyWidth(){return zn(this.eContentWrapper)}setTitle(e){this.eTitle.innerText=e}onBtClose(){this.close()}destroy(){this.closeButtonComp&&(this.closeButtonComp=this.destroyBean(this.closeButtonComp));let e=this.getGui();e&&ni(e)&&this.close(),super.destroy()}};$n.CLOSE_BTN_TEMPLATE='<div class="ag-button"></div>';g([k("eContentWrapper")],$n.prototype,"eContentWrapper",2);g([k("eTitleBar")],$n.prototype,"eTitleBar",2);g([k("eTitleBarButtons")],$n.prototype,"eTitleBarButtons",2);g([k("eTitle")],$n.prototype,"eTitle",2);g([I],$n.prototype,"postConstruct",1);var Pk=$n,Fk=class extends Pk{constructor(t){super(He(j({},t),{popup:!0})),this.isMaximizable=!1,this.isMaximized=!1,this.maximizeListeners=[],this.resizeListenerDestroy=null,this.lastPosition={x:0,y:0,width:0,height:0}}postConstruct(){let t=this.getGui(),{movable:e,resizable:i,maximizable:o}=this.config;this.addCssClass("ag-dialog"),super.postConstruct(),this.addManagedListener(t,"focusin",r=>{this.popupService.bringPopupToFront(t)}),e&&this.setMovable(e),o&&this.setMaximizable(o),i&&this.setResizable(i)}renderComponent(){let t=this.getGui(),{alwaysOnTop:e,modal:i,title:o,afterGuiAttached:r}=this.config,n=this.localeService.getLocaleTextFunc(),s=this.popupService.addPopup({modal:i,eChild:t,closeOnEsc:!0,closedCallback:this.onClosed.bind(this),alwaysOnTop:e,ariaLabel:o||n("ariaLabelDialog","Dialog"),afterGuiAttached:r});s&&(this.close=s.hideFunc)}onClosed(t){var e,i;this.destroy(),(i=(e=this.config).closedCallback)==null||i.call(e,t)}toggleMaximize(){let t=this.positionableFeature.getPosition();if(this.isMaximized){let{x:e,y:i,width:o,height:r}=this.lastPosition;this.setWidth(o),this.setHeight(r),this.positionableFeature.offsetElement(e,i)}else this.lastPosition.width=this.getWidth(),this.lastPosition.height=this.getHeight(),this.lastPosition.x=t.x,this.lastPosition.y=t.y,this.positionableFeature.offsetElement(0,0),this.setHeight("100%"),this.setWidth("100%");this.isMaximized=!this.isMaximized,this.refreshMaximizeIcon()}refreshMaximizeIcon(){me(this.maximizeIcon,!this.isMaximized),me(this.minimizeIcon,this.isMaximized)}clearMaximizebleListeners(){this.maximizeListeners.length&&(this.maximizeListeners.forEach(t=>t()),this.maximizeListeners.length=0),this.resizeListenerDestroy&&(this.resizeListenerDestroy(),this.resizeListenerDestroy=null)}destroy(){this.maximizeButtonComp=this.destroyBean(this.maximizeButtonComp),this.clearMaximizebleListeners(),super.destroy()}setResizable(t){this.positionableFeature.setResizable(t)}setMovable(t){this.positionableFeature.setMovable(t,this.eTitleBar)}setMaximizable(t){if(!t){this.clearMaximizebleListeners(),this.maximizeButtonComp&&(this.destroyBean(this.maximizeButtonComp),this.maximizeButtonComp=this.maximizeIcon=this.minimizeIcon=void 0);return}let e=this.eTitleBar;if(!e||t===this.isMaximizable)return;let i=this.buildMaximizeAndMinimizeElements();this.refreshMaximizeIcon(),i.addManagedListener(i.getGui(),"click",this.toggleMaximize.bind(this)),this.addTitleBarButton(i,0),this.maximizeListeners.push(this.addManagedListener(e,"dblclick",this.toggleMaximize.bind(this))),this.resizeListenerDestroy=this.addManagedListener(this,"resize",()=>{this.isMaximized=!1,this.refreshMaximizeIcon()})}buildMaximizeAndMinimizeElements(){let t=this.maximizeButtonComp=this.createBean(new J('<div class="ag-dialog-button"></span>')),e=t.getGui();return this.maximizeIcon=qe("maximize",this.gos),e.appendChild(this.maximizeIcon),this.maximizeIcon.classList.add("ag-panel-title-bar-button-icon"),this.minimizeIcon=qe("minimize",this.gos),e.appendChild(this.minimizeIcon),this.minimizeIcon.classList.add("ag-panel-title-bar-button-icon"),t}};g([v("popupService")],Fk.prototype,"popupService",2);var Ok=0,zo=class extends A{constructor(){super(...arguments),this.popupList=[]}postConstruct(){this.ctrlsService.whenReady(t=>{this.gridCtrl=t.gridCtrl}),this.addManagedListener(this.eventService,f.EVENT_GRID_STYLES_CHANGED,this.handleThemeChange.bind(this))}getPopupParent(){let t=this.gos.get("popupParent");return t||this.gridCtrl.getGui()}positionPopupForMenu(t){let{eventSource:e,ePopup:i}=t,o=this.getPopupIndex(i);if(o!==-1){let p=this.popupList[o];p.alignedToElement=e}let r=e.getBoundingClientRect(),n=this.getParentRect(),s=this.keepXYWithinBounds(i,r.top-n.top,0),a=i.clientWidth>0?i.clientWidth:200;i.style.minWidth=`${a}px`;let d=n.right-n.left-a,c;this.gos.get("enableRtl")?(c=h(),c<0&&(c=u(),this.setAlignedStyles(i,"left")),c>d&&(c=0,this.setAlignedStyles(i,"right"))):(c=u(),c>d&&(c=h(),this.setAlignedStyles(i,"right")),c<0&&(c=0,this.setAlignedStyles(i,"left"))),i.style.left=`${c}px`,i.style.top=`${s}px`;function u(){return r.right-n.left-2}function h(){return r.left-n.left-a}}positionPopupUnderMouseEvent(t){let{ePopup:e,nudgeX:i,nudgeY:o,skipObserver:r}=t;this.positionPopup({ePopup:e,nudgeX:i,nudgeY:o,keepWithinBounds:!0,skipObserver:r,updatePosition:()=>this.calculatePointerAlign(t.mouseEvent),postProcessCallback:()=>this.callPostProcessPopup(t.type,t.ePopup,null,t.mouseEvent,t.column,t.rowNode)})}calculatePointerAlign(t){let e=this.getParentRect();return{x:t.clientX-e.left,y:t.clientY-e.top}}positionPopupByComponent(t){let{ePopup:e,nudgeX:i,nudgeY:o,keepWithinBounds:r,eventSource:n,alignSide:s="left",position:a="over",column:l,rowNode:d,type:c}=t,u=n.getBoundingClientRect(),h=this.getParentRect(),p=this.getPopupIndex(e);if(p!==-1){let C=this.popupList[p];C.alignedToElement=n}let m=()=>{let C=u.left-h.left;s==="right"&&(C-=e.offsetWidth-u.width);let w;return a==="over"?(w=u.top-h.top,this.setAlignedStyles(e,"over")):(this.setAlignedStyles(e,"under"),this.shouldRenderUnderOrAbove(e,u,h,t.nudgeY||0)==="under"?w=u.top-h.top+u.height:w=u.top-e.offsetHeight-(o||0)*2-h.top),{x:C,y:w}};this.positionPopup({ePopup:e,nudgeX:i,nudgeY:o,keepWithinBounds:r,updatePosition:m,postProcessCallback:()=>this.callPostProcessPopup(c,e,n,null,l,d)})}shouldRenderUnderOrAbove(t,e,i,o){let r=i.bottom-e.bottom,n=e.top-i.top,s=t.offsetHeight+o;return r>s?"under":n>s||n>r?"above":"under"}setAlignedStyles(t,e){let i=this.getPopupIndex(t);if(i===-1)return;let o=this.popupList[i],{alignedToElement:r}=o;!r||(["right","left","over","above","under"].forEach(s=>{r.classList.remove(`ag-has-popup-positioned-${s}`),t.classList.remove(`ag-popup-positioned-${s}`)}),!e)||(r.classList.add(`ag-has-popup-positioned-${e}`),t.classList.add(`ag-popup-positioned-${e}`))}callPostProcessPopup(t,e,i,o,r,n){let s=this.gos.getCallback("postProcessPopup");s&&s({column:r,rowNode:n,ePopup:e,type:t,eventSource:i,mouseEvent:o})}positionPopup(t){let{ePopup:e,keepWithinBounds:i,nudgeX:o,nudgeY:r,skipObserver:n,updatePosition:s}=t,a={width:0,height:0},l=(d=!1)=>{let{x:c,y:u}=s();d&&e.clientWidth===a.width&&e.clientHeight===a.height||(a.width=e.clientWidth,a.height=e.clientHeight,o&&(c+=o),r&&(u+=r),i&&(c=this.keepXYWithinBounds(e,c,1),u=this.keepXYWithinBounds(e,u,0)),e.style.left=`${c}px`,e.style.top=`${u}px`,t.postProcessCallback&&t.postProcessCallback())};if(l(),!n){let d=this.resizeObserverService.observeResize(e,()=>l(!0));setTimeout(()=>d(),zo.WAIT_FOR_POPUP_CONTENT_RESIZE)}}getActivePopups(){return this.popupList.map(t=>t.element)}getPopupList(){return this.popupList}getParentRect(){let t=this.gos.getDocument(),e=this.getPopupParent();return e===t.body?e=t.documentElement:getComputedStyle(e).position==="static"&&(e=e.offsetParent),Ym(e)}keepXYWithinBounds(t,e,i){let o=i===0,r=o?"clientHeight":"clientWidth",n=o?"top":"left",s=o?"offsetHeight":"offsetWidth",a=o?"scrollTop":"scrollLeft",l=this.gos.getDocument(),d=l.documentElement,c=this.getPopupParent(),u=c.getBoundingClientRect(),h=l.documentElement.getBoundingClientRect(),p=c===l.body,m=t[s],w=p?(o?$m:ud)(d)+d[a]:c[r];p&&(w-=Math.abs(h[n]-u[n]));let b=w-m;return Math.min(Math.max(e,0),Math.abs(b))}addPopup(t){let e=this.gos.getDocument(),{eChild:i,ariaLabel:o,alwaysOnTop:r,positionCallback:n,anchorToElement:s}=t;if(!e)return console.warn("AG Grid: could not find the document, document is empty"),{hideFunc:()=>{}};let a=this.getPopupIndex(i);if(a!==-1)return{hideFunc:this.popupList[a].hideFunc};this.initialisePopupPosition(i);let l=this.createPopupWrapper(i,o,!!r),d=this.addEventListenersToPopup(He(j({},t),{wrapperEl:l}));return n&&n(),this.addPopupToPopupList(i,l,d,s),{hideFunc:d}}initialisePopupPosition(t){let i=this.getPopupParent().getBoundingClientRect();T(t.style.top)||(t.style.top=`${i.top*-1}px`),T(t.style.left)||(t.style.left=`${i.left*-1}px`)}createPopupWrapper(t,e,i){let o=this.getPopupParent(),r=document.createElement("div"),{allThemes:n}=this.environment.getTheme();return n.length&&r.classList.add(...n),r.classList.add("ag-popup"),t.classList.add(this.gos.get("enableRtl")?"ag-rtl":"ag-ltr","ag-popup-child"),t.hasAttribute("role")||Xe(t,"dialog"),yi(t,e),r.appendChild(t),o.appendChild(r),i?this.setAlwaysOnTop(t,!0):this.bringPopupToFront(t),r}handleThemeChange(){let{allThemes:t}=this.environment.getTheme();for(let e of this.popupList){for(let i of Array.from(e.wrapper.classList))i.startsWith("ag-theme-")&&e.wrapper.classList.remove(i);t.length&&e.wrapper.classList.add(...t)}}addEventListenersToPopup(t){let e=this.gos.getDocument(),i=this.getPopupParent(),{wrapperEl:o,eChild:r,closedCallback:n,afterGuiAttached:s,closeOnEsc:a,modal:l}=t,d=!1,c=m=>{if(!o.contains(this.gos.getActiveDomElement()))return;m.key===S.ESCAPE&&!$i(m)&&p({keyboardEvent:m})},u=m=>p({mouseEvent:m}),h=m=>p({touchEvent:m}),p=(m={})=>{let{mouseEvent:C,touchEvent:w,keyboardEvent:b,forceHide:y}=m;!y&&(this.isEventFromCurrentPopup({mouseEvent:C,touchEvent:w},r)||d)||(d=!0,i.removeChild(o),e.removeEventListener("keydown",c),e.removeEventListener("mousedown",u),e.removeEventListener("touchstart",h),e.removeEventListener("contextmenu",u),this.eventService.removeEventListener(f.EVENT_DRAG_STARTED,u),n&&n(C||w||b),this.removePopupFromPopupList(r))};return s&&s({hidePopup:p}),window.setTimeout(()=>{a&&e.addEventListener("keydown",c),l&&(e.addEventListener("mousedown",u),this.eventService.addEventListener(f.EVENT_DRAG_STARTED,u),e.addEventListener("touchstart",h),e.addEventListener("contextmenu",u))},0),p}addPopupToPopupList(t,e,i,o){this.popupList.push({element:t,wrapper:e,hideFunc:i,instanceId:Ok++,isAnchored:!!o}),o&&this.setPopupPositionRelatedToElement(t,o)}getPopupIndex(t){return this.popupList.findIndex(e=>e.element===t)}setPopupPositionRelatedToElement(t,e){let i=this.getPopupIndex(t);if(i===-1)return;let o=this.popupList[i];if(o.stopAnchoringPromise&&o.stopAnchoringPromise.then(n=>n&&n()),o.stopAnchoringPromise=void 0,o.isAnchored=!1,!e)return;let r=this.keepPopupPositionedRelativeTo({element:e,ePopup:t,hidePopup:o.hideFunc});return o.stopAnchoringPromise=r,o.isAnchored=!0,r}removePopupFromPopupList(t){this.setAlignedStyles(t,null),this.setPopupPositionRelatedToElement(t,null),this.popupList=this.popupList.filter(e=>e.element!==t)}keepPopupPositionedRelativeTo(t){let e=this.getPopupParent(),i=e.getBoundingClientRect(),{element:o,ePopup:r}=t,n=o.getBoundingClientRect(),s=i.top-n.top,a=i.left-n.left,l=s,d=a,c=r.style.top,u=parseInt(c.substring(0,c.length-1),10),h=r.style.left,p=parseInt(h.substring(0,h.length-1),10);return new ri(m=>{this.getFrameworkOverrides().setInterval(()=>{let C=e.getBoundingClientRect(),w=o.getBoundingClientRect();if(w.top==0&&w.left==0&&w.height==0&&w.width==0){t.hidePopup();return}let y=C.top-w.top;if(y!=l){let x=this.keepXYWithinBounds(r,u+s-y,0);r.style.top=`${x}px`}l=y;let _=C.left-w.left;if(_!=d){let x=this.keepXYWithinBounds(r,p+a-_,1);r.style.left=`${x}px`}d=_},200).then(C=>{m(()=>{C!=null&&window.clearInterval(C)})})})}hasAnchoredPopup(){return this.popupList.some(t=>t.isAnchored)}isEventFromCurrentPopup(t,e){let{mouseEvent:i,touchEvent:o}=t,r=i||o;if(!r)return!1;let n=this.getPopupIndex(e);if(n===-1)return!1;for(let s=n;s<this.popupList.length;s++){let a=this.popupList[s];if(Ju(a.element,r))return!0}return this.isElementWithinCustomPopup(r.target)}isElementWithinCustomPopup(t){let e=this.gos.getDocument();for(;t&&t!==e.body;){if(t.classList.contains("ag-custom-component-popup")||t.parentElement===null)return!0;t=t.parentElement}return!1}getWrapper(t){for(;!t.classList.contains("ag-popup")&&t.parentElement;)t=t.parentElement;return t.classList.contains("ag-popup")?t:null}setAlwaysOnTop(t,e){let i=this.getWrapper(t);i&&(i.classList.toggle("ag-always-on-top",!!e),e&&this.bringPopupToFront(i))}bringPopupToFront(t){let e=this.getPopupParent(),i=Array.prototype.slice.call(e.querySelectorAll(".ag-popup")),o=i.length,r=Array.prototype.slice.call(e.querySelectorAll(".ag-popup.ag-always-on-top")),n=r.length,s=this.getWrapper(t);if(!s||o<=1||!e.contains(t))return;let a=i.indexOf(s),l=s.querySelectorAll("div"),d=[];for(l.forEach(c=>{c.scrollTop!==0&&d.push([c,c.scrollTop])}),n?s.classList.contains("ag-always-on-top")?a!==o-1&&be(r).insertAdjacentElement("afterend",s):a!==o-n-1&&r[0].insertAdjacentElement("beforebegin",s):a!==o-1&&be(i).insertAdjacentElement("afterend",s);d.length;){let c=d.pop();c[0].scrollTop=c[1]}}};zo.WAIT_FOR_POPUP_CONTENT_RESIZE=200;g([v("focusService")],zo.prototype,"focusService",2);g([v("ctrlsService")],zo.prototype,"ctrlsService",2);g([v("resizeObserverService")],zo.prototype,"resizeObserverService",2);g([I],zo.prototype,"postConstruct",1);zo=g([V("popupService")],zo);var kk=class extends J{constructor(){super(`
        <div class="ag-autocomplete-row" role="presentation">
            <div class="ag-autocomplete-row-label"></div>
        </div>`),this.hasHighlighting=!1}setState(t,e){this.value=t,this.render(),this.updateSelected(e)}updateSelected(t){this.addOrRemoveCssClass("ag-autocomplete-row-selected",t)}setSearchString(t){var e;let i=!1;if(T(t)){let o=(e=this.value)==null?void 0:e.toLocaleLowerCase().indexOf(t.toLocaleLowerCase());if(o>=0){i=!0,this.hasHighlighting=!0;let r=o+t.length,n=rt(this.value.slice(0,o)),s=rt(this.value.slice(o,r)),a=rt(this.value.slice(r));this.getGui().lastElementChild.innerHTML=`${n}<b>${s}</b>${a}`}}!i&&this.hasHighlighting&&(this.hasHighlighting=!1,this.render())}render(){var t;this.getGui().lastElementChild.innerHTML=(t=rt(this.value))!=null?t:"&nbsp;"}},jh=class vE extends Hn{constructor(e){super(vE.TEMPLATE),this.params=e,this.searchString=""}destroy(){super.destroy()}init(){this.autocompleteEntries=this.params.autocompleteEntries,this.virtualList=this.createManagedBean(new pE({cssIdentifier:"autocomplete"})),this.virtualList.setComponentCreator(this.createRowComponent.bind(this)),this.eList.appendChild(this.virtualList.getGui()),this.virtualList.setModel({getRowCount:()=>this.autocompleteEntries.length,getRow:i=>this.autocompleteEntries[i]});let e=this.virtualList.getGui();this.addManagedListener(e,"click",()=>this.params.onConfirmed()),this.addManagedListener(e,"mousemove",this.onMouseMove.bind(this)),this.addManagedListener(e,"mousedown",i=>i.preventDefault()),this.setSelectedValue(0)}onNavigationKeyDown(e,i){e.preventDefault();let o=this.autocompleteEntries.indexOf(this.selectedValue),r=i===S.UP?o-1:o+1;this.checkSetSelectedValue(r)}setSearch(e){this.searchString=e,T(e)?this.runSearch():(this.autocompleteEntries=this.params.autocompleteEntries,this.virtualList.refresh(),this.checkSetSelectedValue(0)),this.updateSearchInList()}runContainsSearch(e,i){let o,r=!1,n=e.toLocaleLowerCase(),s=i.filter(a=>{let d=a.toLocaleLowerCase().indexOf(n),c=d===0,u=d>=0;return u&&(!o||!r&&c||r===c&&a.length<o.length)&&(o=a,r=c),u});return!o&&s.length&&(o=s[0]),{topMatch:o,allMatches:s}}runSearch(){var e,i;let{autocompleteEntries:o}=this.params,r=o.map(d=>{var c;return(c=d.displayValue)!=null?c:d.key}),n,s;if(this.params.useFuzzySearch)n=Nd(this.searchString,r,!0).values,s=n.length?n[0]:void 0;else{let d=this.runContainsSearch(this.searchString,r);n=d.allMatches,s=d.topMatch}let a=o.filter(({key:d,displayValue:c})=>n.includes(c??d));if(!a.length&&this.selectedValue&&((i=(e=this.params)==null?void 0:e.forceLastSelection)!=null&&i.call(e,this.selectedValue,this.searchString))&&(a=[this.selectedValue]),this.autocompleteEntries=a,this.virtualList.refresh(),!s)return;let l=n.indexOf(s);this.checkSetSelectedValue(l)}updateSearchInList(){this.virtualList.forEachRenderedRow(e=>e.setSearchString(this.searchString))}checkSetSelectedValue(e){e>=0&&e<this.autocompleteEntries.length&&this.setSelectedValue(e)}setSelectedValue(e){let i=this.autocompleteEntries[e];this.selectedValue!==i&&(this.selectedValue=i,this.virtualList.ensureIndexVisible(e),this.virtualList.forEachRenderedRow((o,r)=>{o.updateSelected(e===r)}))}createRowComponent(e){var i;let o=new kk;return this.getContext().createBean(o),o.setState((i=e.displayValue)!=null?i:e.key,e===this.selectedValue),o}onMouseMove(e){let i=this.virtualList.getGui().getBoundingClientRect(),o=this.virtualList.getScrollTop(),r=e.clientY-i.top+o,n=Math.floor(r/this.virtualList.getRowHeight());this.checkSetSelectedValue(n)}afterGuiAttached(){this.virtualList.refresh()}getSelectedValue(){var e;return this.autocompleteEntries.length&&(e=this.selectedValue)!=null?e:null}};jh.TEMPLATE=`<div class="ag-autocomplete-list-popup">
            <div ref="eList" class="ag-autocomplete-list"></div>
        <div>`;g([k("eList")],jh.prototype,"eList",2);g([I],jh.prototype,"init",1);var Lk=jh,kr=class td extends J{constructor(){super(`
            <div class="ag-autocomplete" role="presentation">
                <ag-input-text-field ref="eAutocompleteInput"></ag-input-text-field>
            </div>`),this.isListOpen=!1,this.lastPosition=0,this.valid=!0}postConstruct(){this.eAutocompleteInput.onValueChange(e=>this.onValueChanged(e)),this.eAutocompleteInput.getInputElement().setAttribute("autocomplete","off"),this.addGuiEventListener("keydown",this.onKeyDown.bind(this)),this.addGuiEventListener("click",this.updatePositionAndList.bind(this)),this.addDestroyFunc(()=>{this.destroyBean(this.autocompleteList)}),this.addGuiEventListener("focusout",()=>this.onFocusOut())}onValueChanged(e){let i=go(e);this.updateValue(i),this.updateAutocompleteList(i)}updateValue(e){this.updateLastPosition(),this.dispatchEvent({type:td.EVENT_VALUE_CHANGED,value:e}),this.validate(e)}updateAutocompleteList(e){var i,o,r,n;let s=(o=(i=this.listGenerator)==null?void 0:i.call(this,e,this.lastPosition))!=null?o:{enabled:!1};if((!s.type||s.type!==((r=this.autocompleteListParams)==null?void 0:r.type))&&this.isListOpen&&this.closeList(),this.autocompleteListParams=s,(n=this.autocompleteListParams)!=null&&n.enabled){this.isListOpen||this.openList();let{searchString:a}=this.autocompleteListParams;this.autocompleteList.setSearch(a??"")}else this.isListOpen&&this.closeList()}onKeyDown(e){let i=e.key;switch(this.updateLastPosition(),i){case S.ENTER:this.onEnterKeyDown(e);break;case S.TAB:this.onTabKeyDown(e);break;case S.DOWN:case S.UP:this.onUpDownKeyDown(e,i);break;case S.LEFT:case S.RIGHT:case S.PAGE_HOME:case S.PAGE_END:setTimeout(()=>{this.updatePositionAndList()});break;case S.ESCAPE:this.onEscapeKeyDown(e);break;case S.SPACE:e.ctrlKey&&!this.isListOpen&&(e.preventDefault(),this.forceOpenList());break}}confirmSelection(){var e;let i=(e=this.autocompleteList)==null?void 0:e.getSelectedValue();i&&(this.closeList(),this.dispatchEvent({type:td.EVENT_OPTION_SELECTED,value:this.getValue(),position:this.lastPosition,updateEntry:i,autocompleteType:this.autocompleteListParams.type}))}onTabKeyDown(e){this.isListOpen&&(e.preventDefault(),e.stopPropagation(),this.confirmSelection())}onEnterKeyDown(e){e.preventDefault(),this.isListOpen?this.confirmSelection():this.onCompleted()}onUpDownKeyDown(e,i){var o;e.preventDefault(),this.isListOpen?(o=this.autocompleteList)==null||o.onNavigationKeyDown(e,i):this.forceOpenList()}onEscapeKeyDown(e){this.isListOpen&&(e.preventDefault(),e.stopPropagation(),this.closeList(),this.setCaret(this.lastPosition,!0))}onFocusOut(){this.isListOpen&&this.closeList()}updatePositionAndList(){var e;this.updateLastPosition(),this.updateAutocompleteList((e=this.eAutocompleteInput.getValue())!=null?e:null)}setCaret(e,i){let o=this.gos.getDocument(),r=this.gos.getActiveDomElement();i&&(!r||r===o.body)&&this.eAutocompleteInput.getFocusableElement().focus();let n=this.eAutocompleteInput.getInputElement();n.setSelectionRange(e,e),e===n.value.length&&(n.scrollLeft=n.scrollWidth)}forceOpenList(){this.onValueChanged(this.eAutocompleteInput.getValue())}updateLastPosition(){var e;this.lastPosition=(e=this.eAutocompleteInput.getInputElement().selectionStart)!=null?e:0}validate(e){var i;this.validator&&(this.validationMessage=this.validator(e),this.eAutocompleteInput.getInputElement().setCustomValidity((i=this.validationMessage)!=null?i:""),this.valid=!this.validationMessage,this.dispatchEvent({type:td.EVENT_VALID_CHANGED,isValid:this.valid,validationMessage:this.validationMessage}))}openList(){this.isListOpen=!0,this.autocompleteList=this.createBean(new Lk({autocompleteEntries:this.autocompleteListParams.entries,onConfirmed:()=>this.confirmSelection(),forceLastSelection:this.forceLastSelection}));let e=this.autocompleteList.getGui(),i={ePopup:e,type:"autocomplete",eventSource:this.getGui(),position:"under",alignSide:this.gos.get("enableRtl")?"right":"left",keepWithinBounds:!0},o=this.popupService.addPopup({eChild:e,anchorToElement:this.getGui(),positionCallback:()=>this.popupService.positionPopupByComponent(i),ariaLabel:this.listAriaLabel});this.hidePopup=o.hideFunc,this.autocompleteList.afterGuiAttached()}closeList(){this.isListOpen=!1,this.hidePopup(),this.destroyBean(this.autocompleteList),this.autocompleteList=null}onCompleted(){this.isListOpen&&this.closeList(),this.dispatchEvent({type:td.EVENT_VALUE_CONFIRMED,value:this.getValue(),isValid:this.isValid()})}getValue(){return go(this.eAutocompleteInput.getValue())}setInputPlaceholder(e){return this.eAutocompleteInput.setInputPlaceholder(e),this}setInputAriaLabel(e){return this.eAutocompleteInput.setInputAriaLabel(e),this}setListAriaLabel(e){return this.listAriaLabel=e,this}setListGenerator(e){return this.listGenerator=e,this}setValidator(e){return this.validator=e,this}isValid(){return this.valid}setValue(e){let{value:i,position:o,silent:r,updateListOnlyIfOpen:n,restoreFocus:s}=e;this.eAutocompleteInput.setValue(i,!0),this.setCaret(o??this.lastPosition,s),r||this.updateValue(i),(!n||this.isListOpen)&&this.updateAutocompleteList(i)}setForceLastSelection(e){return this.forceLastSelection=e,this}setInputDisabled(e){return this.eAutocompleteInput.setDisabled(e),this}};kr.EVENT_VALUE_CHANGED="eventValueChanged";kr.EVENT_VALUE_CONFIRMED="eventValueConfirmed";kr.EVENT_OPTION_SELECTED="eventOptionSelected";kr.EVENT_VALID_CHANGED="eventValidChanged";g([v("popupService")],kr.prototype,"popupService",2);g([k("eAutocompleteInput")],kr.prototype,"eAutocompleteInput",2);g([I],kr.prototype,"postConstruct",1);var Nk=kr,Lr=class Ku extends J{constructor(e,i,o,r){super(),this.dragSourceDropTarget=e,this.ghost=i,this.horizontal=o,this.template=r}init(){var e;this.setTemplate((e=this.template)!=null?e:Ku.TEMPLATE);let i=this.getGui();this.addElementClasses(i),this.addElementClasses(this.eDragHandle,"drag-handle"),this.addElementClasses(this.eText,"text"),this.addElementClasses(this.eButton,"button"),this.eDragHandle.appendChild(qe("columnDrag",this.gos)),this.eButton.appendChild(qe("cancel",this.gos)),this.setupComponents(),!this.ghost&&this.isDraggable()&&this.addDragSource(),this.setupAria(),this.setupTooltip(),this.activateTabIndex(),this.refreshDraggable()}isDraggable(){return!0}refreshDraggable(){this.eDragHandle.classList.toggle("ag-column-select-column-readonly",!this.isDraggable())}setupAria(){let e=this.localeService.getLocaleTextFunc(),i=[this.getAriaDisplayName()];this.addAdditionalAriaInstructions(i,e),yi(this.getGui(),i.join(". "))}addAdditionalAriaInstructions(e,i){if(this.isRemovable()){let o=i("ariaDropZoneColumnComponentDescription","Press DELETE to remove");e.push(o)}}setupTooltip(){let e=()=>{let i=this.getTooltip();this.setTooltip({newTooltipText:i})};e(),this.addManagedListener(this.eventService,f.EVENT_NEW_COLUMNS_LOADED,e)}getDragSourceId(){}getDefaultIconName(){return te.ICON_NOT_ALLOWED}addDragSource(){let{dragAndDropService:e,eDragHandle:i}=this,o=this.createGetDragItem(),r=this.getDefaultIconName(),n={type:this.getDragSourceType(),sourceId:this.getDragSourceId(),eElement:i,getDefaultIconName:()=>r,getDragItem:o,dragItemName:this.getDisplayName()};e.addDragSource(n,!0),this.addDestroyFunc(()=>e.removeDragSource(n))}setupComponents(){this.setTextValue(),this.setupRemove(),this.ghost&&this.addCssClass("ag-column-drop-cell-ghost")}isRemovable(){return!0}refreshRemove(){me(this.eButton,this.isRemovable())}setupRemove(){this.refreshRemove();let e={type:Ku.EVENT_COLUMN_REMOVE};this.addGuiEventListener("keydown",o=>this.onKeyDown(o)),this.addManagedListener(this.eButton,"click",o=>{this.dispatchEvent(e),o.stopPropagation()});let i=new St(this.eButton);this.addManagedListener(i,St.EVENT_TAP,()=>{this.dispatchEvent(e)}),this.addDestroyFunc(i.destroy.bind(i))}onKeyDown(e){e.key===S.DELETE&&this.isRemovable()&&(e.preventDefault(),this.dispatchEvent({type:Ku.EVENT_COLUMN_REMOVE}))}getDisplayValue(){return this.getDisplayName()}setTextValue(){let e=this.getDisplayValue(),i=rt(e);this.eText.innerHTML=i}addElementClasses(e,i){i=i?`-${i}`:"";let o=this.horizontal?"horizontal":"vertical";e.classList.add(`ag-column-drop-cell${i}`,`ag-column-drop-${o}-cell${i}`)}destroy(){super.destroy(),this.dragSourceDropTarget=null}};Lr.EVENT_COLUMN_REMOVE="columnRemove";Lr.TEMPLATE=`<span role="option">
          <span ref="eDragHandle" class="ag-drag-handle ag-column-drop-cell-drag-handle" role="presentation"></span>
          <span ref="eText" class="ag-column-drop-cell-text" aria-hidden="true"></span>
          <span ref="eButton" class="ag-column-drop-cell-button" role="presentation"></span>
        </span>`;g([v("dragAndDropService")],Lr.prototype,"dragAndDropService",2);g([k("eText")],Lr.prototype,"eText",2);g([k("eDragHandle")],Lr.prototype,"eDragHandle",2);g([k("eButton")],Lr.prototype,"eButton",2);g([I],Lr.prototype,"init",1);var zk=Lr,$d=class co extends J{constructor(e){super('<div class="ag-unselectable" role="presentation"></div>'),this.horizontal=e,this.state=co.STATE_NOT_DRAGGING,this.guiDestroyFunctions=[],this.childPillComponents=[],this.resizeEnabled=!1,this.addElementClasses(this.getGui()),this.ePillDropList=document.createElement("div"),this.addElementClasses(this.ePillDropList,"list"),Xe(this.ePillDropList,"listbox")}isHorizontal(){return this.horizontal}toggleResizable(e){this.positionableFeature.setResizable(e?{bottom:!0}:!1),this.resizeEnabled=e}isSourceEventFromTarget(e){let{dropZoneTarget:i,dragSource:o}=e;return i.contains(o.eElement)}destroy(){this.destroyGui(),super.destroy()}destroyGui(){this.guiDestroyFunctions.forEach(e=>e()),this.guiDestroyFunctions.length=0,this.childPillComponents.length=0,Je(this.getGui()),Je(this.ePillDropList)}init(e){this.params=e??{},this.createManagedBean(new Fr(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)})),this.setupDropTarget(),this.positionableFeature=new ha(this.getGui(),{minHeight:100}),this.createManagedBean(this.positionableFeature),this.refreshGui(),yi(this.ePillDropList,this.getAriaLabel())}handleKeyDown(e){let i=!this.horizontal,o=e.key===S.DOWN,r=e.key===S.UP;if(!i){let s=this.gos.get("enableRtl");o=!s&&e.key===S.RIGHT||s&&e.key===S.LEFT,r=!s&&e.key===S.LEFT||s&&e.key===S.RIGHT}if(!o&&!r)return;let n=this.focusService.findNextFocusableElement(this.getFocusableElement(),!1,r);n&&(e.preventDefault(),n.focus())}addElementClasses(e,i){i=i?`-${i}`:"";let o=this.horizontal?"horizontal":"vertical";e.classList.add(`ag-column-drop${i}`,`ag-column-drop-${o}${i}`)}setupDropTarget(){this.dropTarget={getContainer:this.getGui.bind(this),getIconName:this.getIconName.bind(this),onDragging:this.onDragging.bind(this),onDragEnter:this.onDragEnter.bind(this),onDragLeave:this.onDragLeave.bind(this),onDragStop:this.onDragStop.bind(this),isInterestedIn:this.isInterestedIn.bind(this)},this.dragAndDropService.addDropTarget(this.dropTarget)}minimumAllowedNewInsertIndex(){return 0}checkInsertIndex(e){let i=this.getNewInsertIndex(e);if(i<0)return!1;let o=this.minimumAllowedNewInsertIndex(),r=Math.max(o,i),n=r!==this.insertIndex;return n&&(this.insertIndex=r),n}getNewInsertIndex(e){let i=e.event,o=this.horizontal?i.clientX:i.clientY,r=this.childPillComponents.map(s=>s.getGui().getBoundingClientRect()),n=r.findIndex(s=>this.horizontal?s.right>o&&s.left<o:s.top<o&&s.bottom>o);if(n===-1){let s=this.gos.get("enableRtl");return r.every(d=>o>(this.horizontal?d.right:d.bottom))?s&&this.horizontal?0:this.childPillComponents.length:r.every(d=>o<(this.horizontal?d.left:d.top))?s&&this.horizontal?this.childPillComponents.length:0:this.insertIndex}return this.insertIndex<=n?n+1:n}checkDragStartedBySelf(e){this.state===co.STATE_NOT_DRAGGING&&(this.state=co.STATE_REARRANGE_ITEMS,this.potentialDndItems=this.getItems(e.dragSource.getDragItem()),this.refreshGui(),this.checkInsertIndex(e),this.refreshGui())}onDragging(e){this.checkDragStartedBySelf(e),this.checkInsertIndex(e)&&this.refreshGui()}handleDragEnterEnd(e){}onDragEnter(e){let i=this.getItems(e.dragSource.getDragItem());this.state=co.STATE_NEW_ITEMS_IN;let o=i.filter(n=>this.isItemDroppable(n,e)),r=o.every(n=>this.childPillComponents.map(s=>s.getItem()).indexOf(n)!==-1);if(o.length!==0){if(this.potentialDndItems=o,r){this.state=co.STATE_NOT_DRAGGING;return}this.handleDragEnterEnd(e),this.checkInsertIndex(e),this.refreshGui()}}isPotentialDndItems(){return nx(this.potentialDndItems)}handleDragLeaveEnd(e){}onDragLeave(e){if(this.state===co.STATE_REARRANGE_ITEMS){let i=this.getItems(e.dragSource.getDragItem());this.removeItems(i)}this.isPotentialDndItems()&&(this.handleDragLeaveEnd(e),this.potentialDndItems=[],this.refreshGui()),this.state=co.STATE_NOT_DRAGGING}refreshOnDragStop(){return!0}onDragStop(){if(this.isPotentialDndItems()){let e=!1;this.state===co.STATE_NEW_ITEMS_IN?(this.addItems(this.potentialDndItems),e=!0):e=this.rearrangeItems(this.potentialDndItems),this.potentialDndItems=[],(this.refreshOnDragStop()||!e)&&this.refreshGui()}this.state=co.STATE_NOT_DRAGGING}removeItems(e){let i=this.getExistingItems().filter(o=>!wi(e,o));this.updateItems(i)}addItems(e){if(!e)return;let i=this.getExistingItems().slice(),o=e.filter(r=>i.indexOf(r)<0);om(i,o,this.insertIndex),this.updateItems(i)}addItem(e){this.insertIndex=this.getExistingItems().length,this.addItems([e]),this.refreshGui()}rearrangeItems(e){let i=this.getNonGhostItems().slice();return om(i,e,this.insertIndex),ho(i,this.getExistingItems())?!1:(this.updateItems(i),!0)}refreshGui(){let e=this.ePillDropList.scrollTop,i=this.resizeEnabled,o=this.getFocusedItem(),r=this.focusService.findNextFocusableElement();r||(r=this.focusService.findNextFocusableElement(void 0,!1,!0)),this.toggleResizable(!1),this.destroyGui(),this.addIconAndTitleToGui(),this.addEmptyMessageToGui(),this.addItemsToGui(),this.isHorizontal()||(this.ePillDropList.scrollTop=e),i&&this.toggleResizable(i),this.focusService.isKeyboardMode()&&this.restoreFocus(o,r)}getFocusedItem(){let e=this.getGui(),i=this.gos.getActiveDomElement();return e.contains(i)?Array.from(e.querySelectorAll(".ag-column-drop-cell")).indexOf(i):-1}restoreFocus(e,i){let o=this.getGui(),r=Array.from(o.querySelectorAll(".ag-column-drop-cell"));if(e===-1)return;r.length===0&&i.focus();let n=Math.min(r.length-1,e),s=r[n];s&&s.focus()}focusList(e){let i=e?this.childPillComponents.length-1:0;this.restoreFocus(i,this.getFocusableElement())}getNonGhostItems(){let e=this.getExistingItems();return this.isPotentialDndItems()?e.filter(i=>!wi(this.potentialDndItems,i)):e}addItemsToGui(){let i=this.getNonGhostItems().map(o=>this.createItemComponent(o,!1));if(this.isPotentialDndItems()){let o=this.potentialDndItems.map(r=>this.createItemComponent(r,!0));this.insertIndex>=i.length?i.push(...o):i.splice(this.insertIndex,0,...o)}this.appendChild(this.ePillDropList),i.forEach((o,r)=>{r>0&&this.addArrow(this.ePillDropList),this.ePillDropList.appendChild(o.getGui())}),this.addAriaLabelsToComponents()}addAriaLabelsToComponents(){this.childPillComponents.forEach((e,i)=>{let o=e.getGui();yh(o,i+1),wh(o,this.childPillComponents.length)})}createItemComponent(e,i){let o=this.createPillComponent(e,this.dropTarget,i,this.horizontal);return o.addEventListener(zk.EVENT_COLUMN_REMOVE,this.removeItems.bind(this,[e])),this.context.createBean(o),this.guiDestroyFunctions.push(()=>this.destroyBean(o)),i||this.childPillComponents.push(o),o}addIconAndTitleToGui(){let{title:e,icon:i}=this.params;if(!e||!i)return;let o=document.createElement("div");if(Od(o,!0),this.addElementClasses(o,"title-bar"),this.addElementClasses(i,"icon"),this.addOrRemoveCssClass("ag-column-drop-empty",this.isExistingItemsEmpty()),o.appendChild(i),!this.horizontal){let r=document.createElement("span");this.addElementClasses(r,"title"),r.innerHTML=e,o.appendChild(r)}this.appendChild(o)}isExistingItemsEmpty(){return this.getExistingItems().length===0}addEmptyMessageToGui(){let{emptyMessage:e}=this.params;if(!e||!this.isExistingItemsEmpty()||this.isPotentialDndItems())return;let i=document.createElement("span");i.innerHTML=e,this.addElementClasses(i,"empty-message"),this.ePillDropList.appendChild(i)}addArrow(e){if(this.horizontal){let i=this.gos.get("enableRtl"),o=qe(i?"smallLeft":"smallRight",this.gos);this.addElementClasses(o,"cell-separator"),e.appendChild(o)}}};$d.STATE_NOT_DRAGGING="notDragging";$d.STATE_NEW_ITEMS_IN="newItemsIn";$d.STATE_REARRANGE_ITEMS="rearrangeItems";g([v("focusService")],$d.prototype,"focusService",2);g([v("dragAndDropService")],$d.prototype,"dragAndDropService",2);var Gk=["touchstart","touchend","touchmove","touchcancel"],Dv=class{constructor(t="javascript"){this.frameworkName=t,this.renderingEngine="vanilla",this.wrapIncoming=e=>e(),this.wrapOutgoing=e=>e()}setInterval(t,e){return new ri(i=>{i(window.setInterval(t,e))})}addEventListener(t,e,i,o){let r=wi(Gk,e);t.addEventListener(e,i,{capture:!!o,passive:r})}get shouldWrapOutgoing(){return!1}frameworkComponent(t){return null}isFrameworkComponent(t){return!1}getDocLink(t){return`https://www.ag-grid.com/${this.frameworkName==="solid"?"react":this.frameworkName}-data-grid${t?`/${t}`:""}`}},Tr=class extends A{getNextCellToFocus(t,e,i=!1){return i?this.getNextCellToFocusWithCtrlPressed(t,e):this.getNextCellToFocusWithoutCtrlPressed(t,e)}getNextCellToFocusWithCtrlPressed(t,e){let i=t===S.UP,o=t===S.DOWN,r=t===S.LEFT,n,s;if(i||o)s=i?this.paginationProxy.getPageFirstRow():this.paginationProxy.getPageLastRow(),n=e.column;else{let a=this.columnModel.getAllDisplayedColumns(),l=this.gos.get("enableRtl");s=e.rowIndex,n=r!==l?a[0]:be(a)}return{rowIndex:s,rowPinned:null,column:n}}getNextCellToFocusWithoutCtrlPressed(t,e){let i=e,o=!1;for(;!o;){switch(t){case S.UP:i=this.getCellAbove(i);break;case S.DOWN:i=this.getCellBelow(i);break;case S.RIGHT:this.gos.get("enableRtl")?i=this.getCellToLeft(i):i=this.getCellToRight(i);break;case S.LEFT:this.gos.get("enableRtl")?i=this.getCellToRight(i):i=this.getCellToLeft(i);break;default:i=null,console.warn("AG Grid: unknown key for navigation "+t);break}i?o=this.isCellGoodToFocusOn(i):o=!0}return i}isCellGoodToFocusOn(t){let e=t.column,i;switch(t.rowPinned){case"top":i=this.pinnedRowModel.getPinnedTopRow(t.rowIndex);break;case"bottom":i=this.pinnedRowModel.getPinnedBottomRow(t.rowIndex);break;default:i=this.rowModel.getRow(t.rowIndex);break}return i?!e.isSuppressNavigable(i):!1}getCellToLeft(t){if(!t)return null;let e=this.columnModel.getDisplayedColBefore(t.column);return e?{rowIndex:t.rowIndex,column:e,rowPinned:t.rowPinned}:null}getCellToRight(t){if(!t)return null;let e=this.columnModel.getDisplayedColAfter(t.column);return e?{rowIndex:t.rowIndex,column:e,rowPinned:t.rowPinned}:null}getRowBelow(t){let e=t.rowIndex,i=t.rowPinned;if(this.isLastRowInContainer(t))switch(i){case"bottom":return null;case"top":return this.rowModel.isRowsToRender()?{rowIndex:this.paginationProxy.getPageFirstRow(),rowPinned:null}:this.pinnedRowModel.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null;default:return this.pinnedRowModel.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null}let o=this.rowModel.getRow(t.rowIndex),r=this.getNextStickyPosition(o);return r||{rowIndex:e+1,rowPinned:i}}getNextStickyPosition(t,e){if(!this.gos.isGroupRowsSticky()||!t||!t.sticky)return;let i=this.rowRenderer.getStickyTopRowCtrls().some(a=>a.getRowNode().rowIndex===t.rowIndex),o=[];i?o=[...this.rowRenderer.getStickyTopRowCtrls()].sort((a,l)=>a.getRowNode().rowIndex-l.getRowNode().rowIndex):o=[...this.rowRenderer.getStickyBottomRowCtrls()].sort((a,l)=>l.getRowNode().rowIndex-a.getRowNode().rowIndex);let r=e?-1:1,n=o.findIndex(a=>a.getRowNode().rowIndex===t.rowIndex),s=o[n+r];if(s)return{rowIndex:s.getRowNode().rowIndex,rowPinned:null}}getCellBelow(t){if(!t)return null;let e=this.getRowBelow(t);return e?{rowIndex:e.rowIndex,column:t.column,rowPinned:e.rowPinned}:null}isLastRowInContainer(t){let e=t.rowPinned,i=t.rowIndex;return e==="top"?this.pinnedRowModel.getPinnedTopRowData().length-1<=i:e==="bottom"?this.pinnedRowModel.getPinnedBottomRowData().length-1<=i:this.paginationProxy.getPageLastRow()<=i}getRowAbove(t){let e=t.rowIndex,i=t.rowPinned;if(i?e===0:e===this.paginationProxy.getPageFirstRow())return i==="top"?null:i?this.rowModel.isRowsToRender()?this.getLastBodyCell():this.pinnedRowModel.isRowsToRender("top")?this.getLastFloatingTopRow():null:this.pinnedRowModel.isRowsToRender("top")?this.getLastFloatingTopRow():null;let r=this.rowModel.getRow(t.rowIndex),n=this.getNextStickyPosition(r,!0);return n||{rowIndex:e-1,rowPinned:i}}getCellAbove(t){if(!t)return null;let e=this.getRowAbove({rowIndex:t.rowIndex,rowPinned:t.rowPinned});return e?{rowIndex:e.rowIndex,column:t.column,rowPinned:e.rowPinned}:null}getLastBodyCell(){return{rowIndex:this.paginationProxy.getPageLastRow(),rowPinned:null}}getLastFloatingTopRow(){return{rowIndex:this.pinnedRowModel.getPinnedTopRowData().length-1,rowPinned:"top"}}getNextTabbedCell(t,e){return e?this.getNextTabbedCellBackwards(t):this.getNextTabbedCellForwards(t)}getNextTabbedCellForwards(t){let e=this.columnModel.getAllDisplayedColumns(),i=t.rowIndex,o=t.rowPinned,r=this.columnModel.getDisplayedColAfter(t.column);if(!r){r=e[0];let n=this.getRowBelow(t);if(X(n)||!n.rowPinned&&!this.paginationProxy.isRowInPage(n))return null;i=n?n.rowIndex:null,o=n?n.rowPinned:null}return{rowIndex:i,column:r,rowPinned:o}}getNextTabbedCellBackwards(t){let e=this.columnModel.getAllDisplayedColumns(),i=t.rowIndex,o=t.rowPinned,r=this.columnModel.getDisplayedColBefore(t.column);if(!r){r=be(e);let n=this.getRowAbove({rowIndex:t.rowIndex,rowPinned:t.rowPinned});if(X(n)||!n.rowPinned&&!this.paginationProxy.isRowInPage(n))return null;i=n?n.rowIndex:null,o=n?n.rowPinned:null}return{rowIndex:i,column:r,rowPinned:o}}};g([v("columnModel")],Tr.prototype,"columnModel",2);g([v("rowModel")],Tr.prototype,"rowModel",2);g([v("rowRenderer")],Tr.prototype,"rowRenderer",2);g([v("pinnedRowModel")],Tr.prototype,"pinnedRowModel",2);g([v("paginationProxy")],Tr.prototype,"paginationProxy",2);Tr=g([V("cellNavigationService")],Tr);var An=class extends A{constructor(){super(...arguments),this.consuming=!1}setBeans(t){this.logger=t.create("AlignedGridsService")}getAlignedGridApis(){var t;let e=(t=this.gos.get("alignedGrids"))!=null?t:[],i=typeof e=="function";typeof e=="function"&&(e=e());let o=()=>`See ${this.getFrameworkOverrides().getDocLink("aligned-grids")}`;return e.map(n=>{var s;if(!n){uo("alignedGrids contains an undefined option."),i||uo(`You may want to configure via a callback to avoid setup race conditions:
                     "alignedGrids: () => [linkedGrid]"`),uo(o());return}if(n instanceof ge)return n;let a=n;return"current"in a?(s=a.current)==null?void 0:s.api:(a.api||uo(`alignedGrids - No api found on the linked grid. If you are passing gridOptions to alignedGrids since v31 this is no longer valid. ${o()}`),a.api)}).filter(n=>!!n&&!n.isDestroyed())}init(){this.addManagedListener(this.eventService,f.EVENT_COLUMN_MOVED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,f.EVENT_COLUMN_VISIBLE,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,f.EVENT_COLUMN_PINNED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,f.EVENT_COLUMN_GROUP_OPENED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,f.EVENT_COLUMN_RESIZED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,f.EVENT_BODY_SCROLL,this.fireScrollEvent.bind(this))}fireEvent(t){this.consuming||this.getAlignedGridApis().forEach(e=>{if(e.isDestroyed())return;let i=e.__getAlignedGridService();t(i)})}onEvent(t){this.consuming=!0,t(),this.consuming=!1}fireColumnEvent(t){this.fireEvent(e=>{e.onColumnEvent(t)})}fireScrollEvent(t){t.direction==="horizontal"&&this.fireEvent(e=>{e.onScrollEvent(t)})}onScrollEvent(t){this.onEvent(()=>{this.ctrlsService.getGridBodyCtrl().getScrollFeature().setHorizontalScrollPosition(t.left,!0)})}getMasterColumns(t){let e=[];return t.columns?t.columns.forEach(i=>{e.push(i)}):t.column&&e.push(t.column),e}getColumnIds(t){let e=[];return t.columns?t.columns.forEach(i=>{e.push(i.getColId())}):t.column&&e.push(t.column.getColId()),e}onColumnEvent(t){this.onEvent(()=>{switch(t.type){case f.EVENT_COLUMN_MOVED:case f.EVENT_COLUMN_VISIBLE:case f.EVENT_COLUMN_PINNED:case f.EVENT_COLUMN_RESIZED:let e=t;this.processColumnEvent(e);break;case f.EVENT_COLUMN_GROUP_OPENED:let i=t;this.processGroupOpenedEvent(i);break;case f.EVENT_COLUMN_PIVOT_CHANGED:console.warn("AG Grid: pivoting is not supported with aligned grids. You can only use one of these features at a time in a grid.");break}})}processGroupOpenedEvent(t){t.columnGroups.forEach(e=>{let i=null;if(e){let o=e.getGroupId();i=this.columnModel.getProvidedColumnGroup(o)}e&&!i||(this.logger.log("onColumnEvent-> processing "+t+" expanded = "+e.isExpanded()),this.columnModel.setColumnGroupOpened(i,e.isExpanded(),"alignedGridChanged"))})}processColumnEvent(t){var e;let i=t.column,o=null;if(i&&(o=this.columnModel.getPrimaryColumn(i.getColId())),i&&!o)return;let r=this.getMasterColumns(t);switch(t.type){case f.EVENT_COLUMN_MOVED:{let d=t,u=t.api.getColumnState().map(h=>({colId:h.colId}));this.columnModel.applyColumnState({state:u,applyOrder:!0},"alignedGridChanged"),this.logger.log(`onColumnEvent-> processing ${t.type} toIndex = ${d.toIndex}`)}break;case f.EVENT_COLUMN_VISIBLE:{let d=t,u=t.api.getColumnState().map(h=>({colId:h.colId,hide:h.hide}));this.columnModel.applyColumnState({state:u},"alignedGridChanged"),this.logger.log(`onColumnEvent-> processing ${t.type} visible = ${d.visible}`)}break;case f.EVENT_COLUMN_PINNED:{let d=t,u=t.api.getColumnState().map(h=>({colId:h.colId,pinned:h.pinned}));this.columnModel.applyColumnState({state:u},"alignedGridChanged"),this.logger.log(`onColumnEvent-> processing ${t.type} pinned = ${d.pinned}`)}break;case f.EVENT_COLUMN_RESIZED:let a=t,l={};r.forEach(d=>{this.logger.log(`onColumnEvent-> processing ${t.type} actualWidth = ${d.getActualWidth()}`),l[d.getId()]={key:d.getColId(),newWidth:d.getActualWidth()}}),(e=a.flexColumns)==null||e.forEach(d=>{l[d.getId()]&&delete l[d.getId()]}),this.columnModel.setColumnWidths(Object.values(l),!1,a.finished,"alignedGridChanged");break}let s=this.ctrlsService.getGridBodyCtrl().isVerticalScrollShowing();this.getAlignedGridApis().forEach(a=>{a.setGridOption("alwaysShowVerticalScroll",s)})}};g([v("columnModel")],An.prototype,"columnModel",2);g([v("ctrlsService")],An.prototype,"ctrlsService",2);g([ji(0,Ti("loggerFactory"))],An.prototype,"setBeans",1);g([I],An.prototype,"init",1);An=g([V("alignedGridsService")],An);var In=class extends A{constructor(){super(...arguments),this.selectedNodes=new Map,this.lastRowNode=null}init(){this.rowSelection=this.gos.get("rowSelection"),this.groupSelectsChildren=this.gos.get("groupSelectsChildren"),this.addManagedPropertyListeners(["groupSelectsChildren","rowSelection"],()=>{this.groupSelectsChildren=this.gos.get("groupSelectsChildren"),this.rowSelection=this.gos.get("rowSelection"),this.deselectAllRowNodes({source:"api"})}),this.addManagedListener(this.eventService,f.EVENT_ROW_SELECTED,this.onRowSelected.bind(this))}destroy(){super.destroy(),this.resetNodes(),this.lastRowNode=null}isMultiselect(){return this.rowSelection==="multiple"}setNodesSelected(t){var e;let{newValue:i,clearSelection:o,suppressFinishActions:r,rangeSelect:n,nodes:s,event:a,source:l="api"}=t;if(s.length===0)return 0;if(s.length>1&&!this.isMultiselect())return console.warn("AG Grid: cannot multi select while rowSelection='single'"),0;let d=this.groupSelectsChildren&&t.groupSelectsFiltered===!0,c=s.map(h=>h.footer?h.sibling:h);if(n){if(s.length>1)return console.warn("AG Grid: cannot range select while selecting multiple rows"),0;let h=null;if(l==="checkboxSelected"&&i===!1&&this.lastRowNode&&(this.lastRowNode.id?h=this.lastRowNode:this.lastRowNode=null),h==null&&(h=this.getLastSelectedNode()),h){let p=c[0];if(p!==h&&this.isMultiselect())return this.selectRange(p,h,i,l)}}this.lastRowNode=i?null:c[0];let u=0;for(let h=0;h<c.length;h++){let p=c[h];d&&p.group||p.selectThisNode(i,a,l)&&u++,this.groupSelectsChildren&&((e=p.childrenAfterGroup)!=null&&e.length)&&(u+=this.selectChildren(p,i,d,l))}if(!r&&(i&&(o||!this.isMultiselect())&&(u+=this.clearOtherNodes(c[0],l)),u>0)){this.updateGroupsFromChildrenSelections(l);let p={type:f.EVENT_SELECTION_CHANGED,source:l};this.eventService.dispatchEvent(p)}return u}selectRange(t,e,i=!0,o){let r=this.rowModel.getNodesInRangeForSelection(t,e),n=0;r.forEach(a=>{if(a.group&&this.groupSelectsChildren)return;a.selectThisNode(i,void 0,o)&&n++}),this.updateGroupsFromChildrenSelections(o);let s={type:f.EVENT_SELECTION_CHANGED,source:o};return this.eventService.dispatchEvent(s),n}selectChildren(t,e,i,o){let r=i?t.childrenAfterAggFilter:t.childrenAfterGroup;return X(r)?0:this.setNodesSelected({newValue:e,clearSelection:!1,suppressFinishActions:!0,groupSelectsFiltered:i,source:o,nodes:r})}getLastSelectedNode(){let t=Array.from(this.selectedNodes.keys());if(t.length==0)return null;let e=this.selectedNodes.get(be(t));return e||null}getSelectedNodes(){let t=[];return this.selectedNodes.forEach(e=>{e&&t.push(e)}),t}getSelectedRows(){let t=[];return this.selectedNodes.forEach(e=>{e&&e.data&&t.push(e.data)}),t}getSelectionCount(){return this.selectedNodes.size}filterFromSelection(t){let e=new Map;this.selectedNodes.forEach((i,o)=>{i&&t(i)&&e.set(o,i)}),this.selectedNodes=e}updateGroupsFromChildrenSelections(t,e){if(!this.groupSelectsChildren||this.rowModel.getType()!=="clientSide")return!1;let o=this.rowModel.getRootNode();e||(e=new Wh(!0,o),e.setInactive());let r=!1;return e.forEachChangedNodeDepthFirst(n=>{if(n!==o){let s=n.calculateSelectedFromChildren();r=n.selectThisNode(s===null?!1:s,void 0,t)||r}}),r}clearOtherNodes(t,e){let i=new Map,o=0;return this.selectedNodes.forEach(r=>{if(r&&r.id!==t.id){let n=this.selectedNodes.get(r.id);o+=n.setSelectedParams({newValue:!1,clearSelection:!1,suppressFinishActions:!0,source:e}),this.groupSelectsChildren&&r.parent&&i.set(r.parent.id,r.parent)}}),i.forEach(r=>{let n=r.calculateSelectedFromChildren();r.selectThisNode(n===null?!1:n,void 0,e)}),o}onRowSelected(t){let e=t.node;this.groupSelectsChildren&&e.group||(e.isSelected()?this.selectedNodes.set(e.id,e):this.selectedNodes.delete(e.id))}syncInRowNode(t,e){this.syncInOldRowNode(t,e),this.syncInNewRowNode(t)}syncInOldRowNode(t,e){if(T(e)&&t.id!==e.id&&e){let o=e.id;this.selectedNodes.get(o)==t&&this.selectedNodes.set(e.id,e)}}syncInNewRowNode(t){this.selectedNodes.has(t.id)?(t.setSelectedInitialValue(!0),this.selectedNodes.set(t.id,t)):t.setSelectedInitialValue(!1)}reset(t){let e=this.getSelectionCount();if(this.resetNodes(),e){let i={type:f.EVENT_SELECTION_CHANGED,source:t};this.eventService.dispatchEvent(i)}}resetNodes(){var t;(t=this.selectedNodes)==null||t.clear()}getBestCostNodeSelection(){if(this.rowModel.getType()!=="clientSide")return;let e=this.rowModel.getTopLevelNodes();if(e===null)return;let i=[];function o(r){for(let n=0,s=r.length;n<s;n++){let a=r[n];if(a.isSelected())i.push(a);else{let l=a;l.group&&l.children&&o(l.children)}}}return o(e),i}isEmpty(){let t=0;return this.selectedNodes.forEach(e=>{e&&t++}),t===0}deselectAllRowNodes(t){let e=a=>a.selectThisNode(!1,void 0,o),i=this.rowModel.getType()==="clientSide",{source:o,justFiltered:r,justCurrentPage:n}=t;if(n||r){if(!i){console.error("AG Grid: selecting just filtered only works when gridOptions.rowModelType='clientSide'");return}this.getNodesToSelect(r,n).forEach(e)}else this.selectedNodes.forEach(a=>{a&&e(a)}),this.reset(o);i&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(o);let s={type:f.EVENT_SELECTION_CHANGED,source:o};this.eventService.dispatchEvent(s)}getSelectedCounts(t,e){let i=0,o=0,r=n=>{this.groupSelectsChildren&&n.group||(n.isSelected()?i++:n.selectable&&o++)};return this.getNodesToSelect(t,e).forEach(r),{selectedCount:i,notSelectedCount:o}}getSelectAllState(t,e){let{selectedCount:i,notSelectedCount:o}=this.getSelectedCounts(t,e);return i===0&&o===0?!1:i>0&&o>0?null:i>0}hasNodesToSelect(t=!1,e=!1){return this.getNodesToSelect(t,e).filter(i=>i.selectable).length>0}getNodesToSelect(t=!1,e=!1){if(this.rowModel.getType()!=="clientSide")throw new Error(`selectAll only available when rowModelType='clientSide', ie not ${this.rowModel.getType()}`);let i=[];if(e)return this.paginationProxy.forEachNodeOnPage(r=>{if(!r.group){i.push(r);return}if(!r.expanded){let n=s=>{var a;i.push(s),(a=s.childrenAfterFilter)!=null&&a.length&&s.childrenAfterFilter.forEach(n)};n(r);return}this.groupSelectsChildren||i.push(r)}),i;let o=this.rowModel;return t?(o.forEachNodeAfterFilter(r=>{i.push(r)}),i):(o.forEachNode(r=>{i.push(r)}),i)}selectAllRowNodes(t){if(this.rowModel.getType()!=="clientSide")throw new Error(`selectAll only available when rowModelType='clientSide', ie not ${this.rowModel.getType()}`);let{source:e,justFiltered:i,justCurrentPage:o}=t,r=s=>s.selectThisNode(!0,void 0,e);this.getNodesToSelect(i,o).forEach(r),this.rowModel.getType()==="clientSide"&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(e);let n={type:f.EVENT_SELECTION_CHANGED,source:e};this.eventService.dispatchEvent(n)}getSelectionState(){let t=[];return this.selectedNodes.forEach(e=>{e?.id&&t.push(e.id)}),t.length?t:null}setSelectionState(t,e){if(!Array.isArray(t))return;let i=new Set(t),o=[];this.rowModel.forEachNode(r=>{i.has(r.id)&&o.push(r)}),this.setNodesSelected({newValue:!0,nodes:o,source:e})}};g([v("rowModel")],In.prototype,"rowModel",2);g([v("paginationProxy")],In.prototype,"paginationProxy",2);g([I],In.prototype,"init",1);In=g([V("selectionService")],In);var Pn=class{constructor(t){this.viaApi=(e,...i)=>(q(`Since v31, 'columnApi.${e}' is deprecated and moved to 'api.${e}'.`),this.api[e](...i)),this.api=t}sizeColumnsToFit(t){this.viaApi("sizeColumnsToFit",t)}setColumnGroupOpened(t,e){this.viaApi("setColumnGroupOpened",t,e)}getColumnGroup(t,e){return this.viaApi("getColumnGroup",t,e)}getProvidedColumnGroup(t){return this.viaApi("getProvidedColumnGroup",t)}getDisplayNameForColumn(t,e){return this.viaApi("getDisplayNameForColumn",t,e)}getDisplayNameForColumnGroup(t,e){return this.viaApi("getDisplayNameForColumnGroup",t,e)}getColumn(t){return this.viaApi("getColumn",t)}getColumns(){return this.viaApi("getColumns")}applyColumnState(t){return this.viaApi("applyColumnState",t)}getColumnState(){return this.viaApi("getColumnState")}resetColumnState(){this.viaApi("resetColumnState")}getColumnGroupState(){return this.viaApi("getColumnGroupState")}setColumnGroupState(t){this.viaApi("setColumnGroupState",t)}resetColumnGroupState(){this.viaApi("resetColumnGroupState")}isPinning(){return this.viaApi("isPinning")}isPinningLeft(){return this.viaApi("isPinningLeft")}isPinningRight(){return this.viaApi("isPinningRight")}getDisplayedColAfter(t){return this.viaApi("getDisplayedColAfter",t)}getDisplayedColBefore(t){return this.viaApi("getDisplayedColBefore",t)}setColumnVisible(t,e){this.viaApi("setColumnVisible",t,e)}setColumnsVisible(t,e){this.viaApi("setColumnsVisible",t,e)}setColumnPinned(t,e){this.viaApi("setColumnPinned",t,e)}setColumnsPinned(t,e){this.viaApi("setColumnsPinned",t,e)}getAllGridColumns(){return this.viaApi("getAllGridColumns")}getDisplayedLeftColumns(){return this.viaApi("getDisplayedLeftColumns")}getDisplayedCenterColumns(){return this.viaApi("getDisplayedCenterColumns")}getDisplayedRightColumns(){return this.viaApi("getDisplayedRightColumns")}getAllDisplayedColumns(){return this.viaApi("getAllDisplayedColumns")}getAllDisplayedVirtualColumns(){return this.viaApi("getAllDisplayedVirtualColumns")}moveColumn(t,e){this.viaApi("moveColumn",t,e)}moveColumnByIndex(t,e){this.viaApi("moveColumnByIndex",t,e)}moveColumns(t,e){this.viaApi("moveColumns",t,e)}moveRowGroupColumn(t,e){this.viaApi("moveRowGroupColumn",t,e)}setColumnAggFunc(t,e){this.viaApi("setColumnAggFunc",t,e)}setColumnWidth(t,e,i=!0,o){this.viaApi("setColumnWidth",t,e,i,o)}setColumnWidths(t,e=!0,i){this.viaApi("setColumnWidths",t,e,i)}setPivotMode(t){this.viaApi("setPivotMode",t)}isPivotMode(){return this.viaApi("isPivotMode")}getPivotResultColumn(t,e){return this.viaApi("getPivotResultColumn",t,e)}setValueColumns(t){this.viaApi("setValueColumns",t)}getValueColumns(){return this.viaApi("getValueColumns")}removeValueColumn(t){this.viaApi("removeValueColumn",t)}removeValueColumns(t){this.viaApi("removeValueColumns",t)}addValueColumn(t){this.viaApi("addValueColumn",t)}addValueColumns(t){this.viaApi("addValueColumns",t)}setRowGroupColumns(t){this.viaApi("setRowGroupColumns",t)}removeRowGroupColumn(t){this.viaApi("removeRowGroupColumn",t)}removeRowGroupColumns(t){this.viaApi("removeRowGroupColumns",t)}addRowGroupColumn(t){this.viaApi("addRowGroupColumn",t)}addRowGroupColumns(t){this.viaApi("addRowGroupColumns",t)}getRowGroupColumns(){return this.viaApi("getRowGroupColumns")}setPivotColumns(t){this.viaApi("setPivotColumns",t)}removePivotColumn(t){this.viaApi("removePivotColumn",t)}removePivotColumns(t){this.viaApi("removePivotColumns",t)}addPivotColumn(t){this.viaApi("addPivotColumn",t)}addPivotColumns(t){this.viaApi("addPivotColumns",t)}getPivotColumns(){return this.viaApi("getPivotColumns")}getLeftDisplayedColumnGroups(){return this.viaApi("getLeftDisplayedColumnGroups")}getCenterDisplayedColumnGroups(){return this.viaApi("getCenterDisplayedColumnGroups")}getRightDisplayedColumnGroups(){return this.viaApi("getRightDisplayedColumnGroups")}getAllDisplayedColumnGroups(){return this.viaApi("getAllDisplayedColumnGroups")}autoSizeColumn(t,e){return this.viaApi("autoSizeColumn",t,e)}autoSizeColumns(t,e){this.viaApi("autoSizeColumns",t,e)}autoSizeAllColumns(t){this.viaApi("autoSizeAllColumns",t)}setPivotResultColumns(t){this.viaApi("setPivotResultColumns",t)}getPivotResultColumns(){return this.viaApi("getPivotResultColumns")}};g([v("gridApi")],Pn.prototype,"api",2);Pn=g([V("columnApi")],Pn);var Ar=class extends A{constructor(){super(...arguments),this.initialised=!1,this.isSsrm=!1}init(){this.isSsrm=this.gos.isRowModelType("serverSide"),this.cellExpressions=this.gos.get("enableCellExpressions"),this.isTreeData=this.gos.get("treeData"),this.initialised=!0;let t=i=>this.callColumnCellValueChangedHandler(i),e=this.gos.useAsyncEvents();this.eventService.addEventListener(f.EVENT_CELL_VALUE_CHANGED,t,e),this.addDestroyFunc(()=>this.eventService.removeEventListener(f.EVENT_CELL_VALUE_CHANGED,t,e)),this.addManagedPropertyListener("treeData",i=>this.isTreeData=i.currentValue)}getValue(t,e,i=!1,o=!1){if(this.initialised||this.init(),!e)return;let r=t.getColDef(),n=r.field,s=t.getColId(),a=e.data,l,d=e.groupData&&e.groupData[s]!==void 0,c=!o&&e.aggData&&e.aggData[s]!==void 0,u=this.isSsrm&&o&&!!t.getColDef().aggFunc,h=this.isSsrm&&e.footer&&e.field&&(t.getColDef().showRowGroup===!0||t.getColDef().showRowGroup===e.field);if(i&&r.filterValueGetter?l=this.executeFilterValueGetter(r.filterValueGetter,a,t,e):this.isTreeData&&c?l=e.aggData[s]:this.isTreeData&&r.valueGetter?l=this.executeValueGetter(r.valueGetter,a,t,e):this.isTreeData&&n&&a?l=$s(a,n,t.isFieldContainsDots()):d?l=e.groupData[s]:c?l=e.aggData[s]:r.valueGetter?l=this.executeValueGetter(r.valueGetter,a,t,e):h?l=$s(a,e.field,t.isFieldContainsDots()):n&&a&&!u&&(l=$s(a,n,t.isFieldContainsDots())),this.cellExpressions&&typeof l=="string"&&l.indexOf("=")===0){let p=l.substring(1);l=this.executeValueGetter(p,a,t,e)}if(l==null){let p=this.getOpenedGroup(e,t);if(p!=null)return p}return l}parseValue(t,e,i,o){let r=t.getColDef(),n=this.gos.addGridCommonParams({node:e,data:e?.data,oldValue:o,newValue:i,colDef:r,column:t}),s=r.valueParser;return T(s)?typeof s=="function"?s(n):this.expressionService.evaluate(s,n):i}formatValue(t,e,i,o,r=!0){let n=null,s,a=t.getColDef();if(o?s=o:r&&(s=a.valueFormatter),s){let l=this.gos.addGridCommonParams({value:i,node:e,data:e?e.data:null,colDef:a,column:t});typeof s=="function"?n=s(l):n=this.expressionService.evaluate(s,l)}else if(a.refData)return a.refData[i]||"";return n==null&&Array.isArray(i)&&(n=i.join(", ")),n}getOpenedGroup(t,e){if(!this.gos.get("showOpenedGroup")||!e.getColDef().showRowGroup)return;let o=e.getColDef().showRowGroup,r=t.parent;for(;r!=null;){if(r.rowGroupColumn&&(o===!0||o===r.rowGroupColumn.getColId()))return r.key;r=r.parent}}setValue(t,e,i,o){let r=this.columnModel.getPrimaryColumn(e);if(!t||!r)return!1;X(t.data)&&(t.data={});let{field:n,valueSetter:s}=r.getColDef();if(X(n)&&X(s))return console.warn("AG Grid: you need either field or valueSetter set on colDef for editing to work"),!1;if(!this.dataTypeService.checkType(r,i))return console.warn("AG Grid: Data type of the new value does not match the cell data type of the column"),!1;let a=this.gos.addGridCommonParams({node:t,data:t.data,oldValue:this.getValue(r,t),newValue:i,colDef:r.getColDef(),column:r});a.newValue=i;let l;if(T(s)?typeof s=="function"?l=s(a):l=this.expressionService.evaluate(s,a):l=this.setValueUsingField(t.data,n,i,r.isFieldContainsDots()),l===void 0&&(l=!0),!l)return!1;t.resetQuickFilterAggregateText(),this.valueCache.onDataChanged(),a.newValue=this.getValue(r,t);let d={type:f.EVENT_CELL_VALUE_CHANGED,event:null,rowIndex:t.rowIndex,rowPinned:t.rowPinned,column:a.column,api:a.api,columnApi:a.columnApi,colDef:a.colDef,context:a.context,data:t.data,node:t,oldValue:a.oldValue,newValue:a.newValue,value:a.newValue,source:o};return this.eventService.dispatchEvent(d),!0}callColumnCellValueChangedHandler(t){let e=t.colDef.onCellValueChanged;typeof e=="function"&&this.getFrameworkOverrides().wrapOutgoing(()=>{e({node:t.node,data:t.data,oldValue:t.oldValue,newValue:t.newValue,colDef:t.colDef,column:t.column,api:t.api,columnApi:t.columnApi,context:t.context})})}setValueUsingField(t,e,i,o){if(!e)return!1;let r=!1;if(!o)r=t[e]===i,r||(t[e]=i);else{let n=e.split("."),s=t;for(;n.length>0&&s;){let a=n.shift();n.length===0?(r=s[a]===i,r||(s[a]=i)):s=s[a]}}return!r}executeFilterValueGetter(t,e,i,o){let r=this.gos.addGridCommonParams({data:e,node:o,column:i,colDef:i.getColDef(),getValue:this.getValueCallback.bind(this,o)});return typeof t=="function"?t(r):this.expressionService.evaluate(t,r)}executeValueGetter(t,e,i,o){let r=i.getColId(),n=this.valueCache.getValue(o,r);if(n!==void 0)return n;let s=this.gos.addGridCommonParams({data:e,node:o,column:i,colDef:i.getColDef(),getValue:this.getValueCallback.bind(this,o)}),a;return typeof t=="function"?a=t(s):a=this.expressionService.evaluate(t,s),this.valueCache.setValue(o,r,a),a}getValueCallback(t,e){let i=this.columnModel.getPrimaryColumn(e);return i?this.getValue(i,t):null}getKeyForNode(t,e){let i=this.getValue(t,e),o=t.getColDef().keyCreator,r=i;if(o){let n=this.gos.addGridCommonParams({value:i,colDef:t.getColDef(),column:t,node:e,data:e.data});r=o(n)}return typeof r=="string"||r==null||(r=String(r),r==="[object Object]"&&q("a column you are grouping or pivoting by has objects as values. If you want to group by complex objects then either a) use a colDef.keyCreator (se AG Grid docs) or b) to toString() on the object to return a key")),r}};g([v("expressionService")],Ar.prototype,"expressionService",2);g([v("columnModel")],Ar.prototype,"columnModel",2);g([v("valueCache")],Ar.prototype,"valueCache",2);g([v("dataTypeService")],Ar.prototype,"dataTypeService",2);g([I],Ar.prototype,"init",1);Ar=g([V("valueService")],Ar);var nh=class extends A{constructor(){super(...arguments),this.expressionToFunctionCache={}}setBeans(t){this.logger=t.create("ExpressionService")}evaluate(t,e){if(typeof t=="string")return this.evaluateExpression(t,e);console.error("AG Grid: value should be either a string or a function",t)}evaluateExpression(t,e){try{return this.createExpressionFunction(t)(e.value,e.context,e.oldValue,e.newValue,e.value,e.node,e.data,e.colDef,e.rowIndex,e.api,e.columnApi,e.getValue,e.column,e.columnGroup)}catch(i){return console.log("Processing of the expression failed"),console.log("Expression = "+t),console.log("Params =",e),console.log("Exception = "+i),null}}createExpressionFunction(t){if(this.expressionToFunctionCache[t])return this.expressionToFunctionCache[t];let e=this.createFunctionBody(t),i=new Function("x, ctx, oldValue, newValue, value, node, data, colDef, rowIndex, api, columnApi, getValue, column, columnGroup",e);return this.expressionToFunctionCache[t]=i,i}createFunctionBody(t){return t.indexOf("return")>=0?t:"return "+t+";"}};g([ji(0,Ti("loggerFactory"))],nh.prototype,"setBeans",1);nh=g([V("expressionService")],nh);var sh=class extends A{setBeans(t){this.logging=t.get("debug")}create(t){return new Rv(t,this.isLogging.bind(this))}isLogging(){return this.logging}};g([ji(0,Ti("gridOptionsService"))],sh.prototype,"setBeans",1);sh=g([V("loggerFactory")],sh);var Rv=class{constructor(t,e){this.name=t,this.isLoggingFunc=e}isLogging(){return this.isLoggingFunc()}log(t){this.isLoggingFunc()&&console.log("AG Grid."+this.name+": "+t)}},Yn=class extends A{setComp(t,e,i){this.view=t,this.eGridHostDiv=e,this.eGui=i,this.eGui.setAttribute("grid-id",this.context.getGridId()),this.dragAndDropService.addDropTarget({getContainer:()=>this.eGui,isInterestedIn:r=>r===1||r===0,getIconName:()=>te.ICON_NOT_ALLOWED}),this.mouseEventService.stampTopLevelGridCompWithGridInstance(e),this.createManagedBean(new kh(this.view)),this.addRtlSupport();let o=this.resizeObserverService.observeResize(this.eGridHostDiv,this.onGridSizeChanged.bind(this));this.addDestroyFunc(()=>o()),this.ctrlsService.register("gridCtrl",this)}isDetailGrid(){var t;let e=this.focusService.findTabbableParent(this.getGui());return((t=e?.getAttribute("row-id"))==null?void 0:t.startsWith("detail"))||!1}showDropZones(){return De.__isRegistered("@ag-grid-enterprise/row-grouping",this.context.getGridId())}showSideBar(){return De.__isRegistered("@ag-grid-enterprise/side-bar",this.context.getGridId())}showStatusBar(){return De.__isRegistered("@ag-grid-enterprise/status-bar",this.context.getGridId())}showWatermark(){return De.__isRegistered("@ag-grid-enterprise/core",this.context.getGridId())}onGridSizeChanged(){let t={type:f.EVENT_GRID_SIZE_CHANGED,clientWidth:this.eGridHostDiv.clientWidth,clientHeight:this.eGridHostDiv.clientHeight};this.eventService.dispatchEvent(t)}addRtlSupport(){let t=this.gos.get("enableRtl")?"ag-rtl":"ag-ltr";this.view.setRtlClass(t)}destroyGridUi(){this.view.destroyGridUi()}getGui(){return this.eGui}setResizeCursor(t){this.view.setCursor(t?"ew-resize":null)}disableUserSelect(t){this.view.setUserSelect(t?"none":null)}focusNextInnerContainer(t){let e=this.view.getFocusableContainers(),i=this.gos.getActiveDomElement(),r=e.findIndex(n=>n.contains(i))+(t?-1:1);return r<=0||r>=e.length?!1:this.focusService.focusInto(e[r])}focusInnerElement(t){let e=this.view.getFocusableContainers(),i=this.columnModel.getAllDisplayedColumns();if(t){if(e.length>1)return this.focusService.focusInto(be(e),!0);let o=be(i);if(this.focusService.focusGridView(o,!0))return!0}if(this.gos.get("headerHeight")===0||this.gos.get("suppressHeaderFocus")){if(this.focusService.focusGridView(i[0]))return!0;for(let o=1;o<e.length;o++)if(this.focusService.focusInto(e[o]))return!0;return!1}return this.focusService.focusFirstHeader()}forceFocusOutOfContainer(t=!1){this.view.forceFocusOutOfContainer(t)}};g([v("focusService")],Yn.prototype,"focusService",2);g([v("resizeObserverService")],Yn.prototype,"resizeObserverService",2);g([v("columnModel")],Yn.prototype,"columnModel",2);g([v("ctrlsService")],Yn.prototype,"ctrlsService",2);g([v("mouseEventService")],Yn.prototype,"mouseEventService",2);g([v("dragAndDropService")],Yn.prototype,"dragAndDropService",2);var Ea=class extends jd{constructor(t){super(),this.eGridDiv=t}postConstruct(){this.logger=this.loggerFactory.create("GridComp");let t={destroyGridUi:()=>this.destroyBean(this),setRtlClass:i=>this.addCssClass(i),forceFocusOutOfContainer:this.forceFocusOutOfContainer.bind(this),updateLayoutClasses:this.updateLayoutClasses.bind(this),getFocusableContainers:this.getFocusableContainers.bind(this),setUserSelect:i=>{this.getGui().style.userSelect=i??"",this.getGui().style.webkitUserSelect=i??""},setCursor:i=>{this.getGui().style.cursor=i??""}};this.ctrl=this.createManagedBean(new Yn);let e=this.createTemplate();this.setTemplate(e),this.ctrl.setComp(t,this.eGridDiv,this.getGui()),this.insertGridIntoDom(),this.initialiseTabGuard({onTabKeyDown:()=>{},focusInnerElement:i=>this.ctrl.focusInnerElement(i),forceFocusOutWhenTabGuardsAreEmpty:!0})}insertGridIntoDom(){let t=this.getGui();this.eGridDiv.appendChild(t),this.addDestroyFunc(()=>{this.eGridDiv.removeChild(t),this.logger.log("Grid removed from DOM")})}updateLayoutClasses(t,e){let i=this.eRootWrapperBody.classList;i.toggle("ag-layout-auto-height",e.autoHeight),i.toggle("ag-layout-normal",e.normal),i.toggle("ag-layout-print",e.print),this.addOrRemoveCssClass("ag-layout-auto-height",e.autoHeight),this.addOrRemoveCssClass("ag-layout-normal",e.normal),this.addOrRemoveCssClass("ag-layout-print",e.print)}createTemplate(){let t=this.ctrl.showDropZones()?"<ag-grid-header-drop-zones></ag-grid-header-drop-zones>":"",e=this.ctrl.showSideBar()?'<ag-side-bar ref="sideBar"></ag-side-bar>':"",i=this.ctrl.showStatusBar()?'<ag-status-bar ref="statusBar"></ag-status-bar>':"",o=this.ctrl.showWatermark()?"<ag-watermark></ag-watermark>":"";return`<div class="ag-root-wrapper" role="presentation">
                ${t}
                <div class="ag-root-wrapper-body" ref="rootWrapperBody" role="presentation">
                    <ag-grid-body ref="gridBody"></ag-grid-body>
                    ${e}
                </div>
                ${i}
                <ag-pagination></ag-pagination>
                ${o}
            </div>`}getFocusableElement(){return this.eRootWrapperBody}getFocusableContainers(){let t=[this.gridBodyComp.getGui()];return this.sideBarComp&&t.push(this.sideBarComp.getGui()),t.filter(e=>ni(e))}};g([v("loggerFactory")],Ea.prototype,"loggerFactory",2);g([k("gridBody")],Ea.prototype,"gridBodyComp",2);g([k("sideBar")],Ea.prototype,"sideBarComp",2);g([k("rootWrapperBody")],Ea.prototype,"eRootWrapperBody",2);g([I],Ea.prototype,"postConstruct",1);var Fn=class extends A{progressSort(t,e,i){let o=this.getNextSortDirection(t);this.setSortForColumn(t,o,e,i)}setSortForColumn(t,e,i,o){e!=="asc"&&e!=="desc"&&(e=null);let r=this.gos.isColumnsSortingCoupledToGroup(),n=[t];if(r&&t.getColDef().showRowGroup){let l=this.columnModel.getSourceColumnsForGroupColumn(t),d=l?.filter(c=>c.isSortable());d&&(n=[t,...d])}n.forEach(l=>l.setSort(e,o));let s=(i||this.gos.get("alwaysMultiSort"))&&!this.gos.get("suppressMultiSort"),a=[];if(!s){let l=this.clearSortBarTheseColumns(n,o);a.push(...l)}this.updateSortIndex(t),a.push(...n),this.dispatchSortChangedEvents(o,a)}updateSortIndex(t){let e=this.gos.isColumnsSortingCoupledToGroup(),i=this.columnModel.getGroupDisplayColumnForGroup(t.getId()),o=e&&i||t,r=this.getColumnsWithSortingOrdered();this.columnModel.getPrimaryAndSecondaryAndAutoColumns().forEach(a=>a.setSortIndex(null));let n=r.filter(a=>e&&a.getColDef().showRowGroup?!1:a!==o);(o.getSort()?[...n,o]:n).forEach((a,l)=>{a.setSortIndex(l)})}onSortChanged(t,e){this.dispatchSortChangedEvents(t,e)}isSortActive(){let e=this.columnModel.getPrimaryAndSecondaryAndAutoColumns().filter(i=>!!i.getSort());return e&&e.length>0}dispatchSortChangedEvents(t,e){let i={type:f.EVENT_SORT_CHANGED,source:t};e&&(i.columns=e),this.eventService.dispatchEvent(i)}clearSortBarTheseColumns(t,e){let i=[];return this.columnModel.getPrimaryAndSecondaryAndAutoColumns().forEach(o=>{t.includes(o)||(o.getSort()&&i.push(o),o.setSort(void 0,e))}),i}getNextSortDirection(t){let e;if(t.getColDef().sortingOrder?e=t.getColDef().sortingOrder:this.gos.get("sortingOrder")?e=this.gos.get("sortingOrder"):e=Fn.DEFAULT_SORTING_ORDER,!Array.isArray(e)||e.length<=0)return console.warn(`AG Grid: sortingOrder must be an array with at least one element, currently it's ${e}`),null;let i=e.indexOf(t.getSort()),o=i<0,r=i==e.length-1,n;return o||r?n=e[0]:n=e[i+1],Fn.DEFAULT_SORTING_ORDER.indexOf(n)<0?(console.warn("AG Grid: invalid sort type "+n),null):n}getIndexedSortMap(){let t=this.columnModel.getPrimaryAndSecondaryAndAutoColumns().filter(n=>!!n.getSort());if(this.columnModel.isPivotMode()){let n=this.gos.isColumnsSortingCoupledToGroup();t=t.filter(s=>{let a=!!s.getAggFunc(),l=!s.isPrimary(),d=n?this.columnModel.getGroupDisplayColumnForGroup(s.getId()):s.getColDef().showRowGroup;return a||l||d})}let e=this.columnModel.getRowGroupColumns().filter(n=>!!n.getSort()),i={};t.forEach((n,s)=>i[n.getId()]=s),t.sort((n,s)=>{let a=n.getSortIndex(),l=s.getSortIndex();if(a!=null&&l!=null)return a-l;if(a==null&&l==null){let d=i[n.getId()],c=i[s.getId()];return d>c?1:-1}else return l==null?-1:1});let o=this.gos.isColumnsSortingCoupledToGroup()&&!!e.length;o&&(t=[...new Set(t.map(n=>{var s;return(s=this.columnModel.getGroupDisplayColumnForGroup(n.getId()))!=null?s:n}))]);let r=new Map;return t.forEach((n,s)=>r.set(n,s)),o&&e.forEach(n=>{let s=this.columnModel.getGroupDisplayColumnForGroup(n.getId());r.set(n,r.get(s))}),r}getColumnsWithSortingOrdered(){return[...this.getIndexedSortMap().entries()].sort(([t,e],[i,o])=>e-o).map(([t])=>t)}getSortModel(){return this.getColumnsWithSortingOrdered().filter(t=>t.getSort()).map(t=>({sort:t.getSort(),colId:t.getId()}))}getSortOptions(){return this.getColumnsWithSortingOrdered().filter(t=>t.getSort()).map(t=>({sort:t.getSort(),column:t}))}canColumnDisplayMixedSort(t){let e=this.gos.isColumnsSortingCoupledToGroup(),i=!!t.getColDef().showRowGroup;return e&&i}getDisplaySortForColumn(t){let e=this.columnModel.getSourceColumnsForGroupColumn(t);if(!this.canColumnDisplayMixedSort(t)||!e?.length)return t.getSort();let o=t.getColDef().field!=null||!!t.getColDef().valueGetter?[t,...e]:e,r=o[0].getSort();return o.every(s=>s.getSort()==r)?r:"mixed"}getDisplaySortIndexForColumn(t){return this.getIndexedSortMap().get(t)}};Fn.DEFAULT_SORTING_ORDER=["asc","desc",null];g([v("columnModel")],Fn.prototype,"columnModel",2);Fn=g([V("sortController")],Fn);var Oe=class extends A{static addKeyboardModeEvents(t){this.instanceCount>0||(t.addEventListener("keydown",Oe.toggleKeyboardMode),t.addEventListener("mousedown",Oe.toggleKeyboardMode))}static removeKeyboardModeEvents(t){this.instanceCount>0||(t.addEventListener("keydown",Oe.toggleKeyboardMode),t.addEventListener("mousedown",Oe.toggleKeyboardMode))}static toggleKeyboardMode(t){let e=Oe.keyboardModeActive,i=t.type==="keydown";i&&(t.ctrlKey||t.metaKey||t.altKey)||e!==i&&(Oe.keyboardModeActive=i)}static unregisterGridCompController(t){Oe.removeKeyboardModeEvents(t)}init(){let t=this.clearFocusedCell.bind(this);this.addManagedListener(this.eventService,f.EVENT_COLUMN_PIVOT_MODE_CHANGED,t),this.addManagedListener(this.eventService,f.EVENT_NEW_COLUMNS_LOADED,this.onColumnEverythingChanged.bind(this)),this.addManagedListener(this.eventService,f.EVENT_COLUMN_GROUP_OPENED,t),this.addManagedListener(this.eventService,f.EVENT_COLUMN_ROW_GROUP_CHANGED,t),this.registerKeyboardFocusEvents(),this.ctrlsService.whenReady(e=>{this.gridCtrl=e.gridCtrl})}registerKeyboardFocusEvents(){let t=this.gos.getDocument();Oe.addKeyboardModeEvents(t),Oe.instanceCount++,this.addDestroyFunc(()=>{Oe.instanceCount--,Oe.unregisterGridCompController(t)})}onColumnEverythingChanged(){if(!this.focusedCellPosition)return;let t=this.focusedCellPosition.column,e=this.columnModel.getGridColumn(t.getId());t!==e&&this.clearFocusedCell()}isKeyboardMode(){return Oe.keyboardModeActive}getFocusCellToUseAfterRefresh(){return this.gos.get("suppressFocusAfterRefresh")||!this.focusedCellPosition||this.isDomDataMissingInHierarchy(this.gos.getActiveDomElement(),_n.DOM_DATA_KEY_ROW_CTRL)?null:this.focusedCellPosition}getFocusHeaderToUseAfterRefresh(){return this.gos.get("suppressFocusAfterRefresh")||!this.focusedHeaderPosition||this.isDomDataMissingInHierarchy(this.gos.getActiveDomElement(),Vh.DOM_DATA_KEY_HEADER_CTRL)?null:this.focusedHeaderPosition}isDomDataMissingInHierarchy(t,e){let i=t;for(;i;){if(this.gos.getDomData(i,e))return!1;i=i.parentNode}return!0}getFocusedCell(){return this.focusedCellPosition}shouldRestoreFocus(t){return this.isCellRestoreFocused(t)?(setTimeout(()=>{this.restoredFocusedCellPosition=null},0),!0):!1}isCellRestoreFocused(t){return this.restoredFocusedCellPosition==null?!1:this.cellPositionUtils.equals(t,this.restoredFocusedCellPosition)}setRestoreFocusedCell(t){this.getFrameworkOverrides().renderingEngine==="react"&&(this.restoredFocusedCellPosition=t)}getFocusEventParams(){let{rowIndex:t,rowPinned:e,column:i}=this.focusedCellPosition,o={rowIndex:t,rowPinned:e,column:i,isFullWidthCell:!1},r=this.rowRenderer.getRowByPosition({rowIndex:t,rowPinned:e});return r&&(o.isFullWidthCell=r.isFullWidth()),o}clearFocusedCell(){if(this.restoredFocusedCellPosition=null,this.focusedCellPosition==null)return;let t=j({type:f.EVENT_CELL_FOCUS_CLEARED},this.getFocusEventParams());this.focusedCellPosition=null,this.eventService.dispatchEvent(t)}setFocusedCell(t){let{column:e,rowIndex:i,rowPinned:o,forceBrowserFocus:r=!1,preventScrollOnBrowserFocus:n=!1}=t,s=this.columnModel.getGridColumn(e);if(!s){this.focusedCellPosition=null;return}this.focusedCellPosition=s?{rowIndex:i,rowPinned:go(o),column:s}:null;let a=He(j({type:f.EVENT_CELL_FOCUSED},this.getFocusEventParams()),{forceBrowserFocus:r,preventScrollOnBrowserFocus:n,floating:null});this.eventService.dispatchEvent(a)}isCellFocused(t){return this.focusedCellPosition==null?!1:this.cellPositionUtils.equals(t,this.focusedCellPosition)}isRowNodeFocused(t){return this.isRowFocused(t.rowIndex,t.rowPinned)}isHeaderWrapperFocused(t){if(this.focusedHeaderPosition==null)return!1;let e=t.getColumnGroupChild(),i=t.getRowIndex(),o=t.getPinned(),{column:r,headerRowIndex:n}=this.focusedHeaderPosition;return e===r&&i===n&&o==r.getPinned()}clearFocusedHeader(){this.focusedHeaderPosition=null}getFocusedHeader(){return this.focusedHeaderPosition}setFocusedHeader(t,e){this.focusedHeaderPosition={headerRowIndex:t,column:e}}focusHeaderPosition(t){if(this.gos.get("suppressHeaderFocus"))return!1;let{direction:e,fromTab:i,allowUserOverride:o,event:r,fromCell:n,rowWithoutSpanValue:s}=t,{headerPosition:a}=t;if(n&&this.filterManager.isAdvancedFilterHeaderActive())return this.focusAdvancedFilter(a);if(o){let l=this.getFocusedHeader(),d=this.headerNavigationService.getHeaderRowCount();if(i){let c=this.gos.getCallback("tabToNextHeader");c&&(a=this.getHeaderPositionFromUserFunc({userFunc:c,direction:e,currentPosition:l,headerPosition:a,headerRowCount:d}))}else{let c=this.gos.getCallback("navigateToNextHeader");if(c&&r){let u={key:r.key,previousHeaderPosition:l,nextHeaderPosition:a,headerRowCount:d,event:r};a=c(u)}}}return a?this.focusProvidedHeaderPosition({headerPosition:a,direction:e,event:r,fromCell:n,rowWithoutSpanValue:s}):!1}focusHeaderPositionFromUserFunc(t){if(this.gos.get("suppressHeaderFocus"))return!1;let{userFunc:e,headerPosition:i,direction:o,event:r}=t,n=this.getFocusedHeader(),s=this.headerNavigationService.getHeaderRowCount(),a=this.getHeaderPositionFromUserFunc({userFunc:e,direction:o,currentPosition:n,headerPosition:i,headerRowCount:s});return!!a&&this.focusProvidedHeaderPosition({headerPosition:a,direction:o,event:r})}getHeaderPositionFromUserFunc(t){let{userFunc:e,direction:i,currentPosition:o,headerPosition:r,headerRowCount:n}=t,a=e({backwards:i==="Before",previousHeaderPosition:o,nextHeaderPosition:r,headerRowCount:n});return a===!0||a===null?(a===null&&q("Returning `null` from tabToNextHeader is deprecated. Return `true` to stay on the current header, or `false` to let the browser handle the tab behaviour."),o):a===!1?null:a}focusProvidedHeaderPosition(t){let{headerPosition:e,direction:i,fromCell:o,rowWithoutSpanValue:r,event:n}=t;if(e.headerRowIndex===-1)return this.filterManager.isAdvancedFilterHeaderActive()?this.focusAdvancedFilter(e):this.focusGridView(e.column);this.headerNavigationService.scrollToColumn(e.column,i);let a=this.ctrlsService.getHeaderRowContainerCtrl(e.column.getPinned()).focusHeader(e.headerRowIndex,e.column,n);return a&&(r!=null||o)&&this.headerNavigationService.setCurrentHeaderRowWithoutSpan(r??-1),a}focusFirstHeader(){let t=this.columnModel.getAllDisplayedColumns()[0];if(!t)return!1;t.getParent()&&(t=this.columnModel.getColumnGroupAtLevel(t,0));let e=this.headerPositionUtils.getHeaderIndexToFocus(t,0);return this.focusHeaderPosition({headerPosition:e,rowWithoutSpanValue:0})}focusLastHeader(t){let e=this.headerNavigationService.getHeaderRowCount()-1,i=be(this.columnModel.getAllDisplayedColumns());return this.focusHeaderPosition({headerPosition:{headerRowIndex:e,column:i},rowWithoutSpanValue:-1,event:t})}focusPreviousFromFirstCell(t){return this.filterManager.isAdvancedFilterHeaderActive()?this.focusAdvancedFilter(null):this.focusLastHeader(t)}isAnyCellFocused(){return!!this.focusedCellPosition}isRowFocused(t,e){return this.focusedCellPosition==null?!1:this.focusedCellPosition.rowIndex===t&&this.focusedCellPosition.rowPinned===go(e)}findFocusableElements(t,e,i=!1){let o=jx,r=qm;e&&(r+=", "+e),i&&(r+=', [tabindex="-1"]');let n=Array.prototype.slice.apply(t.querySelectorAll(o)).filter(l=>ni(l)),s=Array.prototype.slice.apply(t.querySelectorAll(r));return s.length?((l,d)=>l.filter(c=>d.indexOf(c)===-1))(n,s):n}focusInto(t,e=!1,i=!1){let o=this.findFocusableElements(t,null,i),r=e?be(o):o[0];return r?(r.focus({preventScroll:!0}),!0):!1}findFocusableElementBeforeTabGuard(t,e){if(!e)return null;let i=this.findFocusableElements(t),o=i.indexOf(e);if(o===-1)return null;let r=-1;for(let n=o-1;n>=0;n--)if(i[n].classList.contains("ag-tab-guard-top")){r=n;break}return r<=0?null:i[r-1]}findNextFocusableElement(t=this.eGridDiv,e,i){let o=this.findFocusableElements(t,e?':not([tabindex="-1"])':null),r=this.gos.getActiveDomElement(),n;e?n=o.findIndex(a=>a.contains(r)):n=o.indexOf(r);let s=n+(i?-1:1);return s<0||s>=o.length?null:o[s]}isTargetUnderManagedComponent(t,e){if(!e)return!1;let i=t.querySelectorAll(`.${Fr.FOCUS_MANAGED_CLASS}`);if(!i.length)return!1;for(let o=0;o<i.length;o++)if(i[o].contains(e))return!0;return!1}findTabbableParent(t,e=5){let i=0;for(;t&&eh(t)===null&&++i<=e;)t=t.parentElement;return eh(t)===null?null:t}focusGridView(t,e){var i;if(this.gos.get("suppressCellFocus"))return e?this.gos.get("suppressHeaderFocus")?this.focusNextGridCoreContainer(!0,!0):this.focusLastHeader():this.focusNextGridCoreContainer(!1);let o=e?this.rowPositionUtils.getLastRow():this.rowPositionUtils.getFirstRow();if(!o)return!1;let{rowIndex:r,rowPinned:n}=o,s=this.getFocusedHeader();return!t&&s&&(t=s.column),r==null||!t?!1:(this.navigationService.ensureCellVisible({rowIndex:r,column:t,rowPinned:n}),this.setFocusedCell({rowIndex:r,column:t,rowPinned:go(n),forceBrowserFocus:!0}),(i=this.rangeService)==null||i.setRangeToCell({rowIndex:r,rowPinned:n,column:t}),!0)}focusNextGridCoreContainer(t,e=!1){return!e&&this.gridCtrl.focusNextInnerContainer(t)?!0:((e||!t&&!this.gridCtrl.isDetailGrid())&&this.gridCtrl.forceFocusOutOfContainer(t),!1)}focusAdvancedFilter(t){var e,i;return this.advancedFilterFocusColumn=t?.column,(i=(e=this.advancedFilterService)==null?void 0:e.getCtrl().focusHeaderComp())!=null?i:!1}focusNextFromAdvancedFilter(t,e){var i,o;let r=(o=e?void 0:this.advancedFilterFocusColumn)!=null?o:(i=this.columnModel.getAllDisplayedColumns())==null?void 0:i[0];return t?this.focusHeaderPosition({headerPosition:{column:r,headerRowIndex:this.headerNavigationService.getHeaderRowCount()-1}}):this.focusGridView(r)}clearAdvancedFilterColumn(){this.advancedFilterFocusColumn=void 0}};Oe.keyboardModeActive=!1;Oe.instanceCount=0;g([v("eGridDiv")],Oe.prototype,"eGridDiv",2);g([v("columnModel")],Oe.prototype,"columnModel",2);g([v("headerNavigationService")],Oe.prototype,"headerNavigationService",2);g([v("headerPositionUtils")],Oe.prototype,"headerPositionUtils",2);g([v("rowRenderer")],Oe.prototype,"rowRenderer",2);g([v("rowPositionUtils")],Oe.prototype,"rowPositionUtils",2);g([v("cellPositionUtils")],Oe.prototype,"cellPositionUtils",2);g([v("navigationService")],Oe.prototype,"navigationService",2);g([v("ctrlsService")],Oe.prototype,"ctrlsService",2);g([v("filterManager")],Oe.prototype,"filterManager",2);g([Re("rangeService")],Oe.prototype,"rangeService",2);g([Re("advancedFilterService")],Oe.prototype,"advancedFilterService",2);g([I],Oe.prototype,"init",1);Oe=g([V("focusService")],Oe);var bm=class extends A{setMouseOver(t){this.selectedColumns=t;let e={type:f.EVENT_COLUMN_HOVER_CHANGED};this.eventService.dispatchEvent(e)}clearMouseOver(){this.selectedColumns=null;let t={type:f.EVENT_COLUMN_HOVER_CHANGED};this.eventService.dispatchEvent(t)}isHovered(t){return!!this.selectedColumns&&this.selectedColumns.indexOf(t)>=0}};bm=g([V("columnHoverService")],bm);var bd=class extends A{constructor(){super(...arguments),this.executeNextFuncs=[],this.executeLaterFuncs=[],this.active=!1,this.suppressAnimation=!1,this.animationThreadCount=0}postConstruct(){this.ctrlsService.whenReady(t=>this.gridBodyCtrl=t.gridBodyCtrl)}isActive(){return this.active&&!this.suppressAnimation}setSuppressAnimation(t){this.suppressAnimation=t}start(){this.active||this.gos.get("suppressColumnMoveAnimation")||this.gos.get("enableRtl")||(this.ensureAnimationCssClassPresent(),this.active=!0)}finish(){this.active&&this.flush(()=>{this.active=!1})}executeNextVMTurn(t){this.active?this.executeNextFuncs.push(t):t()}executeLaterVMTurn(t){this.active?this.executeLaterFuncs.push(t):t()}ensureAnimationCssClassPresent(){this.animationThreadCount++;let t=this.animationThreadCount;this.gridBodyCtrl.setColumnMovingCss(!0),this.executeLaterFuncs.push(()=>{this.animationThreadCount===t&&this.gridBodyCtrl.setColumnMovingCss(!1)})}flush(t){if(this.executeNextFuncs.length===0&&this.executeLaterFuncs.length===0){t();return}let e=i=>{for(;i.length;){let o=i.pop();o&&o()}};this.getFrameworkOverrides().wrapIncoming(()=>{window.setTimeout(()=>e(this.executeNextFuncs),0),window.setTimeout(()=>{t(),e(this.executeLaterFuncs)},200)})}};g([v("ctrlsService")],bd.prototype,"ctrlsService",2);g([I],bd.prototype,"postConstruct",1);bd=g([V("columnAnimationService")],bd);var na=class extends A{postConstruct(){this.ctrlsService.whenReady(t=>{this.centerRowsCtrl=t.center,this.addManagedListener(this.eventService,f.EVENT_BODY_HEIGHT_CHANGED,this.checkPageSize.bind(this)),this.addManagedListener(this.eventService,f.EVENT_SCROLL_VISIBILITY_CHANGED,this.checkPageSize.bind(this)),this.addManagedPropertyListener("paginationAutoPageSize",this.onPaginationAutoSizeChanged.bind(this)),this.checkPageSize()})}notActive(){return!this.gos.get("paginationAutoPageSize")||this.centerRowsCtrl==null}onPaginationAutoSizeChanged(){this.notActive()?this.paginationProxy.unsetAutoCalculatedPageSize():this.checkPageSize()}checkPageSize(){if(this.notActive())return;let t=this.centerRowsCtrl.getViewportSizeFeature().getBodyHeight();if(t>0){let e=()=>{let i=this.gos.getRowHeightAsNumber(),o=Math.floor(t/i);this.paginationProxy.setPageSize(o,"autoCalculated")};this.isBodyRendered?Ut(()=>e(),50)():(e(),this.isBodyRendered=!0)}else this.isBodyRendered=!1}};g([v("ctrlsService")],na.prototype,"ctrlsService",2);g([v("paginationProxy")],na.prototype,"paginationProxy",2);g([I],na.prototype,"postConstruct",1);na=g([V("paginationAutoPageSizeService")],na);var ah=class extends A{constructor(){super(...arguments),this.cacheVersion=0}init(){this.active=this.gos.get("valueCache"),this.neverExpires=this.gos.get("valueCacheNeverExpires")}onDataChanged(){this.neverExpires||this.expire()}expire(){this.cacheVersion++}setValue(t,e,i){this.active&&(t.__cacheVersion!==this.cacheVersion&&(t.__cacheVersion=this.cacheVersion,t.__cacheData={}),t.__cacheData[e]=i)}getValue(t,e){if(!(!this.active||t.__cacheVersion!==this.cacheVersion))return t.__cacheData[e]}};g([I],ah.prototype,"init",1);ah=g([V("valueCache")],ah);var Vk="paste",sa=class extends A{init(){this.rowModel.getType()==="clientSide"&&(this.clientSideRowModel=this.rowModel),this.addManagedListener(this.eventService,f.EVENT_CELL_VALUE_CHANGED,this.onCellValueChanged.bind(this))}onCellValueChanged(t){t.source!==Vk&&this.doChangeDetection(t.node,t.column)}doChangeDetection(t,e){if(this.gos.get("suppressChangeDetection"))return;let i=[t];if(this.clientSideRowModel&&!t.isRowPinned()){let o=this.gos.get("aggregateOnlyChangedColumns"),r=new Wh(o,this.clientSideRowModel.getRootNode());r.addParentNode(t.parent,[e]),this.clientSideRowModel.doAggregate(r),r.forEachChangedNodeDepthFirst(n=>{i.push(n)})}this.rowRenderer.refreshCells({rowNodes:i})}};g([v("rowModel")],sa.prototype,"rowModel",2);g([v("rowRenderer")],sa.prototype,"rowRenderer",2);g([I],sa.prototype,"init",1);sa=g([V("changeDetectionService")],sa);var lh=class extends A{adaptFunction(t,e){let i=this.componentMetadataProvider.retrieve(t);return i&&i.functionAdapter?i.functionAdapter(e):null}adaptCellRendererFunction(t){class e{refresh(o){return!1}getGui(){return this.eGui}init(o){let r=t(o),n=typeof r;if(n==="string"||n==="number"||n==="boolean"){this.eGui=ii("<span>"+r+"</span>");return}if(r==null){this.eGui=ii("<span></span>");return}this.eGui=r}}return e}doesImplementIComponent(t){return t?t.prototype&&"getGui"in t.prototype:!1}};g([v("componentMetadataProvider")],lh.prototype,"componentMetadataProvider",2);lh=g([V("agComponentUtils")],lh);var Sd=class extends A{postConstruct(){this.componentMetaData={dateComponent:{mandatoryMethodList:["getDate","setDate"],optionalMethodList:["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled","onParamsUpdated","refresh"]},detailCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},headerComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},headerGroupComponent:{mandatoryMethodList:[],optionalMethodList:[]},loadingCellRenderer:{mandatoryMethodList:[],optionalMethodList:[],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},loadingOverlayComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},noRowsOverlayComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},floatingFilterComponent:{mandatoryMethodList:["onParentModelChanged"],optionalMethodList:["afterGuiAttached","onParamsUpdated","refresh"]},cellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},cellEditor:{mandatoryMethodList:["getValue"],optionalMethodList:["isPopup","isCancelBeforeStart","isCancelAfterEnd","getPopupPosition","focusIn","focusOut","afterGuiAttached","refresh"]},innerRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},fullWidthCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},groupRowRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},filter:{mandatoryMethodList:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethodList:["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged","onAnyFilterChanged","refresh"]},statusPanel:{mandatoryMethodList:[],optionalMethodList:["refresh"]},toolPanel:{mandatoryMethodList:[],optionalMethodList:["refresh","getState"]},tooltipComponent:{mandatoryMethodList:[],optionalMethodList:[]},menuItem:{mandatoryMethodList:[],optionalMethodList:["setActive","select","setExpanded","configureDefaults"]}}}retrieve(t){return this.componentMetaData[t]}};g([v("agComponentUtils")],Sd.prototype,"agComponentUtils",2);g([I],Sd.prototype,"postConstruct",1);Sd=g([V("componentMetadataProvider")],Sd);var Hk=25,FS=10,Yf=8,Bk=4,Qf=4,Xf=6,Wk=16,OS=14,Zf=8,Uk={"ag-theme-custom":{headerHeight:25,headerCellMinWidth:24,listItemHeight:Bk*5,rowHeight:25,chartMenuPanelWidth:220},"ag-theme-material":{headerHeight:Yf*7,headerCellMinWidth:48,listItemHeight:Yf*4,rowHeight:Yf*6,chartMenuPanelWidth:240},"ag-theme-balham":{headerHeight:Qf*8,headerCellMinWidth:24,listItemHeight:Qf*6,rowHeight:Qf*7,chartMenuPanelWidth:220},"ag-theme-alpine":{headerHeight:Xf*8,headerCellMinWidth:36,listItemHeight:Xf*4,rowHeight:Xf*7,chartMenuPanelWidth:240},"ag-theme-quartz":{headerHeight:OS+Zf*4.25,headerCellMinWidth:36,listItemHeight:Wk+Zf,rowHeight:OS+Zf*3.5,chartMenuPanelWidth:260}},kS={headerHeight:["ag-header-row"],headerCellMinWidth:["ag-header-cell"],listItemHeight:["ag-virtual-list-item"],rowHeight:["ag-row"],chartMenuPanelWidth:["ag-chart-docked-container"]},xd=class extends A{constructor(){super(...arguments),this.calculatedSizes={},this.calculatedTheme=null}postConstruct(){var t;let e=(t=this.getTheme().el)!=null?t:this.eGridDiv;this.addManagedPropertyListener("rowHeight",()=>this.refreshRowHeightVariable()),this.mutationObserver=new MutationObserver(()=>{this.calculatedSizes={},this.calculatedTheme=null,this.calculatedTheme=this.getTheme(),this.fireGridStylesChangedEvent()}),this.mutationObserver.observe(e||this.eGridDiv,{attributes:!0,attributeFilter:["class"]})}fireGridStylesChangedEvent(){let t={type:f.EVENT_GRID_STYLES_CHANGED};this.eventService.dispatchEvent(t)}getSassVariable(t){let{themeFamily:e,el:i}=this.getTheme();if(!e||e.indexOf("ag-theme")!==0)return;this.calculatedSizes||(this.calculatedSizes={}),this.calculatedSizes[e]||(this.calculatedSizes[e]={});let o=this.calculatedSizes[e][t];return o??(this.calculatedSizes[e][t]=this.calculateValueForSassProperty(t,e,i),this.calculatedSizes[e][t])}calculateValueForSassProperty(t,e,i){let o="ag-theme-"+(e.match("material")?"material":e.match("balham")?"balham":e.match("alpine")?"alpine":"custom"),r=Uk[o][t],n=this.gos.getDocument();if(i||(i=this.eGridDiv),!kS[t])return r;let s=kS[t],a=n.createElement("div"),l=Array.from(i.classList);a.classList.add(e,...l),a.style.position="absolute";let d=s.reduce((u,h)=>{let p=n.createElement("div");return p.style.position="static",p.classList.add(h),u.appendChild(p),p},a),c=0;if(n.body){n.body.appendChild(a);let u=t.toLowerCase().indexOf("height")!==-1?"height":"width";c=parseInt(window.getComputedStyle(d)[u],10),n.body.removeChild(a)}return c||r}isThemeDark(){let{theme:t}=this.getTheme();return!!t&&t.indexOf("dark")>=0}chartMenuPanelWidth(){return this.getSassVariable("chartMenuPanelWidth")}getTheme(){if(this.calculatedTheme)return this.calculatedTheme;let t=/\bag-(material|(?:theme-([\w\-]*)))\b/g,e=this.eGridDiv,i=null,o=[];for(;e;)if(i=t.exec(e.className),!i)e=e.parentElement||void 0;else{let n=e.className.match(t);n&&(o=n);break}if(!i)return{allThemes:o};let r=i[0];return this.calculatedTheme={theme:r,el:e,themeFamily:r.replace(/-dark$/,""),allThemes:o},this.calculatedTheme}getFromTheme(t,e){var i;return(i=this.getSassVariable(e))!=null?i:t}getDefaultRowHeight(){return this.getFromTheme(Hk,"rowHeight")}getListItemHeight(){return this.getFromTheme(20,"listItemHeight")}refreshRowHeightVariable(){let t=this.eGridDiv.style.getPropertyValue("--ag-line-height").trim(),e=this.gos.get("rowHeight");if(e==null||isNaN(e)||!isFinite(e))return t!==null&&this.eGridDiv.style.setProperty("--ag-line-height",null),-1;let i=`${e}px`;return t!=i?(this.eGridDiv.style.setProperty("--ag-line-height",i),e):t!=""?parseFloat(t):-1}getMinColWidth(){let t=this.getFromTheme(null,"headerCellMinWidth");return T(t)?Math.max(t,FS):FS}destroy(){this.calculatedSizes=null,this.mutationObserver&&this.mutationObserver.disconnect(),super.destroy()}};g([v("eGridDiv")],xd.prototype,"eGridDiv",2);g([I],xd.prototype,"postConstruct",1);xd=g([V("environment")],xd);var aa=class extends A{constructor(){super(...arguments),this.scrollY=0,this.uiBodyHeight=0}agWire(t){this.logger=t.create("RowContainerHeightService")}postConstruct(){this.addManagedListener(this.eventService,f.EVENT_BODY_HEIGHT_CHANGED,this.updateOffset.bind(this)),this.maxDivHeight=Lx(),this.logger.log("maxDivHeight = "+this.maxDivHeight)}isStretching(){return this.stretching}getDivStretchOffset(){return this.divStretchOffset}updateOffset(){if(!this.stretching)return;let e=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition().top,i=this.getUiBodyHeight();(e!==this.scrollY||i!==this.uiBodyHeight)&&(this.scrollY=e,this.uiBodyHeight=i,this.calculateOffset())}calculateOffset(){this.setUiContainerHeight(this.maxDivHeight),this.pixelsToShave=this.modelHeight-this.uiContainerHeight,this.maxScrollY=this.uiContainerHeight-this.uiBodyHeight;let t=this.scrollY/this.maxScrollY,e=t*this.pixelsToShave;this.logger.log(`Div Stretch Offset = ${e} (${this.pixelsToShave} * ${t})`),this.setDivStretchOffset(e)}setUiContainerHeight(t){t!==this.uiContainerHeight&&(this.uiContainerHeight=t,this.eventService.dispatchEvent({type:f.EVENT_ROW_CONTAINER_HEIGHT_CHANGED}))}clearOffset(){this.setUiContainerHeight(this.modelHeight),this.pixelsToShave=0,this.setDivStretchOffset(0)}setDivStretchOffset(t){let e=typeof t=="number"?Math.floor(t):null;this.divStretchOffset!==e&&(this.divStretchOffset=e,this.eventService.dispatchEvent({type:f.EVENT_HEIGHT_SCALE_CHANGED}))}setModelHeight(t){this.modelHeight=t,this.stretching=t!=null&&this.maxDivHeight>0&&t>this.maxDivHeight,this.stretching?this.calculateOffset():this.clearOffset()}getUiContainerHeight(){return this.uiContainerHeight}getRealPixelPosition(t){return t-this.divStretchOffset}getUiBodyHeight(){let e=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition();return e.bottom-e.top}getScrollPositionForPixel(t){if(this.pixelsToShave<=0)return t;let e=this.modelHeight-this.getUiBodyHeight(),i=t/e;return this.maxScrollY*i}};g([v("ctrlsService")],aa.prototype,"ctrlsService",2);g([ji(0,Ti("loggerFactory"))],aa.prototype,"agWire",1);g([I],aa.prototype,"postConstruct",1);aa=g([V("rowContainerHeightService")],aa);var la=class extends A{init(){this.addManagedPropertyListener("isRowSelectable",()=>this.updateSelectable())}updateSelectableAfterGrouping(){this.updateSelectable(!0)}updateSelectable(t=!1){let e=!!this.gos.get("rowSelection"),i=this.gos.get("isRowSelectable");if(!e||!i)return;let o=this.gos.get("groupSelectsChildren"),r=this.rowModel.getType()==="clientSide"&&o,n=[],s=a=>{if(t&&!a.group)return;if(r&&a.group){let d=a.childrenAfterGroup.some(c=>c.selectable===!0);a.setRowSelectable(d,!0);return}let l=i?i(a):!0;a.setRowSelectable(l,!0),!l&&a.isSelected()&&n.push(a)};if(r){let a=this.rowModel;new Wh(!1,a.getRootNode()).forEachChangedNodeDepthFirst(s,!0,!0)}else this.rowModel.forEachNode(s);n.length&&this.selectionService.setNodesSelected({nodes:n,newValue:!1,source:"selectableChanged"}),r&&this.selectionService instanceof In&&this.selectionService.updateGroupsFromChildrenSelections("selectableChanged")}};g([v("rowModel")],la.prototype,"rowModel",2);g([v("selectionService")],la.prototype,"selectionService",2);g([I],la.prototype,"init",1);la=g([V("selectableService")],la);var ai=class extends J{constructor(){super(),this.previousAndFirstButtonsDisabled=!1,this.nextButtonDisabled=!1,this.lastButtonDisabled=!1,this.areListenersSetup=!1}postConstruct(){let t=this.gos.get("enableRtl");this.setTemplate(this.getTemplate());let{btFirst:e,btPrevious:i,btNext:o,btLast:r,pageSizeComp:n}=this;this.activateTabIndex([e,i,o,r]),e.insertAdjacentElement("afterbegin",qe(t?"last":"first",this.gos)),i.insertAdjacentElement("afterbegin",qe(t?"next":"previous",this.gos)),o.insertAdjacentElement("afterbegin",qe(t?"previous":"next",this.gos)),r.insertAdjacentElement("afterbegin",qe(t?"first":"last",this.gos)),this.addManagedPropertyListener("pagination",this.onPaginationChanged.bind(this)),this.addManagedPropertyListener("suppressPaginationPanel",this.onPaginationChanged.bind(this)),this.addManagedPropertyListeners(["paginationPageSizeSelector","paginationAutoPageSize","suppressPaginationPanel"],()=>this.onPageSizeRelatedOptionsChange()),this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector()),this.onPaginationChanged()}onPaginationChanged(){let e=this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel");this.setDisplayed(e),e&&(this.setupListeners(),this.enableOrDisableButtons(),this.updateRowLabels(),this.setCurrentPageLabel(),this.setTotalLabels(),this.onPageSizeRelatedOptionsChange())}onPageSizeRelatedOptionsChange(){this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector())}setupListeners(){this.areListenersSetup||(this.addManagedListener(this.eventService,f.EVENT_PAGINATION_CHANGED,this.onPaginationChanged.bind(this)),[{el:this.btFirst,fn:this.onBtFirst.bind(this)},{el:this.btPrevious,fn:this.onBtPrevious.bind(this)},{el:this.btNext,fn:this.onBtNext.bind(this)},{el:this.btLast,fn:this.onBtLast.bind(this)}].forEach(t=>{let{el:e,fn:i}=t;this.addManagedListener(e,"click",i),this.addManagedListener(e,"keydown",o=>{(o.key===S.ENTER||o.key===S.SPACE)&&(o.preventDefault(),i())})}),this.areListenersSetup=!0)}onBtFirst(){this.previousAndFirstButtonsDisabled||this.paginationProxy.goToFirstPage()}setCurrentPageLabel(){let t=this.paginationProxy.getTotalPages()>0,e=this.paginationProxy.getCurrentPage(),i=t?e+1:0;this.lbCurrent.textContent=this.formatNumber(i)}formatNumber(t){let e=this.gos.getCallback("paginationNumberFormatter");if(e)return e({value:t});let i=this.localeService.getLocaleTextFunc(),o=i("thousandSeparator",","),r=i("decimalSeparator",".");return jm(t,o,r)}getTemplate(){let t=this.localeService.getLocaleTextFunc(),e=t("page","Page"),i=t("to","to"),o=t("of","of"),r=t("firstPage","First Page"),n=t("previousPage","Previous Page"),s=t("nextPage","Next Page"),a=t("lastPage","Last Page"),l=this.getCompId();return`<div class="ag-paging-panel ag-unselectable" id="ag-${l}">
                <ag-page-size-selector ref="pageSizeComp"></ag-page-size-selector>
                <span class="ag-paging-row-summary-panel" role="status">
                    <span id="ag-${l}-first-row" ref="lbFirstRowOnPage" class="ag-paging-row-summary-panel-number"></span>
                    <span id="ag-${l}-to">${i}</span>
                    <span id="ag-${l}-last-row" ref="lbLastRowOnPage" class="ag-paging-row-summary-panel-number"></span>
                    <span id="ag-${l}-of">${o}</span>
                    <span id="ag-${l}-row-count" ref="lbRecordCount" class="ag-paging-row-summary-panel-number"></span>
                </span>
                <span class="ag-paging-page-summary-panel" role="presentation">
                    <div ref="btFirst" class="ag-button ag-paging-button" role="button" aria-label="${r}"></div>
                    <div ref="btPrevious" class="ag-button ag-paging-button" role="button" aria-label="${n}"></div>
                    <span class="ag-paging-description" role="status">
                        <span id="ag-${l}-start-page">${e}</span>
                        <span id="ag-${l}-start-page-number" ref="lbCurrent" class="ag-paging-number"></span>
                        <span id="ag-${l}-of-page">${o}</span>
                        <span id="ag-${l}-of-page-number" ref="lbTotal" class="ag-paging-number"></span>
                    </span>
                    <div ref="btNext" class="ag-button ag-paging-button" role="button" aria-label="${s}"></div>
                    <div ref="btLast" class="ag-button ag-paging-button" role="button" aria-label="${a}"></div>
                </span>
            </div>`}onBtNext(){this.nextButtonDisabled||this.paginationProxy.goToNextPage()}onBtPrevious(){this.previousAndFirstButtonsDisabled||this.paginationProxy.goToPreviousPage()}onBtLast(){this.lastButtonDisabled||this.paginationProxy.goToLastPage()}enableOrDisableButtons(){let t=this.paginationProxy.getCurrentPage(),e=this.paginationProxy.isLastPageFound(),i=this.paginationProxy.getTotalPages();this.previousAndFirstButtonsDisabled=t===0,this.toggleButtonDisabled(this.btFirst,this.previousAndFirstButtonsDisabled),this.toggleButtonDisabled(this.btPrevious,this.previousAndFirstButtonsDisabled);let o=this.isZeroPagesToDisplay(),r=t===i-1;this.nextButtonDisabled=r||o,this.lastButtonDisabled=!e||o||t===i-1,this.toggleButtonDisabled(this.btNext,this.nextButtonDisabled),this.toggleButtonDisabled(this.btLast,this.lastButtonDisabled)}toggleButtonDisabled(t,e){km(t,e),t.classList.toggle("ag-disabled",e)}updateRowLabels(){let t=this.paginationProxy.getCurrentPage(),e=this.paginationProxy.getPageSize(),i=this.paginationProxy.isLastPageFound(),o=this.paginationProxy.isLastPageFound()?this.paginationProxy.getMasterRowCount():null,r,n;if(this.isZeroPagesToDisplay()?r=n=0:(r=e*t+1,n=r+e-1,i&&n>o&&(n=o)),this.lbFirstRowOnPage.textContent=this.formatNumber(r),this.rowNodeBlockLoader.isLoading()){let s=this.localeService.getLocaleTextFunc();this.lbLastRowOnPage.innerHTML=s("pageLastRowUnknown","?")}else this.lbLastRowOnPage.textContent=this.formatNumber(n)}isZeroPagesToDisplay(){let t=this.paginationProxy.isLastPageFound(),e=this.paginationProxy.getTotalPages();return t&&e===0}setTotalLabels(){let t=this.paginationProxy.isLastPageFound(),e=this.paginationProxy.getTotalPages(),i=t?this.paginationProxy.getMasterRowCount():null;if(i===1){let o=this.paginationProxy.getRow(0);if(o&&o.group&&!(o.groupData||o.aggData)){this.setTotalLabelsToZero();return}}if(t)this.lbTotal.textContent=this.formatNumber(e),this.lbRecordCount.textContent=this.formatNumber(i);else{let o=this.localeService.getLocaleTextFunc()("more","more");this.lbTotal.innerHTML=o,this.lbRecordCount.innerHTML=o}}setTotalLabelsToZero(){this.lbFirstRowOnPage.textContent=this.formatNumber(0),this.lbCurrent.textContent=this.formatNumber(0),this.lbLastRowOnPage.textContent=this.formatNumber(0),this.lbTotal.textContent=this.formatNumber(0),this.lbRecordCount.textContent=this.formatNumber(0)}};g([v("paginationProxy")],ai.prototype,"paginationProxy",2);g([v("rowNodeBlockLoader")],ai.prototype,"rowNodeBlockLoader",2);g([k("btFirst")],ai.prototype,"btFirst",2);g([k("btPrevious")],ai.prototype,"btPrevious",2);g([k("btNext")],ai.prototype,"btNext",2);g([k("btLast")],ai.prototype,"btLast",2);g([k("lbRecordCount")],ai.prototype,"lbRecordCount",2);g([k("lbFirstRowOnPage")],ai.prototype,"lbFirstRowOnPage",2);g([k("lbLastRowOnPage")],ai.prototype,"lbLastRowOnPage",2);g([k("lbCurrent")],ai.prototype,"lbCurrent",2);g([k("lbTotal")],ai.prototype,"lbTotal",2);g([k("pageSizeComp")],ai.prototype,"pageSizeComp",2);g([I],ai.prototype,"postConstruct",1);var Yd=class CE extends J{constructor(){super(CE.TEMPLATE),this.inProgress=!1,this.destroyRequested=!1}updateLayoutClasses(e,i){let o=this.eOverlayWrapper.classList;o.toggle("ag-layout-auto-height",i.autoHeight),o.toggle("ag-layout-normal",i.normal),o.toggle("ag-layout-print",i.print)}postConstruct(){this.createManagedBean(new kh(this)),this.setDisplayed(!1,{skipAriaHidden:!0}),this.overlayService.registerOverlayWrapperComp(this)}setWrapperTypeClass(e){let i=this.eOverlayWrapper.classList;this.activeOverlayWrapperCssClass&&i.toggle(this.activeOverlayWrapperCssClass,!1),this.activeOverlayWrapperCssClass=e,i.toggle(e,!0)}showOverlay(e,i,o){this.inProgress||(this.setWrapperTypeClass(i),this.destroyActiveOverlay(),this.inProgress=!0,e&&e.then(r=>{this.inProgress=!1,this.eOverlayWrapper.appendChild(r.getGui()),this.activeOverlay=r,this.updateListenerDestroyFunc=o,this.destroyRequested&&(this.destroyRequested=!1,this.destroyActiveOverlay())}),this.setDisplayed(!0,{skipAriaHidden:!0}))}destroyActiveOverlay(){var e;if(this.inProgress){this.destroyRequested=!0;return}this.activeOverlay&&(this.activeOverlay=this.getContext().destroyBean(this.activeOverlay),(e=this.updateListenerDestroyFunc)==null||e.call(this),Je(this.eOverlayWrapper))}hideOverlay(){this.destroyActiveOverlay(),this.setDisplayed(!1,{skipAriaHidden:!0})}destroy(){this.destroyActiveOverlay(),super.destroy()}};Yd.TEMPLATE=`
        <div class="ag-overlay" role="presentation">
            <div class="ag-overlay-panel" role="presentation">
                <div class="ag-overlay-wrapper" ref="eOverlayWrapper" role="presentation"></div>
            </div>
        </div>`;g([v("overlayService")],Yd.prototype,"overlayService",2);g([k("eOverlayWrapper")],Yd.prototype,"eOverlayWrapper",2);g([I],Yd.prototype,"postConstruct",1);var jk=Yd,da=class extends A{getFirstRow(){let t=0,e;return this.pinnedRowModel.getPinnedTopRowCount()?e="top":this.rowModel.getRowCount()?(e=null,t=this.paginationProxy.getPageFirstRow()):this.pinnedRowModel.getPinnedBottomRowCount()&&(e="bottom"),e===void 0?null:{rowIndex:t,rowPinned:e}}getLastRow(){let t,e=null,i=this.pinnedRowModel.getPinnedBottomRowCount(),o=this.pinnedRowModel.getPinnedTopRowCount();return i?(e="bottom",t=i-1):this.rowModel.getRowCount()?(e=null,t=this.paginationProxy.getPageLastRow()):o&&(e="top",t=o-1),t===void 0?null:{rowIndex:t,rowPinned:e}}getRowNode(t){switch(t.rowPinned){case"top":return this.pinnedRowModel.getPinnedTopRowData()[t.rowIndex];case"bottom":return this.pinnedRowModel.getPinnedBottomRowData()[t.rowIndex];default:return this.rowModel.getRow(t.rowIndex)}}sameRow(t,e){return!t&&!e?!0:t&&!e||!t&&e?!1:t.rowIndex===e.rowIndex&&t.rowPinned==e.rowPinned}before(t,e){switch(t.rowPinned){case"top":if(e.rowPinned!=="top")return!0;break;case"bottom":if(e.rowPinned!=="bottom")return!1;break;default:if(T(e.rowPinned))return e.rowPinned!=="top";break}return t.rowIndex<e.rowIndex}};g([v("rowModel")],da.prototype,"rowModel",2);g([v("pinnedRowModel")],da.prototype,"pinnedRowModel",2);g([v("paginationProxy")],da.prototype,"paginationProxy",2);da=g([V("rowPositionUtils")],da);var Sm=class extends A{createId(t){let{rowIndex:e,rowPinned:i,column:o}=t;return this.createIdFromValues({rowIndex:e,column:o,rowPinned:i})}createIdFromValues(t){let{rowIndex:e,rowPinned:i,column:o}=t;return`${e}.${i??"null"}.${o.getId()}`}equals(t,e){let i=t.column===e.column,o=t.rowPinned===e.rowPinned,r=t.rowIndex===e.rowIndex;return i&&o&&r}};Sm=g([V("cellPositionUtils")],Sm);var id=class{constructor(t){this.cellValueChanges=t}},Jf=class extends id{constructor(t,e,i,o){super(t),this.initialRange=e,this.finalRange=i,this.ranges=o}},wE=class yE{constructor(e){this.actionStack=[],this.maxStackSize=e||yE.DEFAULT_STACK_SIZE,this.actionStack=new Array(this.maxStackSize)}pop(){return this.actionStack.pop()}push(e){e.cellValueChanges&&e.cellValueChanges.length>0&&(this.actionStack.length===this.maxStackSize&&this.actionStack.shift(),this.actionStack.push(e))}clear(){this.actionStack=[]}getCurrentStackSize(){return this.actionStack.length}};wE.DEFAULT_STACK_SIZE=10;var LS=wE,vo=class extends A{constructor(){super(...arguments),this.cellValueChanges=[],this.activeCellEdit=null,this.activeRowEdit=null,this.isPasting=!1,this.isRangeInAction=!1,this.onCellValueChanged=t=>{let e={column:t.column,rowIndex:t.rowIndex,rowPinned:t.rowPinned},i=this.activeCellEdit!==null&&this.cellPositionUtils.equals(this.activeCellEdit,e),o=this.activeRowEdit!==null&&this.rowPositionUtils.sameRow(this.activeRowEdit,e);if(!(i||o||this.isPasting||this.isRangeInAction))return;let{rowPinned:n,rowIndex:s,column:a,oldValue:l,value:d}=t,c={rowPinned:n,rowIndex:s,columnId:a.getColId(),newValue:d,oldValue:l};this.cellValueChanges.push(c)},this.clearStacks=()=>{this.undoStack.clear(),this.redoStack.clear()}}init(){if(!this.gos.get("undoRedoCellEditing"))return;let t=this.gos.get("undoRedoCellEditingLimit");t<=0||(this.undoStack=new LS(t),this.redoStack=new LS(t),this.addRowEditingListeners(),this.addCellEditingListeners(),this.addPasteListeners(),this.addFillListeners(),this.addCellKeyListeners(),this.addManagedListener(this.eventService,f.EVENT_CELL_VALUE_CHANGED,this.onCellValueChanged),this.addManagedListener(this.eventService,f.EVENT_MODEL_UPDATED,e=>{e.keepUndoRedoStack||this.clearStacks()}),this.addManagedListener(this.eventService,f.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.clearStacks),this.addManagedListener(this.eventService,f.EVENT_NEW_COLUMNS_LOADED,this.clearStacks),this.addManagedListener(this.eventService,f.EVENT_COLUMN_GROUP_OPENED,this.clearStacks),this.addManagedListener(this.eventService,f.EVENT_COLUMN_ROW_GROUP_CHANGED,this.clearStacks),this.addManagedListener(this.eventService,f.EVENT_COLUMN_MOVED,this.clearStacks),this.addManagedListener(this.eventService,f.EVENT_COLUMN_PINNED,this.clearStacks),this.addManagedListener(this.eventService,f.EVENT_COLUMN_VISIBLE,this.clearStacks),this.addManagedListener(this.eventService,f.EVENT_ROW_DRAG_END,this.clearStacks),this.ctrlsService.whenReady(e=>{this.gridBodyCtrl=e.gridBodyCtrl}))}getCurrentUndoStackSize(){return this.undoStack?this.undoStack.getCurrentStackSize():0}getCurrentRedoStackSize(){return this.redoStack?this.redoStack.getCurrentStackSize():0}undo(t){let e={type:f.EVENT_UNDO_STARTED,source:t};this.eventService.dispatchEvent(e);let i=this.undoRedo(this.undoStack,this.redoStack,"initialRange","oldValue","undo"),o={type:f.EVENT_UNDO_ENDED,source:t,operationPerformed:i};this.eventService.dispatchEvent(o)}redo(t){let e={type:f.EVENT_REDO_STARTED,source:t};this.eventService.dispatchEvent(e);let i=this.undoRedo(this.redoStack,this.undoStack,"finalRange","newValue","redo"),o={type:f.EVENT_REDO_ENDED,source:t,operationPerformed:i};this.eventService.dispatchEvent(o)}undoRedo(t,e,i,o,r){if(!t)return!1;let n=t.pop();return!n||!n.cellValueChanges?!1:(this.processAction(n,s=>s[o],r),n instanceof Jf?this.processRange(this.rangeService,n.ranges||[n[i]]):this.processCell(n.cellValueChanges),e.push(n),!0)}processAction(t,e,i){t.cellValueChanges.forEach(o=>{let{rowIndex:r,rowPinned:n,columnId:s}=o,a={rowIndex:r,rowPinned:n},l=this.rowPositionUtils.getRowNode(a);l.displayed&&l.setDataValue(s,e(o),i)})}processRange(t,e){let i;t.removeAllCellRanges(!0),e.forEach((o,r)=>{if(!o)return;let n=o.startRow,s=o.endRow;r===e.length-1&&(i={rowPinned:n.rowPinned,rowIndex:n.rowIndex,columnId:o.startColumn.getColId()},this.setLastFocusedCell(i));let a={rowStartIndex:n.rowIndex,rowStartPinned:n.rowPinned,rowEndIndex:s.rowIndex,rowEndPinned:s.rowPinned,columnStart:o.startColumn,columns:o.columns};t.addCellRange(a)})}processCell(t){let e=t[0],{rowIndex:i,rowPinned:o}=e,r={rowIndex:i,rowPinned:o},n=this.rowPositionUtils.getRowNode(r),s={rowPinned:e.rowPinned,rowIndex:n.rowIndex,columnId:e.columnId};this.setLastFocusedCell(s,this.rangeService)}setLastFocusedCell(t,e){let{rowIndex:i,columnId:o,rowPinned:r}=t,n=this.gridBodyCtrl.getScrollFeature(),s=this.columnModel.getGridColumn(o);if(!s)return;n.ensureIndexVisible(i),n.ensureColumnVisible(s);let a={rowIndex:i,column:s,rowPinned:r};this.focusService.setFocusedCell(He(j({},a),{forceBrowserFocus:!0})),e?.setRangeToCell(a)}addRowEditingListeners(){this.addManagedListener(this.eventService,f.EVENT_ROW_EDITING_STARTED,t=>{this.activeRowEdit={rowIndex:t.rowIndex,rowPinned:t.rowPinned}}),this.addManagedListener(this.eventService,f.EVENT_ROW_EDITING_STOPPED,()=>{let t=new id(this.cellValueChanges);this.pushActionsToUndoStack(t),this.activeRowEdit=null})}addCellEditingListeners(){this.addManagedListener(this.eventService,f.EVENT_CELL_EDITING_STARTED,t=>{this.activeCellEdit={column:t.column,rowIndex:t.rowIndex,rowPinned:t.rowPinned}}),this.addManagedListener(this.eventService,f.EVENT_CELL_EDITING_STOPPED,t=>{if(this.activeCellEdit=null,t.valueChanged&&!this.activeRowEdit&&!this.isPasting&&!this.isRangeInAction){let i=new id(this.cellValueChanges);this.pushActionsToUndoStack(i)}})}addPasteListeners(){this.addManagedListener(this.eventService,f.EVENT_PASTE_START,()=>{this.isPasting=!0}),this.addManagedListener(this.eventService,f.EVENT_PASTE_END,()=>{let t=new id(this.cellValueChanges);this.pushActionsToUndoStack(t),this.isPasting=!1})}addFillListeners(){this.addManagedListener(this.eventService,f.EVENT_FILL_START,()=>{this.isRangeInAction=!0}),this.addManagedListener(this.eventService,f.EVENT_FILL_END,t=>{let e=new Jf(this.cellValueChanges,t.initialRange,t.finalRange);this.pushActionsToUndoStack(e),this.isRangeInAction=!1})}addCellKeyListeners(){this.addManagedListener(this.eventService,f.EVENT_KEY_SHORTCUT_CHANGED_CELL_START,()=>{this.isRangeInAction=!0}),this.addManagedListener(this.eventService,f.EVENT_KEY_SHORTCUT_CHANGED_CELL_END,()=>{let t;this.rangeService&&this.gos.get("enableRangeSelection")?t=new Jf(this.cellValueChanges,void 0,void 0,[...this.rangeService.getCellRanges()]):t=new id(this.cellValueChanges),this.pushActionsToUndoStack(t),this.isRangeInAction=!1})}pushActionsToUndoStack(t){this.undoStack.push(t),this.cellValueChanges=[],this.redoStack.clear()}};g([v("focusService")],vo.prototype,"focusService",2);g([v("ctrlsService")],vo.prototype,"ctrlsService",2);g([v("cellPositionUtils")],vo.prototype,"cellPositionUtils",2);g([v("rowPositionUtils")],vo.prototype,"rowPositionUtils",2);g([v("columnModel")],vo.prototype,"columnModel",2);g([Re("rangeService")],vo.prototype,"rangeService",2);g([I],vo.prototype,"init",1);vo=g([V("undoRedoService")],vo);var _d=class extends A{findHeader(t,e){let i,o;if(t.column instanceof ft?i=this.columnModel.getDisplayedGroupAtDirection(t.column,e):(o=`getDisplayedCol${e}`,i=this.columnModel[o](t.column)),!i)return;let{headerRowIndex:r}=t;if(this.getHeaderRowType(r)!=="filter"){let a=[i];for(;i.getParent();)i=i.getParent(),a.push(i);i=a[a.length-1-r]}let{column:n,headerRowIndex:s}=this.getHeaderIndexToFocus(i,r);return{column:n,headerRowIndex:s}}getHeaderIndexToFocus(t,e){let i;if(t instanceof ft&&this.isAnyChildSpanningHeaderHeight(t)&&t.isPadding()){let o=t;i=o.getLeafColumns()[0];let r=i;for(;r!==o;)e++,r=r.getParent()}return{column:i||t,headerRowIndex:e}}isAnyChildSpanningHeaderHeight(t){return t?t.getLeafColumns().some(e=>e.isSpanHeaderHeight()):!1}getColumnVisibleParent(t,e){let i=this.getHeaderRowType(e),o=i==="filter",r=i==="column",n=o?t:t.getParent(),s=e-1,a=s;if(r&&this.isAnyChildSpanningHeaderHeight(t.getParent())){for(;n&&n.isPadding();)n=n.getParent(),s--;a=s,s<0&&(n=t,s=e,a=void 0)}return{column:n,headerRowIndex:s,headerRowIndexWithoutSpan:a}}getColumnVisibleChild(t,e,i="After"){let o=this.getHeaderRowType(e),r=t,n=e+1,s=n;if(o==="group"){let a=t.getDisplayedLeafColumns(),l=i==="After"?a[0]:be(a),d=[],c=l;for(;c.getParent()!==t;)c=c.getParent(),d.push(c);if(r=l,l.isSpanHeaderHeight())for(let u=d.length-1;u>=0;u--){let h=d[u];if(!h.isPadding()){r=h;break}n++}else r=be(d),r||(r=l)}return{column:r,headerRowIndex:n,headerRowIndexWithoutSpan:s}}getHeaderRowType(t){let e=this.ctrlsService.getHeaderRowContainerCtrl();if(e)return e.getRowType(t)}findColAtEdgeForHeaderRow(t,e){let i=this.columnModel.getAllDisplayedColumns(),o=i[e==="start"?0:i.length-1];if(!o)return;let n=this.ctrlsService.getHeaderRowContainerCtrl(o.getPinned()).getRowType(t);if(n=="group"){let s=this.columnModel.getColumnGroupAtLevel(o,t);return{headerRowIndex:t,column:s}}return{headerRowIndex:n==null?-1:t,column:o}}};g([v("columnModel")],_d.prototype,"columnModel",2);g([v("ctrlsService")],_d.prototype,"ctrlsService",2);_d=g([V("headerPositionUtils")],_d);var xm=class{buildColumnDefs(t,e,i){let o=[],r={};return t.forEach(n=>{let s=this.createDefFromColumn(n,e,i),a=!0,l=s,d=n.getOriginalParent(),c=null;for(;d;){let u=null;if(d.isPadding()){d=d.getOriginalParent();continue}let h=r[d.getGroupId()];if(h){h.children.push(l),a=!1;break}if(u=this.createDefFromGroup(d),u&&(u.children=[l],r[u.groupId]=u,l=u,d=d.getOriginalParent()),d!=null&&c===d){a=!1;break}c=d}a&&o.push(l)}),o}createDefFromGroup(t){let e=Qu(t.getColGroupDef(),["children"]);return e&&(e.groupId=t.getGroupId()),e}createDefFromColumn(t,e,i){let o=Qu(t.getColDef());return o.colId=t.getColId(),o.width=t.getActualWidth(),o.rowGroup=t.isRowGroupActive(),o.rowGroupIndex=t.isRowGroupActive()?e.indexOf(t):null,o.pivot=t.isPivotActive(),o.pivotIndex=t.isPivotActive()?i.indexOf(t):null,o.aggFunc=t.isValueActive()?t.getAggFunc():null,o.hide=t.isVisible()?void 0:!0,o.pinned=t.isPinned()?t.getPinned():null,o.sort=t.getSort()?t.getSort():null,o.sortIndex=t.getSortIndex()!=null?t.getSortIndex():null,o}};xm=g([V("columnDefFactory")],xm);var Ed=class{getInitialRowClasses(t){let e=[];return T(t.extraCssClass)&&e.push(t.extraCssClass),e.push("ag-row"),e.push(t.rowFocused?"ag-row-focus":"ag-row-no-focus"),t.fadeRowIn&&e.push("ag-opacity-zero"),e.push(t.rowIsEven?"ag-row-even":"ag-row-odd"),t.rowNode.isRowPinned()&&e.push("ag-row-pinned"),t.rowNode.isSelected()&&e.push("ag-row-selected"),t.rowNode.footer&&e.push("ag-row-footer"),e.push("ag-row-level-"+t.rowLevel),t.rowNode.stub&&e.push("ag-row-loading"),t.fullWidthRow&&e.push("ag-full-width-row"),t.expandable&&(e.push("ag-row-group"),e.push(t.rowNode.expanded?"ag-row-group-expanded":"ag-row-group-contracted")),t.rowNode.dragging&&e.push("ag-row-dragging"),nm(e,this.processClassesFromGridOptions(t.rowNode)),nm(e,this.preProcessRowClassRules(t.rowNode)),e.push(t.printLayout?"ag-row-position-relative":"ag-row-position-absolute"),t.firstRowOnPage&&e.push("ag-row-first"),t.lastRowOnPage&&e.push("ag-row-last"),t.fullWidthRow&&(t.pinned==="left"&&e.push("ag-cell-last-left-pinned"),t.pinned==="right"&&e.push("ag-cell-first-right-pinned")),e}processClassesFromGridOptions(t){let e=[],i=n=>{typeof n=="string"?e.push(n):Array.isArray(n)&&n.forEach(s=>e.push(s))},o=this.gos.get("rowClass");if(o){if(typeof o=="function")return console.warn("AG Grid: rowClass should not be a function, please use getRowClass instead"),[];i(o)}let r=this.gos.getCallback("getRowClass");if(r){let n={data:t.data,node:t,rowIndex:t.rowIndex},s=r(n);i(s)}return e}preProcessRowClassRules(t){let e=[];return this.processRowClassRules(t,i=>{e.push(i)},i=>{}),e}processRowClassRules(t,e,i){let o=this.gos.addGridCommonParams({data:t.data,node:t,rowIndex:t.rowIndex});this.stylingService.processClassRules(void 0,this.gos.get("rowClassRules"),o,e,i)}calculateRowLevel(t){return t.group?t.level:t.parent?t.parent.level+1:0}};g([v("stylingService")],Ed.prototype,"stylingService",2);g([v("gridOptionsService")],Ed.prototype,"gos",2);Ed=g([V("rowCssClassCalculator")],Ed);var ca=class extends A{init(){this.isAccentedSort=this.gos.get("accentedSort"),this.primaryColumnsSortGroups=this.gos.isColumnsSortingCoupledToGroup(),this.addManagedPropertyListener("accentedSort",t=>this.isAccentedSort=t.currentValue),this.addManagedPropertyListener("autoGroupColumnDef",()=>this.primaryColumnsSortGroups=this.gos.isColumnsSortingCoupledToGroup())}doFullSort(t,e){let i=(r,n)=>({currentPos:n,rowNode:r}),o=t.map(i);return o.sort(this.compareRowNodes.bind(this,e)),o.map(r=>r.rowNode)}compareRowNodes(t,e,i){let o=e.rowNode,r=i.rowNode;for(let n=0,s=t.length;n<s;n++){let a=t[n],l=a.sort==="desc",d=this.getValue(o,a.column),c=this.getValue(r,a.column),u,h=this.getComparator(a,o);if(h?u=h(d,c,o,r,l):u=ce.defaultComparator(d,c,this.isAccentedSort),!isNaN(u)&&u!==0)return a.sort==="asc"?u:u*-1}return e.currentPos-i.currentPos}getComparator(t,e){let i=t.column,o=i.getColDef().comparator;if(o!=null)return o;if(!i.getColDef().showRowGroup)return;let r=!e.group&&i.getColDef().field;if(!r)return;let n=this.columnModel.getPrimaryColumn(r);if(n)return n.getColDef().comparator}getValue(t,e){var i,o;if(!this.primaryColumnsSortGroups)return this.valueService.getValue(e,t,!1,!1);if(t.rowGroupColumn===e){if(this.gos.isGroupUseEntireRow(this.columnModel.isPivotActive())){let a=(i=t.allLeafChildren)==null?void 0:i[0];return a?this.valueService.getValue(e,a,!1,!1):void 0}let s=this.columnModel.getGroupDisplayColumnForGroup(e.getId());return s?(o=t.groupData)==null?void 0:o[s.getId()]:void 0}if(!(t.group&&e.getColDef().showRowGroup))return this.valueService.getValue(e,t,!1,!1)}};g([v("valueService")],ca.prototype,"valueService",2);g([v("columnModel")],ca.prototype,"columnModel",2);g([I],ca.prototype,"init",1);ca=g([V("rowNodeSorter")],ca);var nd=class extends A{constructor(){super(...arguments),this.params={},this.ready=!1,this.readyCallbacks=[]}checkReady(){let t=this.params;this.ready=t.gridCtrl!=null&&t.gridBodyCtrl!=null&&t.center!=null&&t.left!=null&&t.right!=null&&t.bottomCenter!=null&&t.bottomLeft!=null&&t.bottomRight!=null&&t.topCenter!=null&&t.topLeft!=null&&t.topRight!=null&&t.stickyTopCenter!=null&&t.stickyTopLeft!=null&&t.stickyTopRight!=null&&t.stickyBottomCenter!=null&&t.stickyBottomLeft!=null&&t.stickyBottomRight!=null&&t.centerHeader!=null&&t.leftHeader!=null&&t.rightHeader!=null&&t.fakeHScrollComp!=null&&t.fakeVScrollComp!=null&&t.gridHeaderCtrl!=null,this.ready&&(this.readyCallbacks.forEach(e=>e(t)),this.readyCallbacks.length=0)}whenReady(t){this.ready?t(this.params):this.readyCallbacks.push(t)}register(t,e){this.params[t]=e,this.checkReady()}registerHeaderContainer(t,e){switch(e){case"left":this.params.leftHeader=t;break;case"right":this.params.rightHeader=t;break;default:this.params.centerHeader=t;break}this.checkReady()}get(t){return this.params[t]}getParams(){return this.params}getGridBodyCtrl(){return this.params.gridBodyCtrl}getHeaderRowContainerCtrls(){return[this.params.leftHeader,this.params.rightHeader,this.params.centerHeader]}getHeaderRowContainerCtrl(t){switch(t){case"left":return this.params.leftHeader;case"right":return this.params.rightHeader;default:return this.params.centerHeader}}};nd.NAME="ctrlsService";nd=g([V(nd.NAME)],nd);var _m=class extends A{constructor(){super(...arguments),this.registry={}}register(t){this.registry[t.controllerName]=t.controllerClass}getInstance(t){let e=this.registry[t];if(e!=null)return new e}};_m=g([V("ctrlsFactory")],_m);var Qn=class extends J{constructor(t,e){super(t),this.direction=e,this.hideTimeout=null}postConstruct(){this.addManagedListener(this.eventService,f.EVENT_SCROLL_VISIBILITY_CHANGED,this.onScrollVisibilityChanged.bind(this)),this.onScrollVisibilityChanged(),this.addOrRemoveCssClass("ag-apple-scrollbar",Bm()||Vo())}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.invisibleScrollbar=Um(),this.invisibleScrollbar&&(this.hideAndShowInvisibleScrollAsNeeded(),this.addActiveListenerToggles()))}addActiveListenerToggles(){let t=["mouseenter","mousedown","touchstart"],e=["mouseleave","touchend"],i=this.getGui();t.forEach(o=>this.addManagedListener(i,o,()=>this.addOrRemoveCssClass("ag-scrollbar-active",!0))),e.forEach(o=>this.addManagedListener(i,o,()=>this.addOrRemoveCssClass("ag-scrollbar-active",!1)))}onScrollVisibilityChanged(){this.invisibleScrollbar===void 0&&this.initialiseInvisibleScrollbar(),this.animationFrameService.requestAnimationFrame(()=>this.setScrollVisible())}hideAndShowInvisibleScrollAsNeeded(){this.addManagedListener(this.eventService,f.EVENT_BODY_SCROLL,t=>{t.direction===this.direction&&(this.hideTimeout!==null&&(window.clearTimeout(this.hideTimeout),this.hideTimeout=null),this.addOrRemoveCssClass("ag-scrollbar-scrolling",!0))}),this.addManagedListener(this.eventService,f.EVENT_BODY_SCROLL_END,()=>{this.hideTimeout=window.setTimeout(()=>{this.addOrRemoveCssClass("ag-scrollbar-scrolling",!1),this.hideTimeout=null},400)})}attemptSettingScrollPosition(t){let e=this.getViewport();Tm(()=>ni(e),()=>this.setScrollPosition(t),100)}getViewport(){return this.eViewport}getContainer(){return this.eContainer}onScrollCallback(t){this.addManagedListener(this.getViewport(),"scroll",t)}};g([k("eViewport")],Qn.prototype,"eViewport",2);g([k("eContainer")],Qn.prototype,"eContainer",2);g([v("scrollVisibleService")],Qn.prototype,"scrollVisibleService",2);g([v("ctrlsService")],Qn.prototype,"ctrlsService",2);g([v("animationFrameService")],Qn.prototype,"animationFrameService",2);var Xn=class bE extends Qn{constructor(){super(bE.TEMPLATE,"horizontal")}postConstruct(){super.postConstruct();let e=this.setFakeHScrollSpacerWidths.bind(this);this.addManagedListener(this.eventService,f.EVENT_DISPLAYED_COLUMNS_CHANGED,e),this.addManagedListener(this.eventService,f.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,e),this.addManagedListener(this.eventService,f.EVENT_PINNED_ROW_DATA_CHANGED,this.onPinnedRowDataChanged.bind(this)),this.addManagedPropertyListener("domLayout",e),this.ctrlsService.register("fakeHScrollComp",this),this.createManagedBean(new fa(i=>this.eContainer.style.width=`${i}px`)),this.addManagedPropertyListeners(["suppressHorizontalScroll"],this.onScrollVisibilityChanged.bind(this))}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.enableRtl=this.gos.get("enableRtl"),super.initialiseInvisibleScrollbar(),this.invisibleScrollbar&&this.refreshCompBottom())}onPinnedRowDataChanged(){this.refreshCompBottom()}refreshCompBottom(){if(!this.invisibleScrollbar)return;let e=this.pinnedRowModel.getPinnedBottomTotalHeight();this.getGui().style.bottom=`${e}px`}onScrollVisibilityChanged(){super.onScrollVisibilityChanged(),this.setFakeHScrollSpacerWidths()}setFakeHScrollSpacerWidths(){let e=this.scrollVisibleService.isVerticalScrollShowing(),i=this.columnModel.getDisplayedColumnsRightWidth(),o=!this.enableRtl&&e,r=this.gos.getScrollbarWidth();o&&(i+=r),Ii(this.eRightSpacer,i),this.eRightSpacer.classList.toggle("ag-scroller-corner",i<=r);let n=this.columnModel.getDisplayedColumnsLeftWidth();this.enableRtl&&e&&(n+=r),Ii(this.eLeftSpacer,n),this.eLeftSpacer.classList.toggle("ag-scroller-corner",n<=r)}setScrollVisible(){let e=this.scrollVisibleService.isHorizontalScrollShowing(),i=this.invisibleScrollbar,o=this.gos.get("suppressHorizontalScroll"),r=e&&this.gos.getScrollbarWidth()||0,s=o?0:r===0&&i?16:r;this.addOrRemoveCssClass("ag-scrollbar-invisible",i),Sn(this.getGui(),s),Sn(this.eViewport,s),Sn(this.eContainer,s),this.setDisplayed(e,{skipAriaHidden:!0})}getScrollPosition(){return gd(this.getViewport(),this.enableRtl)}setScrollPosition(e){ni(this.getViewport())||this.attemptSettingScrollPosition(e),pd(this.getViewport(),e,this.enableRtl)}};Xn.TEMPLATE=`<div class="ag-body-horizontal-scroll" aria-hidden="true">
            <div class="ag-horizontal-left-spacer" ref="eLeftSpacer"></div>
            <div class="ag-body-horizontal-scroll-viewport" ref="eViewport">
                <div class="ag-body-horizontal-scroll-container" ref="eContainer"></div>
            </div>
            <div class="ag-horizontal-right-spacer" ref="eRightSpacer"></div>
        </div>`;g([k("eLeftSpacer")],Xn.prototype,"eLeftSpacer",2);g([k("eRightSpacer")],Xn.prototype,"eRightSpacer",2);g([v("columnModel")],Xn.prototype,"columnModel",2);g([v("pinnedRowModel")],Xn.prototype,"pinnedRowModel",2);g([I],Xn.prototype,"postConstruct",1);var qk=Xn,Dd=class extends A{postConstruct(){let t=this.checkContainerWidths.bind(this);this.addManagedListener(this.eventService,f.EVENT_DISPLAYED_COLUMNS_CHANGED,t),this.addManagedListener(this.eventService,f.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,t),this.addManagedPropertyListener("domLayout",t)}checkContainerWidths(){let t=this.gos.isDomLayout("print"),e=t?0:this.columnModel.getDisplayedColumnsLeftWidth(),i=t?0:this.columnModel.getDisplayedColumnsRightWidth();e!=this.leftWidth&&(this.leftWidth=e,this.eventService.dispatchEvent({type:f.EVENT_LEFT_PINNED_WIDTH_CHANGED})),i!=this.rightWidth&&(this.rightWidth=i,this.eventService.dispatchEvent({type:f.EVENT_RIGHT_PINNED_WIDTH_CHANGED}))}getPinnedRightWidth(){return this.rightWidth}getPinnedLeftWidth(){return this.leftWidth}};g([v("columnModel")],Dd.prototype,"columnModel",2);g([I],Dd.prototype,"postConstruct",1);Dd=g([V("pinnedWidthService")],Dd);var ua=class extends A{constructor(){super(...arguments),this.events=[]}postConstruct(){this.rowModel.getType()=="clientSide"&&(this.clientSideRowModel=this.rowModel)}dispatchExpanded(t,e){if(this.clientSideRowModel==null){this.eventService.dispatchEvent(t);return}this.events.push(t);let i=()=>{this.clientSideRowModel&&this.clientSideRowModel.onRowGroupOpened(),this.events.forEach(o=>this.eventService.dispatchEvent(o)),this.events=[]};e?i():(this.dispatchExpandedDebounced==null&&(this.dispatchExpandedDebounced=this.animationFrameService.debounce(i)),this.dispatchExpandedDebounced())}};g([v("animationFrameService")],ua.prototype,"animationFrameService",2);g([v("rowModel")],ua.prototype,"rowModel",2);g([I],ua.prototype,"postConstruct",1);ua=g([V("rowNodeEventThrottle")],ua);var Kk={columnsMenuParams:{version:"31.1",message:"Use `columnChooserParams` instead."},suppressMenu:{version:"31.1",message:"Use `suppressHeaderMenuButton` instead."},suppressCellFlash:{version:"31.2",message:"Use `enableCellChangeFlash={false}` in the ColDef"},dndSource:{version:"31.2",message:"This feature has been replaced by `Row Dragging to an External DropZone`."},dndSourceOnRowDrag:{version:"31.2",message:"This feature has been replaced by `Row Dragging to an External DropZone`."}},xr=(t,e)=>{var i;return((i=e.rowModelType)!=null?i:"clientSide")==="clientSide"?{module:"@ag-grid-enterprise/row-grouping"}:null},$k={enableRowGroup:xr,rowGroup:xr,rowGroupIndex:xr,enablePivot:xr,enableValue:xr,pivot:xr,pivotIndex:xr,aggFunc:xr,cellEditor:t=>t.cellEditor==="agRichSelect"||t.cellEditor==="agRichSelectCellEditor"?{module:"@ag-grid-enterprise/rich-select"}:null,menuTabs:t=>{var e;let i=["columnsMenuTab","generalMenuTab"];return(e=t.menuTabs)!=null&&e.some(o=>i.includes(o))?{module:"@ag-grid-enterprise/menu"}:null},columnsMenuParams:{module:["@ag-grid-enterprise/menu","@ag-grid-enterprise/column-tool-panel"]},columnChooserParams:{module:["@ag-grid-enterprise/menu","@ag-grid-enterprise/column-tool-panel"]},headerCheckboxSelection:{supportedRowModels:["clientSide","serverSide"],dependencies:(t,{rowSelection:e})=>e==="multiple"?null:"headerCheckboxSelection is only supported with rowSelection=multiple"},headerCheckboxSelectionFilteredOnly:{supportedRowModels:["clientSide"],dependencies:(t,{rowSelection:e})=>e==="multiple"?null:"headerCheckboxSelectionFilteredOnly is only supported with rowSelection=multiple"},headerCheckboxSelectionCurrentPageOnly:{supportedRowModels:["clientSide"],dependencies:(t,{rowSelection:e})=>e==="multiple"?null:"headerCheckboxSelectionCurrentPageOnly is only supported with rowSelection=multiple"},children:()=>Ks},Yk={headerName:void 0,columnGroupShow:void 0,headerClass:void 0,toolPanelClass:void 0,headerValueGetter:void 0,pivotKeys:void 0,groupId:void 0,colId:void 0,sort:void 0,initialSort:void 0,field:void 0,type:void 0,cellDataType:void 0,tooltipComponent:void 0,tooltipField:void 0,headerTooltip:void 0,cellClass:void 0,showRowGroup:void 0,filter:void 0,initialAggFunc:void 0,defaultAggFunc:void 0,aggFunc:void 0,pinned:void 0,initialPinned:void 0,chartDataType:void 0,cellAriaRole:void 0,cellEditorPopupPosition:void 0,headerGroupComponent:void 0,headerGroupComponentParams:void 0,cellStyle:void 0,cellRenderer:void 0,cellRendererParams:void 0,cellEditor:void 0,cellEditorParams:void 0,filterParams:void 0,pivotValueColumn:void 0,headerComponent:void 0,headerComponentParams:void 0,floatingFilterComponent:void 0,floatingFilterComponentParams:void 0,tooltipComponentParams:void 0,refData:void 0,columnsMenuParams:void 0,columnChooserParams:void 0,children:void 0,sortingOrder:void 0,allowedAggFuncs:void 0,menuTabs:void 0,pivotTotalColumnIds:void 0,cellClassRules:void 0,icons:void 0,sortIndex:void 0,initialSortIndex:void 0,flex:void 0,initialFlex:void 0,width:void 0,initialWidth:void 0,minWidth:void 0,maxWidth:void 0,rowGroupIndex:void 0,initialRowGroupIndex:void 0,pivotIndex:void 0,initialPivotIndex:void 0,suppressCellFlash:void 0,suppressColumnsToolPanel:void 0,suppressFiltersToolPanel:void 0,openByDefault:void 0,marryChildren:void 0,suppressStickyLabel:void 0,hide:void 0,initialHide:void 0,rowGroup:void 0,initialRowGroup:void 0,pivot:void 0,initialPivot:void 0,checkboxSelection:void 0,showDisabledCheckboxes:void 0,headerCheckboxSelection:void 0,headerCheckboxSelectionFilteredOnly:void 0,headerCheckboxSelectionCurrentPageOnly:void 0,suppressMenu:void 0,suppressHeaderMenuButton:void 0,suppressMovable:void 0,lockPosition:void 0,lockVisible:void 0,lockPinned:void 0,unSortIcon:void 0,suppressSizeToFit:void 0,suppressAutoSize:void 0,enableRowGroup:void 0,enablePivot:void 0,enableValue:void 0,editable:void 0,suppressPaste:void 0,suppressNavigable:void 0,enableCellChangeFlash:void 0,rowDrag:void 0,dndSource:void 0,autoHeight:void 0,wrapText:void 0,sortable:void 0,resizable:void 0,singleClickEdit:void 0,floatingFilter:void 0,cellEditorPopup:void 0,suppressFillHandle:void 0,wrapHeaderText:void 0,autoHeaderHeight:void 0,dndSourceOnRowDrag:void 0,valueGetter:void 0,valueSetter:void 0,filterValueGetter:void 0,keyCreator:void 0,valueFormatter:void 0,valueParser:void 0,comparator:void 0,equals:void 0,pivotComparator:void 0,suppressKeyboardEvent:void 0,suppressHeaderKeyboardEvent:void 0,colSpan:void 0,rowSpan:void 0,getQuickFilterText:void 0,onCellValueChanged:void 0,onCellClicked:void 0,onCellDoubleClicked:void 0,onCellContextMenu:void 0,rowDragText:void 0,tooltipValueGetter:void 0,cellRendererSelector:void 0,cellEditorSelector:void 0,suppressSpanHeaderHeight:void 0,useValueFormatterForExport:void 0,useValueParserForImport:void 0,mainMenuItems:void 0,contextMenuItems:void 0,suppressFloatingFilterButton:void 0,suppressHeaderFilterButton:void 0,suppressHeaderContextMenu:void 0,loadingCellRenderer:void 0,loadingCellRendererParams:void 0,loadingCellRendererSelector:void 0},Qk=Object.keys(Yk),Ks={objectName:"colDef",allProperties:Qk,docsUrl:"column-properties/",deprecations:Kk,validations:$k},Xk={enableChartToolPanelsButton:{version:"29"},functionsPassive:{version:"29.2"},onColumnRowGroupChangeRequest:{version:"29.2"},onColumnPivotChangeRequest:{version:"29.2"},onColumnValueChangeRequest:{version:"29.2"},onColumnAggFuncChangeRequest:{version:"29.2"},serverSideFilterAllLevels:{version:"30",message:"All server-side group levels are now filtered by default. This can be toggled using `serverSideOnlyRefreshFilteredGroups`."},suppressAggAtRootLevel:{version:"30",message:"The root level aggregation is now suppressed by default. This can be toggled using  `alwaysAggregateAtRootLevel`."},excludeHiddenColumnsFromQuickFilter:{version:"30",message:"Hidden columns are now excluded from the Quick Filter by default. This can be toggled using `includeHiddenColumnsInQuickFilter`."},enterMovesDown:{version:"30",renamed:"enterNavigatesVertically"},enterMovesDownAfterEdit:{version:"30",renamed:"enterNavigatesVerticallyAfterEdit"},suppressParentsInRowNodes:{version:"30.2",message:"Using suppressParentsInRowNodes is no longer recommended. To serialize nodes it is now recommended to instead remove the parent node reference before serialization."},advancedFilterModel:{version:"31",message:"Use `initialState.filter.advancedFilterModel` instead."},suppressAsyncEvents:{version:"31",message:"Events should be handled asynchronously."},cellFadeDelay:{version:"31.1",renamed:"cellFadeDuration"},cellFlashDelay:{version:"31.1",renamed:"cellFlashDuration"},suppressServerSideInfiniteScroll:{version:"31.1"},serverSideSortOnServer:{version:"31.1"},serverSideFilterOnServer:{version:"31.1"},enableCellChangeFlash:{version:"31.2",message:"Use `enableCellChangeFlash` in the `ColDef` or `defaultColDef` for all columns."},groupIncludeFooter:{version:"31.3",message:"Use `groupTotalRow` instead."},groupIncludeTotalFooter:{version:"31.3",message:"Use `grandTotalRow` instead."}},Zk={suppressContextMenu:!1,preventDefaultOnContextMenu:!1,allowContextMenuWithControlKey:!1,suppressMenuHide:!1,enableBrowserTooltips:!1,tooltipTrigger:"hover",tooltipShowDelay:2e3,tooltipHideDelay:1e4,tooltipMouseTrack:!1,tooltipShowMode:"standard",tooltipInteraction:!1,copyHeadersToClipboard:!1,copyGroupHeadersToClipboard:!1,clipboardDelimiter:"	",suppressCopyRowsToClipboard:!1,suppressCopySingleCellRanges:!1,suppressLastEmptyLineOnPaste:!1,suppressClipboardPaste:!1,suppressClipboardApi:!1,suppressCutToClipboard:!1,maintainColumnOrder:!1,suppressFieldDotNotation:!1,allowDragFromColumnsToolPanel:!1,suppressMovableColumns:!1,suppressColumnMoveAnimation:!1,suppressDragLeaveHidesColumns:!1,suppressRowGroupHidesColumns:!1,suppressAutoSize:!1,autoSizePadding:20,skipHeaderOnAutoSize:!1,singleClickEdit:!1,suppressClickEdit:!1,readOnlyEdit:!1,stopEditingWhenCellsLoseFocus:!1,enterNavigatesVertically:!1,enterNavigatesVerticallyAfterEdit:!1,enableCellEditingOnBackspace:!1,undoRedoCellEditing:!1,undoRedoCellEditingLimit:10,suppressCsvExport:!1,suppressExcelExport:!1,cacheQuickFilter:!1,includeHiddenColumnsInQuickFilter:!1,excludeChildrenWhenTreeDataFiltering:!1,enableAdvancedFilter:!1,includeHiddenColumnsInAdvancedFilter:!1,enableCharts:!1,suppressChartToolPanelsButton:!1,masterDetail:!1,keepDetailRows:!1,keepDetailRowsCount:10,detailRowAutoHeight:!1,tabIndex:0,rowBuffer:10,valueCache:!1,valueCacheNeverExpires:!1,enableCellExpressions:!1,suppressTouch:!1,suppressFocusAfterRefresh:!1,suppressAsyncEvents:!1,suppressBrowserResizeObserver:!1,suppressPropertyNamesCheck:!1,suppressChangeDetection:!1,debug:!1,suppressLoadingOverlay:!1,suppressNoRowsOverlay:!1,pagination:!1,paginationPageSize:100,paginationPageSizeSelector:!0,paginationAutoPageSize:!1,paginateChildRows:!1,suppressPaginationPanel:!1,pivotMode:!1,pivotPanelShow:"never",pivotDefaultExpanded:0,pivotSuppressAutoColumn:!1,suppressExpandablePivotGroups:!1,functionsReadOnly:!1,suppressAggFuncInHeader:!1,alwaysAggregateAtRootLevel:!1,aggregateOnlyChangedColumns:!1,suppressAggFilteredOnly:!1,removePivotHeaderRowWhenSingleValueColumn:!1,animateRows:!0,enableCellChangeFlash:!1,cellFlashDelay:500,cellFlashDuration:500,cellFadeDelay:1e3,cellFadeDuration:1e3,allowShowChangeAfterFilter:!1,domLayout:"normal",ensureDomOrder:!1,enableRtl:!1,suppressColumnVirtualisation:!1,suppressMaxRenderedRowRestriction:!1,suppressRowVirtualisation:!1,rowDragManaged:!1,suppressRowDrag:!1,suppressMoveWhenRowDragging:!1,rowDragEntireRow:!1,rowDragMultiRow:!1,embedFullWidthRows:!1,groupDisplayType:"singleColumn",groupDefaultExpanded:0,groupMaintainOrder:!1,groupSelectsChildren:!1,groupIncludeTotalFooter:!1,groupSuppressBlankHeader:!1,groupSelectsFiltered:!1,showOpenedGroup:!1,groupRemoveSingleChildren:!1,groupRemoveLowestSingleChildren:!1,groupHideOpenParents:!1,groupAllowUnbalanced:!1,rowGroupPanelShow:"never",suppressMakeColumnVisibleAfterUnGroup:!1,treeData:!1,rowGroupPanelSuppressSort:!1,suppressGroupRowsSticky:!1,rowModelType:"clientSide",asyncTransactionWaitMillis:50,suppressModelUpdateAfterUpdateTransaction:!1,cacheOverflowSize:1,infiniteInitialRowCount:1,serverSideInitialRowCount:1,suppressServerSideInfiniteScroll:!1,cacheBlockSize:100,maxBlocksInCache:-1,maxConcurrentDatasourceRequests:2,blockLoadDebounceMillis:0,purgeClosedRowNodes:!1,serverSideSortAllLevels:!1,serverSideOnlyRefreshFilteredGroups:!1,serverSideSortOnServer:!1,serverSideFilterOnServer:!1,serverSidePivotResultFieldSeparator:"_",viewportRowModelPageSize:5,viewportRowModelBufferSize:5,alwaysShowHorizontalScroll:!1,alwaysShowVerticalScroll:!1,debounceVerticalScrollbar:!1,suppressHorizontalScroll:!1,suppressScrollOnNewData:!1,suppressScrollWhenPopupsAreOpen:!1,suppressAnimationFrame:!1,suppressMiddleClickScrolls:!1,suppressPreventDefaultOnMouseWheel:!1,rowMultiSelectWithClick:!1,suppressRowDeselection:!1,suppressRowClickSelection:!1,suppressCellFocus:!1,suppressHeaderFocus:!1,suppressMultiRangeSelection:!1,enableCellTextSelection:!1,enableRangeSelection:!1,enableRangeHandle:!1,enableFillHandle:!1,fillHandleDirection:"xy",suppressClearOnFillReduction:!1,accentedSort:!1,unSortIcon:!1,suppressMultiSort:!1,alwaysMultiSort:!1,suppressMaintainUnsortedOrder:!1,suppressRowHoverHighlight:!1,suppressRowTransform:!1,columnHoverHighlight:!1,deltaSort:!1,enableGroupEdit:!1,suppressGroupMaintainValueType:!1,functionsPassive:!1,groupLockGroupColumns:0,serverSideEnableClientSideSort:!1,suppressServerSideFullWidthLoadingRow:!1,pivotMaxGeneratedColumns:-1},Jk={sideBar:{module:"@ag-grid-enterprise/side-bar"},statusBar:{module:"@ag-grid-enterprise/status-bar"},enableCharts:{module:"@ag-grid-enterprise/charts"},getMainMenuItems:{module:"@ag-grid-enterprise/menu"},getContextMenuItems:{module:"@ag-grid-enterprise/menu"},allowContextMenuWithControlKey:{module:"@ag-grid-enterprise/menu"},enableAdvancedFilter:{module:"@ag-grid-enterprise/advanced-filter"},treeData:{supportedRowModels:["clientSide","serverSide"],module:"@ag-grid-enterprise/row-grouping",dependencies:t=>{var e;let i=(e=t.rowModelType)!=null?e:"clientSide";switch(i){case"clientSide":let o=`treeData requires 'getDataPath' in the ${i} row model.`;return t.getDataPath?null:o;case"serverSide":let r=`treeData requires 'isServerSideGroup' and 'getServerSideGroupKey' in the ${i} row model.`;return t.isServerSideGroup&&t.getServerSideGroupKey?null:r}return null}},masterDetail:{module:"@ag-grid-enterprise/master-detail"},enableRangeSelection:{module:"@ag-grid-enterprise/range-selection"},enableRangeHandle:{dependencies:{enableRangeSelection:[!0]}},enableFillHandle:{dependencies:{enableRangeSelection:[!0]}},groupDefaultExpanded:{supportedRowModels:["clientSide"]},groupIncludeFooter:{supportedRowModels:["clientSide","serverSide"],dependencies:t=>{var e;switch((e=t.rowModelType)!=null?e:"clientSide"){case"clientSide":return null;case"serverSide":return t.suppressServerSideInfiniteScroll?"groupIncludeFooter is not supported alongside suppressServerSideInfiniteScroll":null}return null}},groupIncludeTotalFooter:{supportedRowModels:["clientSide"]},groupRemoveSingleChildren:{dependencies:{groupHideOpenParents:[void 0,!1],groupRemoveLowestSingleChildren:[void 0,!1]}},groupRemoveLowestSingleChildren:{dependencies:{groupHideOpenParents:[void 0,!1],groupRemoveSingleChildren:[void 0,!1]}},groupSelectsChildren:{dependencies:{rowSelection:["multiple"]}},suppressParentsInRowNodes:{dependencies:{groupSelectsChildren:[void 0,!1]}},viewportDatasource:{supportedRowModels:["viewport"],module:"@ag-grid-enterprise/viewport-row-model"},serverSideDatasource:{supportedRowModels:["serverSide"],module:"@ag-grid-enterprise/server-side-row-model"},cacheBlockSize:{supportedRowModels:["serverSide","infinite"]},datasource:{supportedRowModels:["infinite"],module:"@ag-grid-community/infinite-row-model"},rowData:{supportedRowModels:["clientSide"],module:"@ag-grid-community/client-side-row-model"},columnDefs:()=>Ks,defaultColDef:()=>Ks,defaultColGroupDef:()=>Ks,autoGroupColumnDef:()=>Ks},eL={objectName:"gridOptions",allProperties:[...cd.ALL_PROPERTIES,...Fd.EVENT_CALLBACKS],propertyExceptions:["api","columnApi"],docsUrl:"grid-options/",deprecations:Xk,validations:Jk},_e=class{constructor(){this.destroyed=!1,this.domDataKey="__AG_"+Math.random().toString(),this.propertyEventService=new Yi,this.globalEventHandlerFactory=t=>(e,i)=>{if(this.destroyed)return;let o=Bu.has(e);if(o&&!t||!o&&t)return;let r=Fd.getCallbackForEvent(e),n=this.gridOptions[r];typeof n=="function"&&this.frameworkOverrides.wrapOutgoing(()=>{n(i)})}}get context(){return this.gridOptions.context}init(){this.columnApi=new Pn(this.api);let t=!this.get("suppressAsyncEvents");this.eventService.addGlobalListener(this.globalEventHandlerFactory().bind(this),t),this.eventService.addGlobalListener(this.globalEventHandlerFactory(!0).bind(this),!1),this.propertyEventService.setFrameworkOverrides(this.frameworkOverrides),this.getScrollbarWidth()}destroy(){this.destroyed=!0,this.columnApi=void 0}get(t){var e;return(e=this.gridOptions[t])!=null?e:Zk[t]}getCallback(t){return this.mergeGridCommonParams(this.gridOptions[t])}exists(t){return T(this.gridOptions[t])}mergeGridCommonParams(t){return t&&(i=>{let o=i;return o.api=this.api,o.columnApi=this.columnApi,o.context=this.context,t(o)})}static toBoolean(t){return typeof t=="boolean"?t:typeof t=="string"?t.toUpperCase()==="TRUE"||t=="":!1}static toNumber(t){if(typeof t=="number")return t;if(typeof t=="string"){let e=parseInt(t);return isNaN(e)?void 0:e}}static toConstrainedNum(t,e){return i=>{let o=_e.toNumber(i);if(!(o==null||o<t||o>e))return o}}static getCoercedValue(t,e){let i=_e.PROPERTY_COERCIONS.get(t);return i?i(e):e}static getCoercedGridOptions(t){let e={};return Object.entries(t).forEach(([i,o])=>{let r=_e.getCoercedValue(i,o);e[i]=r}),e}updateGridOptions({options:t,force:e,source:i="api"}){let o={id:_e.changeSetId++,properties:[]},r=[];Object.entries(t).forEach(([n,s])=>{i==="api"&&EF[n]&&q(`${n} is an initial property and cannot be updated.`);let a=_e.getCoercedValue(n,s),l=e||typeof a=="object"&&i==="api",d=this.gridOptions[n];if(l||d!==a){this.gridOptions[n]=a;let c={type:n,currentValue:a,previousValue:d,changeSet:o,source:i};r.push(c)}}),this.validationService.processGridOptions(this.gridOptions),o.properties=r.map(n=>n.type),r.forEach(n=>{this.gridOptions.debug&&console.log(`AG Grid: Updated property ${n.type} from `,n.previousValue," to  ",n.currentValue),this.propertyEventService.dispatchEvent(n)})}addEventListener(t,e){this.propertyEventService.addEventListener(t,e)}removeEventListener(t,e){this.propertyEventService.removeEventListener(t,e)}getScrollbarWidth(){if(this.scrollbarWidth==null){let e=typeof this.gridOptions.scrollbarWidth=="number"&&this.gridOptions.scrollbarWidth>=0?this.gridOptions.scrollbarWidth:Gx();e!=null&&(this.scrollbarWidth=e,this.eventService.dispatchEvent({type:f.EVENT_SCROLLBAR_WIDTH_CHANGED}))}return this.scrollbarWidth}isRowModelType(t){return this.gridOptions.rowModelType===t||t==="clientSide"&&X(this.gridOptions.rowModelType)}isDomLayout(t){var e;return((e=this.gridOptions.domLayout)!=null?e:"normal")===t}isRowSelection(){return this.gridOptions.rowSelection==="single"||this.gridOptions.rowSelection==="multiple"}useAsyncEvents(){return!this.get("suppressAsyncEvents")}isGetRowHeightFunction(){return typeof this.gridOptions.getRowHeight=="function"}getRowHeightForNode(t,e=!1,i){if(i==null&&(i=this.environment.getDefaultRowHeight()),this.isGetRowHeightFunction()){if(e)return{height:i,estimated:!0};let r={node:t,data:t.data},n=this.getCallback("getRowHeight")(r);if(this.isNumeric(n))return n===0&&q("The return of `getRowHeight` cannot be zero. If the intention is to hide rows, use a filter instead."),{height:Math.max(1,n),estimated:!1}}return t.detail&&this.get("masterDetail")?this.getMasterDetailRowHeight():{height:this.gridOptions.rowHeight&&this.isNumeric(this.gridOptions.rowHeight)?this.gridOptions.rowHeight:i,estimated:!1}}getMasterDetailRowHeight(){return this.get("detailRowAutoHeight")?{height:1,estimated:!1}:this.isNumeric(this.gridOptions.detailRowHeight)?{height:this.gridOptions.detailRowHeight,estimated:!1}:{height:300,estimated:!1}}getRowHeightAsNumber(){if(!this.gridOptions.rowHeight||X(this.gridOptions.rowHeight))return this.environment.getDefaultRowHeight();let t=this.environment.refreshRowHeightVariable();return t!==-1?t:(console.warn("AG Grid row height must be a number if not using standard row model"),this.environment.getDefaultRowHeight())}isNumeric(t){return!isNaN(t)&&typeof t=="number"&&isFinite(t)}getDomDataKey(){return this.domDataKey}getDomData(t,e){let i=t[this.getDomDataKey()];return i?i[e]:void 0}setDomData(t,e,i){let o=this.getDomDataKey(),r=t[o];X(r)&&(r={},t[o]=r),r[e]=i}getDocument(){let t=null;return this.gridOptions.getDocument&&T(this.gridOptions.getDocument)?t=this.gridOptions.getDocument():this.eGridDiv&&(t=this.eGridDiv.ownerDocument),t&&T(t)?t:document}getWindow(){return this.getDocument().defaultView||window}getRootNode(){return this.eGridDiv.getRootNode()}getActiveDomElement(){return this.getRootNode().activeElement}getAsyncTransactionWaitMillis(){return T(this.gridOptions.asyncTransactionWaitMillis)?this.gridOptions.asyncTransactionWaitMillis:50}isAnimateRows(){return this.get("ensureDomOrder")?!1:this.get("animateRows")}isGroupRowsSticky(){return!(this.get("paginateChildRows")||this.get("groupHideOpenParents")||this.isDomLayout("print"))}isColumnsSortingCoupledToGroup(){let t=this.gridOptions.autoGroupColumnDef;return!t?.comparator&&!this.get("treeData")}getGroupAggFiltering(){let t=this.gridOptions.groupAggFiltering;if(typeof t=="function")return this.getCallback("groupAggFiltering");if(t===!0)return()=>!0}getGrandTotalRow(){let t=this.gridOptions.grandTotalRow;if(t)return t;if(this.gridOptions.groupIncludeTotalFooter)return"bottom"}getGroupTotalRowCallback(){let t=this.get("groupTotalRow");if(typeof t=="function")return this.getCallback("groupTotalRow");if(t)return()=>t;let e=this.get("groupIncludeFooter");if(typeof e=="function"){let i=this.getCallback("groupIncludeFooter");return o=>i(o)?"bottom":void 0}return()=>e?"bottom":void 0}isGroupMultiAutoColumn(){return this.gridOptions.groupDisplayType?this.gridOptions.groupDisplayType==="multipleColumns":this.get("groupHideOpenParents")}isGroupUseEntireRow(t){return t?!1:this.gridOptions.groupDisplayType==="groupRows"}getGridCommonParams(){return{api:this.api,columnApi:this.columnApi,context:this.context}}addGridCommonParams(t){let e=t;return e.api=this.api,e.columnApi=this.columnApi,e.context=this.context,e}};_e.PROPERTY_COERCIONS=new Map([...cd.BOOLEAN_PROPERTIES.map(t=>[t,_e.toBoolean]),...cd.NUMBER_PROPERTIES.map(t=>[t,_e.toNumber]),["groupAggFiltering",t=>typeof t=="function"?t:_e.toBoolean(t)],["pageSize",_e.toConstrainedNum(1,Number.MAX_VALUE)],["autoSizePadding",_e.toConstrainedNum(0,Number.MAX_VALUE)],["keepDetailRowsCount",_e.toConstrainedNum(1,Number.MAX_VALUE)],["rowBuffer",_e.toConstrainedNum(0,Number.MAX_VALUE)],["infiniteInitialRowCount",_e.toConstrainedNum(1,Number.MAX_VALUE)],["cacheOverflowSize",_e.toConstrainedNum(1,Number.MAX_VALUE)],["cacheBlockSize",_e.toConstrainedNum(1,Number.MAX_VALUE)],["serverSideInitialRowCount",_e.toConstrainedNum(1,Number.MAX_VALUE)],["viewportRowModelPageSize",_e.toConstrainedNum(1,Number.MAX_VALUE)],["viewportRowModelBufferSize",_e.toConstrainedNum(0,Number.MAX_VALUE)]]);_e.changeSetId=0;g([v("gridOptions")],_e.prototype,"gridOptions",2);g([v("eventService")],_e.prototype,"eventService",2);g([v("environment")],_e.prototype,"environment",2);g([v("frameworkOverrides")],_e.prototype,"frameworkOverrides",2);g([v("eGridDiv")],_e.prototype,"eGridDiv",2);g([v("validationService")],_e.prototype,"validationService",2);g([v("gridApi")],_e.prototype,"api",2);g([I],_e.prototype,"init",1);g([Kt],_e.prototype,"destroy",1);_e=g([V("gridOptionsService")],_e);var Em=class extends A{getLocaleTextFunc(){let t=this.gos.getCallback("getLocaleText");if(t)return(i,o,r)=>t({key:i,defaultValue:o,variableValues:r});let e=this.gos.get("localeText");return(i,o,r)=>{let n=e&&e[i];if(n&&r&&r.length){let s=0;for(;!(s>=r.length||n.indexOf("${variable}")===-1);)n=n.replace("${variable}",r[s++])}return n??o}}};Em=g([V("localeService")],Em);var Mv=class SE extends Qn{constructor(){super(SE.TEMPLATE,"vertical")}postConstruct(){super.postConstruct(),this.createManagedBean(new Nh(this.eContainer)),this.ctrlsService.register("fakeVScrollComp",this),this.addManagedListener(this.eventService,f.EVENT_ROW_CONTAINER_HEIGHT_CHANGED,this.onRowContainerHeightChanged.bind(this))}setScrollVisible(){let e=this.scrollVisibleService.isVerticalScrollShowing(),i=this.invisibleScrollbar,o=e&&this.gos.getScrollbarWidth()||0,r=o===0&&i?16:o;this.addOrRemoveCssClass("ag-scrollbar-invisible",i),Ii(this.getGui(),r),Ii(this.eViewport,r),Ii(this.eContainer,r),this.setDisplayed(e,{skipAriaHidden:!0})}onRowContainerHeightChanged(){let{ctrlsService:e}=this,o=e.getGridBodyCtrl().getBodyViewportElement(),r=this.getScrollPosition(),n=o.scrollTop;r!=n&&this.setScrollPosition(n,!0)}getScrollPosition(){return this.getViewport().scrollTop}setScrollPosition(e,i){!i&&!ni(this.getViewport())&&this.attemptSettingScrollPosition(e),this.getViewport().scrollTop=e}};Mv.TEMPLATE=`<div class="ag-body-vertical-scroll" aria-hidden="true">
            <div class="ag-body-vertical-scroll-viewport" ref="eViewport">
                <div class="ag-body-vertical-scroll-container" ref="eContainer"></div>
            </div>
        </div>`;g([I],Mv.prototype,"postConstruct",1);var tL=Mv,NS={january:"January",february:"February",march:"March",april:"April",may:"May",june:"June",july:"July",august:"August",september:"September",october:"October",november:"November",december:"December"},zS=["january","february","march","april","may","june","july","august","september","october","november","december"],On=class extends A{constructor(){super(...arguments),this.dataTypeDefinitions={},this.isWaitingForRowData=!1,this.isColumnTypeOverrideInDataTypeDefinitions=!1,this.columnStateUpdatesPendingInference={},this.columnStateUpdateListenerDestroyFuncs=[]}init(){this.groupHideOpenParents=this.gos.get("groupHideOpenParents"),this.addManagedPropertyListener("groupHideOpenParents",()=>{this.groupHideOpenParents=this.gos.get("groupHideOpenParents")}),this.processDataTypeDefinitions(),this.addManagedPropertyListener("dataTypeDefinitions",t=>{this.processDataTypeDefinitions(),this.columnModel.recreateColumnDefs(qs(t.source))})}processDataTypeDefinitions(){var t;let e=this.getDefaultDataTypes();this.dataTypeDefinitions={},Object.entries(e).forEach(([o,r])=>{this.dataTypeDefinitions[o]=He(j({},r),{groupSafeValueFormatter:this.createGroupSafeValueFormatter(r)})});let i=(t=this.gos.get("dataTypeDefinitions"))!=null?t:{};this.dataTypeMatchers={},Object.entries(i).forEach(([o,r])=>{let n=this.processDataTypeDefinition(r,i,[o],e);n&&(this.dataTypeDefinitions[o]=n,r.dataTypeMatcher&&(this.dataTypeMatchers[o]=r.dataTypeMatcher))}),this.checkObjectValueHandlers(e),["dateString","text","number","boolean","date"].forEach(o=>{let r=this.dataTypeMatchers[o];r&&delete this.dataTypeMatchers[o],this.dataTypeMatchers[o]=r??e[o].dataTypeMatcher})}mergeDataTypeDefinitions(t,e){let i=j(j({},t),e);return t.columnTypes&&e.columnTypes&&e.appendColumnTypes&&(i.columnTypes=[...this.convertColumnTypes(t.columnTypes),...this.convertColumnTypes(e.columnTypes)]),i}processDataTypeDefinition(t,e,i,o){let r,n=t.extendsDataType;if(t.columnTypes&&(this.isColumnTypeOverrideInDataTypeDefinitions=!0),t.extendsDataType===t.baseDataType){let s=o[n],a=e[n];if(s&&a&&(s=a),!this.validateDataTypeDefinition(t,s,n))return;r=this.mergeDataTypeDefinitions(s,t)}else{if(i.includes(n)){q('Data type definition hierarchies (via the "extendsDataType" property) cannot contain circular references.');return}let s=e[n];if(!this.validateDataTypeDefinition(t,s,n))return;let a=this.processDataTypeDefinition(s,e,[...i,n],o);if(!a)return;r=this.mergeDataTypeDefinitions(a,t)}return He(j({},r),{groupSafeValueFormatter:this.createGroupSafeValueFormatter(r)})}validateDataTypeDefinition(t,e,i){return e?e.baseDataType!==t.baseDataType?(q('The "baseDataType" property of a data type definition must match that of its parent.'),!1):!0:(q(`The data type definition ${i} does not exist.`),!1)}createGroupSafeValueFormatter(t){if(t.valueFormatter)return e=>{var i,o;if((i=e.node)!=null&&i.group){let r=e.column.getAggFunc();if(r){if(r==="first"||r==="last")return t.valueFormatter(e);if(t.baseDataType==="number"&&r!=="count"){if(typeof e.value=="number")return t.valueFormatter(e);if(typeof e.value=="object"){if(!e.value)return;if("toNumber"in e.value)return t.valueFormatter(He(j({},e),{value:e.value.toNumber()}));if("value"in e.value)return t.valueFormatter(He(j({},e),{value:e.value.value}))}}}if(!this.gos.get("suppressGroupMaintainValueType"))return}else if(this.groupHideOpenParents&&e.column.isRowGroupActive()){if(typeof e.value!="string"||(o=t.dataTypeMatcher)!=null&&o.call(t,e.value))return t.valueFormatter(e);if(!this.gos.get("suppressGroupMaintainValueType"))return}return t.valueFormatter(e)}}updateColDefAndGetDataTypeDefinitionColumnType(t,e,i){let{cellDataType:o}=e,{field:r}=e;if(o===void 0&&(o=t.cellDataType),(o==null||o===!0)&&(o=this.canInferCellDataType(t,e)?this.inferCellDataType(r,i):!1),!o){t.cellDataType=!1;return}let n=this.dataTypeDefinitions[o];if(!n){q(`Missing data type definition - "${o}"`);return}return t.cellDataType=o,n.groupSafeValueFormatter&&(t.valueFormatter=n.groupSafeValueFormatter),n.valueParser&&(t.valueParser=n.valueParser),n.suppressDefaultProperties||this.setColDefPropertiesForBaseDataType(t,n,i),n.columnTypes}updateColDefAndGetColumnType(t,e,i){var o,r;let n=this.updateColDefAndGetDataTypeDefinitionColumnType(t,e,i),s=(r=(o=e.type)!=null?o:n)!=null?r:t.type;return t.type=s,s?this.convertColumnTypes(s):void 0}addColumnListeners(t){if(!this.isWaitingForRowData)return;let e=this.columnStateUpdatesPendingInference[t.getColId()];if(!e)return;let i=o=>{e.add(o.key)};t.addEventListener(ke.EVENT_STATE_UPDATED,i),this.columnStateUpdateListenerDestroyFuncs.push(()=>t.removeEventListener(ke.EVENT_STATE_UPDATED,i))}canInferCellDataType(t,e){var i;if(this.rowModel.getType()!=="clientSide")return!1;let o={cellRenderer:!0,valueGetter:!0,valueParser:!0,refData:!0};if(this.doColDefPropsPreventInference(e,o))return!1;let r=e.type===null?t.type:e.type;if(r){let n=(i=this.gos.get("columnTypes"))!=null?i:{};if(this.convertColumnTypes(r).some(a=>{let l=n[a.trim()];return l&&this.doColDefPropsPreventInference(l,o)}))return!1}return!this.doColDefPropsPreventInference(t,o)}doColDefPropsPreventInference(t,e){return[["cellRenderer","agSparklineCellRenderer"],["valueGetter",void 0],["valueParser",void 0],["refData",void 0]].some(([i,o])=>this.doesColDefPropPreventInference(t,e,i,o))}doesColDefPropPreventInference(t,e,i,o){if(!e[i])return!1;let r=t[i];return r===null?(e[i]=!1,!1):o===void 0?!!r:r===o}inferCellDataType(t,e){var i;if(!t)return;let o,r=this.getInitialData();if(r){let s=t.indexOf(".")>=0&&!this.gos.get("suppressFieldDotNotation");o=$s(r,t,s)}else this.initWaitForRowData(e);if(o==null)return;let[n]=(i=Object.entries(this.dataTypeMatchers).find(([s,a])=>a(o)))!=null?i:["object"];return n}getInitialData(){let t=this.gos.get("rowData");if(t?.length)return t[0];if(this.initialData)return this.initialData;{let e=this.rowModel.getRootNode().allLeafChildren;if(e?.length)return e[0].data}return null}initWaitForRowData(t){if(this.columnStateUpdatesPendingInference[t]=new Set,this.isWaitingForRowData)return;this.isWaitingForRowData=!0;let e=this.isColumnTypeOverrideInDataTypeDefinitions;e&&this.columnModel.queueResizeOperations();let i=this.addManagedListener(this.eventService,f.EVENT_ROW_DATA_UPDATE_STARTED,o=>{let{firstRowData:r}=o;if(!r)return;i?.(),this.isWaitingForRowData=!1,this.processColumnsPendingInference(r,e),this.columnStateUpdatesPendingInference={},e&&this.columnModel.processResizeOperations();let n={type:f.EVENT_DATA_TYPES_INFERRED};this.eventService.dispatchEvent(n)})}isPendingInference(){return this.isWaitingForRowData}processColumnsPendingInference(t,e){this.initialData=t;let i=[];this.columnStateUpdateListenerDestroyFuncs.forEach(n=>n()),this.columnStateUpdateListenerDestroyFuncs=[];let o={},r={};Object.entries(this.columnStateUpdatesPendingInference).forEach(([n,s])=>{let a=this.columnModel.getGridColumn(n);if(!a)return;let l=a.getColDef();if(!this.columnModel.resetColumnDefIntoColumn(a,"cellDataTypeInferred"))return;let d=a.getColDef();if(e&&d.type&&d.type!==l.type){let c=this.getUpdatedColumnState(a,s);c.rowGroup&&c.rowGroupIndex==null&&(o[n]=c),c.pivot&&c.pivotIndex==null&&(r[n]=c),i.push(c)}}),e&&i.push(...this.columnModel.generateColumnStateForRowGroupAndPivotIndexes(o,r)),i.length&&this.columnModel.applyColumnState({state:i},"cellDataTypeInferred"),this.initialData=null}getUpdatedColumnState(t,e){let i=this.columnModel.getColumnStateFromColDef(t);return e.forEach(o=>{delete i[o],o==="rowGroup"?delete i.rowGroupIndex:o==="pivot"&&delete i.pivotIndex}),i}checkObjectValueHandlers(t){let e=this.dataTypeDefinitions.object,i=t.object;this.hasObjectValueParser=e.valueParser!==i.valueParser,this.hasObjectValueFormatter=e.valueFormatter!==i.valueFormatter}convertColumnTypes(t){let e=[];return t instanceof Array?t.some(o=>typeof o!="string")?console.warn("if colDef.type is supplied an array it should be of type 'string[]'"):e=t:typeof t=="string"?e=t.split(","):console.warn("colDef.type should be of type 'string' | 'string[]'"),e}getDateStringTypeDefinition(t){var e;return t?(e=this.getDataTypeDefinition(t))!=null?e:this.dataTypeDefinitions.dateString:this.dataTypeDefinitions.dateString}getDateParserFunction(t){return this.getDateStringTypeDefinition(t).dateParser}getDateFormatterFunction(t){return this.getDateStringTypeDefinition(t).dateFormatter}getDataTypeDefinition(t){let e=t.getColDef();if(e.cellDataType)return this.dataTypeDefinitions[e.cellDataType]}getBaseDataType(t){var e;return(e=this.getDataTypeDefinition(t))==null?void 0:e.baseDataType}checkType(t,e){var i;if(e==null)return!0;let o=(i=this.getDataTypeDefinition(t))==null?void 0:i.dataTypeMatcher;return o?o(e):!0}validateColDef(t){t.cellDataType==="object"&&(t.valueFormatter===this.dataTypeDefinitions.object.groupSafeValueFormatter&&!this.hasObjectValueFormatter&&q('Cell data type is "object" but no value formatter has been provided. Please either provide an object data type definition with a value formatter, or set "colDef.valueFormatter"'),t.editable&&t.valueParser===this.dataTypeDefinitions.object.valueParser&&!this.hasObjectValueParser&&q('Cell data type is "object" but no value parser has been provided. Please either provide an object data type definition with a value parser, or set "colDef.valueParser"'))}setColDefPropertiesForBaseDataType(t,e,i){let o=(a,l,d)=>{let c=a.getColDef().valueFormatter;return c===e.groupSafeValueFormatter&&(c=e.valueFormatter),this.valueService.formatValue(a,l,d,c)},r=De.__isRegistered("@ag-grid-enterprise/set-filter",this.context.getGridId()),n=this.localeService.getLocaleTextFunc(),s=a=>{let{filterParams:l}=t;t.filterParams=typeof l=="object"?j(j({},l),a):a};switch(e.baseDataType){case"number":{t.cellEditor="agNumberCellEditor",r&&s({comparator:(a,l)=>{let d=a==null?0:parseInt(a),c=l==null?0:parseInt(l);return d===c?0:d>c?1:-1}});break}case"boolean":{t.cellEditor="agCheckboxCellEditor",t.cellRenderer="agCheckboxCellRenderer",t.suppressKeyboardEvent=a=>!!a.colDef.editable&&a.event.key===S.SPACE,s(r?{valueFormatter:a=>T(a.value)?n(String(a.value),a.value?"True":"False"):n("blanks","(Blanks)")}:{maxNumConditions:1,debounceMs:0,filterOptions:["empty",{displayKey:"true",displayName:"True",predicate:(a,l)=>l,numberOfInputs:0},{displayKey:"false",displayName:"False",predicate:(a,l)=>l===!1,numberOfInputs:0}]});break}case"date":{t.cellEditor="agDateCellEditor",t.keyCreator=a=>o(a.column,a.node,a.value),r&&s({valueFormatter:a=>{let l=o(a.column,a.node,a.value);return T(l)?l:n("blanks","(Blanks)")},treeList:!0,treeListFormatter:(a,l)=>{if(l===1&&a!=null){let d=zS[Number(a)-1];return n(d,NS[d])}return a??n("blanks","(Blanks)")}});break}case"dateString":{t.cellEditor="agDateStringCellEditor",t.keyCreator=l=>o(l.column,l.node,l.value);let a=e.dateParser;s(r?{valueFormatter:l=>{let d=o(l.column,l.node,l.value);return T(d)?d:n("blanks","(Blanks)")},treeList:!0,treeListPathGetter:l=>{let d=a(l??void 0);return d?[String(d.getFullYear()),String(d.getMonth()+1),String(d.getDate())]:null},treeListFormatter:(l,d)=>{if(d===1&&l!=null){let c=zS[Number(l)-1];return n(c,NS[c])}return l??n("blanks","(Blanks)")}}:{comparator:(l,d)=>{let c=a(d);return d==null||c<l?-1:c>l?1:0}});break}case"object":{t.cellEditorParams={useFormatter:!0},t.comparator=(a,l)=>{let d=this.columnModel.getPrimaryColumn(i),c=d?.getColDef();if(!d||!c)return 0;let u=a==null?"":o(d,null,a),h=l==null?"":o(d,null,l);return u===h?0:u>h?1:-1},t.keyCreator=a=>o(a.column,a.node,a.value),r?s({valueFormatter:a=>{let l=o(a.column,a.node,a.value);return T(l)?l:n("blanks","(Blanks)")}}):t.filterValueGetter=a=>o(a.column,a.node,this.valueService.getValue(a.column,a.node));break}}}getDefaultDataTypes(){let t=i=>!!i.match("^\\d{4}-\\d{2}-\\d{2}$"),e=this.localeService.getLocaleTextFunc();return{number:{baseDataType:"number",valueParser:i=>{var o,r;return((r=(o=i.newValue)==null?void 0:o.trim)==null?void 0:r.call(o))===""?null:Number(i.newValue)},valueFormatter:i=>i.value==null?"":typeof i.value!="number"||isNaN(i.value)?e("invalidNumber","Invalid Number"):String(i.value),dataTypeMatcher:i=>typeof i=="number"},text:{baseDataType:"text",valueParser:i=>i.newValue===""?null:sd(i.newValue),dataTypeMatcher:i=>typeof i=="string"},boolean:{baseDataType:"boolean",valueParser:i=>{var o,r;return i.newValue==null?i.newValue:((r=(o=i.newValue)==null?void 0:o.trim)==null?void 0:r.call(o))===""?null:String(i.newValue).toLowerCase()==="true"},valueFormatter:i=>i.value==null?"":String(i.value),dataTypeMatcher:i=>typeof i=="boolean"},date:{baseDataType:"date",valueParser:i=>ti(i.newValue==null?null:String(i.newValue)),valueFormatter:i=>{var o;return i.value==null?"":!(i.value instanceof Date)||isNaN(i.value.getTime())?e("invalidDate","Invalid Date"):(o=Ai(i.value,!1))!=null?o:""},dataTypeMatcher:i=>i instanceof Date},dateString:{baseDataType:"dateString",dateParser:i=>{var o;return(o=ti(i))!=null?o:void 0},dateFormatter:i=>{var o;return(o=Ai(i??null,!1))!=null?o:void 0},valueParser:i=>t(String(i.newValue))?i.newValue:null,valueFormatter:i=>t(String(i.value))?i.value:"",dataTypeMatcher:i=>typeof i=="string"&&t(i)},object:{baseDataType:"object",valueParser:()=>null,valueFormatter:i=>{var o;return(o=sd(i.value))!=null?o:""}}}}};g([v("rowModel")],On.prototype,"rowModel",2);g([v("columnModel")],On.prototype,"columnModel",2);g([v("valueService")],On.prototype,"valueService",2);g([I],On.prototype,"init",1);On=g([V("dataTypeService")],On);var kn=class extends A{constructor(){super(...arguments),this.waitingForColumns=!1}postConstruct(){this.addManagedPropertyListener("columnDefs",t=>this.setColumnDefs(t))}start(){this.ctrlsService.whenReady(()=>{let t=this.gos.get("columnDefs");t?this.setColumnsAndData(t):this.waitingForColumns=!0,this.gridReady()})}setColumnsAndData(t){this.columnModel.setColumnDefs(t??[],"gridInitializing"),this.rowModel.start()}gridReady(){this.dispatchGridReadyEvent();let t=De.__isRegistered("@ag-grid-enterprise/core",this.context.getGridId());new Rv("AG Grid",()=>this.gos.get("debug")).log(`initialised successfully, enterprise = ${t}`)}dispatchGridReadyEvent(){let t={type:f.EVENT_GRID_READY};this.eventService.dispatchEvent(t)}setColumnDefs(t){let e=this.gos.get("columnDefs");if(e){if(this.waitingForColumns){this.waitingForColumns=!1,this.setColumnsAndData(e);return}this.columnModel.setColumnDefs(e,qs(t.source))}}};g([v("ctrlsService")],kn.prototype,"ctrlsService",2);g([v("columnModel")],kn.prototype,"columnModel",2);g([v("rowModel")],kn.prototype,"rowModel",2);g([I],kn.prototype,"postConstruct",1);kn=g([V("syncService")],kn);var Ln=class extends A{constructor(){super(...arguments),this.manuallyDisplayed=!1}postConstruct(){this.addManagedListener(this.eventService,f.EVENT_ROW_DATA_UPDATED,()=>this.onRowDataUpdated()),this.addManagedListener(this.eventService,f.EVENT_NEW_COLUMNS_LOADED,()=>this.onNewColumnsLoaded())}registerOverlayWrapperComp(t){this.overlayWrapperComp=t,(!this.gos.get("columnDefs")||this.gos.isRowModelType("clientSide")&&!this.gos.get("rowData"))&&this.showLoadingOverlay()}showLoadingOverlay(){if(this.gos.get("suppressLoadingOverlay"))return;let t={},e=this.userComponentFactory.getLoadingOverlayCompDetails(t);this.showOverlay(e,"ag-overlay-loading-wrapper","loadingOverlayComponentParams")}showNoRowsOverlay(){if(this.gos.get("suppressNoRowsOverlay"))return;let t={},e=this.userComponentFactory.getNoRowsOverlayCompDetails(t);this.showOverlay(e,"ag-overlay-no-rows-wrapper","noRowsOverlayComponentParams")}showOverlay(t,e,i){let o=t.newAgStackInstance(),r=this.addManagedPropertyListener(i,({currentValue:n})=>{o.then(s=>{s.refresh&&s.refresh(this.gos.addGridCommonParams(j({},n??{})))})});this.manuallyDisplayed=this.columnModel.isReady()&&!this.paginationProxy.isEmpty(),this.overlayWrapperComp.showOverlay(o,e,r)}hideOverlay(){this.manuallyDisplayed=!1,this.overlayWrapperComp.hideOverlay()}showOrHideOverlay(){let t=this.paginationProxy.isEmpty(),e=this.gos.get("suppressNoRowsOverlay");t&&!e?this.showNoRowsOverlay():this.hideOverlay()}onRowDataUpdated(){this.showOrHideOverlay()}onNewColumnsLoaded(){this.columnModel.isReady()&&!this.paginationProxy.isEmpty()&&!this.manuallyDisplayed&&this.hideOverlay()}};g([v("userComponentFactory")],Ln.prototype,"userComponentFactory",2);g([v("paginationProxy")],Ln.prototype,"paginationProxy",2);g([v("columnModel")],Ln.prototype,"columnModel",2);g([I],Ln.prototype,"postConstruct",1);Ln=g([V("overlayService")],Ln);var jt=class extends A{constructor(){super(...arguments),this.suppressEvents=!0,this.queuedUpdateSources=new Set,this.dispatchStateUpdateEventDebounced=Ut(()=>this.dispatchQueuedStateUpdateEvents(),0),this.onRowGroupOpenedDebounced=Ut(()=>this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState()),0),this.onRowSelectedDebounced=Ut(()=>{this.staleStateKeys.delete("rowSelection"),this.updateCachedState("rowSelection",this.getRowSelectionState())},0),this.staleStateKeys=new Set}postConstruct(){var t;this.isClientSideRowModel=this.rowModel.getType()==="clientSide",this.cachedState=(t=this.gos.get("initialState"))!=null?t:{},this.ctrlsService.whenReady(()=>this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnGridReady()));let e=this.addManagedListener(this.eventService,f.EVENT_NEW_COLUMNS_LOADED,({source:r})=>{r==="gridInitializing"&&(e?.(),this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnColumnsInitialised()))}),i=this.addManagedListener(this.eventService,f.EVENT_ROW_COUNT_READY,()=>{i?.(),this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnRowCountReady())}),o=this.addManagedListener(this.eventService,f.EVENT_FIRST_DATA_RENDERED,()=>{o?.(),this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnFirstDataRendered())})}getState(){return this.staleStateKeys.size&&this.refreshStaleState(),this.cachedState}setupStateOnGridReady(){this.updateCachedState("sideBar",this.getSideBarState()),this.addManagedListener(this.eventService,f.EVENT_TOOL_PANEL_VISIBLE_CHANGED,()=>this.updateCachedState("sideBar",this.getSideBarState())),this.addManagedListener(this.eventService,f.EVENT_SIDE_BAR_UPDATED,()=>this.updateCachedState("sideBar",this.getSideBarState()))}setupStateOnColumnsInitialised(){var t;let e=(t=this.gos.get("initialState"))!=null?t:{};this.setColumnState(e),this.setColumnGroupState(e),this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","pivot","rowGroup","sort"]),this.updateCachedState("columnGroup",this.getColumnGroupState()),this.addManagedListener(this.eventService,f.EVENT_COLUMN_VALUE_CHANGED,()=>this.updateColumnState(["aggregation"])),this.addManagedListener(this.eventService,f.EVENT_COLUMN_MOVED,()=>this.updateColumnState(["columnOrder"])),this.addManagedListener(this.eventService,f.EVENT_COLUMN_PINNED,()=>this.updateColumnState(["columnPinning"])),this.addManagedListener(this.eventService,f.EVENT_COLUMN_RESIZED,()=>this.updateColumnState(["columnSizing"])),this.addManagedListener(this.eventService,f.EVENT_COLUMN_VISIBLE,()=>this.updateColumnState(["columnVisibility"])),this.addManagedListener(this.eventService,f.EVENT_COLUMN_PIVOT_CHANGED,()=>this.updateColumnState(["pivot"])),this.addManagedListener(this.eventService,f.EVENT_COLUMN_PIVOT_MODE_CHANGED,()=>this.updateColumnState(["pivot"])),this.addManagedListener(this.eventService,f.EVENT_COLUMN_ROW_GROUP_CHANGED,()=>this.updateColumnState(["rowGroup"])),this.addManagedListener(this.eventService,f.EVENT_SORT_CHANGED,()=>this.updateColumnState(["sort"])),this.addManagedListener(this.eventService,f.EVENT_NEW_COLUMNS_LOADED,()=>this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","pivot","rowGroup","sort"])),this.addManagedListener(this.eventService,f.EVENT_COLUMN_GROUP_OPENED,()=>this.updateCachedState("columnGroup",this.getColumnGroupState()))}setupStateOnRowCountReady(){var t;let{filter:e,rowGroupExpansion:i,rowSelection:o,pagination:r}=(t=this.gos.get("initialState"))!=null?t:{},n=this.gos.get("advancedFilterModel");(e||n)&&this.setFilterState(e,n),i&&this.setRowGroupExpansionState(i),o&&this.setRowSelectionState(o),r&&this.setPaginationState(r),this.updateCachedState("filter",this.getFilterState()),this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState()),this.updateCachedState("rowSelection",this.getRowSelectionState()),this.updateCachedState("pagination",this.getPaginationState()),this.addManagedListener(this.eventService,f.EVENT_FILTER_CHANGED,()=>this.updateCachedState("filter",this.getFilterState())),this.addManagedListener(this.eventService,f.EVENT_ROW_GROUP_OPENED,()=>this.onRowGroupOpenedDebounced()),this.addManagedListener(this.eventService,f.EVENT_EXPAND_COLLAPSE_ALL,()=>this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState())),this.addManagedListener(this.eventService,f.EVENT_SELECTION_CHANGED,()=>{this.staleStateKeys.add("rowSelection"),this.onRowSelectedDebounced()}),this.addManagedListener(this.eventService,f.EVENT_PAGINATION_CHANGED,s=>{(s.newPage||s.newPageSize)&&this.updateCachedState("pagination",this.getPaginationState())})}setupStateOnFirstDataRendered(){var t;let{scroll:e,rangeSelection:i,focusedCell:o,columnOrder:r}=(t=this.gos.get("initialState"))!=null?t:{};o&&this.setFocusedCellState(o),i&&this.setRangeSelectionState(i),e&&this.setScrollState(e),this.setColumnPivotState(!!r?.orderedColIds),this.updateCachedState("sideBar",this.getSideBarState()),this.updateCachedState("focusedCell",this.getFocusedCellState()),this.updateCachedState("rangeSelection",this.getRangeSelectionState()),this.updateCachedState("scroll",this.getScrollState()),this.addManagedListener(this.eventService,f.EVENT_CELL_FOCUSED,()=>this.updateCachedState("focusedCell",this.getFocusedCellState())),this.addManagedListener(this.eventService,f.EVENT_RANGE_SELECTION_CHANGED,n=>{n.finished&&this.updateCachedState("rangeSelection",this.getRangeSelectionState())}),this.addManagedListener(this.eventService,f.EVENT_BODY_SCROLL_END,()=>this.updateCachedState("scroll",this.getScrollState()))}getColumnState(){let t=this.columnModel.isPivotMode(),e=[],i=[],o=[],r=[],n=[],s=[],a=[],l=[],d=[],c=this.columnModel.getColumnState();for(let u=0;u<c.length;u++){let{colId:h,sort:p,sortIndex:m,rowGroup:C,rowGroupIndex:w,aggFunc:b,pivot:y,pivotIndex:_,pinned:x,hide:E,width:D,flex:R}=c[u];d.push(h),p&&(e[m??0]={colId:h,sort:p}),C&&(i[w??0]=h),typeof b=="string"&&o.push({colId:h,aggFunc:b}),y&&(r[_??0]=h),x&&(x==="right"?s:n).push(h),E&&a.push(h),(R||D)&&l.push({colId:h,flex:R??void 0,width:D})}return{sort:e.length?{sortModel:e}:void 0,rowGroup:i.length?{groupColIds:i}:void 0,aggregation:o.length?{aggregationModel:o}:void 0,pivot:r.length||t?{pivotMode:t,pivotColIds:r}:void 0,columnPinning:n.length||s.length?{leftColIds:n,rightColIds:s}:void 0,columnVisibility:a.length?{hiddenColIds:a}:void 0,columnSizing:l.length?{columnSizingModel:l}:void 0,columnOrder:d.length?{orderedColIds:d}:void 0}}setColumnState(t){let{sort:e,rowGroup:i,aggregation:o,pivot:r,columnPinning:n,columnVisibility:s,columnSizing:a,columnOrder:l}=t,d={},c=m=>{let C=d[m];return C||(C={colId:m},d[m]=C,C)};e&&e.sortModel.forEach(({colId:m,sort:C},w)=>{let b=c(m);b.sort=C,b.sortIndex=w}),i&&i.groupColIds.forEach((m,C)=>{let w=c(m);w.rowGroup=!0,w.rowGroupIndex=C}),o&&o.aggregationModel.forEach(({colId:m,aggFunc:C})=>{c(m).aggFunc=C}),r&&(r.pivotColIds.forEach((m,C)=>{let w=c(m);w.pivot=!0,w.pivotIndex=C}),this.gos.updateGridOptions({options:{pivotMode:r.pivotMode},source:"gridInitializing"})),n&&(n.leftColIds.forEach(m=>{c(m).pinned="left"}),n.rightColIds.forEach(m=>{c(m).pinned="right"})),s&&s.hiddenColIds.forEach(m=>{c(m).hide=!0}),a&&a.columnSizingModel.forEach(({colId:m,flex:C,width:w})=>{let b=c(m);b.flex=C??null,b.width=w});let u=l?.orderedColIds,h=!!u?.length,p=h?u.map(m=>c(m)):Object.values(d);if(p.length){this.columnStates=p;let m={sort:null,sortIndex:null,rowGroup:null,rowGroupIndex:null,aggFunc:null,pivot:null,pivotIndex:null,pinned:null,hide:null,flex:null};this.columnModel.applyColumnState({state:p,applyOrder:h,defaultState:m},"gridInitializing")}}setColumnPivotState(t){let e=this.columnStates;this.columnStates=void 0;let i=this.columnGroupStates;if(this.columnGroupStates=void 0,!!this.columnModel.isSecondaryColumnsPresent()){if(e){let o=[];for(let r of e)this.columnModel.getSecondaryColumn(r.colId)&&o.push(r);this.columnModel.applyColumnState({state:o,applyOrder:t},"gridInitializing")}i&&this.columnModel.setColumnGroupState(i,"gridInitializing")}}getColumnGroupState(){let t=this.columnModel.getColumnGroupState(),e=[];return t.forEach(({groupId:i,open:o})=>{o&&e.push(i)}),e.length?{openColumnGroupIds:e}:void 0}setColumnGroupState(t){var e;if(!t.hasOwnProperty("columnGroup"))return;let i=new Set((e=t.columnGroup)==null?void 0:e.openColumnGroupIds),r=this.columnModel.getColumnGroupState().map(({groupId:n})=>{let s=i.has(n);return s&&i.delete(n),{groupId:n,open:s}});i.forEach(n=>{r.push({groupId:n,open:!0})}),r.length&&(this.columnGroupStates=r),this.columnModel.setColumnGroupState(r,"gridInitializing")}getFilterState(){var t;let e=this.filterManager.getFilterModel();e&&Object.keys(e).length===0&&(e=void 0);let i=(t=this.filterManager.getAdvancedFilterModel())!=null?t:void 0;return e||i?{filterModel:e,advancedFilterModel:i}:void 0}setFilterState(t,e){let{filterModel:i,advancedFilterModel:o}=t??{advancedFilterModel:e};i&&this.filterManager.setFilterModel(i,"columnFilter"),o&&this.filterManager.setAdvancedFilterModel(o)}getRangeSelectionState(){var t;let e=(t=this.rangeService)==null?void 0:t.getCellRanges().map(i=>{let{id:o,type:r,startRow:n,endRow:s,columns:a,startColumn:l}=i;return{id:o,type:r,startRow:n,endRow:s,colIds:a.map(d=>d.getColId()),startColId:l.getColId()}});return e?.length?{cellRanges:e}:void 0}setRangeSelectionState(t){if(!this.gos.get("enableRangeSelection")||!this.rangeService)return;let e=[];t.cellRanges.forEach(i=>{let o=[];if(i.colIds.forEach(n=>{let s=this.columnModel.getGridColumn(n);s&&o.push(s)}),!o.length)return;let r=this.columnModel.getGridColumn(i.startColId);if(!r){let n=this.columnModel.getAllDisplayedColumns(),s=new Set(o);r=n.find(a=>s.has(a))}e.push(He(j({},i),{columns:o,startColumn:r}))}),this.rangeService.setCellRanges(e)}getScrollState(){var t,e,i;if(!this.isClientSideRowModel)return;let o=(t=this.ctrlsService.getGridBodyCtrl())==null?void 0:t.getScrollFeature(),{left:r}=(e=o?.getHScrollPosition())!=null?e:{left:0},{top:n}=(i=o?.getVScrollPosition())!=null?i:{top:0};return n||r?{top:n,left:r}:void 0}setScrollState(t){var e;if(!this.isClientSideRowModel)return;let{top:i,left:o}=t;(e=this.ctrlsService.getGridBodyCtrl())==null||e.getScrollFeature().setScrollPosition(i,o)}getSideBarState(){var t,e;return(e=(t=this.sideBarService)==null?void 0:t.getSideBarComp())==null?void 0:e.getState()}getFocusedCellState(){if(!this.isClientSideRowModel)return;let t=this.focusService.getFocusedCell();if(t){let{column:e,rowIndex:i,rowPinned:o}=t;return{colId:e.getColId(),rowIndex:i,rowPinned:o}}}setFocusedCellState(t){if(!this.isClientSideRowModel)return;let{colId:e,rowIndex:i,rowPinned:o}=t;this.focusService.setFocusedCell({column:this.columnModel.getGridColumn(e),rowIndex:i,rowPinned:o,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}getPaginationState(){let t=this.paginationProxy.getCurrentPage(),e=this.gos.get("paginationAutoPageSize")?void 0:this.paginationProxy.getPageSize();if(!(!t&&!e))return{page:t,pageSize:e}}setPaginationState(t){t.pageSize&&!this.gos.get("paginationAutoPageSize")&&this.paginationProxy.setPageSize(t.pageSize,"initialState"),typeof t.page=="number"&&this.paginationProxy.setPage(t.page)}getRowSelectionState(){var t;let e=this.selectionService.getSelectionState();return!e||!Array.isArray(e)&&(e.selectAll===!1||e.selectAllChildren===!1)&&!((t=e?.toggledNodes)!=null&&t.length)?void 0:e}setRowSelectionState(t){this.selectionService.setSelectionState(t,"gridInitializing")}getRowGroupExpansionState(){let t=this.expansionService.getExpandedRows();return t.length?{expandedRowGroupIds:t}:void 0}setRowGroupExpansionState(t){this.expansionService.expandRows(t.expandedRowGroupIds)}updateColumnState(t){let e=this.getColumnState(),i=!1;Object.entries(e).forEach(([o,r])=>{em(r,this.cachedState[o])||(i=!0)}),this.cachedState=j(j({},this.cachedState),e),i&&this.dispatchStateUpdateEvent(t)}updateCachedState(t,e){let i=this.cachedState[t];this.setCachedStateValue(t,e),em(e,i)||this.dispatchStateUpdateEvent([t])}setCachedStateValue(t,e){this.cachedState=He(j({},this.cachedState),{[t]:e})}refreshStaleState(){this.staleStateKeys.forEach(t=>{switch(t){case"rowSelection":this.setCachedStateValue(t,this.getRowSelectionState());break}}),this.staleStateKeys.clear()}dispatchStateUpdateEvent(t){this.suppressEvents||(t.forEach(e=>this.queuedUpdateSources.add(e)),this.dispatchStateUpdateEventDebounced())}dispatchQueuedStateUpdateEvents(){let t=Array.from(this.queuedUpdateSources);this.queuedUpdateSources.clear();let e={type:f.EVENT_STATE_UPDATED,sources:t,state:this.cachedState};this.eventService.dispatchEvent(e)}suppressEventsAndDispatchInitEvent(t){this.suppressEvents=!0,this.columnAnimationService.setSuppressAnimation(!0),t(),setTimeout(()=>{this.suppressEvents=!1,this.queuedUpdateSources.clear(),this.isAlive()&&(this.columnAnimationService.setSuppressAnimation(!1),this.dispatchStateUpdateEvent(["gridInitializing"]))})}};g([v("filterManager")],jt.prototype,"filterManager",2);g([v("ctrlsService")],jt.prototype,"ctrlsService",2);g([v("focusService")],jt.prototype,"focusService",2);g([v("columnModel")],jt.prototype,"columnModel",2);g([v("paginationProxy")],jt.prototype,"paginationProxy",2);g([v("rowModel")],jt.prototype,"rowModel",2);g([v("selectionService")],jt.prototype,"selectionService",2);g([v("expansionService")],jt.prototype,"expansionService",2);g([v("columnAnimationService")],jt.prototype,"columnAnimationService",2);g([Re("sideBarService")],jt.prototype,"sideBarService",2);g([Re("rangeService")],jt.prototype,"rangeService",2);g([I],jt.prototype,"postConstruct",1);jt=g([V("stateService")],jt);var Rd=class extends A{init(){this.processGridOptions(this.gridOptions)}processGridOptions(t){this.processOptions(t,eL)}processColumnDefs(t){this.processOptions(t,Ks)}processOptions(t,e){let{validations:i,deprecations:o,allProperties:r,propertyExceptions:n,objectName:s,docsUrl:a}=e;r&&this.gridOptions.suppressPropertyNamesCheck!==!0&&this.checkProperties(t,[...n??[],...Object.keys(o)],r,s,a);let l=new Set;Object.keys(t).forEach(c=>{var u;let h=o[c];if(h)if("renamed"in h){let{renamed:_,version:x}=h;l.add(`As of v${x}, ${String(c)} is deprecated. Please use ${String(_)} instead.`),t[_]=t[c]}else{let{message:_,version:x}=h;l.add(`As of v${x}, ${String(c)} is deprecated. ${_??""}`)}let p=t[c];if(p==null||p===!1)return;let m=i[c],C;if(m)if(typeof m=="function"){let _=m(t,this.gridOptions);if(!_)return;if("objectName"in _){let x=t[c];if(Array.isArray(x)){x.forEach(E=>{this.processOptions(E,_)});return}this.processOptions(t[c],_);return}C=_}else C=m;else return;let{module:w,dependencies:b,supportedRowModels:y}=C;if(y){let _=(u=this.gridOptions.rowModelType)!=null?u:"clientSide";if(!y.includes(_)){l.add(`${String(c)} is not supported with the '${_}' row model.`);return}}if(w){let _=Array.isArray(w)?w:[w],x=!0;if(_.forEach(E=>{De.__assertRegistered(E,String(c),this.context.getGridId())||(x=!1,l.add(`${String(c)} is only available when ${E} is loaded.`))}),!x)return}if(b){let _=this.checkForWarning(c,b,t);if(_){l.add(_);return}}}),l.size>0&&l.forEach(c=>{q(c)})}checkForWarning(t,e,i){if(typeof e=="function")return e(i,this.gridOptions);let r=Object.entries(e).find(([a,l])=>{let d=i[a];return!l.includes(d)});if(!r)return null;let[n,s]=r;return s.length>1?`'${String(t)}' requires '${n}' to be one of [${s.join(", ")}].`:`'${String(t)}' requires '${n}' to be ${s[0]}.`}checkProperties(t,e,i,o,r){let n=["__ob__","__v_skip","__metadata__"],s=Jx(Object.getOwnPropertyNames(t),[...n,...e,...i],i);if(Nt(s,(a,l)=>{q(`invalid ${o} property '${a}' did you mean any of these: ${l.slice(0,8).join(", ")}`)}),Object.keys(s).length>0&&r){let a=this.getFrameworkOverrides().getDocLink(r);q(`to see all the valid ${o} properties please check: ${a}`)}}};g([v("gridOptions")],Rd.prototype,"gridOptions",2);g([I],Rd.prototype,"init",1);Rd=g([V("validationService")],Rd);var dh=class extends A{constructor(){super(...arguments),this.syncEventListeners=new Map,this.asyncEventListeners=new Map,this.syncGlobalEventListeners=new Set,this.globalEventListenerPairs=new Map}postConstruct(){this.frameworkEventWrappingService=new Am(this.getFrameworkOverrides())}addEventListener(t,e){let i=this.frameworkEventWrappingService.wrap(e),o=this.gos.useAsyncEvents()&&!Bu.has(t),r=o?this.asyncEventListeners:this.syncEventListeners;r.has(t)||r.set(t,new Set),r.get(t).add(i),this.eventService.addEventListener(t,i,o)}removeEventListener(t,e){var i;let o=this.frameworkEventWrappingService.unwrap(e),r=this.asyncEventListeners.get(t),n=!!r?.delete(o);n||(i=this.syncEventListeners.get(t))==null||i.delete(o),this.eventService.removeEventListener(t,o,n)}addGlobalListener(t){let e=this.frameworkEventWrappingService.wrapGlobal(t);if(this.gos.useAsyncEvents()){let o=(n,s)=>{Bu.has(n)&&e(n,s)},r=(n,s)=>{Bu.has(n)||e(n,s)};this.globalEventListenerPairs.set(t,{syncListener:o,asyncListener:r}),this.eventService.addGlobalListener(o,!1),this.eventService.addGlobalListener(r,!0)}else this.syncGlobalEventListeners.add(e),this.eventService.addGlobalListener(e,!1)}removeGlobalListener(t){let e=this.frameworkEventWrappingService.unwrapGlobal(t);if(this.globalEventListenerPairs.has(e)){let{syncListener:o,asyncListener:r}=this.globalEventListenerPairs.get(e);this.eventService.removeGlobalListener(o,!1),this.eventService.removeGlobalListener(r,!0),this.globalEventListenerPairs.delete(t)}else this.syncGlobalEventListeners.delete(e),this.eventService.removeGlobalListener(e,!1)}destroyEventListeners(t,e){t.forEach((i,o)=>{i.forEach(r=>this.eventService.removeEventListener(o,r,e)),i.clear()}),t.clear()}destroyGlobalListeners(t,e){t.forEach(i=>this.eventService.removeGlobalListener(i,e)),t.clear()}destroy(){super.destroy(),this.destroyEventListeners(this.syncEventListeners,!1),this.destroyEventListeners(this.asyncEventListeners,!0),this.destroyGlobalListeners(this.syncGlobalEventListeners,!1),this.globalEventListenerPairs.forEach(({syncListener:t,asyncListener:e})=>{this.eventService.removeGlobalListener(t,!1),this.eventService.removeGlobalListener(e,!0)}),this.globalEventListenerPairs.clear()}};g([I],dh.prototype,"postConstruct",1);dh=g([V("apiEventService")],dh);var Tv=class extends J{constructor(){super('<span class="ag-paging-page-size"></span>'),this.hasEmptyOption=!1,this.handlePageSizeItemSelected=()=>{if(!this.selectPageSizeComp)return;let t=this.selectPageSizeComp.getValue();if(!t)return;let e=Number(t);isNaN(e)||e<1||e===this.paginationProxy.getPageSize()||(this.paginationProxy.setPageSize(e,"pageSizeSelector"),this.hasEmptyOption&&this.toggleSelectDisplay(!0),this.selectPageSizeComp.getFocusableElement().focus())}}init(){this.addManagedPropertyListener("paginationPageSizeSelector",()=>{this.onPageSizeSelectorValuesChange()}),this.addManagedListener(this.eventService,f.EVENT_PAGINATION_CHANGED,t=>this.handlePaginationChanged(t))}handlePaginationChanged(t){if(!this.selectPageSizeComp||!t?.newPageSize)return;let e=this.paginationProxy.getPageSize();this.getPageSizeSelectorValues().includes(e)?this.selectPageSizeComp.setValue(e.toString()):this.hasEmptyOption?this.selectPageSizeComp.setValue(""):this.toggleSelectDisplay(!0)}toggleSelectDisplay(t){this.selectPageSizeComp&&this.reset(),t&&(this.reloadPageSizesSelector(),this.selectPageSizeComp&&this.appendChild(this.selectPageSizeComp))}reset(){Je(this.getGui()),this.selectPageSizeComp&&(this.destroyBean(this.selectPageSizeComp),this.selectPageSizeComp=void 0)}onPageSizeSelectorValuesChange(){this.selectPageSizeComp&&this.shouldShowPageSizeSelector()&&this.reloadPageSizesSelector()}shouldShowPageSizeSelector(){return this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel")&&!this.gos.get("paginationAutoPageSize")&&this.gos.get("paginationPageSizeSelector")!==!1}reloadPageSizesSelector(){let t=this.getPageSizeSelectorValues(),e=this.paginationProxy.getPageSize(),i=!e||!t.includes(e);i&&(t.unshift(""),q(`The paginationPageSize grid option is set to a value that is not in the list of page size options.
                Please make sure that the paginationPageSize grid option is set to one of the values in the 
                paginationPageSizeSelector array, or set the paginationPageSizeSelector to false to hide the page size selector.`)),this.selectPageSizeComp&&(this.destroyBean(this.selectPageSizeComp),this.selectPageSizeComp=void 0);let o=this.localeService.getLocaleTextFunc(),r=o("pageSizeSelectorLabel","Page Size:"),n=t.map(a=>({value:String(a),text:String(a)})),s=o("ariaPageSizeSelectorLabel","Page Size");this.selectPageSizeComp=this.createManagedBean(new Mh).addOptions(n).setValue(String(i?"":e)).setAriaLabel(s).setLabel(r).onValueChange(()=>this.handlePageSizeItemSelected()),this.hasEmptyOption=i}getPageSizeSelectorValues(){let t=[20,50,100],e=this.gos.get("paginationPageSizeSelector");return!Array.isArray(e)||!this.validateValues(e)?t:[...e].sort((i,o)=>i-o)}validateValues(t){if(!t.length)return q(`The paginationPageSizeSelector grid option is an empty array. This is most likely a mistake.
                If you want to hide the page size selector, please set the paginationPageSizeSelector to false.`),!1;for(let e=0;e<t.length;e++){let i=t[e],o=typeof i=="number",r=i>0;if(!o)return q(`The paginationPageSizeSelector grid option contains a non-numeric value.
                    Please make sure that all values in the paginationPageSizeSelector array are numbers.`),!1;if(!r)return q(`The paginationPageSizeSelector grid option contains a negative number or zero.
                    Please make sure that all values in the paginationPageSizeSelector array are positive.`),!1}return!0}destroy(){this.toggleSelectDisplay(!1),super.destroy()}};g([v("paginationProxy")],Tv.prototype,"paginationProxy",2);g([I],Tv.prototype,"init",1);var Md=class extends A{constructor(){super(),this.descriptionContainer=null,this.announceValue=Ut(this.announceValue.bind(this),200)}postConstruct(){let t=this.gos.getDocument(),e=this.descriptionContainer=t.createElement("div");e.classList.add("ag-aria-description-container"),Om(e,"polite"),Dx(e,"additions text"),Ex(e,!0),this.eGridDiv.appendChild(e)}announceValue(t){this.descriptionContainer&&(this.descriptionContainer.textContent="",setTimeout(()=>{this.isAlive()&&this.descriptionContainer&&(this.descriptionContainer.textContent=t)},50))}destroy(){super.destroy();let{descriptionContainer:t}=this;t&&(Je(t),t.parentElement&&t.parentElement.removeChild(t)),this.descriptionContainer=null,this.eGridDiv=null}};g([v("eGridDiv")],Md.prototype,"eGridDiv",2);g([I],Md.prototype,"postConstruct",1);Md=g([V("ariaAnnouncementService")],Md);var Dm=class{};Dm.gridOptions=void 0;function xE(t,e,i){if(!e)return uo("No gridOptions provided to createGrid"),{};let o=new oL().create(t,e,r=>{let n=new Ea(t);r.createBean(n)},void 0,i);if(!Object.isFrozen(e)&&!i?.frameworkOverrides){let r="https://ag-grid.com/javascript-data-grid/grid-interface/#grid-api";Object.defineProperty(e,"api",{get:()=>{uo(`gridOptions.api is no longer supported. See ${r}.`)},configurable:!0}),Object.defineProperty(e,"columnApi",{get:()=>{uo(`gridOptions.columnApi is no longer supported and all methods moved to the grid api. See ${r}.`)},configurable:!0})}return o}var iL=1,oL=class{create(t,e,i,o,r){var n;let s={};Dm.gridOptions?(ei(s,Dm.gridOptions,!0,!0),s=j(j({},s),e)):s=e;let a=_e.getCoercedGridOptions(s),l=!!a.debug,d=(n=a.gridId)!=null?n:String(iL++),c=this.getRegisteredModules(r,d),u=this.createBeansList(a.rowModelType,c,d),h=this.createProvidedBeans(t,a,r);if(!u){uo("Failed to create grid.");return}let p={providedBeanInstances:h,beanClasses:u,debug:l,gridId:d},m=new Rv("Context",()=>p.debug),C=new cF(p,m),w=C.getBean("beans");return this.registerModuleUserComponents(w,c),this.registerStackComponents(w,c),this.registerControllers(w,c),i(C),w.syncService.start(),o&&o(C),C.getBean("gridApi")}registerControllers(t,e){e.forEach(i=>{i.controllers&&i.controllers.forEach(o=>t.ctrlsFactory.register(o))})}registerStackComponents(t,e){let i=this.createAgStackComponentsList(e);t.agStackComponentsRegistry.setupComponents(i)}getRegisteredModules(t,e){let i=t?t.modules:null,o=De.__getRegisteredModules(e),r=[],n={},s=(a,l,d)=>{(u=>{n[u.moduleName]||(n[u.moduleName]=!0,r.push(u),De.__register(u,a,d))})(l),l.dependantModules&&l.dependantModules.forEach(u=>s(a,u,d))};return i&&i.forEach(a=>s(!0,a,e)),o&&o.forEach(a=>s(!De.__isPackageBased(),a,void 0)),r}registerModuleUserComponents(t,e){this.extractModuleEntity(e,o=>o.userComponents?o.userComponents:[]).forEach(o=>{t.userComponentRegistry.registerDefaultComponent(o.componentName,o.componentClass)})}createProvidedBeans(t,e,i){let o=i?i.frameworkOverrides:null;X(o)&&(o=new Dv);let r={gridOptions:e,eGridDiv:t,globalEventListener:i?i.globalEventListener:null,globalSyncEventListener:i?i.globalSyncEventListener:null,frameworkOverrides:o};return i&&i.providedBeanInstances&&Object.assign(r,i.providedBeanInstances),r}createAgStackComponentsList(t){let e=[{componentName:"AgCheckbox",componentClass:Th},{componentName:"AgRadioButton",componentClass:v_},{componentName:"AgToggleButton",componentClass:hE},{componentName:"AgInputTextField",componentClass:Vn},{componentName:"AgInputTextArea",componentClass:Dk},{componentName:"AgInputNumberField",componentClass:dv},{componentName:"AgInputDateField",componentClass:Rk},{componentName:"AgInputRange",componentClass:Mk},{componentName:"AgRichSelect",componentClass:Uh},{componentName:"AgSelect",componentClass:Mh},{componentName:"AgSlider",componentClass:Ak},{componentName:"AgGridBody",componentClass:Xi},{componentName:"AgHeaderRoot",componentClass:xk},{componentName:"AgSortIndicator",componentClass:uv},{componentName:"AgPagination",componentClass:ai},{componentName:"AgPageSizeSelector",componentClass:Tv},{componentName:"AgOverlayWrapper",componentClass:jk},{componentName:"AgGroupComponent",componentClass:Ik},{componentName:"AgRowContainer",componentClass:ma},{componentName:"AgFakeHorizontalScroll",componentClass:qk},{componentName:"AgFakeVerticalScroll",componentClass:tL},{componentName:"AgAutocomplete",componentClass:Nk}],i=this.extractModuleEntity(t,o=>o.agStackComponents?o.agStackComponents:[]);return e=e.concat(i),e}createBeansList(t="clientSide",e,i){let o=e.filter(l=>!l.rowModel||l.rowModel===t),r={clientSide:"@ag-grid-community/client-side-row-model",infinite:"@ag-grid-community/infinite-row-model",serverSide:"@ag-grid-enterprise/server-side-row-model",viewport:"@ag-grid-enterprise/viewport-row-model"};if(!r[t]){uo("Could not find row model for rowModelType = "+t);return}if(!De.__assertRegistered(r[t],`rowModelType = '${t}'`,i))return;let n=[se,da,Sm,_d,na,ge,oh,lh,Sd,vm,Rr,aa,vd,Em,Rd,wd,md,sm,Yi,_e,zo,In,Pi,xt,Mn,yd,bi,nh,ld,An,zt,ah,Ar,sh,Tn,Mr,te,Pn,Oe,Lo,xd,Tr,rh,oa,Fn,bm,bd,la,dd,sa,ra,vo,am,xm,Ed,mo,ca,nd,Dd,ua,_m,On,oi,kn,Ln,jt,Cd,dh,Md,Fi],s=this.extractModuleEntity(o,l=>l.beans?l.beans:[]);n.push(...s);let a=[];return n.forEach(l=>{a.indexOf(l)<0&&a.push(l)}),a}extractModuleEntity(t,e){return[].concat(...t.map(e))}},_E=class{wrap(t,e,i=[],o){let r=this.createWrapper(t,o);return e.forEach(n=>{this.createMethod(r,n,!0)}),i.forEach(n=>{this.createMethod(r,n,!1)}),r}unwrap(t){return t}createMethod(t,e,i){t.addMethod(e,this.createMethodProxy(t,e,i))}createMethodProxy(t,e,i){return function(){return t.hasMethod(e)?t.callMethod(e,arguments):(i&&console.warn("AG Grid: Framework component is missing the method "+e+"()"),null)}}},Av=class{};Av.CHART_TYPE_TO_SERIES_TYPE={column:"bar",groupedColumn:"bar",stackedColumn:"bar",normalizedColumn:"bar",bar:"bar",groupedBar:"bar",stackedBar:"bar",normalizedBar:"bar",line:"line",scatter:"scatter",bubble:"bubble",pie:"pie",donut:"donut",doughnut:"donut",area:"area",stackedArea:"area",normalizedArea:"area",histogram:"histogram",radarLine:"radar-line",radarArea:"radar-area",nightingale:"nightingale",radialColumn:"radial-column",radialBar:"radial-bar",sunburst:"sunburst",rangeBar:"range-bar",rangeArea:"range-area",boxPlot:"box-plot",treemap:"treemap",heatmap:"heatmap",waterfall:"waterfall"};Av.COMBO_CHART_TYPES=["columnLineCombo","areaColumnCombo","customCombo"];Av.SERIES_GROUP_TYPES=["grouped","stacked","normalized"];var Da=typeof global>"u"?{}:global;Da.HTMLElement=typeof HTMLElement>"u"?{}:HTMLElement;Da.HTMLButtonElement=typeof HTMLButtonElement>"u"?{}:HTMLButtonElement;Da.HTMLSelectElement=typeof HTMLSelectElement>"u"?{}:HTMLSelectElement;Da.HTMLInputElement=typeof HTMLInputElement>"u"?{}:HTMLInputElement;Da.Node=typeof Node>"u"?{}:Node;Da.MouseEvent=typeof MouseEvent>"u"?{}:MouseEvent;var Iv=class od{constructor(e,i,o,r,n,s){this.nextId=0,this.rowCountReady=!1,this.allNodesMap={},this.rootNode=e,this.gos=i,this.eventService=o,this.columnModel=r,this.beans=s,this.selectionService=n,this.rootNode.group=!0,this.rootNode.level=-1,this.rootNode.id=od.ROOT_NODE_ID,this.rootNode.allLeafChildren=[],this.rootNode.childrenAfterGroup=[],this.rootNode.childrenAfterSort=[],this.rootNode.childrenAfterAggFilter=[],this.rootNode.childrenAfterFilter=[]}getCopyOfNodesMap(){return ce.cloneObject(this.allNodesMap)}getRowNode(e){return this.allNodesMap[e]}setRowData(e){if(typeof e=="string"){console.warn("AG Grid: rowData must be an array.");return}this.rowCountReady=!0,this.dispatchRowDataUpdateStartedEvent(e);let i=this.rootNode,o=this.rootNode.sibling;i.childrenAfterFilter=null,i.childrenAfterGroup=null,i.childrenAfterAggFilter=null,i.childrenAfterSort=null,i.childrenMapped=null,i.updateHasChildren(),this.nextId=0,this.allNodesMap={},e?i.allLeafChildren=e.map(r=>this.createNode(r,this.rootNode,od.TOP_LEVEL)):(i.allLeafChildren=[],i.childrenAfterGroup=[]),o&&(o.childrenAfterFilter=i.childrenAfterFilter,o.childrenAfterGroup=i.childrenAfterGroup,o.childrenAfterAggFilter=i.childrenAfterAggFilter,o.childrenAfterSort=i.childrenAfterSort,o.childrenMapped=i.childrenMapped,o.allLeafChildren=i.allLeafChildren)}updateRowData(e,i){this.rowCountReady=!0,this.dispatchRowDataUpdateStartedEvent(e.add);let o={remove:[],update:[],add:[]},r=[];return this.executeRemove(e,o,r),this.executeUpdate(e,o,r),this.executeAdd(e,o),this.updateSelection(r,"rowDataChanged"),i&&ce.sortRowNodesByOrder(this.rootNode.allLeafChildren,i),o}isRowCountReady(){return this.rowCountReady}dispatchRowDataUpdateStartedEvent(e){let i={type:f.EVENT_ROW_DATA_UPDATE_STARTED,firstRowData:e?.length?e[0]:null};this.eventService.dispatchEvent(i)}updateSelection(e,i){let o=e.length>0;if(o&&this.selectionService.setNodesSelected({newValue:!1,nodes:e,suppressFinishActions:!0,source:i}),this.selectionService.updateGroupsFromChildrenSelections(i),o){let r={type:f.EVENT_SELECTION_CHANGED,source:i};this.eventService.dispatchEvent(r)}}executeAdd(e,i){var o;let{add:r,addIndex:n}=e;if(ce.missingOrEmpty(r))return;let s=r.map(a=>this.createNode(a,this.rootNode,od.TOP_LEVEL));if(typeof n=="number"&&n>=0){let{allLeafChildren:a}=this.rootNode,l=a.length,d=n;if(this.gos.get("treeData")&&n>0&&l>0){for(let p=0;p<l;p++)if(((o=a[p])==null?void 0:o.rowIndex)==n-1){d=p+1;break}}let u=a.slice(0,d),h=a.slice(d,a.length);this.rootNode.allLeafChildren=[...u,...s,...h]}else this.rootNode.allLeafChildren=[...this.rootNode.allLeafChildren,...s];this.rootNode.sibling&&(this.rootNode.sibling.allLeafChildren=this.rootNode.allLeafChildren),i.add=s}executeRemove(e,i,o){let{remove:r}=e;if(ce.missingOrEmpty(r))return;let n={};r.forEach(s=>{let a=this.lookupRowNode(s);a&&(a.isSelected()&&o.push(a),a.clearRowTopAndRowIndex(),n[a.id]=!0,delete this.allNodesMap[a.id],i.remove.push(a))}),this.rootNode.allLeafChildren=this.rootNode.allLeafChildren.filter(s=>!n[s.id]),this.rootNode.sibling&&(this.rootNode.sibling.allLeafChildren=this.rootNode.allLeafChildren)}executeUpdate(e,i,o){let{update:r}=e;ce.missingOrEmpty(r)||r.forEach(n=>{let s=this.lookupRowNode(n);s&&(s.updateData(n),!s.selectable&&s.isSelected()&&o.push(s),this.setMasterForRow(s,n,od.TOP_LEVEL,!1),i.update.push(s))})}lookupRowNode(e){let i=this.gos.getCallback("getRowId"),o;if(i){let r=i({data:e,level:0});if(o=this.allNodesMap[r],!o)return console.error(`AG Grid: could not find row id=${r}, data item was not found for this id`),null}else if(o=this.rootNode.allLeafChildren.find(r=>r.data===e),!o)return console.error("AG Grid: could not find data item as object was not found",e),console.error("Consider using getRowId to help the Grid find matching row data"),null;return o||null}createNode(e,i,o){let r=new de(this.beans);r.group=!1,this.setMasterForRow(r,e,o,!0);let n=this.gos.get("suppressParentsInRowNodes");return i&&!n&&(r.parent=i),r.level=o,r.setDataAndId(e,this.nextId.toString()),this.allNodesMap[r.id]&&console.warn(`AG Grid: duplicate node id '${r.id}' detected from getRowId callback, this could cause issues in your grid.`),this.allNodesMap[r.id]=r,this.nextId++,r}setMasterForRow(e,i,o,r){if(this.gos.get("treeData"))e.setMaster(!1),r&&(e.expanded=!1);else{if(this.gos.get("masterDetail")){let a=this.gos.get("isRowMaster");a?e.setMaster(a(i)):e.setMaster(!0)}else e.setMaster(!1);if(r){let a=this.columnModel.getRowGroupColumns(),l=a?a.length:0,d=o+l;e.expanded=e.master?this.isExpanded(d):!1}}}isExpanded(e){let i=this.gos.get("groupDefaultExpanded");return i===-1?!0:e<i}};Iv.TOP_LEVEL=0;Iv.ROOT_NODE_ID="ROOT_NODE_ID";var rL=Iv,qt=class extends A{constructor(){super(...arguments),this.onRowHeightChanged_debounced=ce.debounce(this.onRowHeightChanged.bind(this),100),this.rowsToDisplay=[],this.hasStarted=!1,this.shouldSkipSettingDataOnStart=!1,this.isRefreshingModel=!1,this.rowCountReady=!1}init(){let t=this.refreshModel.bind(this,{step:"group"}),e=!this.gos.get("suppressAnimationFrame"),i=this.refreshModel.bind(this,{step:"group",afterColumnsChanged:!0,keepRenderedRows:!0,animate:e});this.addManagedListener(this.eventService,f.EVENT_NEW_COLUMNS_LOADED,i),this.addManagedListener(this.eventService,f.EVENT_COLUMN_ROW_GROUP_CHANGED,t),this.addManagedListener(this.eventService,f.EVENT_COLUMN_VALUE_CHANGED,this.onValueChanged.bind(this)),this.addManagedListener(this.eventService,f.EVENT_COLUMN_PIVOT_CHANGED,this.refreshModel.bind(this,{step:"pivot"})),this.addManagedListener(this.eventService,f.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.addManagedListener(this.eventService,f.EVENT_SORT_CHANGED,this.onSortChanged.bind(this)),this.addManagedListener(this.eventService,f.EVENT_COLUMN_PIVOT_MODE_CHANGED,t),this.addManagedListener(this.eventService,f.EVENT_GRID_STYLES_CHANGED,this.onGridStylesChanges.bind(this)),this.addManagedListener(this.eventService,f.EVENT_GRID_READY,()=>this.onGridReady()),this.addPropertyListeners(),this.rootNode=new de(this.beans),this.nodeManager=new rL(this.rootNode,this.gos,this.eventService,this.columnModel,this.selectionService,this.beans)}addPropertyListeners(){let t=new Set(["treeData","masterDetail"]),e=new Set(["suppressParentsInRowNodes","groupDefaultExpanded","groupAllowUnbalanced","initialGroupOrderComparator","groupHideOpenParents","groupDisplayType"]),i=new Set(["excludeChildrenWhenTreeDataFiltering"]),o=new Set(["removePivotHeaderRowWhenSingleValueColumn","pivotRowTotals","pivotColumnGroupTotals","suppressExpandablePivotGroups"]),r=new Set(["getGroupRowAgg","alwaysAggregateAtRootLevel","groupIncludeTotalFooter","suppressAggFilteredOnly","grandTotalRow"]),n=new Set(["postSortRows","groupDisplayType","accentedSort"]),s=new Set([]),a=new Set(["groupRemoveSingleChildren","groupRemoveLowestSingleChildren","groupIncludeFooter","groupTotalRow"]),l=[...t,...e,...i,...o,...o,...r,...n,...s,...a];this.addManagedPropertyListeners(l,d=>{var c;let u=(c=d.changeSet)==null?void 0:c.properties;if(!u)return;let h=p=>u.some(m=>p.has(m));if(h(t)){this.setRowData(this.rootNode.allLeafChildren.map(p=>p.data));return}if(h(e)){this.refreshModel({step:"group"});return}if(h(i)){this.refreshModel({step:"filter"});return}if(h(o)){this.refreshModel({step:"pivot"});return}if(h(r)){this.refreshModel({step:"aggregate"});return}if(h(n)){this.refreshModel({step:"sort"});return}if(h(s)){this.refreshModel({step:"filter_aggregates"});return}h(a)&&this.refreshModel({step:"map"})}),this.addManagedPropertyListener("rowHeight",()=>this.resetRowHeights())}start(){this.hasStarted=!0,this.shouldSkipSettingDataOnStart?this.dispatchUpdateEventsAndRefresh():this.setInitialData()}setInitialData(){let t=this.gos.get("rowData");t&&(this.shouldSkipSettingDataOnStart=!0,this.setRowData(t))}ensureRowHeightsValid(t,e,i,o){let r,n=!1;do{r=!1;let s=this.getRowIndexAtPixel(t),a=this.getRowIndexAtPixel(e),l=Math.max(s,i),d=Math.min(a,o);for(let c=l;c<=d;c++){let u=this.getRow(c);if(u.rowHeightEstimated){let h=this.gos.getRowHeightForNode(u);u.setRowHeight(h.height),r=!0,n=!0}}r&&this.setRowTopAndRowIndex()}while(r);return n}setRowTopAndRowIndex(){let t=this.environment.getDefaultRowHeight(),e=0,i=new Set,o=this.gos.isDomLayout("normal");for(let r=0;r<this.rowsToDisplay.length;r++){let n=this.rowsToDisplay[r];if(n.id!=null&&i.add(n.id),n.rowHeight==null){let s=this.gos.getRowHeightForNode(n,o,t);n.setRowHeight(s.height,s.estimated)}n.setRowTop(e),n.setRowIndex(r),e+=n.rowHeight}return i}clearRowTopAndRowIndex(t,e){let i=t.isActive(),o=n=>{n&&n.id!=null&&!e.has(n.id)&&n.clearRowTopAndRowIndex()},r=n=>{if(o(n),o(n.detailNode),o(n.sibling),n.hasChildren()&&n.childrenAfterGroup){let s=n.level==-1;i&&!s&&!n.expanded||n.childrenAfterGroup.forEach(r)}};r(this.rootNode)}ensureRowsAtPixel(t,e,i=0){let o=this.getRowIndexAtPixel(e),r=this.getRow(o),n=!this.gos.get("suppressAnimationFrame");return r===t[0]?!1:(t.forEach(s=>{ce.removeFromArray(this.rootNode.allLeafChildren,s)}),t.forEach((s,a)=>{ce.insertIntoArray(this.rootNode.allLeafChildren,s,Math.max(o+i,0)+a)}),this.refreshModel({step:"group",keepRenderedRows:!0,keepEditingRows:!0,animate:n}),!0)}highlightRowAtPixel(t,e){let i=e!=null?this.getRowIndexAtPixel(e):null,o=i!=null?this.getRow(i):null;if(!o||!t||o===t||e==null){this.lastHighlightedRow&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null);return}let r=this.getHighlightPosition(e,o);this.lastHighlightedRow&&this.lastHighlightedRow!==o&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null),o.setHighlighted(r),this.lastHighlightedRow=o}getHighlightPosition(t,e){if(!e){let r=this.getRowIndexAtPixel(t);if(e=this.getRow(r||0),!e)return 1}let{rowTop:i,rowHeight:o}=e;return t-i<o/2?0:1}getLastHighlightedRowNode(){return this.lastHighlightedRow}isLastRowIndexKnown(){return!0}getRowCount(){return this.rowsToDisplay?this.rowsToDisplay.length:0}getTopLevelRowCount(){if(this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode)return 1;let e=this.rootNode.childrenAfterAggFilter;return e?e.length:0}getTopLevelRowDisplayedIndex(t){if(this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode)return t;let i=this.rootNode.childrenAfterSort[t];if(this.gos.get("groupHideOpenParents"))for(;i.expanded&&i.childrenAfterSort&&i.childrenAfterSort.length>0;)i=i.childrenAfterSort[0];return i.rowIndex}getRowBounds(t){if(ce.missing(this.rowsToDisplay))return null;let e=this.rowsToDisplay[t];return e?{rowTop:e.rowTop,rowHeight:e.rowHeight}:null}onRowGroupOpened(){let t=this.gos.isAnimateRows();this.refreshModel({step:"map",keepRenderedRows:!0,animate:t})}onFilterChanged(t){if(t.afterDataChange)return;let e=this.gos.isAnimateRows(),o=t.columns.length===0||t.columns.some(r=>r.isPrimary())?"filter":"filter_aggregates";this.refreshModel({step:o,keepRenderedRows:!0,animate:e})}onSortChanged(){let t=this.gos.isAnimateRows();this.refreshModel({step:"sort",keepRenderedRows:!0,animate:t,keepEditingRows:!0})}getType(){return"clientSide"}onValueChanged(){this.columnModel.isPivotActive()?this.refreshModel({step:"pivot"}):this.refreshModel({step:"aggregate"})}createChangePath(t){let e=ce.missingOrEmpty(t),i=new Wh(!1,this.rootNode);return(e||this.gos.get("treeData"))&&i.setInactive(),i}isSuppressModelUpdateAfterUpdateTransaction(t){if(!this.gos.get("suppressModelUpdateAfterUpdateTransaction")||t.rowNodeTransactions==null)return!1;let e=t.rowNodeTransactions.filter(o=>o.add!=null&&o.add.length>0||o.remove!=null&&o.remove.length>0);return e==null||e.length==0}buildRefreshModelParams(t){let e="group",i={everything:"group",group:"group",filter:"filter",map:"map",aggregate:"aggregate",sort:"sort",pivot:"pivot"};if(ce.exists(t)&&(e=i[t]),ce.missing(e)){console.error(`AG Grid: invalid step ${t}, available steps are ${Object.keys(i).join(", ")}`);return}let o=!this.gos.get("suppressAnimationFrame");return{step:e,keepRenderedRows:!0,keepEditingRows:!0,animate:o}}refreshModel(t){if(!this.hasStarted||this.isRefreshingModel||this.columnModel.shouldRowModelIgnoreRefresh())return;let e=typeof t=="object"&&"step"in t?t:this.buildRefreshModelParams(t);if(!e||this.isSuppressModelUpdateAfterUpdateTransaction(e))return;let i=this.createChangePath(e.rowNodeTransactions);switch(this.isRefreshingModel=!0,e.step){case"group":this.doRowGrouping(e.rowNodeTransactions,e.rowNodeOrder,i,!!e.afterColumnsChanged);case"filter":this.doFilter(i);case"pivot":this.doPivot(i);case"aggregate":this.doAggregate(i);case"filter_aggregates":this.doFilterAggregates(i);case"sort":this.doSort(e.rowNodeTransactions,i);case"map":this.doRowsToDisplay()}let o=this.setRowTopAndRowIndex();this.clearRowTopAndRowIndex(i,o),this.isRefreshingModel=!1;let r={type:f.EVENT_MODEL_UPDATED,animate:e.animate,keepRenderedRows:e.keepRenderedRows,newData:e.newData,newPage:!1,keepUndoRedoStack:e.keepUndoRedoStack};this.eventService.dispatchEvent(r)}isEmpty(){let t=ce.missing(this.rootNode.allLeafChildren)||this.rootNode.allLeafChildren.length===0;return ce.missing(this.rootNode)||t||!this.columnModel.isReady()}isRowsToRender(){return ce.exists(this.rowsToDisplay)&&this.rowsToDisplay.length>0}getNodesInRangeForSelection(t,e){let i=!e,o=!1,r=[],n=this.gos.get("groupSelectsChildren");return this.forEachNodeAfterFilterAndSort(s=>{if(o)return;if(i&&(s===e||s===t)&&(o=!0,s.group&&n)){r.push(...s.allLeafChildren);return}if(!i){if(s!==e&&s!==t)return;i=!0}if(!s.group||!n){r.push(s);return}}),r}setDatasource(t){console.error("AG Grid: should never call setDatasource on clientSideRowController")}getTopLevelNodes(){return this.rootNode?this.rootNode.childrenAfterGroup:null}getRootNode(){return this.rootNode}getRow(t){return this.rowsToDisplay[t]}isRowPresent(t){return this.rowsToDisplay.indexOf(t)>=0}getRowIndexAtPixel(t){if(this.isEmpty()||this.rowsToDisplay.length===0)return-1;let e=0,i=this.rowsToDisplay.length-1;if(t<=0)return 0;if(ce.last(this.rowsToDisplay).rowTop<=t)return this.rowsToDisplay.length-1;let r=-1,n=-1;for(;;){let s=Math.floor((e+i)/2),a=this.rowsToDisplay[s];if(this.isRowInPixel(a,t)||(a.rowTop<t?e=s+1:a.rowTop>t&&(i=s-1),r===e&&n===i))return s;r=e,n=i}}isRowInPixel(t,e){let i=t.rowTop,o=t.rowTop+t.rowHeight;return i<=e&&o>e}forEachLeafNode(t){this.rootNode.allLeafChildren&&this.rootNode.allLeafChildren.forEach((e,i)=>t(e,i))}forEachNode(t,e=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterGroup||[]],callback:t,recursionType:0,index:0,includeFooterNodes:e})}forEachNodeAfterFilter(t,e=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterAggFilter||[]],callback:t,recursionType:1,index:0,includeFooterNodes:e})}forEachNodeAfterFilterAndSort(t,e=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterSort||[]],callback:t,recursionType:2,index:0,includeFooterNodes:e})}forEachPivotNode(t,e=!1){this.recursivelyWalkNodesAndCallback({nodes:[this.rootNode],callback:t,recursionType:3,index:0,includeFooterNodes:e})}recursivelyWalkNodesAndCallback(t){let{nodes:e,callback:i,recursionType:o,includeFooterNodes:r}=t,{index:n}=t,s=a=>{var l;let d=(l=e[0])==null?void 0:l.parent;if(!d)return;let c=r&&this.gos.getGrandTotalRow(),u=this.gos.getGroupTotalRowCallback(),h=r&&u({node:d});if(d===this.rootNode){c===a&&(d.createFooter(),i(d.sibling,n++));return}h===a&&(d.createFooter(),i(d.sibling,n++))};s("top");for(let a=0;a<e.length;a++){let l=e[a];if(i(l,n++),l.hasChildren()&&!l.footer){let d=null;switch(o){case 0:d=l.childrenAfterGroup;break;case 1:d=l.childrenAfterAggFilter;break;case 2:d=l.childrenAfterSort;break;case 3:d=l.leafGroup?null:l.childrenAfterSort;break}d&&(n=this.recursivelyWalkNodesAndCallback({nodes:[...d],callback:i,recursionType:o,index:n,includeFooterNodes:r}))}}return s("bottom"),n}doAggregate(t){var e;(e=this.aggregationStage)==null||e.execute({rowNode:this.rootNode,changedPath:t})}doFilterAggregates(t){this.filterAggregatesStage?this.filterAggregatesStage.execute({rowNode:this.rootNode,changedPath:t}):this.rootNode.childrenAfterAggFilter=this.rootNode.childrenAfterFilter}expandOrCollapseAll(t){let e=this.gos.get("treeData"),i=this.columnModel.isPivotActive(),o=s=>{s&&s.forEach(a=>{let l=()=>{a.expanded=t,o(a.childrenAfterGroup)};if(e){ce.exists(a.childrenAfterGroup)&&l();return}if(i){!a.leafGroup&&l();return}a.group&&l()})};this.rootNode&&o(this.rootNode.childrenAfterGroup),this.refreshModel({step:"map"});let r=t?"expandAll":"collapseAll",n={type:f.EVENT_EXPAND_COLLAPSE_ALL,source:r};this.eventService.dispatchEvent(n)}doSort(t,e){this.sortStage.execute({rowNode:this.rootNode,rowNodeTransactions:t,changedPath:e})}doRowGrouping(t,e,i,o){if(this.groupStage){if(t?this.groupStage.execute({rowNode:this.rootNode,rowNodeTransactions:t,rowNodeOrder:e,changedPath:i}):this.groupStage.execute({rowNode:this.rootNode,changedPath:i,afterColumnsChanged:o}),this.gos.get("groupSelectsChildren")&&this.selectionService.updateGroupsFromChildrenSelections("rowGroupChanged",i)){let n={type:f.EVENT_SELECTION_CHANGED,source:"rowGroupChanged"};this.eventService.dispatchEvent(n)}}else this.rootNode.childrenAfterGroup=this.rootNode.allLeafChildren,this.rootNode.sibling&&(this.rootNode.sibling.childrenAfterGroup=this.rootNode.childrenAfterGroup),this.rootNode.updateHasChildren();this.nodeManager.isRowCountReady()&&(this.rowCountReady=!0,this.eventService.dispatchEventOnce({type:f.EVENT_ROW_COUNT_READY}))}doFilter(t){this.filterStage.execute({rowNode:this.rootNode,changedPath:t})}doPivot(t){var e;(e=this.pivotStage)==null||e.execute({rowNode:this.rootNode,changedPath:t})}getCopyOfNodesMap(){return this.nodeManager.getCopyOfNodesMap()}getRowNode(t){if(typeof t=="string"&&t.indexOf(de.ID_PREFIX_ROW_GROUP)==0){let i;return this.forEachNode(o=>{o.id===t&&(i=o)}),i}return this.nodeManager.getRowNode(t)}setRowData(t){this.selectionService.reset("rowDataChanged"),this.nodeManager.setRowData(t),this.hasStarted&&this.dispatchUpdateEventsAndRefresh()}dispatchUpdateEventsAndRefresh(){let t={type:f.EVENT_ROW_DATA_UPDATED};this.eventService.dispatchEvent(t),this.refreshModel({step:"group",newData:!0})}batchUpdateRowData(t,e){if(this.applyAsyncTransactionsTimeout==null){this.rowDataTransactionBatch=[];let i=this.gos.getAsyncTransactionWaitMillis();this.applyAsyncTransactionsTimeout=window.setTimeout(()=>{this.executeBatchUpdateRowData()},i)}this.rowDataTransactionBatch.push({rowDataTransaction:t,callback:e})}flushAsyncTransactions(){this.applyAsyncTransactionsTimeout!=null&&(clearTimeout(this.applyAsyncTransactionsTimeout),this.executeBatchUpdateRowData())}executeBatchUpdateRowData(){this.valueCache.onDataChanged();let t=[],e=[],i=!1;if(this.rowDataTransactionBatch&&this.rowDataTransactionBatch.forEach(o=>{let r=this.nodeManager.updateRowData(o.rowDataTransaction,void 0);e.push(r),o.callback&&t.push(o.callback.bind(null,r)),typeof o.rowDataTransaction.addIndex=="number"&&(i=!0)}),this.commonUpdateRowData(e,void 0,i),t.length>0&&window.setTimeout(()=>{t.forEach(o=>o())},0),e.length>0){let o={type:f.EVENT_ASYNC_TRANSACTIONS_FLUSHED,results:e};this.eventService.dispatchEvent(o)}this.rowDataTransactionBatch=null,this.applyAsyncTransactionsTimeout=void 0}updateRowData(t,e){this.valueCache.onDataChanged();let i=this.nodeManager.updateRowData(t,e),o=typeof t.addIndex=="number";return this.commonUpdateRowData([i],e,o),i}createRowNodeOrder(){if(this.gos.get("suppressMaintainUnsortedOrder"))return;let e={};if(this.rootNode&&this.rootNode.allLeafChildren)for(let i=0;i<this.rootNode.allLeafChildren.length;i++){let o=this.rootNode.allLeafChildren[i];e[o.id]=i}return e}commonUpdateRowData(t,e,i){if(!this.hasStarted)return;let o=!this.gos.get("suppressAnimationFrame");i&&(e=this.createRowNodeOrder());let r={type:f.EVENT_ROW_DATA_UPDATED};this.eventService.dispatchEvent(r),this.refreshModel({step:"group",rowNodeTransactions:t,rowNodeOrder:e,keepRenderedRows:!0,keepEditingRows:!0,animate:o})}doRowsToDisplay(){this.rowsToDisplay=this.flattenStage.execute({rowNode:this.rootNode})}onRowHeightChanged(){this.refreshModel({step:"map",keepRenderedRows:!0,keepEditingRows:!0,keepUndoRedoStack:!0})}onRowHeightChangedDebounced(){this.onRowHeightChanged_debounced()}resetRowHeights(){let t=this.resetRowHeightsForAllRowNodes();this.rootNode.setRowHeight(this.rootNode.rowHeight,!0),this.rootNode.sibling&&this.rootNode.sibling.setRowHeight(this.rootNode.sibling.rowHeight,!0),t&&this.onRowHeightChanged()}resetRowHeightsForAllRowNodes(){let t=!1;return this.forEachNode(e=>{e.setRowHeight(e.rowHeight,!0);let i=e.detailNode;i&&i.setRowHeight(i.rowHeight,!0),e.sibling&&e.sibling.setRowHeight(e.sibling.rowHeight,!0),t=!0}),t}onGridStylesChanges(){this.columnModel.isAutoRowHeightActive()||this.resetRowHeights()}onGridReady(){this.hasStarted||this.setInitialData()}isRowDataLoaded(){return this.rowCountReady}};g([v("columnModel")],qt.prototype,"columnModel",2);g([v("selectionService")],qt.prototype,"selectionService",2);g([v("valueCache")],qt.prototype,"valueCache",2);g([v("beans")],qt.prototype,"beans",2);g([v("filterStage")],qt.prototype,"filterStage",2);g([v("sortStage")],qt.prototype,"sortStage",2);g([v("flattenStage")],qt.prototype,"flattenStage",2);g([Re("groupStage")],qt.prototype,"groupStage",2);g([Re("aggregationStage")],qt.prototype,"aggregationStage",2);g([Re("pivotStage")],qt.prototype,"pivotStage",2);g([Re("filterAggregatesStage")],qt.prototype,"filterAggregatesStage",2);g([I],qt.prototype,"init",1);qt=g([V("rowModel")],qt);var ch=class extends A{execute(t){let{changedPath:e}=t;this.filterService.filter(e)}};g([v("filterService")],ch.prototype,"filterService",2);ch=g([V("filterStage")],ch);var Td=class extends A{execute(t){let e=this.sortController.getSortOptions(),i=ce.exists(e)&&e.length>0,o=i&&ce.exists(t.rowNodeTransactions)&&this.gos.get("deltaSort"),r=e.some(n=>this.gos.isColumnsSortingCoupledToGroup()?n.column.isPrimary()&&n.column.isRowGroupActive():!!n.column.getColDef().showRowGroup);this.sortService.sort(e,i,o,t.rowNodeTransactions,t.changedPath,r)}};g([v("sortService")],Td.prototype,"sortService",2);g([v("sortController")],Td.prototype,"sortController",2);Td=g([V("sortStage")],Td);var uh=class extends A{execute(t){let e=t.rowNode,i=[],o=this.beans.columnModel.isPivotMode(),r=o&&e.leafGroup,n=r?[e]:e.childrenAfterSort,s=this.getFlattenDetails();this.recursivelyAddToRowsToDisplay(s,n,i,o,0);let a=i.length>0;if(!r&&a&&s.grandTotalRow){e.createFooter();let d=s.grandTotalRow==="top";this.addRowNodeToRowsToDisplay(s,e.sibling,i,0,d)}return i}getFlattenDetails(){let t=this.gos.get("groupRemoveSingleChildren");return{groupRemoveLowestSingleChildren:!t&&this.gos.get("groupRemoveLowestSingleChildren"),groupRemoveSingleChildren:t,isGroupMultiAutoColumn:this.gos.isGroupMultiAutoColumn(),hideOpenParents:this.gos.get("groupHideOpenParents"),grandTotalRow:this.gos.getGrandTotalRow(),groupTotalRow:this.gos.getGroupTotalRowCallback()}}recursivelyAddToRowsToDisplay(t,e,i,o,r){if(!ce.missingOrEmpty(e))for(let n=0;n<e.length;n++){let s=e[n],a=s.hasChildren(),l=o&&!a,d=t.groupRemoveSingleChildren&&a&&s.childrenAfterGroup.length===1,c=t.groupRemoveLowestSingleChildren&&a&&s.leafGroup&&s.childrenAfterGroup.length===1,u=o&&s.leafGroup,h=t.hideOpenParents&&s.expanded&&!s.master&&!u;if(!l&&!h&&!d&&!c&&this.addRowNodeToRowsToDisplay(t,s,i,r),!(o&&s.leafGroup)){if(a){let m=d||c;if(s.expanded||m){let C=t.groupTotalRow({node:s});C||s.destroyFooter();let w=m?r:r+1;C==="top"&&(s.createFooter(),this.addRowNodeToRowsToDisplay(t,s.sibling,i,w)),this.recursivelyAddToRowsToDisplay(t,s.childrenAfterSort,i,o,w),C==="bottom"&&(s.createFooter(),this.addRowNodeToRowsToDisplay(t,s.sibling,i,w))}}else if(s.master&&s.expanded){let m=this.createDetailNode(s);this.addRowNodeToRowsToDisplay(t,m,i,r)}}}}addRowNodeToRowsToDisplay(t,e,i,o,r){r?i.unshift(e):i.push(e),e.setUiLevel(t.isGroupMultiAutoColumn?0:o)}createDetailNode(t){if(ce.exists(t.detailNode))return t.detailNode;let e=new de(this.beans);return e.detail=!0,e.selectable=!1,e.parent=t,ce.exists(t.id)&&(e.id="detail_"+t.id),e.data=t.data,e.level=t.level+1,t.detailNode=e,e}};g([v("beans")],uh.prototype,"beans",2);uh=g([V("flattenStage")],uh);var Ad=class extends A{sort(t,e,i,o,r,n){let s=this.gos.get("groupMaintainOrder"),a=this.columnModel.getAllGridColumns().some(h=>h.isRowGroupActive()),l={};i&&o&&(l=this.calculateDirtyNodes(o));let d=this.columnModel.isPivotMode(),c=this.gos.getCallback("postSortRows"),u=h=>{var p;this.pullDownGroupDataForHideOpenParents(h.childrenAfterAggFilter,!0);let m=d&&h.leafGroup;if(s&&a&&!h.leafGroup&&!n){let w=(p=this.columnModel.getRowGroupColumns())==null?void 0:p[h.level+1],b=w?.getSort()===null,y=h.childrenAfterAggFilter.slice(0);if(h.childrenAfterSort&&!b){let _={};h.childrenAfterSort.forEach((x,E)=>{_[x.id]=E}),y.sort((x,E)=>{var D,R;return((D=_[x.id])!=null?D:0)-((R=_[E.id])!=null?R:0)})}h.childrenAfterSort=y}else!e||m?h.childrenAfterSort=h.childrenAfterAggFilter.slice(0):i?h.childrenAfterSort=this.doDeltaSort(h,l,r,t):h.childrenAfterSort=this.rowNodeSorter.doFullSort(h.childrenAfterAggFilter,t);if(h.sibling&&(h.sibling.childrenAfterSort=h.childrenAfterSort),this.updateChildIndexes(h),c){let w={nodes:h.childrenAfterSort};c(w)}};r&&r.forEachChangedNodeDepthFirst(u),this.updateGroupDataForHideOpenParents(r)}calculateDirtyNodes(t){let e={},i=o=>{o&&o.forEach(r=>e[r.id]=!0)};return t&&t.forEach(o=>{i(o.add),i(o.update),i(o.remove)}),e}doDeltaSort(t,e,i,o){let r=t.childrenAfterAggFilter,n=t.childrenAfterSort;if(!n)return this.rowNodeSorter.doFullSort(r,o);let s={},a=[];r.forEach(u=>{e[u.id]||!i.canSkip(u)?a.push(u):s[u.id]=!0});let l=n.filter(u=>s[u.id]),d=(u,h)=>({currentPos:h,rowNode:u}),c=a.map(d).sort((u,h)=>this.rowNodeSorter.compareRowNodes(o,u,h));return this.mergeSortedArrays(o,c,l.map(d)).map(({rowNode:u})=>u)}mergeSortedArrays(t,e,i){let o=[],r=0,n=0;for(;r<e.length&&n<i.length;)this.rowNodeSorter.compareRowNodes(t,e[r],i[n])<0?o.push(e[r++]):o.push(i[n++]);for(;r<e.length;)o.push(e[r++]);for(;n<i.length;)o.push(i[n++]);return o}updateChildIndexes(t){if(ce.missing(t.childrenAfterSort))return;let e=t.childrenAfterSort;for(let i=0;i<e.length;i++){let o=e[i],r=i===0,n=i===t.childrenAfterSort.length-1;o.setFirstChild(r),o.setLastChild(n),o.setChildIndex(i)}}updateGroupDataForHideOpenParents(t){if(!this.gos.get("groupHideOpenParents"))return;if(this.gos.get("treeData"))return ce.warnOnce("The property hideOpenParents dose not work with Tree Data. This is because Tree Data has values at the group level, it doesn't make sense to hide them."),!1;let e=i=>{this.pullDownGroupDataForHideOpenParents(i.childrenAfterSort,!1),i.childrenAfterSort.forEach(o=>{o.hasChildren()&&e(o)})};t&&t.executeFromRootNode(i=>e(i))}pullDownGroupDataForHideOpenParents(t,e){!this.gos.get("groupHideOpenParents")||ce.missing(t)||t.forEach(i=>{this.columnModel.getGroupDisplayColumns().forEach(r=>{let n=r.getColDef().showRowGroup;if(typeof n!="string"){console.error("AG Grid: groupHideOpenParents only works when specifying specific columns for colDef.showRowGroup");return}let s=n,a=this.columnModel.getPrimaryColumn(s);if(a!==i.rowGroupColumn)if(e)i.setGroupValue(r.getId(),void 0);else{let d=i.getFirstChildOfFirstChild(a);d&&i.setGroupValue(r.getId(),d.key)}})})}};g([v("columnModel")],Ad.prototype,"columnModel",2);g([v("rowNodeSorter")],Ad.prototype,"rowNodeSorter",2);Ad=g([V("sortService")],Ad);var hh=class extends A{filter(t){let e=this.filterManager.isChildFilterPresent();this.filterNodes(e,t)}filterNodes(t,e){let i=(o,r)=>{o.hasChildren()&&t&&!r?o.childrenAfterFilter=o.childrenAfterGroup.filter(n=>{let s=n.childrenAfterFilter&&n.childrenAfterFilter.length>0,a=n.data&&this.filterManager.doesRowPassFilter({rowNode:n});return s||a}):o.childrenAfterFilter=o.childrenAfterGroup,o.sibling&&(o.sibling.childrenAfterFilter=o.childrenAfterFilter)};if(this.doingTreeDataFiltering()){let o=(n,s)=>{if(n.childrenAfterGroup)for(let a=0;a<n.childrenAfterGroup.length;a++){let l=n.childrenAfterGroup[a],d=s||this.filterManager.doesRowPassFilter({rowNode:l});l.childrenAfterGroup?o(n.childrenAfterGroup[a],d):i(l,d)}i(n,s)},r=n=>o(n,!1);e.executeFromRootNode(r)}else{let o=r=>i(r,!1);e.forEachChangedNodeDepthFirst(o,!0)}}doingTreeDataFiltering(){return this.gos.get("treeData")&&!this.gos.get("excludeChildrenWhenTreeDataFiltering")}};g([v("filterManager")],hh.prototype,"filterManager",2);hh=g([V("filterService")],hh);var Nn=class extends A{postConstruct(){this.rowModel.getType()==="clientSide"&&(this.clientSideRowModel=this.rowModel,this.addManagedPropertyListener("rowData",()=>this.onRowDataUpdated()))}isActive(){let t=this.gos.exists("getRowId");return this.gos.get("resetRowDataOnUpdate")?!1:t}setRowData(t){let e=this.createTransactionForRowData(t);if(!e)return;let[i,o]=e;this.clientSideRowModel.updateRowData(i,o)}createTransactionForRowData(t){if(ce.missing(this.clientSideRowModel)){console.error("AG Grid: ImmutableService only works with ClientSideRowModel");return}let e=this.gos.getCallback("getRowId");if(e==null){console.error("AG Grid: ImmutableService requires getRowId() callback to be implemented, your row data needs IDs!");return}let i={remove:[],update:[],add:[]},o=this.clientSideRowModel.getCopyOfNodesMap(),n=this.gos.get("suppressMaintainUnsortedOrder")?void 0:{};return ce.exists(t)&&t.forEach((s,a)=>{let l=e({data:s,level:0}),d=o[l];n&&(n[l]=a),d?(d.data!==s&&i.update.push(s),o[l]=void 0):i.add.push(s)}),ce.iterateObject(o,(s,a)=>{a&&i.remove.push(a.data)}),[i,n]}onRowDataUpdated(){let t=this.gos.get("rowData");t&&(this.isActive()?this.setRowData(t):(this.selectionService.reset("rowDataChanged"),this.clientSideRowModel.setRowData(t)))}};g([v("rowModel")],Nn.prototype,"rowModel",2);g([v("rowRenderer")],Nn.prototype,"rowRenderer",2);g([v("selectionService")],Nn.prototype,"selectionService",2);g([I],Nn.prototype,"postConstruct",1);Nn=g([V("immutableService")],Nn);var nL="31.3.4",sL={version:nL,moduleName:"@ag-grid-community/client-side-row-model",rowModel:"clientSide",beans:[qt,ch,Td,uh,Ad,hh,Nn]},aL=Object.defineProperty,lL=Object.getOwnPropertyDescriptor,Qt=(t,e,i,o)=>{for(var r=o>1?void 0:o?lL(e,i):e,n=t.length-1,s;n>=0;n--)(s=t[n])&&(r=(o?s(e,i,r):s(r))||r);return o&&r&&aL(e,i,r),r},dL=(t,e)=>(i,o)=>e(i,o,t),Id=class extends Cm{constructor(t,e,i){super(t),this.parentCache=e,this.params=i,this.startRow=t*i.blockSize,this.endRow=this.startRow+i.blockSize}postConstruct(){this.createRowNodes()}getBlockStateJson(){return{id:""+this.getId(),state:{blockNumber:this.getId(),startRow:this.getStartRow(),endRow:this.getEndRow(),pageStatus:this.getState()}}}setDataAndId(t,e,i){ce.exists(e)?t.setDataAndId(e,i.toString()):t.setDataAndId(void 0,void 0)}loadFromDatasource(){let t=this.createLoadParams();if(ce.missing(this.params.datasource.getRows)){console.warn("AG Grid: datasource is missing getRows method");return}window.setTimeout(()=>{this.params.datasource.getRows(t)},0)}processServerFail(){}createLoadParams(){return{startRow:this.getStartRow(),endRow:this.getEndRow(),successCallback:this.pageLoaded.bind(this,this.getVersion()),failCallback:this.pageLoadFailed.bind(this,this.getVersion()),sortModel:this.params.sortModel,filterModel:this.params.filterModel,context:this.gos.getGridCommonParams().context}}forEachNode(t,e,i){this.rowNodes.forEach((o,r)=>{this.startRow+r<i&&t(o,e.next())})}getLastAccessed(){return this.lastAccessed}getRow(t,e=!1){e||(this.lastAccessed=this.params.lastAccessedSequence.next());let i=t-this.startRow;return this.rowNodes[i]}getStartRow(){return this.startRow}getEndRow(){return this.endRow}createRowNodes(){this.rowNodes=[];for(let t=0;t<this.params.blockSize;t++){let e=this.startRow+t,i=new de(this.beans);i.setRowHeight(this.params.rowHeight),i.uiLevel=0,i.setRowIndex(e),i.setRowTop(this.params.rowHeight*e),this.rowNodes.push(i)}}processServerResult(t){this.rowNodes.forEach((i,o)=>{let r=t.rowData?t.rowData[o]:void 0;!i.id&&i.alreadyRendered&&r&&(this.rowNodes[o]=new de(this.beans),this.rowNodes[o].setRowIndex(i.rowIndex),this.rowNodes[o].setRowTop(i.rowTop),this.rowNodes[o].setRowHeight(i.rowHeight),i.clearRowTopAndRowIndex()),this.setDataAndId(this.rowNodes[o],r,this.startRow+o)});let e=t.rowCount!=null&&t.rowCount>=0?t.rowCount:void 0;this.parentCache.pageLoaded(this,e)}destroyRowNodes(){this.rowNodes.forEach(t=>{t.clearRowTopAndRowIndex()})}};Qt([v("beans")],Id.prototype,"beans",2);Qt([I],Id.prototype,"postConstruct",1);Qt([Kt],Id.prototype,"destroyRowNodes",1);var Ra=class EE extends A{constructor(e){super(),this.lastRowIndexKnown=!1,this.blocks={},this.blockCount=0,this.rowCount=e.initialRowCount,this.params=e}setBeans(e){this.logger=e.create("InfiniteCache")}getRow(e,i=!1){let o=Math.floor(e/this.params.blockSize),r=this.blocks[o];if(!r){if(i)return;r=this.createBlock(o)}return r.getRow(e)}createBlock(e){let i=this.createBean(new Id(e,this,this.params));return this.blocks[i.getId()]=i,this.blockCount++,this.purgeBlocksIfNeeded(i),this.params.rowNodeBlockLoader.addBlock(i),i}refreshCache(){if(this.blockCount==0){this.purgeCache();return}this.getBlocksInOrder().forEach(i=>i.setStateWaitingToLoad()),this.params.rowNodeBlockLoader.checkBlockToLoad()}destroyAllBlocks(){this.getBlocksInOrder().forEach(e=>this.destroyBlock(e))}getRowCount(){return this.rowCount}isLastRowIndexKnown(){return this.lastRowIndexKnown}pageLoaded(e,i){this.isAlive()&&(this.logger.log(`onPageLoaded: page = ${e.getId()}, lastRow = ${i}`),this.checkRowCount(e,i),this.onCacheUpdated())}purgeBlocksIfNeeded(e){let i=this.getBlocksInOrder().filter(a=>a!=e),o=(a,l)=>l.getLastAccessed()-a.getLastAccessed();i.sort(o);let r=this.params.maxBlocksInCache>0,n=r?this.params.maxBlocksInCache-1:null,s=EE.MAX_EMPTY_BLOCKS_TO_KEEP-1;i.forEach((a,l)=>{let d=a.getState()===Id.STATE_WAITING_TO_LOAD&&l>=s,c=r?l>=n:!1;if(d||c){if(this.isBlockCurrentlyDisplayed(a)||this.isBlockFocused(a))return;this.removeBlockFromCache(a)}})}isBlockFocused(e){let i=this.focusService.getFocusCellToUseAfterRefresh();if(!i||i.rowPinned!=null)return!1;let o=e.getStartRow(),r=e.getEndRow();return i.rowIndex>=o&&i.rowIndex<r}isBlockCurrentlyDisplayed(e){let i=e.getStartRow(),o=e.getEndRow()-1;return this.rowRenderer.isRangeInRenderedViewport(i,o)}removeBlockFromCache(e){e&&this.destroyBlock(e)}checkRowCount(e,i){if(typeof i=="number"&&i>=0)this.rowCount=i,this.lastRowIndexKnown=!0;else if(!this.lastRowIndexKnown){let r=(e.getId()+1)*this.params.blockSize+this.params.overflowSize;this.rowCount<r&&(this.rowCount=r)}}setRowCount(e,i){this.rowCount=e,ce.exists(i)&&(this.lastRowIndexKnown=i),this.lastRowIndexKnown||this.rowCount%this.params.blockSize===0&&this.rowCount++,this.onCacheUpdated()}forEachNodeDeep(e){let i=new ia;this.getBlocksInOrder().forEach(o=>o.forEachNode(e,i,this.rowCount))}getBlocksInOrder(){let e=(o,r)=>o.getId()-r.getId();return ce.getAllValuesInObject(this.blocks).sort(e)}destroyBlock(e){delete this.blocks[e.getId()],this.destroyBean(e),this.blockCount--,this.params.rowNodeBlockLoader.removeBlock(e)}onCacheUpdated(){if(this.isAlive()){this.destroyAllBlocksPastVirtualRowCount();let e={type:f.EVENT_STORE_UPDATED};this.eventService.dispatchEvent(e)}}destroyAllBlocksPastVirtualRowCount(){let e=[];this.getBlocksInOrder().forEach(i=>{i.getId()*this.params.blockSize>=this.rowCount&&e.push(i)}),e.length>0&&e.forEach(i=>this.destroyBlock(i))}purgeCache(){this.getBlocksInOrder().forEach(e=>this.removeBlockFromCache(e)),this.lastRowIndexKnown=!1,this.rowCount===0&&(this.rowCount=this.params.initialRowCount),this.onCacheUpdated()}getRowNodesInRange(e,i){let o=[],r=-1,n=!1,s=new ia;ce.missing(e)&&(n=!0);let a=!1;return this.getBlocksInOrder().forEach(d=>{if(!a){if(n&&r+1!==d.getId()){a=!0;return}r=d.getId(),d.forEachNode(c=>{let u=c===e||c===i;(n||u)&&o.push(c),u&&(n=!n)},s,this.rowCount)}}),a||n?[]:o}};Ra.MAX_EMPTY_BLOCKS_TO_KEEP=2;Qt([v("rowRenderer")],Ra.prototype,"rowRenderer",2);Qt([v("focusService")],Ra.prototype,"focusService",2);Qt([dL(0,Ti("loggerFactory"))],Ra.prototype,"setBeans",1);Qt([Kt],Ra.prototype,"destroyAllBlocks",1);var cL=Ra,Co=class extends A{getRowBounds(t){return{rowHeight:this.rowHeight,rowTop:this.rowHeight*t}}ensureRowHeightsValid(t,e,i,o){return!1}init(){this.gos.isRowModelType("infinite")&&(this.rowHeight=this.gos.getRowHeightAsNumber(),this.addEventListeners(),this.addDestroyFunc(()=>this.destroyCache()),this.verifyProps())}verifyProps(){this.gos.exists("initialGroupOrderComparator")&&ce.warnOnce("initialGroupOrderComparator cannot be used with Infinite Row Model as sorting is done on the server side")}start(){this.setDatasource(this.gos.get("datasource"))}destroyDatasource(){this.datasource&&(this.getContext().destroyBean(this.datasource),this.rowRenderer.datasourceChanged(),this.datasource=null)}addEventListeners(){this.addManagedListener(this.eventService,f.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.addManagedListener(this.eventService,f.EVENT_SORT_CHANGED,this.onSortChanged.bind(this)),this.addManagedListener(this.eventService,f.EVENT_NEW_COLUMNS_LOADED,this.onColumnEverything.bind(this)),this.addManagedListener(this.eventService,f.EVENT_STORE_UPDATED,this.onCacheUpdated.bind(this)),this.addManagedPropertyListener("datasource",()=>this.setDatasource(this.gos.get("datasource"))),this.addManagedPropertyListener("cacheBlockSize",()=>this.resetCache()),this.addManagedPropertyListener("rowHeight",()=>{this.rowHeight=this.gos.getRowHeightAsNumber(),this.cacheParams.rowHeight=this.rowHeight,this.updateRowHeights()})}onFilterChanged(){this.reset()}onSortChanged(){this.reset()}onColumnEverything(){let t;this.cacheParams?t=this.isSortModelDifferent():t=!0,t&&this.reset()}isSortModelDifferent(){return!ce.jsonEquals(this.cacheParams.sortModel,this.sortController.getSortModel())}getType(){return"infinite"}setDatasource(t){this.destroyDatasource(),this.datasource=t,t&&this.reset()}isEmpty(){return!this.infiniteCache}isRowsToRender(){return!!this.infiniteCache}getNodesInRangeForSelection(t,e){return this.infiniteCache?this.infiniteCache.getRowNodesInRange(t,e):[]}reset(){if(!this.datasource)return;this.gos.getCallback("getRowId")!=null||this.selectionService.reset("rowDataChanged"),this.resetCache()}createModelUpdatedEvent(){return{type:f.EVENT_MODEL_UPDATED,newPage:!1,newPageSize:!1,newData:!1,keepRenderedRows:!0,animate:!1}}resetCache(){this.destroyCache(),this.cacheParams={datasource:this.datasource,filterModel:this.filterManager.getFilterModel(),sortModel:this.sortController.getSortModel(),rowNodeBlockLoader:this.rowNodeBlockLoader,initialRowCount:this.gos.get("infiniteInitialRowCount"),maxBlocksInCache:this.gos.get("maxBlocksInCache"),rowHeight:this.gos.getRowHeightAsNumber(),overflowSize:this.gos.get("cacheOverflowSize"),blockSize:this.gos.get("cacheBlockSize"),lastAccessedSequence:new ia},this.infiniteCache=this.createBean(new cL(this.cacheParams)),this.eventService.dispatchEventOnce({type:f.EVENT_ROW_COUNT_READY});let t=this.createModelUpdatedEvent();this.eventService.dispatchEvent(t)}updateRowHeights(){this.forEachNode(e=>{e.setRowHeight(this.rowHeight),e.setRowTop(this.rowHeight*e.rowIndex)});let t=this.createModelUpdatedEvent();this.eventService.dispatchEvent(t)}destroyCache(){this.infiniteCache&&(this.infiniteCache=this.destroyBean(this.infiniteCache))}onCacheUpdated(){let t=this.createModelUpdatedEvent();this.eventService.dispatchEvent(t)}getRow(t){if(this.infiniteCache&&!(t>=this.infiniteCache.getRowCount()))return this.infiniteCache.getRow(t)}getRowNode(t){let e;return this.forEachNode(i=>{i.id===t&&(e=i)}),e}forEachNode(t){this.infiniteCache&&this.infiniteCache.forEachNodeDeep(t)}getTopLevelRowCount(){return this.getRowCount()}getTopLevelRowDisplayedIndex(t){return t}getRowIndexAtPixel(t){if(this.rowHeight!==0){let e=Math.floor(t/this.rowHeight),i=this.getRowCount()-1;return e>i?i:e}return 0}getRowCount(){return this.infiniteCache?this.infiniteCache.getRowCount():0}isRowPresent(t){return!!this.getRowNode(t.id)}refreshCache(){this.infiniteCache&&this.infiniteCache.refreshCache()}purgeCache(){this.infiniteCache&&this.infiniteCache.purgeCache()}isLastRowIndexKnown(){return this.infiniteCache?this.infiniteCache.isLastRowIndexKnown():!1}setRowCount(t,e){this.infiniteCache&&this.infiniteCache.setRowCount(t,e)}};Qt([v("filterManager")],Co.prototype,"filterManager",2);Qt([v("sortController")],Co.prototype,"sortController",2);Qt([v("selectionService")],Co.prototype,"selectionService",2);Qt([v("rowRenderer")],Co.prototype,"rowRenderer",2);Qt([v("rowNodeBlockLoader")],Co.prototype,"rowNodeBlockLoader",2);Qt([I],Co.prototype,"init",1);Qt([Kt],Co.prototype,"destroyDatasource",1);Co=Qt([V("rowModel")],Co);var uL="31.3.4",hL={version:uL,moduleName:"@ag-grid-community/infinite-row-model",rowModel:"infinite",beans:[Co]},DE=Object.defineProperty,gL=Object.defineProperties,pL=Object.getOwnPropertyDescriptor,fL=Object.getOwnPropertyDescriptors,GS=Object.getOwnPropertySymbols,mL=Object.prototype.hasOwnProperty,vL=Object.prototype.propertyIsEnumerable,VS=(t,e,i)=>e in t?DE(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,RE=(t,e)=>{for(var i in e||(e={}))mL.call(e,i)&&VS(t,i,e[i]);if(GS)for(var i of GS(e))vL.call(e,i)&&VS(t,i,e[i]);return t},ME=(t,e)=>gL(t,fL(e)),li=(t,e,i,o)=>{for(var r=o>1?void 0:o?pL(e,i):e,n=t.length-1,s;n>=0;n--)(s=t[n])&&(r=(o?s(e,i,r):s(r))||r);return o&&r&&DE(e,i,r),r},Pd=(t,e,i)=>new Promise((o,r)=>{var n=l=>{try{a(i.next(l))}catch(d){r(d)}},s=l=>{try{a(i.throw(l))}catch(d){r(d)}},a=l=>l.done?o(l.value):Promise.resolve(l.value).then(n,s);a((i=i.apply(t,e)).next())}),CL=class{setBeans(t){this.beans=t}getFileName(t){let e=this.getDefaultFileExtension();return(t==null||!t.length)&&(t=this.getDefaultFileName()),t.indexOf(".")===-1?`${t}.${e}`:t}getData(t){let e=this.createSerializingSession(t);return this.beans.gridSerializer.serialize(e,t)}getDefaultFileName(){return`export.${this.getDefaultFileExtension()}`}},wL=class{constructor(t){this.groupColumns=[];let{columnModel:e,valueService:i,gos:o,processCellCallback:r,processHeaderCallback:n,processGroupHeaderCallback:s,processRowGroupCallback:a}=t;this.columnModel=e,this.valueService=i,this.gos=o,this.processCellCallback=r,this.processHeaderCallback=n,this.processGroupHeaderCallback=s,this.processRowGroupCallback=a}prepare(t){this.groupColumns=t.filter(e=>!!e.getColDef().showRowGroup)}extractHeaderValue(t){let e=this.getHeaderName(this.processHeaderCallback,t);return e??""}extractRowCellValue(t,e,i,o,r){let s=(!this.gos.get("groupHideOpenParents")||r.footer)&&this.shouldRenderGroupSummaryCell(r,t,e)?this.createValueForGroupNode(t,r):this.valueService.getValue(t,r);return this.processCell({accumulatedRowIndex:i,rowNode:r,column:t,value:s,processCellCallback:this.processCellCallback,type:o})}shouldRenderGroupSummaryCell(t,e,i){var o;if(!(t&&t.group))return!1;if(this.groupColumns.indexOf(e)!==-1){if(((o=t.groupData)==null?void 0:o[e.getId()])!=null||this.gos.isRowModelType("serverSide")&&t.group)return!0;if(t.footer&&t.level===-1){let a=e.getColDef();return a==null||a.showRowGroup===!0||a.showRowGroup===this.columnModel.getRowGroupColumns()[0].getId()}}let s=this.gos.isGroupUseEntireRow(this.columnModel.isPivotMode());return i===0&&s}getHeaderName(t,e){return t?t(this.gos.addGridCommonParams({column:e})):this.columnModel.getDisplayNameForColumn(e,"csv",!0)}createValueForGroupNode(t,e){if(this.processRowGroupCallback)return this.processRowGroupCallback(this.gos.addGridCommonParams({column:t,node:e}));let i=this.gos.get("treeData"),o=this.gos.get("suppressGroupMaintainValueType"),r=l=>{var d,c;if(i||o)return l.key;let u=(d=l.groupData)==null?void 0:d[t.getId()];return!u||!l.rowGroupColumn||l.rowGroupColumn.getColDef().useValueFormatterForExport===!1?u:(c=this.valueService.formatValue(l.rowGroupColumn,l,u))!=null?c:u},n=e.footer,s=[r(e)];if(!this.gos.isGroupMultiAutoColumn())for(;e.parent;)e=e.parent,s.push(r(e));let a=s.reverse().join(" -> ");return n?`Total ${a}`:a}processCell(t){var e;let{accumulatedRowIndex:i,rowNode:o,column:r,value:n,processCellCallback:s,type:a}=t;return s?{value:(e=s(this.gos.addGridCommonParams({accumulatedRowIndex:i,column:r,node:o,value:n,type:a,parseValue:l=>this.valueService.parseValue(r,o,l,this.valueService.getValue(r,o)),formatValue:l=>{var d;return(d=this.valueService.formatValue(r,o,l))!=null?d:l}})))!=null?e:""}:r.getColDef().useValueFormatterForExport!==!1?{value:n??"",valueFormatted:this.valueService.formatValue(r,o,n)}:{value:n??""}}},yL=class{static download(t,e){let i=document.defaultView||window;if(!i){console.warn("AG Grid: There is no `window` associated with the current `document`");return}let o=document.createElement("a"),r=i.URL.createObjectURL(e);o.setAttribute("href",r),o.setAttribute("download",t),o.style.display="none",document.body.appendChild(o),o.dispatchEvent(new MouseEvent("click",{bubbles:!1,cancelable:!0,view:i})),document.body.removeChild(o),i.setTimeout(()=>{i.URL.revokeObjectURL(r)},0)}},HS=`\r
`,bL=class extends wL{constructor(t){super(t),this.isFirstLine=!0,this.result="";let{suppressQuotes:e,columnSeparator:i}=t;this.suppressQuotes=e,this.columnSeparator=i}addCustomContent(t){t&&(typeof t=="string"?(/^\s*\n/.test(t)||this.beginNewLine(),t=t.replace(/\r?\n/g,HS),this.result+=t):t.forEach(e=>{this.beginNewLine(),e.forEach((i,o)=>{o!==0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(i.data.value||""),i.mergeAcross&&this.appendEmptyCells(i.mergeAcross)})}))}onNewHeaderGroupingRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderGroupingRowColumn.bind(this)}}onNewHeaderGroupingRowColumn(t,e,i,o){i!=0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(e),this.appendEmptyCells(o)}appendEmptyCells(t){for(let e=1;e<=t;e++)this.result+=this.columnSeparator+this.putInQuotes("")}onNewHeaderRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderRowColumn.bind(this)}}onNewHeaderRowColumn(t,e){e!=0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(this.extractHeaderValue(t))}onNewBodyRow(){return this.beginNewLine(),{onColumn:this.onNewBodyRowColumn.bind(this)}}onNewBodyRowColumn(t,e,i){var o;e!=0&&(this.result+=this.columnSeparator);let r=this.extractRowCellValue(t,e,e,"csv",i);this.result+=this.putInQuotes((o=r.valueFormatted)!=null?o:r.value)}putInQuotes(t){if(this.suppressQuotes)return t;if(t==null)return'""';let e;return typeof t=="string"?e=t:typeof t.toString=="function"?e=t.toString():(console.warn("AG Grid: unknown value type during csv conversion"),e=""),'"'+e.replace(/"/g,'""')+'"'}parse(){return this.result}beginNewLine(){this.isFirstLine||(this.result+=HS),this.isFirstLine=!1}},Ir=class extends CL{postConstruct(){this.setBeans({gridSerializer:this.gridSerializer,gos:this.gos})}getMergedParams(t){let e=this.gos.get("defaultCsvExportParams");return Object.assign({},e,t)}export(t){if(this.isExportSuppressed()){console.warn("AG Grid: Export cancelled. Export is not allowed as per your configuration.");return}let e=this.getMergedParams(t),i=this.getData(e),o=new Blob(["\uFEFF",i],{type:"text/plain"}),r=typeof e.fileName=="function"?e.fileName(this.gos.getGridCommonParams()):e.fileName;yL.download(this.getFileName(r),o)}exportDataAsCsv(t){this.export(t)}getDataAsCsv(t,e=!1){let i=e?Object.assign({},t):this.getMergedParams(t);return this.getData(i)}getDefaultFileExtension(){return"csv"}createSerializingSession(t){let{columnModel:e,valueService:i,gos:o}=this,{processCellCallback:r,processHeaderCallback:n,processGroupHeaderCallback:s,processRowGroupCallback:a,suppressQuotes:l,columnSeparator:d}=t;return new bL({columnModel:e,valueService:i,gos:o,processCellCallback:r||void 0,processHeaderCallback:n||void 0,processGroupHeaderCallback:s||void 0,processRowGroupCallback:a||void 0,suppressQuotes:l||!1,columnSeparator:d||","})}isExportSuppressed(){return this.gos.get("suppressCsvExport")}};li([v("columnModel")],Ir.prototype,"columnModel",2);li([v("valueService")],Ir.prototype,"valueService",2);li([v("gridSerializer")],Ir.prototype,"gridSerializer",2);li([v("gridOptionsService")],Ir.prototype,"gos",2);li([I],Ir.prototype,"postConstruct",1);Ir=li([V("csvCreator")],Ir);var wo=class extends A{serialize(t,e={}){let{allColumns:i,columnKeys:o,skipRowGroups:r}=e,n=this.getColumnsToExport(i,r,o);return ce.compose(this.prepareSession(n),this.prependContent(e),this.exportColumnGroups(e,n),this.exportHeaders(e,n),this.processPinnedTopRows(e,n),this.processRows(e,n),this.processPinnedBottomRows(e,n),this.appendContent(e))(t).parse()}processRow(t,e,i,o){let r=e.shouldRowBeSkipped||(()=>!1),n=this.gos.get("groupRemoveSingleChildren"),s=this.gos.get("groupRemoveLowestSingleChildren"),l=e.rowPositions!=null||!!e.onlySelected,d=this.gos.get("groupHideOpenParents")&&!l,c=this.columnModel.isPivotMode()?o.leafGroup:!o.group,u=!!o.footer,h=e.skipRowGroups,p=s&&o.leafGroup,m=o.allChildrenCount===1&&(n||p);if(!c&&!u&&(e.skipRowGroups||m||d)||e.onlySelected&&!o.isSelected()||e.skipPinnedTop&&o.rowPinned==="top"||e.skipPinnedBottom&&o.rowPinned==="bottom"||o.level===-1&&!c&&!u||r(this.gos.addGridCommonParams({node:o})))return;let b=t.onNewBodyRow(o);if(i.forEach((y,_)=>{b.onColumn(y,_,o)}),e.getCustomContentBelowRow){let y=e.getCustomContentBelowRow(this.gos.addGridCommonParams({node:o}));y&&t.addCustomContent(y)}}appendContent(t){return e=>{let i=t.appendContent;return i&&e.addCustomContent(i),e}}prependContent(t){return e=>{let i=t.prependContent;return i&&e.addCustomContent(i),e}}prepareSession(t){return e=>(e.prepare(t),e)}exportColumnGroups(t,e){return i=>{if(!t.skipColumnGroupHeaders){let o=new fx,r=this.displayedGroupCreator.createDisplayedGroups(e,o,null);this.recursivelyAddHeaderGroups(r,i,t.processGroupHeaderCallback)}return i}}exportHeaders(t,e){return i=>{if(!t.skipColumnHeaders){let o=i.onNewHeaderRow();e.forEach((r,n)=>{o.onColumn(r,n,void 0)})}return i}}processPinnedTopRows(t,e){return i=>{let o=this.processRow.bind(this,i,t,e);return t.rowPositions?t.rowPositions.filter(r=>r.rowPinned==="top").sort((r,n)=>r.rowIndex-n.rowIndex).map(r=>this.pinnedRowModel.getPinnedTopRow(r.rowIndex)).forEach(o):this.pinnedRowModel.forEachPinnedTopRow(o),i}}processRows(t,e){return i=>{let o=this.rowModel,r=o.getType(),n=r==="clientSide",s=r==="serverSide",a=!n&&t.onlySelected,l=this.processRow.bind(this,i,t,e),{exportedRows:d="filteredAndSorted"}=t;if(t.rowPositions)t.rowPositions.filter(c=>c.rowPinned==null).sort((c,u)=>c.rowIndex-u.rowIndex).map(c=>o.getRow(c.rowIndex)).forEach(l);else if(this.columnModel.isPivotMode())n?o.forEachPivotNode(l,!0):s?o.forEachNodeAfterFilterAndSort(l,!0):o.forEachNode(l);else if(t.onlySelectedAllPages||a){let c=this.selectionService.getSelectedNodes();this.replicateSortedOrder(c),c.forEach(l)}else d==="all"?o.forEachNode(l):n||s?o.forEachNodeAfterFilterAndSort(l,!0):o.forEachNode(l);return i}}replicateSortedOrder(t){let e=this.sortController.getSortOptions(),i=(o,r)=>{var n,s,a,l;return o.rowIndex!=null&&r.rowIndex!=null?o.rowIndex-r.rowIndex:o.level===r.level?((n=o.parent)==null?void 0:n.id)===((s=r.parent)==null?void 0:s.id)?this.rowNodeSorter.compareRowNodes(e,{rowNode:o,currentPos:(a=o.rowIndex)!=null?a:-1},{rowNode:r,currentPos:(l=r.rowIndex)!=null?l:-1}):i(o.parent,r.parent):o.level>r.level?i(o.parent,r):i(o,r.parent)};t.sort(i)}processPinnedBottomRows(t,e){return i=>{let o=this.processRow.bind(this,i,t,e);return t.rowPositions?t.rowPositions.filter(r=>r.rowPinned==="bottom").sort((r,n)=>r.rowIndex-n.rowIndex).map(r=>this.pinnedRowModel.getPinnedBottomRow(r.rowIndex)).forEach(o):this.pinnedRowModel.forEachPinnedBottomRow(o),i}}getColumnsToExport(t=!1,e=!1,i){let o=this.columnModel.isPivotMode();if(i&&i.length)return this.columnModel.getGridColumns(i);let r=this.gos.get("treeData"),n=[];return t&&!o?n=this.columnModel.getAllGridColumns():n=this.columnModel.getAllDisplayedColumns(),e&&!r&&(n=n.filter(s=>s.getColId()!==Zs)),n}recursivelyAddHeaderGroups(t,e,i){let o=[];t.forEach(r=>{let n=r;n.getChildren&&n.getChildren().forEach(s=>o.push(s))}),t.length>0&&t[0]instanceof ft&&this.doAddHeaderHeader(e,t,i),o&&o.length>0&&this.recursivelyAddHeaderGroups(o,e,i)}doAddHeaderHeader(t,e,i){let o=t.onNewHeaderGroupingRow(),r=0;e.forEach(n=>{let s=n,a;i?a=i(this.gos.addGridCommonParams({columnGroup:s})):a=this.columnModel.getDisplayNameForColumnGroup(s,"header");let l=s.getLeafColumns().reduce((d,c,u,h)=>{let p=ce.last(d);return c.getColumnGroupShow()==="open"?(!p||p[1]!=null)&&(p=[u],d.push(p)):p&&p[1]==null&&(p[1]=u-1),u===h.length-1&&p&&p[1]==null&&(p[1]=u),d},[]);o.onColumn(s,a||"",r++,s.getLeafColumns().length-1,l)})}};li([v("displayedGroupCreator")],wo.prototype,"displayedGroupCreator",2);li([v("columnModel")],wo.prototype,"columnModel",2);li([v("rowModel")],wo.prototype,"rowModel",2);li([v("pinnedRowModel")],wo.prototype,"pinnedRowModel",2);li([v("selectionService")],wo.prototype,"selectionService",2);li([v("rowNodeSorter")],wo.prototype,"rowNodeSorter",2);li([v("sortController")],wo.prototype,"sortController",2);wo=li([V("gridSerializer")],wo);var SL="31.3.4",xL={version:SL,moduleName:"@ag-grid-community/csv-export",beans:[Ir,wo]};var _L=t=>{let e=t.getHours();return e<<=6,e=e|t.getMinutes(),e<<=5,e=e|t.getSeconds()/2,e},EL=t=>{let e=t.getFullYear()-1980;return e<<=4,e=e|t.getMonth()+1,e<<=5,e=e|t.getDate(),e};function Lt(t,e){let i="";for(let o=0;o<e;o++)i+=String.fromCharCode(t&255),t>>>=8;return i}var BS=t=>{if(!t.length)return 0;let e=-1,i=0,o=0,r=0;for(let n=0;n<t.length;n++)i=t[n],o=(e^i)&255,r=DL[o],e=e>>>8^r;return e^-1},WS=t=>t.length?BS(typeof t=="string"?new TextEncoder().encode(t):t):0,DL=new Uint32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]),RL=t=>Pd(void 0,null,function*(){let e=0,i=[],o=new WritableStream({write:s=>{i.push(s),e+=s.length}}),r=new ReadableStream({start:s=>{let a=new FileReader;a.onload=l=>{var d;(d=l.target)!=null&&d.result&&s.enqueue(l.target.result),s.close()},a.readAsArrayBuffer(t)}}),n=new window.CompressionStream("deflate-raw");return yield r.pipeThrough(n).pipeTo(o),{size:e,content:new Blob(i)}}),ML=t=>Pd(void 0,null,function*(){let e=new Blob([t]),{size:i,content:o}=yield RL(e),r=new Uint8Array(yield o.arrayBuffer());return{size:i,content:r}}),{utf8_encode:TL}=ce,AL=(t,e)=>Pd(void 0,null,function*(){let{content:i}=t,{size:o,content:r}=i?AE(i):{size:0,content:Uint8Array.from([])},n,s,a=!1;if(t.type==="file"&&r&&o>0){let c=yield ML(r);n=c.content,s=c.size,a=!0}let d=TE(t,a,e,o,r,s);return ME(RE({},d),{content:n||r,isCompressed:a})}),IL=(t,e)=>{let{content:i}=t,{content:o}=i?AE(i):{content:Uint8Array.from([])},r=TE(t,!1,e,o.length,o,void 0);return ME(RE({},r),{content:o,isCompressed:!1})},TE=(t,e,i,o,r,n)=>{let{content:s,path:a,created:l}=t,d=_L(l),c=EL(l),u=WS(r),h=n!==void 0?n:o,p=TL(a),m=p!==a,C="";if(m){let _=Lt(1,1)+Lt(WS(p),4)+p;C="up"+Lt(_.length,2)+_}let w="\0"+(m?"\0\b":"\0\0")+Lt(e?8:0,2)+Lt(d,2)+Lt(c,2)+Lt(h?u:0,4)+Lt(n??o,4)+Lt(o,4)+Lt(p.length,2)+Lt(C.length,2),b="PK"+w+p+C,y="PK\0"+w+"\0\0\0\0\0\0"+(s?"\0\0\0\0":"\0\0\0")+Lt(i,4)+p+C;return{localFileHeader:Uint8Array.from(b,_=>_.charCodeAt(0)),centralDirectoryHeader:Uint8Array.from(y,_=>_.charCodeAt(0))}},PL=(t,e,i)=>{let o="PK\0\0\0\0"+Lt(t,2)+Lt(t,2)+Lt(e,4)+Lt(i,4)+"\0\0";return Uint8Array.from(o,r=>r.charCodeAt(0))},FL=t=>{let e=new Uint8Array(t.length);for(let i=0;i<t.length;i++)e[i]=t.charCodeAt(i);return e},AE=t=>{let e;if(typeof t=="string"){let i=atob(t.split(";base64,")[1]);e=FL(i)}else e=t;return{size:e.length,content:e}},IE=class{static addFolders(t){t.forEach(this.addFolder.bind(this))}static addFolder(t){this.folders.push({path:t,created:new Date,isBase64:!1,type:"folder"})}static addFile(t,e,i=!1){this.files.push({path:t,created:new Date,content:i?e:new TextEncoder().encode(e),isBase64:i,type:"file"})}static getZipFile(t="application/zip"){return Pd(this,null,function*(){let e=yield this.buildCompressedFileStream();return this.clearStream(),new Blob([e],{type:t})})}static getUncompressedZipFile(t="application/zip"){let e=this.buildFileStream();return this.clearStream(),new Blob([e],{type:t})}static clearStream(){this.folders=[],this.files=[]}static packageFiles(t){let e=new Uint8Array(0),i=new Uint8Array(0),o=0,r=0;for(let a of t){let{localFileHeader:l,centralDirectoryHeader:d,content:c}=a,u=new Uint8Array(e.length+l.length);u.set(e),u.set(l,e.length),e=u;let h=new Uint8Array(e.length+c.length);h.set(e),h.set(c,e.length),e=h;let p=new Uint8Array(i.length+d.length);p.set(i),p.set(d,i.length),i=p,o+=l.length+c.length,r+=d.length}let n=PL(t.length,r,o),s=new Uint8Array(e.length+i.length+n.length);return s.set(e),s.set(i,e.length),s.set(n,e.length+i.length),s}static buildCompressedFileStream(){return Pd(this,null,function*(){let t=[...this.folders,...this.files],e=[],i=0;for(let o of t){let r=yield AL(o,i),{localFileHeader:n,content:s}=r;e.push(r),i+=n.length+s.length}return this.packageFiles(e)})}static buildFileStream(){let t=[...this.folders,...this.files],e=[],i=0;for(let o of t){let r=IL(o,i),{localFileHeader:n,content:s}=r;e.push(r),i+=n.length+s.length}return this.packageFiles(e)}};IE.folders=[];IE.files=[];De.__registerModules([sL,hL,xL],!1,void 0);var PE=(()=>{class t extends Dv{constructor(i){super("angular"),this._ngZone=i,this.isRunningWithinTestZone=!1,this.wrapIncoming=(o,r)=>this.runOutside(o,r),this.wrapOutgoing=o=>this.runInsideAngular(o),this.isRunningWithinTestZone=window?.AG_GRID_UNDER_TEST??!!window?.Zone?.AsyncTestZoneSpec,this._ngZone?this.isRunningWithinTestZone?this.runOutside=(o,r)=>r==="resize-observer"?this._ngZone.runOutsideAngular(o):o():this.runOutside=o=>this._ngZone.runOutsideAngular(o):this.runOutside=o=>o()}get shouldWrapOutgoing(){return this._ngZone&&ee.isInAngularZone()}isFrameworkComponent(i){if(!i)return!1;let o=i.prototype;return o&&"agInit"in o}runInsideAngular(i){return this._ngZone?this._ngZone.run(i):i()}runOutsideAngular(i,o){return this.runOutside(i,o)}}return t.\u0275fac=function(i){return new(i||t)(F(ee))},t.\u0275prov=H({token:t,factory:t.\u0275fac}),t})(),FE=(()=>{class t extends _E{setViewContainerRef(i,o){this.viewContainerRef=i,this.angularFrameworkOverrides=o}createWrapper(i,o){let r=this.angularFrameworkOverrides,n=this;class s extends Pv{init(d){r.runInsideAngular(()=>{super.init(d),this._componentRef.changeDetectorRef.detectChanges()})}createComponent(){return r.runInsideAngular(()=>n.createComponent(i))}hasMethod(d){return a.getFrameworkComponentInstance()[d]!=null}callMethod(d,c){let u=this.getFrameworkComponentInstance();return r.runInsideAngular(()=>a.getFrameworkComponentInstance()[d].apply(u,c))}addMethod(d,c){a[d]=c}}let a=new s;return a}createComponent(i){return this.viewContainerRef.createComponent(i)}}return t.\u0275fac=(()=>{let e;return function(o){return(e||(e=Bi(t)))(o||t)}})(),t.\u0275prov=H({token:t,factory:t.\u0275fac}),t})(),Pv=class{init(e){this._params=e,this._componentRef=this.createComponent(),this._agAwareComponent=this._componentRef.instance,this._frameworkComponentInstance=this._componentRef.instance,this._eGui=this._componentRef.location.nativeElement,this._agAwareComponent.agInit(this._params)}getGui(){return this._eGui}getRootElement(){return this._eGui.firstChild}destroy(){this._frameworkComponentInstance&&typeof this._frameworkComponentInstance.destroy=="function"&&this._frameworkComponentInstance.destroy(),this._componentRef&&this._componentRef.destroy()}getFrameworkComponentInstance(){return this._frameworkComponentInstance}},Qd=(()=>{class t{constructor(i,o,r,n){this.viewContainerRef=o,this.angularFrameworkOverrides=r,this.frameworkComponentWrapper=n,this._initialised=!1,this._destroyed=!1,this._fullyReady=ri.resolve(!0),this.statusBar=void 0,this.sideBar=void 0,this.suppressContextMenu=void 0,this.preventDefaultOnContextMenu=void 0,this.allowContextMenuWithControlKey=void 0,this.columnMenu=void 0,this.suppressMenuHide=void 0,this.enableBrowserTooltips=void 0,this.tooltipTrigger=void 0,this.tooltipShowDelay=void 0,this.tooltipHideDelay=void 0,this.tooltipMouseTrack=void 0,this.tooltipShowMode=void 0,this.tooltipInteraction=void 0,this.popupParent=void 0,this.copyHeadersToClipboard=void 0,this.copyGroupHeadersToClipboard=void 0,this.clipboardDelimiter=void 0,this.suppressCopyRowsToClipboard=void 0,this.suppressCopySingleCellRanges=void 0,this.suppressLastEmptyLineOnPaste=void 0,this.suppressClipboardPaste=void 0,this.suppressClipboardApi=void 0,this.suppressCutToClipboard=void 0,this.columnDefs=void 0,this.defaultColDef=void 0,this.defaultColGroupDef=void 0,this.columnTypes=void 0,this.dataTypeDefinitions=void 0,this.maintainColumnOrder=void 0,this.suppressFieldDotNotation=void 0,this.headerHeight=void 0,this.groupHeaderHeight=void 0,this.floatingFiltersHeight=void 0,this.pivotHeaderHeight=void 0,this.pivotGroupHeaderHeight=void 0,this.allowDragFromColumnsToolPanel=void 0,this.suppressMovableColumns=void 0,this.suppressColumnMoveAnimation=void 0,this.suppressDragLeaveHidesColumns=void 0,this.suppressRowGroupHidesColumns=void 0,this.colResizeDefault=void 0,this.suppressAutoSize=void 0,this.autoSizePadding=void 0,this.skipHeaderOnAutoSize=void 0,this.autoSizeStrategy=void 0,this.components=void 0,this.editType=void 0,this.singleClickEdit=void 0,this.suppressClickEdit=void 0,this.readOnlyEdit=void 0,this.stopEditingWhenCellsLoseFocus=void 0,this.enterMovesDown=void 0,this.enterMovesDownAfterEdit=void 0,this.enterNavigatesVertically=void 0,this.enterNavigatesVerticallyAfterEdit=void 0,this.enableCellEditingOnBackspace=void 0,this.undoRedoCellEditing=void 0,this.undoRedoCellEditingLimit=void 0,this.defaultCsvExportParams=void 0,this.suppressCsvExport=void 0,this.defaultExcelExportParams=void 0,this.suppressExcelExport=void 0,this.excelStyles=void 0,this.quickFilterText=void 0,this.cacheQuickFilter=void 0,this.excludeHiddenColumnsFromQuickFilter=void 0,this.includeHiddenColumnsInQuickFilter=void 0,this.quickFilterParser=void 0,this.quickFilterMatcher=void 0,this.applyQuickFilterBeforePivotOrAgg=void 0,this.excludeChildrenWhenTreeDataFiltering=void 0,this.enableAdvancedFilter=void 0,this.advancedFilterModel=void 0,this.includeHiddenColumnsInAdvancedFilter=void 0,this.advancedFilterParent=void 0,this.advancedFilterBuilderParams=void 0,this.suppressAdvancedFilterEval=void 0,this.enableCharts=void 0,this.chartThemes=void 0,this.customChartThemes=void 0,this.chartThemeOverrides=void 0,this.enableChartToolPanelsButton=void 0,this.suppressChartToolPanelsButton=void 0,this.chartToolPanelsDef=void 0,this.chartMenuItems=void 0,this.loadingCellRenderer=void 0,this.loadingCellRendererParams=void 0,this.loadingCellRendererSelector=void 0,this.localeText=void 0,this.masterDetail=void 0,this.keepDetailRows=void 0,this.keepDetailRowsCount=void 0,this.detailCellRenderer=void 0,this.detailCellRendererParams=void 0,this.detailRowHeight=void 0,this.detailRowAutoHeight=void 0,this.context=void 0,this.alignedGrids=void 0,this.tabIndex=void 0,this.rowBuffer=void 0,this.valueCache=void 0,this.valueCacheNeverExpires=void 0,this.enableCellExpressions=void 0,this.suppressParentsInRowNodes=void 0,this.suppressTouch=void 0,this.suppressFocusAfterRefresh=void 0,this.suppressAsyncEvents=void 0,this.suppressBrowserResizeObserver=void 0,this.suppressPropertyNamesCheck=void 0,this.suppressChangeDetection=void 0,this.debug=void 0,this.overlayLoadingTemplate=void 0,this.loadingOverlayComponent=void 0,this.loadingOverlayComponentParams=void 0,this.suppressLoadingOverlay=void 0,this.overlayNoRowsTemplate=void 0,this.noRowsOverlayComponent=void 0,this.noRowsOverlayComponentParams=void 0,this.suppressNoRowsOverlay=void 0,this.pagination=void 0,this.paginationPageSize=void 0,this.paginationPageSizeSelector=void 0,this.paginationAutoPageSize=void 0,this.paginateChildRows=void 0,this.suppressPaginationPanel=void 0,this.pivotMode=void 0,this.pivotPanelShow=void 0,this.pivotMaxGeneratedColumns=void 0,this.pivotDefaultExpanded=void 0,this.pivotColumnGroupTotals=void 0,this.pivotRowTotals=void 0,this.pivotSuppressAutoColumn=void 0,this.suppressExpandablePivotGroups=void 0,this.functionsReadOnly=void 0,this.aggFuncs=void 0,this.suppressAggFuncInHeader=void 0,this.alwaysAggregateAtRootLevel=void 0,this.suppressAggAtRootLevel=void 0,this.aggregateOnlyChangedColumns=void 0,this.suppressAggFilteredOnly=void 0,this.removePivotHeaderRowWhenSingleValueColumn=void 0,this.animateRows=void 0,this.enableCellChangeFlash=void 0,this.cellFlashDuration=void 0,this.cellFlashDelay=void 0,this.cellFadeDuration=void 0,this.cellFadeDelay=void 0,this.allowShowChangeAfterFilter=void 0,this.domLayout=void 0,this.ensureDomOrder=void 0,this.enableRtl=void 0,this.suppressColumnVirtualisation=void 0,this.suppressMaxRenderedRowRestriction=void 0,this.suppressRowVirtualisation=void 0,this.rowDragManaged=void 0,this.suppressRowDrag=void 0,this.suppressMoveWhenRowDragging=void 0,this.rowDragEntireRow=void 0,this.rowDragMultiRow=void 0,this.rowDragText=void 0,this.fullWidthCellRenderer=void 0,this.fullWidthCellRendererParams=void 0,this.embedFullWidthRows=void 0,this.suppressGroupMaintainValueType=void 0,this.groupDisplayType=void 0,this.groupDefaultExpanded=void 0,this.autoGroupColumnDef=void 0,this.groupMaintainOrder=void 0,this.groupSelectsChildren=void 0,this.groupLockGroupColumns=void 0,this.groupAggFiltering=void 0,this.groupIncludeFooter=void 0,this.groupIncludeTotalFooter=void 0,this.groupTotalRow=void 0,this.grandTotalRow=void 0,this.suppressStickyTotalRow=void 0,this.groupSuppressBlankHeader=void 0,this.groupSelectsFiltered=void 0,this.showOpenedGroup=void 0,this.groupRemoveSingleChildren=void 0,this.groupRemoveLowestSingleChildren=void 0,this.groupHideOpenParents=void 0,this.groupAllowUnbalanced=void 0,this.rowGroupPanelShow=void 0,this.groupRowRenderer=void 0,this.groupRowRendererParams=void 0,this.suppressMakeColumnVisibleAfterUnGroup=void 0,this.treeData=void 0,this.rowGroupPanelSuppressSort=void 0,this.suppressGroupRowsSticky=void 0,this.pinnedTopRowData=void 0,this.pinnedBottomRowData=void 0,this.rowModelType=void 0,this.rowData=void 0,this.asyncTransactionWaitMillis=void 0,this.suppressModelUpdateAfterUpdateTransaction=void 0,this.datasource=void 0,this.cacheOverflowSize=void 0,this.infiniteInitialRowCount=void 0,this.serverSideInitialRowCount=void 0,this.suppressServerSideInfiniteScroll=void 0,this.suppressServerSideFullWidthLoadingRow=void 0,this.cacheBlockSize=void 0,this.maxBlocksInCache=void 0,this.maxConcurrentDatasourceRequests=void 0,this.blockLoadDebounceMillis=void 0,this.purgeClosedRowNodes=void 0,this.serverSideDatasource=void 0,this.serverSideSortAllLevels=void 0,this.serverSideEnableClientSideSort=void 0,this.serverSideOnlyRefreshFilteredGroups=void 0,this.serverSideFilterAllLevels=void 0,this.serverSideSortOnServer=void 0,this.serverSideFilterOnServer=void 0,this.serverSidePivotResultFieldSeparator=void 0,this.viewportDatasource=void 0,this.viewportRowModelPageSize=void 0,this.viewportRowModelBufferSize=void 0,this.alwaysShowHorizontalScroll=void 0,this.alwaysShowVerticalScroll=void 0,this.debounceVerticalScrollbar=void 0,this.suppressHorizontalScroll=void 0,this.suppressScrollOnNewData=void 0,this.suppressScrollWhenPopupsAreOpen=void 0,this.suppressAnimationFrame=void 0,this.suppressMiddleClickScrolls=void 0,this.suppressPreventDefaultOnMouseWheel=void 0,this.scrollbarWidth=void 0,this.rowSelection=void 0,this.rowMultiSelectWithClick=void 0,this.suppressRowDeselection=void 0,this.suppressRowClickSelection=void 0,this.suppressCellFocus=void 0,this.suppressHeaderFocus=void 0,this.suppressMultiRangeSelection=void 0,this.enableCellTextSelection=void 0,this.enableRangeSelection=void 0,this.enableRangeHandle=void 0,this.enableFillHandle=void 0,this.fillHandleDirection=void 0,this.suppressClearOnFillReduction=void 0,this.sortingOrder=void 0,this.accentedSort=void 0,this.unSortIcon=void 0,this.suppressMultiSort=void 0,this.alwaysMultiSort=void 0,this.multiSortKey=void 0,this.suppressMaintainUnsortedOrder=void 0,this.icons=void 0,this.rowHeight=void 0,this.rowStyle=void 0,this.rowClass=void 0,this.rowClassRules=void 0,this.suppressRowHoverHighlight=void 0,this.suppressRowTransform=void 0,this.columnHoverHighlight=void 0,this.gridId=void 0,this.deltaSort=void 0,this.treeDataDisplayType=void 0,this.functionsPassive=void 0,this.enableGroupEdit=void 0,this.initialState=void 0,this.getContextMenuItems=void 0,this.getMainMenuItems=void 0,this.postProcessPopup=void 0,this.processUnpinnedColumns=void 0,this.processCellForClipboard=void 0,this.processHeaderForClipboard=void 0,this.processGroupHeaderForClipboard=void 0,this.processCellFromClipboard=void 0,this.sendToClipboard=void 0,this.processDataFromClipboard=void 0,this.isExternalFilterPresent=void 0,this.doesExternalFilterPass=void 0,this.getChartToolbarItems=void 0,this.createChartContainer=void 0,this.navigateToNextHeader=void 0,this.tabToNextHeader=void 0,this.navigateToNextCell=void 0,this.tabToNextCell=void 0,this.getLocaleText=void 0,this.getDocument=void 0,this.paginationNumberFormatter=void 0,this.getGroupRowAgg=void 0,this.isGroupOpenByDefault=void 0,this.initialGroupOrderComparator=void 0,this.processPivotResultColDef=void 0,this.processPivotResultColGroupDef=void 0,this.getDataPath=void 0,this.getChildCount=void 0,this.getServerSideGroupLevelParams=void 0,this.isServerSideGroupOpenByDefault=void 0,this.isApplyServerSideTransaction=void 0,this.isServerSideGroup=void 0,this.getServerSideGroupKey=void 0,this.getBusinessKeyForNode=void 0,this.getRowId=void 0,this.resetRowDataOnUpdate=void 0,this.processRowPostCreate=void 0,this.isRowSelectable=void 0,this.isRowMaster=void 0,this.fillOperation=void 0,this.postSortRows=void 0,this.getRowStyle=void 0,this.getRowClass=void 0,this.getRowHeight=void 0,this.isFullWidthRow=void 0,this.toolPanelVisibleChanged=new M,this.toolPanelSizeChanged=new M,this.columnMenuVisibleChanged=new M,this.contextMenuVisibleChanged=new M,this.cutStart=new M,this.cutEnd=new M,this.pasteStart=new M,this.pasteEnd=new M,this.columnVisible=new M,this.columnPinned=new M,this.columnResized=new M,this.columnMoved=new M,this.columnValueChanged=new M,this.columnPivotModeChanged=new M,this.columnPivotChanged=new M,this.columnGroupOpened=new M,this.newColumnsLoaded=new M,this.gridColumnsChanged=new M,this.displayedColumnsChanged=new M,this.virtualColumnsChanged=new M,this.columnEverythingChanged=new M,this.columnHeaderMouseOver=new M,this.columnHeaderMouseLeave=new M,this.columnHeaderClicked=new M,this.columnHeaderContextMenu=new M,this.componentStateChanged=new M,this.cellValueChanged=new M,this.cellEditRequest=new M,this.rowValueChanged=new M,this.cellEditingStarted=new M,this.cellEditingStopped=new M,this.rowEditingStarted=new M,this.rowEditingStopped=new M,this.undoStarted=new M,this.undoEnded=new M,this.redoStarted=new M,this.redoEnded=new M,this.rangeDeleteStart=new M,this.rangeDeleteEnd=new M,this.fillStart=new M,this.fillEnd=new M,this.filterOpened=new M,this.filterChanged=new M,this.filterModified=new M,this.advancedFilterBuilderVisibleChanged=new M,this.chartCreated=new M,this.chartRangeSelectionChanged=new M,this.chartOptionsChanged=new M,this.chartDestroyed=new M,this.cellKeyDown=new M,this.gridReady=new M,this.gridPreDestroyed=new M,this.firstDataRendered=new M,this.gridSizeChanged=new M,this.modelUpdated=new M,this.virtualRowRemoved=new M,this.viewportChanged=new M,this.bodyScroll=new M,this.bodyScrollEnd=new M,this.dragStarted=new M,this.dragStopped=new M,this.stateUpdated=new M,this.paginationChanged=new M,this.rowDragEnter=new M,this.rowDragMove=new M,this.rowDragLeave=new M,this.rowDragEnd=new M,this.columnRowGroupChanged=new M,this.rowGroupOpened=new M,this.expandOrCollapseAll=new M,this.pivotMaxColumnsExceeded=new M,this.pinnedRowDataChanged=new M,this.rowDataUpdated=new M,this.asyncTransactionsFlushed=new M,this.storeRefreshed=new M,this.cellClicked=new M,this.cellDoubleClicked=new M,this.cellFocused=new M,this.cellMouseOver=new M,this.cellMouseOut=new M,this.cellMouseDown=new M,this.rowClicked=new M,this.rowDoubleClicked=new M,this.rowSelected=new M,this.selectionChanged=new M,this.cellContextMenu=new M,this.rangeSelectionChanged=new M,this.tooltipShow=new M,this.tooltipHide=new M,this.sortChanged=new M,this.columnRowGroupChangeRequest=new M,this.columnPivotChangeRequest=new M,this.columnValueChangeRequest=new M,this.columnAggFuncChangeRequest=new M,this._nativeElement=i.nativeElement}ngAfterViewInit(){this.angularFrameworkOverrides.runOutsideAngular(()=>{this.frameworkComponentWrapper.setViewContainerRef(this.viewContainerRef,this.angularFrameworkOverrides);let i=Fd.combineAttributesAndGridOptions(this.gridOptions,this);this.gridParams={globalEventListener:this.globalEventListener.bind(this),frameworkOverrides:this.angularFrameworkOverrides,providedBeanInstances:{frameworkComponentWrapper:this.frameworkComponentWrapper},modules:this.modules||[]};let o=xE(this._nativeElement,i,this.gridParams);o&&(this.api=o,this.columnApi=new Pn(o));let r=this.gridPreDestroyed;(r.observed??r.observers.length>0)&&console.warn('AG Grid: gridPreDestroyed event listener registered via (gridPreDestroyed)="method($event)" will be ignored! Please assign via gridOptions.gridPreDestroyed and pass to the grid as [gridOptions]="gridOptions"'),this._initialised=!0,this._fullyReady.resolveNow(null,n=>n)})}ngOnChanges(i){this._initialised&&this.angularFrameworkOverrides.runOutsideAngular(()=>{let o={};Object.entries(i).forEach(([r,n])=>{o[r]=n.currentValue}),Fd.processOnChange(o,this.api)})}ngOnDestroy(){this._initialised&&(this._destroyed=!0,this.api?.destroy())}isEmitterUsed(i){let r=this[i],n=r?.observed??r?.observers?.length>0,s=`on${i.charAt(0).toUpperCase()}${i.substring(1)}`,a=!!this.gridOptions&&!!this.gridOptions[s];return n||a}globalEventListener(i,o){if(this._destroyed)return;let r=this[i];if(r&&this.isEmitterUsed(i)){let n=()=>this.angularFrameworkOverrides.runInsideAngular(()=>r.emit(o));i==="gridReady"?this._fullyReady.then(()=>n()):n()}}}return t.\u0275fac=function(i){return new(i||t)(W(Te),W(Io),W(PE),W(FE))},t.\u0275cmp=Me({type:t,selectors:[["ag-grid-angular"]],inputs:{gridOptions:"gridOptions",modules:"modules",statusBar:"statusBar",sideBar:"sideBar",suppressContextMenu:"suppressContextMenu",preventDefaultOnContextMenu:"preventDefaultOnContextMenu",allowContextMenuWithControlKey:"allowContextMenuWithControlKey",columnMenu:"columnMenu",suppressMenuHide:"suppressMenuHide",enableBrowserTooltips:"enableBrowserTooltips",tooltipTrigger:"tooltipTrigger",tooltipShowDelay:"tooltipShowDelay",tooltipHideDelay:"tooltipHideDelay",tooltipMouseTrack:"tooltipMouseTrack",tooltipShowMode:"tooltipShowMode",tooltipInteraction:"tooltipInteraction",popupParent:"popupParent",copyHeadersToClipboard:"copyHeadersToClipboard",copyGroupHeadersToClipboard:"copyGroupHeadersToClipboard",clipboardDelimiter:"clipboardDelimiter",suppressCopyRowsToClipboard:"suppressCopyRowsToClipboard",suppressCopySingleCellRanges:"suppressCopySingleCellRanges",suppressLastEmptyLineOnPaste:"suppressLastEmptyLineOnPaste",suppressClipboardPaste:"suppressClipboardPaste",suppressClipboardApi:"suppressClipboardApi",suppressCutToClipboard:"suppressCutToClipboard",columnDefs:"columnDefs",defaultColDef:"defaultColDef",defaultColGroupDef:"defaultColGroupDef",columnTypes:"columnTypes",dataTypeDefinitions:"dataTypeDefinitions",maintainColumnOrder:"maintainColumnOrder",suppressFieldDotNotation:"suppressFieldDotNotation",headerHeight:"headerHeight",groupHeaderHeight:"groupHeaderHeight",floatingFiltersHeight:"floatingFiltersHeight",pivotHeaderHeight:"pivotHeaderHeight",pivotGroupHeaderHeight:"pivotGroupHeaderHeight",allowDragFromColumnsToolPanel:"allowDragFromColumnsToolPanel",suppressMovableColumns:"suppressMovableColumns",suppressColumnMoveAnimation:"suppressColumnMoveAnimation",suppressDragLeaveHidesColumns:"suppressDragLeaveHidesColumns",suppressRowGroupHidesColumns:"suppressRowGroupHidesColumns",colResizeDefault:"colResizeDefault",suppressAutoSize:"suppressAutoSize",autoSizePadding:"autoSizePadding",skipHeaderOnAutoSize:"skipHeaderOnAutoSize",autoSizeStrategy:"autoSizeStrategy",components:"components",editType:"editType",singleClickEdit:"singleClickEdit",suppressClickEdit:"suppressClickEdit",readOnlyEdit:"readOnlyEdit",stopEditingWhenCellsLoseFocus:"stopEditingWhenCellsLoseFocus",enterMovesDown:"enterMovesDown",enterMovesDownAfterEdit:"enterMovesDownAfterEdit",enterNavigatesVertically:"enterNavigatesVertically",enterNavigatesVerticallyAfterEdit:"enterNavigatesVerticallyAfterEdit",enableCellEditingOnBackspace:"enableCellEditingOnBackspace",undoRedoCellEditing:"undoRedoCellEditing",undoRedoCellEditingLimit:"undoRedoCellEditingLimit",defaultCsvExportParams:"defaultCsvExportParams",suppressCsvExport:"suppressCsvExport",defaultExcelExportParams:"defaultExcelExportParams",suppressExcelExport:"suppressExcelExport",excelStyles:"excelStyles",quickFilterText:"quickFilterText",cacheQuickFilter:"cacheQuickFilter",excludeHiddenColumnsFromQuickFilter:"excludeHiddenColumnsFromQuickFilter",includeHiddenColumnsInQuickFilter:"includeHiddenColumnsInQuickFilter",quickFilterParser:"quickFilterParser",quickFilterMatcher:"quickFilterMatcher",applyQuickFilterBeforePivotOrAgg:"applyQuickFilterBeforePivotOrAgg",excludeChildrenWhenTreeDataFiltering:"excludeChildrenWhenTreeDataFiltering",enableAdvancedFilter:"enableAdvancedFilter",advancedFilterModel:"advancedFilterModel",includeHiddenColumnsInAdvancedFilter:"includeHiddenColumnsInAdvancedFilter",advancedFilterParent:"advancedFilterParent",advancedFilterBuilderParams:"advancedFilterBuilderParams",suppressAdvancedFilterEval:"suppressAdvancedFilterEval",enableCharts:"enableCharts",chartThemes:"chartThemes",customChartThemes:"customChartThemes",chartThemeOverrides:"chartThemeOverrides",enableChartToolPanelsButton:"enableChartToolPanelsButton",suppressChartToolPanelsButton:"suppressChartToolPanelsButton",chartToolPanelsDef:"chartToolPanelsDef",chartMenuItems:"chartMenuItems",loadingCellRenderer:"loadingCellRenderer",loadingCellRendererParams:"loadingCellRendererParams",loadingCellRendererSelector:"loadingCellRendererSelector",localeText:"localeText",masterDetail:"masterDetail",keepDetailRows:"keepDetailRows",keepDetailRowsCount:"keepDetailRowsCount",detailCellRenderer:"detailCellRenderer",detailCellRendererParams:"detailCellRendererParams",detailRowHeight:"detailRowHeight",detailRowAutoHeight:"detailRowAutoHeight",context:"context",alignedGrids:"alignedGrids",tabIndex:"tabIndex",rowBuffer:"rowBuffer",valueCache:"valueCache",valueCacheNeverExpires:"valueCacheNeverExpires",enableCellExpressions:"enableCellExpressions",suppressParentsInRowNodes:"suppressParentsInRowNodes",suppressTouch:"suppressTouch",suppressFocusAfterRefresh:"suppressFocusAfterRefresh",suppressAsyncEvents:"suppressAsyncEvents",suppressBrowserResizeObserver:"suppressBrowserResizeObserver",suppressPropertyNamesCheck:"suppressPropertyNamesCheck",suppressChangeDetection:"suppressChangeDetection",debug:"debug",overlayLoadingTemplate:"overlayLoadingTemplate",loadingOverlayComponent:"loadingOverlayComponent",loadingOverlayComponentParams:"loadingOverlayComponentParams",suppressLoadingOverlay:"suppressLoadingOverlay",overlayNoRowsTemplate:"overlayNoRowsTemplate",noRowsOverlayComponent:"noRowsOverlayComponent",noRowsOverlayComponentParams:"noRowsOverlayComponentParams",suppressNoRowsOverlay:"suppressNoRowsOverlay",pagination:"pagination",paginationPageSize:"paginationPageSize",paginationPageSizeSelector:"paginationPageSizeSelector",paginationAutoPageSize:"paginationAutoPageSize",paginateChildRows:"paginateChildRows",suppressPaginationPanel:"suppressPaginationPanel",pivotMode:"pivotMode",pivotPanelShow:"pivotPanelShow",pivotMaxGeneratedColumns:"pivotMaxGeneratedColumns",pivotDefaultExpanded:"pivotDefaultExpanded",pivotColumnGroupTotals:"pivotColumnGroupTotals",pivotRowTotals:"pivotRowTotals",pivotSuppressAutoColumn:"pivotSuppressAutoColumn",suppressExpandablePivotGroups:"suppressExpandablePivotGroups",functionsReadOnly:"functionsReadOnly",aggFuncs:"aggFuncs",suppressAggFuncInHeader:"suppressAggFuncInHeader",alwaysAggregateAtRootLevel:"alwaysAggregateAtRootLevel",suppressAggAtRootLevel:"suppressAggAtRootLevel",aggregateOnlyChangedColumns:"aggregateOnlyChangedColumns",suppressAggFilteredOnly:"suppressAggFilteredOnly",removePivotHeaderRowWhenSingleValueColumn:"removePivotHeaderRowWhenSingleValueColumn",animateRows:"animateRows",enableCellChangeFlash:"enableCellChangeFlash",cellFlashDuration:"cellFlashDuration",cellFlashDelay:"cellFlashDelay",cellFadeDuration:"cellFadeDuration",cellFadeDelay:"cellFadeDelay",allowShowChangeAfterFilter:"allowShowChangeAfterFilter",domLayout:"domLayout",ensureDomOrder:"ensureDomOrder",enableRtl:"enableRtl",suppressColumnVirtualisation:"suppressColumnVirtualisation",suppressMaxRenderedRowRestriction:"suppressMaxRenderedRowRestriction",suppressRowVirtualisation:"suppressRowVirtualisation",rowDragManaged:"rowDragManaged",suppressRowDrag:"suppressRowDrag",suppressMoveWhenRowDragging:"suppressMoveWhenRowDragging",rowDragEntireRow:"rowDragEntireRow",rowDragMultiRow:"rowDragMultiRow",rowDragText:"rowDragText",fullWidthCellRenderer:"fullWidthCellRenderer",fullWidthCellRendererParams:"fullWidthCellRendererParams",embedFullWidthRows:"embedFullWidthRows",suppressGroupMaintainValueType:"suppressGroupMaintainValueType",groupDisplayType:"groupDisplayType",groupDefaultExpanded:"groupDefaultExpanded",autoGroupColumnDef:"autoGroupColumnDef",groupMaintainOrder:"groupMaintainOrder",groupSelectsChildren:"groupSelectsChildren",groupLockGroupColumns:"groupLockGroupColumns",groupAggFiltering:"groupAggFiltering",groupIncludeFooter:"groupIncludeFooter",groupIncludeTotalFooter:"groupIncludeTotalFooter",groupTotalRow:"groupTotalRow",grandTotalRow:"grandTotalRow",suppressStickyTotalRow:"suppressStickyTotalRow",groupSuppressBlankHeader:"groupSuppressBlankHeader",groupSelectsFiltered:"groupSelectsFiltered",showOpenedGroup:"showOpenedGroup",groupRemoveSingleChildren:"groupRemoveSingleChildren",groupRemoveLowestSingleChildren:"groupRemoveLowestSingleChildren",groupHideOpenParents:"groupHideOpenParents",groupAllowUnbalanced:"groupAllowUnbalanced",rowGroupPanelShow:"rowGroupPanelShow",groupRowRenderer:"groupRowRenderer",groupRowRendererParams:"groupRowRendererParams",suppressMakeColumnVisibleAfterUnGroup:"suppressMakeColumnVisibleAfterUnGroup",treeData:"treeData",rowGroupPanelSuppressSort:"rowGroupPanelSuppressSort",suppressGroupRowsSticky:"suppressGroupRowsSticky",pinnedTopRowData:"pinnedTopRowData",pinnedBottomRowData:"pinnedBottomRowData",rowModelType:"rowModelType",rowData:"rowData",asyncTransactionWaitMillis:"asyncTransactionWaitMillis",suppressModelUpdateAfterUpdateTransaction:"suppressModelUpdateAfterUpdateTransaction",datasource:"datasource",cacheOverflowSize:"cacheOverflowSize",infiniteInitialRowCount:"infiniteInitialRowCount",serverSideInitialRowCount:"serverSideInitialRowCount",suppressServerSideInfiniteScroll:"suppressServerSideInfiniteScroll",suppressServerSideFullWidthLoadingRow:"suppressServerSideFullWidthLoadingRow",cacheBlockSize:"cacheBlockSize",maxBlocksInCache:"maxBlocksInCache",maxConcurrentDatasourceRequests:"maxConcurrentDatasourceRequests",blockLoadDebounceMillis:"blockLoadDebounceMillis",purgeClosedRowNodes:"purgeClosedRowNodes",serverSideDatasource:"serverSideDatasource",serverSideSortAllLevels:"serverSideSortAllLevels",serverSideEnableClientSideSort:"serverSideEnableClientSideSort",serverSideOnlyRefreshFilteredGroups:"serverSideOnlyRefreshFilteredGroups",serverSideFilterAllLevels:"serverSideFilterAllLevels",serverSideSortOnServer:"serverSideSortOnServer",serverSideFilterOnServer:"serverSideFilterOnServer",serverSidePivotResultFieldSeparator:"serverSidePivotResultFieldSeparator",viewportDatasource:"viewportDatasource",viewportRowModelPageSize:"viewportRowModelPageSize",viewportRowModelBufferSize:"viewportRowModelBufferSize",alwaysShowHorizontalScroll:"alwaysShowHorizontalScroll",alwaysShowVerticalScroll:"alwaysShowVerticalScroll",debounceVerticalScrollbar:"debounceVerticalScrollbar",suppressHorizontalScroll:"suppressHorizontalScroll",suppressScrollOnNewData:"suppressScrollOnNewData",suppressScrollWhenPopupsAreOpen:"suppressScrollWhenPopupsAreOpen",suppressAnimationFrame:"suppressAnimationFrame",suppressMiddleClickScrolls:"suppressMiddleClickScrolls",suppressPreventDefaultOnMouseWheel:"suppressPreventDefaultOnMouseWheel",scrollbarWidth:"scrollbarWidth",rowSelection:"rowSelection",rowMultiSelectWithClick:"rowMultiSelectWithClick",suppressRowDeselection:"suppressRowDeselection",suppressRowClickSelection:"suppressRowClickSelection",suppressCellFocus:"suppressCellFocus",suppressHeaderFocus:"suppressHeaderFocus",suppressMultiRangeSelection:"suppressMultiRangeSelection",enableCellTextSelection:"enableCellTextSelection",enableRangeSelection:"enableRangeSelection",enableRangeHandle:"enableRangeHandle",enableFillHandle:"enableFillHandle",fillHandleDirection:"fillHandleDirection",suppressClearOnFillReduction:"suppressClearOnFillReduction",sortingOrder:"sortingOrder",accentedSort:"accentedSort",unSortIcon:"unSortIcon",suppressMultiSort:"suppressMultiSort",alwaysMultiSort:"alwaysMultiSort",multiSortKey:"multiSortKey",suppressMaintainUnsortedOrder:"suppressMaintainUnsortedOrder",icons:"icons",rowHeight:"rowHeight",rowStyle:"rowStyle",rowClass:"rowClass",rowClassRules:"rowClassRules",suppressRowHoverHighlight:"suppressRowHoverHighlight",suppressRowTransform:"suppressRowTransform",columnHoverHighlight:"columnHoverHighlight",gridId:"gridId",deltaSort:"deltaSort",treeDataDisplayType:"treeDataDisplayType",functionsPassive:"functionsPassive",enableGroupEdit:"enableGroupEdit",initialState:"initialState",getContextMenuItems:"getContextMenuItems",getMainMenuItems:"getMainMenuItems",postProcessPopup:"postProcessPopup",processUnpinnedColumns:"processUnpinnedColumns",processCellForClipboard:"processCellForClipboard",processHeaderForClipboard:"processHeaderForClipboard",processGroupHeaderForClipboard:"processGroupHeaderForClipboard",processCellFromClipboard:"processCellFromClipboard",sendToClipboard:"sendToClipboard",processDataFromClipboard:"processDataFromClipboard",isExternalFilterPresent:"isExternalFilterPresent",doesExternalFilterPass:"doesExternalFilterPass",getChartToolbarItems:"getChartToolbarItems",createChartContainer:"createChartContainer",navigateToNextHeader:"navigateToNextHeader",tabToNextHeader:"tabToNextHeader",navigateToNextCell:"navigateToNextCell",tabToNextCell:"tabToNextCell",getLocaleText:"getLocaleText",getDocument:"getDocument",paginationNumberFormatter:"paginationNumberFormatter",getGroupRowAgg:"getGroupRowAgg",isGroupOpenByDefault:"isGroupOpenByDefault",initialGroupOrderComparator:"initialGroupOrderComparator",processPivotResultColDef:"processPivotResultColDef",processPivotResultColGroupDef:"processPivotResultColGroupDef",getDataPath:"getDataPath",getChildCount:"getChildCount",getServerSideGroupLevelParams:"getServerSideGroupLevelParams",isServerSideGroupOpenByDefault:"isServerSideGroupOpenByDefault",isApplyServerSideTransaction:"isApplyServerSideTransaction",isServerSideGroup:"isServerSideGroup",getServerSideGroupKey:"getServerSideGroupKey",getBusinessKeyForNode:"getBusinessKeyForNode",getRowId:"getRowId",resetRowDataOnUpdate:"resetRowDataOnUpdate",processRowPostCreate:"processRowPostCreate",isRowSelectable:"isRowSelectable",isRowMaster:"isRowMaster",fillOperation:"fillOperation",postSortRows:"postSortRows",getRowStyle:"getRowStyle",getRowClass:"getRowClass",getRowHeight:"getRowHeight",isFullWidthRow:"isFullWidthRow"},outputs:{toolPanelVisibleChanged:"toolPanelVisibleChanged",toolPanelSizeChanged:"toolPanelSizeChanged",columnMenuVisibleChanged:"columnMenuVisibleChanged",contextMenuVisibleChanged:"contextMenuVisibleChanged",cutStart:"cutStart",cutEnd:"cutEnd",pasteStart:"pasteStart",pasteEnd:"pasteEnd",columnVisible:"columnVisible",columnPinned:"columnPinned",columnResized:"columnResized",columnMoved:"columnMoved",columnValueChanged:"columnValueChanged",columnPivotModeChanged:"columnPivotModeChanged",columnPivotChanged:"columnPivotChanged",columnGroupOpened:"columnGroupOpened",newColumnsLoaded:"newColumnsLoaded",gridColumnsChanged:"gridColumnsChanged",displayedColumnsChanged:"displayedColumnsChanged",virtualColumnsChanged:"virtualColumnsChanged",columnEverythingChanged:"columnEverythingChanged",columnHeaderMouseOver:"columnHeaderMouseOver",columnHeaderMouseLeave:"columnHeaderMouseLeave",columnHeaderClicked:"columnHeaderClicked",columnHeaderContextMenu:"columnHeaderContextMenu",componentStateChanged:"componentStateChanged",cellValueChanged:"cellValueChanged",cellEditRequest:"cellEditRequest",rowValueChanged:"rowValueChanged",cellEditingStarted:"cellEditingStarted",cellEditingStopped:"cellEditingStopped",rowEditingStarted:"rowEditingStarted",rowEditingStopped:"rowEditingStopped",undoStarted:"undoStarted",undoEnded:"undoEnded",redoStarted:"redoStarted",redoEnded:"redoEnded",rangeDeleteStart:"rangeDeleteStart",rangeDeleteEnd:"rangeDeleteEnd",fillStart:"fillStart",fillEnd:"fillEnd",filterOpened:"filterOpened",filterChanged:"filterChanged",filterModified:"filterModified",advancedFilterBuilderVisibleChanged:"advancedFilterBuilderVisibleChanged",chartCreated:"chartCreated",chartRangeSelectionChanged:"chartRangeSelectionChanged",chartOptionsChanged:"chartOptionsChanged",chartDestroyed:"chartDestroyed",cellKeyDown:"cellKeyDown",gridReady:"gridReady",gridPreDestroyed:"gridPreDestroyed",firstDataRendered:"firstDataRendered",gridSizeChanged:"gridSizeChanged",modelUpdated:"modelUpdated",virtualRowRemoved:"virtualRowRemoved",viewportChanged:"viewportChanged",bodyScroll:"bodyScroll",bodyScrollEnd:"bodyScrollEnd",dragStarted:"dragStarted",dragStopped:"dragStopped",stateUpdated:"stateUpdated",paginationChanged:"paginationChanged",rowDragEnter:"rowDragEnter",rowDragMove:"rowDragMove",rowDragLeave:"rowDragLeave",rowDragEnd:"rowDragEnd",columnRowGroupChanged:"columnRowGroupChanged",rowGroupOpened:"rowGroupOpened",expandOrCollapseAll:"expandOrCollapseAll",pivotMaxColumnsExceeded:"pivotMaxColumnsExceeded",pinnedRowDataChanged:"pinnedRowDataChanged",rowDataUpdated:"rowDataUpdated",asyncTransactionsFlushed:"asyncTransactionsFlushed",storeRefreshed:"storeRefreshed",cellClicked:"cellClicked",cellDoubleClicked:"cellDoubleClicked",cellFocused:"cellFocused",cellMouseOver:"cellMouseOver",cellMouseOut:"cellMouseOut",cellMouseDown:"cellMouseDown",rowClicked:"rowClicked",rowDoubleClicked:"rowDoubleClicked",rowSelected:"rowSelected",selectionChanged:"selectionChanged",cellContextMenu:"cellContextMenu",rangeSelectionChanged:"rangeSelectionChanged",tooltipShow:"tooltipShow",tooltipHide:"tooltipHide",sortChanged:"sortChanged",columnRowGroupChangeRequest:"columnRowGroupChangeRequest",columnPivotChangeRequest:"columnPivotChangeRequest",columnValueChangeRequest:"columnValueChangeRequest",columnAggFuncChangeRequest:"columnAggFuncChangeRequest"},standalone:!0,features:[lt([PE,FE]),Ot,mi],decls:0,vars:0,template:function(i,o){},encapsulation:2}),t})(),OE=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=re({type:t}),t.\u0275inj=oe({imports:[Qd]}),t})();var Ma=(()=>{let e=class e{constructor(){this.storageKey="userData"}saveData(o){try{console.log("Saving Data:",o),localStorage.setItem(this.storageKey,JSON.stringify(o))}catch(r){console.error("Error saving data to local storage",r)}}getData(o){try{let r=localStorage.getItem(this.storageKey),n=r?JSON.parse(r):[];return console.log("Retrieved Data:",n),n}catch(r){return console.error("Error retrieving data from local storage",r),[]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var kE=(()=>{let e=class e{constructor(o,r){this.router=o,this.workoutService=r,this.columnDefs=[{field:"user_name",headerName:"Name",minWidth:170},{field:"workout_type",headerName:"Workouts"},{field:"workout_number",headerName:"Number of Workouts"},{field:"workout_minutes",headerName:"Total Workout Minutes"}],this.defaultColDef={editable:!0,filter:!0},this.rowSelection="multiple",this.paginationPageSize=5,this.paginationPageSizeSelector=[5,10,25,50],this.rowData=[],this.themeClass="ag-theme-quartz",this.userData=[{id:1,user_name:"John Doe",workouts:[{workout_type:"Running",workout_minutes:30},{workout_type:"Cycling",workout_minutes:45}]},{id:2,user_name:"Jane Smith",workouts:[{workout_type:"Swimming",workout_minutes:60},{workout_type:"Running",workout_minutes:20}]},{id:3,user_name:"Mike Johnson",workouts:[{workout_type:"Yoga",workout_minutes:50},{workout_type:"Cycling",workout_minutes:40}]}]}ngOnInit(){this.loadWorkouts()}loadWorkouts(){let o=this.workoutService.getData();console.log("Raw Data:",o),this.rowData=o}addWorkout(o){let r=this.workoutService.getData();r.push(o),this.workoutService.saveData(r),this.loadWorkouts()}onGridReady(o){o.api.sizeColumnsToFit()}onKeyPress(o){}onAddClick(){this.router.navigate(["/workout-form"])}};e.\u0275fac=function(r){return new(r||e)(W(Wt),W(Ma))},e.\u0275cmp=Me({type:e,selectors:[["app-workout-management"]],standalone:!0,features:[mi],decls:13,vars:10,consts:[[1,"searchadd-section"],[1,"row"],[1,"col-6"],[1,"form-group","has-search"],["type","text","formControlName","search","placeholder","Search...",1,"form-control",3,"keydown"],[1,"fa","fa-search","form-control-feedback"],[1,"button-div"],[1,"site-button",3,"click"],[1,"fa","fa-plus"],[2,"width","100%","height","60%",3,"gridReady","columnDefs","rowData","defaultColDef","rowSelection","suppressRowClickSelection","pagination","paginationPageSize","paginationPageSizeSelector"]],template:function(r,n){r&1&&(G(0,"section",0)(1,"form")(2,"div",1)(3,"div",2)(4,"div",3)(5,"input",4),ne("keydown",function(a){return n.onKeyPress(a)}),B(),le(6,"span",5),B()(),G(7,"div",2)(8,"div",6)(9,"a",7),ne("click",function(){return n.onAddClick()}),le(10,"i",8),Q(11,"\xA0\xA0 Add Workout"),B()()()()()(),G(12,"ag-grid-angular",9),ne("gridReady",function(a){return n.onGridReady(a)}),B()),r&2&&(z(12),Xt(n.themeClass),U("columnDefs",n.columnDefs)("rowData",n.rowData)("defaultColDef",n.defaultColDef)("rowSelection",n.rowSelection)("suppressRowClickSelection",!0)("pagination",!0)("paginationPageSize",n.paginationPageSize)("paginationPageSizeSelector",n.paginationPageSizeSelector))},dependencies:[Qd,ru],styles:[".searchadd-section[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{display:flex}.searchadd-section[_ngcontent-%COMP%]   .col-6[_ngcontent-%COMP%]{flex:1}.searchadd-section[_ngcontent-%COMP%]   .form-group.has-search[_ngcontent-%COMP%]{position:relative;width:50%;line-height:25px}.searchadd-section[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{margin-left:6px;padding-left:40px;width:100%;height:34px}.searchadd-section[_ngcontent-%COMP%]   .form-control-feedback[_ngcontent-%COMP%]{position:absolute;top:50%;left:10px;transform:translateY(-50%);color:#000;pointer-events:none}.searchadd-section[_ngcontent-%COMP%]   .button-div[_ngcontent-%COMP%]{margin-top:7px;text-align:right;width:100%}.searchadd-section[_ngcontent-%COMP%]   .site-button[_ngcontent-%COMP%]{background:#263238;color:#fff;padding:8px 10px;border-radius:5px;font-weight:600;font-size:14px;cursor:pointer;transition:background-color .3s,color .3s;margin-top:20px;border:1px solid #263238;text-decoration:none}.searchadd-section[_ngcontent-%COMP%]   .site-button[_ngcontent-%COMP%]:hover{background:#fff;color:#263238;border:1px solid #263238;text-decoration:none}  .ag-cell-wrapper{display:block!important}.body-section[_ngcontent-%COMP%]{position:relative;top:0;left:85px;width:calc(100% - 95px);transition:all .5s ease;background:#fff;border-radius:5px;margin:10px 0}.ats-table-css[_ngcontent-%COMP%]   .ag-root-wrapper[_ngcontent-%COMP%]{border:none!important;border-radius:5px}.ats-table-css[_ngcontent-%COMP%]   .ag-header[_ngcontent-%COMP%]{background:transparent}.ats-table-css[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{border:none;height:calc(100vh - 30%)!important}.ats-table-css[_ngcontent-%COMP%]   .ag-row-hover[_ngcontent-%COMP%]:not(.ag-full-width-row):before, .ats-table-css[_ngcontent-%COMP%]   .ag-row-hover.ag-full-width-row.ag-row-group[_ngcontent-%COMP%]:before{display:none}.ats-table-css[_ngcontent-%COMP%]   .ag-row-odd[_ngcontent-%COMP%]{background-color:#fff}.ats-table-css[_ngcontent-%COMP%]   .ag-ltr[_ngcontent-%COMP%]   .ag-cell[_ngcontent-%COMP%]{display:flex;padding-top:0!important}.ats-table-css[_ngcontent-%COMP%]   .ag-header-cell-text[_ngcontent-%COMP%], .ats-table-css[_ngcontent-%COMP%]   .ag-cell-value[_ngcontent-%COMP%]{color:#212121}.action-btn[_ngcontent-%COMP%]{background:#f9f9f9;padding:6px 8px;border:1px solid #ddd;border-radius:50px;color:#008285!important;margin-right:5px;display:inline!important}.action-btn[_ngcontent-%COMP%]:hover{background-color:#008285;color:#fff!important}"]});let t=e;return t})();var LE=[{icon:"address-card",title:"Workout Form",route:"/workout-form"},{icon:"list",title:"Workout List",route:"/workout-list"},{icon:"user-chart",title:"Workout Progress",route:"/workout-progress"}];function OL(t,e){if(t&1&&(G(0,"div",2)(1,"div",3),le(2,"i")(3,"br"),G(4,"h3"),Q(5),B()()()),t&2){let i=e.$implicit;z(),U("routerLink",i.route),z(),gp("fas fa-",i.icon,""),z(3),kt(i.title)}}var NE=(()=>{let e=class e{onResize(o){this.innerWidth=window.innerWidth}constructor(){this.users=[],this.dashboardOptions=LE}ngOnInit(){this.innerWidth=window.innerWidth}getClass(){return this.innerWidth<925?"row-md":"row"}navigateToOption(o){console.log("Navigating to:",o.title)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Me({type:e,selectors:[["app-dashboard"]],hostBindings:function(r,n){r&1&&ne("resize",function(a){return n.onResize(a)},!1,kc)},decls:2,vars:1,consts:[[1,"dashboard-container"],["class","tile",4,"ngFor","ngForOf"],[1,"tile"],[1,"tile-content",3,"routerLink"]],template:function(r,n){r&1&&(G(0,"div",0),Ee(1,OL,6,5,"div",1),B()),r&2&&(z(),U("ngForOf",n.dashboardOptions))},dependencies:[no,br],styles:[".dashboard-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between;padding:20px}.tile[_ngcontent-%COMP%]{width:calc(33% - 20px);margin-bottom:20px;background-color:#fff;border-radius:10px;box-shadow:0 4px 8px #0000001a;transition:transform .3s ease-in-out;cursor:pointer;overflow:hidden;color:#495057}.tile[_ngcontent-%COMP%]:hover{transform:translateY(-5px);background-color:#495057;color:#fff}.tile-content[_ngcontent-%COMP%]{padding:20px;text-align:center}.tile[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;font-size:18px}.tile[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:64px;display:block;margin:0 auto}"]});let t=e;return t})();var zE=(()=>{let e=class e{getBodyClass(){let o="";return this.collapsed&&this.screenWidth>768?o="body-trimmed":this.collapsed&&this.screenWidth<=768&&this.screenWidth>0&&(o="body-md-screen"),o}constructor(){this.collapsed=!1,this.screenWidth=0,this.isSidebarCollapsed=!1}ngOnInit(){}onToggleSidebar(o){this.screenWidth=o.screenWidth,this.isSidebarCollapsed=o.collapsed}toggleSidebar(){this.isSidebarCollapsed=!this.isSidebarCollapsed}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Me({type:e,selectors:[["app-body"]],inputs:{collapsed:"collapsed",screenWidth:"screenWidth"},decls:2,vars:1,consts:[[1,"body",3,"ngClass"]],template:function(r,n){r&1&&(G(0,"div",0),le(1,"router-outlet"),B()),r&2&&U("ngClass",n.getBodyClass())},dependencies:[Po,ql],styles:[".body[_ngcontent-%COMP%]{width:calc(100% - 5rem);height:100vh;margin-top:5.75rem;margin-left:5rem;z-index:0;position:relative;top:0;transition:all .5s ease;background:#f4f7fa;padding:3rem}.body-trimmed[_ngcontent-%COMP%]{width:calc(100% - 16.5625rem);margin-left:16.5625rem}.body-md-screen[_ngcontent-%COMP%]{width:calc(100% - 5rem);margin-left:5rem}"]});let t=e;return t})();var GE=Es("fadeInOut",[fr(":enter",[Ei({opacity:0}),pr("350ms",Ei({opacity:1}))]),fr(":leave",[Ei({opacity:1}),pr("350ms",Ei({opacity:0}))])]);var VE=[{routeLink:"dashboard",icon:"fal fa-home",label:"Dashboard"},{routeLink:"workout-form",icon:"fal fa-address-card",label:"Workout Form"},{routeLink:"workout-list",icon:"fal fa-list",label:"Workout List"},{routeLink:"workout-progress",icon:"fal fa-user-chart",label:"Workout Progress"}];var LL=t=>[t],NL=()=>({exact:!0});function zL(t,e){if(t&1&&(G(0,"span",14),Q(1),B()),t&2){let i=ie(2).$implicit;U("@fadeInOut",void 0),z(),at(" ",i.label," ")}}function GL(t,e){if(t&1&&le(0,"i",15),t&2){let i=ie(2).$implicit;U("ngClass",i.expanded?"fal fa-angle-down":"fal fa-angle-right")}}function VL(t,e){if(t&1){let i=Dt();G(0,"a",10),ne("click",function(){wt(i);let r=ie().$implicit,n=ie();return yt(n.handleClick(r))}),le(1,"i",11),Ee(2,zL,2,2,"span",12)(3,GL,1,1,"i",13),B()}if(t&2){let i=ie().$implicit,o=ie();U("ngClass",o.getActiveClass(i)),z(),Xt(i.icon),z(),U("ngIf",o.collapsed),z(),U("ngIf",i.items&&o.collapsed)}}function HL(t,e){if(t&1){let i=Dt();G(0,"a",16),ne("click",function(){wt(i);let r=ie().$implicit,n=ie();return yt(n.shrinkItems(r))}),le(1,"i",11),G(2,"span",14),Q(3),B()()}if(t&2){let i=ie().$implicit;U("routerLink",Vc(6,LL,i.routeLink))("routerLinkActiveOptions",cy(8,NL)),z(),Xt(i.icon),z(),U("@fadeInOut",void 0),z(),at(" ",i.label," ")}}function BL(t,e){if(t&1&&(G(0,"li",7),Ee(1,VL,4,5,"a",8)(2,HL,4,9,"a",9),B()),t&2){let i=e.$implicit;z(),U("ngIf",i.items&&i.items.length>0),z(),U("ngIf",!i.items||i.items&&i.items.length===0)}}var HE=(()=>{let e=class e{onResize(o){this.screenWidth=window.innerWidth,this.screenWidth<=768&&(this.collapsed=!1,this.onToggleSidebar.emit({collapsed:this.collapsed,screenWidth:this.screenWidth}))}onMouseEnter(){this.collapsed||(this.isHovered=!0)}onMouseLeave(){this.collapsed||(this.isHovered=!1)}constructor(o){this.router=o,this.onToggleSidebar=new M,this.collapsed=!1,this.screenWidth=0,this.sideData=VE,this.multiple=!1,this.isHovered=!1}ngOnInit(){this.screenWidth=window.innerWidth}toggleCollapse(){this.collapsed=!this.collapsed,this.onToggleSidebar.emit({collapsed:this.collapsed,screenWidth:this.screenWidth})}closeSidebar(){this.collapsed=!1,this.onToggleSidebar.emit({collapsed:this.collapsed,screenWidth:this.screenWidth})}handleClick(o){this.shrinkItems(o),o.expanded=!o.expanded}getActiveClass(o){return this.router.url.includes(o.routeLink)?"active":""}shrinkItems(o){if(!this.multiple)for(let r of this.sideData)o!==r&&r.expanded&&(r.expanded=!1)}};e.\u0275fac=function(r){return new(r||e)(W(Wt))},e.\u0275cmp=Me({type:e,selectors:[["app-sidebar"]],hostBindings:function(r,n){r&1&&ne("resize",function(a){return n.onResize(a)},!1,kc)("mouseenter",function(){return n.onMouseEnter()})("mouseleave",function(){return n.onMouseLeave()})},outputs:{onToggleSidebar:"onToggleSidebar"},decls:7,vars:2,consts:[[1,"sidebar",3,"ngClass"],[1,"logo-container"],[1,"logo"],["src","\\assets\\fyleLogo.jpg","alt","","width","40"],[1,"scrollwrap","scrollwrap_delayed"],[1,"sidebar-nav"],["class","sidebar-nav-item",4,"ngFor","ngForOf"],[1,"sidebar-nav-item"],["class","sidebar-nav-link",3,"ngClass","click",4,"ngIf"],["class","sidebar-nav-link","routerLinkActive","active",3,"routerLink","routerLinkActiveOptions","click",4,"ngIf"],[1,"sidebar-nav-link",3,"click","ngClass"],[1,"sidebar-link-icon"],["class","sidebar-link-text",4,"ngIf"],["class","menu-collapse-icon",3,"ngClass",4,"ngIf"],[1,"sidebar-link-text"],[1,"menu-collapse-icon",3,"ngClass"],["routerLinkActive","active",1,"sidebar-nav-link",3,"click","routerLink","routerLinkActiveOptions"]],template:function(r,n){r&1&&(G(0,"div",0)(1,"div",1)(2,"button",2),le(3,"img",3),B()(),G(4,"div",4)(5,"ul",5),Ee(6,BL,3,2,"li",6),B()()()),r&2&&(U("ngClass",n.collapsed?"sidebar-collapsed":""),z(6),U("ngForOf",n.sideData))},dependencies:[Po,no,Fo,br,wS],styles:[".sidebar[_ngcontent-%COMP%]{background:#263238;transition:all .5s ease;position:fixed;z-index:2;top:0;width:5rem;height:100vh;box-shadow:.063rem 0 1.25rem #8690a3}.sidebar[_ngcontent-%COMP%]   .logo-container[_ngcontent-%COMP%]{display:flex;align-items:center;padding:.938rem .938rem 0;width:100%}.sidebar[_ngcontent-%COMP%]   .logo-container[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{background:#fff;text-align:center;width:3rem;min-width:3rem;border-radius:.313rem;padding:.313rem;font-size:24px;font-weight:900;cursor:pointer;border:none}.sidebar[_ngcontent-%COMP%]:hover{width:250px}.sidebar-collapsed[_ngcontent-%COMP%]{width:16.5625}.sidebar-collapsed[_ngcontent-%COMP%]:hover{width:250px}.sidebar-nav[_ngcontent-%COMP%]{list-style:none;padding:.938rem;margin:0;display:flex;flex-direction:column;align-items:center;height:calc(100% - 3.65rem);cursor:pointer}.sidebar-nav[_ngcontent-%COMP%]   .sidebar-nav-item[_ngcontent-%COMP%]{width:100%;margin-bottom:.625rem}.sidebar-nav[_ngcontent-%COMP%]   .sidebar-nav-item[_ngcontent-%COMP%]   .sidebar-nav-link[_ngcontent-%COMP%]{display:flex;align-items:center;height:3rem;color:#f3f3f3;text-decoration:none;border-radius:.625rem;transition:all .3s ease}.sidebar-nav[_ngcontent-%COMP%]   .sidebar-nav-item[_ngcontent-%COMP%]   .sidebar-nav-link[_ngcontent-%COMP%]   .sidebar-link-icon[_ngcontent-%COMP%]{font-size:22px;width:2rem;min-width:2rem;margin:0 .5rem;text-align:center}.sidebar-nav[_ngcontent-%COMP%]   .sidebar-nav-item[_ngcontent-%COMP%]   .sidebar-nav-link[_ngcontent-%COMP%]   .sidebar-link-text[_ngcontent-%COMP%]{margin-left:1.5rem}.sidebar-nav[_ngcontent-%COMP%]   .sidebar-nav-item[_ngcontent-%COMP%]:hover   .sidebar-nav-link[_ngcontent-%COMP%]{background-color:#fff;color:#000}.active[_ngcontent-%COMP%]{background-color:#fff}.active[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:is(.sidebar-link-icon, .sidebar-link-text)[_ngcontent-%COMP%]{color:#000}.menu-collapse-icon[_ngcontent-%COMP%]{font-size:25px;width:2rem;min-width:2rem;margin:auto .5rem auto auto;text-align:center;color:#f3f3f3}.scrollwrap[_ngcontent-%COMP%]{overflow-y:auto;visibility:hidden;height:calc(100% - 3.65rem)}.sidebar-nav[_ngcontent-%COMP%], .scrollwrap[_ngcontent-%COMP%]:hover, .scrollwrap[_ngcontent-%COMP%]:focus{visibility:visible}.scrollwrap_delayed[_ngcontent-%COMP%]{transition:visibility .5s .2s}.scrollwrap_delayed[_ngcontent-%COMP%]:hover{transition:visibility .2s .2s}"],data:{animation:[GE,Es("rotate",[fr(":enter",[pr("1000ms",Dy([Ei({transform:"rotate(0deg)",offset:"0"}),Ei({transform:"rotate(2turn)",offset:"1"})]))])])]}});let t=e;return t})();var BE=[{icon:"far fa-user",label:"Profile"},{icon:"far fa-unlock-alt",label:"Change Password"},{icon:"far fa-power-off",label:"Logout"}];function Ta(t){return Array.isArray(t)?t:[t]}function st(t){return t==null?"":typeof t=="string"?t:`${t}px`}function Xd(t){return t instanceof Te?t.nativeElement:t}var Ov;try{Ov=typeof Intl<"u"&&Intl.v8BreakIterator}catch{Ov=!1}var di=(()=>{let e=class e{constructor(o){this._platformId=o,this.isBrowser=this._platformId?_y(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||Ov)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}};e.\u0275fac=function(r){return new(r||e)(F(To))},e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Zd;function UL(){if(Zd==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Zd=!0}))}finally{Zd=Zd||!1}return Zd}function Jd(t){return UL()?t:!!t.capture}var Zn;function WE(){if(Zn==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return Zn=!1,Zn;if("scrollBehavior"in document.documentElement.style)Zn=!0;else{let t=Element.prototype.scrollTo;t?Zn=!/\{\s*\[native code\]\s*\}/.test(t.toString()):Zn=!1}}return Zn}function Zi(t){return t.composedPath?t.composedPath()[0]:t.target}function ec(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}var jL=new Z("cdk-dir-doc",{providedIn:"root",factory:qL});function qL(){return O(fe)}var KL=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function $L(t){let e=t?.toLowerCase()||"";return e==="auto"&&typeof navigator<"u"&&navigator?.language?KL.test(navigator.language)?"rtl":"ltr":e==="rtl"?"rtl":"ltr"}var Aa=(()=>{let e=class e{constructor(o){if(this.value="ltr",this.change=new M,o){let r=o.body?o.body.dir:null,n=o.documentElement?o.documentElement.dir:null;this.value=$L(r||n||"ltr")}}ngOnDestroy(){this.change.complete()}};e.\u0275fac=function(r){return new(r||e)(F(jL,8))},e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Nr=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=re({type:e}),e.\u0275inj=oe({});let t=e;return t})();var kv=(()=>{let e=class e{constructor(){this._listeners=[]}notify(o,r){for(let n of this._listeners)n(o,r)}listen(o){return this._listeners.push(o),()=>{this._listeners=this._listeners.filter(r=>o!==r)}}ngOnDestroy(){this._listeners=[]}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var XL=20,jE=(()=>{let e=class e{constructor(o,r,n){this._ngZone=o,this._platform=r,this._scrolled=new pe,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=n}register(o){this.scrollContainers.has(o)||this.scrollContainers.set(o,o.elementScrolled().subscribe(()=>this._scrolled.next(o)))}deregister(o){let r=this.scrollContainers.get(o);r&&(r.unsubscribe(),this.scrollContainers.delete(o))}scrolled(o=XL){return this._platform.isBrowser?new hs(r=>{this._globalSubscription||this._addGlobalListener();let n=o>0?this._scrolled.pipe(ip(o)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{n.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):Y()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((o,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(o,r){let n=this.getAncestorScrollContainers(o);return this.scrolled(r).pipe(Ct(s=>!s||n.indexOf(s)>-1))}getAncestorScrollContainers(o){let r=[];return this.scrollContainers.forEach((n,s)=>{this._scrollableContainsElement(s,o)&&r.push(s)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(o,r){let n=Xd(r),s=o.getElementRef().nativeElement;do if(n==s)return!0;while(n=n.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{let o=this._getWindow();return rn(o.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}};e.\u0275fac=function(r){return new(r||e)(F(ee),F(di),F(fe,8))},e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var ZL=20,Gv=(()=>{let e=class e{constructor(o,r,n){this._platform=o,this._change=new pe,this._changeListener=s=>{this._change.next(s)},this._document=n,r.runOutsideAngular(()=>{if(o.isBrowser){let s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){let o=this._getWindow();o.removeEventListener("resize",this._changeListener),o.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let o={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),o}getViewportRect(){let o=this.getViewportScrollPosition(),{width:r,height:n}=this.getViewportSize();return{top:o.top,left:o.left,bottom:o.top+n,right:o.left+r,height:n,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let o=this._document,r=this._getWindow(),n=o.documentElement,s=n.getBoundingClientRect(),a=-s.top||o.body.scrollTop||r.scrollY||n.scrollTop||0,l=-s.left||o.body.scrollLeft||r.scrollX||n.scrollLeft||0;return{top:a,left:l}}change(o=ZL){return o>0?this._change.pipe(ip(o)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let o=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:o.innerWidth,height:o.innerHeight}:{width:0,height:0}}};e.\u0275fac=function(r){return new(r||e)(F(di),F(ee),F(fe,8))},e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Kh=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=re({type:e}),e.\u0275inj=oe({});let t=e;return t})(),Vv=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=re({type:e}),e.\u0275inj=oe({imports:[Nr,Kh,Nr,Kh]});let t=e;return t})();var tc=class{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;e!=null&&(this._attachedHost=null,e.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(e){this._attachedHost=e}},Hv=class extends tc{constructor(e,i,o,r,n){super(),this.component=e,this.viewContainerRef=i,this.injector=o,this.componentFactoryResolver=r,this.projectableNodes=n}},Ia=class extends tc{constructor(e,i,o,r){super(),this.templateRef=e,this.viewContainerRef=i,this.context=o,this.injector=r}get origin(){return this.templateRef.elementRef}attach(e,i=this.context){return this.context=i,super.attach(e)}detach(){return this.context=void 0,super.detach()}},Bv=class extends tc{constructor(e){super(),this.element=e instanceof Te?e.nativeElement:e}},Wv=class{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){if(e instanceof Hv)return this._attachedPortal=e,this.attachComponentPortal(e);if(e instanceof Ia)return this._attachedPortal=e,this.attachTemplatePortal(e);if(this.attachDomPortal&&e instanceof Bv)return this._attachedPortal=e,this.attachDomPortal(e)}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}};var $h=class extends Wv{constructor(e,i,o,r,n){super(),this.outletElement=e,this._componentFactoryResolver=i,this._appRef=o,this._defaultInjector=r,this.attachDomPortal=s=>{this._document;let a=s.element;a.parentNode;let l=this._document.createComment("dom-portal");a.parentNode.insertBefore(l,a),this.outletElement.appendChild(a),this._attachedPortal=s,super.setDisposeFn(()=>{l.parentNode&&l.parentNode.replaceChild(a,l)})},this._document=n}attachComponentPortal(e){let o=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(o,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector,e.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=o.create(e.injector||this._defaultInjector||Ht.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let i=e.viewContainerRef,o=i.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return o.rootNodes.forEach(r=>this.outletElement.appendChild(r)),o.detectChanges(),this.setDisposeFn(()=>{let r=i.indexOf(o);r!==-1&&i.remove(r)}),this._attachedPortal=e,o}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}};var qE=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=re({type:e}),e.\u0275inj=oe({});let t=e;return t})();function xi(t,...e){return e.length?e.some(i=>t[i]):t.altKey||t.shiftKey||t.ctrlKey||t.metaKey}var KE=WE(),Uv=class{constructor(e,i){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=i}attach(){}enable(){if(this._canBeEnabled()){let e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=st(-this._previousScrollPosition.left),e.style.top=st(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let e=this._document.documentElement,i=this._document.body,o=e.style,r=i.style,n=o.scrollBehavior||"",s=r.scrollBehavior||"";this._isEnabled=!1,o.left=this._previousHTMLStyles.left,o.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),KE&&(o.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),KE&&(o.scrollBehavior=n,r.scrollBehavior=s)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let i=this._document.body,o=this._viewportRuler.getViewportSize();return i.scrollHeight>o.height||i.scrollWidth>o.width}};var jv=class{constructor(e,i,o,r){this._scrollDispatcher=e,this._ngZone=i,this._viewportRuler=o,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(this._scrollSubscription)return;let e=this._scrollDispatcher.scrolled(0).pipe(Ct(i=>!i||!this._overlayRef.overlayElement.contains(i.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{let i=this._viewportRuler.getViewportScrollPosition().top;Math.abs(i-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},Yh=class{enable(){}disable(){}attach(){}};function qv(t,e){return e.some(i=>{let o=t.bottom<i.top,r=t.top>i.bottom,n=t.right<i.left,s=t.left>i.right;return o||r||n||s})}function $E(t,e){return e.some(i=>{let o=t.top<i.top,r=t.bottom>i.bottom,n=t.left<i.left,s=t.right>i.right;return o||r||n||s})}var Kv=class{constructor(e,i,o,r){this._scrollDispatcher=e,this._viewportRuler=i,this._ngZone=o,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(!this._scrollSubscription){let e=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(e).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let i=this._overlayRef.overlayElement.getBoundingClientRect(),{width:o,height:r}=this._viewportRuler.getViewportSize();qv(i,[{width:o,height:r,bottom:r,right:o,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},eN=(()=>{let e=class e{constructor(o,r,n,s){this._scrollDispatcher=o,this._viewportRuler=r,this._ngZone=n,this.noop=()=>new Yh,this.close=a=>new jv(this._scrollDispatcher,this._ngZone,this._viewportRuler,a),this.block=()=>new Uv(this._viewportRuler,this._document),this.reposition=a=>new Kv(this._scrollDispatcher,this._viewportRuler,this._ngZone,a),this._document=s}};e.\u0275fac=function(r){return new(r||e)(F(jE),F(Gv),F(ee),F(fe))},e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),ic=class{constructor(e){if(this.scrollStrategy=new Yh,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){let i=Object.keys(e);for(let o of i)e[o]!==void 0&&(this[o]=e[o])}}};var $v=class{constructor(e,i){this.connectionPair=e,this.scrollableViewProperties=i}};var JE=(()=>{let e=class e{constructor(o){this._attachedOverlays=[],this._document=o}ngOnDestroy(){this.detach()}add(o){this.remove(o),this._attachedOverlays.push(o)}remove(o){let r=this._attachedOverlays.indexOf(o);r>-1&&this._attachedOverlays.splice(r,1),this._attachedOverlays.length===0&&this.detach()}};e.\u0275fac=function(r){return new(r||e)(F(fe))},e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),tN=(()=>{let e=class e extends JE{constructor(o,r){super(o),this._ngZone=r,this._keydownListener=n=>{let s=this._attachedOverlays;for(let a=s.length-1;a>-1;a--)if(s[a]._keydownEvents.observers.length>0){let l=s[a]._keydownEvents;this._ngZone?this._ngZone.run(()=>l.next(n)):l.next(n);break}}}add(o){super.add(o),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}};e.\u0275fac=function(r){return new(r||e)(F(fe),F(ee,8))},e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),iN=(()=>{let e=class e extends JE{constructor(o,r,n){super(o),this._platform=r,this._ngZone=n,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=Zi(s)},this._clickListener=s=>{let a=Zi(s),l=s.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:a;this._pointerDownEventTarget=null;let d=this._attachedOverlays.slice();for(let c=d.length-1;c>-1;c--){let u=d[c];if(u._outsidePointerEvents.observers.length<1||!u.hasAttached())continue;if(u.overlayElement.contains(a)||u.overlayElement.contains(l))break;let h=u._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>h.next(s)):h.next(s)}}}add(o){if(super.add(o),!this._isAttached){let r=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(r)):this._addEventListeners(r),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){let o=this._document.body;o.removeEventListener("pointerdown",this._pointerDownListener,!0),o.removeEventListener("click",this._clickListener,!0),o.removeEventListener("auxclick",this._clickListener,!0),o.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(o.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(o){o.addEventListener("pointerdown",this._pointerDownListener,!0),o.addEventListener("click",this._clickListener,!0),o.addEventListener("auxclick",this._clickListener,!0),o.addEventListener("contextmenu",this._clickListener,!0)}};e.\u0275fac=function(r){return new(r||e)(F(fe),F(di),F(ee,8))},e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),e0=(()=>{let e=class e{constructor(o,r){this._platform=r,this._document=o}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let o="cdk-overlay-container";if(this._platform.isBrowser||ec()){let n=this._document.querySelectorAll(`.${o}[platform="server"], .${o}[platform="test"]`);for(let s=0;s<n.length;s++)n[s].remove()}let r=this._document.createElement("div");r.classList.add(o),ec()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}};e.\u0275fac=function(r){return new(r||e)(F(fe),F(di))},e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Yv=class{constructor(e,i,o,r,n,s,a,l,d,c=!1){this._portalOutlet=e,this._host=i,this._pane=o,this._config=r,this._ngZone=n,this._keyboardDispatcher=s,this._document=a,this._location=l,this._outsideClickDispatcher=d,this._animationsDisabled=c,this._backdropElement=null,this._backdropClick=new pe,this._attachments=new pe,this._detachments=new pe,this._locationChanges=tr.EMPTY,this._backdropClickHandler=u=>this._backdropClick.next(u),this._backdropTransitionendHandler=u=>{this._disposeBackdrop(u.target)},this._keydownEvents=new pe,this._outsidePointerEvents=new pe,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let i=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(Hi(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof i?.onDestroy=="function"&&i.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),i}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){let e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=L(L({},this._config),e),this._updateElementSize()}setDirection(e){this._config=we(L({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){let e=this._config.direction;return e?typeof e=="string"?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let e=this._pane.style;e.width=st(this._config.width),e.height=st(this._config.height),e.minWidth=st(this._config.minWidth),e.minHeight=st(this._config.minHeight),e.maxWidth=st(this._config.maxWidth),e.maxHeight=st(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){let e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let e=this._backdropElement;if(e){if(this._animationsDisabled){this._disposeBackdrop(e);return}e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,i,o){let r=Ta(i||[]).filter(n=>!!n);r.length&&(o?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{let e=this._ngZone.onStable.pipe(it(ll(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){let e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}},YE="cdk-overlay-connected-position-bounding-box",oN=/([A-Za-z%]+)$/,Qv=class{get positions(){return this._preferredPositions}constructor(e,i,o,r,n){this._viewportRuler=i,this._document=o,this._platform=r,this._overlayContainer=n,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new pe,this._resizeSubscription=tr.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}attach(e){this._overlayRef&&this._overlayRef,this._validatePositions(),e.hostElement.classList.add(YE),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let e=this._originRect,i=this._overlayRect,o=this._viewportRect,r=this._containerRect,n=[],s;for(let a of this._preferredPositions){let l=this._getOriginPoint(e,r,a),d=this._getOverlayPoint(l,i,a),c=this._getOverlayFit(d,i,o,a);if(c.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(a,l);return}if(this._canFitWithFlexibleDimensions(c,d,o)){n.push({position:a,origin:l,overlayRect:i,boundingBoxRect:this._calculateBoundingBoxRect(l,a)});continue}(!s||s.overlayFit.visibleArea<c.visibleArea)&&(s={overlayFit:c,overlayPoint:d,originPoint:l,position:a,overlayRect:i})}if(n.length){let a=null,l=-1;for(let d of n){let c=d.boundingBoxRect.width*d.boundingBoxRect.height*(d.position.weight||1);c>l&&(l=c,a=d)}this._isPushed=!1,this._applyPosition(a.position,a.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(s.position,s.originPoint);return}this._applyPosition(s.position,s.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Jn(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(YE),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let i=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,i)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,e.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,i,o){let r;if(o.originX=="center")r=e.left+e.width/2;else{let s=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;r=o.originX=="start"?s:a}i.left<0&&(r-=i.left);let n;return o.originY=="center"?n=e.top+e.height/2:n=o.originY=="top"?e.top:e.bottom,i.top<0&&(n-=i.top),{x:r,y:n}}_getOverlayPoint(e,i,o){let r;o.overlayX=="center"?r=-i.width/2:o.overlayX==="start"?r=this._isRtl()?-i.width:0:r=this._isRtl()?0:-i.width;let n;return o.overlayY=="center"?n=-i.height/2:n=o.overlayY=="top"?0:-i.height,{x:e.x+r,y:e.y+n}}_getOverlayFit(e,i,o,r){let n=XE(i),{x:s,y:a}=e,l=this._getOffset(r,"x"),d=this._getOffset(r,"y");l&&(s+=l),d&&(a+=d);let c=0-s,u=s+n.width-o.width,h=0-a,p=a+n.height-o.height,m=this._subtractOverflows(n.width,c,u),C=this._subtractOverflows(n.height,h,p),w=m*C;return{visibleArea:w,isCompletelyWithinViewport:n.width*n.height===w,fitsInViewportVertically:C===n.height,fitsInViewportHorizontally:m==n.width}}_canFitWithFlexibleDimensions(e,i,o){if(this._hasFlexibleDimensions){let r=o.bottom-i.y,n=o.right-i.x,s=QE(this._overlayRef.getConfig().minHeight),a=QE(this._overlayRef.getConfig().minWidth),l=e.fitsInViewportVertically||s!=null&&s<=r,d=e.fitsInViewportHorizontally||a!=null&&a<=n;return l&&d}return!1}_pushOverlayOnScreen(e,i,o){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};let r=XE(i),n=this._viewportRect,s=Math.max(e.x+r.width-n.width,0),a=Math.max(e.y+r.height-n.height,0),l=Math.max(n.top-o.top-e.y,0),d=Math.max(n.left-o.left-e.x,0),c=0,u=0;return r.width<=n.width?c=d||-s:c=e.x<this._viewportMargin?n.left-o.left-e.x:0,r.height<=n.height?u=l||-a:u=e.y<this._viewportMargin?n.top-o.top-e.y:0,this._previousPushAmount={x:c,y:u},{x:e.x+c,y:e.y+u}}_applyPosition(e,i){if(this._setTransformOrigin(e),this._setOverlayElementStyles(i,e),this._setBoundingBoxStyles(i,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._positionChanges.observers.length){let o=this._getScrollVisibility();if(e!==this._lastPosition||!this._lastScrollVisibility||!rN(this._lastScrollVisibility,o)){let r=new $v(e,o);this._positionChanges.next(r)}this._lastScrollVisibility=o}this._lastPosition=e,this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;let i=this._boundingBox.querySelectorAll(this._transformOriginSelector),o,r=e.overlayY;e.overlayX==="center"?o="center":this._isRtl()?o=e.overlayX==="start"?"right":"left":o=e.overlayX==="start"?"left":"right";for(let n=0;n<i.length;n++)i[n].style.transformOrigin=`${o} ${r}`}_calculateBoundingBoxRect(e,i){let o=this._viewportRect,r=this._isRtl(),n,s,a;if(i.overlayY==="top")s=e.y,n=o.height-s+this._viewportMargin;else if(i.overlayY==="bottom")a=o.height-e.y+this._viewportMargin*2,n=o.height-a+this._viewportMargin;else{let p=Math.min(o.bottom-e.y+o.top,e.y),m=this._lastBoundingBoxSize.height;n=p*2,s=e.y-p,n>m&&!this._isInitialRender&&!this._growAfterOpen&&(s=e.y-m/2)}let l=i.overlayX==="start"&&!r||i.overlayX==="end"&&r,d=i.overlayX==="end"&&!r||i.overlayX==="start"&&r,c,u,h;if(d)h=o.width-e.x+this._viewportMargin*2,c=e.x-this._viewportMargin;else if(l)u=e.x,c=o.right-e.x;else{let p=Math.min(o.right-e.x+o.left,e.x),m=this._lastBoundingBoxSize.width;c=p*2,u=e.x-p,c>m&&!this._isInitialRender&&!this._growAfterOpen&&(u=e.x-m/2)}return{top:s,left:u,bottom:a,right:h,width:c,height:n}}_setBoundingBoxStyles(e,i){let o=this._calculateBoundingBoxRect(e,i);!this._isInitialRender&&!this._growAfterOpen&&(o.height=Math.min(o.height,this._lastBoundingBoxSize.height),o.width=Math.min(o.width,this._lastBoundingBoxSize.width));let r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{let n=this._overlayRef.getConfig().maxHeight,s=this._overlayRef.getConfig().maxWidth;r.height=st(o.height),r.top=st(o.top),r.bottom=st(o.bottom),r.width=st(o.width),r.left=st(o.left),r.right=st(o.right),i.overlayX==="center"?r.alignItems="center":r.alignItems=i.overlayX==="end"?"flex-end":"flex-start",i.overlayY==="center"?r.justifyContent="center":r.justifyContent=i.overlayY==="bottom"?"flex-end":"flex-start",n&&(r.maxHeight=st(n)),s&&(r.maxWidth=st(s))}this._lastBoundingBoxSize=o,Jn(this._boundingBox.style,r)}_resetBoundingBoxStyles(){Jn(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Jn(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,i){let o={},r=this._hasExactPosition(),n=this._hasFlexibleDimensions,s=this._overlayRef.getConfig();if(r){let c=this._viewportRuler.getViewportScrollPosition();Jn(o,this._getExactOverlayY(i,e,c)),Jn(o,this._getExactOverlayX(i,e,c))}else o.position="static";let a="",l=this._getOffset(i,"x"),d=this._getOffset(i,"y");l&&(a+=`translateX(${l}px) `),d&&(a+=`translateY(${d}px)`),o.transform=a.trim(),s.maxHeight&&(r?o.maxHeight=st(s.maxHeight):n&&(o.maxHeight="")),s.maxWidth&&(r?o.maxWidth=st(s.maxWidth):n&&(o.maxWidth="")),Jn(this._pane.style,o)}_getExactOverlayY(e,i,o){let r={top:"",bottom:""},n=this._getOverlayPoint(i,this._overlayRect,e);if(this._isPushed&&(n=this._pushOverlayOnScreen(n,this._overlayRect,o)),e.overlayY==="bottom"){let s=this._document.documentElement.clientHeight;r.bottom=`${s-(n.y+this._overlayRect.height)}px`}else r.top=st(n.y);return r}_getExactOverlayX(e,i,o){let r={left:"",right:""},n=this._getOverlayPoint(i,this._overlayRect,e);this._isPushed&&(n=this._pushOverlayOnScreen(n,this._overlayRect,o));let s;if(this._isRtl()?s=e.overlayX==="end"?"left":"right":s=e.overlayX==="end"?"right":"left",s==="right"){let a=this._document.documentElement.clientWidth;r.right=`${a-(n.x+this._overlayRect.width)}px`}else r.left=st(n.x);return r}_getScrollVisibility(){let e=this._getOriginRect(),i=this._pane.getBoundingClientRect(),o=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:$E(e,o),isOriginOutsideView:qv(e,o),isOverlayClipped:$E(i,o),isOverlayOutsideView:qv(i,o)}}_subtractOverflows(e,...i){return i.reduce((o,r)=>o-Math.max(r,0),e)}_getNarrowedViewportRect(){let e=this._document.documentElement.clientWidth,i=this._document.documentElement.clientHeight,o=this._viewportRuler.getViewportScrollPosition();return{top:o.top+this._viewportMargin,left:o.left+this._viewportMargin,right:o.left+e-this._viewportMargin,bottom:o.top+i-this._viewportMargin,width:e-2*this._viewportMargin,height:i-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,i){return i==="x"?e.offsetX==null?this._offsetX:e.offsetX:e.offsetY==null?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&Ta(e).forEach(i=>{i!==""&&this._appliedPanelClasses.indexOf(i)===-1&&(this._appliedPanelClasses.push(i),this._pane.classList.add(i))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){let e=this._origin;if(e instanceof Te)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();let i=e.width||0,o=e.height||0;return{top:e.y,bottom:e.y+o,left:e.x,right:e.x+i,height:o,width:i}}};function Jn(t,e){for(let i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}function QE(t){if(typeof t!="number"&&t!=null){let[e,i]=t.split(oN);return!i||i==="px"?parseFloat(e):null}return t||null}function XE(t){return{top:Math.floor(t.top),right:Math.floor(t.right),bottom:Math.floor(t.bottom),left:Math.floor(t.left),width:Math.floor(t.width),height:Math.floor(t.height)}}function rN(t,e){return t===e?!0:t.isOriginClipped===e.isOriginClipped&&t.isOriginOutsideView===e.isOriginOutsideView&&t.isOverlayClipped===e.isOverlayClipped&&t.isOverlayOutsideView===e.isOverlayOutsideView}var t0=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"}],i0=[{originX:"end",originY:"top",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"start",overlayY:"bottom"},{originX:"start",originY:"top",overlayX:"end",overlayY:"top"},{originX:"start",originY:"bottom",overlayX:"end",overlayY:"bottom"}],ZE="cdk-global-overlay-wrapper",Xv=class{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){let i=e.getConfig();this._overlayRef=e,this._width&&!i.width&&e.updateSize({width:this._width}),this._height&&!i.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(ZE),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let e=this._overlayRef.overlayElement.style,i=this._overlayRef.hostElement.style,o=this._overlayRef.getConfig(),{width:r,height:n,maxWidth:s,maxHeight:a}=o,l=(r==="100%"||r==="100vw")&&(!s||s==="100%"||s==="100vw"),d=(n==="100%"||n==="100vh")&&(!a||a==="100%"||a==="100vh"),c=this._xPosition,u=this._xOffset,h=this._overlayRef.getConfig().direction==="rtl",p="",m="",C="";l?C="flex-start":c==="center"?(C="center",h?m=u:p=u):h?c==="left"||c==="end"?(C="flex-end",p=u):(c==="right"||c==="start")&&(C="flex-start",m=u):c==="left"||c==="start"?(C="flex-start",p=u):(c==="right"||c==="end")&&(C="flex-end",m=u),e.position=this._cssPosition,e.marginLeft=l?"0":p,e.marginTop=d?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=l?"0":m,i.justifyContent=C,i.alignItems=d?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let e=this._overlayRef.overlayElement.style,i=this._overlayRef.hostElement,o=i.style;i.classList.remove(ZE),o.justifyContent=o.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}},nN=(()=>{let e=class e{constructor(o,r,n,s){this._viewportRuler=o,this._document=r,this._platform=n,this._overlayContainer=s}global(){return new Xv}flexibleConnectedTo(o){return new Qv(o,this._viewportRuler,this._document,this._platform,this._overlayContainer)}};e.\u0275fac=function(r){return new(r||e)(F(Gv),F(fe),F(di),F(e0))},e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),sN=0,jo=(()=>{let e=class e{constructor(o,r,n,s,a,l,d,c,u,h,p,m){this.scrollStrategies=o,this._overlayContainer=r,this._componentFactoryResolver=n,this._positionBuilder=s,this._keyboardDispatcher=a,this._injector=l,this._ngZone=d,this._document=c,this._directionality=u,this._location=h,this._outsideClickDispatcher=p,this._animationsModuleType=m}create(o){let r=this._createHostElement(),n=this._createPaneElement(r),s=this._createPortalOutlet(n),a=new ic(o);return a.direction=a.direction||this._directionality.value,new Yv(s,r,n,a,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,this._animationsModuleType==="NoopAnimations")}position(){return this._positionBuilder}_createPaneElement(o){let r=this._document.createElement("div");return r.id=`cdk-overlay-${sN++}`,r.classList.add("cdk-overlay-pane"),o.appendChild(r),r}_createHostElement(){let o=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(o),o}_createPortalOutlet(o){return this._appRef||(this._appRef=this._injector.get(ro)),new $h(o,this._componentFactoryResolver,this._appRef,this._injector,this._document)}};e.\u0275fac=function(r){return new(r||e)(F(eN),F(e0),F(fl),F(nN),F(tN),F(Ht),F(ee),F(fe),F(Aa),F(ln),F(iN),F(dr,8))},e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var aN=new Z("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{let t=O(jo);return()=>t.scrollStrategies.reposition()}});function lN(t){return()=>t.scrollStrategies.reposition()}var dN={provide:aN,deps:[jo],useFactory:lN},Pa=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=re({type:e}),e.\u0275inj=oe({providers:[jo,dN],imports:[Nr,qE,Vv,Vv]});let t=e;return t})();var cN=(()=>{let e=class e{create(o){return typeof MutationObserver>"u"?null:new MutationObserver(o)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var o0=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=re({type:e}),e.\u0275inj=oe({providers:[cN]});let t=e;return t})();var r0=new Set,es,uN=(()=>{let e=class e{constructor(o,r){this._platform=o,this._nonce=r,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):gN}matchMedia(o){return(this._platform.WEBKIT||this._platform.BLINK)&&hN(o,this._nonce),this._matchMedia(o)}};e.\u0275fac=function(r){return new(r||e)(F(di),F(gl,8))},e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function hN(t,e){if(!r0.has(t))try{es||(es=document.createElement("style"),e&&es.setAttribute("nonce",e),es.setAttribute("type","text/css"),document.head.appendChild(es)),es.sheet&&(es.sheet.insertRule(`@media ${t} {body{ }}`,0),r0.add(t))}catch(i){console.error(i)}}function gN(t){return{matches:t==="all"||t==="",media:t,addListener:()=>{},removeListener:()=>{}}}var s0=(()=>{let e=class e{constructor(o,r){this._mediaMatcher=o,this._zone=r,this._queries=new Map,this._destroySubject=new pe}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(o){return n0(Ta(o)).some(n=>this._registerQuery(n).mql.matches)}observe(o){let n=n0(Ta(o)).map(a=>this._registerQuery(a).observable),s=gs(n);return s=Fc(s.pipe(Hi(1)),s.pipe(dl(1),ms(0))),s.pipe(ve(a=>{let l={matches:!1,breakpoints:{}};return a.forEach(({matches:d,query:c})=>{l.matches=l.matches||d,l.breakpoints[c]=d}),l}))}_registerQuery(o){if(this._queries.has(o))return this._queries.get(o);let r=this._mediaMatcher.matchMedia(o),s={observable:new hs(a=>{let l=d=>this._zone.run(()=>a.next(d));return r.addListener(l),()=>{r.removeListener(l)}}).pipe(to(r),ve(({matches:a})=>({query:o,matches:a})),it(this._destroySubject)),mql:r};return this._queries.set(o,s),s}};e.\u0275fac=function(r){return new(r||e)(F(uN),F(ee))},e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function n0(t){return t.map(e=>e.split(",")).reduce((e,i)=>e.concat(i)).map(e=>e.trim())}var Jv=class{constructor(e,i){this._items=e,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new pe,this._typeaheadSubscription=tr.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._pageUpAndDown={enabled:!1,delta:10},this._skipPredicateFn=o=>o.disabled,this._pressedLetters=[],this.tabOut=new pe,this.change=new pe,e instanceof lp?this._itemChangesSubscription=e.changes.subscribe(o=>this._itemsChanged(o.toArray())):up(e)&&(this._effectRef=my(()=>this._itemsChanged(e()),{injector:i}))}skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(ht(i=>this._pressedLetters.push(i)),ms(e),Ct(()=>this._pressedLetters.length>0),ve(()=>this._pressedLetters.join(""))).subscribe(i=>{let o=this._getItemsArray();for(let r=1;r<o.length+1;r++){let n=(this._activeItemIndex+r)%o.length,s=o[n];if(!this._skipPredicateFn(s)&&s.getLabel().toUpperCase().trim().indexOf(i)===0){this.setActiveItem(n);break}}this._pressedLetters=[]}),this}cancelTypeahead(){return this._pressedLetters=[],this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}withPageUpDown(e=!0,i=10){return this._pageUpAndDown={enabled:e,delta:i},this}setActiveItem(e){let i=this._activeItem;this.updateActiveItem(e),this._activeItem!==i&&this.change.next(this._activeItemIndex)}onKeydown(e){let i=e.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(n=>!e[n]||this._allowedModifierKeys.indexOf(n)>-1);switch(i){case 9:this.tabOut.next();return;case 40:if(this._vertical&&r){this.setNextItemActive();break}else return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}else return;case 39:if(this._horizontal&&r){this._horizontal==="rtl"?this.setPreviousItemActive():this.setNextItemActive();break}else return;case 37:if(this._horizontal&&r){this._horizontal==="rtl"?this.setNextItemActive():this.setPreviousItemActive();break}else return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}else return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}else return;case 33:if(this._pageUpAndDown.enabled&&r){let n=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(n>0?n:0,1);break}else return;case 34:if(this._pageUpAndDown.enabled&&r){let n=this._activeItemIndex+this._pageUpAndDown.delta,s=this._getItemsArray().length;this._setActiveItemByIndex(n<s?n:s-1,-1);break}else return;default:(r||xi(e,"shiftKey"))&&(e.key&&e.key.length===1?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(i>=65&&i<=90||i>=48&&i<=57)&&this._letterKeyStream.next(String.fromCharCode(i)));return}this._pressedLetters=[],e.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._getItemsArray().length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){let i=this._getItemsArray(),o=typeof e=="number"?e:i.indexOf(e),r=i[o];this._activeItem=r??null,this._activeItemIndex=o}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._effectRef?.destroy(),this._letterKeyStream.complete(),this.tabOut.complete(),this.change.complete(),this._pressedLetters=[]}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){let i=this._getItemsArray();for(let o=1;o<=i.length;o++){let r=(this._activeItemIndex+e*o+i.length)%i.length,n=i[r];if(!this._skipPredicateFn(n)){this.setActiveItem(r);return}}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}_setActiveItemByIndex(e,i){let o=this._getItemsArray();if(o[e]){for(;this._skipPredicateFn(o[e]);)if(e+=i,!o[e])return;this.setActiveItem(e)}}_getItemsArray(){return up(this._items)?this._items():this._items instanceof lp?this._items.toArray():this._items}_itemsChanged(e){if(this._activeItem){let i=e.indexOf(this._activeItem);i>-1&&i!==this._activeItemIndex&&(this._activeItemIndex=i)}}};var Qh=class extends Jv{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(e){return this._origin=e,this}setActiveItem(e){super.setActiveItem(e),this.activeItem&&this.activeItem.focus(this._origin)}};function iC(t){return t.buttons===0||t.detail===0}function oC(t){let e=t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0];return!!e&&e.identifier===-1&&(e.radiusX==null||e.radiusX===1)&&(e.radiusY==null||e.radiusY===1)}var RN=new Z("cdk-input-modality-detector-options"),MN={ignoreKeys:[18,17,224,91,16]},TN=650,Fa=Jd({passive:!0,capture:!0}),rC=(()=>{let e=class e{get mostRecentModality(){return this._modality.value}constructor(o,r,n,s){this._platform=o,this._mostRecentTarget=null,this._modality=new Pt(null),this._lastTouchMs=0,this._onKeydown=a=>{this._options?.ignoreKeys?.some(l=>l===a.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Zi(a))},this._onMousedown=a=>{Date.now()-this._lastTouchMs<TN||(this._modality.next(iC(a)?"keyboard":"mouse"),this._mostRecentTarget=Zi(a))},this._onTouchstart=a=>{if(oC(a)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Zi(a)},this._options=L(L({},MN),s),this.modalityDetected=this._modality.pipe(dl(1)),this.modalityChanged=this.modalityDetected.pipe(nn()),o.isBrowser&&r.runOutsideAngular(()=>{n.addEventListener("keydown",this._onKeydown,Fa),n.addEventListener("mousedown",this._onMousedown,Fa),n.addEventListener("touchstart",this._onTouchstart,Fa)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Fa),document.removeEventListener("mousedown",this._onMousedown,Fa),document.removeEventListener("touchstart",this._onTouchstart,Fa))}};e.\u0275fac=function(r){return new(r||e)(F(di),F(ee),F(fe),F(RN,8))},e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var ts=function(t){return t[t.NONE=0]="NONE",t[t.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",t[t.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",t}(ts||{}),a0="cdk-high-contrast-black-on-white",l0="cdk-high-contrast-white-on-black",Zv="cdk-high-contrast-active",d0=(()=>{let e=class e{constructor(o,r){this._platform=o,this._document=r,this._breakpointSubscription=O(s0).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return ts.NONE;let o=this._document.createElement("div");o.style.backgroundColor="rgb(1,2,3)",o.style.position="absolute",this._document.body.appendChild(o);let r=this._document.defaultView||window,n=r&&r.getComputedStyle?r.getComputedStyle(o):null,s=(n&&n.backgroundColor||"").replace(/ /g,"");switch(o.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return ts.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return ts.BLACK_ON_WHITE}return ts.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let o=this._document.body.classList;o.remove(Zv,a0,l0),this._hasCheckedHighContrastMode=!0;let r=this.getHighContrastMode();r===ts.BLACK_ON_WHITE?o.add(Zv,a0):r===ts.WHITE_ON_BLACK&&o.add(Zv,l0)}}};e.\u0275fac=function(r){return new(r||e)(F(di),F(fe))},e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var c0=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=ye({type:e,selectors:[["","cdkMenuGroup",""]],hostAttrs:["role","group",1,"cdk-menu-group"],exportAs:["cdkMenuGroup"],standalone:!0,features:[lt([{provide:kv,useClass:kv}])]});let t=e;return t})(),sC=new Z("cdk-menu"),zr=function(t){return t[t.nextItem=0]="nextItem",t[t.previousItem=1]="previousItem",t[t.currentItem=2]="currentItem",t}(zr||{}),Gr=new Z("cdk-menu-stack"),PN={provide:Gr,deps:[[new Cs,new cl,new sp(Gr)]],useFactory:t=>t||new u0},FN=t=>({provide:Gr,deps:[[new Cs,new cl,new sp(Gr)]],useFactory:e=>e||u0.inline(t)}),ON=0,u0=(()=>{let e=class e{constructor(){this.id=`${ON++}`,this._elements=[],this._close=new pe,this._empty=new pe,this._hasFocus=new pe,this.closed=this._close,this.hasFocus=this._hasFocus.pipe(to(!1),ms(0),nn()),this.emptied=this._empty,this._inlineMenuOrientation=null}static inline(o){let r=new e;return r._inlineMenuOrientation=o,r}push(o){this._elements.push(o)}close(o,r){let{focusNextOnEmpty:n,focusParentTrigger:s}=L({},r);if(this._elements.indexOf(o)>=0){let a;do a=this._elements.pop(),this._close.next({item:a,focusParentTrigger:s});while(a!==o);this.isEmpty()&&this._empty.next(n)}}closeSubMenuOf(o){let r=!1;if(this._elements.indexOf(o)>=0)for(r=this.peek()!==o;this.peek()!==o;)this._close.next({item:this._elements.pop()});return r}closeAll(o){let{focusNextOnEmpty:r,focusParentTrigger:n}=L({},o);if(!this.isEmpty()){for(;!this.isEmpty();){let s=this._elements.pop();s&&this._close.next({item:s,focusParentTrigger:n})}this._empty.next(r)}}isEmpty(){return!this._elements.length}length(){return this._elements.length}peek(){return this._elements[this._elements.length-1]}hasInlineMenu(){return this._inlineMenuOrientation!=null}inlineMenuOrientation(){return this._inlineMenuOrientation}setHasFocus(o){this._hasFocus.next(o)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=H({token:e,factory:e.\u0275fac});let t=e;return t})(),aC=new Z("cdk-menu-trigger"),kN=new Z("cdk-menu-scroll-strategy",{providedIn:"root",factory:()=>{let t=O(jo);return()=>t.scrollStrategies.reposition()}}),LN=(()=>{let e=class e{constructor(){this.injector=O(Ht),this.viewContainerRef=O(Io),this.menuStack=O(Gr),this.menuScrollStrategy=O(kN),this.opened=new M,this.closed=new M,this.overlayRef=null,this.destroyed=new pe,this.stopOutsideClicksListener=ll(this.closed,this.destroyed)}ngOnDestroy(){this._destroyOverlay(),this.destroyed.next(),this.destroyed.complete()}isOpen(){return!!this.overlayRef?.hasAttached()}registerChildMenu(o){this.childMenu=o}getMenuContentPortal(){let o=this.menuTemplateRef!==this._menuPortal?.templateRef;return this.menuTemplateRef&&(!this._menuPortal||o)&&(this._menuPortal=new Ia(this.menuTemplateRef,this.viewContainerRef,this.menuData,this._getChildMenuInjector())),this._menuPortal}isElementInsideMenuStack(o){for(let r=o;r;r=r?.parentElement??null)if(r.getAttribute("data-cdk-menu-stack-id")===this.menuStack.id)return!0;return!1}_destroyOverlay(){this.overlayRef&&(this.overlayRef.dispose(),this.overlayRef=null)}_getChildMenuInjector(){return this._childMenuInjector=this._childMenuInjector||Ht.create({providers:[{provide:aC,useValue:this},{provide:Gr,useValue:this.menuStack}],parent:this.injector}),this._childMenuInjector}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=ye({type:e,hostVars:2,hostBindings:function(r,n){r&2&&gt("aria-controls",n.childMenu==null?null:n.childMenu.id)("data-cdk-menu-stack-id",n.menuStack.id)},standalone:!0});let t=e;return t})();var lC=new Z("cdk-menu-aim");function h0(t,e){if(!e.isTrusted)return!1;let i=t.nativeElement,o=e.keyCode;return i.nodeName==="BUTTON"&&!i.disabled?o===13||o===32:i.nodeName==="A"?o===13:!1}var dC=(()=>{let e=class e extends LN{constructor(){super(),this._elementRef=O(Te),this._overlay=O(jo),this._ngZone=O(ee),this._changeDetectorRef=O(Zt),this._inputModalityDetector=O(rC),this._directionality=O(Aa,{optional:!0}),this._parentMenu=O(sC,{optional:!0}),this._menuAim=O(lC,{optional:!0}),this._setRole(),this._registerCloseHandler(),this._subscribeToMenuStackClosed(),this._subscribeToMouseEnter(),this._subscribeToMenuStackHasFocus(),this._setType()}toggle(){this.isOpen()?this.close():this.open()}open(){!this.isOpen()&&this.menuTemplateRef!=null&&(this.opened.next(),this.overlayRef=this.overlayRef||this._overlay.create(this._getOverlayConfig()),this.overlayRef.attach(this.getMenuContentPortal()),this._changeDetectorRef.markForCheck(),this._subscribeToOutsideClicks())}close(){this.isOpen()&&(this.closed.next(),this.overlayRef.detach(),this._changeDetectorRef.markForCheck()),this._closeSiblingTriggers()}getMenu(){return this.childMenu}_toggleOnKeydown(o){let r=this._parentMenu?.orientation==="vertical";switch(o.keyCode){case 32:case 13:!xi(o)&&!h0(this._elementRef,o)&&(this.toggle(),this.childMenu?.focusFirstItem("keyboard"));break;case 39:xi(o)||this._parentMenu&&r&&this._directionality?.value!=="rtl"&&(o.preventDefault(),this.open(),this.childMenu?.focusFirstItem("keyboard"));break;case 37:xi(o)||this._parentMenu&&r&&this._directionality?.value==="rtl"&&(o.preventDefault(),this.open(),this.childMenu?.focusFirstItem("keyboard"));break;case 40:case 38:xi(o)||r||(o.preventDefault(),this.open(),o.keyCode===40?this.childMenu?.focusFirstItem("keyboard"):this.childMenu?.focusLastItem("keyboard"));break}}_handleClick(){this.toggle(),this.childMenu?.focusFirstItem("mouse")}_setHasFocus(o){this._parentMenu||this.menuStack.setHasFocus(o)}_subscribeToMouseEnter(){this._ngZone.runOutsideAngular(()=>{rn(this._elementRef.nativeElement,"mouseenter").pipe(Ct(()=>this._inputModalityDetector.mostRecentModality!=="touch"&&!this.menuStack.isEmpty()&&!this.isOpen()),it(this.destroyed)).subscribe(()=>{let o=()=>this._ngZone.run(()=>{this._closeSiblingTriggers(),this.open()});this._menuAim?this._menuAim.toggle(o):o()})})}_closeSiblingTriggers(){this._parentMenu?!this.menuStack.closeSubMenuOf(this._parentMenu)&&this.menuStack.peek()!==this._parentMenu&&this.menuStack.closeAll():this.menuStack.closeAll()}_getOverlayConfig(){return new ic({positionStrategy:this._getOverlayPositionStrategy(),scrollStrategy:this.menuScrollStrategy(),direction:this._directionality||void 0})}_getOverlayPositionStrategy(){return this._overlay.position().flexibleConnectedTo(this._elementRef).withLockedPosition().withGrowAfterOpen().withPositions(this._getOverlayPositions())}_getOverlayPositions(){return this.menuPosition??(!this._parentMenu||this._parentMenu.orientation==="horizontal"?t0:i0)}_registerCloseHandler(){this._parentMenu||this.menuStack.closed.pipe(it(this.destroyed)).subscribe(({item:o})=>{o===this.childMenu&&this.close()})}_subscribeToOutsideClicks(){this.overlayRef&&this.overlayRef.outsidePointerEvents().pipe(it(this.stopOutsideClicksListener)).subscribe(o=>{let r=Zi(o),n=this._elementRef.nativeElement;r!==n&&!n.contains(r)&&(this.isElementInsideMenuStack(r)?this._closeSiblingTriggers():this.menuStack.closeAll())})}_subscribeToMenuStackHasFocus(){this._parentMenu||this.menuStack.hasFocus.pipe(it(this.destroyed)).subscribe(o=>{o||this.menuStack.closeAll()})}_subscribeToMenuStackClosed(){this._parentMenu||this.menuStack.closed.subscribe(({focusParentTrigger:o})=>{o&&!this.menuStack.length()&&this._elementRef.nativeElement.focus()})}_setRole(){this._parentMenu||this._elementRef.nativeElement.setAttribute("role","button")}_setType(){let o=this._elementRef.nativeElement;o.nodeName==="BUTTON"&&!o.getAttribute("type")&&o.setAttribute("type","button")}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=ye({type:e,selectors:[["","cdkMenuTriggerFor",""]],hostAttrs:[1,"cdk-menu-trigger"],hostVars:2,hostBindings:function(r,n){r&1&&ne("focusin",function(){return n._setHasFocus(!0)})("focusout",function(){return n._setHasFocus(!1)})("keydown",function(a){return n._toggleOnKeydown(a)})("click",function(){return n._handleClick()}),r&2&&gt("aria-haspopup",n.menuTemplateRef?"menu":null)("aria-expanded",n.menuTemplateRef==null?null:n.isOpen())},inputs:{menuTemplateRef:[Ve.None,"cdkMenuTriggerFor","menuTemplateRef"],menuPosition:[Ve.None,"cdkMenuPosition","menuPosition"],menuData:[Ve.None,"cdkMenuTriggerData","menuData"]},outputs:{opened:"cdkMenuOpened",closed:"cdkMenuClosed"},exportAs:["cdkMenuTriggerFor"],standalone:!0,features:[lt([{provide:aC,useExisting:e},PN]),Bt]});let t=e;return t})(),cC=(()=>{let e=class e{get hasMenu(){return this._menuTrigger?.menuTemplateRef!=null}constructor(){this._dir=O(Aa,{optional:!0}),this._elementRef=O(Te),this._ngZone=O(ee),this._inputModalityDetector=O(rC),this._menuAim=O(lC,{optional:!0}),this._menuStack=O(Gr),this._parentMenu=O(sC,{optional:!0}),this._menuTrigger=O(dC,{optional:!0,self:!0}),this.disabled=!1,this.triggered=new M,this._tabindex=-1,this.closeOnSpacebarTrigger=!0,this.destroyed=new pe,this._setupMouseEnter(),this._setType(),this._isStandaloneItem()&&(this._tabindex=0)}ngOnDestroy(){this.destroyed.next(),this.destroyed.complete()}focus(){this._elementRef.nativeElement.focus()}trigger(o){let{keepOpen:r}=L({},o);!this.disabled&&!this.hasMenu&&(this.triggered.next(),r||this._menuStack.closeAll({focusParentTrigger:!0}))}isMenuOpen(){return!!this._menuTrigger?.isOpen()}getMenu(){return this._menuTrigger?.getMenu()}getMenuTrigger(){return this._menuTrigger}getLabel(){return this.typeaheadLabel||this._elementRef.nativeElement.textContent?.trim()||""}_resetTabIndex(){this._isStandaloneItem()||(this._tabindex=-1)}_setTabIndex(o){this.disabled||(!o||!this._menuStack.isEmpty())&&(this._tabindex=0)}_onKeydown(o){switch(o.keyCode){case 32:case 13:!xi(o)&&!h0(this._elementRef,o)&&this.trigger({keepOpen:o.keyCode===32&&!this.closeOnSpacebarTrigger});break;case 39:xi(o)||this._parentMenu&&this._isParentVertical()&&(this._dir?.value!=="rtl"?this._forwardArrowPressed(o):this._backArrowPressed(o));break;case 37:xi(o)||this._parentMenu&&this._isParentVertical()&&(this._dir?.value!=="rtl"?this._backArrowPressed(o):this._forwardArrowPressed(o));break}}_isStandaloneItem(){return!this._parentMenu}_backArrowPressed(o){let r=this._parentMenu;(this._menuStack.hasInlineMenu()||this._menuStack.length()>1)&&(o.preventDefault(),this._menuStack.close(r,{focusNextOnEmpty:this._menuStack.inlineMenuOrientation()==="horizontal"?zr.previousItem:zr.currentItem,focusParentTrigger:!0}))}_forwardArrowPressed(o){!this.hasMenu&&this._menuStack.inlineMenuOrientation()==="horizontal"&&(o.preventDefault(),this._menuStack.closeAll({focusNextOnEmpty:zr.nextItem,focusParentTrigger:!0}))}_setupMouseEnter(){if(!this._isStandaloneItem()){let o=()=>this._ngZone.run(()=>this._menuStack.closeSubMenuOf(this._parentMenu));this._ngZone.runOutsideAngular(()=>rn(this._elementRef.nativeElement,"mouseenter").pipe(Ct(()=>this._inputModalityDetector.mostRecentModality!=="touch"&&!this._menuStack.isEmpty()&&!this.hasMenu),it(this.destroyed)).subscribe(()=>{this._menuAim?this._menuAim.toggle(o):o()}))}}_isParentVertical(){return this._parentMenu?.orientation==="vertical"}_setType(){let o=this._elementRef.nativeElement;o.nodeName==="BUTTON"&&!o.getAttribute("type")&&o.setAttribute("type","button")}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=ye({type:e,selectors:[["","cdkMenuItem",""]],hostAttrs:["role","menuitem",1,"cdk-menu-item"],hostVars:2,hostBindings:function(r,n){r&1&&ne("blur",function(){return n._resetTabIndex()})("focus",function(){return n._setTabIndex()})("click",function(){return n.trigger()})("keydown",function(a){return n._onKeydown(a)}),r&2&&(vl("tabindex",n._tabindex),gt("aria-disabled",n.disabled||null))},inputs:{disabled:[Ve.HasDecoratorInputTransform,"cdkMenuItemDisabled","disabled",_i],typeaheadLabel:[Ve.None,"cdkMenuitemTypeaheadLabel","typeaheadLabel"]},outputs:{triggered:"cdkMenuItemTriggered"},exportAs:["cdkMenuItem"],standalone:!0,features:[oo]});let t=e;return t})(),nC=class{constructor(e){this._items=e,this.entered=this._getItemPointerEntries(),this.exited=this._getItemPointerExits(),this._destroyed=new pe,this.entered.subscribe(i=>this.activeElement=i),this.exited.subscribe(()=>{this.previousElement=this.activeElement,this.activeElement=void 0})}destroy(){this._destroyed.next(),this._destroyed.complete()}_getItemPointerEntries(){return ps(()=>this._items.changes.pipe(to(this._items),Et(e=>e.map(i=>rn(i._elementRef.nativeElement,"mouseenter").pipe(vs(i),it(this._items.changes)))),Mo()))}_getItemPointerExits(){return ps(()=>this._items.changes.pipe(to(this._items),Et(e=>e.map(i=>rn(i._elementRef.nativeElement,"mouseout").pipe(vs(i),it(this._items.changes)))),Mo()))}},NN=0,zN=(()=>{let e=class e extends c0{constructor(){super(...arguments),this.nativeElement=O(Te).nativeElement,this.ngZone=O(ee),this.menuStack=O(Gr),this.menuAim=O(lC,{optional:!0,self:!0}),this.dir=O(Aa,{optional:!0}),this.id=`cdk-menu-${NN++}`,this.orientation="vertical",this.isInline=!1,this.destroyed=new pe,this._menuStackHasFocus=!1}ngAfterContentInit(){this.isInline||this.menuStack.push(this),this._setKeyManager(),this._subscribeToMenuStackHasFocus(),this._subscribeToMenuOpen(),this._subscribeToMenuStackClosed(),this._setUpPointerTracker()}ngOnDestroy(){this.keyManager?.destroy(),this.destroyed.next(),this.destroyed.complete(),this.pointerTracker?.destroy()}focusFirstItem(o="program"){this.keyManager.setFocusOrigin(o),this.keyManager.setFirstItemActive()}focusLastItem(o="program"){this.keyManager.setFocusOrigin(o),this.keyManager.setLastItemActive()}_getTabIndex(){let o=this._menuStackHasFocus?-1:0;return this.isInline?o:null}closeOpenMenu(o,r){let{focusParentTrigger:n}=L({},r),s=this.keyManager,a=this.triggerItem;o===a?.getMenuTrigger()?.getMenu()&&(a?.getMenuTrigger()?.close(),n&&(a?s.setActiveItem(a):s.setFirstItemActive()))}_setKeyManager(){this.keyManager=new Qh(this.items).withWrap().withTypeAhead().withHomeAndEnd(),this.orientation==="horizontal"?this.keyManager.withHorizontalOrientation(this.dir?.value||"ltr"):this.keyManager.withVerticalOrientation()}_subscribeToMenuOpen(){let o=ll(this.items.changes,this.destroyed);this.items.changes.pipe(to(this.items),Et(r=>r.filter(n=>n.hasMenu).map(n=>n.getMenuTrigger().opened.pipe(vs(n),it(o)))),Mo(),Ft(r=>(this.triggerItem=r,r.getMenuTrigger().closed)),it(this.destroyed)).subscribe(()=>this.triggerItem=void 0)}_subscribeToMenuStackClosed(){this.menuStack.closed.pipe(it(this.destroyed)).subscribe(({item:o,focusParentTrigger:r})=>this.closeOpenMenu(o,{focusParentTrigger:r}))}_subscribeToMenuStackHasFocus(){this.isInline&&this.menuStack.hasFocus.pipe(it(this.destroyed)).subscribe(o=>{this._menuStackHasFocus=o})}_setUpPointerTracker(){this.menuAim&&(this.ngZone.runOutsideAngular(()=>{this.pointerTracker=new nC(this.items)}),this.menuAim.initialize(this,this.pointerTracker))}};e.\u0275fac=(()=>{let o;return function(n){return(o||(o=Bi(e)))(n||e)}})(),e.\u0275dir=ye({type:e,contentQueries:function(r,n,s){if(r&1&&xs(s,cC,5),r&2){let a;ur(a=hr())&&(n.items=a)}},hostAttrs:["role","menu"],hostVars:4,hostBindings:function(r,n){r&1&&ne("focus",function(){return n.focusFirstItem()})("focusin",function(){return n.menuStack.setHasFocus(!0)})("focusout",function(){return n.menuStack.setHasFocus(!1)}),r&2&&(vl("tabindex",n._getTabIndex())("id",n.id),gt("aria-orientation",n.orientation)("data-cdk-menu-stack-id",n.menuStack.id))},inputs:{id:"id"},standalone:!0,features:[Bt]});let t=e;return t})(),g0=(()=>{let e=class e extends zN{constructor(){super(),this._parentTrigger=O(aC,{optional:!0}),this.closed=new M,this.orientation="vertical",this.isInline=!this._parentTrigger,this.destroyed.subscribe(this.closed),this._parentTrigger?.registerChildMenu(this)}ngAfterContentInit(){super.ngAfterContentInit(),this._subscribeToMenuStackEmptied()}ngOnDestroy(){super.ngOnDestroy(),this.closed.complete()}_handleKeyEvent(o){let r=this.keyManager;switch(o.keyCode){case 37:case 39:xi(o)||(o.preventDefault(),r.setFocusOrigin("keyboard"),r.onKeydown(o));break;case 27:xi(o)||(o.preventDefault(),this.menuStack.close(this,{focusNextOnEmpty:zr.currentItem,focusParentTrigger:!0}));break;case 9:xi(o,"altKey","metaKey","ctrlKey")||this.menuStack.closeAll({focusParentTrigger:!0});break;default:r.onKeydown(o)}}_toggleMenuFocus(o){let r=this.keyManager;switch(o){case zr.nextItem:r.setFocusOrigin("keyboard"),r.setNextItemActive();break;case zr.previousItem:r.setFocusOrigin("keyboard"),r.setPreviousItemActive();break;case zr.currentItem:r.activeItem&&(r.setFocusOrigin("keyboard"),r.setActiveItem(r.activeItem));break}}_subscribeToMenuStackEmptied(){this.menuStack.emptied.pipe(it(this.destroyed)).subscribe(o=>this._toggleMenuFocus(o))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=ye({type:e,selectors:[["","cdkMenu",""]],hostAttrs:["role","menu",1,"cdk-menu"],hostVars:2,hostBindings:function(r,n){r&1&&ne("keydown",function(a){return n._handleKeyEvent(a)}),r&2&&fi("cdk-menu-inline",n.isInline)},outputs:{closed:"closed"},exportAs:["cdkMenu"],standalone:!0,features:[lt([{provide:c0,useExisting:e},{provide:sC,useExisting:e},FN("vertical")]),Bt]});let t=e;return t})();var p0=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=re({type:e}),e.\u0275inj=oe({imports:[Pa]});let t=e;return t})();var VN=(t,e)=>({"fa-angle-double-right":t,"fa-angle-double-left":e});function HN(t,e){if(t&1&&(G(0,"li",15)(1,"a"),le(2,"i",16),G(3,"span"),Q(4),B()()()),t&2){let i=e.$implicit;z(2),U("ngClass",i.icon),z(2),kt(i.label)}}function BN(t,e){if(t&1&&(G(0,"div",13)(1,"ul"),Ee(2,HN,5,2,"li",14),B()()),t&2){let i=ie();z(2),U("ngForOf",i.userItems)}}var f0=(()=>{let e=class e{constructor(){this.selectedName="",this.collapsed=!1,this.screenWidth=0,this.sidebarToggled=new M,this.isSidebarOpen=!1,this.userItems=BE}ngOnInit(){}getHeadClass(){let o="";return this.collapsed&&this.screenWidth>768?o="head-trimmed":o="head-md-screen",o}toggleSidebar(){this.sidebarToggled.emit()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Me({type:e,selectors:[["app-header"]],inputs:{selectedName:"selectedName",collapsed:"collapsed",screenWidth:"screenWidth"},outputs:{sidebarToggled:"sidebarToggled"},decls:25,vars:7,consts:[["userOverlay",""],[1,"head",3,"ngClass"],[1,"head-content"],[1,"head-content-left"],[1,"toggle"],[1,"toggle-btn",3,"click"],[1,"fas",3,"ngClass"],[1,"icon-label"],[1,"fas","fa-home"],[1,"head-content-right"],[1,"head-user-avatar-container"],[1,"head-user-avatar",3,"cdkMenuTriggerFor"],[1,"user-avatar"],["cdkMenu","",1,"overlay","overlay-user","overlay-fall"],["cdkMenuItem","",4,"ngFor","ngForOf"],["cdkMenuItem",""],[1,"icon",3,"ngClass"]],template:function(r,n){if(r&1){let s=Dt();G(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"button",5),ne("click",function(){return wt(s),yt(n.toggleSidebar())}),le(5,"i",6),B(),G(6,"h2"),Q(7),B(),Q(8," \xA0\xA0 "),G(9,"div",7),le(10,"i",8),G(11,"h5"),Q(12,"Dashboard"),B()()()(),G(13,"div",9)(14,"div",10)(15,"div")(16,"h5"),Q(17,"User"),B()(),Q(18," \xA0\xA0 "),G(19,"div",11)(20,"button",12)(21,"b"),Q(22,"U"),B()()()()()()(),Ee(23,BN,3,1,"ng-template",null,0,Cp)}if(r&2){let s=Gc(24);U("ngClass",n.getHeadClass()),z(5),U("ngClass",uy(4,VN,!n.isSidebarOpen,n.isSidebarOpen)),z(2),kt(n.selectedName),z(12),U("cdkMenuTriggerFor",s)}},dependencies:[Po,no,g0,cC,dC],styles:[".head[_ngcontent-%COMP%]{width:calc(100% - 5rem);margin-left:5rem;z-index:1;transition:all .5s ease;background:#f4f7fa;padding:1rem 1.5rem;position:fixed;top:0}.head[_ngcontent-%COMP%]   .head-content[_ngcontent-%COMP%]{background-color:#fff;border-radius:.625rem;box-shadow:0 0 10px #22292f1a;padding:.813rem 1.563rem;display:flex;align-items:center;justify-content:space-between}.head[_ngcontent-%COMP%]   .head-content[_ngcontent-%COMP%]   .head-content-left[_ngcontent-%COMP%]   .toggle[_ngcontent-%COMP%]{display:flex;align-items:center}.head[_ngcontent-%COMP%]   .head-content[_ngcontent-%COMP%]   .head-content-left[_ngcontent-%COMP%]   .toggle[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]{background-color:#fff;border:1px solid transparent}.head[_ngcontent-%COMP%]   .head-content[_ngcontent-%COMP%]   .head-content-left[_ngcontent-%COMP%]   .toggle[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]   .fas[_ngcontent-%COMP%]{color:#495057}.head[_ngcontent-%COMP%]   .head-content[_ngcontent-%COMP%]   .head-content-left[_ngcontent-%COMP%]   .toggle[_ngcontent-%COMP%]   .icon-label[_ngcontent-%COMP%]{display:flex;align-items:center;margin-left:10px;color:#495057}.head[_ngcontent-%COMP%]   .head-content[_ngcontent-%COMP%]   .head-content-left[_ngcontent-%COMP%]   .toggle[_ngcontent-%COMP%]   .icon-label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:5px;font-size:20px}.head[_ngcontent-%COMP%]   .head-content[_ngcontent-%COMP%]   .head-content-left[_ngcontent-%COMP%]   .toggle[_ngcontent-%COMP%]   .icon-label[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin-top:12px}.head[_ngcontent-%COMP%]   .head-content[_ngcontent-%COMP%]   .head-content-right[_ngcontent-%COMP%]{display:flex;align-items:center}.head[_ngcontent-%COMP%]   .head-content[_ngcontent-%COMP%]   .head-content-right[_ngcontent-%COMP%]   .head-user-avatar-container[_ngcontent-%COMP%]{margin-left:20px;display:flex;flex-direction:row;color:#495057}.head[_ngcontent-%COMP%]   .head-content[_ngcontent-%COMP%]   .head-content-right[_ngcontent-%COMP%]   .head-user-avatar-container[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin-top:12px}.head[_ngcontent-%COMP%]   .head-content[_ngcontent-%COMP%]   .head-content-right[_ngcontent-%COMP%]   .head-user-avatar-container[_ngcontent-%COMP%]   .head-user-avatar[_ngcontent-%COMP%]{position:relative}.head[_ngcontent-%COMP%]   .head-content[_ngcontent-%COMP%]   .head-content-right[_ngcontent-%COMP%]   .head-user-avatar-container[_ngcontent-%COMP%]   .head-user-avatar[_ngcontent-%COMP%]   .user-avatar[_ngcontent-%COMP%]{margin-bottom:-4px;width:50px;height:50px;border-radius:50px;box-shadow:0 0 15px #23232326;cursor:pointer;border:1px solid transparent;background-color:#495057;color:#fff;font-size:20px}.head-trimmed[_ngcontent-%COMP%]{width:calc(100% - 16.5625rem);margin-left:16.5625rem}.head-md-screen[_ngcontent-%COMP%]{width:calc(100% - 5rem);margin-left:5rem}@keyframes _ngcontent-%COMP%_fall{0%{transform:scaleY(0)}to{transform:scaleY(1)}}.overlay[_ngcontent-%COMP%]{background:#fff;margin-top:10px;box-shadow:0 1rem 3rem #0000002e;border-radius:.25rem}.overlay-fall[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fall .3s ease-in-out forwards;transform-origin:top-center}.overlay-user[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding:.5rem 0;list-style:none;width:12rem}.overlay-user[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:.35rem 1.5rem;font-size:14px;font-weight:400;color:#495057;cursor:pointer}.overlay-user[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{margin-right:.6rem}.overlay-user[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background:#eff2f3}"]});let t=e;return t})();var m0=(()=>{let e=class e{onToggleSidebar(o){this.screenWidth=o.screenWidth,this.isSidebarCollapsed=o.collapsed}toggleSidebar(){this.isSidebarCollapsed=!this.isSidebarCollapsed}constructor(){this.isSidebarCollapsed=!1,this.screenWidth=0}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Me({type:e,selectors:[["app-layout"]],decls:3,vars:4,consts:[[3,"onToggleSidebar","collapsed","screenWidth"],[3,"collapsed","screenWidth"]],template:function(r,n){r&1&&(le(0,"app-sidebar"),G(1,"app-header",0),ne("onToggleSidebar",function(a){return n.onToggleSidebar(a)}),B(),le(2,"app-body",1)),r&2&&(z(),U("collapsed",n.isSidebarCollapsed)("screenWidth",n.screenWidth),z(),U("collapsed",n.isSidebarCollapsed)("screenWidth",n.screenWidth))},dependencies:[zE,HE,f0]});let t=e;return t})();var UN=t=>({"dropdown-multiselect--active":t});function jN(t,e){if(t&1&&(G(0,"span"),Q(1),B()),t&2){let i=ie();z(),kt(i._placeholder)}}function qN(t,e){if(t&1){let i=Dt();G(0,"span",15)(1,"span",16)(2,"span"),Q(3),B(),G(4,"a",17),ne("click",function(r){let n=wt(i).$implicit,s=ie();return yt(s.onItemClick(r,n))}),Q(5,"x"),B()()()}if(t&2){let i=e.$implicit,o=e.index,r=ie();z(),U("hidden",o>r._settings.itemsShowLimit-1),z(2),at("",i.text,"\xA0")}}function KN(t,e){if(t&1&&(G(0,"span",18),Q(1),B()),t&2){let i=ie();z(),at("+",i.itemShowRemaining(),"")}}function $N(t,e){if(t&1){let i=Dt();G(0,"li",19),ne("click",function(){wt(i);let r=ie();return yt(r.toggleSelectAll())}),le(1,"input",20),G(2,"div"),Q(3),B()()}if(t&2){let i=ie();z(),U("checked",i.isAllItemsSelected())("disabled",i.disabled||i.isLimitSelectionReached()),z(2),kt(i.isAllItemsSelected()?i._settings.unSelectAllText:i._settings.selectAllText)}}function YN(t,e){if(t&1){let i=Dt();G(0,"li",21)(1,"input",22),dy("ngModelChange",function(r){wt(i);let n=ie();return ly(n.filter.text,r)||(n.filter.text=r),yt(r)}),ne("ngModelChange",function(r){wt(i);let n=ie();return yt(n.onFilterTextChange(r))}),B()()}if(t&2){let i=ie();z(),U("readOnly",i.disabled)("placeholder",i._settings.searchPlaceholderText),ay("ngModel",i.filter.text)}}function QN(t,e){if(t&1){let i=Dt();G(0,"li",23),ne("click",function(r){let n=wt(i).$implicit,s=ie();return yt(s.onItemClick(r,n))}),le(1,"input",24),G(2,"div"),Q(3),B()()}if(t&2){let i=e.$implicit,o=ie();z(),U("checked",o.isSelected(i))("disabled",o.disabled||o.isLimitSelectionReached()&&!o.isSelected(i)||i.isDisabled),gt("aria-label",i.text),z(2),kt(i.text)}}function XN(t,e){if(t&1&&(G(0,"li",25)(1,"h5"),Q(2),B()()),t&2){let i=ie();z(2),kt(i._settings.noFilteredDataAvailablePlaceholderText)}}function ZN(t,e){if(t&1&&(G(0,"li",26)(1,"h5"),Q(2),B()()),t&2){let i=ie();z(2),kt(i._settings.noDataAvailablePlaceholderText)}}var qo=class{id;text;isDisabled;constructor(e){(typeof e=="string"||typeof e=="number")&&(this.id=this.text=e,this.isDisabled=!1),typeof e=="object"&&(this.id=e.id,this.text=e.text,this.isDisabled=e.isDisabled)}},uC=(()=>{class t{transform(i,o){return!i||!o?i:i.filter(r=>this.applyFilter(r,o))}applyFilter(i,o){return typeof i.text=="string"&&typeof o.text=="string"?!(o.text&&i.text&&i.text.toLowerCase().indexOf(o.text.toLowerCase())===-1):!(o.text&&i.text&&i.text.toString().toLowerCase().indexOf(o.text.toString().toLowerCase())===-1)}static \u0275fac=function(o){return new(o||t)};static \u0275pipe=qw({name:"multiSelectFilter",type:t,pure:!1})}return t})(),JN=(()=>{class t{_elementRef;constructor(i){this._elementRef=i}clickOutside=new M;onClick(i,o){if(!o)return;this._elementRef.nativeElement.contains(o)||this.clickOutside.emit(i)}static \u0275fac=function(o){return new(o||t)(W(Te))};static \u0275dir=ye({type:t,selectors:[["","clickOutside",""]],hostBindings:function(o,r){o&1&&ne("click",function(s){return r.onClick(s,s.target)},!1,ry)},outputs:{clickOutside:"clickOutside"}})}return t})(),ez={provide:As,useExisting:sr(()=>hC),multi:!0},v0=()=>{},hC=(()=>{class t{listFilterPipe;cdr;_settings;_data=[];selectedItems=[];isDropdownOpen=!0;_placeholder="Select";_sourceDataType=null;_sourceDataFields=[];filter=new qo(this.data);defaultSettings={singleSelection:!1,idField:"id",textField:"text",disabledField:"isDisabled",enableCheckAll:!0,selectAllText:"Select All",unSelectAllText:"UnSelect All",allowSearchFilter:!1,limitSelection:-1,clearSearchFilter:!0,maxHeight:197,itemsShowLimit:999999999999,searchPlaceholderText:"Search",noDataAvailablePlaceholderText:"No data available",noFilteredDataAvailablePlaceholderText:"No filtered data available",closeDropDownOnSelection:!1,showSelectedItemsAtTop:!1,defaultOpen:!1,allowRemoteDataSearch:!1};set placeholder(i){i?this._placeholder=i:this._placeholder="Select"}disabled=!1;set settings(i){i?this._settings=Object.assign(this.defaultSettings,i):this._settings=Object.assign(this.defaultSettings)}set data(i){if(!i)this._data=[];else{let o=i[0];this._sourceDataType=typeof o,this._sourceDataFields=this.getFields(o),this._data=i.map(r=>typeof r=="string"||typeof r=="number"?new qo(r):new qo({id:r[this._settings.idField],text:r[this._settings.textField],isDisabled:r[this._settings.disabledField]}))}}onFilterChange=new M;onDropDownClose=new M;onSelect=new M;onDeSelect=new M;onSelectAll=new M;onDeSelectAll=new M;onTouchedCallback=v0;onChangeCallback=v0;onFilterTextChange(i){this.onFilterChange.emit(i)}constructor(i,o){this.listFilterPipe=i,this.cdr=o}onItemClick(i,o){if(this.disabled||o.isDisabled)return!1;let r=this.isSelected(o),n=this._settings.limitSelection===-1||this._settings.limitSelection>0&&this.selectedItems.length<this._settings.limitSelection;r?this.removeSelected(o):n&&this.addSelected(o),this._settings.singleSelection&&this._settings.closeDropDownOnSelection&&this.closeDropdown()}writeValue(i){if(i!=null&&i.length>0)if(this._settings.singleSelection)try{if(i.length>=1){let o=i[0];this.selectedItems=[typeof o=="string"||typeof o=="number"?new qo(o):new qo({id:o[this._settings.idField],text:o[this._settings.textField],isDisabled:o[this._settings.disabledField]})]}}catch{}else{let o=i.map(r=>typeof r=="string"||typeof r=="number"?new qo(r):new qo({id:r[this._settings.idField],text:r[this._settings.textField],isDisabled:r[this._settings.disabledField]}));this._settings.limitSelection>0?this.selectedItems=o.splice(0,this._settings.limitSelection):this.selectedItems=o}else this.selectedItems=[];this.onChangeCallback(i),this.cdr.markForCheck()}registerOnChange(i){this.onChangeCallback=i}registerOnTouched(i){this.onTouchedCallback=i}onTouched(){this.onTouchedCallback()}trackByFn(i,o){return o.id}isSelected(i){let o=!1;return this.selectedItems.forEach(r=>{i.id===r.id&&(o=!0)}),o}isLimitSelectionReached(){return this._settings.limitSelection===this.selectedItems.length}isAllItemsSelected(){let i=this.listFilterPipe.transform(this._data,this.filter),o=i.filter(r=>r.isDisabled).length;return(!this.data||this.data.length===0)&&this._settings.allowRemoteDataSearch?!1:i.length===this.selectedItems.length+o}showButton(){return this._settings.singleSelection?!1:!(this._settings.limitSelection>0)}itemShowRemaining(){return this.selectedItems.length-this._settings.itemsShowLimit}addSelected(i){this._settings.singleSelection?(this.selectedItems=[],this.selectedItems.push(i)):this.selectedItems.push(i),this.onChangeCallback(this.emittedValue(this.selectedItems)),this.onSelect.emit(this.emittedValue(i))}removeSelected(i){this.selectedItems.forEach(o=>{i.id===o.id&&this.selectedItems.splice(this.selectedItems.indexOf(o),1)}),this.onChangeCallback(this.emittedValue(this.selectedItems)),this.onDeSelect.emit(this.emittedValue(i))}emittedValue(i){let o=[];if(Array.isArray(i))i.map(r=>{o.push(this.objectify(r))});else if(i)return this.objectify(i);return o}objectify(i){if(this._sourceDataType==="object"){let o={};return o[this._settings.idField]=i.id,o[this._settings.textField]=i.text,this._sourceDataFields.includes(this._settings.disabledField)&&(o[this._settings.disabledField]=i.isDisabled),o}return this._sourceDataType==="number"?Number(i.id):i.text}toggleDropdown(i){i.preventDefault(),!(this.disabled&&this._settings.singleSelection)&&(this._settings.defaultOpen=!this._settings.defaultOpen,this._settings.defaultOpen||this.onDropDownClose.emit())}closeDropdown(){this._settings.defaultOpen=!1,this._settings.clearSearchFilter&&(this.filter.text=""),this.onDropDownClose.emit()}toggleSelectAll(){if(this.disabled)return!1;this.isAllItemsSelected()?(this.selectedItems=[],this.onDeSelectAll.emit(this.emittedValue(this.selectedItems))):(this.selectedItems=this.listFilterPipe.transform(this._data,this.filter).filter(i=>!i.isDisabled).slice(),this.onSelectAll.emit(this.emittedValue(this.selectedItems))),this.onChangeCallback(this.emittedValue(this.selectedItems))}getFields(i){let o=[];if(typeof i!="object")return o;for(let r in i)o.push(r);return o}static \u0275fac=function(o){return new(o||t)(W(uC),W(Zt))};static \u0275cmp=Me({type:t,selectors:[["ng-multiselect-dropdown"]],hostBindings:function(o,r){o&1&&ne("blur",function(){return r.onTouched()})},inputs:{placeholder:"placeholder",disabled:"disabled",settings:"settings",data:"data"},outputs:{onFilterChange:"onFilterChange",onDropDownClose:"onDropDownClose",onSelect:"onSelect",onDeSelect:"onDeSelect",onSelectAll:"onSelectAll",onDeSelectAll:"onDeSelectAll"},features:[lt([ez])],decls:18,vars:23,consts:[["tabindex","0",1,"multiselect-dropdown",3,"blur","clickOutside"],["tabindex","-1",1,"dropdown-btn",3,"click"],[4,"ngIf"],["class","selected-item-container",4,"ngFor","ngForOf","ngForTrackBy"],[2,"float","right !important","padding-right","4px",3,"ngClass"],["style","padding-right: 15px;",4,"ngIf"],[1,"dropdown-multiselect__caret"],[1,"dropdown-list",3,"hidden"],[1,"item1"],["class","multiselect-item-checkbox","style","border-bottom: 1px solid #ccc;padding:10px",3,"click",4,"ngIf"],["class","filter-textbox",4,"ngIf"],[1,"item2"],["class","multiselect-item-checkbox",3,"click",4,"ngFor","ngForOf"],["class","no-filtered-data",4,"ngIf"],["class","no-data",4,"ngIf"],[1,"selected-item-container"],[1,"selected-item",3,"hidden"],[2,"padding-left","2px","color","white",3,"click"],[2,"padding-right","15px"],[1,"multiselect-item-checkbox",2,"border-bottom","1px solid #ccc","padding","10px",3,"click"],["type","checkbox","aria-label","multiselect-select-all",3,"checked","disabled"],[1,"filter-textbox"],["type","text","aria-label","multiselect-search",3,"ngModelChange","readOnly","placeholder","ngModel"],[1,"multiselect-item-checkbox",3,"click"],["type","checkbox",3,"checked","disabled"],[1,"no-filtered-data"],[1,"no-data"]],template:function(o,r){o&1&&(G(0,"div",0),ne("blur",function(){return r.onTouched()})("clickOutside",function(){return r.closeDropdown()}),G(1,"div")(2,"span",1),ne("click",function(s){return r.toggleDropdown(s)}),Ee(3,jN,2,1,"span",2)(4,qN,6,2,"span",3),G(5,"span",4),Ee(6,KN,2,1,"span",5),le(7,"span",6),B()()(),G(8,"div",7)(9,"ul",8),Ee(10,$N,4,3,"li",9)(11,YN,2,3,"li",10),B(),G(12,"ul",11),Ee(13,QN,4,4,"li",12),_s(14,"multiSelectFilter"),Ee(15,XN,3,1,"li",13),_s(16,"multiSelectFilter"),Ee(17,ZN,3,1,"li",14),B()()()),o&2&&(z(),fi("disabled",r.disabled),z(2),U("ngIf",r.selectedItems.length==0),z(),U("ngForOf",r.selectedItems)("ngForTrackBy",r.trackByFn),z(),U("ngClass",Vc(21,UN,r._settings.defaultOpen)),z(),U("ngIf",r.itemShowRemaining()>0),z(2),U("hidden",!r._settings.defaultOpen),z(2),U("ngIf",(r._data.length>0||r._settings.allowRemoteDataSearch)&&!r._settings.singleSelection&&r._settings.enableCheckAll&&r._settings.limitSelection===-1),z(),U("ngIf",(r._data.length>0||r._settings.allowRemoteDataSearch)&&r._settings.allowSearchFilter),z(),cr("max-height",r._settings.maxHeight+"px"),z(),U("ngForOf",vp(14,15,r._data,r.filter)),z(2),U("ngIf",r._data.length!=0&&vp(16,18,r._data,r.filter).length==0&&!r._settings.allowRemoteDataSearch),z(2),U("ngIf",r._data.length==0&&!r._settings.allowRemoteDataSearch))},dependencies:[Po,no,Fo,Is,fu,Kp,JN,uC],styles:['.multiselect-dropdown[_ngcontent-%COMP%]{position:relative;width:100%;font-size:inherit;font-family:inherit}.multiselect-dropdown[_ngcontent-%COMP%]   .dropdown-btn[_ngcontent-%COMP%]{display:inline-block;border:1px solid #adadad;width:100%;padding:6px 12px;margin-bottom:0;font-weight:400;line-height:1.52857143;text-align:left;vertical-align:middle;cursor:pointer;background-image:none;border-radius:4px}.multiselect-dropdown[_ngcontent-%COMP%]   .dropdown-btn[_ngcontent-%COMP%]   .selected-item-container[_ngcontent-%COMP%]{display:flex;float:left}.multiselect-dropdown[_ngcontent-%COMP%]   .dropdown-btn[_ngcontent-%COMP%]   .selected-item-container[_ngcontent-%COMP%]   .selected-item[_ngcontent-%COMP%]{border:1px solid #337ab7;margin-right:4px;background:#337ab7;padding:0 5px;color:#fff;border-radius:2px;float:left;max-width:100px}.multiselect-dropdown[_ngcontent-%COMP%]   .dropdown-btn[_ngcontent-%COMP%]   .selected-item-container[_ngcontent-%COMP%]   .selected-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis}.multiselect-dropdown[_ngcontent-%COMP%]   .dropdown-btn[_ngcontent-%COMP%]   .selected-item-container[_ngcontent-%COMP%]   .selected-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}.multiselect-dropdown[_ngcontent-%COMP%]   .dropdown-btn[_ngcontent-%COMP%]   .selected-item[_ngcontent-%COMP%]:hover{box-shadow:1px 1px #959595}.multiselect-dropdown[_ngcontent-%COMP%]   .dropdown-btn[_ngcontent-%COMP%]   .dropdown-multiselect__caret[_ngcontent-%COMP%]{line-height:16px;display:block;position:absolute;box-sizing:border-box;width:40px;height:38px;right:1px;top:0;padding:4px 8px;margin:0;text-decoration:none;text-align:center;cursor:pointer;transition:transform .2s ease}.multiselect-dropdown[_ngcontent-%COMP%]   .dropdown-btn[_ngcontent-%COMP%]   .dropdown-multiselect__caret[_ngcontent-%COMP%]:before{position:relative;right:0;top:65%;color:#999;margin-top:4px;border-style:solid;border-width:8px 8px 0 8px;border-color:#999999 transparent;content:""}.multiselect-dropdown[_ngcontent-%COMP%]   .dropdown-btn[_ngcontent-%COMP%]   .dropdown-multiselect--active[_ngcontent-%COMP%]   .dropdown-multiselect__caret[_ngcontent-%COMP%]{transform:rotate(180deg)}.multiselect-dropdown[_ngcontent-%COMP%]   .disabled[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{background-color:#eceeef}.dropdown-list[_ngcontent-%COMP%]{position:absolute;padding-top:6px;width:100%;z-index:9999;border:1px solid #ccc;border-radius:3px;background:#fff;margin-top:10px;box-shadow:0 1px 5px #959595}.dropdown-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding:0;list-style:none;overflow:auto;margin:0}.dropdown-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:6px 10px;cursor:pointer;text-align:left}.dropdown-list[_ngcontent-%COMP%]   .filter-textbox[_ngcontent-%COMP%]{border-bottom:1px solid #ccc;position:relative;padding:10px}.dropdown-list[_ngcontent-%COMP%]   .filter-textbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:0px;width:100%;padding:0 0 0 26px}.dropdown-list[_ngcontent-%COMP%]   .filter-textbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none}.multiselect-item-checkbox[_ngcontent-%COMP%]:hover{background-color:#e4e3e3}.multiselect-item-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.multiselect-item-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:focus + div[_ngcontent-%COMP%]:before, .multiselect-item-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:hover + div[_ngcontent-%COMP%]:before{border-color:#337ab7;background-color:#f2f2f2}.multiselect-item-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:active + div[_ngcontent-%COMP%]:before{transition-duration:0s}.multiselect-item-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%] + div[_ngcontent-%COMP%]{position:relative;padding-left:2em;vertical-align:middle;-webkit-user-select:none;user-select:none;cursor:pointer;margin:0;color:#000}.multiselect-item-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%] + div[_ngcontent-%COMP%]:before{box-sizing:content-box;content:"";color:#337ab7;position:absolute;top:50%;left:0;width:14px;height:14px;margin-top:-9px;border:2px solid #337ab7;text-align:center;transition:all .4s ease}.multiselect-item-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%] + div[_ngcontent-%COMP%]:after{box-sizing:content-box;content:"";background-color:#337ab7;position:absolute;top:50%;left:4px;width:10px;height:10px;margin-top:-5px;transform:scale(0);transform-origin:50%;transition:transform .2s ease-out}.multiselect-item-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:disabled + div[_ngcontent-%COMP%]:before{border-color:#ccc}.multiselect-item-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:disabled:focus + div[_ngcontent-%COMP%]:before   .multiselect-item-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:disabled:hover + div[_ngcontent-%COMP%]:before{background-color:inherit}.multiselect-item-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:disabled:checked + div[_ngcontent-%COMP%]:before{background-color:#ccc}.multiselect-item-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%] + div[_ngcontent-%COMP%]:after{background-color:transparent;top:50%;left:4px;width:8px;height:3px;margin-top:-4px;border-style:solid;border-color:#fff;border-width:0 0 3px 3px;border-image:none;transform:rotate(-45deg) scale(0)}.multiselect-item-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + div[_ngcontent-%COMP%]:after{content:"";transform:rotate(-45deg) scale(1);transition:transform .2s ease-out}.multiselect-item-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + div[_ngcontent-%COMP%]:before{animation:_ngcontent-%COMP%_borderscale .2s ease-in;background:#337ab7}.multiselect-item-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + div[_ngcontent-%COMP%]:after{transform:rotate(-45deg) scale(1)}@keyframes _ngcontent-%COMP%_borderscale{50%{box-shadow:0 0 0 2px #337ab7}}'],changeDetection:0})}return t})(),C0=(()=>{class t{static forRoot(){return{ngModule:t}}static \u0275fac=function(o){return new(o||t)};static \u0275mod=re({type:t});static \u0275inj=oe({providers:[uC],imports:[gr,wu]})}return t})();function iz(t,e){t&1&&(G(0,"span"),Q(1),B()),t&2&&(z(),kt("user_name_required"))}function oz(t,e){if(t&1&&(G(0,"div",24),Ee(1,iz,2,1,"span",25),B()),t&2){let i,o=ie();z(),U("ngIf",(i=o.formQuote.get("user_name"))==null||i.errors==null?null:i.errors.required)}}function rz(t,e){t&1&&(G(0,"div",24)(1,"span"),Q(2),_s(3,"translate"),B()()),t&2&&(z(2),at("",mp(3,1,"workout_type_required")," "))}function nz(t,e){t&1&&(G(0,"span"),Q(1),_s(2,"translate"),B()),t&2&&(z(),kt(mp(2,1,"workout_minutes_required")))}function sz(t,e){if(t&1&&(G(0,"div",24),Ee(1,nz,3,3,"span",25),B()),t&2){let i,o=ie();z(),U("ngIf",(i=o.formQuote.get("workout_minutes"))==null||i.errors==null?null:i.errors.required)}}var w0=(()=>{let e=class e{constructor(o,r,n){this.formBuilder=o,this.router=r,this.workoutService=n,this.pageTitle="Add",this.isVisible=!0,this.isDisabled=!1,this.dropdownList1=[],this.dropdownSettings1={}}ngOnInit(){this.initializeForm(),this.dropdownList1=[{item_id:1,item_text:"Running"},{item_id:2,item_text:"Swimming"},{item_id:3,item_text:"Cycling"},{item_id:4,item_text:"Yoga"}],this.dropdownSettings1={idField:"item_id",textField:"item_text",itemsShowLimit:4}}initializeForm(){this.formWorkout=this.formBuilder.group({user_name:["",[cn.required]],workout_minutes:["",[cn.required,cn.pattern(/^\d+$/)]],workout_type:[[],[cn.required]]})}onGridReady(o){this.gridApi=o.api,this.gridColumnApi=o.columnApi}saveConfigType(){if(this.formWorkout.valid){let o=this.formWorkout.value,r=Array.isArray(o.workout_type)?o.workout_type.join(", "):o.workout_type,n={user_name:o.user_name,workout_type:r,workout_number:o.workout_type.length,workout_minutes:o.workout_minutes};console.log("New Data to Save:",n);let s=this.workoutService.getData()||[];console.log("Existing Data from Storage:",s);let a=s.findIndex(l=>l.user_name===n.user_name);a>-1?s[a]=n:s.push(n),console.log("Data After Modification:",s),this.workoutService.saveData(s),this.router.navigate(["/workout-list"])}else console.log("Form is invalid")}onCancelClick(){this.router.navigate(["/workout-list"])}};e.\u0275fac=function(r){return new(r||e)(W(Ib),W(Wt),W(Ma))},e.\u0275cmp=Me({type:e,selectors:[["app-manage-workout"]],decls:44,vars:8,consts:[[3,"ngSubmit","formGroup"],[1,"manage-section","ats-table-css"],[1,"container-fluid"],[1,"myworkout"],[1,"row"],[1,"col-md-6","col-lg-6"],[1,"inneraddedit-title"],[1,"back-button","button-right"],["routerLink","/workout-list"],[1,"fa","fa-long-arrow-alt-left"],[1,"col-md-4","col-lg-3"],[1,"field-sec"],["for","user_name"],[1,"text-danger"],["type","text","formControlName","user_name","placeholder","User Name",1,"form-control"],["class","errormsg",4,"ngIf"],["for","workout_type"],["formControlName","workout_type",3,"placeholder","settings","data"],["for","workout_minutes"],["type","number","formControlName","workout_minutes","placeholder","Workout Minutes",1,"form-control"],[1,"col-md-12","col-lg-12"],[1,"addcancel-buttons"],["type","submit",1,"add-button"],[1,"secondary-button",3,"click"],[1,"errormsg"],[4,"ngIf"]],template:function(r,n){if(r&1&&(G(0,"form",0),ne("ngSubmit",function(){return n.saveConfigType()}),G(1,"section",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h6"),Q(8),B()()(),G(9,"div",5)(10,"div",7)(11,"a",8),le(12,"i",9),B()()(),G(13,"div",10)(14,"div",11)(15,"label",12),Q(16,"User Name"),G(17,"span",13),Q(18,"*"),B()(),le(19,"input",14),Ee(20,oz,2,1,"div",15),B()(),G(21,"div",10)(22,"div",11)(23,"label",16),Q(24,"Workout Type"),G(25,"span",13),Q(26,"*"),B()(),le(27,"ng-multiselect-dropdown",17),Ee(28,rz,4,3,"div",15),B()(),G(29,"div",10)(30,"div",11)(31,"label",18),Q(32,"Workout Minutes"),G(33,"span",13),Q(34,"*"),B()(),le(35,"input",19),Ee(36,sz,2,1,"div",15),B()(),G(37,"div",20)(38,"div",21)(39,"button",22),Q(40,"Add Workout"),B(),Q(41," \xA0 "),G(42,"button",23),ne("click",function(){return n.onCancelClick()}),Q(43,"Cancel"),B()()()()()()()()),r&2){let s,a,l;U("formGroup",n.formWorkout),z(8),at("",n.pageTitle," Workout"),z(12),U("ngIf",((s=n.formWorkout.get("user_name"))==null?null:s.invalid)&&(((s=n.formWorkout.get("user_name"))==null?null:s.dirty)||((s=n.formWorkout.get("user_name"))==null?null:s.touched))),z(7),U("placeholder","Select Workout")("settings",n.dropdownSettings1)("data",n.dropdownList1),z(),U("ngIf",((a=n.formWorkout.get("workout_type"))==null?null:a.invalid)&&(((a=n.formWorkout.get("workout_type"))==null?null:a.dirty)||((a=n.formWorkout.get("workout_type"))==null?null:a.touched))),z(8),U("ngIf",((l=n.formWorkout.get("workout_minutes"))==null?null:l.invalid)&&(((l=n.formWorkout.get("workout_minutes"))==null?null:l.dirty)||((l=n.formWorkout.get("workout_minutes"))==null?null:l.touched)))}},dependencies:[Fo,Mb,Is,$p,fu,bb,br,Yp,Qp,hC],styles:[".manage-section[_ngcontent-%COMP%]{margin-top:20px}.field-sec[_ngcontent-%COMP%]{margin-bottom:20px}.errormsg[_ngcontent-%COMP%]{color:red;font-size:1rem}.inneraddedit-title[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-size:1.2rem;margin-bottom:20px}.back-button[_ngcontent-%COMP%]{text-align:right}.container-fluid[_ngcontent-%COMP%]{padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}@media (min-width: 576px){.container[_ngcontent-%COMP%]{max-width:540px}}@media (min-width: 768px){.container[_ngcontent-%COMP%]{max-width:720px}}@media (min-width: 992px){.container[_ngcontent-%COMP%]{max-width:960px}}@media (min-width: 1200px){.container[_ngcontent-%COMP%]{max-width:1140px}}.manage-section[_ngcontent-%COMP%]{position:relative;top:0;width:100%;transition:all .5s ease;z-index:2;background:#fff;border-radius:5px;margin:10px 0;padding:10px 0}.back-button[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{background-color:#263238;color:#fff!important;padding:9px 15px;display:inline-block;border-radius:5px;line-height:1.2;-o-transition:all .6s ease-in-out;-webkit-transition:all .6s ease-in-out;transition:all .6s ease-in-out;border:1px solid #263238}.back-button[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#ecf6fe;color:#263238!important;border:1px solid #263238}.inneraddedit-title[_ngcontent-%COMP%]{margin-top:30px;color:#212121}.inneraddedit-title[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-size:16px;font-weight:700;text-transform:uppercase;margin-top:-15px}.field-sec[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:14px;color:#274964}.field-sec[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:12px;font-weight:700;color:#212121;margin-bottom:0;text-transform:uppercase}.field-sec[_ngcontent-%COMP%]{margin-top:15px}.addcancel-buttons[_ngcontent-%COMP%]{margin-top:30px}.field-sec[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]{border:1px solid #dcdcdc;border-radius:5px}.field-sec[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none}.add-button[_ngcontent-%COMP%], .secondary-button[_ngcontent-%COMP%]{font-size:14px;background-color:#263238;padding:10px 30px;display:inline-block;border-radius:5px;color:#fff;border:1px solid #263238;line-height:normal;-o-transition:all .6s ease-in-out;-webkit-transition:all .6s ease-in-out;transition:all .6s ease-in-out;cursor:pointer;font-weight:500}.add-button[_ngcontent-%COMP%]:hover, .secondary-button[_ngcontent-%COMP%]:hover{background-color:#ecf6fe;color:#263238!important;border:1px solid #263238;text-decoration:none;background-position:100% 0;-o-transition:all .6s ease-in-out;-webkit-transition:all .6s ease-in-out;transition:all .6s ease-in-out;cursor:pointer;font-weight:500}.addcancel-buttons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin-right:10px}.addcancel-buttons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:last-child{margin-right:0}"]});let t=e;return t})();function ac(t){return t+.5|0}var Vr=(t,e,i)=>Math.max(Math.min(t,i),e);function nc(t){return Vr(ac(t*2.55),0,255)}function Hr(t){return Vr(ac(t*255),0,255)}function Ko(t){return Vr(ac(t/2.55)/100,0,1)}function y0(t){return Vr(ac(t*100),0,100)}var Li={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},pC=[..."0123456789ABCDEF"],az=t=>pC[t&15],lz=t=>pC[(t&240)>>4]+pC[t&15],eg=t=>(t&240)>>4===(t&15),dz=t=>eg(t.r)&&eg(t.g)&&eg(t.b)&&eg(t.a);function cz(t){var e=t.length,i;return t[0]==="#"&&(e===4||e===5?i={r:255&Li[t[1]]*17,g:255&Li[t[2]]*17,b:255&Li[t[3]]*17,a:e===5?Li[t[4]]*17:255}:(e===7||e===9)&&(i={r:Li[t[1]]<<4|Li[t[2]],g:Li[t[3]]<<4|Li[t[4]],b:Li[t[5]]<<4|Li[t[6]],a:e===9?Li[t[7]]<<4|Li[t[8]]:255})),i}var uz=(t,e)=>t<255?e(t):"";function hz(t){var e=dz(t)?az:lz;return t?"#"+e(t.r)+e(t.g)+e(t.b)+uz(t.a,e):void 0}var gz=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function _0(t,e,i){let o=e*Math.min(i,1-i),r=(n,s=(n+t/30)%12)=>i-o*Math.max(Math.min(s-3,9-s,1),-1);return[r(0),r(8),r(4)]}function pz(t,e,i){let o=(r,n=(r+t/60)%6)=>i-i*e*Math.max(Math.min(n,4-n,1),0);return[o(5),o(3),o(1)]}function fz(t,e,i){let o=_0(t,1,.5),r;for(e+i>1&&(r=1/(e+i),e*=r,i*=r),r=0;r<3;r++)o[r]*=1-e-i,o[r]+=e;return o}function mz(t,e,i,o,r){return t===r?(e-i)/o+(e<i?6:0):e===r?(i-t)/o+2:(t-e)/o+4}function fC(t){let i=t.r/255,o=t.g/255,r=t.b/255,n=Math.max(i,o,r),s=Math.min(i,o,r),a=(n+s)/2,l,d,c;return n!==s&&(c=n-s,d=a>.5?c/(2-n-s):c/(n+s),l=mz(i,o,r,c,n),l=l*60+.5),[l|0,d||0,a]}function mC(t,e,i,o){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,i,o)).map(Hr)}function vC(t,e,i){return mC(_0,t,e,i)}function vz(t,e,i){return mC(fz,t,e,i)}function Cz(t,e,i){return mC(pz,t,e,i)}function E0(t){return(t%360+360)%360}function wz(t){let e=gz.exec(t),i=255,o;if(!e)return;e[5]!==o&&(i=e[6]?nc(+e[5]):Hr(+e[5]));let r=E0(+e[2]),n=+e[3]/100,s=+e[4]/100;return e[1]==="hwb"?o=vz(r,n,s):e[1]==="hsv"?o=Cz(r,n,s):o=vC(r,n,s),{r:o[0],g:o[1],b:o[2],a:i}}function yz(t,e){var i=fC(t);i[0]=E0(i[0]+e),i=vC(i),t.r=i[0],t.g=i[1],t.b=i[2]}function bz(t){if(!t)return;let e=fC(t),i=e[0],o=y0(e[1]),r=y0(e[2]);return t.a<255?`hsla(${i}, ${o}%, ${r}%, ${Ko(t.a)})`:`hsl(${i}, ${o}%, ${r}%)`}var b0={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},S0={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Sz(){let t={},e=Object.keys(S0),i=Object.keys(b0),o,r,n,s,a;for(o=0;o<e.length;o++){for(s=a=e[o],r=0;r<i.length;r++)n=i[r],a=a.replace(n,b0[n]);n=parseInt(S0[s],16),t[a]=[n>>16&255,n>>8&255,n&255]}return t}var tg;function xz(t){tg||(tg=Sz(),tg.transparent=[0,0,0,0]);let e=tg[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}var _z=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Ez(t){let e=_z.exec(t),i=255,o,r,n;if(e){if(e[7]!==o){let s=+e[7];i=e[8]?nc(s):Vr(s*255,0,255)}return o=+e[1],r=+e[3],n=+e[5],o=255&(e[2]?nc(o):Vr(o,0,255)),r=255&(e[4]?nc(r):Vr(r,0,255)),n=255&(e[6]?nc(n):Vr(n,0,255)),{r:o,g:r,b:n,a:i}}}function Dz(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Ko(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}var gC=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Oa=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function Rz(t,e,i){let o=Oa(Ko(t.r)),r=Oa(Ko(t.g)),n=Oa(Ko(t.b));return{r:Hr(gC(o+i*(Oa(Ko(e.r))-o))),g:Hr(gC(r+i*(Oa(Ko(e.g))-r))),b:Hr(gC(n+i*(Oa(Ko(e.b))-n))),a:t.a+i*(e.a-t.a)}}function ig(t,e,i){if(t){let o=fC(t);o[e]=Math.max(0,Math.min(o[e]+o[e]*i,e===0?360:1)),o=vC(o),t.r=o[0],t.g=o[1],t.b=o[2]}}function D0(t,e){return t&&Object.assign(e||{},t)}function x0(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Hr(t[3]))):(e=D0(t,{r:0,g:0,b:0,a:1}),e.a=Hr(e.a)),e}function Mz(t){return t.charAt(0)==="r"?Ez(t):wz(t)}var sc=class t{constructor(e){if(e instanceof t)return e;let i=typeof e,o;i==="object"?o=x0(e):i==="string"&&(o=cz(e)||xz(e)||Mz(e)),this._rgb=o,this._valid=!!o}get valid(){return this._valid}get rgb(){var e=D0(this._rgb);return e&&(e.a=Ko(e.a)),e}set rgb(e){this._rgb=x0(e)}rgbString(){return this._valid?Dz(this._rgb):void 0}hexString(){return this._valid?hz(this._rgb):void 0}hslString(){return this._valid?bz(this._rgb):void 0}mix(e,i){if(e){let o=this.rgb,r=e.rgb,n,s=i===n?.5:i,a=2*s-1,l=o.a-r.a,d=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;n=1-d,o.r=255&d*o.r+n*r.r+.5,o.g=255&d*o.g+n*r.g+.5,o.b=255&d*o.b+n*r.b+.5,o.a=s*o.a+(1-s)*r.a,this.rgb=o}return this}interpolate(e,i){return e&&(this._rgb=Rz(this._rgb,e._rgb,i)),this}clone(){return new t(this.rgb)}alpha(e){return this._rgb.a=Hr(e),this}clearer(e){let i=this._rgb;return i.a*=1-e,this}greyscale(){let e=this._rgb,i=ac(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=i,this}opaquer(e){let i=this._rgb;return i.a*=1+e,this}negate(){let e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return ig(this._rgb,2,e),this}darken(e){return ig(this._rgb,2,-e),this}saturate(e){return ig(this._rgb,1,e),this}desaturate(e){return ig(this._rgb,1,-e),this}rotate(e){return yz(this._rgb,e),this}};function So(){}var N0=(()=>{let t=0;return()=>t++})();function xe(t){return t===null||typeof t>"u"}function We(t){if(Array.isArray&&Array.isArray(t))return!0;let e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Ce(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Ze(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function ui(t,e){return Ze(t)?t:e}function ue(t,e){return typeof t>"u"?e:t}var z0=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,bC=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Ge(t,e,i){if(t&&typeof t.call=="function")return t.apply(i,e)}function Le(t,e,i,o){let r,n,s;if(We(t))if(n=t.length,o)for(r=n-1;r>=0;r--)e.call(i,t[r],r);else for(r=0;r<n;r++)e.call(i,t[r],r);else if(Ce(t))for(s=Object.keys(t),n=s.length,r=0;r<n;r++)e.call(i,t[s[r]],s[r])}function cc(t,e){let i,o,r,n;if(!t||!e||t.length!==e.length)return!1;for(i=0,o=t.length;i<o;++i)if(r=t[i],n=e[i],r.datasetIndex!==n.datasetIndex||r.index!==n.index)return!1;return!0}function sg(t){if(We(t))return t.map(sg);if(Ce(t)){let e=Object.create(null),i=Object.keys(t),o=i.length,r=0;for(;r<o;++r)e[i[r]]=sg(t[i[r]]);return e}return t}function G0(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function Tz(t,e,i,o){if(!G0(t))return;let r=e[t],n=i[t];Ce(r)&&Ce(n)?La(r,n,o):e[t]=sg(n)}function La(t,e,i){let o=We(e)?e:[e],r=o.length;if(!Ce(t))return t;i=i||{};let n=i.merger||Tz,s;for(let a=0;a<r;++a){if(s=o[a],!Ce(s))continue;let l=Object.keys(s);for(let d=0,c=l.length;d<c;++d)n(l[d],t,s,i)}return t}function za(t,e){return La(t,e,{merger:Az})}function Az(t,e,i){if(!G0(t))return;let o=e[t],r=i[t];Ce(o)&&Ce(r)?za(o,r):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=sg(r))}var R0={"":t=>t,x:t=>t.x,y:t=>t.y};function Iz(t){let e=t.split("."),i=[],o="";for(let r of e)o+=r,o.endsWith("\\")?o=o.slice(0,-1)+".":(i.push(o),o="");return i}function Pz(t){let e=Iz(t);return i=>{for(let o of e){if(o==="")break;i=i&&i[o]}return i}}function Qo(t,e){return(R0[e]||(R0[e]=Pz(e)))(t)}function cg(t){return t.charAt(0).toUpperCase()+t.slice(1)}var Ga=t=>typeof t<"u",$o=t=>typeof t=="function",SC=(t,e)=>{if(t.size!==e.size)return!1;for(let i of t)if(!e.has(i))return!1;return!0};function V0(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}var Ue=Math.PI,je=2*Ue,Fz=je+Ue,ag=Number.POSITIVE_INFINITY,Oz=Ue/180,et=Ue/2,is=Ue/4,M0=Ue*2/3,Yo=Math.log10,Ji=Math.sign;function Va(t,e,i){return Math.abs(t-e)<i}function xC(t){let e=Math.round(t);t=Va(t,e,t/1e3)?e:t;let i=Math.pow(10,Math.floor(Yo(t))),o=t/i;return(o<=1?1:o<=2?2:o<=5?5:10)*i}function H0(t){let e=[],i=Math.sqrt(t),o;for(o=1;o<i;o++)t%o===0&&(e.push(o),e.push(t/o));return i===(i|0)&&e.push(i),e.sort((r,n)=>r-n).pop(),e}function ns(t){return!isNaN(parseFloat(t))&&isFinite(t)}function B0(t,e){let i=Math.round(t);return i-e<=t&&i+e>=t}function _C(t,e,i){let o,r,n;for(o=0,r=t.length;o<r;o++)n=t[o][i],isNaN(n)||(e.min=Math.min(e.min,n),e.max=Math.max(e.max,n))}function Ni(t){return t*(Ue/180)}function ug(t){return t*(180/Ue)}function EC(t){if(!Ze(t))return;let e=1,i=0;for(;Math.round(t*e)/e!==t;)e*=10,i++;return i}function DC(t,e){let i=e.x-t.x,o=e.y-t.y,r=Math.sqrt(i*i+o*o),n=Math.atan2(o,i);return n<-.5*Ue&&(n+=je),{angle:n,distance:r}}function lg(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function kz(t,e){return(t-e+Fz)%je-Ue}function ci(t){return(t%je+je)%je}function Ha(t,e,i,o){let r=ci(t),n=ci(e),s=ci(i),a=ci(n-r),l=ci(s-r),d=ci(r-n),c=ci(r-s);return r===n||r===s||o&&n===s||a>l&&d<c}function mt(t,e,i){return Math.max(e,Math.min(i,t))}function W0(t){return mt(t,-32768,32767)}function xo(t,e,i,o=1e-6){return t>=Math.min(e,i)-o&&t<=Math.max(e,i)+o}function hg(t,e,i){i=i||(s=>t[s]<e);let o=t.length-1,r=0,n;for(;o-r>1;)n=r+o>>1,i(n)?r=n:o=n;return{lo:r,hi:o}}var yo=(t,e,i,o)=>hg(t,i,o?r=>{let n=t[r][e];return n<i||n===i&&t[r+1][e]===i}:r=>t[r][e]<i),U0=(t,e,i)=>hg(t,i,o=>t[o][e]>=i);function j0(t,e,i){let o=0,r=t.length;for(;o<r&&t[o]<e;)o++;for(;r>o&&t[r-1]>i;)r--;return o>0||r<t.length?t.slice(o,r):t}var q0=["push","pop","shift","splice","unshift"];function K0(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),q0.forEach(i=>{let o="_onData"+cg(i),r=t[i];Object.defineProperty(t,i,{configurable:!0,enumerable:!1,value(...n){let s=r.apply(this,n);return t._chartjs.listeners.forEach(a=>{typeof a[o]=="function"&&a[o](...n)}),s}})})}function RC(t,e){let i=t._chartjs;if(!i)return;let o=i.listeners,r=o.indexOf(e);r!==-1&&o.splice(r,1),!(o.length>0)&&(q0.forEach(n=>{delete t[n]}),delete t._chartjs)}function MC(t){let e=new Set(t);return e.size===t.length?t:Array.from(e)}var TC=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function AC(t,e){let i=[],o=!1;return function(...r){i=r,o||(o=!0,TC.call(window,()=>{o=!1,t.apply(e,i)}))}}function $0(t,e){let i;return function(...o){return e?(clearTimeout(i),i=setTimeout(t,e,o)):t.apply(this,o),e}}var gg=t=>t==="start"?"left":t==="end"?"right":"center",Mt=(t,e,i)=>t==="start"?e:t==="end"?i:(e+i)/2,Y0=(t,e,i,o)=>t===(o?"left":"right")?i:t==="center"?(e+i)/2:e;function IC(t,e,i){let o=e.length,r=0,n=o;if(t._sorted){let{iScale:s,_parsed:a}=t,l=s.axis,{min:d,max:c,minDefined:u,maxDefined:h}=s.getUserBounds();u&&(r=mt(Math.min(yo(a,l,d).lo,i?o:yo(e,l,s.getPixelForValue(d)).lo),0,o-1)),h?n=mt(Math.max(yo(a,s.axis,c,!0).hi+1,i?0:yo(e,l,s.getPixelForValue(c),!0).hi+1),r,o)-r:n=o-r}return{start:r,count:n}}function PC(t){let{xScale:e,yScale:i,_scaleRanges:o}=t,r={xmin:e.min,xmax:e.max,ymin:i.min,ymax:i.max};if(!o)return t._scaleRanges=r,!0;let n=o.xmin!==e.min||o.xmax!==e.max||o.ymin!==i.min||o.ymax!==i.max;return Object.assign(o,r),n}var og=t=>t===0||t===1,T0=(t,e,i)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*je/i)),A0=(t,e,i)=>Math.pow(2,-10*t)*Math.sin((t-e)*je/i)+1,ka={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*et)+1,easeOutSine:t=>Math.sin(t*et),easeInOutSine:t=>-.5*(Math.cos(Ue*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>og(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>og(t)?t:T0(t,.075,.3),easeOutElastic:t=>og(t)?t:A0(t,.075,.3),easeInOutElastic(t){return og(t)?t:t<.5?.5*T0(t*2,.1125,.45):.5+.5*A0(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-ka.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?ka.easeInBounce(t*2)*.5:ka.easeOutBounce(t*2-1)*.5+.5};function FC(t){if(t&&typeof t=="object"){let e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function OC(t){return FC(t)?t:new sc(t)}function CC(t){return FC(t)?t:new sc(t).saturate(.5).darken(.1).hexString()}var Lz=["x","y","borderWidth","radius","tension"],Nz=["color","borderColor","backgroundColor"];function zz(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:Nz},numbers:{type:"number",properties:Lz}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function Gz(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}var I0=new Map;function Vz(t,e){e=e||{};let i=t+JSON.stringify(e),o=I0.get(i);return o||(o=new Intl.NumberFormat(t,e),I0.set(i,o)),o}function Ba(t,e,i){return Vz(e,i).format(t)}var Q0={values(t){return We(t)?t:""+t},numeric(t,e,i){if(t===0)return"0";let o=this.chart.options.locale,r,n=t;if(i.length>1){let d=Math.max(Math.abs(i[0].value),Math.abs(i[i.length-1].value));(d<1e-4||d>1e15)&&(r="scientific"),n=Hz(t,i)}let s=Yo(Math.abs(n)),a=isNaN(s)?1:Math.max(Math.min(-1*Math.floor(s),20),0),l={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),Ba(t,o,l)},logarithmic(t,e,i){if(t===0)return"0";let o=i[e].significand||t/Math.pow(10,Math.floor(Yo(t)));return[1,2,3,5,10,15].includes(o)||e>.8*i.length?Q0.numeric.call(this,t,e,i):""}};function Hz(t,e){let i=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(i)>=1&&t!==Math.floor(t)&&(i=t-Math.floor(t)),i}var uc={formatters:Q0};function Bz(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,i)=>i.lineWidth,tickColor:(e,i)=>i.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:uc.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}var Wr=Object.create(null),pg=Object.create(null);function lc(t,e){if(!e)return t;let i=e.split(".");for(let o=0,r=i.length;o<r;++o){let n=i[o];t=t[n]||(t[n]=Object.create(null))}return t}function wC(t,e,i){return typeof e=="string"?La(lc(t,e),i):La(lc(t,""),e)}var yC=class{constructor(e,i){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=o=>o.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(o,r)=>CC(r.backgroundColor),this.hoverBorderColor=(o,r)=>CC(r.borderColor),this.hoverColor=(o,r)=>CC(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(i)}set(e,i){return wC(this,e,i)}get(e){return lc(this,e)}describe(e,i){return wC(pg,e,i)}override(e,i){return wC(Wr,e,i)}route(e,i,o,r){let n=lc(this,e),s=lc(this,o),a="_"+i;Object.defineProperties(n,{[a]:{value:n[i],writable:!0},[i]:{enumerable:!0,get(){let l=this[a],d=s[r];return Ce(l)?Object.assign({},d,l):ue(l,d)},set(l){this[a]=l}}})}apply(e){e.forEach(i=>i(this))}},Ke=new yC({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[zz,Gz,Bz]);function Wz(t){return!t||xe(t.size)||xe(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function dc(t,e,i,o,r){let n=e[r];return n||(n=e[r]=t.measureText(r).width,i.push(r)),n>o&&(o=n),o}function X0(t,e,i,o){o=o||{};let r=o.data=o.data||{},n=o.garbageCollect=o.garbageCollect||[];o.font!==e&&(r=o.data={},n=o.garbageCollect=[],o.font=e),t.save(),t.font=e;let s=0,a=i.length,l,d,c,u,h;for(l=0;l<a;l++)if(u=i[l],u!=null&&!We(u))s=dc(t,r,n,s,u);else if(We(u))for(d=0,c=u.length;d<c;d++)h=u[d],h!=null&&!We(h)&&(s=dc(t,r,n,s,h));t.restore();let p=n.length/2;if(p>i.length){for(l=0;l<p;l++)delete r[n[l]];n.splice(0,p)}return s}function Ur(t,e,i){let o=t.currentDevicePixelRatio,r=i!==0?Math.max(i/2,.5):0;return Math.round((e-r)*o)/o+r}function kC(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function fg(t,e,i,o){LC(t,e,i,o,null)}function LC(t,e,i,o,r){let n,s,a,l,d,c,u,h,p=e.pointStyle,m=e.rotation,C=e.radius,w=(m||0)*Oz;if(p&&typeof p=="object"&&(n=p.toString(),n==="[object HTMLImageElement]"||n==="[object HTMLCanvasElement]")){t.save(),t.translate(i,o),t.rotate(w),t.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),t.restore();return}if(!(isNaN(C)||C<=0)){switch(t.beginPath(),p){default:r?t.ellipse(i,o,r/2,C,0,0,je):t.arc(i,o,C,0,je),t.closePath();break;case"triangle":c=r?r/2:C,t.moveTo(i+Math.sin(w)*c,o-Math.cos(w)*C),w+=M0,t.lineTo(i+Math.sin(w)*c,o-Math.cos(w)*C),w+=M0,t.lineTo(i+Math.sin(w)*c,o-Math.cos(w)*C),t.closePath();break;case"rectRounded":d=C*.516,l=C-d,s=Math.cos(w+is)*l,u=Math.cos(w+is)*(r?r/2-d:l),a=Math.sin(w+is)*l,h=Math.sin(w+is)*(r?r/2-d:l),t.arc(i-u,o-a,d,w-Ue,w-et),t.arc(i+h,o-s,d,w-et,w),t.arc(i+u,o+a,d,w,w+et),t.arc(i-h,o+s,d,w+et,w+Ue),t.closePath();break;case"rect":if(!m){l=Math.SQRT1_2*C,c=r?r/2:l,t.rect(i-c,o-l,2*c,2*l);break}w+=is;case"rectRot":u=Math.cos(w)*(r?r/2:C),s=Math.cos(w)*C,a=Math.sin(w)*C,h=Math.sin(w)*(r?r/2:C),t.moveTo(i-u,o-a),t.lineTo(i+h,o-s),t.lineTo(i+u,o+a),t.lineTo(i-h,o+s),t.closePath();break;case"crossRot":w+=is;case"cross":u=Math.cos(w)*(r?r/2:C),s=Math.cos(w)*C,a=Math.sin(w)*C,h=Math.sin(w)*(r?r/2:C),t.moveTo(i-u,o-a),t.lineTo(i+u,o+a),t.moveTo(i+h,o-s),t.lineTo(i-h,o+s);break;case"star":u=Math.cos(w)*(r?r/2:C),s=Math.cos(w)*C,a=Math.sin(w)*C,h=Math.sin(w)*(r?r/2:C),t.moveTo(i-u,o-a),t.lineTo(i+u,o+a),t.moveTo(i+h,o-s),t.lineTo(i-h,o+s),w+=is,u=Math.cos(w)*(r?r/2:C),s=Math.cos(w)*C,a=Math.sin(w)*C,h=Math.sin(w)*(r?r/2:C),t.moveTo(i-u,o-a),t.lineTo(i+u,o+a),t.moveTo(i+h,o-s),t.lineTo(i-h,o+s);break;case"line":s=r?r/2:Math.cos(w)*C,a=Math.sin(w)*C,t.moveTo(i-s,o-a),t.lineTo(i+s,o+a);break;case"dash":t.moveTo(i,o),t.lineTo(i+Math.cos(w)*(r?r/2:C),o+Math.sin(w)*C);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function bo(t,e,i){return i=i||.5,!e||t&&t.x>e.left-i&&t.x<e.right+i&&t.y>e.top-i&&t.y<e.bottom+i}function hc(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function gc(t){t.restore()}function Z0(t,e,i,o,r){if(!e)return t.lineTo(i.x,i.y);if(r==="middle"){let n=(e.x+i.x)/2;t.lineTo(n,e.y),t.lineTo(n,i.y)}else r==="after"!=!!o?t.lineTo(e.x,i.y):t.lineTo(i.x,e.y);t.lineTo(i.x,i.y)}function J0(t,e,i,o){if(!e)return t.lineTo(i.x,i.y);t.bezierCurveTo(o?e.cp1x:e.cp2x,o?e.cp1y:e.cp2y,o?i.cp2x:i.cp1x,o?i.cp2y:i.cp1y,i.x,i.y)}function Uz(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),xe(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function jz(t,e,i,o,r){if(r.strikethrough||r.underline){let n=t.measureText(o),s=e-n.actualBoundingBoxLeft,a=e+n.actualBoundingBoxRight,l=i-n.actualBoundingBoxAscent,d=i+n.actualBoundingBoxDescent,c=r.strikethrough?(l+d)/2:d;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=r.decorationWidth||2,t.moveTo(s,c),t.lineTo(a,c),t.stroke()}}function qz(t,e){let i=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=i}function jr(t,e,i,o,r,n={}){let s=We(e)?e:[e],a=n.strokeWidth>0&&n.strokeColor!=="",l,d;for(t.save(),t.font=r.string,Uz(t,n),l=0;l<s.length;++l)d=s[l],n.backdrop&&qz(t,n.backdrop),a&&(n.strokeColor&&(t.strokeStyle=n.strokeColor),xe(n.strokeWidth)||(t.lineWidth=n.strokeWidth),t.strokeText(d,i,o,n.maxWidth)),t.fillText(d,i,o,n.maxWidth),jz(t,i,o,d,n),o+=Number(r.lineHeight);t.restore()}function Wa(t,e){let{x:i,y:o,w:r,h:n,radius:s}=e;t.arc(i+s.topLeft,o+s.topLeft,s.topLeft,1.5*Ue,Ue,!0),t.lineTo(i,o+n-s.bottomLeft),t.arc(i+s.bottomLeft,o+n-s.bottomLeft,s.bottomLeft,Ue,et,!0),t.lineTo(i+r-s.bottomRight,o+n),t.arc(i+r-s.bottomRight,o+n-s.bottomRight,s.bottomRight,et,0,!0),t.lineTo(i+r,o+s.topRight),t.arc(i+r-s.topRight,o+s.topRight,s.topRight,0,-et,!0),t.lineTo(i+s.topLeft,o)}var Kz=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,$z=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Yz(t,e){let i=(""+t).match(Kz);if(!i||i[1]==="normal")return e*1.2;switch(t=+i[2],i[3]){case"px":return t;case"%":t/=100;break}return e*t}var Qz=t=>+t||0;function mg(t,e){let i={},o=Ce(e),r=o?Object.keys(e):e,n=Ce(t)?o?s=>ue(t[s],t[e[s]]):s=>t[s]:()=>t;for(let s of r)i[s]=Qz(n(s));return i}function NC(t){return mg(t,{top:"y",right:"x",bottom:"y",left:"x"})}function qr(t){return mg(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Tt(t){let e=NC(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function ut(t,e){t=t||{},e=e||Ke.font;let i=ue(t.size,e.size);typeof i=="string"&&(i=parseInt(i,10));let o=ue(t.style,e.style);o&&!(""+o).match($z)&&(console.warn('Invalid font style specified: "'+o+'"'),o=void 0);let r={family:ue(t.family,e.family),lineHeight:Yz(ue(t.lineHeight,e.lineHeight),i),size:i,style:o,weight:ue(t.weight,e.weight),string:""};return r.string=Wz(r),r}function Ua(t,e,i,o){let r=!0,n,s,a;for(n=0,s=t.length;n<s;++n)if(a=t[n],a!==void 0&&(e!==void 0&&typeof a=="function"&&(a=a(e),r=!1),i!==void 0&&We(a)&&(a=a[i%a.length],r=!1),a!==void 0))return o&&!r&&(o.cacheable=!1),a}function eD(t,e,i){let{min:o,max:r}=t,n=bC(e,(r-o)/2),s=(a,l)=>i&&a===0?0:a+l;return{min:s(o,-Math.abs(n)),max:s(r,n)}}function Xo(t,e){return Object.assign(Object.create(t),e)}function vg(t,e=[""],i,o,r=()=>t[0]){let n=i||t;typeof o>"u"&&(o=oD("_fallback",t));let s={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:n,_fallback:o,_getTarget:r,override:a=>vg([a,...t],e,n,o)};return new Proxy(s,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return tD(a,l,()=>r1(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return F0(a).includes(l)},ownKeys(a){return F0(a)},set(a,l,d){let c=a._storage||(a._storage=r());return a[l]=c[l]=d,delete a._keys,!0}})}function rs(t,e,i,o){let r={_cacheable:!1,_proxy:t,_context:e,_subProxy:i,_stack:new Set,_descriptors:zC(t,o),setContext:n=>rs(t,n,i,o),override:n=>rs(t.override(n),e,i,o)};return new Proxy(r,{deleteProperty(n,s){return delete n[s],delete t[s],!0},get(n,s,a){return tD(n,s,()=>Zz(n,s,a))},getOwnPropertyDescriptor(n,s){return n._descriptors.allKeys?Reflect.has(t,s)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,s)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(n,s){return Reflect.has(t,s)},ownKeys(){return Reflect.ownKeys(t)},set(n,s,a){return t[s]=a,delete n[s],!0}})}function zC(t,e={scriptable:!0,indexable:!0}){let{_scriptable:i=e.scriptable,_indexable:o=e.indexable,_allKeys:r=e.allKeys}=t;return{allKeys:r,scriptable:i,indexable:o,isScriptable:$o(i)?i:()=>i,isIndexable:$o(o)?o:()=>o}}var Xz=(t,e)=>t?t+cg(e):e,GC=(t,e)=>Ce(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function tD(t,e,i){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];let o=i();return t[e]=o,o}function Zz(t,e,i){let{_proxy:o,_context:r,_subProxy:n,_descriptors:s}=t,a=o[e];return $o(a)&&s.isScriptable(e)&&(a=Jz(e,a,t,i)),We(a)&&a.length&&(a=e1(e,a,t,s.isIndexable)),GC(e,a)&&(a=rs(a,r,n&&n[e],s)),a}function Jz(t,e,i,o){let{_proxy:r,_context:n,_subProxy:s,_stack:a}=i;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(n,s||o);return a.delete(t),GC(t,l)&&(l=VC(r._scopes,r,t,l)),l}function e1(t,e,i,o){let{_proxy:r,_context:n,_subProxy:s,_descriptors:a}=i;if(typeof n.index<"u"&&o(t))return e[n.index%e.length];if(Ce(e[0])){let l=e,d=r._scopes.filter(c=>c!==l);e=[];for(let c of l){let u=VC(d,r,t,c);e.push(rs(u,n,s&&s[t],a))}}return e}function iD(t,e,i){return $o(t)?t(e,i):t}var t1=(t,e)=>t===!0?e:typeof t=="string"?Qo(e,t):void 0;function i1(t,e,i,o,r){for(let n of e){let s=t1(i,n);if(s){t.add(s);let a=iD(s._fallback,i,r);if(typeof a<"u"&&a!==i&&a!==o)return a}else if(s===!1&&typeof o<"u"&&i!==o)return null}return!1}function VC(t,e,i,o){let r=e._rootScopes,n=iD(e._fallback,i,o),s=[...t,...r],a=new Set;a.add(o);let l=P0(a,s,i,n||i,o);return l===null||typeof n<"u"&&n!==i&&(l=P0(a,s,n,l,o),l===null)?!1:vg(Array.from(a),[""],r,n,()=>o1(e,i,o))}function P0(t,e,i,o,r){for(;i;)i=i1(t,e,i,o,r);return i}function o1(t,e,i){let o=t._getTarget();e in o||(o[e]={});let r=o[e];return We(r)&&Ce(i)?i:r||{}}function r1(t,e,i,o){let r;for(let n of e)if(r=oD(Xz(n,t),i),typeof r<"u")return GC(t,r)?VC(i,o,t,r):r}function oD(t,e){for(let i of e){if(!i)continue;let o=i[t];if(typeof o<"u")return o}}function F0(t){let e=t._keys;return e||(e=t._keys=n1(t._scopes)),e}function n1(t){let e=new Set;for(let i of t)for(let o of Object.keys(i).filter(r=>!r.startsWith("_")))e.add(o);return Array.from(e)}function HC(t,e,i,o){let{iScale:r}=t,{key:n="r"}=this._parsing,s=new Array(o),a,l,d,c;for(a=0,l=o;a<l;++a)d=a+i,c=e[d],s[a]={r:r.parse(Qo(c,n),d)};return s}var s1=Number.EPSILON||1e-14,Na=(t,e)=>e<t.length&&!t[e].skip&&t[e],rD=t=>t==="x"?"y":"x";function a1(t,e,i,o){let r=t.skip?e:t,n=e,s=i.skip?e:i,a=lg(n,r),l=lg(s,n),d=a/(a+l),c=l/(a+l);d=isNaN(d)?0:d,c=isNaN(c)?0:c;let u=o*d,h=o*c;return{previous:{x:n.x-u*(s.x-r.x),y:n.y-u*(s.y-r.y)},next:{x:n.x+h*(s.x-r.x),y:n.y+h*(s.y-r.y)}}}function l1(t,e,i){let o=t.length,r,n,s,a,l,d=Na(t,0);for(let c=0;c<o-1;++c)if(l=d,d=Na(t,c+1),!(!l||!d)){if(Va(e[c],0,s1)){i[c]=i[c+1]=0;continue}r=i[c]/e[c],n=i[c+1]/e[c],a=Math.pow(r,2)+Math.pow(n,2),!(a<=9)&&(s=3/Math.sqrt(a),i[c]=r*s*e[c],i[c+1]=n*s*e[c])}}function d1(t,e,i="x"){let o=rD(i),r=t.length,n,s,a,l=Na(t,0);for(let d=0;d<r;++d){if(s=a,a=l,l=Na(t,d+1),!a)continue;let c=a[i],u=a[o];s&&(n=(c-s[i])/3,a[`cp1${i}`]=c-n,a[`cp1${o}`]=u-n*e[d]),l&&(n=(l[i]-c)/3,a[`cp2${i}`]=c+n,a[`cp2${o}`]=u+n*e[d])}}function c1(t,e="x"){let i=rD(e),o=t.length,r=Array(o).fill(0),n=Array(o),s,a,l,d=Na(t,0);for(s=0;s<o;++s)if(a=l,l=d,d=Na(t,s+1),!!l){if(d){let c=d[e]-l[e];r[s]=c!==0?(d[i]-l[i])/c:0}n[s]=a?d?Ji(r[s-1])!==Ji(r[s])?0:(r[s-1]+r[s])/2:r[s-1]:r[s]}l1(t,r,n),d1(t,n,e)}function rg(t,e,i){return Math.max(Math.min(t,i),e)}function u1(t,e){let i,o,r,n,s,a=bo(t[0],e);for(i=0,o=t.length;i<o;++i)s=n,n=a,a=i<o-1&&bo(t[i+1],e),n&&(r=t[i],s&&(r.cp1x=rg(r.cp1x,e.left,e.right),r.cp1y=rg(r.cp1y,e.top,e.bottom)),a&&(r.cp2x=rg(r.cp2x,e.left,e.right),r.cp2y=rg(r.cp2y,e.top,e.bottom)))}function nD(t,e,i,o,r){let n,s,a,l;if(e.spanGaps&&(t=t.filter(d=>!d.skip)),e.cubicInterpolationMode==="monotone")c1(t,r);else{let d=o?t[t.length-1]:t[0];for(n=0,s=t.length;n<s;++n)a=t[n],l=a1(d,a,t[Math.min(n+1,s-(o?0:1))%s],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,d=a}e.capBezierPoints&&u1(t,i)}function Cg(){return typeof window<"u"&&typeof document<"u"}function wg(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function dg(t,e,i){let o;return typeof t=="string"?(o=parseInt(t,10),t.indexOf("%")!==-1&&(o=o/100*e.parentNode[i])):o=t,o}var yg=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function h1(t,e){return yg(t).getPropertyValue(e)}var g1=["top","right","bottom","left"];function os(t,e,i){let o={};i=i?"-"+i:"";for(let r=0;r<4;r++){let n=g1[r];o[n]=parseFloat(t[e+"-"+n+i])||0}return o.width=o.left+o.right,o.height=o.top+o.bottom,o}var p1=(t,e,i)=>(t>0||e>0)&&(!i||!i.shadowRoot);function f1(t,e){let i=t.touches,o=i&&i.length?i[0]:t,{offsetX:r,offsetY:n}=o,s=!1,a,l;if(p1(r,n,t.target))a=r,l=n;else{let d=e.getBoundingClientRect();a=o.clientX-d.left,l=o.clientY-d.top,s=!0}return{x:a,y:l,box:s}}function Kr(t,e){if("native"in t)return t;let{canvas:i,currentDevicePixelRatio:o}=e,r=yg(i),n=r.boxSizing==="border-box",s=os(r,"padding"),a=os(r,"border","width"),{x:l,y:d,box:c}=f1(t,i),u=s.left+(c&&a.left),h=s.top+(c&&a.top),{width:p,height:m}=e;return n&&(p-=s.width+a.width,m-=s.height+a.height),{x:Math.round((l-u)/p*i.width/o),y:Math.round((d-h)/m*i.height/o)}}function m1(t,e,i){let o,r;if(e===void 0||i===void 0){let n=t&&wg(t);if(!n)e=t.clientWidth,i=t.clientHeight;else{let s=n.getBoundingClientRect(),a=yg(n),l=os(a,"border","width"),d=os(a,"padding");e=s.width-d.width-l.width,i=s.height-d.height-l.height,o=dg(a.maxWidth,n,"clientWidth"),r=dg(a.maxHeight,n,"clientHeight")}}return{width:e,height:i,maxWidth:o||ag,maxHeight:r||ag}}var ng=t=>Math.round(t*10)/10;function sD(t,e,i,o){let r=yg(t),n=os(r,"margin"),s=dg(r.maxWidth,t,"clientWidth")||ag,a=dg(r.maxHeight,t,"clientHeight")||ag,l=m1(t,e,i),{width:d,height:c}=l;if(r.boxSizing==="content-box"){let h=os(r,"border","width"),p=os(r,"padding");d-=p.width+h.width,c-=p.height+h.height}return d=Math.max(0,d-n.width),c=Math.max(0,o?d/o:c-n.height),d=ng(Math.min(d,s,l.maxWidth)),c=ng(Math.min(c,a,l.maxHeight)),d&&!c&&(c=ng(d/2)),(e!==void 0||i!==void 0)&&o&&l.height&&c>l.height&&(c=l.height,d=ng(Math.floor(c*o))),{width:d,height:c}}function BC(t,e,i){let o=e||1,r=Math.floor(t.height*o),n=Math.floor(t.width*o);t.height=Math.floor(t.height),t.width=Math.floor(t.width);let s=t.canvas;return s.style&&(i||!s.style.height&&!s.style.width)&&(s.style.height=`${t.height}px`,s.style.width=`${t.width}px`),t.currentDevicePixelRatio!==o||s.height!==r||s.width!==n?(t.currentDevicePixelRatio=o,s.height=r,s.width=n,t.ctx.setTransform(o,0,0,o,0,0),!0):!1}var aD=function(){let t=!1;try{let e={get passive(){return t=!0,!1}};Cg()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function WC(t,e){let i=h1(t,e),o=i&&i.match(/^(\d+)(\.\d+)?px$/);return o?+o[1]:void 0}function Br(t,e,i,o){return{x:t.x+i*(e.x-t.x),y:t.y+i*(e.y-t.y)}}function lD(t,e,i,o){return{x:t.x+i*(e.x-t.x),y:o==="middle"?i<.5?t.y:e.y:o==="after"?i<1?t.y:e.y:i>0?e.y:t.y}}function dD(t,e,i,o){let r={x:t.cp2x,y:t.cp2y},n={x:e.cp1x,y:e.cp1y},s=Br(t,r,i),a=Br(r,n,i),l=Br(n,e,i),d=Br(s,a,i),c=Br(a,l,i);return Br(d,c,i)}var v1=function(t,e){return{x(i){return t+t+e-i},setWidth(i){e=i},textAlign(i){return i==="center"?i:i==="right"?"left":"right"},xPlus(i,o){return i-o},leftForLtr(i,o){return i-o}}},C1=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function ss(t,e,i){return t?v1(e,i):C1()}function UC(t,e){let i,o;(e==="ltr"||e==="rtl")&&(i=t.canvas.style,o=[i.getPropertyValue("direction"),i.getPropertyPriority("direction")],i.setProperty("direction",e,"important"),t.prevTextDirection=o)}function jC(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function cD(t){return t==="angle"?{between:Ha,compare:kz,normalize:ci}:{between:xo,compare:(e,i)=>e-i,normalize:e=>e}}function O0({start:t,end:e,count:i,loop:o,style:r}){return{start:t%i,end:e%i,loop:o&&(e-t+1)%i===0,style:r}}function w1(t,e,i){let{property:o,start:r,end:n}=i,{between:s,normalize:a}=cD(o),l=e.length,{start:d,end:c,loop:u}=t,h,p;if(u){for(d+=l,c+=l,h=0,p=l;h<p&&s(a(e[d%l][o]),r,n);++h)d--,c--;d%=l,c%=l}return c<d&&(c+=l),{start:d,end:c,loop:u,style:t.style}}function qC(t,e,i){if(!i)return[t];let{property:o,start:r,end:n}=i,s=e.length,{compare:a,between:l,normalize:d}=cD(o),{start:c,end:u,loop:h,style:p}=w1(t,e,i),m=[],C=!1,w=null,b,y,_,x=()=>l(r,_,b)&&a(r,_)!==0,E=()=>a(n,b)===0||l(n,_,b),D=()=>C||x(),R=()=>!C||E();for(let P=c,N=c;P<=u;++P)y=e[P%s],!y.skip&&(b=d(y[o]),b!==_&&(C=l(b,r,n),w===null&&D()&&(w=a(b,r)===0?P:N),w!==null&&R()&&(m.push(O0({start:w,end:P,loop:h,count:s,style:p})),w=null),N=P,_=b));return w!==null&&m.push(O0({start:w,end:u,loop:h,count:s,style:p})),m}function KC(t,e){let i=[],o=t.segments;for(let r=0;r<o.length;r++){let n=qC(o[r],t.points,e);n.length&&i.push(...n)}return i}function y1(t,e,i,o){let r=0,n=e-1;if(i&&!o)for(;r<e&&!t[r].skip;)r++;for(;r<e&&t[r].skip;)r++;for(r%=e,i&&(n+=r);n>r&&t[n%e].skip;)n--;return n%=e,{start:r,end:n}}function b1(t,e,i,o){let r=t.length,n=[],s=e,a=t[e],l;for(l=e+1;l<=i;++l){let d=t[l%r];d.skip||d.stop?a.skip||(o=!1,n.push({start:e%r,end:(l-1)%r,loop:o}),e=s=d.stop?l:null):(s=l,a.skip&&(e=l)),a=d}return s!==null&&n.push({start:e%r,end:s%r,loop:o}),n}function uD(t,e){let i=t.points,o=t.options.spanGaps,r=i.length;if(!r)return[];let n=!!t._loop,{start:s,end:a}=y1(i,r,n,o);if(o===!0)return k0(t,[{start:s,end:a,loop:n}],i,e);let l=a<s?a+r:a,d=!!t._fullLoop&&s===0&&a===r-1;return k0(t,b1(i,s,l,d),i,e)}function k0(t,e,i,o){return!o||!o.setContext||!i?e:S1(t,e,i,o)}function S1(t,e,i,o){let r=t._chart.getContext(),n=L0(t.options),{_datasetIndex:s,options:{spanGaps:a}}=t,l=i.length,d=[],c=n,u=e[0].start,h=u;function p(m,C,w,b){let y=a?-1:1;if(m!==C){for(m+=l;i[m%l].skip;)m-=y;for(;i[C%l].skip;)C+=y;m%l!==C%l&&(d.push({start:m%l,end:C%l,loop:w,style:b}),c=b,u=C%l)}}for(let m of e){u=a?u:m.start;let C=i[u%l],w;for(h=u+1;h<=m.end;h++){let b=i[h%l];w=L0(o.setContext(Xo(r,{type:"segment",p0:C,p1:b,p0DataIndex:(h-1)%l,p1DataIndex:h%l,datasetIndex:s}))),x1(w,c)&&p(u,h-1,m.loop,c),C=b,c=w}u<h-1&&p(u,h-1,m.loop,c)}return d}function L0(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function x1(t,e){if(!e)return!1;let i=[],o=function(r,n){return FC(n)?(i.includes(n)||i.push(n),i.indexOf(n)):n};return JSON.stringify(t,o)!==JSON.stringify(e,o)}var ow=class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,i,o,r){let n=i.listeners[r],s=i.duration;n.forEach(a=>a({chart:e,initial:i.initial,numSteps:s,currentStep:Math.min(o-i.start,s)}))}_refresh(){this._request||(this._running=!0,this._request=TC.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let i=0;this._charts.forEach((o,r)=>{if(!o.running||!o.items.length)return;let n=o.items,s=n.length-1,a=!1,l;for(;s>=0;--s)l=n[s],l._active?(l._total>o.duration&&(o.duration=l._total),l.tick(e),a=!0):(n[s]=n[n.length-1],n.pop());a&&(r.draw(),this._notify(r,o,e,"progress")),n.length||(o.running=!1,this._notify(r,o,e,"complete"),o.initial=!1),i+=n.length}),this._lastDate=e,i===0&&(this._running=!1)}_getAnims(e){let i=this._charts,o=i.get(e);return o||(o={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},i.set(e,o)),o}listen(e,i,o){this._getAnims(e).listeners[i].push(o)}add(e,i){!i||!i.length||this._getAnims(e).items.push(...i)}has(e){return this._getAnims(e).items.length>0}start(e){let i=this._charts.get(e);i&&(i.running=!0,i.start=Date.now(),i.duration=i.items.reduce((o,r)=>Math.max(o,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;let i=this._charts.get(e);return!(!i||!i.running||!i.items.length)}stop(e){let i=this._charts.get(e);if(!i||!i.items.length)return;let o=i.items,r=o.length-1;for(;r>=0;--r)o[r].cancel();i.items=[],this._notify(e,i,Date.now(),"complete")}remove(e){return this._charts.delete(e)}},Zo=new ow,hD="transparent",_1={boolean(t,e,i){return i>.5?e:t},color(t,e,i){let o=OC(t||hD),r=o.valid&&OC(e||hD);return r&&r.valid?r.mix(o,i).hexString():e},number(t,e,i){return t+(e-t)*i}},rw=class{constructor(e,i,o,r){let n=i[o];r=Ua([e.to,r,n,e.from]);let s=Ua([e.from,n,r]);this._active=!0,this._fn=e.fn||_1[e.type||typeof s],this._easing=ka[e.easing]||ka.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=i,this._prop=o,this._from=s,this._to=r,this._promises=void 0}active(){return this._active}update(e,i,o){if(this._active){this._notify(!1);let r=this._target[this._prop],n=o-this._start,s=this._duration-n;this._start=o,this._duration=Math.floor(Math.max(s,e.duration)),this._total+=n,this._loop=!!e.loop,this._to=Ua([e.to,i,r,e.from]),this._from=Ua([e.from,r,i])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){let i=e-this._start,o=this._duration,r=this._prop,n=this._from,s=this._loop,a=this._to,l;if(this._active=n!==a&&(s||i<o),!this._active){this._target[r]=a,this._notify(!0);return}if(i<0){this._target[r]=n;return}l=i/o%2,l=s&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[r]=this._fn(n,a,l)}wait(){let e=this._promises||(this._promises=[]);return new Promise((i,o)=>{e.push({res:i,rej:o})})}_notify(e){let i=e?"res":"rej",o=this._promises||[];for(let r=0;r<o.length;r++)o[r][i]()}},Ag=class{constructor(e,i){this._chart=e,this._properties=new Map,this.configure(i)}configure(e){if(!Ce(e))return;let i=Object.keys(Ke.animation),o=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{let n=e[r];if(!Ce(n))return;let s={};for(let a of i)s[a]=n[a];(We(n.properties)&&n.properties||[r]).forEach(a=>{(a===r||!o.has(a))&&o.set(a,s)})})}_animateOptions(e,i){let o=i.options,r=D1(e,o);if(!r)return[];let n=this._createAnimations(r,o);return o.$shared&&E1(e.options.$animations,o).then(()=>{e.options=o},()=>{}),n}_createAnimations(e,i){let o=this._properties,r=[],n=e.$animations||(e.$animations={}),s=Object.keys(i),a=Date.now(),l;for(l=s.length-1;l>=0;--l){let d=s[l];if(d.charAt(0)==="$")continue;if(d==="options"){r.push(...this._animateOptions(e,i));continue}let c=i[d],u=n[d],h=o.get(d);if(u)if(h&&u.active()){u.update(h,c,a);continue}else u.cancel();if(!h||!h.duration){e[d]=c;continue}n[d]=u=new rw(h,e,d,c),r.push(u)}return r}update(e,i){if(this._properties.size===0){Object.assign(e,i);return}let o=this._createAnimations(e,i);if(o.length)return Zo.add(this._chart,o),!0}};function E1(t,e){let i=[],o=Object.keys(e);for(let r=0;r<o.length;r++){let n=t[o[r]];n&&n.active()&&i.push(n.wait())}return Promise.all(i)}function D1(t,e){if(!e)return;let i=t.options;if(!i){t.options=e;return}return i.$shared&&(t.options=i=Object.assign({},i,{$shared:!1,$animations:{}})),i}function gD(t,e){let i=t&&t.options||{},o=i.reverse,r=i.min===void 0?e:0,n=i.max===void 0?e:0;return{start:o?n:r,end:o?r:n}}function R1(t,e,i){if(i===!1)return!1;let o=gD(t,i),r=gD(e,i);return{top:r.end,right:o.end,bottom:r.start,left:o.start}}function M1(t){let e,i,o,r;return Ce(t)?(e=t.top,i=t.right,o=t.bottom,r=t.left):e=i=o=r=t,{top:e,right:i,bottom:o,left:r,disabled:t===!1}}function gR(t,e){let i=[],o=t._getSortedDatasetMetas(e),r,n;for(r=0,n=o.length;r<n;++r)i.push(o[r].index);return i}function pD(t,e,i,o={}){let r=t.keys,n=o.mode==="single",s,a,l,d;if(e!==null){for(s=0,a=r.length;s<a;++s){if(l=+r[s],l===i){if(o.all)continue;break}d=t.values[l],Ze(d)&&(n||e===0||Ji(e)===Ji(d))&&(e+=d)}return e}}function T1(t,e){let{iScale:i,vScale:o}=e,r=i.axis==="x"?"x":"y",n=o.axis==="x"?"x":"y",s=Object.keys(t),a=new Array(s.length),l,d,c;for(l=0,d=s.length;l<d;++l)c=s[l],a[l]={[r]:c,[n]:t[c]};return a}function fD(t,e){let i=t&&t.options.stacked;return i||i===void 0&&e.stack!==void 0}function A1(t,e,i){return`${t.id}.${e.id}.${i.stack||i.type}`}function I1(t){let{min:e,max:i,minDefined:o,maxDefined:r}=t.getUserBounds();return{min:o?e:Number.NEGATIVE_INFINITY,max:r?i:Number.POSITIVE_INFINITY}}function P1(t,e,i){let o=t[e]||(t[e]={});return o[i]||(o[i]={})}function mD(t,e,i,o){for(let r of e.getMatchingVisibleMetas(o).reverse()){let n=t[r.index];if(i&&n>0||!i&&n<0)return r.index}return null}function vD(t,e){let{chart:i,_cachedMeta:o}=t,r=i._stacks||(i._stacks={}),{iScale:n,vScale:s,index:a}=o,l=n.axis,d=s.axis,c=A1(n,s,o),u=e.length,h;for(let p=0;p<u;++p){let m=e[p],{[l]:C,[d]:w}=m,b=m._stacks||(m._stacks={});h=b[d]=P1(r,c,C),h[a]=w,h._top=mD(h,s,!0,o.type),h._bottom=mD(h,s,!1,o.type);let y=h._visualValues||(h._visualValues={});y[a]=w}}function $C(t,e){let i=t.scales;return Object.keys(i).filter(o=>i[o].axis===e).shift()}function F1(t,e){return Xo(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function O1(t,e,i){return Xo(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:i,index:e,mode:"default",type:"data"})}function pc(t,e){let i=t.controller.index,o=t.vScale&&t.vScale.axis;if(o){e=e||t._parsed;for(let r of e){let n=r._stacks;if(!n||n[o]===void 0||n[o][i]===void 0)return;delete n[o][i],n[o]._visualValues!==void 0&&n[o]._visualValues[i]!==void 0&&delete n[o]._visualValues[i]}}}var YC=t=>t==="reset"||t==="none",CD=(t,e)=>e?t:Object.assign({},t),k1=(t,e,i)=>t&&!e.hidden&&e._stacked&&{keys:gR(i,!0),values:null},Yr=(()=>{class t{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(i,o){this.chart=i,this._ctx=i.ctx,this.index=o,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){let i=this._cachedMeta;this.configure(),this.linkScales(),i._stacked=fD(i.vScale,i),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(i){this.index!==i&&pc(this._cachedMeta),this.index=i}linkScales(){let i=this.chart,o=this._cachedMeta,r=this.getDataset(),n=(h,p,m,C)=>h==="x"?p:h==="r"?C:m,s=o.xAxisID=ue(r.xAxisID,$C(i,"x")),a=o.yAxisID=ue(r.yAxisID,$C(i,"y")),l=o.rAxisID=ue(r.rAxisID,$C(i,"r")),d=o.indexAxis,c=o.iAxisID=n(d,s,a,l),u=o.vAxisID=n(d,a,s,l);o.xScale=this.getScaleForId(s),o.yScale=this.getScaleForId(a),o.rScale=this.getScaleForId(l),o.iScale=this.getScaleForId(c),o.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(i){return this.chart.scales[i]}_getOtherScale(i){let o=this._cachedMeta;return i===o.iScale?o.vScale:o.iScale}reset(){this._update("reset")}_destroy(){let i=this._cachedMeta;this._data&&RC(this._data,this),i._stacked&&pc(i)}_dataCheck(){let i=this.getDataset(),o=i.data||(i.data=[]),r=this._data;if(Ce(o)){let n=this._cachedMeta;this._data=T1(o,n)}else if(r!==o){if(r){RC(r,this);let n=this._cachedMeta;pc(n),n._parsed=[]}o&&Object.isExtensible(o)&&K0(o,this),this._syncList=[],this._data=o}}addElements(){let i=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(i.dataset=new this.datasetElementType)}buildOrUpdateElements(i){let o=this._cachedMeta,r=this.getDataset(),n=!1;this._dataCheck();let s=o._stacked;o._stacked=fD(o.vScale,o),o.stack!==r.stack&&(n=!0,pc(o),o.stack=r.stack),this._resyncElements(i),(n||s!==o._stacked)&&vD(this,o._parsed)}configure(){let i=this.chart.config,o=i.datasetScopeKeys(this._type),r=i.getOptionScopes(this.getDataset(),o,!0);this.options=i.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(i,o){let{_cachedMeta:r,_data:n}=this,{iScale:s,_stacked:a}=r,l=s.axis,d=i===0&&o===n.length?!0:r._sorted,c=i>0&&r._parsed[i-1],u,h,p;if(this._parsing===!1)r._parsed=n,r._sorted=!0,p=n;else{We(n[i])?p=this.parseArrayData(r,n,i,o):Ce(n[i])?p=this.parseObjectData(r,n,i,o):p=this.parsePrimitiveData(r,n,i,o);let m=()=>h[l]===null||c&&h[l]<c[l];for(u=0;u<o;++u)r._parsed[u+i]=h=p[u],d&&(m()&&(d=!1),c=h);r._sorted=d}a&&vD(this,p)}parsePrimitiveData(i,o,r,n){let{iScale:s,vScale:a}=i,l=s.axis,d=a.axis,c=s.getLabels(),u=s===a,h=new Array(n),p,m,C;for(p=0,m=n;p<m;++p)C=p+r,h[p]={[l]:u||s.parse(c[C],C),[d]:a.parse(o[C],C)};return h}parseArrayData(i,o,r,n){let{xScale:s,yScale:a}=i,l=new Array(n),d,c,u,h;for(d=0,c=n;d<c;++d)u=d+r,h=o[u],l[d]={x:s.parse(h[0],u),y:a.parse(h[1],u)};return l}parseObjectData(i,o,r,n){let{xScale:s,yScale:a}=i,{xAxisKey:l="x",yAxisKey:d="y"}=this._parsing,c=new Array(n),u,h,p,m;for(u=0,h=n;u<h;++u)p=u+r,m=o[p],c[u]={x:s.parse(Qo(m,l),p),y:a.parse(Qo(m,d),p)};return c}getParsed(i){return this._cachedMeta._parsed[i]}getDataElement(i){return this._cachedMeta.data[i]}applyStack(i,o,r){let n=this.chart,s=this._cachedMeta,a=o[i.axis],l={keys:gR(n,!0),values:o._stacks[i.axis]._visualValues};return pD(l,a,s.index,{mode:r})}updateRangeFromParsed(i,o,r,n){let s=r[o.axis],a=s===null?NaN:s,l=n&&r._stacks[o.axis];n&&l&&(n.values=l,a=pD(n,s,this._cachedMeta.index)),i.min=Math.min(i.min,a),i.max=Math.max(i.max,a)}getMinMax(i,o){let r=this._cachedMeta,n=r._parsed,s=r._sorted&&i===r.iScale,a=n.length,l=this._getOtherScale(i),d=k1(o,r,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:h}=I1(l),p,m;function C(){m=n[p];let w=m[l.axis];return!Ze(m[i.axis])||u>w||h<w}for(p=0;p<a&&!(!C()&&(this.updateRangeFromParsed(c,i,m,d),s));++p);if(s){for(p=a-1;p>=0;--p)if(!C()){this.updateRangeFromParsed(c,i,m,d);break}}return c}getAllParsedValues(i){let o=this._cachedMeta._parsed,r=[],n,s,a;for(n=0,s=o.length;n<s;++n)a=o[n][i.axis],Ze(a)&&r.push(a);return r}getMaxOverflow(){return!1}getLabelAndValue(i){let o=this._cachedMeta,r=o.iScale,n=o.vScale,s=this.getParsed(i);return{label:r?""+r.getLabelForValue(s[r.axis]):"",value:n?""+n.getLabelForValue(s[n.axis]):""}}_update(i){let o=this._cachedMeta;this.update(i||"default"),o._clip=M1(ue(this.options.clip,R1(o.xScale,o.yScale,this.getMaxOverflow())))}update(i){}draw(){let i=this._ctx,o=this.chart,r=this._cachedMeta,n=r.data||[],s=o.chartArea,a=[],l=this._drawStart||0,d=this._drawCount||n.length-l,c=this.options.drawActiveElementsOnTop,u;for(r.dataset&&r.dataset.draw(i,s,l,d),u=l;u<l+d;++u){let h=n[u];h.hidden||(h.active&&c?a.push(h):h.draw(i,s))}for(u=0;u<a.length;++u)a[u].draw(i,s)}getStyle(i,o){let r=o?"active":"default";return i===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(i||0,r)}getContext(i,o,r){let n=this.getDataset(),s;if(i>=0&&i<this._cachedMeta.data.length){let a=this._cachedMeta.data[i];s=a.$context||(a.$context=O1(this.getContext(),i,a)),s.parsed=this.getParsed(i),s.raw=n.data[i],s.index=s.dataIndex=i}else s=this.$context||(this.$context=F1(this.chart.getContext(),this.index)),s.dataset=n,s.index=s.datasetIndex=this.index;return s.active=!!o,s.mode=r,s}resolveDatasetElementOptions(i){return this._resolveElementOptions(this.datasetElementType.id,i)}resolveDataElementOptions(i,o){return this._resolveElementOptions(this.dataElementType.id,o,i)}_resolveElementOptions(i,o="default",r){let n=o==="active",s=this._cachedDataOpts,a=i+"-"+o,l=s[a],d=this.enableOptionSharing&&Ga(r);if(l)return CD(l,d);let c=this.chart.config,u=c.datasetElementScopeKeys(this._type,i),h=n?[`${i}Hover`,"hover",i,""]:[i,""],p=c.getOptionScopes(this.getDataset(),u),m=Object.keys(Ke.elements[i]),C=()=>this.getContext(r,n,o),w=c.resolveNamedOptions(p,m,C,h);return w.$shared&&(w.$shared=d,s[a]=Object.freeze(CD(w,d))),w}_resolveAnimations(i,o,r){let n=this.chart,s=this._cachedDataOpts,a=`animation-${o}`,l=s[a];if(l)return l;let d;if(n.options.animation!==!1){let u=this.chart.config,h=u.datasetAnimationScopeKeys(this._type,o),p=u.getOptionScopes(this.getDataset(),h);d=u.createResolver(p,this.getContext(i,r,o))}let c=new Ag(n,d&&d.animations);return d&&d._cacheable&&(s[a]=Object.freeze(c)),c}getSharedOptions(i){if(i.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},i))}includeOptions(i,o){return!o||YC(i)||this.chart._animationsDisabled}_getSharedOptions(i,o){let r=this.resolveDataElementOptions(i,o),n=this._sharedOptions,s=this.getSharedOptions(r),a=this.includeOptions(o,s)||s!==n;return this.updateSharedOptions(s,o,r),{sharedOptions:s,includeOptions:a}}updateElement(i,o,r,n){YC(n)?Object.assign(i,r):this._resolveAnimations(o,n).update(i,r)}updateSharedOptions(i,o,r){i&&!YC(o)&&this._resolveAnimations(void 0,o).update(i,r)}_setStyle(i,o,r,n){i.active=n;let s=this.getStyle(o,n);this._resolveAnimations(o,r,n).update(i,{options:!n&&this.getSharedOptions(s)||s})}removeHoverStyle(i,o,r){this._setStyle(i,r,"active",!1)}setHoverStyle(i,o,r){this._setStyle(i,r,"active",!0)}_removeDatasetHoverStyle(){let i=this._cachedMeta.dataset;i&&this._setStyle(i,void 0,"active",!1)}_setDatasetHoverStyle(){let i=this._cachedMeta.dataset;i&&this._setStyle(i,void 0,"active",!0)}_resyncElements(i){let o=this._data,r=this._cachedMeta.data;for(let[l,d,c]of this._syncList)this[l](d,c);this._syncList=[];let n=r.length,s=o.length,a=Math.min(s,n);a&&this.parse(0,a),s>n?this._insertElements(n,s-n,i):s<n&&this._removeElements(s,n-s)}_insertElements(i,o,r=!0){let n=this._cachedMeta,s=n.data,a=i+o,l,d=c=>{for(c.length+=o,l=c.length-1;l>=a;l--)c[l]=c[l-o]};for(d(s),l=i;l<a;++l)s[l]=new this.dataElementType;this._parsing&&d(n._parsed),this.parse(i,o),r&&this.updateElements(s,i,o,"reset")}updateElements(i,o,r,n){}_removeElements(i,o){let r=this._cachedMeta;if(this._parsing){let n=r._parsed.splice(i,o);r._stacked&&pc(r,n)}r.data.splice(i,o)}_sync(i){if(this._parsing)this._syncList.push(i);else{let[o,r,n]=i;this[o](r,n)}this.chart._dataChanges.push([this.index,...i])}_onDataPush(){let i=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-i,i])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(i,o){o&&this._sync(["_removeElements",i,o]);let r=arguments.length-2;r&&this._sync(["_insertElements",i,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}return t})();function L1(t,e){if(!t._cache.$bar){let i=t.getMatchingVisibleMetas(e),o=[];for(let r=0,n=i.length;r<n;r++)o=o.concat(i[r].controller.getAllParsedValues(t));t._cache.$bar=MC(o.sort((r,n)=>r-n))}return t._cache.$bar}function N1(t){let e=t.iScale,i=L1(e,t.type),o=e._length,r,n,s,a,l=()=>{s===32767||s===-32768||(Ga(a)&&(o=Math.min(o,Math.abs(s-a)||o)),a=s)};for(r=0,n=i.length;r<n;++r)s=e.getPixelForValue(i[r]),l();for(a=void 0,r=0,n=e.ticks.length;r<n;++r)s=e.getPixelForTick(r),l();return o}function z1(t,e,i,o){let r=i.barThickness,n,s;return xe(r)?(n=e.min*i.categoryPercentage,s=i.barPercentage):(n=r*o,s=1),{chunk:n/o,ratio:s,start:e.pixels[t]-n/2}}function G1(t,e,i,o){let r=e.pixels,n=r[t],s=t>0?r[t-1]:null,a=t<r.length-1?r[t+1]:null,l=i.categoryPercentage;s===null&&(s=n-(a===null?e.end-e.start:a-n)),a===null&&(a=n+n-s);let d=n-(n-Math.min(s,a))/2*l;return{chunk:Math.abs(a-s)/2*l/o,ratio:i.barPercentage,start:d}}function V1(t,e,i,o){let r=i.parse(t[0],o),n=i.parse(t[1],o),s=Math.min(r,n),a=Math.max(r,n),l=s,d=a;Math.abs(s)>Math.abs(a)&&(l=a,d=s),e[i.axis]=d,e._custom={barStart:l,barEnd:d,start:r,end:n,min:s,max:a}}function pR(t,e,i,o){return We(t)?V1(t,e,i,o):e[i.axis]=i.parse(t,o),e}function wD(t,e,i,o){let r=t.iScale,n=t.vScale,s=r.getLabels(),a=r===n,l=[],d,c,u,h;for(d=i,c=i+o;d<c;++d)h=e[d],u={},u[r.axis]=a||r.parse(s[d],d),l.push(pR(h,u,n,d));return l}function QC(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function H1(t,e,i){return t!==0?Ji(t):(e.isHorizontal()?1:-1)*(e.min>=i?1:-1)}function B1(t){let e,i,o,r,n;return t.horizontal?(e=t.base>t.x,i="left",o="right"):(e=t.base<t.y,i="bottom",o="top"),e?(r="end",n="start"):(r="start",n="end"),{start:i,end:o,reverse:e,top:r,bottom:n}}function W1(t,e,i,o){let r=e.borderSkipped,n={};if(!r){t.borderSkipped=n;return}if(r===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}let{start:s,end:a,reverse:l,top:d,bottom:c}=B1(t);r==="middle"&&i&&(t.enableBorderRadius=!0,(i._top||0)===o?r=d:(i._bottom||0)===o?r=c:(n[yD(c,s,a,l)]=!0,r=d)),n[yD(r,s,a,l)]=!0,t.borderSkipped=n}function yD(t,e,i,o){return o?(t=U1(t,e,i),t=bD(t,i,e)):t=bD(t,e,i),t}function U1(t,e,i){return t===e?i:t===i?e:t}function bD(t,e,i){return t==="start"?e:t==="end"?i:t}function j1(t,{inflateAmount:e},i){t.inflateAmount=e==="auto"?i===1?.33:0:e}var q1=(()=>{class t extends Yr{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(i,o,r,n){return wD(i,o,r,n)}parseArrayData(i,o,r,n){return wD(i,o,r,n)}parseObjectData(i,o,r,n){let{iScale:s,vScale:a}=i,{xAxisKey:l="x",yAxisKey:d="y"}=this._parsing,c=s.axis==="x"?l:d,u=a.axis==="x"?l:d,h=[],p,m,C,w;for(p=r,m=r+n;p<m;++p)w=o[p],C={},C[s.axis]=s.parse(Qo(w,c),p),h.push(pR(Qo(w,u),C,a,p));return h}updateRangeFromParsed(i,o,r,n){super.updateRangeFromParsed(i,o,r,n);let s=r._custom;s&&o===this._cachedMeta.vScale&&(i.min=Math.min(i.min,s.min),i.max=Math.max(i.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(i){let o=this._cachedMeta,{iScale:r,vScale:n}=o,s=this.getParsed(i),a=s._custom,l=QC(a)?"["+a.start+", "+a.end+"]":""+n.getLabelForValue(s[n.axis]);return{label:""+r.getLabelForValue(s[r.axis]),value:l}}initialize(){this.enableOptionSharing=!0,super.initialize();let i=this._cachedMeta;i.stack=this.getDataset().stack}update(i){let o=this._cachedMeta;this.updateElements(o.data,0,o.data.length,i)}updateElements(i,o,r,n){let s=n==="reset",{index:a,_cachedMeta:{vScale:l}}=this,d=l.getBasePixel(),c=l.isHorizontal(),u=this._getRuler(),{sharedOptions:h,includeOptions:p}=this._getSharedOptions(o,n);for(let m=o;m<o+r;m++){let C=this.getParsed(m),w=s||xe(C[l.axis])?{base:d,head:d}:this._calculateBarValuePixels(m),b=this._calculateBarIndexPixels(m,u),y=(C._stacks||{})[l.axis],_={horizontal:c,base:w.base,enableBorderRadius:!y||QC(C._custom)||a===y._top||a===y._bottom,x:c?w.head:b.center,y:c?b.center:w.head,height:c?b.size:Math.abs(w.size),width:c?Math.abs(w.size):b.size};p&&(_.options=h||this.resolveDataElementOptions(m,i[m].active?"active":n));let x=_.options||i[m].options;W1(_,x,y,a),j1(_,x,u.ratio),this.updateElement(i[m],m,_,n)}}_getStacks(i,o){let{iScale:r}=this._cachedMeta,n=r.getMatchingVisibleMetas(this._type).filter(d=>d.controller.options.grouped),s=r.options.stacked,a=[],l=d=>{let c=d.controller.getParsed(o),u=c&&c[d.vScale.axis];if(xe(u)||isNaN(u))return!0};for(let d of n)if(!(o!==void 0&&l(d))&&((s===!1||a.indexOf(d.stack)===-1||s===void 0&&d.stack===void 0)&&a.push(d.stack),d.index===i))break;return a.length||a.push(void 0),a}_getStackCount(i){return this._getStacks(void 0,i).length}_getStackIndex(i,o,r){let n=this._getStacks(i,r),s=o!==void 0?n.indexOf(o):-1;return s===-1?n.length-1:s}_getRuler(){let i=this.options,o=this._cachedMeta,r=o.iScale,n=[],s,a;for(s=0,a=o.data.length;s<a;++s)n.push(r.getPixelForValue(this.getParsed(s)[r.axis],s));let l=i.barThickness;return{min:l||N1(o),pixels:n,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:i.grouped,ratio:l?1:i.categoryPercentage*i.barPercentage}}_calculateBarValuePixels(i){let{_cachedMeta:{vScale:o,_stacked:r,index:n},options:{base:s,minBarLength:a}}=this,l=s||0,d=this.getParsed(i),c=d._custom,u=QC(c),h=d[o.axis],p=0,m=r?this.applyStack(o,d,r):h,C,w;m!==h&&(p=m-h,m=h),u&&(h=c.barStart,m=c.barEnd-c.barStart,h!==0&&Ji(h)!==Ji(c.barEnd)&&(p=0),p+=h);let b=!xe(s)&&!u?s:p,y=o.getPixelForValue(b);if(this.chart.getDataVisibility(i)?C=o.getPixelForValue(p+m):C=y,w=C-y,Math.abs(w)<a){w=H1(w,o,l)*a,h===l&&(y-=w/2);let _=o.getPixelForDecimal(0),x=o.getPixelForDecimal(1),E=Math.min(_,x),D=Math.max(_,x);y=Math.max(Math.min(y,D),E),C=y+w,r&&!u&&(d._stacks[o.axis]._visualValues[n]=o.getValueForPixel(C)-o.getValueForPixel(y))}if(y===o.getPixelForValue(l)){let _=Ji(w)*o.getLineWidthForValue(l)/2;y+=_,w-=_}return{size:w,base:y,head:C,center:C+w/2}}_calculateBarIndexPixels(i,o){let r=o.scale,n=this.options,s=n.skipNull,a=ue(n.maxBarThickness,1/0),l,d;if(o.grouped){let c=s?this._getStackCount(i):o.stackCount,u=n.barThickness==="flex"?G1(i,o,n,c):z1(i,o,n,c),h=this._getStackIndex(this.index,this._cachedMeta.stack,s?i:void 0);l=u.start+u.chunk*h+u.chunk/2,d=Math.min(a,u.chunk*u.ratio)}else l=r.getPixelForValue(this.getParsed(i)[r.axis],i),d=Math.min(a,o.min*o.ratio);return{base:l-d/2,head:l+d/2,center:l,size:d}}draw(){let i=this._cachedMeta,o=i.vScale,r=i.data,n=r.length,s=0;for(;s<n;++s)this.getParsed(s)[o.axis]!==null&&!r[s].hidden&&r[s].draw(this._ctx)}}return t})(),K1=(()=>{class t extends Yr{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(i,o,r,n){let s=super.parsePrimitiveData(i,o,r,n);for(let a=0;a<s.length;a++)s[a]._custom=this.resolveDataElementOptions(a+r).radius;return s}parseArrayData(i,o,r,n){let s=super.parseArrayData(i,o,r,n);for(let a=0;a<s.length;a++){let l=o[r+a];s[a]._custom=ue(l[2],this.resolveDataElementOptions(a+r).radius)}return s}parseObjectData(i,o,r,n){let s=super.parseObjectData(i,o,r,n);for(let a=0;a<s.length;a++){let l=o[r+a];s[a]._custom=ue(l&&l.r&&+l.r,this.resolveDataElementOptions(a+r).radius)}return s}getMaxOverflow(){let i=this._cachedMeta.data,o=0;for(let r=i.length-1;r>=0;--r)o=Math.max(o,i[r].size(this.resolveDataElementOptions(r))/2);return o>0&&o}getLabelAndValue(i){let o=this._cachedMeta,r=this.chart.data.labels||[],{xScale:n,yScale:s}=o,a=this.getParsed(i),l=n.getLabelForValue(a.x),d=s.getLabelForValue(a.y),c=a._custom;return{label:r[i]||"",value:"("+l+", "+d+(c?", "+c:"")+")"}}update(i){let o=this._cachedMeta.data;this.updateElements(o,0,o.length,i)}updateElements(i,o,r,n){let s=n==="reset",{iScale:a,vScale:l}=this._cachedMeta,{sharedOptions:d,includeOptions:c}=this._getSharedOptions(o,n),u=a.axis,h=l.axis;for(let p=o;p<o+r;p++){let m=i[p],C=!s&&this.getParsed(p),w={},b=w[u]=s?a.getPixelForDecimal(.5):a.getPixelForValue(C[u]),y=w[h]=s?l.getBasePixel():l.getPixelForValue(C[h]);w.skip=isNaN(b)||isNaN(y),c&&(w.options=d||this.resolveDataElementOptions(p,m.active?"active":n),s&&(w.options.radius=0)),this.updateElement(m,p,w,n)}}resolveDataElementOptions(i,o){let r=this.getParsed(i),n=super.resolveDataElementOptions(i,o);n.$shared&&(n=Object.assign({},n,{$shared:!1}));let s=n.radius;return o!=="active"&&(n.radius=0),n.radius+=ue(r&&r._custom,s),n}}return t})();function $1(t,e,i){let o=1,r=1,n=0,s=0;if(e<je){let a=t,l=a+e,d=Math.cos(a),c=Math.sin(a),u=Math.cos(l),h=Math.sin(l),p=(_,x,E)=>Ha(_,a,l,!0)?1:Math.max(x,x*i,E,E*i),m=(_,x,E)=>Ha(_,a,l,!0)?-1:Math.min(x,x*i,E,E*i),C=p(0,d,u),w=p(et,c,h),b=m(Ue,d,u),y=m(Ue+et,c,h);o=(C-b)/2,r=(w-y)/2,n=-(C+b)/2,s=-(w+y)/2}return{ratioX:o,ratioY:r,offsetX:n,offsetY:s}}var _w=(()=>{class t extends Yr{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:i=>i!=="spacing",_indexable:i=>i!=="spacing"&&!i.startsWith("borderDash")&&!i.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(i){let o=i.data;if(o.labels.length&&o.datasets.length){let{labels:{pointStyle:r,color:n}}=i.legend.options;return o.labels.map((s,a)=>{let d=i.getDatasetMeta(0).controller.getStyle(a);return{text:s,fillStyle:d.backgroundColor,strokeStyle:d.borderColor,fontColor:n,lineWidth:d.borderWidth,pointStyle:r,hidden:!i.getDataVisibility(a),index:a}})}return[]}},onClick(i,o,r){r.chart.toggleDataVisibility(o.index),r.chart.update()}}}};constructor(i,o){super(i,o),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(i,o){let r=this.getDataset().data,n=this._cachedMeta;if(this._parsing===!1)n._parsed=r;else{let s=d=>+r[d];if(Ce(r[i])){let{key:d="value"}=this._parsing;s=c=>+Qo(r[c],d)}let a,l;for(a=i,l=i+o;a<l;++a)n._parsed[a]=s(a)}}_getRotation(){return Ni(this.options.rotation-90)}_getCircumference(){return Ni(this.options.circumference)}_getRotationExtents(){let i=je,o=-je;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){let n=this.chart.getDatasetMeta(r).controller,s=n._getRotation(),a=n._getCircumference();i=Math.min(i,s),o=Math.max(o,s+a)}return{rotation:i,circumference:o-i}}update(i){let o=this.chart,{chartArea:r}=o,n=this._cachedMeta,s=n.data,a=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,l=Math.max((Math.min(r.width,r.height)-a)/2,0),d=Math.min(z0(this.options.cutout,l),1),c=this._getRingWeight(this.index),{circumference:u,rotation:h}=this._getRotationExtents(),{ratioX:p,ratioY:m,offsetX:C,offsetY:w}=$1(h,u,d),b=(r.width-a)/p,y=(r.height-a)/m,_=Math.max(Math.min(b,y)/2,0),x=bC(this.options.radius,_),E=Math.max(x*d,0),D=(x-E)/this._getVisibleDatasetWeightTotal();this.offsetX=C*x,this.offsetY=w*x,n.total=this.calculateTotal(),this.outerRadius=x-D*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-D*c,0),this.updateElements(s,0,s.length,i)}_circumference(i,o){let r=this.options,n=this._cachedMeta,s=this._getCircumference();return o&&r.animation.animateRotate||!this.chart.getDataVisibility(i)||n._parsed[i]===null||n.data[i].hidden?0:this.calculateCircumference(n._parsed[i]*s/je)}updateElements(i,o,r,n){let s=n==="reset",a=this.chart,l=a.chartArea,c=a.options.animation,u=(l.left+l.right)/2,h=(l.top+l.bottom)/2,p=s&&c.animateScale,m=p?0:this.innerRadius,C=p?0:this.outerRadius,{sharedOptions:w,includeOptions:b}=this._getSharedOptions(o,n),y=this._getRotation(),_;for(_=0;_<o;++_)y+=this._circumference(_,s);for(_=o;_<o+r;++_){let x=this._circumference(_,s),E=i[_],D={x:u+this.offsetX,y:h+this.offsetY,startAngle:y,endAngle:y+x,circumference:x,outerRadius:C,innerRadius:m};b&&(D.options=w||this.resolveDataElementOptions(_,E.active?"active":n)),y+=x,this.updateElement(E,_,D,n)}}calculateTotal(){let i=this._cachedMeta,o=i.data,r=0,n;for(n=0;n<o.length;n++){let s=i._parsed[n];s!==null&&!isNaN(s)&&this.chart.getDataVisibility(n)&&!o[n].hidden&&(r+=Math.abs(s))}return r}calculateCircumference(i){let o=this._cachedMeta.total;return o>0&&!isNaN(i)?je*(Math.abs(i)/o):0}getLabelAndValue(i){let o=this._cachedMeta,r=this.chart,n=r.data.labels||[],s=Ba(o._parsed[i],r.options.locale);return{label:n[i]||"",value:s}}getMaxBorderWidth(i){let o=0,r=this.chart,n,s,a,l,d;if(!i){for(n=0,s=r.data.datasets.length;n<s;++n)if(r.isDatasetVisible(n)){a=r.getDatasetMeta(n),i=a.data,l=a.controller;break}}if(!i)return 0;for(n=0,s=i.length;n<s;++n)d=l.resolveDataElementOptions(n),d.borderAlign!=="inner"&&(o=Math.max(o,d.borderWidth||0,d.hoverBorderWidth||0));return o}getMaxOffset(i){let o=0;for(let r=0,n=i.length;r<n;++r){let s=this.resolveDataElementOptions(r);o=Math.max(o,s.offset||0,s.hoverOffset||0)}return o}_getRingWeightOffset(i){let o=0;for(let r=0;r<i;++r)this.chart.isDatasetVisible(r)&&(o+=this._getRingWeight(r));return o}_getRingWeight(i){return Math.max(ue(this.chart.data.datasets[i].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}return t})(),Y1=(()=>{class t extends Yr{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(i){let o=this._cachedMeta,{dataset:r,data:n=[],_dataset:s}=o,a=this.chart._animationsDisabled,{start:l,count:d}=IC(o,n,a);this._drawStart=l,this._drawCount=d,PC(o)&&(l=0,d=n.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!s._decimated,r.points=n;let c=this.resolveDatasetElementOptions(i);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(r,void 0,{animated:!a,options:c},i),this.updateElements(n,l,d,i)}updateElements(i,o,r,n){let s=n==="reset",{iScale:a,vScale:l,_stacked:d,_dataset:c}=this._cachedMeta,{sharedOptions:u,includeOptions:h}=this._getSharedOptions(o,n),p=a.axis,m=l.axis,{spanGaps:C,segment:w}=this.options,b=ns(C)?C:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||s||n==="none",_=o+r,x=i.length,E=o>0&&this.getParsed(o-1);for(let D=0;D<x;++D){let R=i[D],P=y?R:{};if(D<o||D>=_){P.skip=!0;continue}let N=this.getParsed(D),$=xe(N[m]),K=P[p]=a.getPixelForValue(N[p],D),ae=P[m]=s||$?l.getBasePixel():l.getPixelForValue(d?this.applyStack(l,N,d):N[m],D);P.skip=isNaN(K)||isNaN(ae)||$,P.stop=D>0&&Math.abs(N[p]-E[p])>b,w&&(P.parsed=N,P.raw=c.data[D]),h&&(P.options=u||this.resolveDataElementOptions(D,R.active?"active":n)),y||this.updateElement(R,D,P,n),E=N}}getMaxOverflow(){let i=this._cachedMeta,o=i.dataset,r=o.options&&o.options.borderWidth||0,n=i.data||[];if(!n.length)return r;let s=n[0].size(this.resolveDataElementOptions(0)),a=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(r,s,a)/2}draw(){let i=this._cachedMeta;i.dataset.updateControlPoints(this.chart.chartArea,i.iScale.axis),super.draw()}}return t})(),fR=(()=>{class t extends Yr{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(i){let o=i.data;if(o.labels.length&&o.datasets.length){let{labels:{pointStyle:r,color:n}}=i.legend.options;return o.labels.map((s,a)=>{let d=i.getDatasetMeta(0).controller.getStyle(a);return{text:s,fillStyle:d.backgroundColor,strokeStyle:d.borderColor,fontColor:n,lineWidth:d.borderWidth,pointStyle:r,hidden:!i.getDataVisibility(a),index:a}})}return[]}},onClick(i,o,r){r.chart.toggleDataVisibility(o.index),r.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(i,o){super(i,o),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(i){let o=this._cachedMeta,r=this.chart,n=r.data.labels||[],s=Ba(o._parsed[i].r,r.options.locale);return{label:n[i]||"",value:s}}parseObjectData(i,o,r,n){return HC.bind(this)(i,o,r,n)}update(i){let o=this._cachedMeta.data;this._updateRadius(),this.updateElements(o,0,o.length,i)}getMinMax(){let i=this._cachedMeta,o={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return i.data.forEach((r,n)=>{let s=this.getParsed(n).r;!isNaN(s)&&this.chart.getDataVisibility(n)&&(s<o.min&&(o.min=s),s>o.max&&(o.max=s))}),o}_updateRadius(){let i=this.chart,o=i.chartArea,r=i.options,n=Math.min(o.right-o.left,o.bottom-o.top),s=Math.max(n/2,0),a=Math.max(r.cutoutPercentage?s/100*r.cutoutPercentage:1,0),l=(s-a)/i.getVisibleDatasetCount();this.outerRadius=s-l*this.index,this.innerRadius=this.outerRadius-l}updateElements(i,o,r,n){let s=n==="reset",a=this.chart,d=a.options.animation,c=this._cachedMeta.rScale,u=c.xCenter,h=c.yCenter,p=c.getIndexAngle(0)-.5*Ue,m=p,C,w=360/this.countVisibleElements();for(C=0;C<o;++C)m+=this._computeAngle(C,n,w);for(C=o;C<o+r;C++){let b=i[C],y=m,_=m+this._computeAngle(C,n,w),x=a.getDataVisibility(C)?c.getDistanceFromCenterForValue(this.getParsed(C).r):0;m=_,s&&(d.animateScale&&(x=0),d.animateRotate&&(y=_=p));let E={x:u,y:h,innerRadius:0,outerRadius:x,startAngle:y,endAngle:_,options:this.resolveDataElementOptions(C,b.active?"active":n)};this.updateElement(b,C,E,n)}}countVisibleElements(){let i=this._cachedMeta,o=0;return i.data.forEach((r,n)=>{!isNaN(this.getParsed(n).r)&&this.chart.getDataVisibility(n)&&o++}),o}_computeAngle(i,o,r){return this.chart.getDataVisibility(i)?Ni(this.resolveDataElementOptions(i,o).angle||r):0}}return t})(),Q1=(()=>{class t extends _w{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}return t})(),X1=(()=>{class t extends Yr{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(i){let o=this._cachedMeta.vScale,r=this.getParsed(i);return{label:o.getLabels()[i],value:""+o.getLabelForValue(r[o.axis])}}parseObjectData(i,o,r,n){return HC.bind(this)(i,o,r,n)}update(i){let o=this._cachedMeta,r=o.dataset,n=o.data||[],s=o.iScale.getLabels();if(r.points=n,i!=="resize"){let a=this.resolveDatasetElementOptions(i);this.options.showLine||(a.borderWidth=0);let l={_loop:!0,_fullLoop:s.length===n.length,options:a};this.updateElement(r,void 0,l,i)}this.updateElements(n,0,n.length,i)}updateElements(i,o,r,n){let s=this._cachedMeta.rScale,a=n==="reset";for(let l=o;l<o+r;l++){let d=i[l],c=this.resolveDataElementOptions(l,d.active?"active":n),u=s.getPointPositionForValue(l,this.getParsed(l).r),h=a?s.xCenter:u.x,p=a?s.yCenter:u.y,m={x:h,y:p,angle:u.angle,skip:isNaN(h)||isNaN(p),options:c};this.updateElement(d,l,m,n)}}}return t})(),Z1=(()=>{class t extends Yr{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(i){let o=this._cachedMeta,r=this.chart.data.labels||[],{xScale:n,yScale:s}=o,a=this.getParsed(i),l=n.getLabelForValue(a.x),d=s.getLabelForValue(a.y);return{label:r[i]||"",value:"("+l+", "+d+")"}}update(i){let o=this._cachedMeta,{data:r=[]}=o,n=this.chart._animationsDisabled,{start:s,count:a}=IC(o,r,n);if(this._drawStart=s,this._drawCount=a,PC(o)&&(s=0,a=r.length),this.options.showLine){this.datasetElementType||this.addElements();let{dataset:l,_dataset:d}=o;l._chart=this.chart,l._datasetIndex=this.index,l._decimated=!!d._decimated,l.points=r;let c=this.resolveDatasetElementOptions(i);c.segment=this.options.segment,this.updateElement(l,void 0,{animated:!n,options:c},i)}else this.datasetElementType&&(delete o.dataset,this.datasetElementType=!1);this.updateElements(r,s,a,i)}addElements(){let{showLine:i}=this.options;!this.datasetElementType&&i&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(i,o,r,n){let s=n==="reset",{iScale:a,vScale:l,_stacked:d,_dataset:c}=this._cachedMeta,u=this.resolveDataElementOptions(o,n),h=this.getSharedOptions(u),p=this.includeOptions(n,h),m=a.axis,C=l.axis,{spanGaps:w,segment:b}=this.options,y=ns(w)?w:Number.POSITIVE_INFINITY,_=this.chart._animationsDisabled||s||n==="none",x=o>0&&this.getParsed(o-1);for(let E=o;E<o+r;++E){let D=i[E],R=this.getParsed(E),P=_?D:{},N=xe(R[C]),$=P[m]=a.getPixelForValue(R[m],E),K=P[C]=s||N?l.getBasePixel():l.getPixelForValue(d?this.applyStack(l,R,d):R[C],E);P.skip=isNaN($)||isNaN(K)||N,P.stop=E>0&&Math.abs(R[m]-x[m])>y,b&&(P.parsed=R,P.raw=c.data[E]),p&&(P.options=h||this.resolveDataElementOptions(E,D.active?"active":n)),_||this.updateElement(D,E,P,n),x=R}this.updateSharedOptions(h,n,u)}getMaxOverflow(){let i=this._cachedMeta,o=i.data||[];if(!this.options.showLine){let l=0;for(let d=o.length-1;d>=0;--d)l=Math.max(l,o[d].size(this.resolveDataElementOptions(d))/2);return l>0&&l}let r=i.dataset,n=r.options&&r.options.borderWidth||0;if(!o.length)return n;let s=o[0].size(this.resolveDataElementOptions(0)),a=o[o.length-1].size(this.resolveDataElementOptions(o.length-1));return Math.max(n,s,a)/2}}return t})(),J1=Object.freeze({__proto__:null,BarController:q1,BubbleController:K1,DoughnutController:_w,LineController:Y1,PieController:Q1,PolarAreaController:fR,RadarController:X1,ScatterController:Z1});function as(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var nw=class t{static override(e){Object.assign(t.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return as()}parse(){return as()}format(){return as()}add(){return as()}diff(){return as()}startOf(){return as()}endOf(){return as()}},eG={_date:nw};function tG(t,e,i,o){let{controller:r,data:n,_sorted:s}=t,a=r._cachedMeta.iScale;if(a&&e===a.axis&&e!=="r"&&s&&n.length){let l=a._reversePixels?U0:yo;if(o){if(r._sharedOptions){let d=n[0],c=typeof d.getRange=="function"&&d.getRange(e);if(c){let u=l(n,e,i-c),h=l(n,e,i+c);return{lo:u.lo,hi:h.hi}}}}else return l(n,e,i)}return{lo:0,hi:n.length-1}}function _c(t,e,i,o,r){let n=t.getSortedVisibleDatasetMetas(),s=i[e];for(let a=0,l=n.length;a<l;++a){let{index:d,data:c}=n[a],{lo:u,hi:h}=tG(n[a],e,s,r);for(let p=u;p<=h;++p){let m=c[p];m.skip||o(m,d,p)}}}function iG(t){let e=t.indexOf("x")!==-1,i=t.indexOf("y")!==-1;return function(o,r){let n=e?Math.abs(o.x-r.x):0,s=i?Math.abs(o.y-r.y):0;return Math.sqrt(Math.pow(n,2)+Math.pow(s,2))}}function XC(t,e,i,o,r){let n=[];return!r&&!t.isPointInArea(e)||_c(t,i,e,function(a,l,d){!r&&!bo(a,t.chartArea,0)||a.inRange(e.x,e.y,o)&&n.push({element:a,datasetIndex:l,index:d})},!0),n}function oG(t,e,i,o){let r=[];function n(s,a,l){let{startAngle:d,endAngle:c}=s.getProps(["startAngle","endAngle"],o),{angle:u}=DC(s,{x:e.x,y:e.y});Ha(u,d,c)&&r.push({element:s,datasetIndex:a,index:l})}return _c(t,i,e,n),r}function rG(t,e,i,o,r,n){let s=[],a=iG(i),l=Number.POSITIVE_INFINITY;function d(c,u,h){let p=c.inRange(e.x,e.y,r);if(o&&!p)return;let m=c.getCenterPoint(r);if(!(!!n||t.isPointInArea(m))&&!p)return;let w=a(e,m);w<l?(s=[{element:c,datasetIndex:u,index:h}],l=w):w===l&&s.push({element:c,datasetIndex:u,index:h})}return _c(t,i,e,d),s}function ZC(t,e,i,o,r,n){return!n&&!t.isPointInArea(e)?[]:i==="r"&&!o?oG(t,e,i,r):rG(t,e,i,o,r,n)}function SD(t,e,i,o,r){let n=[],s=i==="x"?"inXRange":"inYRange",a=!1;return _c(t,i,e,(l,d,c)=>{l[s](e[i],r)&&(n.push({element:l,datasetIndex:d,index:c}),a=a||l.inRange(e.x,e.y,r))}),o&&!a?[]:n}var nG={evaluateInteractionItems:_c,modes:{index(t,e,i,o){let r=Kr(e,t),n=i.axis||"x",s=i.includeInvisible||!1,a=i.intersect?XC(t,r,n,o,s):ZC(t,r,n,!1,o,s),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(d=>{let c=a[0].index,u=d.data[c];u&&!u.skip&&l.push({element:u,datasetIndex:d.index,index:c})}),l):[]},dataset(t,e,i,o){let r=Kr(e,t),n=i.axis||"xy",s=i.includeInvisible||!1,a=i.intersect?XC(t,r,n,o,s):ZC(t,r,n,!1,o,s);if(a.length>0){let l=a[0].datasetIndex,d=t.getDatasetMeta(l).data;a=[];for(let c=0;c<d.length;++c)a.push({element:d[c],datasetIndex:l,index:c})}return a},point(t,e,i,o){let r=Kr(e,t),n=i.axis||"xy",s=i.includeInvisible||!1;return XC(t,r,n,o,s)},nearest(t,e,i,o){let r=Kr(e,t),n=i.axis||"xy",s=i.includeInvisible||!1;return ZC(t,r,n,i.intersect,o,s)},x(t,e,i,o){let r=Kr(e,t);return SD(t,r,"x",i.intersect,o)},y(t,e,i,o){let r=Kr(e,t);return SD(t,r,"y",i.intersect,o)}}},mR=["left","top","right","bottom"];function fc(t,e){return t.filter(i=>i.pos===e)}function xD(t,e){return t.filter(i=>mR.indexOf(i.pos)===-1&&i.box.axis===e)}function mc(t,e){return t.sort((i,o)=>{let r=e?o:i,n=e?i:o;return r.weight===n.weight?r.index-n.index:r.weight-n.weight})}function sG(t){let e=[],i,o,r,n,s,a;for(i=0,o=(t||[]).length;i<o;++i)r=t[i],{position:n,options:{stack:s,stackWeight:a=1}}=r,e.push({index:i,box:r,pos:n,horizontal:r.isHorizontal(),weight:r.weight,stack:s&&n+s,stackWeight:a});return e}function aG(t){let e={};for(let i of t){let{stack:o,pos:r,stackWeight:n}=i;if(!o||!mR.includes(r))continue;let s=e[o]||(e[o]={count:0,placed:0,weight:0,size:0});s.count++,s.weight+=n}return e}function lG(t,e){let i=aG(t),{vBoxMaxWidth:o,hBoxMaxHeight:r}=e,n,s,a;for(n=0,s=t.length;n<s;++n){a=t[n];let{fullSize:l}=a.box,d=i[a.stack],c=d&&a.stackWeight/d.weight;a.horizontal?(a.width=c?c*o:l&&e.availableWidth,a.height=r):(a.width=o,a.height=c?c*r:l&&e.availableHeight)}return i}function dG(t){let e=sG(t),i=mc(e.filter(d=>d.box.fullSize),!0),o=mc(fc(e,"left"),!0),r=mc(fc(e,"right")),n=mc(fc(e,"top"),!0),s=mc(fc(e,"bottom")),a=xD(e,"x"),l=xD(e,"y");return{fullSize:i,leftAndTop:o.concat(n),rightAndBottom:r.concat(l).concat(s).concat(a),chartArea:fc(e,"chartArea"),vertical:o.concat(r).concat(l),horizontal:n.concat(s).concat(a)}}function _D(t,e,i,o){return Math.max(t[i],e[i])+Math.max(t[o],e[o])}function vR(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function cG(t,e,i,o){let{pos:r,box:n}=i,s=t.maxPadding;if(!Ce(r)){i.size&&(t[r]-=i.size);let u=o[i.stack]||{size:0,count:1};u.size=Math.max(u.size,i.horizontal?n.height:n.width),i.size=u.size/u.count,t[r]+=i.size}n.getPadding&&vR(s,n.getPadding());let a=Math.max(0,e.outerWidth-_D(s,t,"left","right")),l=Math.max(0,e.outerHeight-_D(s,t,"top","bottom")),d=a!==t.w,c=l!==t.h;return t.w=a,t.h=l,i.horizontal?{same:d,other:c}:{same:c,other:d}}function uG(t){let e=t.maxPadding;function i(o){let r=Math.max(e[o]-t[o],0);return t[o]+=r,r}t.y+=i("top"),t.x+=i("left"),i("right"),i("bottom")}function hG(t,e){let i=e.maxPadding;function o(r){let n={left:0,top:0,right:0,bottom:0};return r.forEach(s=>{n[s]=Math.max(e[s],i[s])}),n}return o(t?["left","right"]:["top","bottom"])}function wc(t,e,i,o){let r=[],n,s,a,l,d,c;for(n=0,s=t.length,d=0;n<s;++n){a=t[n],l=a.box,l.update(a.width||e.w,a.height||e.h,hG(a.horizontal,e));let{same:u,other:h}=cG(e,i,a,o);d|=u&&r.length,c=c||h,l.fullSize||r.push(a)}return d&&wc(r,e,i,o)||c}function bg(t,e,i,o,r){t.top=i,t.left=e,t.right=e+o,t.bottom=i+r,t.width=o,t.height=r}function ED(t,e,i,o){let r=i.padding,{x:n,y:s}=e;for(let a of t){let l=a.box,d=o[a.stack]||{count:1,placed:0,weight:1},c=a.stackWeight/d.weight||1;if(a.horizontal){let u=e.w*c,h=d.size||l.height;Ga(d.start)&&(s=d.start),l.fullSize?bg(l,r.left,s,i.outerWidth-r.right-r.left,h):bg(l,e.left+d.placed,s,u,h),d.start=s,d.placed+=u,s=l.bottom}else{let u=e.h*c,h=d.size||l.width;Ga(d.start)&&(n=d.start),l.fullSize?bg(l,n,r.top,h,i.outerHeight-r.bottom-r.top):bg(l,n,e.top+d.placed,h,u),d.start=n,d.placed+=u,n=l.right}}e.x=n,e.y=s}var Vt={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(i){e.draw(i)}}]},t.boxes.push(e)},removeBox(t,e){let i=t.boxes?t.boxes.indexOf(e):-1;i!==-1&&t.boxes.splice(i,1)},configure(t,e,i){e.fullSize=i.fullSize,e.position=i.position,e.weight=i.weight},update(t,e,i,o){if(!t)return;let r=Tt(t.options.layout.padding),n=Math.max(e-r.width,0),s=Math.max(i-r.height,0),a=dG(t.boxes),l=a.vertical,d=a.horizontal;Le(t.boxes,C=>{typeof C.beforeLayout=="function"&&C.beforeLayout()});let c=l.reduce((C,w)=>w.box.options&&w.box.options.display===!1?C:C+1,0)||1,u=Object.freeze({outerWidth:e,outerHeight:i,padding:r,availableWidth:n,availableHeight:s,vBoxMaxWidth:n/2/c,hBoxMaxHeight:s/2}),h=Object.assign({},r);vR(h,Tt(o));let p=Object.assign({maxPadding:h,w:n,h:s,x:r.left,y:r.top},r),m=lG(l.concat(d),u);wc(a.fullSize,p,u,m),wc(l,p,u,m),wc(d,p,u,m)&&wc(l,p,u,m),uG(p),ED(a.leftAndTop,p,u,m),p.x+=p.w,p.y+=p.h,ED(a.rightAndBottom,p,u,m),t.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},Le(a.chartArea,C=>{let w=C.box;Object.assign(w,t.chartArea),w.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}},Ig=class{acquireContext(e,i){}releaseContext(e){return!1}addEventListener(e,i,o){}removeEventListener(e,i,o){}getDevicePixelRatio(){return 1}getMaximumSize(e,i,o,r){return i=Math.max(0,i||e.width),o=o||e.height,{width:i,height:Math.max(0,r?Math.floor(i/r):o)}}isAttached(e){return!0}updateConfig(e){}},sw=class extends Ig{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}},Mg="$chartjs",gG={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},DD=t=>t===null||t==="";function pG(t,e){let i=t.style,o=t.getAttribute("height"),r=t.getAttribute("width");if(t[Mg]={initial:{height:o,width:r,style:{display:i.display,height:i.height,width:i.width}}},i.display=i.display||"block",i.boxSizing=i.boxSizing||"border-box",DD(r)){let n=WC(t,"width");n!==void 0&&(t.width=n)}if(DD(o))if(t.style.height==="")t.height=t.width/(e||2);else{let n=WC(t,"height");n!==void 0&&(t.height=n)}return t}var CR=aD?{passive:!0}:!1;function fG(t,e,i){t&&t.addEventListener(e,i,CR)}function mG(t,e,i){t&&t.canvas&&t.canvas.removeEventListener(e,i,CR)}function vG(t,e){let i=gG[t.type]||t.type,{x:o,y:r}=Kr(t,e);return{type:i,chart:e,native:t,x:o!==void 0?o:null,y:r!==void 0?r:null}}function Pg(t,e){for(let i of t)if(i===e||i.contains(e))return!0}function CG(t,e,i){let o=t.canvas,r=new MutationObserver(n=>{let s=!1;for(let a of n)s=s||Pg(a.addedNodes,o),s=s&&!Pg(a.removedNodes,o);s&&i()});return r.observe(document,{childList:!0,subtree:!0}),r}function wG(t,e,i){let o=t.canvas,r=new MutationObserver(n=>{let s=!1;for(let a of n)s=s||Pg(a.removedNodes,o),s=s&&!Pg(a.addedNodes,o);s&&i()});return r.observe(document,{childList:!0,subtree:!0}),r}var bc=new Map,RD=0;function wR(){let t=window.devicePixelRatio;t!==RD&&(RD=t,bc.forEach((e,i)=>{i.currentDevicePixelRatio!==t&&e()}))}function yG(t,e){bc.size||window.addEventListener("resize",wR),bc.set(t,e)}function bG(t){bc.delete(t),bc.size||window.removeEventListener("resize",wR)}function SG(t,e,i){let o=t.canvas,r=o&&wg(o);if(!r)return;let n=AC((a,l)=>{let d=r.clientWidth;i(a,l),d<r.clientWidth&&i()},window),s=new ResizeObserver(a=>{let l=a[0],d=l.contentRect.width,c=l.contentRect.height;d===0&&c===0||n(d,c)});return s.observe(r),yG(t,n),s}function JC(t,e,i){i&&i.disconnect(),e==="resize"&&bG(t)}function xG(t,e,i){let o=t.canvas,r=AC(n=>{t.ctx!==null&&i(vG(n,t))},t);return fG(o,e,r),r}var aw=class extends Ig{acquireContext(e,i){let o=e&&e.getContext&&e.getContext("2d");return o&&o.canvas===e?(pG(e,i),o):null}releaseContext(e){let i=e.canvas;if(!i[Mg])return!1;let o=i[Mg].initial;["height","width"].forEach(n=>{let s=o[n];xe(s)?i.removeAttribute(n):i.setAttribute(n,s)});let r=o.style||{};return Object.keys(r).forEach(n=>{i.style[n]=r[n]}),i.width=i.width,delete i[Mg],!0}addEventListener(e,i,o){this.removeEventListener(e,i);let r=e.$proxies||(e.$proxies={}),s={attach:CG,detach:wG,resize:SG}[i]||xG;r[i]=s(e,i,o)}removeEventListener(e,i){let o=e.$proxies||(e.$proxies={}),r=o[i];if(!r)return;({attach:JC,detach:JC,resize:JC}[i]||mG)(e,i,r),o[i]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,i,o,r){return sD(e,i,o,r)}isAttached(e){let i=e&&wg(e);return!!(i&&i.isConnected)}};function _G(t){return!Cg()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?sw:aw}var eo=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){let{x:i,y:o}=this.getProps(["x","y"],e);return{x:i,y:o}}hasValue(){return ns(this.x)&&ns(this.y)}getProps(e,i){let o=this.$animations;if(!i||!o)return this;let r={};return e.forEach(n=>{r[n]=o[n]&&o[n].active()?o[n]._to:this[n]}),r}};function EG(t,e){let i=t.options.ticks,o=DG(t),r=Math.min(i.maxTicksLimit||o,o),n=i.major.enabled?MG(e):[],s=n.length,a=n[0],l=n[s-1],d=[];if(s>r)return TG(e,d,n,s/r),d;let c=RG(n,e,r);if(s>0){let u,h,p=s>1?Math.round((l-a)/(s-1)):null;for(Sg(e,d,c,xe(p)?0:a-p,a),u=0,h=s-1;u<h;u++)Sg(e,d,c,n[u],n[u+1]);return Sg(e,d,c,l,xe(p)?e.length:l+p),d}return Sg(e,d,c),d}function DG(t){let e=t.options.offset,i=t._tickSize(),o=t._length/i+(e?0:1),r=t._maxLength/i;return Math.floor(Math.min(o,r))}function RG(t,e,i){let o=AG(t),r=e.length/i;if(!o)return Math.max(r,1);let n=H0(o);for(let s=0,a=n.length-1;s<a;s++){let l=n[s];if(l>r)return l}return Math.max(r,1)}function MG(t){let e=[],i,o;for(i=0,o=t.length;i<o;i++)t[i].major&&e.push(i);return e}function TG(t,e,i,o){let r=0,n=i[0],s;for(o=Math.ceil(o),s=0;s<t.length;s++)s===n&&(e.push(t[s]),r++,n=i[r*o])}function Sg(t,e,i,o,r){let n=ue(o,0),s=Math.min(ue(r,t.length),t.length),a=0,l,d,c;for(i=Math.ceil(i),r&&(l=r-o,i=l/Math.floor(l/i)),c=n;c<0;)a++,c=Math.round(n+a*i);for(d=Math.max(n,0);d<s;d++)d===c&&(e.push(t[d]),a++,c=Math.round(n+a*i))}function AG(t){let e=t.length,i,o;if(e<2)return!1;for(o=t[0],i=1;i<e;++i)if(t[i]-t[i-1]!==o)return!1;return o}var IG=t=>t==="left"?"right":t==="right"?"left":t,MD=(t,e,i)=>e==="top"||e==="left"?t[e]+i:t[e]-i,TD=(t,e)=>Math.min(e||t,t);function AD(t,e){let i=[],o=t.length/e,r=t.length,n=0;for(;n<r;n+=o)i.push(t[Math.floor(n)]);return i}function PG(t,e,i){let o=t.ticks.length,r=Math.min(e,o-1),n=t._startPixel,s=t._endPixel,a=1e-6,l=t.getPixelForTick(r),d;if(!(i&&(o===1?d=Math.max(l-n,s-l):e===0?d=(t.getPixelForTick(1)-l)/2:d=(l-t.getPixelForTick(r-1))/2,l+=r<e?d:-d,l<n-a||l>s+a)))return l}function FG(t,e){Le(t,i=>{let o=i.gc,r=o.length/2,n;if(r>e){for(n=0;n<r;++n)delete i.data[o[n]];o.splice(0,r)}})}function vc(t){return t.drawTicks?t.tickLength:0}function ID(t,e){if(!t.display)return 0;let i=ut(t.font,e),o=Tt(t.padding);return(We(t.text)?t.text.length:1)*i.lineHeight+o.height}function OG(t,e){return Xo(t,{scale:e,type:"scale"})}function kG(t,e,i){return Xo(t,{tick:i,index:e,type:"tick"})}function LG(t,e,i){let o=gg(t);return(i&&e!=="right"||!i&&e==="right")&&(o=IG(o)),o}function NG(t,e,i,o){let{top:r,left:n,bottom:s,right:a,chart:l}=t,{chartArea:d,scales:c}=l,u=0,h,p,m,C=s-r,w=a-n;if(t.isHorizontal()){if(p=Mt(o,n,a),Ce(i)){let b=Object.keys(i)[0],y=i[b];m=c[b].getPixelForValue(y)+C-e}else i==="center"?m=(d.bottom+d.top)/2+C-e:m=MD(t,i,e);h=a-n}else{if(Ce(i)){let b=Object.keys(i)[0],y=i[b];p=c[b].getPixelForValue(y)-w+e}else i==="center"?p=(d.left+d.right)/2-w+e:p=MD(t,i,e);m=Mt(o,s,r),u=i==="left"?-et:et}return{titleX:p,titleY:m,maxWidth:h,rotation:u}}var ds=class t extends eo{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,i){return e}getUserBounds(){let{_userMin:e,_userMax:i,_suggestedMin:o,_suggestedMax:r}=this;return e=ui(e,Number.POSITIVE_INFINITY),i=ui(i,Number.NEGATIVE_INFINITY),o=ui(o,Number.POSITIVE_INFINITY),r=ui(r,Number.NEGATIVE_INFINITY),{min:ui(e,o),max:ui(i,r),minDefined:Ze(e),maxDefined:Ze(i)}}getMinMax(e){let{min:i,max:o,minDefined:r,maxDefined:n}=this.getUserBounds(),s;if(r&&n)return{min:i,max:o};let a=this.getMatchingVisibleMetas();for(let l=0,d=a.length;l<d;++l)s=a[l].controller.getMinMax(this,e),r||(i=Math.min(i,s.min)),n||(o=Math.max(o,s.max));return i=n&&i>o?o:i,o=r&&i>o?i:o,{min:ui(i,ui(o,i)),max:ui(o,ui(i,o))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){let e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Ge(this.options.beforeUpdate,[this])}update(e,i,o){let{beginAtZero:r,grace:n,ticks:s}=this.options,a=s.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=i,this._margins=o=Object.assign({left:0,right:0,top:0,bottom:0},o),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+o.left+o.right:this.height+o.top+o.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=eD(this,n,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();let l=a<this.ticks.length;this._convertTicksToLabels(l?AD(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),s.display&&(s.autoSkip||s.source==="auto")&&(this.ticks=EG(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,i,o;this.isHorizontal()?(i=this.left,o=this.right):(i=this.top,o=this.bottom,e=!e),this._startPixel=i,this._endPixel=o,this._reversePixels=e,this._length=o-i,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Ge(this.options.afterUpdate,[this])}beforeSetDimensions(){Ge(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Ge(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Ge(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Ge(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){let i=this.options.ticks,o,r,n;for(o=0,r=e.length;o<r;o++)n=e[o],n.label=Ge(i.callback,[n.value,o,e],this)}afterTickToLabelConversion(){Ge(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Ge(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){let e=this.options,i=e.ticks,o=TD(this.ticks.length,e.ticks.maxTicksLimit),r=i.minRotation||0,n=i.maxRotation,s=r,a,l,d;if(!this._isVisible()||!i.display||r>=n||o<=1||!this.isHorizontal()){this.labelRotation=r;return}let c=this._getLabelSizes(),u=c.widest.width,h=c.highest.height,p=mt(this.chart.width-u,0,this.maxWidth);a=e.offset?this.maxWidth/o:p/(o-1),u+6>a&&(a=p/(o-(e.offset?.5:1)),l=this.maxHeight-vc(e.grid)-i.padding-ID(e.title,this.chart.options.font),d=Math.sqrt(u*u+h*h),s=ug(Math.min(Math.asin(mt((c.highest.height+6)/a,-1,1)),Math.asin(mt(l/d,-1,1))-Math.asin(mt(h/d,-1,1)))),s=Math.max(r,Math.min(n,s))),this.labelRotation=s}afterCalculateLabelRotation(){Ge(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Ge(this.options.beforeFit,[this])}fit(){let e={width:0,height:0},{chart:i,options:{ticks:o,title:r,grid:n}}=this,s=this._isVisible(),a=this.isHorizontal();if(s){let l=ID(r,i.options.font);if(a?(e.width=this.maxWidth,e.height=vc(n)+l):(e.height=this.maxHeight,e.width=vc(n)+l),o.display&&this.ticks.length){let{first:d,last:c,widest:u,highest:h}=this._getLabelSizes(),p=o.padding*2,m=Ni(this.labelRotation),C=Math.cos(m),w=Math.sin(m);if(a){let b=o.mirror?0:w*u.width+C*h.height;e.height=Math.min(this.maxHeight,e.height+b+p)}else{let b=o.mirror?0:C*u.width+w*h.height;e.width=Math.min(this.maxWidth,e.width+b+p)}this._calculatePadding(d,c,w,C)}}this._handleMargins(),a?(this.width=this._length=i.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=i.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,i,o,r){let{ticks:{align:n,padding:s},position:a}=this.options,l=this.labelRotation!==0,d=a!=="top"&&this.axis==="x";if(this.isHorizontal()){let c=this.getPixelForTick(0)-this.left,u=this.right-this.getPixelForTick(this.ticks.length-1),h=0,p=0;l?d?(h=r*e.width,p=o*i.height):(h=o*e.height,p=r*i.width):n==="start"?p=i.width:n==="end"?h=e.width:n!=="inner"&&(h=e.width/2,p=i.width/2),this.paddingLeft=Math.max((h-c+s)*this.width/(this.width-c),0),this.paddingRight=Math.max((p-u+s)*this.width/(this.width-u),0)}else{let c=i.height/2,u=e.height/2;n==="start"?(c=0,u=e.height):n==="end"&&(c=i.height,u=0),this.paddingTop=c+s,this.paddingBottom=u+s}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Ge(this.options.afterFit,[this])}isHorizontal(){let{axis:e,position:i}=this.options;return i==="top"||i==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let i,o;for(i=0,o=e.length;i<o;i++)xe(e[i].label)&&(e.splice(i,1),o--,i--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){let i=this.options.ticks.sampleSize,o=this.ticks;i<o.length&&(o=AD(o,i)),this._labelSizes=e=this._computeLabelSizes(o,o.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,i,o){let{ctx:r,_longestTextCache:n}=this,s=[],a=[],l=Math.floor(i/TD(i,o)),d=0,c=0,u,h,p,m,C,w,b,y,_,x,E;for(u=0;u<i;u+=l){if(m=e[u].label,C=this._resolveTickFontOptions(u),r.font=w=C.string,b=n[w]=n[w]||{data:{},gc:[]},y=C.lineHeight,_=x=0,!xe(m)&&!We(m))_=dc(r,b.data,b.gc,_,m),x=y;else if(We(m))for(h=0,p=m.length;h<p;++h)E=m[h],!xe(E)&&!We(E)&&(_=dc(r,b.data,b.gc,_,E),x+=y);s.push(_),a.push(x),d=Math.max(_,d),c=Math.max(x,c)}FG(n,i);let D=s.indexOf(d),R=a.indexOf(c),P=N=>({width:s[N]||0,height:a[N]||0});return{first:P(0),last:P(i-1),widest:P(D),highest:P(R),widths:s,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,i){return NaN}getValueForPixel(e){}getPixelForTick(e){let i=this.ticks;return e<0||e>i.length-1?null:this.getPixelForValue(i[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);let i=this._startPixel+e*this._length;return W0(this._alignToPixels?Ur(this.chart,i,0):i)}getDecimalForPixel(e){let i=(e-this._startPixel)/this._length;return this._reversePixels?1-i:i}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){let{min:e,max:i}=this;return e<0&&i<0?i:e>0&&i>0?e:0}getContext(e){let i=this.ticks||[];if(e>=0&&e<i.length){let o=i[e];return o.$context||(o.$context=kG(this.getContext(),e,o))}return this.$context||(this.$context=OG(this.chart.getContext(),this))}_tickSize(){let e=this.options.ticks,i=Ni(this.labelRotation),o=Math.abs(Math.cos(i)),r=Math.abs(Math.sin(i)),n=this._getLabelSizes(),s=e.autoSkipPadding||0,a=n?n.widest.width+s:0,l=n?n.highest.height+s:0;return this.isHorizontal()?l*o>a*r?a/o:l/r:l*r<a*o?l/o:a/r}_isVisible(){let e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){let i=this.axis,o=this.chart,r=this.options,{grid:n,position:s,border:a}=r,l=n.offset,d=this.isHorizontal(),u=this.ticks.length+(l?1:0),h=vc(n),p=[],m=a.setContext(this.getContext()),C=m.display?m.width:0,w=C/2,b=function(Ye){return Ur(o,Ye,C)},y,_,x,E,D,R,P,N,$,K,ae,Ne;if(s==="top")y=b(this.bottom),R=this.bottom-h,N=y-w,K=b(e.top)+w,Ne=e.bottom;else if(s==="bottom")y=b(this.top),K=e.top,Ne=b(e.bottom)-w,R=y+w,N=this.top+h;else if(s==="left")y=b(this.right),D=this.right-h,P=y-w,$=b(e.left)+w,ae=e.right;else if(s==="right")y=b(this.left),$=e.left,ae=b(e.right)-w,D=y+w,P=this.left+h;else if(i==="x"){if(s==="center")y=b((e.top+e.bottom)/2+.5);else if(Ce(s)){let Ye=Object.keys(s)[0],tt=s[Ye];y=b(this.chart.scales[Ye].getPixelForValue(tt))}K=e.top,Ne=e.bottom,R=y+w,N=R+h}else if(i==="y"){if(s==="center")y=b((e.left+e.right)/2);else if(Ce(s)){let Ye=Object.keys(s)[0],tt=s[Ye];y=b(this.chart.scales[Ye].getPixelForValue(tt))}D=y-w,P=D-h,$=e.left,ae=e.right}let At=ue(r.ticks.maxTicksLimit,u),Ie=Math.max(1,Math.ceil(u/At));for(_=0;_<u;_+=Ie){let Ye=this.getContext(_),tt=n.setContext(Ye),Vi=a.setContext(Ye),It=tt.lineWidth,cs=tt.color,Pc=Vi.dash||[],us=Vi.dashOffset,nl=tt.tickWidth,tn=tt.tickColor,sl=tt.tickBorderDash||[],on=tt.tickBorderDashOffset;x=PG(this,_,l),x!==void 0&&(E=Ur(o,x,It),d?D=P=$=ae=E:R=N=K=Ne=E,p.push({tx1:D,ty1:R,tx2:P,ty2:N,x1:$,y1:K,x2:ae,y2:Ne,width:It,color:cs,borderDash:Pc,borderDashOffset:us,tickWidth:nl,tickColor:tn,tickBorderDash:sl,tickBorderDashOffset:on}))}return this._ticksLength=u,this._borderValue=y,p}_computeLabelItems(e){let i=this.axis,o=this.options,{position:r,ticks:n}=o,s=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:d,padding:c,mirror:u}=n,h=vc(o.grid),p=h+c,m=u?-c:p,C=-Ni(this.labelRotation),w=[],b,y,_,x,E,D,R,P,N,$,K,ae,Ne="middle";if(r==="top")D=this.bottom-m,R=this._getXAxisLabelAlignment();else if(r==="bottom")D=this.top+m,R=this._getXAxisLabelAlignment();else if(r==="left"){let Ie=this._getYAxisLabelAlignment(h);R=Ie.textAlign,E=Ie.x}else if(r==="right"){let Ie=this._getYAxisLabelAlignment(h);R=Ie.textAlign,E=Ie.x}else if(i==="x"){if(r==="center")D=(e.top+e.bottom)/2+p;else if(Ce(r)){let Ie=Object.keys(r)[0],Ye=r[Ie];D=this.chart.scales[Ie].getPixelForValue(Ye)+p}R=this._getXAxisLabelAlignment()}else if(i==="y"){if(r==="center")E=(e.left+e.right)/2-p;else if(Ce(r)){let Ie=Object.keys(r)[0],Ye=r[Ie];E=this.chart.scales[Ie].getPixelForValue(Ye)}R=this._getYAxisLabelAlignment(h).textAlign}i==="y"&&(l==="start"?Ne="top":l==="end"&&(Ne="bottom"));let At=this._getLabelSizes();for(b=0,y=a.length;b<y;++b){_=a[b],x=_.label;let Ie=n.setContext(this.getContext(b));P=this.getPixelForTick(b)+n.labelOffset,N=this._resolveTickFontOptions(b),$=N.lineHeight,K=We(x)?x.length:1;let Ye=K/2,tt=Ie.color,Vi=Ie.textStrokeColor,It=Ie.textStrokeWidth,cs=R;s?(E=P,R==="inner"&&(b===y-1?cs=this.options.reverse?"left":"right":b===0?cs=this.options.reverse?"right":"left":cs="center"),r==="top"?d==="near"||C!==0?ae=-K*$+$/2:d==="center"?ae=-At.highest.height/2-Ye*$+$:ae=-At.highest.height+$/2:d==="near"||C!==0?ae=$/2:d==="center"?ae=At.highest.height/2-Ye*$:ae=At.highest.height-K*$,u&&(ae*=-1),C!==0&&!Ie.showLabelBackdrop&&(E+=$/2*Math.sin(C))):(D=P,ae=(1-K)*$/2);let Pc;if(Ie.showLabelBackdrop){let us=Tt(Ie.backdropPadding),nl=At.heights[b],tn=At.widths[b],sl=ae-us.top,on=0-us.left;switch(Ne){case"middle":sl-=nl/2;break;case"bottom":sl-=nl;break}switch(R){case"center":on-=tn/2;break;case"right":on-=tn;break;case"inner":b===y-1?on-=tn:b>0&&(on-=tn/2);break}Pc={left:on,top:sl,width:tn+us.width,height:nl+us.height,color:Ie.backdropColor}}w.push({label:x,font:N,textOffset:ae,options:{rotation:C,color:tt,strokeColor:Vi,strokeWidth:It,textAlign:cs,textBaseline:Ne,translation:[E,D],backdrop:Pc}})}return w}_getXAxisLabelAlignment(){let{position:e,ticks:i}=this.options;if(-Ni(this.labelRotation))return e==="top"?"left":"right";let r="center";return i.align==="start"?r="left":i.align==="end"?r="right":i.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(e){let{position:i,ticks:{crossAlign:o,mirror:r,padding:n}}=this.options,s=this._getLabelSizes(),a=e+n,l=s.widest.width,d,c;return i==="left"?r?(c=this.right+n,o==="near"?d="left":o==="center"?(d="center",c+=l/2):(d="right",c+=l)):(c=this.right-a,o==="near"?d="right":o==="center"?(d="center",c-=l/2):(d="left",c=this.left)):i==="right"?r?(c=this.left+n,o==="near"?d="right":o==="center"?(d="center",c-=l/2):(d="left",c-=l)):(c=this.left+a,o==="near"?d="left":o==="center"?(d="center",c+=l/2):(d="right",c=this.right)):d="right",{textAlign:d,x:c}}_computeLabelArea(){if(this.options.ticks.mirror)return;let e=this.chart,i=this.options.position;if(i==="left"||i==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(i==="top"||i==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){let{ctx:e,options:{backgroundColor:i},left:o,top:r,width:n,height:s}=this;i&&(e.save(),e.fillStyle=i,e.fillRect(o,r,n,s),e.restore())}getLineWidthForValue(e){let i=this.options.grid;if(!this._isVisible()||!i.display)return 0;let r=this.ticks.findIndex(n=>n.value===e);return r>=0?i.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){let i=this.options.grid,o=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e)),n,s,a=(l,d,c)=>{!c.width||!c.color||(o.save(),o.lineWidth=c.width,o.strokeStyle=c.color,o.setLineDash(c.borderDash||[]),o.lineDashOffset=c.borderDashOffset,o.beginPath(),o.moveTo(l.x,l.y),o.lineTo(d.x,d.y),o.stroke(),o.restore())};if(i.display)for(n=0,s=r.length;n<s;++n){let l=r[n];i.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),i.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){let{chart:e,ctx:i,options:{border:o,grid:r}}=this,n=o.setContext(this.getContext()),s=o.display?n.width:0;if(!s)return;let a=r.setContext(this.getContext(0)).lineWidth,l=this._borderValue,d,c,u,h;this.isHorizontal()?(d=Ur(e,this.left,s)-s/2,c=Ur(e,this.right,a)+a/2,u=h=l):(u=Ur(e,this.top,s)-s/2,h=Ur(e,this.bottom,a)+a/2,d=c=l),i.save(),i.lineWidth=n.width,i.strokeStyle=n.color,i.beginPath(),i.moveTo(d,u),i.lineTo(c,h),i.stroke(),i.restore()}drawLabels(e){if(!this.options.ticks.display)return;let o=this.ctx,r=this._computeLabelArea();r&&hc(o,r);let n=this.getLabelItems(e);for(let s of n){let a=s.options,l=s.font,d=s.label,c=s.textOffset;jr(o,d,0,c,l,a)}r&&gc(o)}drawTitle(){let{ctx:e,options:{position:i,title:o,reverse:r}}=this;if(!o.display)return;let n=ut(o.font),s=Tt(o.padding),a=o.align,l=n.lineHeight/2;i==="bottom"||i==="center"||Ce(i)?(l+=s.bottom,We(o.text)&&(l+=n.lineHeight*(o.text.length-1))):l+=s.top;let{titleX:d,titleY:c,maxWidth:u,rotation:h}=NG(this,l,i,a);jr(e,o.text,0,0,n,{color:o.color,maxWidth:u,rotation:h,textAlign:LG(a,i,r),textBaseline:"middle",translation:[d,c]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){let e=this.options,i=e.ticks&&e.ticks.z||0,o=ue(e.grid&&e.grid.z,-1),r=ue(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==t.prototype.draw?[{z:i,draw:n=>{this.draw(n)}}]:[{z:o,draw:n=>{this.drawBackground(),this.drawGrid(n),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:i,draw:n=>{this.drawLabels(n)}}]}getMatchingVisibleMetas(e){let i=this.chart.getSortedVisibleDatasetMetas(),o=this.axis+"AxisID",r=[],n,s;for(n=0,s=i.length;n<s;++n){let a=i[n];a[o]===this.id&&(!e||a.type===e)&&r.push(a)}return r}_resolveTickFontOptions(e){let i=this.options.ticks.setContext(this.getContext(e));return ut(i.font)}_maxDigits(){let e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}},qa=class{constructor(e,i,o){this.type=e,this.scope=i,this.override=o,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){let i=Object.getPrototypeOf(e),o;VG(i)&&(o=this.register(i));let r=this.items,n=e.id,s=this.scope+"."+n;if(!n)throw new Error("class does not have id: "+e);return n in r||(r[n]=e,zG(e,s,o),this.override&&Ke.override(e.id,e.overrides)),s}get(e){return this.items[e]}unregister(e){let i=this.items,o=e.id,r=this.scope;o in i&&delete i[o],r&&o in Ke[r]&&(delete Ke[r][o],this.override&&delete Wr[o])}};function zG(t,e,i){let o=La(Object.create(null),[i?Ke.get(i):{},Ke.get(e),t.defaults]);Ke.set(e,o),t.defaultRoutes&&GG(e,t.defaultRoutes),t.descriptors&&Ke.describe(e,t.descriptors)}function GG(t,e){Object.keys(e).forEach(i=>{let o=i.split("."),r=o.pop(),n=[t].concat(o).join("."),s=e[i].split("."),a=s.pop(),l=s.join(".");Ke.route(n,r,l,a)})}function VG(t){return"id"in t&&"defaults"in t}var lw=class{constructor(){this.controllers=new qa(Yr,"datasets",!0),this.elements=new qa(eo,"elements"),this.plugins=new qa(Object,"plugins"),this.scales=new qa(ds,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,i,o){[...i].forEach(r=>{let n=o||this._getRegistryForType(r);o||n.isForType(r)||n===this.plugins&&r.id?this._exec(e,n,r):Le(r,s=>{let a=o||this._getRegistryForType(s);this._exec(e,a,s)})})}_exec(e,i,o){let r=cg(e);Ge(o["before"+r],[],o),i[e](o),Ge(o["after"+r],[],o)}_getRegistryForType(e){for(let i=0;i<this._typedRegistries.length;i++){let o=this._typedRegistries[i];if(o.isForType(e))return o}return this.plugins}_get(e,i,o){let r=i.get(e);if(r===void 0)throw new Error('"'+e+'" is not a registered '+o+".");return r}},Eo=new lw,dw=class{constructor(){this._init=[]}notify(e,i,o,r){i==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));let n=r?this._descriptors(e).filter(r):this._descriptors(e),s=this._notify(n,e,i,o);return i==="afterDestroy"&&(this._notify(n,e,"stop"),this._notify(this._init,e,"uninstall")),s}_notify(e,i,o,r){r=r||{};for(let n of e){let s=n.plugin,a=s[o],l=[i,r,n.options];if(Ge(a,l,s)===!1&&r.cancelable)return!1}return!0}invalidate(){xe(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;let i=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),i}_createDescriptors(e,i){let o=e&&e.config,r=ue(o.options&&o.options.plugins,{}),n=HG(o);return r===!1&&!i?[]:WG(e,n,r,i)}_notifyStateChanges(e){let i=this._oldCache||[],o=this._cache,r=(n,s)=>n.filter(a=>!s.some(l=>a.plugin.id===l.plugin.id));this._notify(r(i,o),e,"stop"),this._notify(r(o,i),e,"start")}};function HG(t){let e={},i=[],o=Object.keys(Eo.plugins.items);for(let n=0;n<o.length;n++)i.push(Eo.getPlugin(o[n]));let r=t.plugins||[];for(let n=0;n<r.length;n++){let s=r[n];i.indexOf(s)===-1&&(i.push(s),e[s.id]=!0)}return{plugins:i,localIds:e}}function BG(t,e){return!e&&t===!1?null:t===!0?{}:t}function WG(t,{plugins:e,localIds:i},o,r){let n=[],s=t.getContext();for(let a of e){let l=a.id,d=BG(o[l],r);d!==null&&n.push({plugin:a,options:UG(t.config,{plugin:a,local:i[l]},d,s)})}return n}function UG(t,{plugin:e,local:i},o,r){let n=t.pluginScopeKeys(e),s=t.getOptionScopes(o,n);return i&&e.defaults&&s.push(e.defaults),t.createResolver(s,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function cw(t,e){let i=Ke.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||i.indexAxis||"x"}function jG(t,e){let i=t;return t==="_index_"?i=e:t==="_value_"&&(i=e==="x"?"y":"x"),i}function qG(t,e){return t===e?"_index_":"_value_"}function PD(t){if(t==="x"||t==="y"||t==="r")return t}function KG(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function uw(t,...e){if(PD(t))return t;for(let i of e){let o=i.axis||KG(i.position)||t.length>1&&PD(t[0].toLowerCase());if(o)return o}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function FD(t,e,i){if(i[e+"AxisID"]===t)return{axis:e}}function $G(t,e){if(e.data&&e.data.datasets){let i=e.data.datasets.filter(o=>o.xAxisID===t||o.yAxisID===t);if(i.length)return FD(t,"x",i[0])||FD(t,"y",i[0])}return{}}function YG(t,e){let i=Wr[t.type]||{scales:{}},o=e.scales||{},r=cw(t.type,e),n=Object.create(null);return Object.keys(o).forEach(s=>{let a=o[s];if(!Ce(a))return console.error(`Invalid scale configuration for scale: ${s}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${s}`);let l=uw(s,a,$G(s,t),Ke.scales[a.type]),d=qG(l,r),c=i.scales||{};n[s]=za(Object.create(null),[{axis:l},a,c[l],c[d]])}),t.data.datasets.forEach(s=>{let a=s.type||t.type,l=s.indexAxis||cw(a,e),c=(Wr[a]||{}).scales||{};Object.keys(c).forEach(u=>{let h=jG(u,l),p=s[h+"AxisID"]||h;n[p]=n[p]||Object.create(null),za(n[p],[{axis:h},o[p],c[u]])})}),Object.keys(n).forEach(s=>{let a=n[s];za(a,[Ke.scales[a.type],Ke.scale])}),n}function yR(t){let e=t.options||(t.options={});e.plugins=ue(e.plugins,{}),e.scales=YG(t,e)}function bR(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function QG(t){return t=t||{},t.data=bR(t.data),yR(t),t}var OD=new Map,SR=new Set;function xg(t,e){let i=OD.get(t);return i||(i=e(),OD.set(t,i),SR.add(i)),i}var Cc=(t,e,i)=>{let o=Qo(e,i);o!==void 0&&t.add(o)},hw=class{constructor(e){this._config=QG(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=bR(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){let e=this._config;this.clearCache(),yR(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return xg(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,i){return xg(`${e}.transition.${i}`,()=>[[`datasets.${e}.transitions.${i}`,`transitions.${i}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,i){return xg(`${e}-${i}`,()=>[[`datasets.${e}.elements.${i}`,`datasets.${e}`,`elements.${i}`,""]])}pluginScopeKeys(e){let i=e.id,o=this.type;return xg(`${o}-plugin-${i}`,()=>[[`plugins.${i}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,i){let o=this._scopeCache,r=o.get(e);return(!r||i)&&(r=new Map,o.set(e,r)),r}getOptionScopes(e,i,o){let{options:r,type:n}=this,s=this._cachedScopes(e,o),a=s.get(i);if(a)return a;let l=new Set;i.forEach(c=>{e&&(l.add(e),c.forEach(u=>Cc(l,e,u))),c.forEach(u=>Cc(l,r,u)),c.forEach(u=>Cc(l,Wr[n]||{},u)),c.forEach(u=>Cc(l,Ke,u)),c.forEach(u=>Cc(l,pg,u))});let d=Array.from(l);return d.length===0&&d.push(Object.create(null)),SR.has(i)&&s.set(i,d),d}chartOptionScopes(){let{options:e,type:i}=this;return[e,Wr[i]||{},Ke.datasets[i]||{},{type:i},Ke,pg]}resolveNamedOptions(e,i,o,r=[""]){let n={$shared:!0},{resolver:s,subPrefixes:a}=kD(this._resolverCache,e,r),l=s;if(ZG(s,i)){n.$shared=!1,o=$o(o)?o():o;let d=this.createResolver(e,o,a);l=rs(s,o,d)}for(let d of i)n[d]=l[d];return n}createResolver(e,i,o=[""],r){let{resolver:n}=kD(this._resolverCache,e,o);return Ce(i)?rs(n,i,void 0,r):n}};function kD(t,e,i){let o=t.get(e);o||(o=new Map,t.set(e,o));let r=i.join(),n=o.get(r);return n||(n={resolver:vg(e,i),subPrefixes:i.filter(a=>!a.toLowerCase().includes("hover"))},o.set(r,n)),n}var XG=t=>Ce(t)&&Object.getOwnPropertyNames(t).some(e=>$o(t[e]));function ZG(t,e){let{isScriptable:i,isIndexable:o}=zC(t);for(let r of e){let n=i(r),s=o(r),a=(s||n)&&t[r];if(n&&($o(a)||XG(a))||s&&We(a))return!0}return!1}var JG="4.4.3",eV=["top","bottom","left","right","chartArea"];function LD(t,e){return t==="top"||t==="bottom"||eV.indexOf(t)===-1&&e==="x"}function ND(t,e){return function(i,o){return i[t]===o[t]?i[e]-o[e]:i[t]-o[t]}}function zD(t){let e=t.chart,i=e.options.animation;e.notifyPlugins("afterRender"),Ge(i&&i.onComplete,[t],e)}function tV(t){let e=t.chart,i=e.options.animation;Ge(i&&i.onProgress,[t],e)}function xR(t){return Cg()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}var Tg={},GD=t=>{let e=xR(t);return Object.values(Tg).filter(i=>i.canvas===e).pop()};function iV(t,e,i){let o=Object.keys(t);for(let r of o){let n=+r;if(n>=e){let s=t[r];delete t[r],(i>0||n>e)&&(t[n+i]=s)}}}function oV(t,e,i,o){return!i||t.type==="mouseout"?null:o?e:t}function _g(t,e,i){return t.options.clip?t[i]:e[i]}function rV(t,e){let{xScale:i,yScale:o}=t;return i&&o?{left:_g(i,e,"left"),right:_g(i,e,"right"),top:_g(o,e,"top"),bottom:_g(o,e,"bottom")}:e}var Lg=(()=>{class t{static defaults=Ke;static instances=Tg;static overrides=Wr;static registry=Eo;static version=JG;static getChart=GD;static register(...i){Eo.add(...i),VD()}static unregister(...i){Eo.remove(...i),VD()}constructor(i,o){let r=this.config=new hw(o),n=xR(i),s=GD(n);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");let a=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||_G(n)),this.platform.updateConfig(r);let l=this.platform.acquireContext(n,a.aspectRatio),d=l&&l.canvas,c=d&&d.height,u=d&&d.width;if(this.id=N0(),this.ctx=l,this.canvas=d,this.width=u,this.height=c,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new dw,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=$0(h=>this.update(h),a.resizeDelay||0),this._dataChanges=[],Tg[this.id]=this,!l||!d){console.error("Failed to create chart: can't acquire context from the given item");return}Zo.listen(this,"complete",zD),Zo.listen(this,"progress",tV),this._initialize(),this.attached&&this.update()}get aspectRatio(){let{options:{aspectRatio:i,maintainAspectRatio:o},width:r,height:n,_aspectRatio:s}=this;return xe(i)?o&&s?s:n?r/n:null:i}get data(){return this.config.data}set data(i){this.config.data=i}get options(){return this._options}set options(i){this.config.options=i}get registry(){return Eo}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():BC(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return kC(this.canvas,this.ctx),this}stop(){return Zo.stop(this),this}resize(i,o){Zo.running(this)?this._resizeBeforeDraw={width:i,height:o}:this._resize(i,o)}_resize(i,o){let r=this.options,n=this.canvas,s=r.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(n,i,o,s),l=r.devicePixelRatio||this.platform.getDevicePixelRatio(),d=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,BC(this,l,!0)&&(this.notifyPlugins("resize",{size:a}),Ge(r.onResize,[this,a],this),this.attached&&this._doResize(d)&&this.render())}ensureScalesHaveIDs(){let o=this.options.scales||{};Le(o,(r,n)=>{r.id=n})}buildOrUpdateScales(){let i=this.options,o=i.scales,r=this.scales,n=Object.keys(r).reduce((a,l)=>(a[l]=!1,a),{}),s=[];o&&(s=s.concat(Object.keys(o).map(a=>{let l=o[a],d=uw(a,l),c=d==="r",u=d==="x";return{options:l,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),Le(s,a=>{let l=a.options,d=l.id,c=uw(d,l),u=ue(l.type,a.dtype);(l.position===void 0||LD(l.position,c)!==LD(a.dposition))&&(l.position=a.dposition),n[d]=!0;let h=null;if(d in r&&r[d].type===u)h=r[d];else{let p=Eo.getScale(u);h=new p({id:d,type:u,ctx:this.ctx,chart:this}),r[h.id]=h}h.init(l,i)}),Le(n,(a,l)=>{a||delete r[l]}),Le(r,a=>{Vt.configure(this,a,a.options),Vt.addBox(this,a)})}_updateMetasets(){let i=this._metasets,o=this.data.datasets.length,r=i.length;if(i.sort((n,s)=>n.index-s.index),r>o){for(let n=o;n<r;++n)this._destroyDatasetMeta(n);i.splice(o,r-o)}this._sortedMetasets=i.slice(0).sort(ND("order","index"))}_removeUnreferencedMetasets(){let{_metasets:i,data:{datasets:o}}=this;i.length>o.length&&delete this._stacks,i.forEach((r,n)=>{o.filter(s=>s===r._dataset).length===0&&this._destroyDatasetMeta(n)})}buildOrUpdateControllers(){let i=[],o=this.data.datasets,r,n;for(this._removeUnreferencedMetasets(),r=0,n=o.length;r<n;r++){let s=o[r],a=this.getDatasetMeta(r),l=s.type||this.config.type;if(a.type&&a.type!==l&&(this._destroyDatasetMeta(r),a=this.getDatasetMeta(r)),a.type=l,a.indexAxis=s.indexAxis||cw(l,this.options),a.order=s.order||0,a.index=r,a.label=""+s.label,a.visible=this.isDatasetVisible(r),a.controller)a.controller.updateIndex(r),a.controller.linkScales();else{let d=Eo.getController(l),{datasetElementType:c,dataElementType:u}=Ke.datasets[l];Object.assign(d,{dataElementType:Eo.getElement(u),datasetElementType:c&&Eo.getElement(c)}),a.controller=new d(this,r),i.push(a.controller)}}return this._updateMetasets(),i}_resetElements(){Le(this.data.datasets,(i,o)=>{this.getDatasetMeta(o).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(i){let o=this.config;o.update();let r=this._options=o.createResolver(o.chartOptionScopes(),this.getContext()),n=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:i,cancelable:!0})===!1)return;let s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let c=0,u=this.data.datasets.length;c<u;c++){let{controller:h}=this.getDatasetMeta(c),p=!n&&s.indexOf(h)===-1;h.buildOrUpdateElements(p),a=Math.max(+h.getMaxOverflow(),a)}a=this._minPadding=r.layout.autoPadding?a:0,this._updateLayout(a),n||Le(s,c=>{c.reset()}),this._updateDatasets(i),this.notifyPlugins("afterUpdate",{mode:i}),this._layers.sort(ND("z","_idx"));let{_active:l,_lastEvent:d}=this;d?this._eventHandler(d,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){Le(this.scales,i=>{Vt.removeBox(this,i)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){let i=this.options,o=new Set(Object.keys(this._listeners)),r=new Set(i.events);(!SC(o,r)||!!this._responsiveListeners!==i.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){let{_hiddenIndices:i}=this,o=this._getUniformDataChanges()||[];for(let{method:r,start:n,count:s}of o){let a=r==="_removeElements"?-s:s;iV(i,n,a)}}_getUniformDataChanges(){let i=this._dataChanges;if(!i||!i.length)return;this._dataChanges=[];let o=this.data.datasets.length,r=s=>new Set(i.filter(a=>a[0]===s).map((a,l)=>l+","+a.splice(1).join(","))),n=r(0);for(let s=1;s<o;s++)if(!SC(n,r(s)))return;return Array.from(n).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(i){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Vt.update(this,this.width,this.height,i);let o=this.chartArea,r=o.width<=0||o.height<=0;this._layers=[],Le(this.boxes,n=>{r&&n.position==="chartArea"||(n.configure&&n.configure(),this._layers.push(...n._layers()))},this),this._layers.forEach((n,s)=>{n._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(i){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:i,cancelable:!0})!==!1){for(let o=0,r=this.data.datasets.length;o<r;++o)this.getDatasetMeta(o).controller.configure();for(let o=0,r=this.data.datasets.length;o<r;++o)this._updateDataset(o,$o(i)?i({datasetIndex:o}):i);this.notifyPlugins("afterDatasetsUpdate",{mode:i})}}_updateDataset(i,o){let r=this.getDatasetMeta(i),n={meta:r,index:i,mode:o,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",n)!==!1&&(r.controller._update(o),n.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",n))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Zo.has(this)?this.attached&&!Zo.running(this)&&Zo.start(this):(this.draw(),zD({chart:this})))}draw(){let i;if(this._resizeBeforeDraw){let{width:r,height:n}=this._resizeBeforeDraw;this._resize(r,n),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;let o=this._layers;for(i=0;i<o.length&&o[i].z<=0;++i)o[i].draw(this.chartArea);for(this._drawDatasets();i<o.length;++i)o[i].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(i){let o=this._sortedMetasets,r=[],n,s;for(n=0,s=o.length;n<s;++n){let a=o[n];(!i||a.visible)&&r.push(a)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;let i=this.getSortedVisibleDatasetMetas();for(let o=i.length-1;o>=0;--o)this._drawDataset(i[o]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(i){let o=this.ctx,r=i._clip,n=!r.disabled,s=rV(i,this.chartArea),a={meta:i,index:i.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",a)!==!1&&(n&&hc(o,{left:r.left===!1?0:s.left-r.left,right:r.right===!1?this.width:s.right+r.right,top:r.top===!1?0:s.top-r.top,bottom:r.bottom===!1?this.height:s.bottom+r.bottom}),i.controller.draw(),n&&gc(o),a.cancelable=!1,this.notifyPlugins("afterDatasetDraw",a))}isPointInArea(i){return bo(i,this.chartArea,this._minPadding)}getElementsAtEventForMode(i,o,r,n){let s=nG.modes[o];return typeof s=="function"?s(this,i,r,n):[]}getDatasetMeta(i){let o=this.data.datasets[i],r=this._metasets,n=r.filter(s=>s&&s._dataset===o).pop();return n||(n={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:o&&o.order||0,index:i,_dataset:o,_parsed:[],_sorted:!1},r.push(n)),n}getContext(){return this.$context||(this.$context=Xo(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(i){let o=this.data.datasets[i];if(!o)return!1;let r=this.getDatasetMeta(i);return typeof r.hidden=="boolean"?!r.hidden:!o.hidden}setDatasetVisibility(i,o){let r=this.getDatasetMeta(i);r.hidden=!o}toggleDataVisibility(i){this._hiddenIndices[i]=!this._hiddenIndices[i]}getDataVisibility(i){return!this._hiddenIndices[i]}_updateVisibility(i,o,r){let n=r?"show":"hide",s=this.getDatasetMeta(i),a=s.controller._resolveAnimations(void 0,n);Ga(o)?(s.data[o].hidden=!r,this.update()):(this.setDatasetVisibility(i,r),a.update(s,{visible:r}),this.update(l=>l.datasetIndex===i?n:void 0))}hide(i,o){this._updateVisibility(i,o,!1)}show(i,o){this._updateVisibility(i,o,!0)}_destroyDatasetMeta(i){let o=this._metasets[i];o&&o.controller&&o.controller._destroy(),delete this._metasets[i]}_stop(){let i,o;for(this.stop(),Zo.remove(this),i=0,o=this.data.datasets.length;i<o;++i)this._destroyDatasetMeta(i)}destroy(){this.notifyPlugins("beforeDestroy");let{canvas:i,ctx:o}=this;this._stop(),this.config.clearCache(),i&&(this.unbindEvents(),kC(i,o),this.platform.releaseContext(o),this.canvas=null,this.ctx=null),delete Tg[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...i){return this.canvas.toDataURL(...i)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){let i=this._listeners,o=this.platform,r=(s,a)=>{o.addEventListener(this,s,a),i[s]=a},n=(s,a,l)=>{s.offsetX=a,s.offsetY=l,this._eventHandler(s)};Le(this.options.events,s=>r(s,n))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});let i=this._responsiveListeners,o=this.platform,r=(d,c)=>{o.addEventListener(this,d,c),i[d]=c},n=(d,c)=>{i[d]&&(o.removeEventListener(this,d,c),delete i[d])},s=(d,c)=>{this.canvas&&this.resize(d,c)},a,l=()=>{n("attach",l),this.attached=!0,this.resize(),r("resize",s),r("detach",a)};a=()=>{this.attached=!1,n("resize",s),this._stop(),this._resize(0,0),r("attach",l)},o.isAttached(this.canvas)?l():a()}unbindEvents(){Le(this._listeners,(i,o)=>{this.platform.removeEventListener(this,o,i)}),this._listeners={},Le(this._responsiveListeners,(i,o)=>{this.platform.removeEventListener(this,o,i)}),this._responsiveListeners=void 0}updateHoverStyle(i,o,r){let n=r?"set":"remove",s,a,l,d;for(o==="dataset"&&(s=this.getDatasetMeta(i[0].datasetIndex),s.controller["_"+n+"DatasetHoverStyle"]()),l=0,d=i.length;l<d;++l){a=i[l];let c=a&&this.getDatasetMeta(a.datasetIndex).controller;c&&c[n+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(i){let o=this._active||[],r=i.map(({datasetIndex:s,index:a})=>{let l=this.getDatasetMeta(s);if(!l)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:l.data[a],index:a}});!cc(r,o)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,o))}notifyPlugins(i,o,r){return this._plugins.notify(this,i,o,r)}isPluginEnabled(i){return this._plugins._cache.filter(o=>o.plugin.id===i).length===1}_updateHoverStyles(i,o,r){let n=this.options.hover,s=(d,c)=>d.filter(u=>!c.some(h=>u.datasetIndex===h.datasetIndex&&u.index===h.index)),a=s(o,i),l=r?i:s(i,o);a.length&&this.updateHoverStyle(a,n.mode,!1),l.length&&n.mode&&this.updateHoverStyle(l,n.mode,!0)}_eventHandler(i,o){let r={event:i,replay:o,cancelable:!0,inChartArea:this.isPointInArea(i)},n=a=>(a.options.events||this.options.events).includes(i.native.type);if(this.notifyPlugins("beforeEvent",r,n)===!1)return;let s=this._handleEvent(i,o,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,n),(s||r.changed)&&this.render(),this}_handleEvent(i,o,r){let{_active:n=[],options:s}=this,a=o,l=this._getActiveElements(i,n,r,a),d=V0(i),c=oV(i,this._lastEvent,r,d);r&&(this._lastEvent=null,Ge(s.onHover,[i,l,this],this),d&&Ge(s.onClick,[i,l,this],this));let u=!cc(l,n);return(u||o)&&(this._active=l,this._updateHoverStyles(l,n,o)),this._lastEvent=c,u}_getActiveElements(i,o,r,n){if(i.type==="mouseout")return[];if(!r)return o;let s=this.options.hover;return this.getElementsAtEventForMode(i,s.mode,s,n)}}return t})();function VD(){return Le(Lg.instances,t=>t._plugins.invalidate())}function nV(t,e,i){let{startAngle:o,pixelMargin:r,x:n,y:s,outerRadius:a,innerRadius:l}=e,d=r/a;t.beginPath(),t.arc(n,s,a,o-d,i+d),l>r?(d=r/l,t.arc(n,s,l,i+d,o-d,!0)):t.arc(n,s,r,i+et,o-et),t.closePath(),t.clip()}function sV(t){return mg(t,["outerStart","outerEnd","innerStart","innerEnd"])}function aV(t,e,i,o){let r=sV(t.options.borderRadius),n=(i-e)/2,s=Math.min(n,o*e/2),a=l=>{let d=(i-Math.min(n,l))*o/2;return mt(l,0,Math.min(n,d))};return{outerStart:a(r.outerStart),outerEnd:a(r.outerEnd),innerStart:mt(r.innerStart,0,s),innerEnd:mt(r.innerEnd,0,s)}}function ja(t,e,i,o){return{x:i+t*Math.cos(e),y:o+t*Math.sin(e)}}function Fg(t,e,i,o,r,n){let{x:s,y:a,startAngle:l,pixelMargin:d,innerRadius:c}=e,u=Math.max(e.outerRadius+o+i-d,0),h=c>0?c+o+i+d:0,p=0,m=r-l;if(o){let Ie=c>0?c-o:0,Ye=u>0?u-o:0,tt=(Ie+Ye)/2,Vi=tt!==0?m*tt/(tt+o):m;p=(m-Vi)/2}let C=Math.max(.001,m*u-i/Ue)/u,w=(m-C)/2,b=l+w+p,y=r-w-p,{outerStart:_,outerEnd:x,innerStart:E,innerEnd:D}=aV(e,h,u,y-b),R=u-_,P=u-x,N=b+_/R,$=y-x/P,K=h+E,ae=h+D,Ne=b+E/K,At=y-D/ae;if(t.beginPath(),n){let Ie=(N+$)/2;if(t.arc(s,a,u,N,Ie),t.arc(s,a,u,Ie,$),x>0){let It=ja(P,$,s,a);t.arc(It.x,It.y,x,$,y+et)}let Ye=ja(ae,y,s,a);if(t.lineTo(Ye.x,Ye.y),D>0){let It=ja(ae,At,s,a);t.arc(It.x,It.y,D,y+et,At+Math.PI)}let tt=(y-D/h+(b+E/h))/2;if(t.arc(s,a,h,y-D/h,tt,!0),t.arc(s,a,h,tt,b+E/h,!0),E>0){let It=ja(K,Ne,s,a);t.arc(It.x,It.y,E,Ne+Math.PI,b-et)}let Vi=ja(R,b,s,a);if(t.lineTo(Vi.x,Vi.y),_>0){let It=ja(R,N,s,a);t.arc(It.x,It.y,_,b-et,N)}}else{t.moveTo(s,a);let Ie=Math.cos(N)*u+s,Ye=Math.sin(N)*u+a;t.lineTo(Ie,Ye);let tt=Math.cos($)*u+s,Vi=Math.sin($)*u+a;t.lineTo(tt,Vi)}t.closePath()}function lV(t,e,i,o,r){let{fullCircles:n,startAngle:s,circumference:a}=e,l=e.endAngle;if(n){Fg(t,e,i,o,l,r);for(let d=0;d<n;++d)t.fill();isNaN(a)||(l=s+(a%je||je))}return Fg(t,e,i,o,l,r),t.fill(),l}function dV(t,e,i,o,r){let{fullCircles:n,startAngle:s,circumference:a,options:l}=e,{borderWidth:d,borderJoinStyle:c,borderDash:u,borderDashOffset:h}=l,p=l.borderAlign==="inner";if(!d)return;t.setLineDash(u||[]),t.lineDashOffset=h,p?(t.lineWidth=d*2,t.lineJoin=c||"round"):(t.lineWidth=d,t.lineJoin=c||"bevel");let m=e.endAngle;if(n){Fg(t,e,i,o,m,r);for(let C=0;C<n;++C)t.stroke();isNaN(a)||(m=s+(a%je||je))}p&&nV(t,e,m),n||(Fg(t,e,i,o,m,r),t.stroke())}var gw=class extends eo{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,i,o){let r=this.getProps(["x","y"],o),{angle:n,distance:s}=DC(r,{x:e,y:i}),{startAngle:a,endAngle:l,innerRadius:d,outerRadius:c,circumference:u}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],o),h=(this.options.spacing+this.options.borderWidth)/2,m=ue(u,l-a)>=je||Ha(n,a,l),C=xo(s,d+h,c+h);return m&&C}getCenterPoint(e){let{x:i,y:o,startAngle:r,endAngle:n,innerRadius:s,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:l,spacing:d}=this.options,c=(r+n)/2,u=(s+a+d+l)/2;return{x:i+Math.cos(c)*u,y:o+Math.sin(c)*u}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){let{options:i,circumference:o}=this,r=(i.offset||0)/4,n=(i.spacing||0)/2,s=i.circular;if(this.pixelMargin=i.borderAlign==="inner"?.33:0,this.fullCircles=o>je?Math.floor(o/je):0,o===0||this.innerRadius<0||this.outerRadius<0)return;e.save();let a=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(a)*r,Math.sin(a)*r);let l=1-Math.sin(Math.min(Ue,o||0)),d=r*l;e.fillStyle=i.backgroundColor,e.strokeStyle=i.borderColor,lV(e,this,d,n,s),dV(e,this,d,n,s),e.restore()}};function _R(t,e,i=e){t.lineCap=ue(i.borderCapStyle,e.borderCapStyle),t.setLineDash(ue(i.borderDash,e.borderDash)),t.lineDashOffset=ue(i.borderDashOffset,e.borderDashOffset),t.lineJoin=ue(i.borderJoinStyle,e.borderJoinStyle),t.lineWidth=ue(i.borderWidth,e.borderWidth),t.strokeStyle=ue(i.borderColor,e.borderColor)}function cV(t,e,i){t.lineTo(i.x,i.y)}function uV(t){return t.stepped?Z0:t.tension||t.cubicInterpolationMode==="monotone"?J0:cV}function ER(t,e,i={}){let o=t.length,{start:r=0,end:n=o-1}=i,{start:s,end:a}=e,l=Math.max(r,s),d=Math.min(n,a),c=r<s&&n<s||r>a&&n>a;return{count:o,start:l,loop:e.loop,ilen:d<l&&!c?o+d-l:d-l}}function hV(t,e,i,o){let{points:r,options:n}=e,{count:s,start:a,loop:l,ilen:d}=ER(r,i,o),c=uV(n),{move:u=!0,reverse:h}=o||{},p,m,C;for(p=0;p<=d;++p)m=r[(a+(h?d-p:p))%s],!m.skip&&(u?(t.moveTo(m.x,m.y),u=!1):c(t,C,m,h,n.stepped),C=m);return l&&(m=r[(a+(h?d:0))%s],c(t,C,m,h,n.stepped)),!!l}function gV(t,e,i,o){let r=e.points,{count:n,start:s,ilen:a}=ER(r,i,o),{move:l=!0,reverse:d}=o||{},c=0,u=0,h,p,m,C,w,b,y=x=>(s+(d?a-x:x))%n,_=()=>{C!==w&&(t.lineTo(c,w),t.lineTo(c,C),t.lineTo(c,b))};for(l&&(p=r[y(0)],t.moveTo(p.x,p.y)),h=0;h<=a;++h){if(p=r[y(h)],p.skip)continue;let x=p.x,E=p.y,D=x|0;D===m?(E<C?C=E:E>w&&(w=E),c=(u*c+x)/++u):(_(),t.lineTo(x,E),m=D,u=0,C=w=E),b=E}_()}function pw(t){let e=t.options,i=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!i?gV:hV}function pV(t){return t.stepped?lD:t.tension||t.cubicInterpolationMode==="monotone"?dD:Br}function fV(t,e,i,o){let r=e._path;r||(r=e._path=new Path2D,e.path(r,i,o)&&r.closePath()),_R(t,e.options),t.stroke(r)}function mV(t,e,i,o){let{segments:r,options:n}=e,s=pw(e);for(let a of r)_R(t,n,a.style),t.beginPath(),s(t,e,a,{start:i,end:i+o-1})&&t.closePath(),t.stroke()}var vV=typeof Path2D=="function";function CV(t,e,i,o){vV&&!e.options.segment?fV(t,e,i,o):mV(t,e,i,o)}var Ng=(()=>{class t extends eo{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:i=>i!=="borderDash"&&i!=="fill"};constructor(i){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,i&&Object.assign(this,i)}updateControlPoints(i,o){let r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){let n=r.spanGaps?this._loop:this._fullLoop;nD(this._points,r,i,n,o),this._pointsUpdated=!0}}set points(i){this._points=i,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=uD(this,this.options.segment))}first(){let i=this.segments,o=this.points;return i.length&&o[i[0].start]}last(){let i=this.segments,o=this.points,r=i.length;return r&&o[i[r-1].end]}interpolate(i,o){let r=this.options,n=i[o],s=this.points,a=KC(this,{property:o,start:n,end:n});if(!a.length)return;let l=[],d=pV(r),c,u;for(c=0,u=a.length;c<u;++c){let{start:h,end:p}=a[c],m=s[h],C=s[p];if(m===C){l.push(m);continue}let w=Math.abs((n-m[o])/(C[o]-m[o])),b=d(m,C,w,r.stepped);b[o]=i[o],l.push(b)}return l.length===1?l[0]:l}pathSegment(i,o,r){return pw(this)(i,this,o,r)}path(i,o,r){let n=this.segments,s=pw(this),a=this._loop;o=o||0,r=r||this.points.length-o;for(let l of n)a&=s(i,this,l,{start:o,end:o+r-1});return!!a}draw(i,o,r,n){let s=this.options||{};(this.points||[]).length&&s.borderWidth&&(i.save(),CV(i,this,r,n),i.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}return t})();function HD(t,e,i,o){let r=t.options,{[i]:n}=t.getProps([i],o);return Math.abs(e-n)<r.radius+r.hitRadius}var wV=(()=>{class t extends eo{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(i){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,i&&Object.assign(this,i)}inRange(i,o,r){let n=this.options,{x:s,y:a}=this.getProps(["x","y"],r);return Math.pow(i-s,2)+Math.pow(o-a,2)<Math.pow(n.hitRadius+n.radius,2)}inXRange(i,o){return HD(this,i,"x",o)}inYRange(i,o){return HD(this,i,"y",o)}getCenterPoint(i){let{x:o,y:r}=this.getProps(["x","y"],i);return{x:o,y:r}}size(i){i=i||this.options||{};let o=i.radius||0;o=Math.max(o,o&&i.hoverRadius||0);let r=o&&i.borderWidth||0;return(o+r)*2}draw(i,o){let r=this.options;this.skip||r.radius<.1||!bo(this,o,this.size(r)/2)||(i.strokeStyle=r.borderColor,i.lineWidth=r.borderWidth,i.fillStyle=r.backgroundColor,fg(i,r,this.x,this.y))}getRange(){let i=this.options||{};return i.radius+i.hitRadius}}return t})();function DR(t,e){let{x:i,y:o,base:r,width:n,height:s}=t.getProps(["x","y","base","width","height"],e),a,l,d,c,u;return t.horizontal?(u=s/2,a=Math.min(i,r),l=Math.max(i,r),d=o-u,c=o+u):(u=n/2,a=i-u,l=i+u,d=Math.min(o,r),c=Math.max(o,r)),{left:a,top:d,right:l,bottom:c}}function $r(t,e,i,o){return t?0:mt(e,i,o)}function yV(t,e,i){let o=t.options.borderWidth,r=t.borderSkipped,n=NC(o);return{t:$r(r.top,n.top,0,i),r:$r(r.right,n.right,0,e),b:$r(r.bottom,n.bottom,0,i),l:$r(r.left,n.left,0,e)}}function bV(t,e,i){let{enableBorderRadius:o}=t.getProps(["enableBorderRadius"]),r=t.options.borderRadius,n=qr(r),s=Math.min(e,i),a=t.borderSkipped,l=o||Ce(r);return{topLeft:$r(!l||a.top||a.left,n.topLeft,0,s),topRight:$r(!l||a.top||a.right,n.topRight,0,s),bottomLeft:$r(!l||a.bottom||a.left,n.bottomLeft,0,s),bottomRight:$r(!l||a.bottom||a.right,n.bottomRight,0,s)}}function SV(t){let e=DR(t),i=e.right-e.left,o=e.bottom-e.top,r=yV(t,i/2,o/2),n=bV(t,i/2,o/2);return{outer:{x:e.left,y:e.top,w:i,h:o,radius:n},inner:{x:e.left+r.l,y:e.top+r.t,w:i-r.l-r.r,h:o-r.t-r.b,radius:{topLeft:Math.max(0,n.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,n.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,n.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,n.bottomRight-Math.max(r.b,r.r))}}}}function ew(t,e,i,o){let r=e===null,n=i===null,a=t&&!(r&&n)&&DR(t,o);return a&&(r||xo(e,a.left,a.right))&&(n||xo(i,a.top,a.bottom))}function xV(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function _V(t,e){t.rect(e.x,e.y,e.w,e.h)}function tw(t,e,i={}){let o=t.x!==i.x?-e:0,r=t.y!==i.y?-e:0,n=(t.x+t.w!==i.x+i.w?e:0)-o,s=(t.y+t.h!==i.y+i.h?e:0)-r;return{x:t.x+o,y:t.y+r,w:t.w+n,h:t.h+s,radius:t.radius}}var fw=class extends eo{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){let{inflateAmount:i,options:{borderColor:o,backgroundColor:r}}=this,{inner:n,outer:s}=SV(this),a=xV(s.radius)?Wa:_V;e.save(),(s.w!==n.w||s.h!==n.h)&&(e.beginPath(),a(e,tw(s,i,n)),e.clip(),a(e,tw(n,-i,s)),e.fillStyle=o,e.fill("evenodd")),e.beginPath(),a(e,tw(n,i)),e.fillStyle=r,e.fill(),e.restore()}inRange(e,i,o){return ew(this,e,i,o)}inXRange(e,i){return ew(this,e,null,i)}inYRange(e,i){return ew(this,null,e,i)}getCenterPoint(e){let{x:i,y:o,base:r,horizontal:n}=this.getProps(["x","y","base","horizontal"],e);return{x:n?(i+r)/2:i,y:n?o:(o+r)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}},EV=Object.freeze({__proto__:null,ArcElement:gw,BarElement:fw,LineElement:Ng,PointElement:wV}),mw=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],BD=mw.map(t=>t.replace("rgb(","rgba(").replace(")",", 0.5)"));function RR(t){return mw[t%mw.length]}function MR(t){return BD[t%BD.length]}function DV(t,e){return t.borderColor=RR(e),t.backgroundColor=MR(e),++e}function RV(t,e){return t.backgroundColor=t.data.map(()=>RR(e++)),e}function MV(t,e){return t.backgroundColor=t.data.map(()=>MR(e++)),e}function TV(t){let e=0;return(i,o)=>{let r=t.getDatasetMeta(o).controller;r instanceof _w?e=RV(i,e):r instanceof fR?e=MV(i,e):r&&(e=DV(i,e))}}function WD(t){let e;for(e in t)if(t[e].borderColor||t[e].backgroundColor)return!0;return!1}function AV(t){return t&&(t.borderColor||t.backgroundColor)}var IV={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(t,e,i){if(!i.enabled)return;let{data:{datasets:o},options:r}=t.config,{elements:n}=r;if(!i.forceOverride&&(WD(o)||AV(r)||n&&WD(n)))return;let s=TV(t);o.forEach(s)}};function PV(t,e,i,o,r){let n=r.samples||o;if(n>=i)return t.slice(e,e+i);let s=[],a=(i-2)/(n-2),l=0,d=e+i-1,c=e,u,h,p,m,C;for(s[l++]=t[c],u=0;u<n-2;u++){let w=0,b=0,y,_=Math.floor((u+1)*a)+1+e,x=Math.min(Math.floor((u+2)*a)+1,i)+e,E=x-_;for(y=_;y<x;y++)w+=t[y].x,b+=t[y].y;w/=E,b/=E;let D=Math.floor(u*a)+1+e,R=Math.min(Math.floor((u+1)*a)+1,i)+e,{x:P,y:N}=t[c];for(p=m=-1,y=D;y<R;y++)m=.5*Math.abs((P-w)*(t[y].y-N)-(P-t[y].x)*(b-N)),m>p&&(p=m,h=t[y],C=y);s[l++]=h,c=C}return s[l++]=t[d],s}function FV(t,e,i,o){let r=0,n=0,s,a,l,d,c,u,h,p,m,C,w=[],b=e+i-1,y=t[e].x,x=t[b].x-y;for(s=e;s<e+i;++s){a=t[s],l=(a.x-y)/x*o,d=a.y;let E=l|0;if(E===c)d<m?(m=d,u=s):d>C&&(C=d,h=s),r=(n*r+a.x)/++n;else{let D=s-1;if(!xe(u)&&!xe(h)){let R=Math.min(u,h),P=Math.max(u,h);R!==p&&R!==D&&w.push(we(L({},t[R]),{x:r})),P!==p&&P!==D&&w.push(we(L({},t[P]),{x:r}))}s>0&&D!==p&&w.push(t[D]),w.push(a),c=E,n=0,m=C=d,u=h=p=s}}return w}function TR(t){if(t._decimated){let e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function UD(t){t.data.datasets.forEach(e=>{TR(e)})}function OV(t,e){let i=e.length,o=0,r,{iScale:n}=t,{min:s,max:a,minDefined:l,maxDefined:d}=n.getUserBounds();return l&&(o=mt(yo(e,n.axis,s).lo,0,i-1)),d?r=mt(yo(e,n.axis,a).hi+1,o,i)-o:r=i-o,{start:o,count:r}}var kV={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,i)=>{if(!i.enabled){UD(t);return}let o=t.width;t.data.datasets.forEach((r,n)=>{let{_data:s,indexAxis:a}=r,l=t.getDatasetMeta(n),d=s||r.data;if(Ua([a,t.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;let c=t.scales[l.xAxisID];if(c.type!=="linear"&&c.type!=="time"||t.options.parsing)return;let{start:u,count:h}=OV(l,d),p=i.threshold||4*o;if(h<=p){TR(r);return}xe(s)&&(r._data=d,delete r.data,Object.defineProperty(r,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(C){this._data=C}}));let m;switch(i.algorithm){case"lttb":m=PV(d,u,h,o,i);break;case"min-max":m=FV(d,u,h,o);break;default:throw new Error(`Unsupported decimation algorithm '${i.algorithm}'`)}r._decimated=m})},destroy(t){UD(t)}};function LV(t,e,i){let o=t.segments,r=t.points,n=e.points,s=[];for(let a of o){let{start:l,end:d}=a;d=Ew(l,d,r);let c=vw(i,r[l],r[d],a.loop);if(!e.segments){s.push({source:a,target:c,start:r[l],end:r[d]});continue}let u=KC(e,c);for(let h of u){let p=vw(i,n[h.start],n[h.end],h.loop),m=qC(a,r,p);for(let C of m)s.push({source:C,target:h,start:{[i]:jD(c,p,"start",Math.max)},end:{[i]:jD(c,p,"end",Math.min)}})}}return s}function vw(t,e,i,o){if(o)return;let r=e[t],n=i[t];return t==="angle"&&(r=ci(r),n=ci(n)),{property:t,start:r,end:n}}function NV(t,e){let{x:i=null,y:o=null}=t||{},r=e.points,n=[];return e.segments.forEach(({start:s,end:a})=>{a=Ew(s,a,r);let l=r[s],d=r[a];o!==null?(n.push({x:l.x,y:o}),n.push({x:d.x,y:o})):i!==null&&(n.push({x:i,y:l.y}),n.push({x:i,y:d.y}))}),n}function Ew(t,e,i){for(;e>t;e--){let o=i[e];if(!isNaN(o.x)&&!isNaN(o.y))break}return e}function jD(t,e,i,o){return t&&e?o(t[i],e[i]):t?t[i]:e?e[i]:0}function AR(t,e){let i=[],o=!1;return We(t)?(o=!0,i=t):i=NV(t,e),i.length?new Ng({points:i,options:{tension:0},_loop:o,_fullLoop:o}):null}function qD(t){return t&&t.fill!==!1}function zV(t,e,i){let r=t[e].fill,n=[e],s;if(!i)return r;for(;r!==!1&&n.indexOf(r)===-1;){if(!Ze(r))return r;if(s=t[r],!s)return!1;if(s.visible)return r;n.push(r),r=s.fill}return!1}function GV(t,e,i){let o=WV(t);if(Ce(o))return isNaN(o.value)?!1:o;let r=parseFloat(o);return Ze(r)&&Math.floor(r)===r?VV(o[0],e,r,i):["origin","start","end","stack","shape"].indexOf(o)>=0&&o}function VV(t,e,i,o){return(t==="-"||t==="+")&&(i=e+i),i===e||i<0||i>=o?!1:i}function HV(t,e){let i=null;return t==="start"?i=e.bottom:t==="end"?i=e.top:Ce(t)?i=e.getPixelForValue(t.value):e.getBasePixel&&(i=e.getBasePixel()),i}function BV(t,e,i){let o;return t==="start"?o=i:t==="end"?o=e.options.reverse?e.min:e.max:Ce(t)?o=t.value:o=e.getBaseValue(),o}function WV(t){let e=t.options,i=e.fill,o=ue(i&&i.target,i);return o===void 0&&(o=!!e.backgroundColor),o===!1||o===null?!1:o===!0?"origin":o}function UV(t){let{scale:e,index:i,line:o}=t,r=[],n=o.segments,s=o.points,a=jV(e,i);a.push(AR({x:null,y:e.bottom},o));for(let l=0;l<n.length;l++){let d=n[l];for(let c=d.start;c<=d.end;c++)qV(r,s[c],a)}return new Ng({points:r,options:{}})}function jV(t,e){let i=[],o=t.getMatchingVisibleMetas("line");for(let r=0;r<o.length;r++){let n=o[r];if(n.index===e)break;n.hidden||i.unshift(n.dataset)}return i}function qV(t,e,i){let o=[];for(let r=0;r<i.length;r++){let n=i[r],{first:s,last:a,point:l}=KV(n,e,"x");if(!(!l||s&&a)){if(s)o.unshift(l);else if(t.push(l),!a)break}}t.push(...o)}function KV(t,e,i){let o=t.interpolate(e,i);if(!o)return{};let r=o[i],n=t.segments,s=t.points,a=!1,l=!1;for(let d=0;d<n.length;d++){let c=n[d],u=s[c.start][i],h=s[c.end][i];if(xo(r,u,h)){a=r===u,l=r===h;break}}return{first:a,last:l,point:o}}var Og=class{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,i,o){let{x:r,y:n,radius:s}=this;return i=i||{start:0,end:je},e.arc(r,n,s,i.end,i.start,!0),!o.bounds}interpolate(e){let{x:i,y:o,radius:r}=this,n=e.angle;return{x:i+Math.cos(n)*r,y:o+Math.sin(n)*r,angle:n}}};function $V(t){let{chart:e,fill:i,line:o}=t;if(Ze(i))return YV(e,i);if(i==="stack")return UV(t);if(i==="shape")return!0;let r=QV(t);return r instanceof Og?r:AR(r,o)}function YV(t,e){let i=t.getDatasetMeta(e);return i&&t.isDatasetVisible(e)?i.dataset:null}function QV(t){return(t.scale||{}).getPointPositionForValue?ZV(t):XV(t)}function XV(t){let{scale:e={},fill:i}=t,o=HV(i,e);if(Ze(o)){let r=e.isHorizontal();return{x:r?o:null,y:r?null:o}}return null}function ZV(t){let{scale:e,fill:i}=t,o=e.options,r=e.getLabels().length,n=o.reverse?e.max:e.min,s=BV(i,e,n),a=[];if(o.grid.circular){let l=e.getPointPositionForValue(0,n);return new Og({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(s)})}for(let l=0;l<r;++l)a.push(e.getPointPositionForValue(l,s));return a}function iw(t,e,i){let o=$V(e),{line:r,scale:n,axis:s}=e,a=r.options,l=a.fill,d=a.backgroundColor,{above:c=d,below:u=d}=l||{};o&&r.points.length&&(hc(t,i),JV(t,{line:r,target:o,above:c,below:u,area:i,scale:n,axis:s}),gc(t))}function JV(t,e){let{line:i,target:o,above:r,below:n,area:s,scale:a}=e,l=i._loop?"angle":e.axis;t.save(),l==="x"&&n!==r&&(KD(t,o,s.top),$D(t,{line:i,target:o,color:r,scale:a,property:l}),t.restore(),t.save(),KD(t,o,s.bottom)),$D(t,{line:i,target:o,color:n,scale:a,property:l}),t.restore()}function KD(t,e,i){let{segments:o,points:r}=e,n=!0,s=!1;t.beginPath();for(let a of o){let{start:l,end:d}=a,c=r[l],u=r[Ew(l,d,r)];n?(t.moveTo(c.x,c.y),n=!1):(t.lineTo(c.x,i),t.lineTo(c.x,c.y)),s=!!e.pathSegment(t,a,{move:s}),s?t.closePath():t.lineTo(u.x,i)}t.lineTo(e.first().x,i),t.closePath(),t.clip()}function $D(t,e){let{line:i,target:o,property:r,color:n,scale:s}=e,a=LV(i,o,r);for(let{source:l,target:d,start:c,end:u}of a){let{style:{backgroundColor:h=n}={}}=l,p=o!==!0;t.save(),t.fillStyle=h,eH(t,s,p&&vw(r,c,u)),t.beginPath();let m=!!i.pathSegment(t,l),C;if(p){m?t.closePath():YD(t,o,u,r);let w=!!o.pathSegment(t,d,{move:m,reverse:!0});C=m&&w,C||YD(t,o,c,r)}t.closePath(),t.fill(C?"evenodd":"nonzero"),t.restore()}}function eH(t,e,i){let{top:o,bottom:r}=e.chart.chartArea,{property:n,start:s,end:a}=i||{};n==="x"&&(t.beginPath(),t.rect(s,o,a-s,r-o),t.clip())}function YD(t,e,i,o){let r=e.interpolate(i,o);r&&t.lineTo(r.x,r.y)}var tH={id:"filler",afterDatasetsUpdate(t,e,i){let o=(t.data.datasets||[]).length,r=[],n,s,a,l;for(s=0;s<o;++s)n=t.getDatasetMeta(s),a=n.dataset,l=null,a&&a.options&&a instanceof Ng&&(l={visible:t.isDatasetVisible(s),index:s,fill:GV(a,s,o),chart:t,axis:n.controller.options.indexAxis,scale:n.vScale,line:a}),n.$filler=l,r.push(l);for(s=0;s<o;++s)l=r[s],!(!l||l.fill===!1)&&(l.fill=zV(r,s,i.propagate))},beforeDraw(t,e,i){let o=i.drawTime==="beforeDraw",r=t.getSortedVisibleDatasetMetas(),n=t.chartArea;for(let s=r.length-1;s>=0;--s){let a=r[s].$filler;a&&(a.line.updateControlPoints(n,a.axis),o&&a.fill&&iw(t.ctx,a,n))}},beforeDatasetsDraw(t,e,i){if(i.drawTime!=="beforeDatasetsDraw")return;let o=t.getSortedVisibleDatasetMetas();for(let r=o.length-1;r>=0;--r){let n=o[r].$filler;qD(n)&&iw(t.ctx,n,t.chartArea)}},beforeDatasetDraw(t,e,i){let o=e.meta.$filler;!qD(o)||i.drawTime!=="beforeDatasetDraw"||iw(t.ctx,o,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}},QD=(t,e)=>{let{boxHeight:i=e,boxWidth:o=e}=t;return t.usePointStyle&&(i=Math.min(i,e),o=t.pointStyleWidth||Math.min(o,e)),{boxWidth:o,boxHeight:i,itemHeight:Math.max(e,i)}},iH=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index,kg=class extends eo{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,i,o){this.maxWidth=e,this.maxHeight=i,this._margins=o,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){let e=this.options.labels||{},i=Ge(e.generateLabels,[this.chart],this)||[];e.filter&&(i=i.filter(o=>e.filter(o,this.chart.data))),e.sort&&(i=i.sort((o,r)=>e.sort(o,r,this.chart.data))),this.options.reverse&&i.reverse(),this.legendItems=i}fit(){let{options:e,ctx:i}=this;if(!e.display){this.width=this.height=0;return}let o=e.labels,r=ut(o.font),n=r.size,s=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=QD(o,n),d,c;i.font=r.string,this.isHorizontal()?(d=this.maxWidth,c=this._fitRows(s,n,a,l)+10):(c=this.maxHeight,d=this._fitCols(s,r,a,l)+10),this.width=Math.min(d,e.maxWidth||this.maxWidth),this.height=Math.min(c,e.maxHeight||this.maxHeight)}_fitRows(e,i,o,r){let{ctx:n,maxWidth:s,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],d=this.lineWidths=[0],c=r+a,u=e;n.textAlign="left",n.textBaseline="middle";let h=-1,p=-c;return this.legendItems.forEach((m,C)=>{let w=o+i/2+n.measureText(m.text).width;(C===0||d[d.length-1]+w+2*a>s)&&(u+=c,d[d.length-(C>0?0:1)]=0,p+=c,h++),l[C]={left:0,top:p,row:h,width:w,height:r},d[d.length-1]+=w+a}),u}_fitCols(e,i,o,r){let{ctx:n,maxHeight:s,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],d=this.columnSizes=[],c=s-e,u=a,h=0,p=0,m=0,C=0;return this.legendItems.forEach((w,b)=>{let{itemWidth:y,itemHeight:_}=oH(o,i,n,w,r);b>0&&p+_+2*a>c&&(u+=h+a,d.push({width:h,height:p}),m+=h+a,C++,h=p=0),l[b]={left:m,top:p,col:C,width:y,height:_},h=Math.max(h,y),p+=_+a}),u+=h,d.push({width:h,height:p}),u}adjustHitBoxes(){if(!this.options.display)return;let e=this._computeTitleHeight(),{legendHitBoxes:i,options:{align:o,labels:{padding:r},rtl:n}}=this,s=ss(n,this.left,this.width);if(this.isHorizontal()){let a=0,l=Mt(o,this.left+r,this.right-this.lineWidths[a]);for(let d of i)a!==d.row&&(a=d.row,l=Mt(o,this.left+r,this.right-this.lineWidths[a])),d.top+=this.top+e+r,d.left=s.leftForLtr(s.x(l),d.width),l+=d.width+r}else{let a=0,l=Mt(o,this.top+e+r,this.bottom-this.columnSizes[a].height);for(let d of i)d.col!==a&&(a=d.col,l=Mt(o,this.top+e+r,this.bottom-this.columnSizes[a].height)),d.top=l,d.left+=this.left+r,d.left=s.leftForLtr(s.x(d.left),d.width),l+=d.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){let e=this.ctx;hc(e,this),this._draw(),gc(e)}}_draw(){let{options:e,columnSizes:i,lineWidths:o,ctx:r}=this,{align:n,labels:s}=e,a=Ke.color,l=ss(e.rtl,this.left,this.width),d=ut(s.font),{padding:c}=s,u=d.size,h=u/2,p;this.drawTitle(),r.textAlign=l.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=d.string;let{boxWidth:m,boxHeight:C,itemHeight:w}=QD(s,u),b=function(D,R,P){if(isNaN(m)||m<=0||isNaN(C)||C<0)return;r.save();let N=ue(P.lineWidth,1);if(r.fillStyle=ue(P.fillStyle,a),r.lineCap=ue(P.lineCap,"butt"),r.lineDashOffset=ue(P.lineDashOffset,0),r.lineJoin=ue(P.lineJoin,"miter"),r.lineWidth=N,r.strokeStyle=ue(P.strokeStyle,a),r.setLineDash(ue(P.lineDash,[])),s.usePointStyle){let $={radius:C*Math.SQRT2/2,pointStyle:P.pointStyle,rotation:P.rotation,borderWidth:N},K=l.xPlus(D,m/2),ae=R+h;LC(r,$,K,ae,s.pointStyleWidth&&m)}else{let $=R+Math.max((u-C)/2,0),K=l.leftForLtr(D,m),ae=qr(P.borderRadius);r.beginPath(),Object.values(ae).some(Ne=>Ne!==0)?Wa(r,{x:K,y:$,w:m,h:C,radius:ae}):r.rect(K,$,m,C),r.fill(),N!==0&&r.stroke()}r.restore()},y=function(D,R,P){jr(r,P.text,D,R+w/2,d,{strikethrough:P.hidden,textAlign:l.textAlign(P.textAlign)})},_=this.isHorizontal(),x=this._computeTitleHeight();_?p={x:Mt(n,this.left+c,this.right-o[0]),y:this.top+c+x,line:0}:p={x:this.left+c,y:Mt(n,this.top+x+c,this.bottom-i[0].height),line:0},UC(this.ctx,e.textDirection);let E=w+c;this.legendItems.forEach((D,R)=>{r.strokeStyle=D.fontColor,r.fillStyle=D.fontColor;let P=r.measureText(D.text).width,N=l.textAlign(D.textAlign||(D.textAlign=s.textAlign)),$=m+h+P,K=p.x,ae=p.y;l.setWidth(this.width),_?R>0&&K+$+c>this.right&&(ae=p.y+=E,p.line++,K=p.x=Mt(n,this.left+c,this.right-o[p.line])):R>0&&ae+E>this.bottom&&(K=p.x=K+i[p.line].width+c,p.line++,ae=p.y=Mt(n,this.top+x+c,this.bottom-i[p.line].height));let Ne=l.x(K);if(b(Ne,ae,D),K=Y0(N,K+m+h,_?K+$:this.right,e.rtl),y(l.x(K),ae,D),_)p.x+=$+c;else if(typeof D.text!="string"){let At=d.lineHeight;p.y+=IR(D,At)+c}else p.y+=E}),jC(this.ctx,e.textDirection)}drawTitle(){let e=this.options,i=e.title,o=ut(i.font),r=Tt(i.padding);if(!i.display)return;let n=ss(e.rtl,this.left,this.width),s=this.ctx,a=i.position,l=o.size/2,d=r.top+l,c,u=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),c=this.top+d,u=Mt(e.align,u,this.right-h);else{let m=this.columnSizes.reduce((C,w)=>Math.max(C,w.height),0);c=d+Mt(e.align,this.top,this.bottom-m-e.labels.padding-this._computeTitleHeight())}let p=Mt(a,u,u+h);s.textAlign=n.textAlign(gg(a)),s.textBaseline="middle",s.strokeStyle=i.color,s.fillStyle=i.color,s.font=o.string,jr(s,i.text,p,c,o)}_computeTitleHeight(){let e=this.options.title,i=ut(e.font),o=Tt(e.padding);return e.display?i.lineHeight+o.height:0}_getLegendItemAt(e,i){let o,r,n;if(xo(e,this.left,this.right)&&xo(i,this.top,this.bottom)){for(n=this.legendHitBoxes,o=0;o<n.length;++o)if(r=n[o],xo(e,r.left,r.left+r.width)&&xo(i,r.top,r.top+r.height))return this.legendItems[o]}return null}handleEvent(e){let i=this.options;if(!sH(e.type,i))return;let o=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){let r=this._hoveredItem,n=iH(r,o);r&&!n&&Ge(i.onLeave,[e,r,this],this),this._hoveredItem=o,o&&!n&&Ge(i.onHover,[e,o,this],this)}else o&&Ge(i.onClick,[e,o,this],this)}};function oH(t,e,i,o,r){let n=rH(o,t,e,i),s=nH(r,o,e.lineHeight);return{itemWidth:n,itemHeight:s}}function rH(t,e,i,o){let r=t.text;return r&&typeof r!="string"&&(r=r.reduce((n,s)=>n.length>s.length?n:s)),e+i.size/2+o.measureText(r).width}function nH(t,e,i){let o=t;return typeof e.text!="string"&&(o=IR(e,i)),o}function IR(t,e){let i=t.text?t.text.length:0;return e*i}function sH(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var aH={id:"legend",_element:kg,start(t,e,i){let o=t.legend=new kg({ctx:t.ctx,options:i,chart:t});Vt.configure(t,o,i),Vt.addBox(t,o)},stop(t){Vt.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,i){let o=t.legend;Vt.configure(t,o,i),o.options=i},afterUpdate(t){let e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,i){let o=e.datasetIndex,r=i.chart;r.isDatasetVisible(o)?(r.hide(o),e.hidden=!0):(r.show(o),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){let e=t.data.datasets,{labels:{usePointStyle:i,pointStyle:o,textAlign:r,color:n,useBorderRadius:s,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{let d=l.controller.getStyle(i?0:void 0),c=Tt(d.borderWidth);return{text:e[l.index].label,fillStyle:d.backgroundColor,fontColor:n,hidden:!l.visible,lineCap:d.borderCapStyle,lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:d.borderColor,pointStyle:o||d.pointStyle,rotation:d.rotation,textAlign:r||d.textAlign,borderRadius:s&&(a||d.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}},Sc=class extends eo{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,i){let o=this.options;if(this.left=0,this.top=0,!o.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=i;let r=We(o.text)?o.text.length:1;this._padding=Tt(o.padding);let n=r*ut(o.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=n:this.width=n}isHorizontal(){let e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){let{top:i,left:o,bottom:r,right:n,options:s}=this,a=s.align,l=0,d,c,u;return this.isHorizontal()?(c=Mt(a,o,n),u=i+e,d=n-o):(s.position==="left"?(c=o+e,u=Mt(a,r,i),l=Ue*-.5):(c=n-e,u=Mt(a,i,r),l=Ue*.5),d=r-i),{titleX:c,titleY:u,maxWidth:d,rotation:l}}draw(){let e=this.ctx,i=this.options;if(!i.display)return;let o=ut(i.font),n=o.lineHeight/2+this._padding.top,{titleX:s,titleY:a,maxWidth:l,rotation:d}=this._drawArgs(n);jr(e,i.text,0,0,o,{color:i.color,maxWidth:l,rotation:d,textAlign:gg(i.align),textBaseline:"middle",translation:[s,a]})}};function lH(t,e){let i=new Sc({ctx:t.ctx,options:e,chart:t});Vt.configure(t,i,e),Vt.addBox(t,i),t.titleBlock=i}var dH={id:"title",_element:Sc,start(t,e,i){lH(t,i)},stop(t){let e=t.titleBlock;Vt.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,i){let o=t.titleBlock;Vt.configure(t,o,i),o.options=i},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},Eg=new WeakMap,cH={id:"subtitle",start(t,e,i){let o=new Sc({ctx:t.ctx,options:i,chart:t});Vt.configure(t,o,i),Vt.addBox(t,o),Eg.set(t,o)},stop(t){Vt.removeBox(t,Eg.get(t)),Eg.delete(t)},beforeUpdate(t,e,i){let o=Eg.get(t);Vt.configure(t,o,i),o.options=i},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},yc={average(t){if(!t.length)return!1;let e,i,o=new Set,r=0,n=0;for(e=0,i=t.length;e<i;++e){let a=t[e].element;if(a&&a.hasValue()){let l=a.tooltipPosition();o.add(l.x),r+=l.y,++n}}return{x:[...o].reduce((a,l)=>a+l)/o.size,y:r/n}},nearest(t,e){if(!t.length)return!1;let i=e.x,o=e.y,r=Number.POSITIVE_INFINITY,n,s,a;for(n=0,s=t.length;n<s;++n){let l=t[n].element;if(l&&l.hasValue()){let d=l.getCenterPoint(),c=lg(e,d);c<r&&(r=c,a=l)}}if(a){let l=a.tooltipPosition();i=l.x,o=l.y}return{x:i,y:o}}};function _o(t,e){return e&&(We(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Jo(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function uH(t,e){let{element:i,datasetIndex:o,index:r}=e,n=t.getDatasetMeta(o).controller,{label:s,value:a}=n.getLabelAndValue(r);return{chart:t,label:s,parsed:n.getParsed(r),raw:t.data.datasets[o].data[r],formattedValue:a,dataset:n.getDataset(),dataIndex:r,datasetIndex:o,element:i}}function XD(t,e){let i=t.chart.ctx,{body:o,footer:r,title:n}=t,{boxWidth:s,boxHeight:a}=e,l=ut(e.bodyFont),d=ut(e.titleFont),c=ut(e.footerFont),u=n.length,h=r.length,p=o.length,m=Tt(e.padding),C=m.height,w=0,b=o.reduce((x,E)=>x+E.before.length+E.lines.length+E.after.length,0);if(b+=t.beforeBody.length+t.afterBody.length,u&&(C+=u*d.lineHeight+(u-1)*e.titleSpacing+e.titleMarginBottom),b){let x=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;C+=p*x+(b-p)*l.lineHeight+(b-1)*e.bodySpacing}h&&(C+=e.footerMarginTop+h*c.lineHeight+(h-1)*e.footerSpacing);let y=0,_=function(x){w=Math.max(w,i.measureText(x).width+y)};return i.save(),i.font=d.string,Le(t.title,_),i.font=l.string,Le(t.beforeBody.concat(t.afterBody),_),y=e.displayColors?s+2+e.boxPadding:0,Le(o,x=>{Le(x.before,_),Le(x.lines,_),Le(x.after,_)}),y=0,i.font=c.string,Le(t.footer,_),i.restore(),w+=m.width,{width:w,height:C}}function hH(t,e){let{y:i,height:o}=e;return i<o/2?"top":i>t.height-o/2?"bottom":"center"}function gH(t,e,i,o){let{x:r,width:n}=o,s=i.caretSize+i.caretPadding;if(t==="left"&&r+n+s>e.width||t==="right"&&r-n-s<0)return!0}function pH(t,e,i,o){let{x:r,width:n}=i,{width:s,chartArea:{left:a,right:l}}=t,d="center";return o==="center"?d=r<=(a+l)/2?"left":"right":r<=n/2?d="left":r>=s-n/2&&(d="right"),gH(d,t,e,i)&&(d="center"),d}function ZD(t,e,i){let o=i.yAlign||e.yAlign||hH(t,i);return{xAlign:i.xAlign||e.xAlign||pH(t,e,i,o),yAlign:o}}function fH(t,e){let{x:i,width:o}=t;return e==="right"?i-=o:e==="center"&&(i-=o/2),i}function mH(t,e,i){let{y:o,height:r}=t;return e==="top"?o+=i:e==="bottom"?o-=r+i:o-=r/2,o}function JD(t,e,i,o){let{caretSize:r,caretPadding:n,cornerRadius:s}=t,{xAlign:a,yAlign:l}=i,d=r+n,{topLeft:c,topRight:u,bottomLeft:h,bottomRight:p}=qr(s),m=fH(e,a),C=mH(e,l,d);return l==="center"?a==="left"?m+=d:a==="right"&&(m-=d):a==="left"?m-=Math.max(c,h)+r:a==="right"&&(m+=Math.max(u,p)+r),{x:mt(m,0,o.width-e.width),y:mt(C,0,o.height-e.height)}}function Dg(t,e,i){let o=Tt(i.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-o.right:t.x+o.left}function eR(t){return _o([],Jo(t))}function vH(t,e,i){return Xo(t,{tooltip:e,tooltipItems:i,type:"tooltip"})}function tR(t,e){let i=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return i?t.override(i):t}var PR={beforeTitle:So,title(t){if(t.length>0){let e=t[0],i=e.chart.data.labels,o=i?i.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(o>0&&e.dataIndex<o)return i[e.dataIndex]}return""},afterTitle:So,beforeBody:So,beforeLabel:So,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");let i=t.formattedValue;return xe(i)||(e+=i),e},labelColor(t){let i=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:i.borderColor,backgroundColor:i.backgroundColor,borderWidth:i.borderWidth,borderDash:i.borderDash,borderDashOffset:i.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){let i=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:i.pointStyle,rotation:i.rotation}},afterLabel:So,afterBody:So,beforeFooter:So,footer:So,afterFooter:So};function hi(t,e,i,o){let r=t[e].call(i,o);return typeof r>"u"?PR[e].call(i,o):r}var iR=(()=>{class t extends eo{static positioners=yc;constructor(i){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=i.chart,this.options=i.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(i){this.options=i,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){let i=this._cachedAnimations;if(i)return i;let o=this.chart,r=this.options.setContext(this.getContext()),n=r.enabled&&o.options.animation&&r.animations,s=new Ag(this.chart,n);return n._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=vH(this.chart.getContext(),this,this._tooltipItems))}getTitle(i,o){let{callbacks:r}=o,n=hi(r,"beforeTitle",this,i),s=hi(r,"title",this,i),a=hi(r,"afterTitle",this,i),l=[];return l=_o(l,Jo(n)),l=_o(l,Jo(s)),l=_o(l,Jo(a)),l}getBeforeBody(i,o){return eR(hi(o.callbacks,"beforeBody",this,i))}getBody(i,o){let{callbacks:r}=o,n=[];return Le(i,s=>{let a={before:[],lines:[],after:[]},l=tR(r,s);_o(a.before,Jo(hi(l,"beforeLabel",this,s))),_o(a.lines,hi(l,"label",this,s)),_o(a.after,Jo(hi(l,"afterLabel",this,s))),n.push(a)}),n}getAfterBody(i,o){return eR(hi(o.callbacks,"afterBody",this,i))}getFooter(i,o){let{callbacks:r}=o,n=hi(r,"beforeFooter",this,i),s=hi(r,"footer",this,i),a=hi(r,"afterFooter",this,i),l=[];return l=_o(l,Jo(n)),l=_o(l,Jo(s)),l=_o(l,Jo(a)),l}_createItems(i){let o=this._active,r=this.chart.data,n=[],s=[],a=[],l=[],d,c;for(d=0,c=o.length;d<c;++d)l.push(uH(this.chart,o[d]));return i.filter&&(l=l.filter((u,h,p)=>i.filter(u,h,p,r))),i.itemSort&&(l=l.sort((u,h)=>i.itemSort(u,h,r))),Le(l,u=>{let h=tR(i.callbacks,u);n.push(hi(h,"labelColor",this,u)),s.push(hi(h,"labelPointStyle",this,u)),a.push(hi(h,"labelTextColor",this,u))}),this.labelColors=n,this.labelPointStyles=s,this.labelTextColors=a,this.dataPoints=l,l}update(i,o){let r=this.options.setContext(this.getContext()),n=this._active,s,a=[];if(!n.length)this.opacity!==0&&(s={opacity:0});else{let l=yc[r.position].call(this,n,this._eventPosition);a=this._createItems(r),this.title=this.getTitle(a,r),this.beforeBody=this.getBeforeBody(a,r),this.body=this.getBody(a,r),this.afterBody=this.getAfterBody(a,r),this.footer=this.getFooter(a,r);let d=this._size=XD(this,r),c=Object.assign({},l,d),u=ZD(this.chart,r,c),h=JD(r,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,s={opacity:1,x:h.x,y:h.y,width:d.width,height:d.height,caretX:l.x,caretY:l.y}}this._tooltipItems=a,this.$context=void 0,s&&this._resolveAnimations().update(this,s),i&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:o})}drawCaret(i,o,r,n){let s=this.getCaretPosition(i,r,n);o.lineTo(s.x1,s.y1),o.lineTo(s.x2,s.y2),o.lineTo(s.x3,s.y3)}getCaretPosition(i,o,r){let{xAlign:n,yAlign:s}=this,{caretSize:a,cornerRadius:l}=r,{topLeft:d,topRight:c,bottomLeft:u,bottomRight:h}=qr(l),{x:p,y:m}=i,{width:C,height:w}=o,b,y,_,x,E,D;return s==="center"?(E=m+w/2,n==="left"?(b=p,y=b-a,x=E+a,D=E-a):(b=p+C,y=b+a,x=E-a,D=E+a),_=b):(n==="left"?y=p+Math.max(d,u)+a:n==="right"?y=p+C-Math.max(c,h)-a:y=this.caretX,s==="top"?(x=m,E=x-a,b=y-a,_=y+a):(x=m+w,E=x+a,b=y+a,_=y-a),D=x),{x1:b,x2:y,x3:_,y1:x,y2:E,y3:D}}drawTitle(i,o,r){let n=this.title,s=n.length,a,l,d;if(s){let c=ss(r.rtl,this.x,this.width);for(i.x=Dg(this,r.titleAlign,r),o.textAlign=c.textAlign(r.titleAlign),o.textBaseline="middle",a=ut(r.titleFont),l=r.titleSpacing,o.fillStyle=r.titleColor,o.font=a.string,d=0;d<s;++d)o.fillText(n[d],c.x(i.x),i.y+a.lineHeight/2),i.y+=a.lineHeight+l,d+1===s&&(i.y+=r.titleMarginBottom-l)}}_drawColorBox(i,o,r,n,s){let a=this.labelColors[r],l=this.labelPointStyles[r],{boxHeight:d,boxWidth:c}=s,u=ut(s.bodyFont),h=Dg(this,"left",s),p=n.x(h),m=d<u.lineHeight?(u.lineHeight-d)/2:0,C=o.y+m;if(s.usePointStyle){let w={radius:Math.min(c,d)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},b=n.leftForLtr(p,c)+c/2,y=C+d/2;i.strokeStyle=s.multiKeyBackground,i.fillStyle=s.multiKeyBackground,fg(i,w,b,y),i.strokeStyle=a.borderColor,i.fillStyle=a.backgroundColor,fg(i,w,b,y)}else{i.lineWidth=Ce(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,i.strokeStyle=a.borderColor,i.setLineDash(a.borderDash||[]),i.lineDashOffset=a.borderDashOffset||0;let w=n.leftForLtr(p,c),b=n.leftForLtr(n.xPlus(p,1),c-2),y=qr(a.borderRadius);Object.values(y).some(_=>_!==0)?(i.beginPath(),i.fillStyle=s.multiKeyBackground,Wa(i,{x:w,y:C,w:c,h:d,radius:y}),i.fill(),i.stroke(),i.fillStyle=a.backgroundColor,i.beginPath(),Wa(i,{x:b,y:C+1,w:c-2,h:d-2,radius:y}),i.fill()):(i.fillStyle=s.multiKeyBackground,i.fillRect(w,C,c,d),i.strokeRect(w,C,c,d),i.fillStyle=a.backgroundColor,i.fillRect(b,C+1,c-2,d-2))}i.fillStyle=this.labelTextColors[r]}drawBody(i,o,r){let{body:n}=this,{bodySpacing:s,bodyAlign:a,displayColors:l,boxHeight:d,boxWidth:c,boxPadding:u}=r,h=ut(r.bodyFont),p=h.lineHeight,m=0,C=ss(r.rtl,this.x,this.width),w=function(N){o.fillText(N,C.x(i.x+m),i.y+p/2),i.y+=p+s},b=C.textAlign(a),y,_,x,E,D,R,P;for(o.textAlign=a,o.textBaseline="middle",o.font=h.string,i.x=Dg(this,b,r),o.fillStyle=r.bodyColor,Le(this.beforeBody,w),m=l&&b!=="right"?a==="center"?c/2+u:c+2+u:0,E=0,R=n.length;E<R;++E){for(y=n[E],_=this.labelTextColors[E],o.fillStyle=_,Le(y.before,w),x=y.lines,l&&x.length&&(this._drawColorBox(o,i,E,C,r),p=Math.max(h.lineHeight,d)),D=0,P=x.length;D<P;++D)w(x[D]),p=h.lineHeight;Le(y.after,w)}m=0,p=h.lineHeight,Le(this.afterBody,w),i.y-=s}drawFooter(i,o,r){let n=this.footer,s=n.length,a,l;if(s){let d=ss(r.rtl,this.x,this.width);for(i.x=Dg(this,r.footerAlign,r),i.y+=r.footerMarginTop,o.textAlign=d.textAlign(r.footerAlign),o.textBaseline="middle",a=ut(r.footerFont),o.fillStyle=r.footerColor,o.font=a.string,l=0;l<s;++l)o.fillText(n[l],d.x(i.x),i.y+a.lineHeight/2),i.y+=a.lineHeight+r.footerSpacing}}drawBackground(i,o,r,n){let{xAlign:s,yAlign:a}=this,{x:l,y:d}=i,{width:c,height:u}=r,{topLeft:h,topRight:p,bottomLeft:m,bottomRight:C}=qr(n.cornerRadius);o.fillStyle=n.backgroundColor,o.strokeStyle=n.borderColor,o.lineWidth=n.borderWidth,o.beginPath(),o.moveTo(l+h,d),a==="top"&&this.drawCaret(i,o,r,n),o.lineTo(l+c-p,d),o.quadraticCurveTo(l+c,d,l+c,d+p),a==="center"&&s==="right"&&this.drawCaret(i,o,r,n),o.lineTo(l+c,d+u-C),o.quadraticCurveTo(l+c,d+u,l+c-C,d+u),a==="bottom"&&this.drawCaret(i,o,r,n),o.lineTo(l+m,d+u),o.quadraticCurveTo(l,d+u,l,d+u-m),a==="center"&&s==="left"&&this.drawCaret(i,o,r,n),o.lineTo(l,d+h),o.quadraticCurveTo(l,d,l+h,d),o.closePath(),o.fill(),n.borderWidth>0&&o.stroke()}_updateAnimationTarget(i){let o=this.chart,r=this.$animations,n=r&&r.x,s=r&&r.y;if(n||s){let a=yc[i.position].call(this,this._active,this._eventPosition);if(!a)return;let l=this._size=XD(this,i),d=Object.assign({},a,this._size),c=ZD(o,i,d),u=JD(i,d,c,o);(n._to!==u.x||s._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=l.width,this.height=l.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(i){let o=this.options.setContext(this.getContext()),r=this.opacity;if(!r)return;this._updateAnimationTarget(o);let n={width:this.width,height:this.height},s={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;let a=Tt(o.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;o.enabled&&l&&(i.save(),i.globalAlpha=r,this.drawBackground(s,i,n,o),UC(i,o.textDirection),s.y+=a.top,this.drawTitle(s,i,o),this.drawBody(s,i,o),this.drawFooter(s,i,o),jC(i,o.textDirection),i.restore())}getActiveElements(){return this._active||[]}setActiveElements(i,o){let r=this._active,n=i.map(({datasetIndex:l,index:d})=>{let c=this.chart.getDatasetMeta(l);if(!c)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:c.data[d],index:d}}),s=!cc(r,n),a=this._positionChanged(n,o);(s||a)&&(this._active=n,this._eventPosition=o,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(i,o,r=!0){if(o&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;let n=this.options,s=this._active||[],a=this._getActiveElements(i,s,o,r),l=this._positionChanged(a,i),d=o||!cc(a,s)||l;return d&&(this._active=a,(n.enabled||n.external)&&(this._eventPosition={x:i.x,y:i.y},this.update(!0,o))),d}_getActiveElements(i,o,r,n){let s=this.options;if(i.type==="mouseout")return[];if(!n)return o.filter(l=>this.chart.data.datasets[l.datasetIndex]&&this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index)!==void 0);let a=this.chart.getElementsAtEventForMode(i,s.mode,s,r);return s.reverse&&a.reverse(),a}_positionChanged(i,o){let{caretX:r,caretY:n,options:s}=this,a=yc[s.position].call(this,i,o);return a!==!1&&(r!==a.x||n!==a.y)}}return t})(),CH={id:"tooltip",_element:iR,positioners:yc,afterInit(t,e,i){i&&(t.tooltip=new iR({chart:t,options:i}))},beforeUpdate(t,e,i){t.tooltip&&t.tooltip.initialize(i)},reset(t,e,i){t.tooltip&&t.tooltip.initialize(i)},afterDraw(t){let e=t.tooltip;if(e&&e._willRender()){let i={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",we(L({},i),{cancelable:!0}))===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",i)}},afterEvent(t,e){if(t.tooltip){let i=e.replay;t.tooltip.handleEvent(e.event,i,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:PR},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},wH=Object.freeze({__proto__:null,Colors:IV,Decimation:kV,Filler:tH,Legend:aH,SubTitle:cH,Title:dH,Tooltip:CH}),yH=(t,e,i,o)=>(typeof e=="string"?(i=t.push(e)-1,o.unshift({index:i,label:e})):isNaN(e)&&(i=null),i);function bH(t,e,i,o){let r=t.indexOf(e);if(r===-1)return yH(t,e,i,o);let n=t.lastIndexOf(e);return r!==n?i:r}var SH=(t,e)=>t===null?null:mt(Math.round(t),0,e);function oR(t){let e=this.getLabels();return t>=0&&t<e.length?e[t]:t}var xH=(()=>{class t extends ds{static id="category";static defaults={ticks:{callback:oR}};constructor(i){super(i),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(i){let o=this._addedLabels;if(o.length){let r=this.getLabels();for(let{index:n,label:s}of o)r[n]===s&&r.splice(n,1);this._addedLabels=[]}super.init(i)}parse(i,o){if(xe(i))return null;let r=this.getLabels();return o=isFinite(o)&&r[o]===i?o:bH(r,i,ue(o,i),this._addedLabels),SH(o,r.length-1)}determineDataLimits(){let{minDefined:i,maxDefined:o}=this.getUserBounds(),{min:r,max:n}=this.getMinMax(!0);this.options.bounds==="ticks"&&(i||(r=0),o||(n=this.getLabels().length-1)),this.min=r,this.max=n}buildTicks(){let i=this.min,o=this.max,r=this.options.offset,n=[],s=this.getLabels();s=i===0&&o===s.length-1?s:s.slice(i,o+1),this._valueRange=Math.max(s.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let a=i;a<=o;a++)n.push({value:a});return n}getLabelForValue(i){return oR.call(this,i)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(i){return typeof i!="number"&&(i=this.parse(i)),i===null?NaN:this.getPixelForDecimal((i-this._startValue)/this._valueRange)}getPixelForTick(i){let o=this.ticks;return i<0||i>o.length-1?null:this.getPixelForValue(o[i].value)}getValueForPixel(i){return Math.round(this._startValue+this.getDecimalForPixel(i)*this._valueRange)}getBasePixel(){return this.bottom}}return t})();function _H(t,e){let i=[],{bounds:r,step:n,min:s,max:a,precision:l,count:d,maxTicks:c,maxDigits:u,includeBounds:h}=t,p=n||1,m=c-1,{min:C,max:w}=e,b=!xe(s),y=!xe(a),_=!xe(d),x=(w-C)/(u+1),E=xC((w-C)/m/p)*p,D,R,P,N;if(E<1e-14&&!b&&!y)return[{value:C},{value:w}];N=Math.ceil(w/E)-Math.floor(C/E),N>m&&(E=xC(N*E/m/p)*p),xe(l)||(D=Math.pow(10,l),E=Math.ceil(E*D)/D),r==="ticks"?(R=Math.floor(C/E)*E,P=Math.ceil(w/E)*E):(R=C,P=w),b&&y&&n&&B0((a-s)/n,E/1e3)?(N=Math.round(Math.min((a-s)/E,c)),E=(a-s)/N,R=s,P=a):_?(R=b?s:R,P=y?a:P,N=d-1,E=(P-R)/N):(N=(P-R)/E,Va(N,Math.round(N),E/1e3)?N=Math.round(N):N=Math.ceil(N));let $=Math.max(EC(E),EC(R));D=Math.pow(10,xe(l)?$:l),R=Math.round(R*D)/D,P=Math.round(P*D)/D;let K=0;for(b&&(h&&R!==s?(i.push({value:s}),R<s&&K++,Va(Math.round((R+K*E)*D)/D,s,rR(s,x,t))&&K++):R<s&&K++);K<N;++K){let ae=Math.round((R+K*E)*D)/D;if(y&&ae>a)break;i.push({value:ae})}return y&&h&&P!==a?i.length&&Va(i[i.length-1].value,a,rR(a,x,t))?i[i.length-1].value=a:i.push({value:a}):(!y||P===a)&&i.push({value:P}),i}function rR(t,e,{horizontal:i,minRotation:o}){let r=Ni(o),n=(i?Math.sin(r):Math.cos(r))||.001,s=.75*e*(""+t).length;return Math.min(e/n,s)}var Ka=class extends ds{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,i){return xe(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){let{beginAtZero:e}=this.options,{minDefined:i,maxDefined:o}=this.getUserBounds(),{min:r,max:n}=this,s=l=>r=i?r:l,a=l=>n=o?n:l;if(e){let l=Ji(r),d=Ji(n);l<0&&d<0?a(0):l>0&&d>0&&s(0)}if(r===n){let l=n===0?1:Math.abs(n*.05);a(n+l),e||s(r-l)}this.min=r,this.max=n}getTickLimit(){let e=this.options.ticks,{maxTicksLimit:i,stepSize:o}=e,r;return o?(r=Math.ceil(this.max/o)-Math.floor(this.min/o)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${o} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),i=i||11),i&&(r=Math.min(i,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){let e=this.options,i=e.ticks,o=this.getTickLimit();o=Math.max(2,o);let r={maxTicks:o,bounds:e.bounds,min:e.min,max:e.max,precision:i.precision,step:i.stepSize,count:i.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:i.minRotation||0,includeBounds:i.includeBounds!==!1},n=this._range||this,s=_H(r,n);return e.bounds==="ticks"&&_C(s,this,"value"),e.reverse?(s.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),s}configure(){let e=this.ticks,i=this.min,o=this.max;if(super.configure(),this.options.offset&&e.length){let r=(o-i)/Math.max(e.length-1,1)/2;i-=r,o+=r}this._startValue=i,this._endValue=o,this._valueRange=o-i}getLabelForValue(e){return Ba(e,this.chart.options.locale,this.options.ticks.format)}},Cw=class extends Ka{static id="linear";static defaults={ticks:{callback:uc.formatters.numeric}};determineDataLimits(){let{min:e,max:i}=this.getMinMax(!0);this.min=Ze(e)?e:0,this.max=Ze(i)?i:1,this.handleTickRangeOptions()}computeTickLimit(){let e=this.isHorizontal(),i=e?this.width:this.height,o=Ni(this.options.ticks.minRotation),r=(e?Math.sin(o):Math.cos(o))||.001,n=this._resolveTickFontOptions(0);return Math.ceil(i/Math.min(40,n.lineHeight/r))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}},xc=t=>Math.floor(Yo(t)),ls=(t,e)=>Math.pow(10,xc(t)+e);function nR(t){return t/Math.pow(10,xc(t))===1}function sR(t,e,i){let o=Math.pow(10,i),r=Math.floor(t/o);return Math.ceil(e/o)-r}function EH(t,e){let i=e-t,o=xc(i);for(;sR(t,e,o)>10;)o++;for(;sR(t,e,o)<10;)o--;return Math.min(o,xc(t))}function DH(t,{min:e,max:i}){e=ui(t.min,e);let o=[],r=xc(e),n=EH(e,i),s=n<0?Math.pow(10,Math.abs(n)):1,a=Math.pow(10,n),l=r>n?Math.pow(10,r):0,d=Math.round((e-l)*s)/s,c=Math.floor((e-l)/a/10)*a*10,u=Math.floor((d-c)/Math.pow(10,n)),h=ui(t.min,Math.round((l+c+u*Math.pow(10,n))*s)/s);for(;h<i;)o.push({value:h,major:nR(h),significand:u}),u>=10?u=u<15?15:20:u++,u>=20&&(n++,u=2,s=n>=0?1:s),h=Math.round((l+c+u*Math.pow(10,n))*s)/s;let p=ui(t.max,h);return o.push({value:p,major:nR(p),significand:u}),o}var ww=class extends ds{static id="logarithmic";static defaults={ticks:{callback:uc.formatters.logarithmic,major:{enabled:!0}}};constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,i){let o=Ka.prototype.parse.apply(this,[e,i]);if(o===0){this._zero=!0;return}return Ze(o)&&o>0?o:null}determineDataLimits(){let{min:e,max:i}=this.getMinMax(!0);this.min=Ze(e)?Math.max(0,e):null,this.max=Ze(i)?Math.max(0,i):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Ze(this._userMin)&&(this.min=e===ls(this.min,0)?ls(this.min,-1):ls(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){let{minDefined:e,maxDefined:i}=this.getUserBounds(),o=this.min,r=this.max,n=a=>o=e?o:a,s=a=>r=i?r:a;o===r&&(o<=0?(n(1),s(10)):(n(ls(o,-1)),s(ls(r,1)))),o<=0&&n(ls(r,-1)),r<=0&&s(ls(o,1)),this.min=o,this.max=r}buildTicks(){let e=this.options,i={min:this._userMin,max:this._userMax},o=DH(i,this);return e.bounds==="ticks"&&_C(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}getLabelForValue(e){return e===void 0?"0":Ba(e,this.chart.options.locale,this.options.ticks.format)}configure(){let e=this.min;super.configure(),this._startValue=Yo(e),this._valueRange=Yo(this.max)-Yo(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Yo(e)-this._startValue)/this._valueRange)}getValueForPixel(e){let i=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+i*this._valueRange)}};function yw(t){let e=t.ticks;if(e.display&&t.display){let i=Tt(e.backdropPadding);return ue(e.font&&e.font.size,Ke.font.size)+i.height}return 0}function RH(t,e,i){return i=We(i)?i:[i],{w:X0(t,e.string,i),h:i.length*e.lineHeight}}function aR(t,e,i,o,r){return t===o||t===r?{start:e-i/2,end:e+i/2}:t<o||t>r?{start:e-i,end:e}:{start:e,end:e+i}}function MH(t){let e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},i=Object.assign({},e),o=[],r=[],n=t._pointLabels.length,s=t.options.pointLabels,a=s.centerPointLabels?Ue/n:0;for(let l=0;l<n;l++){let d=s.setContext(t.getPointLabelContext(l));r[l]=d.padding;let c=t.getPointPosition(l,t.drawingArea+r[l],a),u=ut(d.font),h=RH(t.ctx,u,t._pointLabels[l]);o[l]=h;let p=ci(t.getIndexAngle(l)+a),m=Math.round(ug(p)),C=aR(m,c.x,h.w,0,180),w=aR(m,c.y,h.h,90,270);TH(i,e,p,C,w)}t.setCenterPoint(e.l-i.l,i.r-e.r,e.t-i.t,i.b-e.b),t._pointLabelItems=PH(t,o,r)}function TH(t,e,i,o,r){let n=Math.abs(Math.sin(i)),s=Math.abs(Math.cos(i)),a=0,l=0;o.start<e.l?(a=(e.l-o.start)/n,t.l=Math.min(t.l,e.l-a)):o.end>e.r&&(a=(o.end-e.r)/n,t.r=Math.max(t.r,e.r+a)),r.start<e.t?(l=(e.t-r.start)/s,t.t=Math.min(t.t,e.t-l)):r.end>e.b&&(l=(r.end-e.b)/s,t.b=Math.max(t.b,e.b+l))}function AH(t,e,i){let o=t.drawingArea,{extra:r,additionalAngle:n,padding:s,size:a}=i,l=t.getPointPosition(e,o+r+s,n),d=Math.round(ug(ci(l.angle+et))),c=kH(l.y,a.h,d),u=FH(d),h=OH(l.x,a.w,u);return{visible:!0,x:l.x,y:c,textAlign:u,left:h,top:c,right:h+a.w,bottom:c+a.h}}function IH(t,e){if(!e)return!0;let{left:i,top:o,right:r,bottom:n}=t;return!(bo({x:i,y:o},e)||bo({x:i,y:n},e)||bo({x:r,y:o},e)||bo({x:r,y:n},e))}function PH(t,e,i){let o=[],r=t._pointLabels.length,n=t.options,{centerPointLabels:s,display:a}=n.pointLabels,l={extra:yw(n)/2,additionalAngle:s?Ue/r:0},d;for(let c=0;c<r;c++){l.padding=i[c],l.size=e[c];let u=AH(t,c,l);o.push(u),a==="auto"&&(u.visible=IH(u,d),u.visible&&(d=u))}return o}function FH(t){return t===0||t===180?"center":t<180?"left":"right"}function OH(t,e,i){return i==="right"?t-=e:i==="center"&&(t-=e/2),t}function kH(t,e,i){return i===90||i===270?t-=e/2:(i>270||i<90)&&(t-=e),t}function LH(t,e,i){let{left:o,top:r,right:n,bottom:s}=i,{backdropColor:a}=e;if(!xe(a)){let l=qr(e.borderRadius),d=Tt(e.backdropPadding);t.fillStyle=a;let c=o-d.left,u=r-d.top,h=n-o+d.width,p=s-r+d.height;Object.values(l).some(m=>m!==0)?(t.beginPath(),Wa(t,{x:c,y:u,w:h,h:p,radius:l}),t.fill()):t.fillRect(c,u,h,p)}}function NH(t,e){let{ctx:i,options:{pointLabels:o}}=t;for(let r=e-1;r>=0;r--){let n=t._pointLabelItems[r];if(!n.visible)continue;let s=o.setContext(t.getPointLabelContext(r));LH(i,s,n);let a=ut(s.font),{x:l,y:d,textAlign:c}=n;jr(i,t._pointLabels[r],l,d+a.lineHeight/2,a,{color:s.color,textAlign:c,textBaseline:"middle"})}}function FR(t,e,i,o){let{ctx:r}=t;if(i)r.arc(t.xCenter,t.yCenter,e,0,je);else{let n=t.getPointPosition(0,e);r.moveTo(n.x,n.y);for(let s=1;s<o;s++)n=t.getPointPosition(s,e),r.lineTo(n.x,n.y)}}function zH(t,e,i,o,r){let n=t.ctx,s=e.circular,{color:a,lineWidth:l}=e;!s&&!o||!a||!l||i<0||(n.save(),n.strokeStyle=a,n.lineWidth=l,n.setLineDash(r.dash),n.lineDashOffset=r.dashOffset,n.beginPath(),FR(t,i,s,o),n.closePath(),n.stroke(),n.restore())}function GH(t,e,i){return Xo(t,{label:i,index:e,type:"pointLabel"})}var bw=class extends Ka{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:uc.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){let e=this._padding=Tt(yw(this.options)/2),i=this.width=this.maxWidth-e.width,o=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+i/2+e.left),this.yCenter=Math.floor(this.top+o/2+e.top),this.drawingArea=Math.floor(Math.min(i,o)/2)}determineDataLimits(){let{min:e,max:i}=this.getMinMax(!1);this.min=Ze(e)&&!isNaN(e)?e:0,this.max=Ze(i)&&!isNaN(i)?i:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/yw(this.options))}generateTickLabels(e){Ka.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((i,o)=>{let r=Ge(this.options.pointLabels.callback,[i,o],this);return r||r===0?r:""}).filter((i,o)=>this.chart.getDataVisibility(o))}fit(){let e=this.options;e.display&&e.pointLabels.display?MH(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,i,o,r){this.xCenter+=Math.floor((e-i)/2),this.yCenter+=Math.floor((o-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,i,o,r))}getIndexAngle(e){let i=je/(this._pointLabels.length||1),o=this.options.startAngle||0;return ci(e*i+Ni(o))}getDistanceFromCenterForValue(e){if(xe(e))return NaN;let i=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*i:(e-this.min)*i}getValueForDistanceFromCenter(e){if(xe(e))return NaN;let i=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-i:this.min+i}getPointLabelContext(e){let i=this._pointLabels||[];if(e>=0&&e<i.length){let o=i[e];return GH(this.getContext(),e,o)}}getPointPosition(e,i,o=0){let r=this.getIndexAngle(e)-et+o;return{x:Math.cos(r)*i+this.xCenter,y:Math.sin(r)*i+this.yCenter,angle:r}}getPointPositionForValue(e,i){return this.getPointPosition(e,this.getDistanceFromCenterForValue(i))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){let{left:i,top:o,right:r,bottom:n}=this._pointLabelItems[e];return{left:i,top:o,right:r,bottom:n}}drawBackground(){let{backgroundColor:e,grid:{circular:i}}=this.options;if(e){let o=this.ctx;o.save(),o.beginPath(),FR(this,this.getDistanceFromCenterForValue(this._endValue),i,this._pointLabels.length),o.closePath(),o.fillStyle=e,o.fill(),o.restore()}}drawGrid(){let e=this.ctx,i=this.options,{angleLines:o,grid:r,border:n}=i,s=this._pointLabels.length,a,l,d;if(i.pointLabels.display&&NH(this,s),r.display&&this.ticks.forEach((c,u)=>{if(u!==0||u===0&&this.min<0){l=this.getDistanceFromCenterForValue(c.value);let h=this.getContext(u),p=r.setContext(h),m=n.setContext(h);zH(this,p,l,s,m)}}),o.display){for(e.save(),a=s-1;a>=0;a--){let c=o.setContext(this.getPointLabelContext(a)),{color:u,lineWidth:h}=c;!h||!u||(e.lineWidth=h,e.strokeStyle=u,e.setLineDash(c.borderDash),e.lineDashOffset=c.borderDashOffset,l=this.getDistanceFromCenterForValue(i.ticks.reverse?this.min:this.max),d=this.getPointPosition(a,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(d.x,d.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){let e=this.ctx,i=this.options,o=i.ticks;if(!o.display)return;let r=this.getIndexAngle(0),n,s;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(r),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&this.min>=0&&!i.reverse)return;let d=o.setContext(this.getContext(l)),c=ut(d.font);if(n=this.getDistanceFromCenterForValue(this.ticks[l].value),d.showLabelBackdrop){e.font=c.string,s=e.measureText(a.label).width,e.fillStyle=d.backdropColor;let u=Tt(d.backdropPadding);e.fillRect(-s/2-u.left,-n-c.size/2-u.top,s+u.width,c.size+u.height)}jr(e,a.label,0,-n,c,{color:d.color,strokeColor:d.textStrokeColor,strokeWidth:d.textStrokeWidth})}),e.restore()}drawTitle(){}},zg={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},gi=Object.keys(zg);function lR(t,e){return t-e}function dR(t,e){if(xe(e))return null;let i=t._adapter,{parser:o,round:r,isoWeekday:n}=t._parseOpts,s=e;return typeof o=="function"&&(s=o(s)),Ze(s)||(s=typeof o=="string"?i.parse(s,o):i.parse(s)),s===null?null:(r&&(s=r==="week"&&(ns(n)||n===!0)?i.startOf(s,"isoWeek",n):i.startOf(s,r)),+s)}function cR(t,e,i,o){let r=gi.length;for(let n=gi.indexOf(t);n<r-1;++n){let s=zg[gi[n]],a=s.steps?s.steps:Number.MAX_SAFE_INTEGER;if(s.common&&Math.ceil((i-e)/(a*s.size))<=o)return gi[n]}return gi[r-1]}function VH(t,e,i,o,r){for(let n=gi.length-1;n>=gi.indexOf(i);n--){let s=gi[n];if(zg[s].common&&t._adapter.diff(r,o,s)>=e-1)return s}return gi[i?gi.indexOf(i):0]}function HH(t){for(let e=gi.indexOf(t)+1,i=gi.length;e<i;++e)if(zg[gi[e]].common)return gi[e]}function uR(t,e,i){if(!i)t[e]=!0;else if(i.length){let{lo:o,hi:r}=hg(i,e),n=i[o]>=e?i[o]:i[r];t[n]=!0}}function BH(t,e,i,o){let r=t._adapter,n=+r.startOf(e[0].value,o),s=e[e.length-1].value,a,l;for(a=n;a<=s;a=+r.add(a,1,o))l=i[a],l>=0&&(e[l].major=!0);return e}function hR(t,e,i){let o=[],r={},n=e.length,s,a;for(s=0;s<n;++s)a=e[s],r[a]=s,o.push({value:a,major:!1});return n===0||!i?o:BH(t,o,r,i)}var Sw=(()=>{class t extends ds{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(i){super(i),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(i,o={}){let r=i.time||(i.time={}),n=this._adapter=new eG._date(i.adapters.date);n.init(o),za(r.displayFormats,n.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(i),this._normalized=o.normalized}parse(i,o){return i===void 0?null:dR(this,i)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){let i=this.options,o=this._adapter,r=i.time.unit||"day",{min:n,max:s,minDefined:a,maxDefined:l}=this.getUserBounds();function d(c){!a&&!isNaN(c.min)&&(n=Math.min(n,c.min)),!l&&!isNaN(c.max)&&(s=Math.max(s,c.max))}(!a||!l)&&(d(this._getLabelBounds()),(i.bounds!=="ticks"||i.ticks.source!=="labels")&&d(this.getMinMax(!1))),n=Ze(n)&&!isNaN(n)?n:+o.startOf(Date.now(),r),s=Ze(s)&&!isNaN(s)?s:+o.endOf(Date.now(),r)+1,this.min=Math.min(n,s-1),this.max=Math.max(n+1,s)}_getLabelBounds(){let i=this.getLabelTimestamps(),o=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return i.length&&(o=i[0],r=i[i.length-1]),{min:o,max:r}}buildTicks(){let i=this.options,o=i.time,r=i.ticks,n=r.source==="labels"?this.getLabelTimestamps():this._generate();i.bounds==="ticks"&&n.length&&(this.min=this._userMin||n[0],this.max=this._userMax||n[n.length-1]);let s=this.min,a=this.max,l=j0(n,s,a);return this._unit=o.unit||(r.autoSkip?cR(o.minUnit,this.min,this.max,this._getLabelCapacity(s)):VH(this,l.length,o.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:HH(this._unit),this.initOffsets(n),i.reverse&&l.reverse(),hR(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(i=>+i.value))}initOffsets(i=[]){let o=0,r=0,n,s;this.options.offset&&i.length&&(n=this.getDecimalForValue(i[0]),i.length===1?o=1-n:o=(this.getDecimalForValue(i[1])-n)/2,s=this.getDecimalForValue(i[i.length-1]),i.length===1?r=s:r=(s-this.getDecimalForValue(i[i.length-2]))/2);let a=i.length<3?.5:.25;o=mt(o,0,a),r=mt(r,0,a),this._offsets={start:o,end:r,factor:1/(o+1+r)}}_generate(){let i=this._adapter,o=this.min,r=this.max,n=this.options,s=n.time,a=s.unit||cR(s.minUnit,o,r,this._getLabelCapacity(o)),l=ue(n.ticks.stepSize,1),d=a==="week"?s.isoWeekday:!1,c=ns(d)||d===!0,u={},h=o,p,m;if(c&&(h=+i.startOf(h,"isoWeek",d)),h=+i.startOf(h,c?"day":a),i.diff(r,o,a)>1e5*l)throw new Error(o+" and "+r+" are too far apart with stepSize of "+l+" "+a);let C=n.ticks.source==="data"&&this.getDataTimestamps();for(p=h,m=0;p<r;p=+i.add(p,l,a),m++)uR(u,p,C);return(p===r||n.bounds==="ticks"||m===1)&&uR(u,p,C),Object.keys(u).sort(lR).map(w=>+w)}getLabelForValue(i){let o=this._adapter,r=this.options.time;return r.tooltipFormat?o.format(i,r.tooltipFormat):o.format(i,r.displayFormats.datetime)}format(i,o){let n=this.options.time.displayFormats,s=this._unit,a=o||n[s];return this._adapter.format(i,a)}_tickFormatFunction(i,o,r,n){let s=this.options,a=s.ticks.callback;if(a)return Ge(a,[i,o,r],this);let l=s.time.displayFormats,d=this._unit,c=this._majorUnit,u=d&&l[d],h=c&&l[c],p=r[o],m=c&&h&&p&&p.major;return this._adapter.format(i,n||(m?h:u))}generateTickLabels(i){let o,r,n;for(o=0,r=i.length;o<r;++o)n=i[o],n.label=this._tickFormatFunction(n.value,o,i)}getDecimalForValue(i){return i===null?NaN:(i-this.min)/(this.max-this.min)}getPixelForValue(i){let o=this._offsets,r=this.getDecimalForValue(i);return this.getPixelForDecimal((o.start+r)*o.factor)}getValueForPixel(i){let o=this._offsets,r=this.getDecimalForPixel(i)/o.factor-o.end;return this.min+r*(this.max-this.min)}_getLabelSize(i){let o=this.options.ticks,r=this.ctx.measureText(i).width,n=Ni(this.isHorizontal()?o.maxRotation:o.minRotation),s=Math.cos(n),a=Math.sin(n),l=this._resolveTickFontOptions(0).size;return{w:r*s+l*a,h:r*a+l*s}}_getLabelCapacity(i){let o=this.options.time,r=o.displayFormats,n=r[o.unit]||r.millisecond,s=this._tickFormatFunction(i,0,hR(this,[i],this._majorUnit),n),a=this._getLabelSize(s),l=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return l>0?l:1}getDataTimestamps(){let i=this._cache.data||[],o,r;if(i.length)return i;let n=this.getMatchingVisibleMetas();if(this._normalized&&n.length)return this._cache.data=n[0].controller.getAllParsedValues(this);for(o=0,r=n.length;o<r;++o)i=i.concat(n[o].controller.getAllParsedValues(this));return this._cache.data=this.normalize(i)}getLabelTimestamps(){let i=this._cache.labels||[],o,r;if(i.length)return i;let n=this.getLabels();for(o=0,r=n.length;o<r;++o)i.push(dR(this,n[o]));return this._cache.labels=this._normalized?i:this.normalize(i)}normalize(i){return MC(i.sort(lR))}}return t})();function Rg(t,e,i){let o=0,r=t.length-1,n,s,a,l;i?(e>=t[o].pos&&e<=t[r].pos&&({lo:o,hi:r}=yo(t,"pos",e)),{pos:n,time:a}=t[o],{pos:s,time:l}=t[r]):(e>=t[o].time&&e<=t[r].time&&({lo:o,hi:r}=yo(t,"time",e)),{time:n,pos:a}=t[o],{time:s,pos:l}=t[r]);let d=s-n;return d?a+(l-a)*(e-n)/d:a}var xw=class extends Sw{static id="timeseries";static defaults=Sw.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){let e=this._getTimestampsForTable(),i=this._table=this.buildLookupTable(e);this._minPos=Rg(i,this.min),this._tableRange=Rg(i,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){let{min:i,max:o}=this,r=[],n=[],s,a,l,d,c;for(s=0,a=e.length;s<a;++s)d=e[s],d>=i&&d<=o&&r.push(d);if(r.length<2)return[{time:i,pos:0},{time:o,pos:1}];for(s=0,a=r.length;s<a;++s)c=r[s+1],l=r[s-1],d=r[s],Math.round((c+l)/2)!==d&&n.push({time:d,pos:s/(a-1)});return n}_generate(){let e=this.min,i=this.max,o=super.getDataTimestamps();return(!o.includes(e)||!o.length)&&o.splice(0,0,e),(!o.includes(i)||o.length===1)&&o.push(i),o.sort((r,n)=>r-n)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;let i=this.getDataTimestamps(),o=this.getLabelTimestamps();return i.length&&o.length?e=this.normalize(i.concat(o)):e=i.length?i:o,e=this._cache.all=e,e}getDecimalForValue(e){return(Rg(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){let i=this._offsets,o=this.getDecimalForPixel(e)/i.factor-i.end;return Rg(this._table,o*this._tableRange+this._minPos,!0)}},WH=Object.freeze({__proto__:null,CategoryScale:xH,LinearScale:Cw,LogarithmicScale:ww,RadialLinearScale:bw,TimeScale:Sw,TimeSeriesScale:xw}),OR=[J1,EV,wH,WH];var UH=typeof global=="object"&&global&&global.Object===Object&&global,Gg=UH;var jH=typeof self=="object"&&self&&self.Object===Object&&self,qH=Gg||jH||Function("return this")(),zi=qH;var KH=zi.Symbol,$a=KH;var kR=Object.prototype,$H=kR.hasOwnProperty,YH=kR.toString,Ec=$a?$a.toStringTag:void 0;function QH(t){var e=$H.call(t,Ec),i=t[Ec];try{t[Ec]=void 0;var o=!0}catch{}var r=YH.call(t);return o&&(e?t[Ec]=i:delete t[Ec]),r}var LR=QH;var XH=Object.prototype,ZH=XH.toString;function JH(t){return ZH.call(t)}var NR=JH;var eB="[object Null]",tB="[object Undefined]",zR=$a?$a.toStringTag:void 0;function iB(t){return t==null?t===void 0?tB:eB:zR&&zR in Object(t)?LR(t):NR(t)}var Qr=iB;function oB(t){return t!=null&&typeof t=="object"}var Do=oB;var rB=Array.isArray,Dc=rB;function nB(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var pi=nB;function sB(t){return t}var Vg=sB;var aB="[object AsyncFunction]",lB="[object Function]",dB="[object GeneratorFunction]",cB="[object Proxy]";function uB(t){if(!pi(t))return!1;var e=Qr(t);return e==lB||e==dB||e==aB||e==cB}var Ya=uB;var hB=zi["__core-js_shared__"],Hg=hB;var GR=function(){var t=/[^.]+$/.exec(Hg&&Hg.keys&&Hg.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function gB(t){return!!GR&&GR in t}var VR=gB;var pB=Function.prototype,fB=pB.toString;function mB(t){if(t!=null){try{return fB.call(t)}catch{}try{return t+""}catch{}}return""}var HR=mB;var vB=/[\\^$.*+?()[\]{}|]/g,CB=/^\[object .+?Constructor\]$/,wB=Function.prototype,yB=Object.prototype,bB=wB.toString,SB=yB.hasOwnProperty,xB=RegExp("^"+bB.call(SB).replace(vB,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function _B(t){if(!pi(t)||VR(t))return!1;var e=Ya(t)?xB:CB;return e.test(HR(t))}var BR=_B;function EB(t,e){return t?.[e]}var WR=EB;function DB(t,e){var i=WR(t,e);return BR(i)?i:void 0}var Qa=DB;var UR=Object.create,RB=function(){function t(){}return function(e){if(!pi(e))return{};if(UR)return UR(e);t.prototype=e;var i=new t;return t.prototype=void 0,i}}(),jR=RB;function MB(t,e,i){switch(i.length){case 0:return t.call(e);case 1:return t.call(e,i[0]);case 2:return t.call(e,i[0],i[1]);case 3:return t.call(e,i[0],i[1],i[2])}return t.apply(e,i)}var qR=MB;function TB(t,e){var i=-1,o=t.length;for(e||(e=Array(o));++i<o;)e[i]=t[i];return e}var KR=TB;var AB=800,IB=16,PB=Date.now;function FB(t){var e=0,i=0;return function(){var o=PB(),r=IB-(o-i);if(i=o,r>0){if(++e>=AB)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var $R=FB;function OB(t){return function(){return t}}var YR=OB;var kB=function(){try{var t=Qa(Object,"defineProperty");return t({},"",{}),t}catch{}}(),Xa=kB;var LB=Xa?function(t,e){return Xa(t,"toString",{configurable:!0,enumerable:!1,value:YR(e),writable:!0})}:Vg,QR=LB;var NB=$R(QR),XR=NB;var zB=9007199254740991,GB=/^(?:0|[1-9]\d*)$/;function VB(t,e){var i=typeof t;return e=e??zB,!!e&&(i=="number"||i!="symbol"&&GB.test(t))&&t>-1&&t%1==0&&t<e}var Bg=VB;function HB(t,e,i){e=="__proto__"&&Xa?Xa(t,e,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[e]=i}var Za=HB;function BB(t,e){return t===e||t!==t&&e!==e}var Xr=BB;var WB=Object.prototype,UB=WB.hasOwnProperty;function jB(t,e,i){var o=t[e];(!(UB.call(t,e)&&Xr(o,i))||i===void 0&&!(e in t))&&Za(t,e,i)}var ZR=jB;function qB(t,e,i,o){var r=!i;i||(i={});for(var n=-1,s=e.length;++n<s;){var a=e[n],l=o?o(i[a],t[a],a,i,t):void 0;l===void 0&&(l=t[a]),r?Za(i,a,l):ZR(i,a,l)}return i}var JR=qB;var eM=Math.max;function KB(t,e,i){return e=eM(e===void 0?t.length-1:e,0),function(){for(var o=arguments,r=-1,n=eM(o.length-e,0),s=Array(n);++r<n;)s[r]=o[e+r];r=-1;for(var a=Array(e+1);++r<e;)a[r]=o[r];return a[e]=i(s),qR(t,this,a)}}var tM=KB;function $B(t,e){return XR(tM(t,e,Vg),t+"")}var iM=$B;var YB=9007199254740991;function QB(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=YB}var Wg=QB;function XB(t){return t!=null&&Wg(t.length)&&!Ya(t)}var Ja=XB;function ZB(t,e,i){if(!pi(i))return!1;var o=typeof e;return(o=="number"?Ja(i)&&Bg(e,i.length):o=="string"&&e in i)?Xr(i[e],t):!1}var oM=ZB;function JB(t){return iM(function(e,i){var o=-1,r=i.length,n=r>1?i[r-1]:void 0,s=r>2?i[2]:void 0;for(n=t.length>3&&typeof n=="function"?(r--,n):void 0,s&&oM(i[0],i[1],s)&&(n=r<3?void 0:n,r=1),e=Object(e);++o<r;){var a=i[o];a&&t(e,a,o,n)}return e})}var rM=JB;var e2=Object.prototype;function t2(t){var e=t&&t.constructor,i=typeof e=="function"&&e.prototype||e2;return t===i}var Ug=t2;function i2(t,e){for(var i=-1,o=Array(t);++i<t;)o[i]=e(i);return o}var nM=i2;var o2="[object Arguments]";function r2(t){return Do(t)&&Qr(t)==o2}var Dw=r2;var sM=Object.prototype,n2=sM.hasOwnProperty,s2=sM.propertyIsEnumerable,a2=Dw(function(){return arguments}())?Dw:function(t){return Do(t)&&n2.call(t,"callee")&&!s2.call(t,"callee")},Rc=a2;function l2(){return!1}var aM=l2;var cM=typeof exports=="object"&&exports&&!exports.nodeType&&exports,lM=cM&&typeof module=="object"&&module&&!module.nodeType&&module,d2=lM&&lM.exports===cM,dM=d2?zi.Buffer:void 0,c2=dM?dM.isBuffer:void 0,u2=c2||aM,jg=u2;var h2="[object Arguments]",g2="[object Array]",p2="[object Boolean]",f2="[object Date]",m2="[object Error]",v2="[object Function]",C2="[object Map]",w2="[object Number]",y2="[object Object]",b2="[object RegExp]",S2="[object Set]",x2="[object String]",_2="[object WeakMap]",E2="[object ArrayBuffer]",D2="[object DataView]",R2="[object Float32Array]",M2="[object Float64Array]",T2="[object Int8Array]",A2="[object Int16Array]",I2="[object Int32Array]",P2="[object Uint8Array]",F2="[object Uint8ClampedArray]",O2="[object Uint16Array]",k2="[object Uint32Array]",$e={};$e[R2]=$e[M2]=$e[T2]=$e[A2]=$e[I2]=$e[P2]=$e[F2]=$e[O2]=$e[k2]=!0;$e[h2]=$e[g2]=$e[E2]=$e[p2]=$e[D2]=$e[f2]=$e[m2]=$e[v2]=$e[C2]=$e[w2]=$e[y2]=$e[b2]=$e[S2]=$e[x2]=$e[_2]=!1;function L2(t){return Do(t)&&Wg(t.length)&&!!$e[Qr(t)]}var uM=L2;function N2(t){return function(e){return t(e)}}var hM=N2;var gM=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Mc=gM&&typeof module=="object"&&module&&!module.nodeType&&module,z2=Mc&&Mc.exports===gM,Rw=z2&&Gg.process,G2=function(){try{var t=Mc&&Mc.require&&Mc.require("util").types;return t||Rw&&Rw.binding&&Rw.binding("util")}catch{}}(),Mw=G2;var pM=Mw&&Mw.isTypedArray,V2=pM?hM(pM):uM,qg=V2;var H2=Object.prototype,B2=H2.hasOwnProperty;function W2(t,e){var i=Dc(t),o=!i&&Rc(t),r=!i&&!o&&jg(t),n=!i&&!o&&!r&&qg(t),s=i||o||r||n,a=s?nM(t.length,String):[],l=a.length;for(var d in t)(e||B2.call(t,d))&&!(s&&(d=="length"||r&&(d=="offset"||d=="parent")||n&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||Bg(d,l)))&&a.push(d);return a}var fM=W2;function U2(t,e){return function(i){return t(e(i))}}var mM=U2;function j2(t){var e=[];if(t!=null)for(var i in Object(t))e.push(i);return e}var vM=j2;var q2=Object.prototype,K2=q2.hasOwnProperty;function $2(t){if(!pi(t))return vM(t);var e=Ug(t),i=[];for(var o in t)o=="constructor"&&(e||!K2.call(t,o))||i.push(o);return i}var CM=$2;function Y2(t){return Ja(t)?fM(t,!0):CM(t)}var Kg=Y2;var Q2=Qa(Object,"create"),er=Q2;function X2(){this.__data__=er?er(null):{},this.size=0}var wM=X2;function Z2(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var yM=Z2;var J2="__lodash_hash_undefined__",eW=Object.prototype,tW=eW.hasOwnProperty;function iW(t){var e=this.__data__;if(er){var i=e[t];return i===J2?void 0:i}return tW.call(e,t)?e[t]:void 0}var bM=iW;var oW=Object.prototype,rW=oW.hasOwnProperty;function nW(t){var e=this.__data__;return er?e[t]!==void 0:rW.call(e,t)}var SM=nW;var sW="__lodash_hash_undefined__";function aW(t,e){var i=this.__data__;return this.size+=this.has(t)?0:1,i[t]=er&&e===void 0?sW:e,this}var xM=aW;function el(t){var e=-1,i=t==null?0:t.length;for(this.clear();++e<i;){var o=t[e];this.set(o[0],o[1])}}el.prototype.clear=wM;el.prototype.delete=yM;el.prototype.get=bM;el.prototype.has=SM;el.prototype.set=xM;var Tw=el;function lW(){this.__data__=[],this.size=0}var _M=lW;function dW(t,e){for(var i=t.length;i--;)if(Xr(t[i][0],e))return i;return-1}var Zr=dW;var cW=Array.prototype,uW=cW.splice;function hW(t){var e=this.__data__,i=Zr(e,t);if(i<0)return!1;var o=e.length-1;return i==o?e.pop():uW.call(e,i,1),--this.size,!0}var EM=hW;function gW(t){var e=this.__data__,i=Zr(e,t);return i<0?void 0:e[i][1]}var DM=gW;function pW(t){return Zr(this.__data__,t)>-1}var RM=pW;function fW(t,e){var i=this.__data__,o=Zr(i,t);return o<0?(++this.size,i.push([t,e])):i[o][1]=e,this}var MM=fW;function tl(t){var e=-1,i=t==null?0:t.length;for(this.clear();++e<i;){var o=t[e];this.set(o[0],o[1])}}tl.prototype.clear=_M;tl.prototype.delete=EM;tl.prototype.get=DM;tl.prototype.has=RM;tl.prototype.set=MM;var Jr=tl;var mW=Qa(zi,"Map"),$g=mW;function vW(){this.size=0,this.__data__={hash:new Tw,map:new($g||Jr),string:new Tw}}var TM=vW;function CW(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var AM=CW;function wW(t,e){var i=t.__data__;return AM(e)?i[typeof e=="string"?"string":"hash"]:i.map}var en=wW;function yW(t){var e=en(this,t).delete(t);return this.size-=e?1:0,e}var IM=yW;function bW(t){return en(this,t).get(t)}var PM=bW;function SW(t){return en(this,t).has(t)}var FM=SW;function xW(t,e){var i=en(this,t),o=i.size;return i.set(t,e),this.size+=i.size==o?0:1,this}var OM=xW;function il(t){var e=-1,i=t==null?0:t.length;for(this.clear();++e<i;){var o=t[e];this.set(o[0],o[1])}}il.prototype.clear=TM;il.prototype.delete=IM;il.prototype.get=PM;il.prototype.has=FM;il.prototype.set=OM;var kM=il;var _W=mM(Object.getPrototypeOf,Object),Yg=_W;var EW="[object Object]",DW=Function.prototype,RW=Object.prototype,LM=DW.toString,MW=RW.hasOwnProperty,TW=LM.call(Object);function AW(t){if(!Do(t)||Qr(t)!=EW)return!1;var e=Yg(t);if(e===null)return!0;var i=MW.call(e,"constructor")&&e.constructor;return typeof i=="function"&&i instanceof i&&LM.call(i)==TW}var NM=AW;function IW(){this.__data__=new Jr,this.size=0}var zM=IW;function PW(t){var e=this.__data__,i=e.delete(t);return this.size=e.size,i}var GM=PW;function FW(t){return this.__data__.get(t)}var VM=FW;function OW(t){return this.__data__.has(t)}var HM=OW;var kW=200;function LW(t,e){var i=this.__data__;if(i instanceof Jr){var o=i.__data__;if(!$g||o.length<kW-1)return o.push([t,e]),this.size=++i.size,this;i=this.__data__=new kM(o)}return i.set(t,e),this.size=i.size,this}var BM=LW;function ol(t){var e=this.__data__=new Jr(t);this.size=e.size}ol.prototype.clear=zM;ol.prototype.delete=GM;ol.prototype.get=VM;ol.prototype.has=HM;ol.prototype.set=BM;var WM=ol;var KM=typeof exports=="object"&&exports&&!exports.nodeType&&exports,UM=KM&&typeof module=="object"&&module&&!module.nodeType&&module,NW=UM&&UM.exports===KM,jM=NW?zi.Buffer:void 0,qM=jM?jM.allocUnsafe:void 0;function zW(t,e){if(e)return t.slice();var i=t.length,o=qM?qM(i):new t.constructor(i);return t.copy(o),o}var $M=zW;var GW=zi.Uint8Array,Aw=GW;function VW(t){var e=new t.constructor(t.byteLength);return new Aw(e).set(new Aw(t)),e}var YM=VW;function HW(t,e){var i=e?YM(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)}var QM=HW;function BW(t){return typeof t.constructor=="function"&&!Ug(t)?jR(Yg(t)):{}}var XM=BW;function WW(t){return function(e,i,o){for(var r=-1,n=Object(e),s=o(e),a=s.length;a--;){var l=s[t?a:++r];if(i(n[l],l,n)===!1)break}return e}}var ZM=WW;var UW=ZM(),JM=UW;function jW(t,e,i){(i!==void 0&&!Xr(t[e],i)||i===void 0&&!(e in t))&&Za(t,e,i)}var Tc=jW;function qW(t){return Do(t)&&Ja(t)}var eT=qW;function KW(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}var Ac=KW;function $W(t){return JR(t,Kg(t))}var tT=$W;function YW(t,e,i,o,r,n,s){var a=Ac(t,i),l=Ac(e,i),d=s.get(l);if(d){Tc(t,i,d);return}var c=n?n(a,l,i+"",t,e,s):void 0,u=c===void 0;if(u){var h=Dc(l),p=!h&&jg(l),m=!h&&!p&&qg(l);c=l,h||p||m?Dc(a)?c=a:eT(a)?c=KR(a):p?(u=!1,c=$M(l,!0)):m?(u=!1,c=QM(l,!0)):c=[]:NM(l)||Rc(l)?(c=a,Rc(a)?c=tT(a):(!pi(a)||Ya(a))&&(c=XM(l))):u=!1}u&&(s.set(l,c),r(c,l,o,n,s),s.delete(l)),Tc(t,i,c)}var iT=YW;function oT(t,e,i,o,r){t!==e&&JM(e,function(n,s){if(r||(r=new WM),pi(n))iT(t,e,s,i,oT,o,r);else{var a=o?o(Ac(t,s),n,s+"",t,e,r):void 0;a===void 0&&(a=n),Tc(t,s,a)}},Kg)}var rT=oT;var QW=rM(function(t,e,i){rT(t,e,i)}),Qg=QW;var nT=new Z("Configuration for ngCharts");function sT(...t){return{registerables:[...OR,...t]}}function aT(...t){let e=Qg({},...t);return{provide:nT,useValue:e}}var XW=(()=>{let e=class e{constructor(){this.colorschemesOptions=new Pt(void 0)}setColorschemesOptions(o){this.pColorschemesOptions=o,this.colorschemesOptions.next(o)}getColorschemesOptions(){return this.pColorschemesOptions}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),lT=(()=>{let e=class e{constructor(o,r,n,s){this.zone=r,this.themeService=n,this.type="bar",this.plugins=[],this.chartClick=new M,this.chartHover=new M,this.subs=[],this.themeOverrides={},s?.registerables&&Lg.register(...s.registerables),s?.defaults&&Ke.set(s.defaults),this.ctx=o.nativeElement.getContext("2d"),this.subs.push(this.themeService.colorschemesOptions.pipe(nn()).subscribe(a=>this.themeChanged(a)))}ngOnChanges(o){let r=["type"],n=Object.getOwnPropertyNames(o);if(n.some(s=>r.includes(s))||n.every(s=>o[s].isFirstChange()))this.render();else{let s=this.getChartConfiguration();this.chart&&(Object.assign(this.chart.config.data,s.data),this.chart.config.plugins&&Object.assign(this.chart.config.plugins,s.plugins),this.chart.config.options&&Object.assign(this.chart.config.options,s.options)),this.update()}}ngOnDestroy(){this.chart&&(this.chart.destroy(),this.chart=void 0),this.subs.forEach(o=>o.unsubscribe())}render(){return this.chart&&this.chart.destroy(),this.zone.runOutsideAngular(()=>this.chart=new Lg(this.ctx,this.getChartConfiguration()))}update(o){this.chart&&this.zone.runOutsideAngular(()=>this.chart?.update(o))}hideDataset(o,r){this.chart&&(this.chart.getDatasetMeta(o).hidden=r,this.update())}isDatasetHidden(o){return this.chart?.getDatasetMeta(o)?.hidden}toBase64Image(){return this.chart?.toBase64Image()}themeChanged(o){this.themeOverrides=o,this.chart&&(this.chart.config.options&&Object.assign(this.chart.config.options,this.getChartOptions()),this.update())}getChartOptions(){return Qg({onHover:(o,r)=>{!this.chartHover.observed&&!this.chartHover.observers?.length||this.zone.run(()=>this.chartHover.emit({event:o,active:r}))},onClick:(o,r)=>{!this.chartClick.observed&&!this.chartClick.observers?.length||this.zone.run(()=>this.chartClick.emit({event:o,active:r}))}},this.themeOverrides,this.options,{plugins:{legend:{display:this.legend}}})}getChartConfiguration(){return{type:this.type,data:this.getChartData(),options:this.getChartOptions(),plugins:this.plugins}}getChartData(){return this.data?this.data:{labels:this.labels||[],datasets:this.datasets||[]}}};e.\u0275fac=function(r){return new(r||e)(W(Te),W(ee),W(XW),W(nT,8))},e.\u0275dir=ye({type:e,selectors:[["canvas","baseChart",""]],inputs:{type:"type",legend:"legend",data:"data",options:"options",plugins:"plugins",labels:"labels",datasets:"datasets"},outputs:{chartClick:"chartClick",chartHover:"chartHover"},exportAs:["base-chart"],standalone:!0,features:[Ot]});let t=e;return t})();function JW(t,e){if(t&1){let i=Dt();G(0,"li",6),ne("click",function(){let r=wt(i).$implicit,n=ie();return yt(n.selectUser(r))}),Q(1),B()}if(t&2){let i=e.$implicit,o=ie();fi("selected",o.selectedUser===i),z(),at(" ",i.user_name," ")}}var dT=(()=>{let e=class e{constructor(o){this.workoutService=o,this.users=[],this.selectedUser=null,this.chartData=[],this.chartLabels=[],this.chartOptions={responsive:!0,scales:{x:{title:{display:!0,text:"Workout Types"}},y:{title:{display:!0,text:"Minutes"},beginAtZero:!0}},plugins:{legend:{position:"top"},tooltip:{callbacks:{label:r=>`Minutes: ${r.raw}`}}}},this.chartType="bar"}ngOnInit(){this.users=[{id:1,user_name:"John Doe",workouts:[{workout_type:"Running",workout_minutes:30},{workout_type:"Cycling",workout_minutes:45}]},{id:2,user_name:"Jane Smith",workouts:[{workout_type:"Swimming",workout_minutes:60},{workout_type:"Running",workout_minutes:20}]},{id:3,user_name:"Mike Johnson",workouts:[{workout_type:"Yoga",workout_minutes:50},{workout_type:"Cycling",workout_minutes:40}]}],this.users.length>0&&this.selectUser(this.users[0])}selectUser(o){this.selectedUser=o,console.log("Selected User:",this.selectedUser),this.updateChartData()}updateChartData(){if(!this.selectedUser||!this.selectedUser.workouts){console.error("No workouts data available for the selected user.");return}console.log("Workouts Data:",this.selectedUser.workouts);let o=[...new Set(this.selectedUser.workouts.map(r=>r.workout_type))];console.log("Workout Types:",o),this.chartLabels=o,this.chartData=[{label:"Minutes",data:o.map(r=>this.selectedUser.workouts.filter(n=>n.workout_type===r).reduce((n,s)=>n+s.workout_minutes,0)),backgroundColor:"rgba(63, 81, 181, 0.5)",borderColor:"rgba(63, 81, 181, 1)",borderWidth:1}],console.log("Chart Data:",this.chartData)}};e.\u0275fac=function(r){return new(r||e)(W(Ma))},e.\u0275cmp=Me({type:e,selectors:[["app-workout-progress"]],decls:9,vars:7,consts:[[1,"container"],[1,"user-list"],[3,"selected","click",4,"ngFor","ngForOf"],[1,"chart-container"],[2,"display","block"],["baseChart","",3,"datasets","labels","options","legend","type"],[3,"click"]],template:function(r,n){r&1&&(G(0,"div",0)(1,"div",1)(2,"ul"),Ee(3,JW,2,3,"li",2),B()(),G(4,"div",3)(5,"h2"),Q(6),B(),G(7,"div",4),le(8,"canvas",5),B()()()),r&2&&(z(3),U("ngForOf",n.users),z(3),at("",n.selectedUser==null?null:n.selectedUser.user_name,"'s Workout Progress"),z(2),U("datasets",n.chartData)("labels",n.chartLabels)("options",n.chartOptions)("legend",!0)("type",n.chartType))},dependencies:[no,lT],styles:[".container[_ngcontent-%COMP%]{display:flex}.user-list[_ngcontent-%COMP%]{width:20%}.user-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:none;padding:0}.user-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:10px;cursor:pointer;border-radius:10px}.user-list[_ngcontent-%COMP%]   li.selected[_ngcontent-%COMP%]{background-color:#fff;font-weight:700}.chart-container[_ngcontent-%COMP%]{width:80%;background-color:#fff;border-radius:10px;padding:20px;margin-left:20px}"]});let t=e;return t})();var eU=[{path:"",redirectTo:"/dashboard",pathMatch:"full"},{path:"",component:m0,children:[{path:"dashboard",component:NE},{path:"workout-list",component:kE},{path:"workout-form",component:w0},{path:"workout-progress",component:dT}]}],cT=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=re({type:e}),e.\u0275inj=oe({imports:[Lf.forRoot(eU),Lf]});let t=e;return t})();var uT=(()=>{let e=class e{onToggleSidebar(o){this.screenWidth=o.screenWidth,this.isSidebarCollapsed=o.collapsed}toggleSidebar(){this.isSidebarCollapsed=!this.isSidebarCollapsed}constructor(){this.title="healthchallengetracker",this.isSidebarCollapsed=!1,this.screenWidth=0}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Me({type:e,selectors:[["app-root"]],decls:1,vars:0,template:function(r,n){r&1&&le(0,"router-outlet")},dependencies:[ql]});let t=e;return t})();var hT=["toast-component",""];function tU(t,e){if(t&1){let i=Dt();G(0,"button",5),ne("click",function(){wt(i);let r=ie();return yt(r.remove())}),G(1,"span",6),Q(2,"\xD7"),B()()}}function iU(t,e){if(t&1&&(pp(0),Q(1),fp()),t&2){let i=ie(2);z(),at("[",i.duplicatesCount+1,"]")}}function oU(t,e){if(t&1&&(G(0,"div"),Q(1),Ee(2,iU,2,1,"ng-container",4),B()),t&2){let i=ie();Xt(i.options.titleClass),gt("aria-label",i.title),z(),at(" ",i.title," "),z(),U("ngIf",i.duplicatesCount)}}function rU(t,e){if(t&1&&le(0,"div",7),t&2){let i=ie();Xt(i.options.messageClass),U("innerHTML",i.message,dp)}}function nU(t,e){if(t&1&&(G(0,"div",8),Q(1),B()),t&2){let i=ie();Xt(i.options.messageClass),gt("aria-label",i.message),z(),at(" ",i.message," ")}}function sU(t,e){if(t&1&&(G(0,"div"),le(1,"div",9),B()),t&2){let i=ie();z(),cr("width",i.width+"%")}}function aU(t,e){if(t&1){let i=Dt();G(0,"button",5),ne("click",function(){wt(i);let r=ie();return yt(r.remove())}),G(1,"span",6),Q(2,"\xD7"),B()()}}function lU(t,e){if(t&1&&(pp(0),Q(1),fp()),t&2){let i=ie(2);z(),at("[",i.duplicatesCount+1,"]")}}function dU(t,e){if(t&1&&(G(0,"div"),Q(1),Ee(2,lU,2,1,"ng-container",4),B()),t&2){let i=ie();Xt(i.options.titleClass),gt("aria-label",i.title),z(),at(" ",i.title," "),z(),U("ngIf",i.duplicatesCount)}}function cU(t,e){if(t&1&&le(0,"div",7),t&2){let i=ie();Xt(i.options.messageClass),U("innerHTML",i.message,dp)}}function uU(t,e){if(t&1&&(G(0,"div",8),Q(1),B()),t&2){let i=ie();Xt(i.options.messageClass),gt("aria-label",i.message),z(),at(" ",i.message," ")}}function hU(t,e){if(t&1&&(G(0,"div"),le(1,"div",9),B()),t&2){let i=ie();z(),cr("width",i.width+"%")}}var Iw=class{_attachedHost;component;viewContainerRef;injector;constructor(e,i){this.component=e,this.injector=i}attach(e,i){return this._attachedHost=e,e.attach(this,i)}detach(){let e=this._attachedHost;if(e)return this._attachedHost=void 0,e.detach()}get isAttached(){return this._attachedHost!=null}setAttachedHost(e){this._attachedHost=e}},Pw=class{_attachedPortal;_disposeFn;attach(e,i){return this._attachedPortal=e,this.attachComponentPortal(e,i)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(e){this._disposeFn=e}},Fw=class{_overlayRef;componentInstance;duplicatesCount=0;_afterClosed=new pe;_activate=new pe;_manualClose=new pe;_resetTimeout=new pe;_countDuplicate=new pe;constructor(e){this._overlayRef=e}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(e,i){e&&this._resetTimeout.next(),i&&this._countDuplicate.next(++this.duplicatesCount)}},rl=class{toastId;config;message;title;toastType;toastRef;_onTap=new pe;_onAction=new pe;constructor(e,i,o,r,n,s){this.toastId=e,this.config=i,this.message=o,this.title=r,this.toastType=n,this.toastRef=s,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(e){this._onAction.next(e)}onAction(){return this._onAction.asObservable()}},gT={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing"},pT=new Z("ToastConfig"),Ow=class extends Pw{_hostDomElement;_componentFactoryResolver;_appRef;constructor(e,i,o){super(),this._hostDomElement=e,this._componentFactoryResolver=i,this._appRef=o}attachComponentPortal(e,i){let o=this._componentFactoryResolver.resolveComponentFactory(e.component),r;return r=o.create(e.injector),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.detachView(r.hostView),r.destroy()}),i?this._hostDomElement.insertBefore(this._getComponentRootNode(r),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(r)),r}_getComponentRootNode(e){return e.hostView.rootNodes[0]}},gU=(()=>{class t{_document=O(fe);_containerElement;ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let i=this._document.createElement("div");i.classList.add("overlay-container"),i.setAttribute("aria-live","polite"),this._document.body.appendChild(i),this._containerElement=i}static \u0275fac=function(o){return new(o||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),kw=class{_portalHost;constructor(e){this._portalHost=e}attach(e,i=!0){return this._portalHost.attach(e,i)}detach(){return this._portalHost.detach()}},pU=(()=>{class t{_overlayContainer=O(gU);_componentFactoryResolver=O(fl);_appRef=O(ro);_document=O(fe);_paneElements=new Map;create(i,o){return this._createOverlayRef(this.getPaneElement(i,o))}getPaneElement(i="",o){return this._paneElements.get(o)||this._paneElements.set(o,{}),this._paneElements.get(o)[i]||(this._paneElements.get(o)[i]=this._createPaneElement(i,o)),this._paneElements.get(o)[i]}_createPaneElement(i,o){let r=this._document.createElement("div");return r.id="toast-container",r.classList.add(i),r.classList.add("toast-container"),o?o.getContainerElement().appendChild(r):this._overlayContainer.getContainerElement().appendChild(r),r}_createPortalHost(i){return new Ow(i,this._componentFactoryResolver,this._appRef)}_createOverlayRef(i){return new kw(this._createPortalHost(i))}static \u0275fac=function(o){return new(o||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),fT=(()=>{class t{overlay;_injector;sanitizer;ngZone;toastrConfig;currentlyActive=0;toasts=[];overlayContainer;previousToastMessage;index=0;constructor(i,o,r,n,s){this.overlay=o,this._injector=r,this.sanitizer=n,this.ngZone=s,this.toastrConfig=L(L({},i.default),i.config),i.config.iconClasses&&(this.toastrConfig.iconClasses=L(L({},i.default.iconClasses),i.config.iconClasses))}show(i,o,r={},n=""){return this._preBuildNotification(n,i,o,this.applyConfig(r))}success(i,o,r={}){let n=this.toastrConfig.iconClasses.success||"";return this._preBuildNotification(n,i,o,this.applyConfig(r))}error(i,o,r={}){let n=this.toastrConfig.iconClasses.error||"";return this._preBuildNotification(n,i,o,this.applyConfig(r))}info(i,o,r={}){let n=this.toastrConfig.iconClasses.info||"";return this._preBuildNotification(n,i,o,this.applyConfig(r))}warning(i,o,r={}){let n=this.toastrConfig.iconClasses.warning||"";return this._preBuildNotification(n,i,o,this.applyConfig(r))}clear(i){for(let o of this.toasts)if(i!==void 0){if(o.toastId===i){o.toastRef.manualClose();return}}else o.toastRef.manualClose()}remove(i){let o=this._findToast(i);if(!o||(o.activeToast.toastRef.close(),this.toasts.splice(o.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){let r=this.toasts[this.currentlyActive].toastRef;r.isInactive()||(this.currentlyActive=this.currentlyActive+1,r.activate())}return!0}findDuplicate(i="",o="",r,n){let{includeTitleDuplicates:s}=this.toastrConfig;for(let a of this.toasts){let l=s&&a.title===i;if((!s||l)&&a.message===o)return a.toastRef.onDuplicate(r,n),a}return null}applyConfig(i={}){return L(L({},this.toastrConfig),i)}_findToast(i){for(let o=0;o<this.toasts.length;o++)if(this.toasts[o].toastId===i)return{index:o,activeToast:this.toasts[o]};return null}_preBuildNotification(i,o,r,n){return n.onActivateTick?this.ngZone.run(()=>this._buildNotification(i,o,r,n)):this._buildNotification(i,o,r,n)}_buildNotification(i,o,r,n){if(!n.toastComponent)throw new Error("toastComponent required");let s=this.findDuplicate(r,o,this.toastrConfig.resetTimeoutOnDuplicate&&n.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&r||o)&&this.toastrConfig.preventDuplicates&&s!==null)return s;this.previousToastMessage=o;let a=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(a=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));let l=this.overlay.create(n.positionClass,this.overlayContainer);this.index=this.index+1;let d=o;o&&n.enableHtml&&(d=this.sanitizer.sanitize(Ao.HTML,o));let c=new Fw(l),u=new rl(this.index,n,d,r,i,c),h=[{provide:rl,useValue:u}],p=Ht.create({providers:h,parent:this._injector}),m=new Iw(n.toastComponent,p),C=l.attach(m,n.newestOnTop);c.componentInstance=C.instance;let w={toastId:this.index,title:r||"",message:o||"",toastRef:c,onShown:c.afterActivate(),onHidden:c.afterClosed(),onTap:u.onTap(),onAction:u.onAction(),portal:C};return a||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{w.toastRef.activate()})),this.toasts.push(w),w}static \u0275fac=function(o){return new(o||t)(F(pT),F(pU),F(Ht),F(Lp),F(ee))};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),fU=(()=>{class t{toastrService;toastPackage;ngZone;message;title;options;duplicatesCount;originalTimeout;width=-1;toastClasses="";state;get displayStyle(){if(this.state.value==="inactive")return"none"}timeout;intervalId;hideTime;sub;sub1;sub2;sub3;constructor(i,o,r){this.toastrService=i,this.toastPackage=o,this.ngZone=r,this.message=o.message,this.title=o.title,this.options=o.config,this.originalTimeout=o.config.timeOut,this.toastClasses=`${o.toastType} ${o.config.toastClass}`,this.sub=o.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=o.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=o.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=o.toastRef.countDuplicate().subscribe(n=>{this.duplicatesCount=n}),this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}}}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state=we(L({},this.state),{value:"active"}),!(this.options.disableTimeOut===!0||this.options.disableTimeOut==="timeOut")&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=new Date().getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(this.width===0||this.width===100||!this.options.timeOut)return;let i=new Date().getTime(),o=this.hideTime-i;this.width=o/this.options.timeOut*100,this.options.progressAnimation==="increasing"&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state=we(L({},this.state),{value:"active"}),this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=new Date().getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){this.state.value!=="removed"&&(clearTimeout(this.timeout),this.state=we(L({},this.state),{value:"removed"}),this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){this.state.value!=="removed"&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){this.state.value!=="removed"&&this.options.disableTimeOut!=="extendedTimeOut"&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){this.options.disableTimeOut===!0||this.options.disableTimeOut==="extendedTimeOut"||this.options.extendedTimeOut===0||this.state.value==="removed"||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=new Date().getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(i,o){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(i),o)):this.timeout=setTimeout(()=>i(),o)}outsideInterval(i,o){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(i),o)):this.intervalId=setInterval(()=>i(),o)}runInsideAngular(i){this.ngZone?this.ngZone.run(()=>i()):i()}static \u0275fac=function(o){return new(o||t)(W(fT),W(rl),W(ee))};static \u0275cmp=Me({type:t,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(o,r){o&1&&ne("click",function(){return r.tapToast()})("mouseenter",function(){return r.stickAround()})("mouseleave",function(){return r.delayedHideToast()}),o&2&&(sy("@flyInOut",r.state),Xt(r.toastClasses),cr("display",r.displayStyle))},standalone:!0,features:[mi],attrs:hT,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(o,r){o&1&&Ee(0,tU,3,0,"button",0)(1,oU,3,5,"div",1)(2,rU,1,3,"div",2)(3,nU,2,4,"div",3)(4,sU,2,2,"div",4),o&2&&(U("ngIf",r.options.closeButton),z(),U("ngIf",r.title),z(),U("ngIf",r.message&&r.options.enableHtml),z(),U("ngIf",r.message&&!r.options.enableHtml),z(),U("ngIf",r.options.progressBar))},dependencies:[Fo],encapsulation:2,data:{animation:[Es("flyInOut",[Yc("inactive",Ei({opacity:0})),Yc("active",Ei({opacity:1})),Yc("removed",Ei({opacity:0})),fr("inactive => active",pr("{{ easeTime }}ms {{ easing }}")),fr("active => removed",pr("{{ easeTime }}ms {{ easing }}"))])]}})}return t})(),mU=we(L({},gT),{toastComponent:fU}),vU=(t={})=>ar([{provide:pT,useValue:{default:mU,config:t}}]),mT=(()=>{class t{static forRoot(i={}){return{ngModule:t,providers:[vU(i)]}}static \u0275fac=function(o){return new(o||t)};static \u0275mod=re({type:t});static \u0275inj=oe({})}return t})();var CU=(()=>{class t{toastrService;toastPackage;appRef;message;title;options;duplicatesCount;originalTimeout;width=-1;toastClasses="";get displayStyle(){return this.state==="inactive"?"none":null}state="inactive";timeout;intervalId;hideTime;sub;sub1;sub2;sub3;constructor(i,o,r){this.toastrService=i,this.toastPackage=o,this.appRef=r,this.message=o.message,this.title=o.title,this.options=o.config,this.originalTimeout=o.config.timeOut,this.toastClasses=`${o.toastType} ${o.config.toastClass}`,this.sub=o.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=o.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=o.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=o.toastRef.countDuplicate().subscribe(n=>{this.duplicatesCount=n})}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state="active",!(this.options.disableTimeOut===!0||this.options.disableTimeOut==="timeOut")&&this.options.timeOut&&(this.timeout=setTimeout(()=>{this.remove()},this.options.timeOut),this.hideTime=new Date().getTime()+this.options.timeOut,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))),this.options.onActivateTick&&this.appRef.tick()}updateProgress(){if(this.width===0||this.width===100||!this.options.timeOut)return;let i=new Date().getTime(),o=this.hideTime-i;this.width=o/this.options.timeOut*100,this.options.progressAnimation==="increasing"&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state="active",this.options.timeOut=this.originalTimeout,this.timeout=setTimeout(()=>this.remove(),this.originalTimeout),this.hideTime=new Date().getTime()+(this.originalTimeout||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))}remove(){this.state!=="removed"&&(clearTimeout(this.timeout),this.state="removed",this.timeout=setTimeout(()=>this.toastrService.remove(this.toastPackage.toastId)))}tapToast(){this.state!=="removed"&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){this.state!=="removed"&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){this.options.disableTimeOut===!0||this.options.disableTimeOut==="extendedTimeOut"||this.options.extendedTimeOut===0||this.state==="removed"||(this.timeout=setTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=new Date().getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10)))}static \u0275fac=function(o){return new(o||t)(W(fT),W(rl),W(ro))};static \u0275cmp=Me({type:t,selectors:[["","toast-component",""]],hostVars:4,hostBindings:function(o,r){o&1&&ne("click",function(){return r.tapToast()})("mouseenter",function(){return r.stickAround()})("mouseleave",function(){return r.delayedHideToast()}),o&2&&(Xt(r.toastClasses),cr("display",r.displayStyle))},standalone:!0,features:[mi],attrs:hT,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(o,r){o&1&&Ee(0,aU,3,0,"button",0)(1,dU,3,5,"div",1)(2,cU,1,3,"div",2)(3,uU,2,4,"div",3)(4,hU,2,2,"div",4),o&2&&(U("ngIf",r.options.closeButton),z(),U("ngIf",r.title),z(),U("ngIf",r.message&&r.options.enableHtml),z(),U("ngIf",r.message&&!r.options.enableHtml),z(),U("ngIf",r.options.progressBar))},dependencies:[Fo],encapsulation:2})}return t})(),QQ=we(L({},gT),{toastComponent:CU});function wU(){return!0}var yU=new Z("mat-sanity-checks",{providedIn:"root",factory:wU}),Ro=(()=>{let e=class e{constructor(o,r,n){this._sanityChecks=r,this._document=n,this._hasDoneGlobalChecks=!1,o._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(o){return ec()?!1:typeof this._sanityChecks=="boolean"?this._sanityChecks:!!this._sanityChecks[o]}};e.\u0275fac=function(r){return new(r||e)(F(d0),F(yU,8),F(fe))},e.\u0275mod=re({type:e}),e.\u0275inj=oe({imports:[Nr,Nr]});let t=e;return t})();var Gi=function(t){return t[t.FADING_IN=0]="FADING_IN",t[t.VISIBLE=1]="VISIBLE",t[t.FADING_OUT=2]="FADING_OUT",t[t.HIDDEN=3]="HIDDEN",t}(Gi||{}),Lw=class{constructor(e,i,o,r=!1){this._renderer=e,this.element=i,this.config=o,this._animationForciblyDisabledThroughCss=r,this.state=Gi.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}},vT=Jd({passive:!0,capture:!0}),Nw=class{constructor(){this._events=new Map,this._delegateEventHandler=e=>{let i=Zi(e);i&&this._events.get(e.type)?.forEach((o,r)=>{(r===i||r.contains(i))&&o.forEach(n=>n.handleEvent(e))})}}addHandler(e,i,o,r){let n=this._events.get(i);if(n){let s=n.get(o);s?s.add(r):n.set(o,new Set([r]))}else this._events.set(i,new Map([[o,new Set([r])]])),e.runOutsideAngular(()=>{document.addEventListener(i,this._delegateEventHandler,vT)})}removeHandler(e,i,o){let r=this._events.get(e);if(!r)return;let n=r.get(i);n&&(n.delete(o),n.size===0&&r.delete(i),r.size===0&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,vT)))}},CT={enterDuration:225,exitDuration:150},bU=800,wT=Jd({passive:!0,capture:!0}),yT=["mousedown","touchstart"],bT=["mouseup","mouseleave","touchend","touchcancel"],Ic=class Ic{constructor(e,i,o,r){this._target=e,this._ngZone=i,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=Xd(o))}fadeInRipple(e,i,o={}){let r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),n=L(L({},CT),o.animation);o.centered&&(e=r.left+r.width/2,i=r.top+r.height/2);let s=o.radius||SU(e,i,r),a=e-r.left,l=i-r.top,d=n.enterDuration,c=document.createElement("div");c.classList.add("mat-ripple-element"),c.style.left=`${a-s}px`,c.style.top=`${l-s}px`,c.style.height=`${s*2}px`,c.style.width=`${s*2}px`,o.color!=null&&(c.style.backgroundColor=o.color),c.style.transitionDuration=`${d}ms`,this._containerElement.appendChild(c);let u=window.getComputedStyle(c),h=u.transitionProperty,p=u.transitionDuration,m=h==="none"||p==="0s"||p==="0s, 0s"||r.width===0&&r.height===0,C=new Lw(this,c,o,m);c.style.transform="scale3d(1, 1, 1)",C.state=Gi.FADING_IN,o.persistent||(this._mostRecentTransientRipple=C);let w=null;return!m&&(d||n.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let b=()=>this._finishRippleTransition(C),y=()=>this._destroyRipple(C);c.addEventListener("transitionend",b),c.addEventListener("transitioncancel",y),w={onTransitionEnd:b,onTransitionCancel:y}}),this._activeRipples.set(C,w),(m||!d)&&this._finishRippleTransition(C),C}fadeOutRipple(e){if(e.state===Gi.FADING_OUT||e.state===Gi.HIDDEN)return;let i=e.element,o=L(L({},CT),e.config.animation);i.style.transitionDuration=`${o.exitDuration}ms`,i.style.opacity="0",e.state=Gi.FADING_OUT,(e._animationForciblyDisabledThroughCss||!o.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){let i=Xd(e);!this._platform.isBrowser||!i||i===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=i,yT.forEach(o=>{Ic._eventManager.addHandler(this._ngZone,o,i,this)}))}handleEvent(e){e.type==="mousedown"?this._onMousedown(e):e.type==="touchstart"?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{bT.forEach(i=>{this._triggerElement.addEventListener(i,this,wT)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){e.state===Gi.FADING_IN?this._startFadeOutTransition(e):e.state===Gi.FADING_OUT&&this._destroyRipple(e)}_startFadeOutTransition(e){let i=e===this._mostRecentTransientRipple,{persistent:o}=e.config;e.state=Gi.VISIBLE,!o&&(!i||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){let i=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=Gi.HIDDEN,i!==null&&(e.element.removeEventListener("transitionend",i.onTransitionEnd),e.element.removeEventListener("transitioncancel",i.onTransitionCancel)),e.element.remove()}_onMousedown(e){let i=iC(e),o=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+bU;!this._target.rippleDisabled&&!i&&!o&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!oC(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let i=e.changedTouches;if(i)for(let o=0;o<i.length;o++)this.fadeInRipple(i[o].clientX,i[o].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{let i=e.state===Gi.VISIBLE||e.config.terminateOnPointerUp&&e.state===Gi.FADING_IN;!e.config.persistent&&i&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let e=this._triggerElement;e&&(yT.forEach(i=>Ic._eventManager.removeHandler(i,e,this)),this._pointerUpEventsRegistered&&(bT.forEach(i=>e.removeEventListener(i,this,wT)),this._pointerUpEventsRegistered=!1))}};Ic._eventManager=new Nw;var ST=Ic;function SU(t,e,i){let o=Math.max(Math.abs(t-i.left),Math.abs(t-i.right)),r=Math.max(Math.abs(e-i.top),Math.abs(e-i.bottom));return Math.sqrt(o*o+r*r)}var xU=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=re({type:e}),e.\u0275inj=oe({imports:[Ro,Ro]});let t=e;return t})();var _U=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=re({type:e}),e.\u0275inj=oe({imports:[Ro]});let t=e;return t})();var zw=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=re({type:e}),e.\u0275inj=oe({imports:[xU,Ro,_U]});let t=e;return t})();var Xg=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=re({type:e}),e.\u0275inj=oe({imports:[Ro,gr,o0,Ro]});let t=e;return t})();var EU=new Z("mat-select-scroll-strategy",{providedIn:"root",factory:()=>{let t=O(jo);return()=>t.scrollStrategies.reposition()}});function DU(t){return()=>t.scrollStrategies.reposition()}var RU={provide:EU,deps:[jo],useFactory:DU};var _T=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=re({type:e}),e.\u0275inj=oe({providers:[RU],imports:[gr,Pa,zw,Ro,Kh,Xg,zw,Ro]});let t=e;return t})();var MU="@",TU=(()=>{let e=class e{constructor(o,r,n,s,a){this.doc=o,this.delegate=r,this.zone=n,this.animationType=s,this.moduleImpl=a,this._rendererFactoryPromise=null,this.scheduler=O(Nc,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){return(this.moduleImpl??import("./chunk-EPI3D4LB.js")).catch(r=>{throw new Pe(5300,!1)}).then(({\u0275createEngine:r,\u0275AnimationRendererFactory:n})=>{this._engine=r(this.animationType,this.doc,this.scheduler);let s=new n(this.delegate,this._engine,this.zone);return this.delegate=s,s})}createRenderer(o,r){let n=this.delegate.createRenderer(o,r);if(n.\u0275type===0)return n;typeof n.throwOnSyntheticProps=="boolean"&&(n.throwOnSyntheticProps=!1);let s=new Gw(n);return r?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(a=>{let l=a.createRenderer(o,r);s.use(l)}).catch(a=>{s.use(n)}),s}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}};e.\u0275fac=function(r){Lc()},e.\u0275prov=H({token:e,factory:e.\u0275fac});let t=e;return t})(),Gw=class{constructor(e){this.delegate=e,this.replay=[],this.\u0275type=1}use(e){if(this.delegate=e,this.replay!==null){for(let i of this.replay)i(e);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(e,i){return this.delegate.createElement(e,i)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}get destroyNode(){return this.delegate.destroyNode}appendChild(e,i){this.delegate.appendChild(e,i)}insertBefore(e,i,o,r){this.delegate.insertBefore(e,i,o,r)}removeChild(e,i,o){this.delegate.removeChild(e,i,o)}selectRootElement(e,i){return this.delegate.selectRootElement(e,i)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,i,o,r){this.delegate.setAttribute(e,i,o,r)}removeAttribute(e,i,o){this.delegate.removeAttribute(e,i,o)}addClass(e,i){this.delegate.addClass(e,i)}removeClass(e,i){this.delegate.removeClass(e,i)}setStyle(e,i,o,r){this.delegate.setStyle(e,i,o,r)}removeStyle(e,i,o){this.delegate.removeStyle(e,i,o)}setProperty(e,i,o){this.shouldReplay(i)&&this.replay.push(r=>r.setProperty(e,i,o)),this.delegate.setProperty(e,i,o)}setValue(e,i){this.delegate.setValue(e,i)}listen(e,i,o){return this.shouldReplay(i)&&this.replay.push(r=>r.listen(e,i,o)),this.delegate.listen(e,i,o)}shouldReplay(e){return this.replay!==null&&e.startsWith(MU)}};function ET(t="animations"){return zc("NgAsyncAnimations"),ar([{provide:bs,useFactory:(e,i,o)=>new TU(e,i,o,t),deps:[fe,Rs,ee]},{provide:dr,useValue:t==="noop"?"NoopAnimations":"BrowserAnimations"}])}var DT=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=re({type:e,bootstrap:[uT]}),e.\u0275inj=oe({providers:[ET(),aT(sT())],imports:[au,wu,cT,Xy,Pa,p0,ru,mT.forRoot(),Pb,Qd,OE,Xg,_T,C0.forRoot()]});let t=e;return t})();Ky().bootstrapModule(DT).catch(t=>console.error(t));
